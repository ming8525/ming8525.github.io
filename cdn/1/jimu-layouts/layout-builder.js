System.register(["jimu-core","jimu-for-builder","jimu-ui","jimu-layouts/layout-runtime","jimu-theme","jimu-core/dnd","jimu-ui/advanced/setting-components","jimu-for-builder/templates","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_for_builder__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core_dnd__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_for_builder_templates__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_style_setting_components__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_color_picker__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_for_builder__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core_dnd__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_for_builder_templates__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_style_setting_components__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_color_picker__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_for_builder__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core_dnd__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_for_builder_templates__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_style_setting_components__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_color_picker__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var reactIs = __webpack_require__(/*! react-is */ "./node_modules/react-is/index.js");

/**
 * Copyright 2015, Yahoo! Inc.
 * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.
 */
var REACT_STATICS = {
  childContextTypes: true,
  contextType: true,
  contextTypes: true,
  defaultProps: true,
  displayName: true,
  getDefaultProps: true,
  getDerivedStateFromError: true,
  getDerivedStateFromProps: true,
  mixins: true,
  propTypes: true,
  type: true
};
var KNOWN_STATICS = {
  name: true,
  length: true,
  prototype: true,
  caller: true,
  callee: true,
  arguments: true,
  arity: true
};
var FORWARD_REF_STATICS = {
  '$$typeof': true,
  render: true,
  defaultProps: true,
  displayName: true,
  propTypes: true
};
var MEMO_STATICS = {
  '$$typeof': true,
  compare: true,
  defaultProps: true,
  displayName: true,
  propTypes: true,
  type: true
};
var TYPE_STATICS = {};
TYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;
TYPE_STATICS[reactIs.Memo] = MEMO_STATICS;

function getStatics(component) {
  // React v16.11 and below
  if (reactIs.isMemo(component)) {
    return MEMO_STATICS;
  } // React v16.12 and above


  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;
}

var defineProperty = Object.defineProperty;
var getOwnPropertyNames = Object.getOwnPropertyNames;
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var getPrototypeOf = Object.getPrototypeOf;
var objectPrototype = Object.prototype;
function hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {
  if (typeof sourceComponent !== 'string') {
    // don't hoist over string (html) components
    if (objectPrototype) {
      var inheritedComponent = getPrototypeOf(sourceComponent);

      if (inheritedComponent && inheritedComponent !== objectPrototype) {
        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);
      }
    }

    var keys = getOwnPropertyNames(sourceComponent);

    if (getOwnPropertySymbols) {
      keys = keys.concat(getOwnPropertySymbols(sourceComponent));
    }

    var targetStatics = getStatics(targetComponent);
    var sourceStatics = getStatics(sourceComponent);

    for (var i = 0; i < keys.length; ++i) {
      var key = keys[i];

      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {
        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);

        try {
          // Avoid failures from read-only properties
          defineProperty(targetComponent, key, descriptor);
        } catch (e) {}
      }
    }
  }

  return targetComponent;
}

module.exports = hoistNonReactStatics;


/***/ }),

/***/ "./node_modules/invariant/invariant.js":
/*!*********************************************!*\
  !*** ./node_modules/invariant/invariant.js ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



/**
 * Use invariant() to assert state which your program assumes to be true.
 *
 * Provide sprintf-style format (only %s is supported) and arguments
 * to provide information about what broke and what you were
 * expecting.
 *
 * The invariant message will be stripped in production, but the invariant
 * will remain to ensure logic does not differ in production.
 */

var NODE_ENV = "development";

var invariant = function(condition, format, a, b, c, d, e, f) {
  if (NODE_ENV !== 'production') {
    if (format === undefined) {
      throw new Error('invariant requires an error message argument');
    }
  }

  if (!condition) {
    var error;
    if (format === undefined) {
      error = new Error(
        'Minified exception occurred; use the non-minified dev environment ' +
        'for the full error message and additional helpful warnings.'
      );
    } else {
      var args = [a, b, c, d, e, f];
      var argIndex = 0;
      error = new Error(
        format.replace(/%s/g, function() { return args[argIndex++]; })
      );
      error.name = 'Invariant Violation';
    }

    error.framesToPop = 1; // we don't care about invariant's own frame
    throw error;
  }
};

module.exports = invariant;


/***/ }),

/***/ "./node_modules/react-is/cjs/react-is.development.js":
/*!***********************************************************!*\
  !*** ./node_modules/react-is/cjs/react-is.development.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */





if (true) {
  (function() {
'use strict';

// The Symbol used to tag the ReactElement-like types. If there is no native Symbol
// nor polyfill, then a plain number is used for performance.
var hasSymbol = typeof Symbol === 'function' && Symbol.for;
var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;
var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;
var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;
var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;
var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;
var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;
var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary
// (unstable) APIs that have been removed. Can we remove the symbols?

var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;
var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;
var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;
var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;
var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;
var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;
var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;
var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;
var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;
var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;
var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;

function isValidElementType(type) {
  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.
  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);
}

function typeOf(object) {
  if (typeof object === 'object' && object !== null) {
    var $$typeof = object.$$typeof;

    switch ($$typeof) {
      case REACT_ELEMENT_TYPE:
        var type = object.type;

        switch (type) {
          case REACT_ASYNC_MODE_TYPE:
          case REACT_CONCURRENT_MODE_TYPE:
          case REACT_FRAGMENT_TYPE:
          case REACT_PROFILER_TYPE:
          case REACT_STRICT_MODE_TYPE:
          case REACT_SUSPENSE_TYPE:
            return type;

          default:
            var $$typeofType = type && type.$$typeof;

            switch ($$typeofType) {
              case REACT_CONTEXT_TYPE:
              case REACT_FORWARD_REF_TYPE:
              case REACT_LAZY_TYPE:
              case REACT_MEMO_TYPE:
              case REACT_PROVIDER_TYPE:
                return $$typeofType;

              default:
                return $$typeof;
            }

        }

      case REACT_PORTAL_TYPE:
        return $$typeof;
    }
  }

  return undefined;
} // AsyncMode is deprecated along with isAsyncMode

var AsyncMode = REACT_ASYNC_MODE_TYPE;
var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;
var ContextConsumer = REACT_CONTEXT_TYPE;
var ContextProvider = REACT_PROVIDER_TYPE;
var Element = REACT_ELEMENT_TYPE;
var ForwardRef = REACT_FORWARD_REF_TYPE;
var Fragment = REACT_FRAGMENT_TYPE;
var Lazy = REACT_LAZY_TYPE;
var Memo = REACT_MEMO_TYPE;
var Portal = REACT_PORTAL_TYPE;
var Profiler = REACT_PROFILER_TYPE;
var StrictMode = REACT_STRICT_MODE_TYPE;
var Suspense = REACT_SUSPENSE_TYPE;
var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated

function isAsyncMode(object) {
  {
    if (!hasWarnedAboutDeprecatedIsAsyncMode) {
      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint

      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');
    }
  }

  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;
}
function isConcurrentMode(object) {
  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;
}
function isContextConsumer(object) {
  return typeOf(object) === REACT_CONTEXT_TYPE;
}
function isContextProvider(object) {
  return typeOf(object) === REACT_PROVIDER_TYPE;
}
function isElement(object) {
  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;
}
function isForwardRef(object) {
  return typeOf(object) === REACT_FORWARD_REF_TYPE;
}
function isFragment(object) {
  return typeOf(object) === REACT_FRAGMENT_TYPE;
}
function isLazy(object) {
  return typeOf(object) === REACT_LAZY_TYPE;
}
function isMemo(object) {
  return typeOf(object) === REACT_MEMO_TYPE;
}
function isPortal(object) {
  return typeOf(object) === REACT_PORTAL_TYPE;
}
function isProfiler(object) {
  return typeOf(object) === REACT_PROFILER_TYPE;
}
function isStrictMode(object) {
  return typeOf(object) === REACT_STRICT_MODE_TYPE;
}
function isSuspense(object) {
  return typeOf(object) === REACT_SUSPENSE_TYPE;
}

exports.AsyncMode = AsyncMode;
exports.ConcurrentMode = ConcurrentMode;
exports.ContextConsumer = ContextConsumer;
exports.ContextProvider = ContextProvider;
exports.Element = Element;
exports.ForwardRef = ForwardRef;
exports.Fragment = Fragment;
exports.Lazy = Lazy;
exports.Memo = Memo;
exports.Portal = Portal;
exports.Profiler = Profiler;
exports.StrictMode = StrictMode;
exports.Suspense = Suspense;
exports.isAsyncMode = isAsyncMode;
exports.isConcurrentMode = isConcurrentMode;
exports.isContextConsumer = isContextConsumer;
exports.isContextProvider = isContextProvider;
exports.isElement = isElement;
exports.isForwardRef = isForwardRef;
exports.isFragment = isFragment;
exports.isLazy = isLazy;
exports.isMemo = isMemo;
exports.isPortal = isPortal;
exports.isProfiler = isProfiler;
exports.isStrictMode = isStrictMode;
exports.isSuspense = isSuspense;
exports.isValidElementType = isValidElementType;
exports.typeOf = typeOf;
  })();
}


/***/ }),

/***/ "./node_modules/react-is/index.js":
/*!****************************************!*\
  !*** ./node_modules/react-is/index.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


if (false) {} else {
  module.exports = __webpack_require__(/*! ./cjs/react-is.development.js */ "./node_modules/react-is/cjs/react-is.development.js");
}


/***/ }),

/***/ "./jimu-icons/svg/outlined/application/grid-template.svg":
/*!***************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/grid-template.svg ***!
  \***************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 18 18\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M1.5 1.5h5v5h-5zM.25 7.75V.25h7.5v7.5zM1.5 11.5h5v5h-5zM.25 17.75v-7.5h7.5v7.5zM16.5 1.5h-5v5h5zM10.25.25v7.5h7.5V.25zm3.125 17.5v-3.125H10.25v-1.25h3.125V10.25h1.25v3.125h3.125v1.25h-3.125v3.125z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/invisible.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/invisible.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M3.154 3.154a.527.527 0 0 1 .746 0l1.317 1.317A8.618 8.618 0 0 1 8 4c2.667 0 5.667 1.333 7 4-.696 1.393-1.847 2.422-3.168 3.087l1.014 1.013a.527.527 0 1 1-.746.746l-1.317-1.317A8.617 8.617 0 0 1 8 12c-2.667 0-5.667-1.333-7-4 .696-1.393 1.847-2.422 3.168-3.087L3.154 3.9a.527.527 0 0 1 0-.746m1.698 2.443C3.726 6.087 2.782 6.882 2 8c1.422 2.033 3.382 3 6 3a8.66 8.66 0 0 0 2.03-.225l-.675-.674A2.5 2.5 0 0 1 5.9 6.644zm6.296 4.805C12.275 9.913 13.218 9.119 14 8c-1.422-2.033-3.382-3-6-3-.726 0-1.402.074-2.03.225l.675.674a2.5 2.5 0 0 1 3.457 3.456zM6.5 8c0-.221.048-.431.134-.62l1.987 1.986A1.5 1.5 0 0 1 6.5 8m.88-1.366 1.986 1.987a1.5 1.5 0 0 0-1.987-1.987\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/maxgrid.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/maxgrid.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 12 12\"><path fill=\"#fff\" fill-rule=\"evenodd\" d=\"M12 0H7v1h4v4h1V1zM0 12h5v-1H1V7H0v4z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/setting.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/setting.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 21.98 21.98 0 0 1-1.49 1.194 5.17 5.17 0 0 1-.007 1.183l1.464 1.119a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 22.445 22.445 0 0 1-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21.019 21.019 0 0 1-.317-1.853 5.34 5.34 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 0 0-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/template.svg":
/*!**********************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/template.svg ***!
  \**********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M14 2H2v2h12zM2 1H1v4h14V1h-1zm2 7H2v6h2zM2 7H1v8h4V7H4zm6 1h6v6H8zM7 7h8v8H7V8z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/visible.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/visible.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/brand/block.svg":
/*!*************************************************!*\
  !*** ./jimu-icons/svg/outlined/brand/block.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M6 5H2v6h4zM1 4v8h6V4zM14 5h-4v6h4zM9 4v8h6V4z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/brand/screen-group.svg":
/*!********************************************************!*\
  !*** ./jimu-icons/svg/outlined/brand/screen-group.svg ***!
  \********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 2h12v4H2zM1 7V1h14v6zm1 3h12v4H2zm-1 5V9h14v6z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/data/row.svg":
/*!**********************************************!*\
  !*** ./jimu-icons/svg/outlined/data/row.svg ***!
  \**********************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 2v12h3V2zm4 0v12h4V2zm8 12h-3V2h3zM1 14a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/align-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/align-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M1 1.5a.5.5 0 0 1 1 0v13a.5.5 0 0 1-1 0zM14 9H4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1M4 12v-2h10v2zm0-9h6a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1m0 1v2h6V4z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-stretched.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-stretched.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"m1 7.5 3-2V7h2v1H4v1.5zm14 0-3 2V8h-2V7h2V5.5zM7 7h2v1H7z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/bring-back.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/bring-back.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M14.5 15a.5.5 0 0 0 0-1H7.46l2.348-2.138a.508.508 0 1 0-.684-.752L8 12.133V2h6.5a.5.5 0 0 0 0-1H.5a.5.5 0 0 0 0 1H7v10.207l-1.124-1.024a.508.508 0 1 0-.684.752L7.46 14H.5a.5.5 0 0 0 0 1zM14 6.5a.5.5 0 0 1-.5.5H10V6h3.5a.5.5 0 0 1 .5.5m-13 0a.5.5 0 0 0 .5.5H5V6H1.5a.5.5 0 0 0-.5.5\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/bring-front.svg":
/*!*************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/bring-front.svg ***!
  \*************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M.5 1a.5.5 0 0 0 0 1h7.04L5.192 4.138a.508.508 0 1 0 .684.752L7 3.867V14H.5a.5.5 0 0 0 0 1h14a.5.5 0 0 0 0-1H8V3.793l1.124 1.024a.508.508 0 0 0 .684-.752L7.54 2h6.96a.5.5 0 0 0 0-1zM1 9.5a.5.5 0 0 1 .5-.5H5v1H1.5a.5.5 0 0 1-.5-.5m13 0a.5.5 0 0 0-.5-.5H10v1h3.5a.5.5 0 0 0 .5-.5\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/left.svg":
/*!******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/left.svg ***!
  \******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.538.538 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.538.538 0 0 1 .738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/max-all.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/max-all.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 2.707v1.45a.5.5 0 0 1-1 0V1h3.05a.5.5 0 1 1 0 1H2.707L8 7.29 13.293 2H11.95a.5.5 0 1 1 0-1H15v3.156a.5.5 0 0 1-1 0v-1.45L8.707 7.999l5.29 5.289v-1.55a.5.5 0 1 1 1 0V15H11.84a.5.5 0 1 1 0-1h1.456L8 8.705 2.704 14h1.453a.5.5 0 1 1 0 1H1v-3.263a.5.5 0 0 1 1 0v1.553l5.293-5.292z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/max-height.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/max-height.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M7.54 1H14v13H7.46l2.348-2.138a.508.508 0 1 0-.684-.752L8 12.134V9H7v3.206l-1.124-1.022a.508.508 0 1 0-.685.751L7.46 14H1V1zm0 0L5.192 3.138a.508.508 0 1 0 .684.752L7 2.867V6h1V2.794l1.124 1.023a.508.508 0 0 0 .684-.752zM0 1a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/max-width.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/max-width.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M14 1v13H1V7.46l2.138 2.348a.508.508 0 0 0 .752-.684L2.867 8H6V7H2.794l1.023-1.124a.508.508 0 0 0-.752-.685L1 7.46V1zm0-1a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1zm-1.867 7L11.11 5.876a.508.508 0 1 1 .752-.684L14 7.54l-2.065 2.268a.508.508 0 0 1-.751-.684L12.206 8H9V7z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.538.538 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.538.538 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/send-backward.svg":
/*!***************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/send-backward.svg ***!
  \***************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M9.124 12.11 8 13.133V2h6.5a.5.5 0 0 0 0-1H.5a.5.5 0 0 0 0 1H7v11.207l-1.124-1.024a.508.508 0 1 0-.684.752L7.46 15l2.348-2.138a.508.508 0 1 0-.684-.752M13.5 7a.5.5 0 0 0 0-1H10v1zm-12 0a.5.5 0 0 1 0-1H5v1z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/send-forward.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/send-forward.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M5.876 3.89 7 2.867V14H.5a.5.5 0 0 0 0 1h14a.5.5 0 0 0 0-1H8V2.794l1.124 1.023a.508.508 0 0 0 .684-.752L7.54 1 5.192 3.138a.508.508 0 0 0 .684.752M1.5 9a.5.5 0 0 0 0 1H5V9zm12 0a.5.5 0 0 1 0 1H10V9z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/snap-bottom.svg":
/*!*************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/snap-bottom.svg ***!
  \*************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M13.5 14a.5.5 0 0 0 0-1h-6l3.953-3.459a.5.5 0 0 0-.658-.752L8 11.234V1.5a.5.5 0 0 0-1 0v9.734L4.206 8.789a.5.5 0 0 0-.659.752L7.5 13h-6a.5.5 0 0 0 0 1z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/snap-horizontal-middle.svg":
/*!************************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/snap-horizontal-middle.svg ***!
  \************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M7.5 0a.5.5 0 0 0-.5.5v14a.5.5 0 0 0 1 0V.5a.5.5 0 0 0-.5-.5M0 7.5c0 .291.231.527.516.527h3.508L2.527 9.6a.535.535 0 0 0 0 .746.508.508 0 0 0 .73 0L6 7.5 3.257 4.654a.508.508 0 0 0-.73 0 .535.535 0 0 0 0 .746l1.497 1.573H.516A.522.522 0 0 0 0 7.5m15 0a.522.522 0 0 1-.516.527h-3.508L12.473 9.6a.535.535 0 0 1 0 .746.508.508 0 0 1-.73 0L9 7.5l2.743-2.846a.508.508 0 0 1 .73 0 .535.535 0 0 1 0 .746l-1.497 1.573h3.508c.285 0 .516.236.516.527\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/snap-left.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/snap-left.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M1 13.5a.5.5 0 0 0 1 0v-6l3.459 3.953a.5.5 0 0 0 .752-.658L3.766 8H13.5a.5.5 0 0 0 0-1H3.766l2.445-2.794a.5.5 0 1 0-.752-.659L2 7.5v-6a.5.5 0 0 0-1 0z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/snap-right.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/snap-right.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M14 1.5a.5.5 0 0 0-1 0v6L9.541 3.547a.5.5 0 1 0-.752.658L11.234 7H1.5a.5.5 0 0 0 0 1h9.734l-2.445 2.794a.5.5 0 1 0 .752.659L13 7.5v6a.5.5 0 0 0 1 0z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/snap-top.svg":
/*!**********************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/snap-top.svg ***!
  \**********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M1.5 1a.5.5 0 0 0 0 1h6L3.547 5.459a.5.5 0 1 0 .658.752L7 3.766V13.5a.5.5 0 0 0 1 0V3.766l2.794 2.445a.5.5 0 1 0 .659-.752L7.5 2h6a.5.5 0 0 0 0-1z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/snap-vertical-middle.svg":
/*!**********************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/snap-vertical-middle.svg ***!
  \**********************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M15 7.5a.5.5 0 0 0-.5-.5H.5a.5.5 0 0 0 0 1h14a.5.5 0 0 0 .5-.5M7.5 0a.522.522 0 0 0-.527.516v3.508L5.4 2.527a.535.535 0 0 0-.746 0 .508.508 0 0 0 0 .73L7.5 6l2.846-2.743a.508.508 0 0 0 0-.73.535.535 0 0 0-.746 0L8.027 4.024V.516A.522.522 0 0 0 7.5 0m0 15a.522.522 0 0 1-.527-.516v-3.508L5.4 12.473a.535.535 0 0 1-.746 0 .508.508 0 0 1 0-.73L7.5 9l2.846 2.743a.508.508 0 0 1 0 .73.535.535 0 0 1-.746 0l-1.573-1.497v3.508A.522.522 0 0 1 7.5 15\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/up-double.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/up-double.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M13.146 13.847a.486.486 0 0 0 .708 0 .538.538 0 0 0 0-.738l-5.5-5.956a.485.485 0 0 0-.708 0l-5.5 5.956a.538.538 0 0 0 0 .738.485.485 0 0 0 .708 0L8 8.26zm0-5a.485.485 0 0 0 .708 0 .538.538 0 0 0 0-.738l-5.5-5.956a.485.485 0 0 0-.708 0l-5.5 5.956a.538.538 0 0 0 0 .738.485.485 0 0 0 .708 0L8 3.26z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/up.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/up.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .538.538 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.538.538 0 0 1 0 .738\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/duplicate-page.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/duplicate-page.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M14.994 2.243A1.375 1.375 0 0 0 13.625 1h-7.25l-.132.006A1.375 1.375 0 0 0 5 2.375v1.75h.917v-1.75l.007-.082a.458.458 0 0 1 .451-.376h7.25l.082.007a.458.458 0 0 1 .376.451v7.25l-.007.082a.458.458 0 0 1-.451.376h-1.738V11h1.738l.132-.006A1.375 1.375 0 0 0 15 9.625v-7.25zM9.625 5h-7.25C1.615 5 1 5.616 1 6.375v7.25C1 14.385 1.616 15 2.375 15h7.25c.76 0 1.375-.616 1.375-1.375v-7.25C11 5.615 10.384 5 9.625 5M2.4 6h7.2c.22 0 .4.201.4.45v7.1c0 .248-.18.45-.4.45H2.4c-.22 0-.4-.201-.4-.45v-7.1c0-.249.18-.45.4-.45M4 8h4v1H4zm4 3H4v1h4z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/duplicate.svg":
/*!******************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/duplicate.svg ***!
  \******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M1.5 11a.5.5 0 0 0 .5-.5V2h8.5a.5.5 0 0 0 0-1H2a1 1 0 0 0-1 1v8.5a.5.5 0 0 0 .5.5M5 4h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m0 1v9h9V5z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/edit.svg":
/*!*************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/edit.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z\" clip-rule=\"evenodd\"></path><path fill=\"#000\" d=\"M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/float.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/float.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M12 0a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm0 1H4a3 3 0 0 0-2.995 2.824L1 4v8a3 3 0 0 0 2.824 2.995L4 15h8a3 3 0 0 0 2.995-2.824L15 12V4a3 3 0 0 0-2.824-2.995zM8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8m0 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/lock.svg":
/*!*************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/lock.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M7.5 0A3.5 3.5 0 0 1 11 3.5V6h1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h1V3.5A3.5 3.5 0 0 1 7.5 0M5 6h5V3.5a2.5 2.5 0 0 0-2.336-2.495L7.5 1a2.5 2.5 0 0 0-2.495 2.336L5 3.5zm6 1H3v8h9V7zm-3.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/move.svg":
/*!*************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/move.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M7.5 1.914 6.475 2.94a.5.5 0 1 1-.707-.707L8 0l2.157 2.157a.5.5 0 0 1-.707.707l-.95-.95V7.5h5.586l-1.1-1.1a.5.5 0 1 1 .706-.708L16 8l-2.232 2.232a.5.5 0 1 1-.707-.707L14.086 8.5H8.5v5.586l1.025-1.025a.5.5 0 1 1 .707.707L8 16l-2.308-2.308a.5.5 0 1 1 .707-.707l1.101 1.1V8.5H1.914l.95.95a.5.5 0 0 1-.707.707L0 8l2.232-2.232a.5.5 0 1 1 .707.707L1.914 7.5H7.5z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/pending.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/pending.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M12 8.002a.5.5 0 0 1-1 0V1H1v12.003h3.5a.5.5 0 1 1 0 1H1a1 1 0 0 1-1-1V1A1 1 0 0 1 .044.706.498.498 0 0 1 .5 0H11a1 1 0 0 1 1 1zm2.218 1.486a.5.5 0 0 0-.708 0l-5.657 5.658a.5.5 0 0 0 .708.707l5.657-5.658a.5.5 0 0 0 0-.707M11 9.928c.376 0 .794.041 1.23.141l-.871.871a5.147 5.147 0 0 0-.359-.012c-1 0-2.731.297-3.83 2 .313.486.677.857 1.062 1.14l-.676.676A6.081 6.081 0 0 1 6 12.928c1.333-2.334 3.5-3 5-3m0 5c-.219 0-.472-.014-.746-.054l-.824.825a5.62 5.62 0 0 0 1.57.23c1.5 0 3.667-.667 5-3a6.012 6.012 0 0 0-1.804-1.998l-.684.684c.478.299.936.721 1.319 1.313-1.1 1.704-2.831 2-3.831 2M2.5 3.502A.5.5 0 0 1 3 3h6a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/plus.svg":
/*!*************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/plus.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/split-horizontal.svg":
/*!*************************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/split-horizontal.svg ***!
  \*************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 17 16\"><path fill=\"#000\" d=\"M7 15V0h1v15zM0 2h4v1H1v9h3v1H0zM11 13h4V2h-4v1h3v9h-3z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/split-vertical.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/split-vertical.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 17 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M3 1v3H2V0h11v4h-1V1zM2 11h1v3h9v-3h1v4H2zM15 8H0V7h15z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/unfloat.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/unfloat.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M12 0a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm0 1H4a3 3 0 0 0-2.995 2.824L1 4v8a3 3 0 0 0 2.824 2.995L4 15h8a3 3 0 0 0 2.995-2.824L15 12V4a3 3 0 0 0-2.824-2.995zM8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/unlock.svg":
/*!***************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/unlock.svg ***!
  \***************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M16 3.5a3.5 3.5 0 1 0-7 0V6H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1h-2V3.5l.005-.164A2.5 2.5 0 0 1 12.5 1l.164.005A2.5 2.5 0 0 1 15 3.5a.5.5 0 0 0 1 0M9 7H3v8h9V7h-1zm-1.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/gis/data-layer.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/gis/data-layer.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"m8 0 8 6-8 6-8-6zM1.887 6 8 10.82 14.113 6 8 1.18zM0 9.81.563 9 8 14.775 15.437 9l.563.81L8 16z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/outlined/application/grid-template.tsx":
/*!***********************************************************!*\
  !*** ./jimu-icons/outlined/application/grid-template.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridTemplateOutlined: () => (/* binding */ GridTemplateOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_grid_template_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/grid-template.svg */ "./jimu-icons/svg/outlined/application/grid-template.svg");
/* harmony import */ var _svg_outlined_application_grid_template_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_grid_template_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const GridTemplateOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_grid_template_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/application/invisible.tsx":
/*!*******************************************************!*\
  !*** ./jimu-icons/outlined/application/invisible.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InvisibleOutlined: () => (/* binding */ InvisibleOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/invisible.svg */ "./jimu-icons/svg/outlined/application/invisible.svg");
/* harmony import */ var _svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const InvisibleOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/application/maxgrid.tsx":
/*!*****************************************************!*\
  !*** ./jimu-icons/outlined/application/maxgrid.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MaxgridOutlined: () => (/* binding */ MaxgridOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/maxgrid.svg */ "./jimu-icons/svg/outlined/application/maxgrid.svg");
/* harmony import */ var _svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const MaxgridOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/application/more-horizontal.tsx":
/*!*************************************************************!*\
  !*** ./jimu-icons/outlined/application/more-horizontal.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MoreHorizontalOutlined: () => (/* binding */ MoreHorizontalOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var _svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const MoreHorizontalOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/application/template.tsx":
/*!******************************************************!*\
  !*** ./jimu-icons/outlined/application/template.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateOutlined: () => (/* binding */ TemplateOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_template_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/template.svg */ "./jimu-icons/svg/outlined/application/template.svg");
/* harmony import */ var _svg_outlined_application_template_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_template_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const TemplateOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_template_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/application/visible.tsx":
/*!*****************************************************!*\
  !*** ./jimu-icons/outlined/application/visible.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VisibleOutlined: () => (/* binding */ VisibleOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/visible.svg */ "./jimu-icons/svg/outlined/application/visible.svg");
/* harmony import */ var _svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const VisibleOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/brand/block.tsx":
/*!*********************************************!*\
  !*** ./jimu-icons/outlined/brand/block.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BlockOutlined: () => (/* binding */ BlockOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/brand/block.svg */ "./jimu-icons/svg/outlined/brand/block.svg");
/* harmony import */ var _svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const BlockOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/brand/screen-group.tsx":
/*!****************************************************!*\
  !*** ./jimu-icons/outlined/brand/screen-group.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenGroupOutlined: () => (/* binding */ ScreenGroupOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/brand/screen-group.svg */ "./jimu-icons/svg/outlined/brand/screen-group.svg");
/* harmony import */ var _svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const ScreenGroupOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-stretched.tsx":
/*!*************************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-stretched.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowStretchedOutlined: () => (/* binding */ ArrowStretchedOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_stretched_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-stretched.svg */ "./jimu-icons/svg/outlined/directional/arrow-stretched.svg");
/* harmony import */ var _svg_outlined_directional_arrow_stretched_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_stretched_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const ArrowStretchedOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_stretched_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/left.tsx":
/*!**************************************************!*\
  !*** ./jimu-icons/outlined/directional/left.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LeftOutlined: () => (/* binding */ LeftOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/left.svg */ "./jimu-icons/svg/outlined/directional/left.svg");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const LeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/right.tsx":
/*!***************************************************!*\
  !*** ./jimu-icons/outlined/directional/right.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightOutlined: () => (/* binding */ RightOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const RightOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/up-double.tsx":
/*!*******************************************************!*\
  !*** ./jimu-icons/outlined/directional/up-double.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpDoubleOutlined: () => (/* binding */ UpDoubleOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/up-double.svg */ "./jimu-icons/svg/outlined/directional/up-double.svg");
/* harmony import */ var _svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const UpDoubleOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/close.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/close.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CloseOutlined: () => (/* binding */ CloseOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const CloseOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/edit.tsx":
/*!*********************************************!*\
  !*** ./jimu-icons/outlined/editor/edit.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EditOutlined: () => (/* binding */ EditOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/edit.svg */ "./jimu-icons/svg/outlined/editor/edit.svg");
/* harmony import */ var _svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const EditOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/lock.tsx":
/*!*********************************************!*\
  !*** ./jimu-icons/outlined/editor/lock.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockOutlined: () => (/* binding */ LockOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/lock.svg */ "./jimu-icons/svg/outlined/editor/lock.svg");
/* harmony import */ var _svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const LockOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/plus.tsx":
/*!*********************************************!*\
  !*** ./jimu-icons/outlined/editor/plus.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PlusOutlined: () => (/* binding */ PlusOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/plus.svg */ "./jimu-icons/svg/outlined/editor/plus.svg");
/* harmony import */ var _svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const PlusOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/unlock.tsx":
/*!***********************************************!*\
  !*** ./jimu-icons/outlined/editor/unlock.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UnlockOutlined: () => (/* binding */ UnlockOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/unlock.svg */ "./jimu-icons/svg/outlined/editor/unlock.svg");
/* harmony import */ var _svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const UnlockOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-layouts/lib/builder/animation-setting.tsx":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/builder/animation-setting.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _menu_section_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/** @jsx jsx */







class LayoutItemAnimationSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.modalStyle = {
            position: 'absolute',
            top: '0',
            bottom: '0',
            width: '100%',
            height: 'auto',
            paddingBottom: '1px'
        };
        this.onTransitionSettingChange = (setting) => {
            const { layoutId, layoutItemId } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.getAppConfigAction)();
            const appConfig = appConfigAction.appConfig;
            const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
            appConfigAction.editSectionProperty(layoutItem.sectionId, 'transition', setting).exec();
            if ((setting === null || setting === void 0 ? void 0 : setting.type) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.TransitionType.None) {
                this.previewTransition();
            }
        };
        this.onHoverEffectChange = (effect) => {
            var _a, _b;
            const { layoutId, layoutItemId } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.getAppConfigAction)();
            const appConfig = appConfigAction.appConfig;
            const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
            const setting = (_a = layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            if (((_b = setting.hoverEffect) === null || _b === void 0 ? void 0 : _b.type) !== effect.type) {
                appConfigAction.editLayoutItemProperty({ layoutId, layoutItemId }, 'setting.hoverEffect', effect).exec();
            }
            if (effect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.HoverType.None) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.builderAppSync.publishHoverPreviewToApp({
                    layoutInfo: {
                        layoutId: layoutId,
                        layoutItemId: layoutItemId
                    },
                    id: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)()
                });
            }
        };
        this.onEffectSettingChange = (mode, efffectSetting) => {
            const trigger = jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView;
            const { layoutId, layoutItemId, setting } = this.props;
            const oldSetting = setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            const propName = mode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.OneByOne ? 'oneByOneEffect' : 'effect';
            this.props.onSettingChange({
                layoutId,
                layoutItemId
            }, oldSetting.setIn([propName, trigger], efffectSetting));
            if ((efffectSetting === null || efffectSetting === void 0 ? void 0 : efffectSetting.type) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.builderAppSync.publishAnimationPreviewToApp({
                    layoutInfo: {
                        layoutId: layoutId,
                        layoutItemId: layoutItemId
                    },
                    playMode: mode,
                    id: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)()
                });
            }
        };
        this.onSectionOneByOneEffectSettingChange = (efffectSetting) => {
            this.onEffectSettingChange(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.OneByOne, efffectSetting);
        };
        this.previewAnimation = (mode) => {
            if (this.hasAnimationEffect()) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.builderAppSync.publishAnimationPreviewToApp({
                    layoutInfo: {
                        layoutId: this.props.layoutId,
                        layoutItemId: this.props.layoutItemId
                    },
                    playMode: mode,
                    id: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)()
                });
            }
        };
        this.previewTransition = (withOneByOne = false) => {
            var _a, _b, _c;
            const { sectionId } = this.props;
            const sectionProps = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.searchUtils.getSectionInfo((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder, sectionId);
            const { views } = sectionProps;
            if ((views === null || views === void 0 ? void 0 : views.length) > 1) {
                let navInfo = (_c = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.sectionNavInfos) === null || _c === void 0 ? void 0 : _c[sectionId];
                if (!navInfo) {
                    const activeViewId = (0,_menu_section_menu__WEBPACK_IMPORTED_MODULE_6__.findActiveViewId)(sectionProps);
                    const currentIndex = views.indexOf(activeViewId);
                    const previousIndex = currentIndex > 0 ? currentIndex - 1 : currentIndex + 1;
                    navInfo = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
                        currentViewId: activeViewId,
                        previousViewId: views[previousIndex]
                    });
                }
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.builderAppSync.publishSectionNavInfoToApp(sectionId, navInfo
                    .set('playId', (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)())
                    .set('withOneByOne', withOneByOne).asMutable());
            }
        };
        this.previewTransitionAndOnebyOne = () => {
            this.previewTransition(true);
        };
        this.previewOneByOneInSection = () => {
            this.previewAnimation(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.OneByOne);
        };
        this.previewHover = () => {
            if (this.hasHoverEffect()) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.builderAppSync.publishHoverPreviewToApp({
                    layoutInfo: {
                        layoutId: this.props.layoutId,
                        layoutItemId: this.props.layoutItemId
                    },
                    id: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)()
                });
            }
        };
        this.onPlayModeChange = (mode) => {
            const { layoutId, layoutItemId } = this.props;
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.getAppConfigAction)().editLayoutItemProperty({ layoutId, layoutItemId }, 'setting.effectPlayMode', mode).exec();
        };
        this.switchToIn = () => {
            this.setState({
                animationType: 'in'
            });
        };
        this.switchToTransition = () => {
            this.setState({
                animationType: 'transition'
            });
        };
        this.switchToHover = () => {
            this.setState({
                animationType: 'hover'
            });
        };
        this.state = {
            animationType: 'in'
        };
    }
    hasAnimationEffect() {
        var _a, _b;
        const { setting } = this.props;
        const effect = (_a = setting === null || setting === void 0 ? void 0 : setting.effect) === null || _a === void 0 ? void 0 : _a[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
        const oneByOneEffect = (_b = setting === null || setting === void 0 ? void 0 : setting.oneByOneEffect) === null || _b === void 0 ? void 0 : _b[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
        return (effect && effect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None) || (oneByOneEffect && oneByOneEffect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None);
    }
    hasHoverEffect() {
        const { setting } = this.props;
        const effect = setting === null || setting === void 0 ? void 0 : setting.hoverEffect;
        return effect && effect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.HoverType.None;
    }
    render() {
        var _a, _b;
        const { formatMessage, isLayoutWidget, isSection, transitionType, transitionDirection, setting } = this.props;
        const { animationType } = this.state;
        const asoneEffect = (_a = setting === null || setting === void 0 ? void 0 : setting.effect) === null || _a === void 0 ? void 0 : _a[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
        const oneByOneEffect = (_b = setting === null || setting === void 0 ? void 0 : setting.oneByOneEffect) === null || _b === void 0 ? void 0 : _b[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { role: 'group', "aria-label": formatMessage('animation'), title: formatMessage('animation') },
            isSection && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.AdvancedButtonGroup, { className: 'w-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              border-bottom: 1px solid var(--primary-500);
              .jimu-btn {
                width: 50%;
                border-radius: 2px 2px 0 0;
              }
            ` },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { active: animationType === 'in', onClick: this.switchToIn }, formatMessage('in')),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { className: 'ml-1', active: animationType === 'transition', onClick: this.switchToTransition }, formatMessage('transition'))))),
            animationType === 'in' && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__.AnimationSettingComponent, { effectSetting: asoneEffect, oneByOneSetting: oneByOneEffect, onSettingChange: this.onEffectSettingChange, previewEnabled: true, supportAsOne: true, supportOneByOne: isLayoutWidget, onPreviewClicked: this.previewAnimation, formatMessage: formatMessage })),
            animationType === 'transition' && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { flow: 'wrap' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__.TransitionSetting, { transition: { type: transitionType, direction: transitionDirection }, transitionLabel: formatMessage('view'), oneByOneEffect: oneByOneEffect, onOneByOneChange: this.onSectionOneByOneEffectSettingChange, onTransitionChange: this.onTransitionSettingChange, onPreviewTransitionClicked: this.previewTransition, onPreviewOneByOneClicked: this.previewOneByOneInSection, onPreviewAsAWhoneClicked: this.previewTransitionAndOnebyOne, formatMessage: formatMessage }))));
    }
}
const mapFunction = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a, _b;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_b = (_a = state.appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.layouts[layoutId].content[layoutItemId];
        return layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting;
    },
    (state, ownProps) => {
        var _a, _b;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_b = (_a = state.appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.layouts[layoutId].content[layoutItemId];
        return (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget;
    },
    (state, ownProps) => {
        var _a, _b, _c, _d;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_b = (_a = state.appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.layouts[layoutId].content[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widget = (_c = state.appStateInBuilder) === null || _c === void 0 ? void 0 : _c.appConfig.widgets[layoutItem.widgetId];
            return ((_d = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _d === void 0 ? void 0 : _d.widgetType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout;
        }
        return false;
    },
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_b = (_a = state.appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.layouts[layoutId].content[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return (_c = state.appStateInBuilder) === null || _c === void 0 ? void 0 : _c.appConfig.sections[layoutItem.sectionId];
        }
    }
], (setting, isWidget, isLayoutWidget, section) => {
    var _a, _b;
    return ({
        setting,
        isWidget,
        isLayoutWidget,
        isSection: section != null,
        transitionType: (_a = section === null || section === void 0 ? void 0 : section.transition) === null || _a === void 0 ? void 0 : _a.type,
        transitionDirection: (_b = section === null || section === void 0 ? void 0 : section.transition) === null || _b === void 0 ? void 0 : _b.direction,
        sectionId: section === null || section === void 0 ? void 0 : section.id
    });
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapFunction)(LayoutItemAnimationSetting));


/***/ }),

/***/ "./jimu-layouts/lib/builder/common-layout-actions.ts":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/builder/common-layout-actions.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addBlockToFlowLayout: () => (/* binding */ addBlockToFlowLayout),
/* harmony export */   addItemToLayout: () => (/* binding */ addItemToLayout),
/* harmony export */   duplicateLayoutItem: () => (/* binding */ duplicateLayoutItem),
/* harmony export */   floatingLayoutItem: () => (/* binding */ floatingLayoutItem),
/* harmony export */   getRootLayoutId: () => (/* binding */ getRootLayoutId),
/* harmony export */   mergeWidgetsIntoColumn: () => (/* binding */ mergeWidgetsIntoColumn),
/* harmony export */   pasteLayoutItem: () => (/* binding */ pasteLayoutItem),
/* harmony export */   pasteToFixedLayout: () => (/* binding */ pasteToFixedLayout),
/* harmony export */   pasteToFlowLayout: () => (/* binding */ pasteToFlowLayout),
/* harmony export */   pasteToGridLayout: () => (/* binding */ pasteToGridLayout),
/* harmony export */   pendLayoutItem: () => (/* binding */ pendLayoutItem),
/* harmony export */   sinkingLayoutItem: () => (/* binding */ sinkingLayoutItem),
/* harmony export */   supportFloating: () => (/* binding */ supportFloating),
/* harmony export */   supportSinking: () => (/* binding */ supportSinking),
/* harmony export */   updateLayoutAndSelection: () => (/* binding */ updateLayoutAndSelection)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




function getRootLayoutId() {
    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentDialogId()) {
        return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentDialogRootLayoutId();
    }
    switch (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getActivePagePart()) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header:
            return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getHeaderRootLayoutId();
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer:
            return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getFooterRootLayoutId();
        default:
            return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentPageRootLayoutId();
    }
}
function updateLayoutAndSelection(appConfig, selection) {
    if (window.jimuConfig.isBuilder) {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        appConfigAction.exec();
        jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.builderAppSync.publishChangeSelectionToApp(selection);
    }
    else {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfig, selection));
    }
}
function pendLayoutItem(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
    appConfigAction.setLayoutItemToPending(layoutInfo, true);
    updateLayoutAndSelection(appConfigAction.appConfig, null);
}
function duplicateLayoutItem(layoutInfo) {
    const { layoutId } = layoutInfo;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
    const newItemId = appConfigAction.duplicateLayoutItemInSameLayout(layoutInfo);
    const newLayoutInfo = { layoutId, layoutItemId: newItemId };
    updateLayoutAndSelection(appConfigAction.appConfig, newLayoutInfo);
}
function pasteLayoutItem(clipboardItem, targetLayoutId) {
    var _a, _b;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
    const { layoutId, layoutItemId } = clipboardItem;
    const layoutItem = (_b = (_a = appConfigAction.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
    if (!layoutItem) {
        return;
    }
    // TODO move it to the layout service
    const layoutType = appConfigAction.appConfig.layouts[targetLayoutId].type;
    if (layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
        pasteToFlowLayout(clipboardItem, targetLayoutId);
    }
    else if (layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FixedLayout) {
        pasteToFixedLayout(clipboardItem, targetLayoutId);
    }
    else if (layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout) {
        const [appConfig, layoutInfo] = pasteToGridLayout(appConfigAction.appConfig, clipboardItem, targetLayoutId);
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfig, layoutInfo));
    }
    else {
        console.error(`unknown layout type: ${layoutType}`);
    }
}
function pasteToFixedLayout(clipboardItem, targetLayoutId, containerRect = null) {
    var _a, _b, _c, _d;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
    const { layoutId, layoutItemId, width, height } = clipboardItem;
    const originalLayoutItem = (_b = (_a = appConfigAction.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
    const originalBBox = originalLayoutItem.bbox;
    const newItemId = appConfigAction.duplicateLayoutItemToOtherLayout({ layoutId, layoutItemId }, targetLayoutId);
    const layoutInfo = { layoutId: targetLayoutId, layoutItemId: newItemId };
    const zoomScale = (_d = (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.zoomScale) !== null && _d !== void 0 ? _d : 1;
    if (!containerRect) {
        containerRect = getVisibleWorkArea(targetLayoutId);
    }
    if (containerRect) {
        const containerWidth = containerRect.width / zoomScale;
        const containerHeight = containerRect.height / zoomScale;
        appConfigAction.editLayoutItemProperty(layoutInfo, 'bbox', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.replaceBoundingBox(originalBBox, {
            left: 0,
            top: 0,
            right: 0,
            bottom: 0,
            width: Math.round(width),
            height: Math.round(height)
        }, {
            width: containerWidth,
            height: containerHeight
        }));
    }
    appConfigAction
        .editLayoutItemProperty(layoutInfo, 'setting.vCenter', true)
        .editLayoutItemProperty(layoutInfo, 'setting.hCenter', true);
    const bbox = appConfigAction.appConfig.layouts[layoutInfo.layoutId].content[layoutInfo.layoutItemId].bbox;
    appConfigAction.editLayoutItemProperty(layoutInfo, 'bbox', bbox.set('left', '50%').set('top', '50%'));
    appConfigAction.adjustOrderOfItem(layoutInfo, -1);
    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, layoutInfo));
}
// Split the grid layout and paste the item as the last one
function pasteToGridLayout(appConfig, clipboardItem, targetLayoutId) {
    var _a, _b;
    let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
    const { layoutId, layoutItemId } = clipboardItem;
    const layout = appConfig.layouts[targetLayoutId];
    const rootItemId = ((_a = layout.content) === null || _a === void 0 ? void 0 : _a[(_b = layout.setting) === null || _b === void 0 ? void 0 : _b.rootItem]) ? layout.setting.rootItem : null;
    const newItemId = appConfigAction.duplicateLayoutItemToOtherLayout({ layoutId, layoutItemId }, targetLayoutId);
    const newLayoutInfo = { layoutId: targetLayoutId, layoutItemId: newItemId };
    if (!rootItemId) {
        appConfigAction
            .editLayoutItemProperty(newLayoutInfo, 'gridType', jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain)
            .editLayoutItemProperty(newLayoutInfo, 'bbox.width', 100)
            .editLayoutProperty(targetLayoutId, 'setting.rootItem', newItemId);
        return [appConfigAction.appConfig, newLayoutInfo];
    }
    const rootLayoutInfo = { layoutId: targetLayoutId, layoutItemId: rootItemId };
    const rootLayoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfigAction.appConfig, rootLayoutInfo);
    const rootType = rootLayoutItem.gridType;
    // create a new grid row
    const service = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getService(appConfigAction.appConfig, targetLayoutId);
    const result = service.createBlankItem(appConfigAction.appConfig, targetLayoutId);
    appConfig = result[0];
    const rowItemId = result[1];
    const rowLayoutInfo = { layoutId: targetLayoutId, layoutItemId: rowItemId };
    appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
    appConfigAction
        .editLayoutItemProperty(rowLayoutInfo, 'gridType', rootType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row : jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column)
        .editLayoutItemProperty(rowLayoutInfo, 'children', [rootItemId, newItemId])
        .editLayoutItemProperty(rowLayoutInfo, 'bbox.width', 100)
        .editLayoutItemProperty(rootLayoutInfo, 'bbox.width', 50)
        .editLayoutItemProperty(rootLayoutInfo, 'parent', rowItemId)
        .editLayoutItemProperty(newLayoutInfo, 'bbox.width', 50)
        .editLayoutItemProperty(newLayoutInfo, 'parent', rowItemId)
        .editLayoutItemProperty(newLayoutInfo, 'gridType', jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain)
        .editLayoutProperty(targetLayoutId, 'setting.rootItem', rowItemId);
    return [appConfigAction.appConfig, newLayoutInfo];
}
function pasteToFlowLayout(clipboardItem, targetLayoutId) {
    var _a, _b, _c;
    return __awaiter(this, void 0, void 0, function* () {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const { layoutId, layoutItemId, width, height } = clipboardItem;
        const newItemId = appConfigAction.duplicateLayoutItemToOtherLayout({ layoutId, layoutItemId }, targetLayoutId);
        const layoutInfo = { layoutId: targetLayoutId, layoutItemId: newItemId };
        const zoomScale = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.zoomScale) !== null && _b !== void 0 ? _b : 1;
        appConfigAction.adjustOrderOfItem(layoutInfo, -1);
        const visibleInfo = getFirstVisibleBlock(targetLayoutId, width, zoomScale);
        if (visibleInfo.insertIndex === -1) {
            visibleInfo.insertIndex = ((_c = appConfigAction.appConfig.layouts[targetLayoutId].order) === null || _c === void 0 ? void 0 : _c.length) || 0;
        }
        // Do not create extra block if the draggingItem is from a scrolling page
        const fromLayoutType = appConfigAction.appConfig.layouts[layoutId].type;
        if (fromLayoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
            updateLayoutAndSelection(appConfigAction.appConfig, layoutInfo);
        }
        else {
            addBlockToFlowLayout({ layoutInfo }, targetLayoutId, { left: 0, top: 0, width, height }, { left: 0, top: 0, width, height }, visibleInfo.colSpan, visibleInfo.insertIndex, appConfigAction.appConfig).catch(err => { console.error(err); });
        }
    });
}
function getVisibleWorkArea(layoutId) {
    const workarea = window.parent.document.querySelector('div[data-layoutid="right-sidebar-left-layout"]');
    const deviceFrame = window.parent.document.querySelector('iframe[name="_appWindow"]');
    let layoutDiv;
    let left;
    let top;
    let width;
    let height;
    if (workarea && deviceFrame) {
        const workareaRect = workarea.getBoundingClientRect();
        const frameRect = deviceFrame.getBoundingClientRect();
        left = frameRect.left;
        top = frameRect.top;
        width = frameRect.width;
        height = frameRect.height;
        if (layoutId) {
            const frameDoc = deviceFrame.contentDocument || deviceFrame.contentWindow.document;
            layoutDiv = frameDoc.querySelector(`div.layout[data-layoutid="${layoutId}"]`);
            if (layoutDiv) {
                const layoutRect = layoutDiv.getBoundingClientRect();
                left += layoutRect.left;
                top += layoutRect.top;
                width = layoutRect.width;
                height = layoutRect.height;
            }
        }
        const vl = left >= workareaRect.left ? 0 : workareaRect.left - left;
        const vt = top >= workareaRect.top ? 0 : workareaRect.top - top;
        // const vw = workareaRect.left + workareaRect.width >= left + width ?
        //   Math.min(width, left + width - workareaRect.left) :
        //   Math.min(workareaRect.width, workareaRect.left + workareaRect.width - left);
        // const vh = workareaRect.top + workareaRect.height >= top + height ?
        //   Math.min(height, top + height - workareaRect.top) :
        //   Math.min(workareaRect.height, workareaRect.top + workareaRect.height - top);
        return { left: vl, top: vt, width, height };
    }
    return null;
}
function getFirstVisibleBlock(layoutId, width, zoomScale) {
    const deviceFrame = window.parent.document.querySelector('iframe[name="_appWindow"]');
    const childNodes = document.querySelectorAll(`div.flow-layout[data-layoutid="${layoutId}"] > div.trail-container > div.builder-layout-item`);
    let index = -1;
    let colSpan = 2;
    if (deviceFrame && childNodes) {
        const frameRect = deviceFrame.getBoundingClientRect();
        childNodes.forEach((node, i) => {
            if (index === -1) {
                const itemRect = node.getBoundingClientRect();
                if (itemRect.top + frameRect.top >= 0 || itemRect.top + itemRect.height + frameRect.top >= 0) {
                    index = i + 1;
                }
            }
        });
        colSpan = Math.round(width * 12 * zoomScale / frameRect.width);
    }
    return {
        colSpan,
        insertIndex: index
    };
}
/**
 * Add widget or section to a layout, either dragging from the widget list or dragging an existing one.
 */
function addItemToLayout(appConfig, item, targetLayoutId) {
    return __awaiter(this, void 0, void 0, function* () {
        const layoutInfo = item.layoutInfo;
        if (item.id) {
            // it must be a pending item
            return yield addPendingItemToLayout(appConfig, item, targetLayoutId);
        }
        // drag and drop an existing layout item in the same page
        if (layoutInfo && layoutInfo.layoutId && layoutInfo.layoutItemId) {
            return yield moveLayoutItem(appConfig, item, targetLayoutId);
        }
        if (item.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return yield addNewSectionToLayout(appConfig, targetLayoutId);
        }
        if (item.uri || item.itemId) {
            return yield addNewWidgetToLayout(appConfig, item, targetLayoutId);
        }
        // widget placeholder
        return yield addPlaceholderToLayout(appConfig, targetLayoutId);
    });
}
function addPendingItemToLayout(appConfig, item, targetLayoutId) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        let fromSizeMode;
        const currentSizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode();
        if (item.isFromCurrentSizeMode) {
            fromSizeMode = currentSizeMode;
        }
        else {
            fromSizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.getBrowserSizeModeByLayoutId(appConfig, item.layoutInfo.layoutId);
        }
        const originLayoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfigAction.appConfig, item.layoutInfo);
        const newLayoutInfo = appConfigAction.moveLayoutItem(item.layoutInfo, targetLayoutId, fromSizeMode, currentSizeMode);
        if ((_a = originLayoutItem.setting) === null || _a === void 0 ? void 0 : _a.lockParent) {
            appConfigAction.editLayoutItemProperty(newLayoutInfo, 'setting.lockParent', true);
        }
        return yield Promise.resolve({
            layoutInfo: newLayoutInfo,
            updatedAppConfig: appConfigAction.appConfig
        });
    });
}
function moveLayoutItem(appConfig, item, targetLayoutId) {
    return __awaiter(this, void 0, void 0, function* () {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const currentSizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode();
        const newLayoutInfo = appConfigAction.moveLayoutItem(item.layoutInfo, targetLayoutId, currentSizeMode, currentSizeMode);
        const pWidgetId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.getWidgetIdThatUseTheLayoutId(appConfig, targetLayoutId);
        if (pWidgetId && shouldLockParent(appConfig.widgets[pWidgetId])) {
            appConfigAction.editLayoutItemProperty(newLayoutInfo, 'setting.lockParent', true);
        }
        return { layoutInfo: newLayoutInfo, updatedAppConfig: appConfigAction.appConfig };
    });
}
function addNewSectionToLayout(appConfig, targetLayoutId) {
    return __awaiter(this, void 0, void 0, function* () {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const newItemId = appConfigAction.addNewSectionToLayout(targetLayoutId);
        const newLayoutInfo = { layoutId: targetLayoutId, layoutItemId: newItemId };
        return { layoutInfo: newLayoutInfo, updatedAppConfig: appConfigAction.appConfig };
    });
}
function addNewWidgetToLayout(appConfig, item, targetLayoutId) {
    return __awaiter(this, void 0, void 0, function* () {
        jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishIsBusyToBuilder(true);
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const newItemId = yield appConfigAction.addNewWidgetToLayout(targetLayoutId, {
            uri: item.uri,
            itemId: item.itemId
        });
        const newLayoutInfo = { layoutId: targetLayoutId, layoutItemId: newItemId };
        const pWidgetId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.getWidgetIdThatUseTheLayoutId(appConfig, targetLayoutId);
        if (pWidgetId && shouldLockParent(appConfig.widgets[pWidgetId])) {
            appConfigAction.editLayoutItemProperty(newLayoutInfo, 'setting.lockParent', true);
        }
        jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishIsBusyToBuilder(false);
        return {
            layoutInfo: newLayoutInfo,
            updatedAppConfig: appConfigAction.appConfig
        };
    });
}
function addPlaceholderToLayout(appConfig, targetLayoutId) {
    return __awaiter(this, void 0, void 0, function* () {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const newItemId = appConfigAction.addPlaceholderToLayout(targetLayoutId);
        const newLayoutInfo = { layoutId: targetLayoutId, layoutItemId: newItemId };
        const pWidgetId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.getWidgetIdThatUseTheLayoutId(appConfig, targetLayoutId);
        if (pWidgetId && shouldLockParent(appConfig.widgets[pWidgetId])) {
            appConfigAction.editLayoutItemProperty(newLayoutInfo, 'setting.lockParent', true);
        }
        return {
            layoutInfo: newLayoutInfo,
            updatedAppConfig: appConfigAction.appConfig
        };
    });
}
function shouldLockParent(widgetJson) {
    var _a, _b, _c, _d, _e, _f, _g;
    const type = (_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _a === void 0 ? void 0 : _a.widgetType;
    const hasEmbeddedLayout = (_d = (_c = (_b = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _b === void 0 ? void 0 : _b.properties) === null || _c === void 0 ? void 0 : _c.hasEmbeddedLayout) !== null && _d !== void 0 ? _d : false;
    const lockChildren = (_g = (_f = (_e = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _e === void 0 ? void 0 : _e.properties) === null || _f === void 0 ? void 0 : _f.lockChildren) !== null && _g !== void 0 ? _g : false;
    return type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout && hasEmbeddedLayout && lockChildren;
}
function mergeWidgetsIntoColumn(appConfig, draggingItem, containerRect, itemRect, refLayoutInfo, side) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const layoutItem = appConfig.layouts[refLayoutInfo.layoutId].content[refLayoutInfo.layoutItemId];
        const sizeMode = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getCurrentSizeMode)();
        const cleanRefLayoutItem = layoutItem
            .without('id')
            .without('type')
            .without('widgetId')
            .without('sectionId')
            .without('screenGroupId');
        // 1. create a column widget
        jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishIsBusyToBuilder(true);
        const columnJson = yield appConfigAction.createWidget({ uri: 'widgets/layout/column/' });
        const rowLayoutService = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.RowLayout);
        // a blank layout item to prevent the block to be destroyed
        const result = rowLayoutService.createBlankItem(appConfigAction.appConfig, refLayoutInfo.layoutId);
        let updatedAppConfig = result[0];
        const blankItemId = result[1];
        const originOrder = updatedAppConfig.layouts[refLayoutInfo.layoutId].order;
        appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(updatedAppConfig);
        appConfigAction.editLayoutProperty(refLayoutInfo.layoutId, 'order', [].concat(originOrder, blankItemId));
        // 2. Move the tow widgets to the layout of column
        const layoutName = Object.keys(columnJson.layouts)[0];
        const sizemodeLayouts = columnJson.layouts[layoutName];
        const embedLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutId(sizemodeLayouts, sizeMode, appConfigAction.appConfig.mainSizeMode);
        const layoutService = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout);
        const refLayoutInfo2 = appConfigAction.moveLayoutItem(refLayoutInfo, embedLayoutId, sizeMode, sizeMode);
        updatedAppConfig = layoutService.processAfterItemAdded(appConfigAction.appConfig, draggingItem, refLayoutInfo2, null, containerRect, itemRect, 0);
        const addResult = yield addItemToLayout(updatedAppConfig, draggingItem, embedLayoutId);
        updatedAppConfig = layoutService.processAfterItemAdded(addResult.updatedAppConfig, draggingItem, addResult.layoutInfo, null, containerRect, itemRect, side === 'top' ? 0 : 1);
        // 3. update the column layout item
        appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(updatedAppConfig);
        appConfigAction
            .editLayoutProperty(refLayoutInfo.layoutId, `content.${refLayoutInfo.layoutItemId}`, cleanRefLayoutItem)
            .editLayoutItemProperty(refLayoutInfo, 'id', refLayoutInfo.layoutItemId)
            .editLayoutItemProperty(refLayoutInfo, 'type', jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget)
            .editLayoutItemProperty(refLayoutInfo, 'widgetId', columnJson.id)
            .editLayoutItemProperty(refLayoutInfo2, 'bbox.height', cleanRefLayoutItem.bbox.height)
            .editWidgetProperty(columnJson.id, `parent.${sizeMode}`, [refLayoutInfo]);
        // 4. enlarge the height to hold new widget
        let bbox = cleanRefLayoutItem.bbox;
        // 20 is the extra size for gap and padding
        const updatedHeight = Math.round(parseFloat(bbox.height) + itemRect.height + 20);
        bbox = bbox.set('height', `${updatedHeight}px`);
        appConfigAction.editLayoutItemProperty(refLayoutInfo, 'bbox', bbox);
        // 5. remove the temp layout item
        appConfigAction.editLayoutProperty(refLayoutInfo.layoutId, 'content', appConfigAction.appConfig.layouts[refLayoutInfo.layoutId].content.without(blankItemId));
        if (((_a = draggingItem.layoutInfo) === null || _a === void 0 ? void 0 : _a.layoutId) === refLayoutInfo.layoutId) {
            // exclude the dragging item
            appConfigAction.editLayoutProperty(refLayoutInfo.layoutId, 'order', originOrder.filter(itemId => itemId !== draggingItem.layoutInfo.layoutItemId));
        }
        else {
            appConfigAction.editLayoutProperty(refLayoutInfo.layoutId, 'order', originOrder);
        }
        jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishIsBusyToBuilder(false);
        return {
            updatedAppConfig: appConfigAction.appConfig,
            layoutInfo: refLayoutInfo
        };
    });
}
function supportFloating(layoutInfo) {
    var _a, _b, _c, _d, _e;
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfig = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)().appConfig;
    const layoutItem = (_c = (_b = (_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
    if (!layoutItem || ((_d = layoutItem.setting) === null || _d === void 0 ? void 0 : _d.isFloating)) {
        return false;
    }
    const pagePart = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getActivePagePart();
    if (pagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header && pagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer) {
        const rootLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentPageRootLayoutId();
        const layoutType = (_e = appConfig.layouts[rootLayoutId]) === null || _e === void 0 ? void 0 : _e.type;
        return layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout && layoutId !== rootLayoutId;
    }
    return false;
}
function supportSinking(layoutInfo) {
    var _a, _b, _c, _d, _e;
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfig = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)().appConfig;
    const layoutItem = (_c = (_b = (_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
    return (_e = (_d = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _d === void 0 ? void 0 : _d.isFloating) !== null && _e !== void 0 ? _e : false;
}
function floatingLayoutItem(layoutInfo, clientRect, area) {
    return __awaiter(this, void 0, void 0, function* () {
        const rootLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentPageRootLayoutId();
        let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const result = yield addItemToLayout(appConfigAction.appConfig, { layoutInfo }, rootLayoutId);
        appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(result.updatedAppConfig);
        appConfigAction.editLayoutItemProperty(result.layoutInfo, 'bbox', {
            top: 0,
            left: 0,
            right: 0,
            width: `${clientRect.width}px`,
            height: `${clientRect.height}px`
        }).editLayoutItemProperty(result.layoutInfo, 'setting.isFloating', true)
            .editLayoutItemProperty(result.layoutInfo, 'setting.lockParent', true)
            .editLayoutItemProperty(result.layoutInfo, 'setting.floatingArea', area)
            .adjustOrderOfItem(result.layoutInfo, null); // add to last of the order
        if (window.jimuConfig.isBuilder) {
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfigAction.appConfig).exec();
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.builderAppSync.publishChangeSelectionToApp(result.layoutInfo);
        }
        else {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, result.layoutInfo));
        }
    });
}
function sinkingLayoutItem(layoutInfo, clientRect) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        const { layoutId, layoutItemId } = layoutInfo;
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        let insertIndex = -1;
        let width = 2;
        let containerRect;
        let appDoc;
        if (window.jimuConfig.isBuilder) {
            const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
            appDoc = (appFrame === null || appFrame === void 0 ? void 0 : appFrame.contentDocument) || (appFrame === null || appFrame === void 0 ? void 0 : appFrame.contentWindow.document);
        }
        else {
            appDoc = document;
        }
        if (clientRect == null) {
            const layoutElem = appDoc.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItemId}"]`);
            if (layoutElem) {
                clientRect = layoutElem.getBoundingClientRect();
            }
            else {
                clientRect = { width: 100, height: 100 };
            }
        }
        const childNodes = appDoc.querySelectorAll(`div.flow-layout[data-layoutid="${layoutId}"] > div.trail-container > div.builder-layout-item:not(.floating)`);
        if ((childNodes === null || childNodes === void 0 ? void 0 : childNodes.length) > 1) {
            for (let i = 0; i < childNodes.length; i++) {
                const node = childNodes[i];
                if (insertIndex === -1 && node.getAttribute('data-layoutitemid') !== layoutItemId) {
                    const itemRect = node.getBoundingClientRect();
                    width = Math.round(clientRect.width * 12 / itemRect.width);
                    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.contains(itemRect, clientRect)) {
                        insertIndex = i;
                        containerRect = itemRect;
                        break;
                    }
                    else if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.intersects(itemRect, clientRect)) {
                        insertIndex = i + 1;
                        containerRect = itemRect;
                        break;
                    }
                }
            }
        }
        else {
            // the item is the sole child of the container, use current viewport as the container rect
            const viewportSize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.findViewportSize(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getAppConfig(), jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode());
            containerRect = {
                left: 0,
                top: 0,
                width: viewportSize.width,
                height: viewportSize.height
            };
            width = Math.round(clientRect.width * 12 / viewportSize.width);
        }
        if (insertIndex === -1) {
            insertIndex = ((_a = appConfigAction.appConfig.layouts[layoutId].order) === null || _a === void 0 ? void 0 : _a.length) || 0;
        }
        addBlockToFlowLayout({ layoutInfo }, layoutId, containerRect || clientRect, clientRect, width, insertIndex);
    });
}
/**
 * Add a block into flow layout which contains the draggingItem
 * @param draggingItem
 * @param targetLayoutId
 * @param containerRect
 * @param itemRect
 * @param width
 * @param insertIndex
 * @param appConfig
 */
function addBlockToFlowLayout(draggingItem, targetLayoutId, containerRect, itemRect, width, insertIndex, appConfig) {
    return __awaiter(this, void 0, void 0, function* () {
        let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const rowWidgetInfo = {
            name: 'row',
            label: 'row',
            uri: 'widgets/layout/row/',
            icon: null,
            itemType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget,
            manifest: {
                widgetType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout,
                properties: {}
            }
        };
        const defaultPadding = 10;
        const result = yield addItemToLayout(appConfigAction.appConfig, rowWidgetInfo, targetLayoutId);
        const { updatedAppConfig, layoutInfo } = result;
        const bbox = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.replaceBoundingBox(null, itemRect, containerRect);
        appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(updatedAppConfig);
        appConfigAction
            .editLayoutItemProperty(layoutInfo, 'bbox', bbox)
            .adjustOrderOfItem(layoutInfo, insertIndex);
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(updatedAppConfig, result.layoutInfo);
        const widgetJson = updatedAppConfig.widgets[layoutItem.widgetId];
        const layoutName = Object.keys(widgetJson.layouts)[0];
        const rowLayouts = widgetJson.layouts[layoutName];
        const layoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutId(rowLayouts, (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode, updatedAppConfig.mainSizeMode);
        // update widget label to block
        const blockLabel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.i18n.getIntl().formatMessage({ id: 'block' });
        const widgetLabel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils.getUniqueLabel(updatedAppConfig, 'widget', blockLabel);
        appConfigAction
            .editWidgetProperty(widgetJson.id, 'label', widgetLabel)
            .editLayoutItemProperty(layoutInfo, 'setting.heightMode', 'fixed')
            .editLayoutItemProperty(layoutInfo, 'bbox.height', itemRect.height + defaultPadding * 2)
            .editLayoutProperty(layoutId, 'parent', { id: widgetJson.id, type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget });
        const result1 = yield addItemToLayout(appConfigAction.appConfig, draggingItem, layoutId);
        const { layoutInfo: layoutInfo1, updatedAppConfig: updatedAppConfig1 } = result1;
        appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(updatedAppConfig1);
        appConfigAction.editLayoutItemProperty(layoutInfo1, 'setting.heightMode', 'fit')
            .editLayoutItemProperty(layoutInfo1, 'bbox.left', 0)
            .editLayoutItemProperty(layoutInfo1, 'bbox.width', width)
            .editLayoutItemProperty(layoutInfo1, 'bbox.height', Math.round(Math.min(itemRect.height, containerRect.height)))
            .adjustOrderOfItem(layoutInfo1, 0);
        if (window.jimuConfig.isBuilder) {
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfigAction.appConfig).exec();
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.builderAppSync.publishChangeSelectionToApp(layoutInfo1);
        }
        else {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, layoutInfo1));
        }
    });
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx":
/*!*****************************************************************!*\
  !*** ./jimu-layouts/lib/builder/common-layout-item-setting.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ CommonLayoutItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var _animation_setting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./animation-setting */ "./jimu-layouts/lib/builder/animation-setting.tsx");
/** @jsx jsx */




class CommonLayoutItemSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.onBackgroundStyleChange = (config) => {
            this.updateStyle('background', config);
        };
        this.updateBorder = (bd) => {
            this.updateStyle('border', bd);
        };
        this.updateRadius = (value) => {
            this.updateStyle('borderRadius', value);
        };
        this.updateShadow = (value) => {
            this.updateStyle('boxShadow', value);
        };
        this.formatMessage = (id) => {
            return this.props.formatMessage(id);
        };
    }
    updateStyle(key, value) {
        var _a;
        const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)((_a = this.props.style) !== null && _a !== void 0 ? _a : {});
        this.props.onStyleChange({
            layoutId: this.props.layoutId,
            layoutItemId: this.props.layoutItemId
        }, style.set(key, value));
    }
    allowCoverBackground() {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = this.props;
        const appConfig = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)().appConfig;
        const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widgetId = layoutItem.widgetId;
            return (_c = (_b = (_a = appConfig.widgets[widgetId]) === null || _a === void 0 ? void 0 : _a.manifest) === null || _b === void 0 ? void 0 : _b.properties) === null || _c === void 0 ? void 0 : _c.coverLayoutBackground;
        }
        return false;
    }
    render() {
        const { layoutId, layoutItemId } = this.props;
        const style = this.props.style || {};
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'common-layout-item-setting' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_animation_setting__WEBPACK_IMPORTED_MODULE_3__["default"], { layoutId: layoutId, layoutItemId: layoutItemId, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage }),
            !this.props.isSection && !this.allowCoverBackground() && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__.ThemeBackgroundSection, { background: style.background, onChange: this.onBackgroundStyleChange })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__.ThemeBorderSection, { border: style.border, borderRadius: style.borderRadius, onBorderChange: this.updateBorder, onBorderRasiusChange: this.updateRadius }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__.ThemeBoxShadowSection, { value: style.boxShadow, onChange: this.updateShadow })));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/common-transform-setting.tsx":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/builder/common-transform-setting.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ CommonLayoutItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/** @jsx jsx */



class CommonLayoutItemSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.updateRotation = (value) => {
            var _a;
            const setting = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)((_a = this.props.setting) !== null && _a !== void 0 ? _a : {});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItemId
            }, setting.setIn(['style', 'transform', 'rotate'], value));
        };
        this.formatMessage = (id) => {
            return this.props.formatMessage(id);
        };
    }
    render() {
        var _a, _b, _c;
        const setting = this.props.setting || {};
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { label: this.formatMessage('rotation'), className: 'rotation-setting' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": this.formatMessage('rotation'), value: (_c = (_b = (_a = setting.style) === null || _a === void 0 ? void 0 : _a.transform) === null || _b === void 0 ? void 0 : _b.rotate) !== null && _c !== void 0 ? _c : 0, min: -360, max: 360, precision: 2, onChange: this.updateRotation, formatter: value => `${value}°`, parser: value => value.replace('°', ''), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 72px;`, size: 'sm' })));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/context-menu.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/builder/context-menu.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_icons_outlined_application_more_horizontal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/outlined/application/more-horizontal */ "./jimu-icons/outlined/application/more-horizontal.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _toolbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toolbar */ "./jimu-layouts/lib/builder/toolbar.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../translations/default */ "./jimu-layouts/lib/translations/default.ts");
/** @jsx jsx */





class ContextMenu extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.formatMessage = (id, values) => {
            if (this.props.intl) {
                return this.props.intl.formatMessage({ id, defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"][id] }, values);
            }
            return _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"][id];
        };
    }
    getPositionStyle() {
        const { positionType } = this.props;
        if (positionType === 'left') {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        position: absolute;
        top: 0;
        left: 0;
      `;
        }
        if (positionType === 'center') {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
      `;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      top: 0;
      right: 0;
    `;
    }
    getStyle() {
        const { size, builderTheme, rotate } = this.props;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      body:not(.design-mode) & {
        display: none !important;
      }

      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      pointer-events: none;
      transform: ${rotate > 0 || rotate < 0 ? `rotateZ(${rotate}deg)` : ''} ;

      .content {
        ${this.getPositionStyle()};
        pointer-events: all;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all 100ms;
        z-index: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.LayoutZIndex.HandlerTools};

        .menu-hint {
          background-color: ${builderTheme.colors.palette.light[300]};
          width: ${size}px;
          height: 10px;
          display: flex;
          justify-content: center;
          align-items: center;
          cursor: pointer;
          line-height: 10px;
        }

        .menu-content {
          display: none;
          height: ${size}px;
          transform: ${rotate > 0 || rotate < 0 ? `rotateZ(${-rotate}deg)` : ''} ;

          .tool-drag-handler {
            cursor: move;
          }

          .layout-item-toolbar {
            margin: 0;
          }
        }

        &:hover {
          /* height: ${size}px; */
          /* width: auto; */

          .menu-hint {
            display: none;
          }

          .menu-content {
            display: flex;
          }
        }
      }

    `;
    }
    render() {
        const { builderTheme, menuItems, layoutId, layoutItem, className, onMouseEnter, onMouseLeave } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `widget-context-menu ${className}`, css: this.getStyle() },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: el => (this.ref = el), className: 'content' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'menu-hint' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_more_horizontal__WEBPACK_IMPORTED_MODULE_1__.MoreHorizontalOutlined, { color: builderTheme.colors.black, size: 'm' })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'menu-content', onMouseLeave: onMouseLeave, onMouseEnter: onMouseEnter },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar__WEBPACK_IMPORTED_MODULE_3__.Toolbar, { layoutId: layoutId, layoutItem: layoutItem, theme: builderTheme, parentRef: this.ref, tools: menuItems, formatMessage: this.formatMessage })),
                this.props.children)));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.injectIntl)(ContextMenu));


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/canvas-pane.ts":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/canvas-pane.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CanvasPane: () => (/* binding */ CanvasPane)
/* harmony export */ });
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");

const TOLERANCE = 5;
/**
 * https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Applying_styles_and_colors
 */
class CanvasPane {
    constructor(element, theme) {
        this.canvas = element;
        this.ctx = element.getContext('2d');
        this.ctx.font = '1rem';
        this.theme = theme;
    }
    setSize(width, height, ratio = 1) {
        const scaleHeight = Math.round(height * ratio);
        const scaleWidth = Math.round(width * ratio);
        if (ratio < 1) {
            this.canvas.style.width = `${width}px`;
            this.canvas.style.height = `${height}px`;
            this.canvas.width = width;
            this.canvas.height = height;
            this.ctx.scale(1, 1);
        }
        else if (this.canvas.width !== scaleWidth ||
            this.canvas.height !== scaleHeight) {
            this.canvas.style.width = `${width}px`;
            this.canvas.style.height = `${height}px`;
            this.canvas.width = scaleWidth;
            this.canvas.height = scaleHeight;
            this.ctx.scale(ratio, ratio);
        }
    }
    setColor(color) {
        this.ctx.fillStyle = color;
        this.ctx.strokeStyle = color;
    }
    drawRect(rect) {
        this.ctx.fillRect(rect.left, rect.top, rect.width, rect.height);
    }
    drawLine(x1, y1, x2, y2, dashed = false, label) {
        if (dashed) {
            this.ctx.setLineDash([5, 3]);
        }
        else {
            this.ctx.setLineDash([]);
        }
        this.ctx.beginPath();
        if (x1 === x2) {
            let delta = x1 < this.canvas.width / 2 ? 0.5 : -0.5;
            delta = Number.isInteger(x1) ? delta : 0;
            this.ctx.moveTo(x1 + delta, y1);
            this.ctx.lineTo(x2 + delta, y2);
        }
        if (y1 === y2) {
            let delta = y1 < this.canvas.height / 2 ? 0.5 : -0.5;
            delta = Number.isInteger(y1) ? delta : 0;
            this.ctx.moveTo(x1, y1 + delta);
            this.ctx.lineTo(x2, y2 + delta);
        }
        this.ctx.stroke();
        if (label != null) {
            const centerX = (x1 + x2) / 2;
            const centerY = (y1 + y2) / 2;
            this.drawLabel(centerX, centerY, label, y1 === y2);
        }
    }
    drawTailedLine(x1, y1, x2, y2, dashed = false, label) {
        if (dashed) {
            this.ctx.setLineDash([5, 3]);
        }
        else {
            this.ctx.setLineDash([]);
        }
        this.ctx.beginPath();
        if (x1 === x2) {
            let delta = x1 < this.canvas.width / 2 ? 0.5 : -0.5;
            delta = Number.isInteger(x1) ? delta : 0;
            const from = Math.min(y1, y2);
            let fromDelta = from < this.canvas.height / 2 ? 0.5 : -0.5;
            fromDelta = Number.isInteger(from) ? fromDelta : 0;
            const to = Math.max(y1, y2);
            let toDelta = to < this.canvas.height / 2 ? 0.5 : -0.5;
            toDelta = Number.isInteger(to) ? toDelta : 0;
            this.ctx.moveTo(x1 + delta, y1);
            this.ctx.lineTo(x2 + delta, y2);
            this.ctx.moveTo(x1 - TOLERANCE, from + fromDelta);
            this.ctx.lineTo(x1 + TOLERANCE, from + fromDelta);
            this.ctx.moveTo(x2 - TOLERANCE, to + toDelta);
            this.ctx.lineTo(x2 + TOLERANCE, to + toDelta);
        }
        if (y1 === y2) {
            let delta = y1 < this.canvas.height / 2 ? 0.5 : -0.5;
            delta = Number.isInteger(y1) ? delta : 0;
            const from = Math.min(x1, x2);
            let fromDelta = from < this.canvas.width / 2 ? 0.5 : -0.5;
            fromDelta = Number.isInteger(from) ? fromDelta : 0;
            const to = Math.max(x1, x2);
            let toDelta = to < this.canvas.width / 2 ? 0.5 : -0.5;
            toDelta = Number.isInteger(to) ? toDelta : 0;
            this.ctx.moveTo(x1, y1 + delta);
            this.ctx.lineTo(x2, y2 + delta);
            this.ctx.moveTo(from + fromDelta, y1 - TOLERANCE);
            this.ctx.lineTo(from + fromDelta, y1 + TOLERANCE);
            this.ctx.moveTo(to + toDelta, y2 - TOLERANCE);
            this.ctx.lineTo(to + toDelta, y2 + TOLERANCE);
        }
        this.ctx.stroke();
        if (label != null) {
            const centerX = (x1 + x2) / 2;
            const centerY = (y1 + y2) / 2;
            this.drawLabel(centerX, centerY, label, y1 === y2);
        }
    }
    drawLabel(x, y, label, isHorizontal = true) {
        const metrics = this.ctx.measureText(label);
        const offset = 8;
        const lineWidth = metrics.width;
        const lineHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;
        const width = lineWidth + offset;
        const height = lineHeight + offset;
        const signal = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_0__.utils.isRTL() ? -1 : 1;
        this.ctx.save();
        if (this.theme) {
            this.ctx.fillStyle = this.theme.colors.palette.primary[500];
        }
        else {
            this.ctx.fillStyle = 'var(--primary-500)';
        }
        if (isHorizontal) {
            this.drawRoundRect(x - width / 2, y - height - offset, width, height);
            this.ctx.fillStyle = '#FFFFFF';
            this.ctx.fillText(label, x - lineWidth * signal / 2, y - offset * 1.5);
        }
        else {
            this.drawRoundRect(x + offset, y - height / 2, width, height);
            this.ctx.fillStyle = '#FFFFFF';
            if (signal === -1) {
                this.ctx.fillText(label, x + lineWidth + offset * 1.5, y + lineHeight / 2);
            }
            else {
                this.ctx.fillText(label, x + offset * 1.5, y + lineHeight / 2);
            }
        }
        this.ctx.restore();
    }
    /**
     * Draws a rounded rectangle using the current state of the canvas.
     * If you omit the last three params, it will draw a rectangle
     * outline with a 5 pixel border radius
     * @param {CanvasRenderingContext2D} ctx
     * @param {Number} x The top left x coordinate
     * @param {Number} y The top left y coordinate
     * @param {Number} width The width of the rectangle
     * @param {Number} height The height of the rectangle
     * @param {Number} [radius = 2]
     */
    drawRoundRect(x, y, width, height, radius = 2) {
        const tl = radius;
        const tr = radius;
        const bl = radius;
        const br = radius;
        this.ctx.beginPath();
        this.ctx.moveTo(x + tl, y);
        this.ctx.lineTo(x + width - tr, y);
        this.ctx.quadraticCurveTo(x + width, y, x + width, y + tr);
        this.ctx.lineTo(x + width, y + height - br);
        this.ctx.quadraticCurveTo(x + width, y + height, x + width - br, y + height);
        this.ctx.lineTo(x + bl, y + height);
        this.ctx.quadraticCurveTo(x, y + height, x, y + height - bl);
        this.ctx.lineTo(x, y + tl);
        this.ctx.quadraticCurveTo(x, y, x + tl, y);
        this.ctx.closePath();
        this.ctx.fill();
    }
    clear() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts":
/*!********************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/drag-event-handler.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GLOBAL_DRAGGING_CLASS_NAME: () => (/* binding */ GLOBAL_DRAGGING_CLASS_NAME),
/* harmony export */   GLOBAL_H5_DRAGGING_CLASS_NAME: () => (/* binding */ GLOBAL_H5_DRAGGING_CLASS_NAME),
/* harmony export */   LIMITED_BOUNDARY_CLASS_NAME: () => (/* binding */ LIMITED_BOUNDARY_CLASS_NAME),
/* harmony export */   bindDragHandler: () => (/* binding */ bindDragHandler),
/* harmony export */   createDraggingPlaceholder: () => (/* binding */ createDraggingPlaceholder),
/* harmony export */   isDragging: () => (/* binding */ isDragging),
/* harmony export */   setIsDragging: () => (/* binding */ setIsDragging)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _menu_common_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");




const GLOBAL_DRAGGING_CLASS_NAME = 'interactjs-dragging';
const GLOBAL_H5_DRAGGING_CLASS_NAME = 'exb-h5-dragging';
const LIMITED_BOUNDARY_CLASS_NAME = 'limited-drag-boundary';
let isItemDragging = false;
function createDraggingPlaceholder(rect) {
    const builderTheme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_1__.getTheme2)();
    const elem = document.createElement('div');
    elem.setAttribute('id', 'interact_dragging_placeholder');
    elem.style.position = 'fixed';
    elem.style.left = `${rect.left}px`;
    elem.style.top = `${rect.top}px`;
    elem.style.width = `${rect.width}px`;
    elem.style.height = `${rect.height}px`;
    elem.style.backgroundColor = jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.primary[700], 0.2);
    elem.style.zIndex = '1100';
    return elem;
}
function bindDragHandler(interactable, dragHandlerProps) {
    if (!interactable) {
        return null;
    }
    let dx;
    let dy;
    let targetRect;
    let parentRect;
    let originTransform;
    let placeholderElement;
    const { 
    // rootLayoutId,
    layoutItemId, useDragHandler, onDragStart, onDragging, onDragEnd, draggableAtRuntime = false } = dragHandlerProps;
    return interactable
        .styleCursor(false)
        .draggable({
        inertia: false,
        autoScroll: false,
        allowFrom: useDragHandler ? '.tool-drag-handler' : undefined,
        ignoreFrom: '.no-drag-action',
        listeners: {
            start: (event) => {
                if ((0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.isLockLayout)() || (!draggableAtRuntime && !(0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.isDesignMode)())) {
                    event.interaction.stop();
                    return;
                }
                const target = event.target;
                if (target.classList.contains('no-drag-action')) {
                    event.target._canDrag = false;
                    return;
                }
                event.target._canDrag = true;
                event.stopPropagation();
                // target.setAttribute('data-rootlayoutid', rootLayoutId());
                target.classList.add('is-dragging');
                originTransform = target.style.transform;
                targetRect = event.rect;
                const parent = event.target.parentNode;
                parentRect = parent.getBoundingClientRect();
                document.body.classList.add(GLOBAL_DRAGGING_CLASS_NAME);
                // transform may be set in css classes
                const computedTransform = getComputedStyle(target, null).getPropertyValue('transform');
                const [tx, ty] = parseTransform(computedTransform);
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.isPercentage(tx)) {
                    dx = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.fromRatio(tx, targetRect.width);
                }
                else {
                    dx = parseFloat(tx);
                }
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.isPercentage(ty)) {
                    dy = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.fromRatio(ty, targetRect.height);
                }
                else {
                    dy = parseFloat(ty);
                }
                target.setAttribute('data-translatex', dx);
                target.setAttribute('data-translatey', dy);
                if (onDragStart) {
                    onDragStart(layoutItemId);
                }
            },
            move: (event) => {
                event.stopPropagation();
                dx += event.dx;
                dy += event.dy;
                const target = event.target;
                if (!target.parentElement.classList.contains('d-none')) { // prevent placehoder for dragging tab item in grid layout
                    const x = event.client.x;
                    const y = event.client.y;
                    const outOfBoundary = !(x >= 0 && x <= parentRect.width) || !(y >= 0 && y <= parentRect.height);
                    if (outOfBoundary && !placeholderElement) {
                        placeholderElement = createDraggingPlaceholder(targetRect);
                        placeholderElement = document.body.appendChild(placeholderElement);
                        target.style.transform = originTransform;
                        target.style.visibility = 'hidden';
                        return;
                    }
                    const draggingElement = placeholderElement || target;
                    draggingElement.style.webkitTransform =
                        draggingElement.style.transform = `translate(${Math.round(dx)}px, ${Math.round(dy)}px) translateZ(0)`;
                    draggingElement.setAttribute('data-translatex', Math.round(dx));
                    draggingElement.setAttribute('data-translatey', Math.round(dy));
                }
                if (onDragging) {
                    onDragging(layoutItemId, dx, dy);
                }
            },
            end: (event) => {
                event.stopPropagation();
                const target = event.target;
                target.classList.remove('is-dragging');
                document.body.classList.remove(GLOBAL_DRAGGING_CLASS_NAME);
                if (placeholderElement) {
                    document.body.removeChild(placeholderElement);
                    placeholderElement = null;
                }
                target.style.visibility = null;
                target.style.transform = originTransform;
                if (onDragEnd) {
                    onDragEnd(layoutItemId, dx, dy);
                }
            }
        }
    });
}
function setIsDragging(value) {
    isItemDragging = value;
}
function isDragging() {
    return isItemDragging;
}
function parseTransform(transform = '') {
    let dx = '0';
    let dy = '0';
    if (transform.includes('matrix(')) {
        // matrix(a,b,c,d,e,f), e is translateX, f is translateY
        const values = transform.substring(transform.indexOf('(') + 1, transform.indexOf(')')).split(',');
        dx = `${parseInt(values[4], 10)}px`;
        dy = `${parseInt(values[5], 10)}px`;
        return [dx, dy];
    }
    if (transform.includes('translate(')) {
        const match = transform.match(/translate\((.*)\s*,\s*(.*)\)/);
        if (match.length === 3) {
            dx = match[1];
            dy = match[2];
        }
        return [dx, dy];
    }
    if (transform.includes('translateX(')) {
        const match = transform.match(/translateX\((.*)\)/);
        if (match.length === 2) {
            dx = match[1];
        }
    }
    if (transform.includes('translateY(')) {
        const match = transform.match(/translateY\((.*)\)/);
        if (match.length === 2) {
            dy = match[1];
        }
    }
    return [dx, dy];
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/droparea-common.ts":
/*!*****************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/droparea-common.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createItemFromH5DragEvent: () => (/* binding */ createItemFromH5DragEvent),
/* harmony export */   createItemFromInteractEvent: () => (/* binding */ createItemFromInteractEvent),
/* harmony export */   createItemFromLayoutInfo: () => (/* binding */ createItemFromLayoutInfo),
/* harmony export */   isDraggingItemAccepted: () => (/* binding */ isDraggingItemAccepted),
/* harmony export */   restrictItemInContainer: () => (/* binding */ restrictItemInContainer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");


function createItemFromInteractEvent(dragElement) {
    if (dragElement && typeof dragElement.getAttribute === 'function') {
        const layoutId = dragElement.getAttribute('data-layoutid');
        const layoutItemId = dragElement.getAttribute('data-layoutitemid');
        if (layoutId && layoutItemId) {
            return createItemFromLayoutInfo(layoutId, layoutItemId);
        }
    }
    return null;
}
function createItemFromLayoutInfo(layoutId, layoutItemId) {
    var _a, _b, _c, _d, _e, _f;
    const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    const { layouts, widgets } = state.appConfig;
    const fromLayout = layouts[layoutId];
    const layoutItem = (_a = fromLayout === null || fromLayout === void 0 ? void 0 : fromLayout.content) === null || _a === void 0 ? void 0 : _a[layoutItemId];
    if (layoutItem) {
        const layoutInfo = { layoutId, layoutItemId };
        const manifest = getManifest(state, layoutItem);
        let uri = null;
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            uri = (_b = widgets[layoutItem.widgetId]) === null || _b === void 0 ? void 0 : _b.uri;
        }
        return {
            itemType: layoutItem.type,
            layoutInfo,
            uri,
            manifest,
            rotation: (_f = (_e = (_d = (_c = layoutItem.setting) === null || _c === void 0 ? void 0 : _c.style) === null || _d === void 0 ? void 0 : _d.transform) === null || _e === void 0 ? void 0 : _e.rotate) !== null && _f !== void 0 ? _f : 0
        };
    }
}
function createItemFromH5DragEvent() {
    if (window.parent && window.parent._dragging_widget_item) {
        return window.parent._dragging_widget_item;
    }
    return null;
}
// the itemRect should not exceed the boundary of the containerRect
function restrictItemInContainer(itemRect, containerRect) {
    const result = {};
    result.width = Math.min(itemRect.width, containerRect.width);
    result.height = Math.min(itemRect.height, containerRect.height);
    result.left = Math.max(0, itemRect.left);
    result.top = Math.max(0, itemRect.top);
    if (result.left + result.width > containerRect.width) {
        result.left = containerRect.width - result.width;
    }
    if (result.top + result.height > containerRect.height) {
        result.top = containerRect.height - result.height;
    }
    return result;
}
function getManifest(state, layoutItem) {
    var _a, _b, _c;
    if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widgetId = layoutItem.widgetId;
        if (widgetId) {
            return (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.widgets) === null || _b === void 0 ? void 0 : _b[widgetId]) === null || _c === void 0 ? void 0 : _c.manifest;
        }
    }
    return null;
}
function isDraggingItemAccepted(draggingItem, layoutContext, props, layoutId) {
    var _a, _b;
    // screen group only allows to drop on a scrolling page
    if ((draggingItem === null || draggingItem === void 0 ? void 0 : draggingItem.itemType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
        const currentPageId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.getCurrentPageId();
        const appConfig = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.getAppConfig();
        const pageJson = appConfig.pages[currentPageId];
        return Object.keys((_a = pageJson === null || pageJson === void 0 ? void 0 : pageJson.layout) !== null && _a !== void 0 ? _a : {}).some(sizeMode => {
            const layout = appConfig.layouts[pageJson.layout[sizeMode]];
            return layout.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout && layout.id === layoutId;
        });
    }
    let isAllowed = lockParentAllowed(layoutId, draggingItem);
    if (isAllowed && typeof layoutContext.isItemAccepted === 'function') {
        isAllowed = layoutContext.isItemAccepted(draggingItem, (_b = props.isPlaceholder) !== null && _b !== void 0 ? _b : false);
    }
    return isAllowed;
}
function lockParentAllowed(layoutId, draggingItem) {
    var _a, _b, _c, _d;
    if (!draggingItem) {
        return false;
    }
    if (!((_a = draggingItem.isFromCurrentSizeMode) !== null && _a !== void 0 ? _a : true)) {
        return true;
    }
    const draggingLayoutInfo = draggingItem.layoutInfo;
    if (draggingLayoutInfo) {
        const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
        const { layouts } = state.appConfig;
        const fromLayout = layouts[draggingLayoutInfo.layoutId];
        const layoutItem = (_b = fromLayout === null || fromLayout === void 0 ? void 0 : fromLayout.content) === null || _b === void 0 ? void 0 : _b[draggingLayoutInfo.layoutItemId];
        if (layoutItem) {
            const lockParent = (_d = (_c = layoutItem.setting) === null || _c === void 0 ? void 0 : _c.lockParent) !== null && _d !== void 0 ? _d : false;
            if (fromLayout.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout || lockParent) {
                return draggingLayoutInfo.layoutId === layoutId;
            }
        }
    }
    return true;
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/droparea-effect-h5.tsx":
/*!*********************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/droparea-effect-h5.tsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initH5: () => (/* binding */ initH5)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _droparea_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./droparea-common */ "./jimu-layouts/lib/builder/interactive/droparea-common.ts");
/* harmony import */ var _drag_event_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");



function initH5(elem, contextRef) {
    let h5DraggingItem;
    let containerRect;
    const throttleDragOverHandler = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.throttle(h5DragOverHandler, 100);
    elem.addEventListener('dragenter', onDragEnter);
    elem.addEventListener('dragleave', onDragLeave);
    elem.addEventListener('dragover', onDragOver);
    elem.addEventListener('drop', onDrop);
    function initH5Dragging() {
        const { props, layoutId, layoutContext, pageContext } = contextRef.current;
        if (pageContext.viewOnly) {
            return;
        }
        const currentDraggingItem = (0,_droparea_common__WEBPACK_IMPORTED_MODULE_1__.createItemFromH5DragEvent)();
        if (!h5DraggingItem || h5DraggingItem !== currentDraggingItem) {
            h5DraggingItem = currentDraggingItem;
            if ((0,_droparea_common__WEBPACK_IMPORTED_MODULE_1__.isDraggingItemAccepted)(h5DraggingItem, layoutContext, props, layoutId)) {
                elem.classList.add('drop-target');
                if (props.onToggleDragoverEffect) {
                    props.onToggleDragoverEffect(true, h5DraggingItem);
                }
            }
        }
    }
    function isH5DragElementAccepted() {
        if (!h5DraggingItem) {
            return false;
        }
        const { props, layoutId, pageContext, layoutContext } = contextRef.current;
        return !pageContext.viewOnly &&
            (0,_droparea_common__WEBPACK_IMPORTED_MODULE_1__.isDraggingItemAccepted)(h5DraggingItem, layoutContext, props, layoutId);
    }
    function onDragEnter(e) {
        const { props } = contextRef.current;
        e.stopPropagation();
        e.preventDefault();
        initH5Dragging();
        if (!isH5DragElementAccepted()) {
            return;
        }
        containerRect = elem.getBoundingClientRect();
        if (h5DraggingItem && props.onDragEnter) {
            props.onDragEnter(h5DraggingItem);
        }
    }
    function onDragLeave(e) {
        const { props } = contextRef.current;
        e.stopPropagation();
        e.preventDefault();
        elem.classList.remove('drop-target');
        elem.classList.remove('drop-active');
        if (!isH5DragElementAccepted()) {
            return;
        }
        if (props.onDragLeave) {
            props.onDragLeave(h5DraggingItem);
        }
        if (props.onToggleDragoverEffect) {
            props.onToggleDragoverEffect(false, h5DraggingItem);
        }
        h5DraggingItem = null;
    }
    function onDragOver(e) {
        const { layoutId, pageContext } = contextRef.current;
        e.stopPropagation();
        e.preventDefault();
        initH5Dragging();
        if (!isH5DragElementAccepted()) {
            if (e.dataTransfer) {
                e.dataTransfer.dropEffect = 'none';
            }
            return;
        }
        if (e.dataTransfer) {
            e.dataTransfer.dropEffect = 'copy';
        }
        if (elem.classList.contains('drop-target')) {
            const { clientX, clientY } = e;
            if (!elem.classList.contains('drop-active') && layoutId !== pageContext.rootLayoutId) {
                elem.classList.add('drop-active');
            }
            throttleDragOverHandler(h5DraggingItem, clientX, clientY);
        }
    }
    function h5DragOverHandler(draggingItem, clientX, clientY) {
        if (!draggingItem || isNaN(clientX) || isNaN(clientY)) {
            return;
        }
        let width = 200;
        let height = 100;
        const { props } = contextRef.current;
        if (draggingItem.manifest.defaultSize) {
            width = isNaN(draggingItem.manifest.defaultSize.width)
                ? width
                : draggingItem.manifest.defaultSize.width;
            height = isNaN(draggingItem.manifest.defaultSize.height)
                ? height
                : draggingItem.manifest.defaultSize.height;
        }
        if (props.onDragOver) {
            props.onDragOver(draggingItem, null, containerRect, {
                left: clientX - width / 2 - containerRect.left,
                top: clientY - height / 2 - containerRect.top,
                width,
                height,
                right: clientX - width / 2 - containerRect.left + width,
                bottom: clientY - height / 2 - containerRect.top + height
            }, clientX - containerRect.left, clientY - containerRect.top);
        }
    }
    function onDrop(e) {
        e.stopPropagation();
        elem.classList.remove('drop-target');
        elem.classList.remove('drop-active');
        document.documentElement.classList.remove(_drag_event_handler__WEBPACK_IMPORTED_MODULE_2__.GLOBAL_H5_DRAGGING_CLASS_NAME);
        if (!isH5DragElementAccepted()) {
            h5DraggingItem = null;
            return;
        }
        const { props } = contextRef.current;
        const { clientX, clientY } = e;
        const containerRect = elem.getBoundingClientRect();
        let width = 200;
        let height = 100;
        if (h5DraggingItem.manifest.defaultSize) {
            width = isNaN(h5DraggingItem.manifest.defaultSize.width)
                ? width
                : h5DraggingItem.manifest.defaultSize.width;
            height = isNaN(h5DraggingItem.manifest.defaultSize.height)
                ? height
                : h5DraggingItem.manifest.defaultSize.height;
        }
        let itemRect = {
            width,
            height,
            left: clientX - width / 2 - containerRect.left,
            top: clientY - height / 2 - containerRect.top
        };
        itemRect = (0,_droparea_common__WEBPACK_IMPORTED_MODULE_1__.restrictItemInContainer)(itemRect, { left: 0, top: 0, width: containerRect.width, height: containerRect.height });
        itemRect.right = itemRect.left + itemRect.width;
        itemRect.bottom = itemRect.top + itemRect.height;
        if (props.onToggleDragoverEffect) {
            props.onToggleDragoverEffect(false, h5DraggingItem);
        }
        if (props.onDrop) {
            props.onDrop(h5DraggingItem, containerRect, itemRect, clientX - containerRect.left, clientY - containerRect.top);
        }
        h5DraggingItem = null;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/droparea-effect-interactjs.tsx":
/*!*****************************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/droparea-effect-interactjs.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initInteractive: () => (/* binding */ initInteractive)
/* harmony export */ });
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var _droparea_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./droparea-common */ "./jimu-layouts/lib/builder/interactive/droparea-common.ts");


function initInteractive(domRef, contextRef, acceptClassName) {
    let draggingItem;
    let draggingElement;
    let containerRect;
    let lastDragCall;
    return (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_0__.interact)(domRef).dropzone({
        accept: acceptClassName !== null && acceptClassName !== void 0 ? acceptClassName : '.exb-rnd',
        checker: (dragEvent, // related dragmove or dragend
        event, // Touch, Pointer or Mouse Event
        dropped, // bool default checker result
        dropzone, // dropzone Interactable
        dropElement, // dropzone elemnt
        draggable, // draggable Interactable
        draggableElement // draggable element
        ) => {
            const { props, layoutId, pageContext, layoutContext } = contextRef.current;
            if (getComputedStyle(dropElement).pointerEvents === 'none') {
                return false;
            }
            // if checker returns false, the following events such as dragenter and dragmove will not be fired.
            draggingItem = (0,_droparea_common__WEBPACK_IMPORTED_MODULE_1__.createItemFromInteractEvent)(draggableElement);
            return (!pageContext.viewOnly &&
                dropped &&
                !draggableElement.contains(dropElement) &&
                (0,_droparea_common__WEBPACK_IMPORTED_MODULE_1__.isDraggingItemAccepted)(draggingItem, layoutContext, props, layoutId));
        },
        ondragenter: (event) => {
            const { props, layoutId, pageContext } = contextRef.current;
            event.stopPropagation();
            event.target.classList.add('drop-target');
            if (layoutId !== pageContext.rootLayoutId) {
                event.target.classList.add('drop-active');
            }
            draggingElement = document.getElementById('interact_dragging_placeholder') || event.relatedTarget;
            containerRect = event.dropzone.getRect(event.target);
            if (props.onDragEnter) {
                props.onDragEnter(draggingItem);
            }
            if (props.onToggleDragoverEffect) {
                props.onToggleDragoverEffect(true, draggingItem);
            }
        },
        ondragleave: (event) => {
            const { props } = contextRef.current;
            event.stopPropagation();
            event.target.classList.remove('drop-target');
            event.target.classList.remove('drop-active');
            draggingElement = null;
            containerRect = null;
            if (lastDragCall) {
                cancelAnimationFrame(lastDragCall);
            }
            if (props.onDragLeave) {
                props.onDragLeave(draggingItem);
            }
            if (props.onToggleDragoverEffect) {
                props.onToggleDragoverEffect(false, draggingItem);
            }
        },
        ondropmove: (event) => {
            const { props } = contextRef.current;
            event.stopPropagation();
            if (lastDragCall) {
                cancelAnimationFrame(lastDragCall);
            }
            lastDragCall = requestAnimationFrame(() => {
                const dragElementRect = event.dragEvent.rect;
                const clientCoor = event.dragEvent._interaction.coords.cur.client;
                const clientX = clientCoor.x - (containerRect === null || containerRect === void 0 ? void 0 : containerRect.left);
                const clientY = clientCoor.y - (containerRect === null || containerRect === void 0 ? void 0 : containerRect.top);
                if (props.onDragOver) {
                    props.onDragOver(draggingItem, draggingElement, containerRect, {
                        left: dragElementRect.left - (containerRect === null || containerRect === void 0 ? void 0 : containerRect.left),
                        top: dragElementRect.top - (containerRect === null || containerRect === void 0 ? void 0 : containerRect.top),
                        width: dragElementRect.width,
                        height: dragElementRect.height,
                        right: dragElementRect.left - (containerRect === null || containerRect === void 0 ? void 0 : containerRect.left) + dragElementRect.width,
                        bottom: dragElementRect.top - (containerRect === null || containerRect === void 0 ? void 0 : containerRect.top) + dragElementRect.height
                    }, clientX, clientY, event.dragEvent.speed);
                }
                lastDragCall = null;
            });
        },
        ondrop: (event) => {
            const { props } = contextRef.current;
            event.stopPropagation();
            event.target.classList.remove('drop-target');
            event.target.classList.remove('drop-active');
            if (props.onToggleDragoverEffect) {
                props.onToggleDragoverEffect(false, draggingItem);
            }
            if (lastDragCall) {
                cancelAnimationFrame(lastDragCall);
            }
            if (props.onDrop) {
                const dragElementRect = event.dragEvent.rect;
                // make sure the dragElement is totally in the container rect
                const left = dragElementRect.left - containerRect.left;
                const top = dragElementRect.top - containerRect.top;
                let itemRect = {
                    left,
                    top,
                    width: dragElementRect.width,
                    height: dragElementRect.height
                };
                itemRect = (0,_droparea_common__WEBPACK_IMPORTED_MODULE_1__.restrictItemInContainer)(itemRect, { left: 0, top: 0, width: containerRect.width, height: containerRect.height });
                itemRect.right = itemRect.left + itemRect.width;
                itemRect.bottom = itemRect.top + itemRect.height;
                const clientCoor = event.dragEvent._interaction.coords.cur.client;
                const clientX = clientCoor.x - containerRect.left;
                const clientY = clientCoor.y - containerRect.top;
                props.onDrop(draggingItem, containerRect, itemRect, clientX, clientY);
            }
        }
    });
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/droparea-hook.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DropArea: () => (/* binding */ DropArea)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _droparea_effect_interactjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./droparea-effect-interactjs */ "./jimu-layouts/lib/builder/interactive/droparea-effect-interactjs.tsx");
/* harmony import */ var _droparea_effect_h5__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./droparea-effect-h5 */ "./jimu-layouts/lib/builder/interactive/droparea-effect-h5.tsx");
/** @jsx jsx */




/* eslint-disable react-hooks/exhaustive-deps */
function DropArea(props) {
    const refObj = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const layoutId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return props.layouts[state.browserSizeMode];
    });
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const pageContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.PageContext);
    const layoutContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutContext);
    const contextRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    contextRef.current = { props, layoutId, pageContext, layoutContext };
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        let interactble;
        if (refObj.current) {
            interactble = (0,_droparea_effect_interactjs__WEBPACK_IMPORTED_MODULE_2__.initInteractive)(refObj.current, contextRef);
        }
        return () => {
            if (interactble) {
                interactble.unset();
            }
        };
    }, []);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (refObj.current) {
            (0,_droparea_effect_h5__WEBPACK_IMPORTED_MODULE_3__.initH5)(refObj.current, contextRef);
        }
    }, []);
    const { className, style, highlightDragover } = props;
    const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exb-drop-area d-flex', className);
    const getStyle = () => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      background: transparent;
      padding: inherit;
      pointer-events: ${isDesignMode ? 'auto' : 'none !important'};

      & > .highlight-content {
        display: none;
        pointer-events: none;
        position: relative;
      }

      &.drop-target > .highlight-content {
        display: flex;
      }

      &.drop-active {
        background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(pageContext.builderTheme.colors.palette.primary[700], 0.2)};
      }
    `;
    };
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: mergedClass, css: getStyle(), style: style, ref: el => { refObj.current = el; } }, highlightDragover && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 highlight-content' }, props.children))));
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts":
/*!**********************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/resize-event-handler.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GLOBAL_RESIZING_CLASS_NAME: () => (/* binding */ GLOBAL_RESIZING_CLASS_NAME),
/* harmony export */   bindResizeHandler: () => (/* binding */ bindResizeHandler),
/* harmony export */   isResizing: () => (/* binding */ isResizing),
/* harmony export */   setIsResizing: () => (/* binding */ setIsResizing)
/* harmony export */ });
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");


const GLOBAL_RESIZING_CLASS_NAME = 'interactjs-resizing';
let isItemResizing = false;
function bindResizeHandler(interactable, resizeHandlerProps) {
    if (!interactable) {
        return null;
    }
    let dx;
    let dy;
    let dw;
    let dh;
    let lastResizeCall = null;
    const { layoutItemId, onResizeStart, onResizing, onResizeEnd, restrictEdges = true } = resizeHandlerProps;
    return interactable.resizable({
        inertia: false,
        edges: {
            top: '.rnd-resize-top',
            left: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL() ? '.rnd-resize-right' : '.rnd-resize-left',
            bottom: '.rnd-resize-bottom',
            right: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL() ? '.rnd-resize-left' : '.rnd-resize-right'
        },
        modifiers: [
            // keep the edges inside the parent
            jimu_core_dnd__WEBPACK_IMPORTED_MODULE_0__.interact.modifiers.restrictEdges({
                outer: restrictEdges ? 'parent' : null
            }),
            // minimum size
            jimu_core_dnd__WEBPACK_IMPORTED_MODULE_0__.interact.modifiers.restrictSize({
                min: { width: 16, height: 16 }
            })
        ],
        listeners: {
            start: (event) => {
                event.stopPropagation();
                dx = 0;
                dy = 0;
                dw = 0;
                dh = 0;
                const target = event.target;
                const rect = target.getBoundingClientRect();
                if (onResizeStart) {
                    onResizeStart(layoutItemId, rect.width, rect.height);
                }
                document.body.classList.add(GLOBAL_RESIZING_CLASS_NAME);
            },
            move: (event) => {
                event.stopPropagation();
                const deltaRect = event.deltaRect;
                dx += deltaRect.left;
                dy += deltaRect.top;
                dw += deltaRect.width;
                dh += deltaRect.height;
                if (lastResizeCall) {
                    cancelAnimationFrame(lastResizeCall);
                    lastResizeCall = null;
                }
                lastResizeCall = requestAnimationFrame(() => {
                    if (onResizing) {
                        onResizing(layoutItemId, dx, dy, dw, dh, event.shiftKey, event.speed);
                    }
                    // Since this frame didn't get cancelled, the lastUpdateCall should be reset so new frames can be called.
                    lastResizeCall = null;
                });
            },
            end: (event) => {
                event.stopPropagation();
                if (lastResizeCall) {
                    cancelAnimationFrame(lastResizeCall);
                    lastResizeCall = null;
                }
                if (onResizeEnd) {
                    const deltaRect = event.deltaRect;
                    dx += deltaRect.left;
                    dy += deltaRect.top;
                    dw += deltaRect.width;
                    dh += deltaRect.height;
                    onResizeEnd(layoutItemId, dx, dy, dw, dh, event.shiftKey);
                }
                document.body.classList.remove(GLOBAL_RESIZING_CLASS_NAME);
            }
        }
    });
}
function setIsResizing(value) {
    isItemResizing = value;
}
function isResizing() {
    return isItemResizing;
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/interactive/rnd-decorator.tsx":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/builder/interactive/rnd-decorator.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   mapStateToRndWrapperProps: () => (/* binding */ mapStateToRndWrapperProps),
/* harmony export */   withRnd: () => (/* binding */ withRnd)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var hoist_non_react_statics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hoist-non-react-statics */ "./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js");
/* harmony import */ var hoist_non_react_statics__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hoist_non_react_statics__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _drag_event_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _resize_event_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */
/* eslint-disable @typescript-eslint/no-unused-vars */






function mapStateToRndWrapperProps(state, ownProps) {
    var _a, _b, _c, _d;
    const layoutId = ownProps.layoutId;
    // const layout = state.appConfig.layouts[layoutId];
    // const layoutItemId = ownProps.layoutItemId;
    const selection = state.appRuntimeInfo.selection;
    const layoutItem = ownProps.layoutItem;
    let selected = false;
    let isInlineEditing = false;
    let supportRepeat = false;
    let isLayoutWidget = false;
    if (layoutItem) {
        selected = Boolean(selection && layoutId === selection.layoutId && layoutItem.id === selection.layoutItemId);
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widget = state.appConfig.widgets[layoutItem.widgetId];
            const supportInlineEditing = (_b = (_a = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.supportInlineEditing;
            supportRepeat = (_d = (_c = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _c === void 0 ? void 0 : _c.properties) === null || _d === void 0 ? void 0 : _d.supportRepeat;
            if (supportInlineEditing) {
                const widgetRuntimeInfo = state.widgetsRuntimeInfo[layoutItem.widgetId];
                isInlineEditing = widgetRuntimeInfo && widgetRuntimeInfo.isInlineEditing;
            }
            isLayoutWidget = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.utils.isWidgetHasEmbeddedLayout(layoutItem.widgetId, state.appConfig);
        }
    }
    return {
        selected,
        supportRepeat,
        isInlineEditing,
        isLayoutWidget
    };
}
const emptyFunc = () => { };
function withRnd(autoSelect) {
    return (WrappedComponent) => {
        class RndWrapper extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
            constructor(props) {
                super(props);
                this.ref = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
            }
            componentDidMount() {
                const { layoutId, layoutItemId, layoutItem, onResizeStart, onResizing, onResizeEnd, onDragStart, onDragging, onDragEnd, useDragHandler } = this.props;
                if (this.ref.current) {
                    this.interactable = (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(this.ref.current).origin('parent');
                    this.interactable = (0,_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__.bindDragHandler)(this.interactable, {
                        layoutId,
                        layoutItemId,
                        useDragHandler,
                        onDragging,
                        onDragStart,
                        onDragEnd,
                        itemType: layoutItem.type,
                        rootLayoutId: () => this.rootLayoutId,
                        restrict: () => this.props.restrict
                    });
                    this.interactable = (0,_resize_event_handler__WEBPACK_IMPORTED_MODULE_4__.bindResizeHandler)(this.interactable, {
                        layoutItemId,
                        onResizing,
                        onResizeStart,
                        onResizeEnd
                    });
                }
            }
            componentWillUnMount() {
                if (this.interactable) {
                    this.interactable.unset();
                    this.interactable = null;
                }
            }
            getStyle(isInlineEditing) {
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          ${this.aspectRatioStyle()};

          &.dragging {
            opacity: 0.9;
          }

          display: flex;
          position: relative;
          touch-action: ${isInlineEditing ? 'auto' : 'none'};
          user-select: ${isInlineEditing ? 'auto' : 'none'};
        `;
            }
            aspectRatioStyle() {
                const { aspectRatio, forceAspectRatio: keepAspectRatio } = this.props;
                if (keepAspectRatio) {
                    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
            & > div.rnd-aspect-ratio-wrapper {
              width: 100%;
              position: relative;
              padding-top: ${aspectRatio * 100}%;

              & > div {
                position: absolute !important;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
              }
            }
          `;
                }
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          & > .rnd-aspect-ratio-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
          }
        `;
            }
            render() {
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.PageContext.Consumer, null, (pageContext) => {
                    this.rootLayoutId = pageContext.rootLayoutId;
                    const _a = this.props, { gridSize, draggable, onResizeStart, onResizing, onResizeEnd, style, className, useDragHandler, children } = _a, otherProps = __rest(_a, ["gridSize", "draggable", "onResizeStart", "onResizing", "onResizeEnd", "style", "className", "useDragHandler", "children"]);
                    const { isInlineEditing } = this.props;
                    const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exb-rnd', className, {
                        'functional-widget': !this.props.isLayoutWidget
                    });
                    const mergedStyle = typeof style === 'string'
                        ? JSON.parse(style)
                        : Object.assign({}, style);
                    if (this.props.forceAspectRatio) {
                        mergedStyle.height = 'auto';
                    }
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: mergedClass, ref: this.ref, css: this.getStyle(isInlineEditing), "data-layoutid": this.props.layoutId, "data-layoutitemid": this.props.layoutItemId, "data-repeatable": this.props.supportRepeat, style: mergedStyle },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'rnd-aspect-ratio-wrapper' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(WrappedComponent, Object.assign({ layoutId: this.props.layoutId, className: 'w-100', layoutItemId: this.props.layoutItemId }, otherProps))),
                        children));
                }));
            }
        }
        RndWrapper.defaultProps = {
            left: true,
            top: true,
            right: true,
            bottom: true,
            restrict: false,
            onResizeStart: emptyFunc,
            onResizing: emptyFunc,
            onResizeEnd: emptyFunc,
            onDragStart: emptyFunc,
            onDragging: emptyFunc,
            onDragEnd: emptyFunc
        };
        const HoistedComponent = hoist_non_react_statics__WEBPACK_IMPORTED_MODULE_2__(RndWrapper, WrappedComponent);
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToRndWrapperProps)(HoistedComponent);
    };
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-entry.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-entry.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   defaultWidgetFilter: () => (/* binding */ defaultWidgetFilter)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */


var LayoutEntryMode;
(function (LayoutEntryMode) {
    LayoutEntryMode[LayoutEntryMode["ChooseLayoutType"] = 0] = "ChooseLayoutType";
    LayoutEntryMode[LayoutEntryMode["RenderLayout"] = 1] = "RenderLayout";
})(LayoutEntryMode || (LayoutEntryMode = {}));
class LayoutEntry extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Component {
    constructor() {
        super(...arguments);
        this.state = {
            mode: LayoutEntryMode.RenderLayout
        };
        this.onLayoutTypeSelected = () => {
            this.setState({
                mode: LayoutEntryMode.RenderLayout
            });
        };
        this.switchToChoosingMobe = () => {
            this.setState({
                mode: LayoutEntryMode.ChooseLayoutType
            });
        };
    }
    shouldComponentUpdate(nextProps) {
        if (nextProps.isPageItem && !nextProps.visible) {
            return false;
        }
        return Object.keys(nextProps).some(key => nextProps[key] !== this.props[key]);
    }
    render() {
        const { layout } = this.props;
        if (!layout) {
            return null;
        }
        const LayoutElement = (0,jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.findLayoutBuilder)(layout.type || jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout); // default layout type is FlowLayout
        if (!LayoutElement) {
            return null;
        }
        const _a = this.props, { isItemAccepted } = _a, otherProps = __rest(_a, ["isItemAccepted"]);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutContext.Provider, { value: {
                isItemAccepted: isItemAccepted || defaultWidgetFilter
            } },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutElement, Object.assign({}, otherProps))));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.mapStateToLayoutProps)(LayoutEntry));
function defaultWidgetFilter(item) {
    return item != null;
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-item-dnd-hook.tsx":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-item-dnd-hook.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useDndBinding: () => (/* binding */ useDndBinding)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var _interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/** @jsx jsx */




const parentRestrict = jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact.modifiers.restrictRect({
    restriction: 'parent'
});
const boundaryRestrict = jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact.modifiers.restrictRect({
    restriction: `div.${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_2__.LIMITED_BOUNDARY_CLASS_NAME}`
});
/**
 * Bind drag and resize capability
 * @param props
 * @returns
 */
function useDndBinding(props) {
    const { layoutId, layoutItemId, layoutType, layoutItemType, useDragHandler, restrict, getCurrentRootLayoutId } = props;
    const interactableRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const widgetResizeStartHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const widgetResizingHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const widgetResizeEndHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const widgetDragStartHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const widgetDraggingHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const widgetDragEndHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const elementRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    function onItemDragStart(layoutItemId) {
        (0,_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_2__.setIsDragging)(true);
        (0,_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_3__.setIsResizing)(false);
        if (props.onDragStart) {
            props.onDragStart(layoutItemId);
        }
        if (widgetDragStartHandlerRef.current) {
            widgetDragStartHandlerRef.current();
        }
    }
    function onItemDragging(id, dx, dy) {
        if (props.onDragging) {
            props.onDragging(id, dx, dy);
        }
        if (widgetDraggingHandlerRef.current) {
            widgetDraggingHandlerRef.current(dx, dy);
        }
    }
    function onItemDragEnd(id, dx, dy) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
            (0,_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_2__.setIsDragging)(false);
        });
        if (props.onDragEnd) {
            props.onDragEnd(id, dx, dy);
        }
        if (widgetDragEndHandlerRef.current) {
            widgetDragEndHandlerRef.current(dx, dy);
        }
    }
    function onItemResizeStart(layoutItemId, initWidth, initHeight) {
        (0,_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_2__.setIsDragging)(false);
        (0,_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_3__.setIsResizing)(true);
        if (props.onResizeStart) {
            props.onResizeStart(layoutItemId, initWidth, initHeight);
        }
        if (widgetResizeStartHandlerRef.current) {
            widgetResizeStartHandlerRef.current(initWidth, initHeight);
        }
    }
    function onItemResizing(layoutItemId, x, y, dw, dh, shiftKey, speed) {
        if (props.onResizing) {
            props.onResizing(layoutItemId, x, y, dw, dh, shiftKey, speed);
        }
        if (widgetResizingHandlerRef.current) {
            widgetResizingHandlerRef.current(x, y, dw, dh);
        }
    }
    function onItemResizeEnd(id, x, y, dw, dh, shiftKey) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
            (0,_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_3__.setIsResizing)(false);
        });
        if (props.onResizeEnd) {
            props.onResizeEnd(id, x, y, dw, dh, shiftKey);
        }
        if (widgetResizeEndHandlerRef.current) {
            widgetResizeEndHandlerRef.current(x, y, dw, dh);
        }
    }
    const registerWidgetInitResizeHandler = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((onResizeStart, onResizing, onResizeEnd) => {
        widgetResizeStartHandlerRef.current = onResizeStart;
        widgetResizingHandlerRef.current = onResizing;
        widgetResizeEndHandlerRef.current = onResizeEnd;
    }, []);
    const registerWidgetInitDragHandler = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((onDragStart, onDragging, onDragEnd) => {
        widgetDragStartHandlerRef.current = onDragStart;
        widgetDraggingHandlerRef.current = onDragging;
        widgetDragEndHandlerRef.current = onDragEnd;
    }, []);
    const setRefElement = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((element) => {
        elementRef.current = element;
        if (!interactableRef.current) {
            interactableRef.current = (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(element).origin('parent');
            interactableRef.current = (0,_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_2__.bindDragHandler)(interactableRef.current, {
                layoutId,
                layoutItemId,
                useDragHandler,
                onDragging: onItemDragging,
                onDragStart: onItemDragStart,
                onDragEnd: onItemDragEnd,
                itemType: layoutItemType,
                rootLayoutId: getCurrentRootLayoutId,
                restrict: () => restrict
            });
            interactableRef.current = (0,_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_3__.bindResizeHandler)(interactableRef.current, {
                layoutItemId,
                onResizing: onItemResizing,
                restrictEdges: layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FixedLayout, // fixed layout doesn't support auto size
                onResizeStart: onItemResizeStart,
                onResizeEnd: onItemResizeEnd
            });
        }
        if (interactableRef.current) {
            if (restrict) {
                interactableRef.current.draggable({
                    modifiers: [parentRestrict]
                });
            }
            else {
                interactableRef.current.draggable({
                    modifiers: [boundaryRestrict]
                });
            }
        }
        if (props.resizeObserver && element) {
            props.resizeObserver.observe(element);
        }
        /* eslint-disable react-hooks/exhaustive-deps */
    }, [restrict]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        return () => {
            if (interactableRef.current) {
                interactableRef.current.unset();
                interactableRef.current = null;
            }
            if (props.resizeObserver && elementRef.current) {
                props.resizeObserver.unobserve(elementRef.current);
            }
        };
    }, []);
    return { registerWidgetInitDragHandler, registerWidgetInitResizeHandler, setRefElement };
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-item-hook/use-asone-playid.ts":
/*!***********************************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-item-hook/use-asone-playid.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAsOnePlayId: () => (/* binding */ useAsOnePlayId)
/* harmony export */ });
/* harmony import */ var _use_preview_playid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./use-preview-playid */ "./jimu-layouts/lib/builder/layout-item-hook/use-preview-playid.ts");
/* harmony import */ var _use_liveview_playid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./use-liveview-playid */ "./jimu-layouts/lib/builder/layout-item-hook/use-liveview-playid.ts");


/**
 * Ways to trigger as one animation directly:
 * 1. preview effect
 * 2. switching from design mode to live view mode
 * 3. switch to another page in live view mode
 * 4. scroll into view in live view mode
 *
 * note: as one animation can be triggered indirectly if the container plays one by one
 * @param option
 * @returns
 */
function useAsOnePlayId(option) {
    const { type, isPreview, previewId, hasParentAnimation } = option;
    const previewPlayId = (0,_use_preview_playid__WEBPACK_IMPORTED_MODULE_0__.usePreviewPlayId)({ isPreview, previewId });
    const { playId: liveviewPlayId, revert: liveviewRevert, onAnimationEnd } = (0,_use_liveview_playid__WEBPACK_IMPORTED_MODULE_1__.useLiveviewPlayId)(type, hasParentAnimation);
    if (!type) {
        return [null, false, null];
    }
    if (isPreview) {
        return [previewPlayId, false, null];
    }
    return [liveviewPlayId, liveviewRevert, onAnimationEnd];
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-item-hook/use-liveview-playid.ts":
/*!**************************************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-item-hook/use-liveview-playid.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useLiveviewPlayId: () => (/* binding */ useLiveviewPlayId)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");


/**
 * Generate playId when the whole page's animation is played in live view mode.
 * 1. switch from design mode to live view mode
 * 2. size mode changes
 * 3. page is activated
 *
 * @param option
 * @returns
 */
function useLiveviewPlayId(type, hasParentAnimation) {
    const [liveViewPlayId, setLiveViewPlayId] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(null);
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const sizeMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.browserSizeMode;
    });
    const isPageVisible = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.PageVisibilityContext);
    const visibleRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(isPageVisible);
    const sizeModeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(sizeMode);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        // switch from edit mode to live view mode
        // update the playId manually to play animation
        // only monitor designMode change when there is no parent animation
        if (type != null && !hasParentAnimation) {
            if (!isDesignMode) {
                setLiveViewPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
            }
            else if (!visibleRef.current) {
                // for unvisible page, should show the hidden elements
                setLiveViewPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
            }
        }
    }, [isDesignMode, hasParentAnimation, type]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (type != null && !hasParentAnimation && !isDesignMode && sizeModeRef.current !== sizeMode) {
            sizeModeRef.current = sizeMode;
            setLiveViewPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
        }
    }, [sizeMode, isDesignMode, hasParentAnimation, type]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        // visible -> invisible or invisible -> visible
        if (type != null && !hasParentAnimation && !isDesignMode && visibleRef.current !== isPageVisible) {
            visibleRef.current = isPageVisible;
            setLiveViewPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
        }
    }, [isPageVisible, isDesignMode, hasParentAnimation, type]);
    const resetPlayId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setLiveViewPlayId(null);
    }, []);
    return {
        playId: liveViewPlayId,
        revert: isDesignMode ? false : !isPageVisible, // do not hide elements in design mode
        onAnimationEnd: resetPlayId
    };
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-item-hook/use-onebyone-playid.ts":
/*!**************************************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-item-hook/use-onebyone-playid.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useOneByOnePlayId: () => (/* binding */ useOneByOnePlayId)
/* harmony export */ });
/* harmony import */ var _use_preview_playid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./use-preview-playid */ "./jimu-layouts/lib/builder/layout-item-hook/use-preview-playid.ts");
/* harmony import */ var _use_liveview_playid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./use-liveview-playid */ "./jimu-layouts/lib/builder/layout-item-hook/use-liveview-playid.ts");


/**
 * Ways to trigger one by one animation directly:
 * 1. preview effect
 * 2. If the container widget has no animation effect:
 *  2.1. switching from design mode to live view mode
 *  2.2. switch to another page in live view mode
 *  2.3. scroll into view in live view mode
 *
 * note: one by one can be triggered indirectly if the container plays animation
 * @param option
 * @returns
 */
function useOneByOnePlayId(option) {
    const { type, isPreview, previewId, hasParentAnimation } = option;
    const previewPlayId = (0,_use_preview_playid__WEBPACK_IMPORTED_MODULE_0__.usePreviewPlayId)({ isPreview, previewId });
    const { playId: liveviewPlayId, revert: liveviewRevert, onAnimationEnd } = (0,_use_liveview_playid__WEBPACK_IMPORTED_MODULE_1__.useLiveviewPlayId)(type, hasParentAnimation);
    if (!type) {
        return [null, false, null];
    }
    if (isPreview) {
        return [previewPlayId, false, null];
    }
    return [liveviewPlayId, liveviewRevert, onAnimationEnd];
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-item-hook/use-preview-playid.ts":
/*!*************************************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-item-hook/use-preview-playid.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   usePreviewPlayId: () => (/* binding */ usePreviewPlayId)
/* harmony export */ });
/**
 * Generate playId when user preview the animation effect of a single widget
 * @param option
 * @returns
 */
function usePreviewPlayId(option) {
    const { isPreview, previewId } = option;
    return isPreview ? previewId : null;
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-item-toolbar.tsx":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-item-toolbar.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LayoutItemToolbar: () => (/* binding */ LayoutItemToolbar)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _toolbar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./toolbar */ "./jimu-layouts/lib/builder/toolbar.tsx");
/* harmony import */ var _menu_common_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _menu_section_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/** @jsx jsx */





const commonWidgetMenuItems = [_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.duplicateMenuItem, _menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.floatingMenuItem, _menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.sinkingMenuItem, _menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.pendingMenuItem, _menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.deleteMenuItem];
const commonSectionMenuItems = [].concat(_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__.sectionMenuItems, commonWidgetMenuItems);
let count = 0;
function getExtensionTools({ layoutId, layoutItem, refElement }) {
    const { widgetId } = layoutItem;
    if (!widgetId) {
        return [];
    }
    const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.ContextTool);
    const clientRect = refElement.getBoundingClientRect();
    return exts
        .filter(ext => ext.widgetId === widgetId)
        .map(ext => {
        return {
            widgetId,
            icon: ext.getIcon(),
            title: ext.getTitle.bind(ext),
            onClick: ext.onClick.bind(ext),
            checked: ext.checked && ext.checked.bind(ext),
            disabled: ext.disabled ? (typeof ext.disabled === 'function' ? ext.disabled.bind(ext) : ext.disabled) : null,
            visible: ext.visible ? (typeof ext.visible === 'function' ? ext.visible.bind(ext) : ext.visible) : null,
            settingPanel: ext.getSettingPanel({
                layoutId,
                layoutItem,
                clientRect
            }),
            index: ext.index,
            extName: ext.name
        };
    })
        .sort((a, b) => {
        return a.index - b.index;
    });
}
function LayoutItemToolbar(props) {
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => state.extensionsInfo[jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.ContextTool]);
    const { layoutId, layoutItem, refElement, modifiers, formatMessage, builderTheme, toolItems = [], showDefaultTools = true } = props;
    if (!refElement) {
        return null;
    }
    const isSection = layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section;
    let extensionTools = getExtensionTools(props);
    const commonToolItems = isSection ? commonSectionMenuItems : commonWidgetMenuItems;
    const defaultTools = showDefaultTools ? [...toolItems, ...commonToolItems] : toolItems;
    if (extensionTools.length > 0) {
        extensionTools = [].concat(defaultTools, { seperator: true }, extensionTools);
    }
    else {
        extensionTools = defaultTools;
    }
    if (extensionTools.length === 0) {
        return null;
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__._Popper, { placement: 'top-start', reference: refElement, open: true, modifiers: modifiers, version: count++, trapFocus: false, autoFocus: false, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        background: transparent;
        box-shadow: none;
      ` },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar__WEBPACK_IMPORTED_MODULE_2__.Toolbar, { layoutId: layoutId, layoutItem: layoutItem, theme: builderTheme, parentRef: refElement, tools: extensionTools, formatMessage: formatMessage }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-item.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-item.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ LayoutItemInBuilder)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _context_menu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context-menu */ "./jimu-layouts/lib/builder/context-menu.tsx");
/* harmony import */ var _interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var _menu_common_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _select_wrapper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./select-wrapper */ "./jimu-layouts/lib/builder/select-wrapper.tsx");
/* harmony import */ var _widget_renderer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./widget-renderer */ "./jimu-layouts/lib/builder/widget-renderer.tsx");
/* harmony import */ var _section_renderer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./section-renderer */ "./jimu-layouts/lib/builder/section-renderer.tsx");
/* harmony import */ var _menu_section_menu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _layout_item_hook_use_asone_playid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./layout-item-hook/use-asone-playid */ "./jimu-layouts/lib/builder/layout-item-hook/use-asone-playid.ts");
/* harmony import */ var _layout_item_hook_use_onebyone_playid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./layout-item-hook/use-onebyone-playid */ "./jimu-layouts/lib/builder/layout-item-hook/use-onebyone-playid.ts");
/* harmony import */ var _use_viewport_intersection__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../use-viewport-intersection */ "./jimu-layouts/lib/use-viewport-intersection.ts");
/* harmony import */ var _layout_item_dnd_hook__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./layout-item-dnd-hook */ "./jimu-layouts/lib/builder/layout-item-dnd-hook.tsx");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */
/* eslint-disable @typescript-eslint/no-unused-vars */














const defaultConstextMenus = [_menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.settingMenuItem, _menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.draggingMenuItem, _menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.pendingMenuItem, _menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.deleteMenuItem];
const dragMenus = [_menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.draggingMenuItem];
function findInnerLayoutId(state, layoutId, layoutItemId) {
    const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
    if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widgetJson = state.appConfig.widgets[layoutItem.widgetId]; // may be a placeholder
        if ((widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.layouts) != null) { // widget may have multiple inner layout, like sidebar
            const names = Object.keys(widgetJson.layouts);
            if (names.length === 1) {
                const sizeModeLayout = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.layouts[names[0]];
                if (sizeModeLayout) {
                    return sizeModeLayout[state.browserSizeMode];
                }
            }
            else {
                const output = [];
                names.forEach((name) => {
                    const sizeModeLayout = widgetJson.layouts[name];
                    output.push(sizeModeLayout[state.browserSizeMode]);
                });
                return output;
            }
        }
    }
    return null;
}
/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable react-hooks/exhaustive-deps */
function LayoutItemInBuilder(props) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
    const stateProps = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => mapStateToProps(state, props), jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.shallowEqual);
    const allProps = Object.assign(Object.assign({}, stateProps), props);
    const pageContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.PageContext);
    const refObj = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    let mousedownX;
    let mousedownY;
    const { effect, oneByOneEffect, hoverEffect } = (_b = (_a = allProps.layoutItem) === null || _a === void 0 ? void 0 : _a.setting) !== null && _b !== void 0 ? _b : {};
    const { animationPreview, hoverPreview, previewId, playMode, layoutType } = allProps;
    const getCurrentRootLayoutId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => pageContext.rootLayoutId, [pageContext.rootLayoutId]);
    const isInViewport = (0,_use_viewport_intersection__WEBPACK_IMPORTED_MODULE_12__.useViewportIntersection)(refObj.current, allProps.watchViewportVisibility);
    let effectType = (_c = effect === null || effect === void 0 ? void 0 : effect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView]) === null || _c === void 0 ? void 0 : _c.type;
    effectType = effectType && effectType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None ? effectType : null;
    let oneByOneEffectType = (_d = oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView]) === null || _d === void 0 ? void 0 : _d.type;
    oneByOneEffectType = oneByOneEffectType && oneByOneEffectType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None ? oneByOneEffectType : null;
    const [animationContext, setAnimationContext] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState({
        setting: oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView],
        playId: null,
        oid: stateProps.innerLayoutId,
        revert: null,
        playMode: null
    });
    const { setting: parentAnimationSetting } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext);
    const [asOnePlayId, asOneRevert, onAsOneAnimationEnd] = (0,_layout_item_hook_use_asone_playid__WEBPACK_IMPORTED_MODULE_10__.useAsOnePlayId)({
        type: effectType,
        isPreview: animationPreview,
        previewId: playMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.OneByOne ? previewId : null,
        hasParentAnimation: (parentAnimationSetting === null || parentAnimationSetting === void 0 ? void 0 : parentAnimationSetting.type) != null && parentAnimationSetting.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None
    });
    const [oneByOnePlayId, oneByOneRevert, onOnebyOneAnimationEnd] = (0,_layout_item_hook_use_onebyone_playid__WEBPACK_IMPORTED_MODULE_11__.useOneByOnePlayId)({
        type: oneByOneEffectType,
        isPreview: animationPreview,
        previewId: playMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.AsOne ? previewId : null,
        hasParentAnimation: (parentAnimationSetting === null || parentAnimationSetting === void 0 ? void 0 : parentAnimationSetting.type) != null && parentAnimationSetting.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None
    });
    const { registerWidgetInitDragHandler, registerWidgetInitResizeHandler, setRefElement } = (0,_layout_item_dnd_hook__WEBPACK_IMPORTED_MODULE_13__.useDndBinding)({
        restrict: props.restrict,
        layoutId: props.layoutId,
        layoutItemId: props.layoutItemId,
        layoutType,
        layoutItemType: (_e = stateProps.layoutItem) === null || _e === void 0 ? void 0 : _e.type,
        useDragHandler: props.useDragHandler,
        resizeObserver: props.resizeObserver,
        getCurrentRootLayoutId,
        onDragStart: props.onDragStart,
        onDragging: props.onDragging,
        onDragEnd: props.onDragEnd,
        onResizeStart: props.onResizeStart,
        onResizing: props.onResizing,
        onResizeEnd: props.onResizeEnd
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        setRefElement(refObj.current);
    }, []);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        // no as one playId, play inner animations one by one by setting animation context
        if (asOnePlayId == null && oneByOnePlayId) {
            setAnimationContext({
                setting: oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView],
                playId: oneByOnePlayId,
                oid: stateProps.innerLayoutId,
                revert: oneByOneRevert,
                playMode,
                onContextAnimationEnd: oneByOneRevert
                    ? null
                    : () => {
                        // clear animation preview setting if it is preview as one
                        onOnebyOneAnimationEnd === null || onOnebyOneAnimationEnd === void 0 ? void 0 : onOnebyOneAnimationEnd();
                        if (animationPreview) {
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.clearAnimationPreview());
                        }
                        setAnimationContext({
                            setting: oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView],
                            oid: stateProps.innerLayoutId,
                            playId: -1
                        });
                    }
            });
        }
    }, [asOnePlayId, oneByOnePlayId]);
    const shouldAnimationPassdown = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        var _a;
        // Animation may be trigger by:
        // 1. preview the layout item's animation
        //    1.1 if preview as one, the animation should stop here
        //    1.2 if preview as a whole, the animation should pass down
        // 2. parent animation is playing, this item is played as a child
        //    2.1 if the parent is previewed as onebyone, the animation should stop here
        //    2.2 otherwise, the animation should pass down
        if (animationPreview) {
            // case 1.1 and 1.2, preview one by one can not trigger this item's animation
            return playMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.AsOne;
        }
        // Parent is playing. check if it is previewed as a whole
        const previewInfo = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.animationPreview;
        return previewInfo == null || previewInfo.playMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.OneByOne;
    }, [animationPreview]);
    const handleSingleAnimationStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        var _a;
        if (shouldAnimationPassdown()) {
            // maybe there is no one by one animation, but some child element has its own animation
            const setting = oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
            const revert = ((_a = setting === null || setting === void 0 ? void 0 : setting.option) === null || _a === void 0 ? void 0 : _a.start) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationStartMode.AfterPrevious; // check one by one start mode
            setAnimationContext({
                setting,
                playId: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)(),
                oid: stateProps.innerLayoutId,
                revert,
                playMode,
                onContextAnimationEnd: revert // no need to reset animation context if it is revert
                    ? null
                    : () => {
                        // clear playId
                        setAnimationContext({ setting, oid: stateProps.innerLayoutId, playId: -1 });
                    }
            });
        }
    }, [oneByOneEffectType, animationPreview, playMode, shouldAnimationPassdown]);
    const handleSingleAnimationEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        var _a;
        if (shouldAnimationPassdown()) {
            const setting = oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
            // only plays when start mode is "after previous"
            if (((_a = setting === null || setting === void 0 ? void 0 : setting.option) === null || _a === void 0 ? void 0 : _a.start) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationStartMode.AfterPrevious) {
                setAnimationContext({
                    setting,
                    playId: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)(),
                    oid: stateProps.innerLayoutId,
                    revert: false,
                    playMode,
                    onContextAnimationEnd: () => {
                        // clear playId
                        setAnimationContext({ setting, oid: stateProps.innerLayoutId, playId: -1 });
                    }
                });
            }
        }
        // clear animation preview setting if it is preview as one
        onAsOneAnimationEnd === null || onAsOneAnimationEnd === void 0 ? void 0 : onAsOneAnimationEnd();
        if (animationPreview) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.clearAnimationPreview());
        }
    }, [oneByOneEffectType, animationPreview, playMode, shouldAnimationPassdown]);
    /**
     * Enable inline editing mode for the widget
     *
     * @memberof LayoutItemInBuilder
     */
    function doubleClick(e) {
        const { layoutId, layoutItemId } = props;
        const { supportInlineEditing, widgetId } = stateProps;
        if (props.onDoubleClick) {
            props.onDoubleClick(e, { layoutId, layoutItemId });
        }
        if (pageContext.viewOnly) {
            return;
        }
        e.stopPropagation();
        if (supportInlineEditing) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.setWidgetIsInlineEditingState(widgetId, true));
        }
    }
    function onItemClick(e) {
        if (Math.abs(e.screenX - mousedownX) > jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.CLICK_TOLRERANCE || Math.abs(e.screenY - mousedownY) > jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.CLICK_TOLRERANCE) {
            e.stopPropagation();
            return;
        }
        const { viewOnly } = pageContext;
        const { isFunctionalWidget, layoutItem } = stateProps;
        if (viewOnly ||
            (((0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.isLockLayout)() || !(0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.isDesignMode)()) &&
                !isFunctionalWidget &&
                layoutItem.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section)) {
            // propagate normally in view mode
            return;
        }
        e.stopPropagation();
        if ((0,_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_4__.isResizing)() || (0,_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__.isDragging)()) {
            // Prevent switching selection when resizing an item
            return;
        }
        if (props.onClick) {
            const { layoutId, layoutItemId } = allProps;
            props.onClick(e, { layoutId, layoutItemId });
        }
        switchSetting();
    }
    function onMouseDown(e) {
        mousedownX = e.screenX;
        mousedownY = e.screenY;
    }
    function createContextMenu(rotate) {
        const { builderTheme } = pageContext;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_context_menu__WEBPACK_IMPORTED_MODULE_2__["default"], { builderTheme: builderTheme, layoutId: props.layoutId, layoutItem: stateProps.layoutItem, positionType: 'center', size: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.CONTEXT_MENU_ITEM_SIZE, rotate: rotate, iconSize: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.CONTEXT_MENU_ICON_SIZE, className: 'widget-context-menu', menuItems: props.contextMenuItems || (stateProps.useDragHandler ? dragMenus : defaultConstextMenus) }));
    }
    function switchSetting() {
        const { layoutId, layoutItemId } = props;
        if (!stateProps.selected) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({
                layoutId,
                layoutItemId
            }));
        }
    }
    function getStyle(rotate) {
        var _a;
        const draggable = canDrag();
        const isInlineEditing = (_a = stateProps.isInlineEditing) !== null && _a !== void 0 ? _a : false;
        const defaultColor = jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(pageContext.builderTheme.colors.palette.dark[300], 0.6);
        const hoverColor = pageContext.builderTheme.colors.palette.primary[600];
        const outlineStyle = (!isFunctionalWidget || isSection) && !selected ? 'dashed' : 'solid';
        let hoverStyle = null;
        if (!(0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.isDesignMode)()) {
            hoverStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getHoverStyle)(hoverEffect === null || hoverEffect === void 0 ? void 0 : hoverEffect.type, hoverEffect === null || hoverEffect === void 0 ? void 0 : hoverEffect.setting);
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      ${hoverStyle};
      position: relative;
      overflow: visible;
      cursor: ${draggable ? 'move' : 'default'};
      touch-action: ${(isInlineEditing || !selected) ? 'auto' : 'none'};
      user-select: ${isInlineEditing ? 'auto' : 'none'};
      min-width: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.MIN_LAYOUT_ITEM_SIZE}px;
      min-height: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.MIN_LAYOUT_ITEM_SIZE}px;

      & > div.widget-context-menu {
        display: none;
      }

      &:hover > div.widget-context-menu {
        display: flex;
      }

      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_H5_DRAGGING_CLASS_NAME} &.functional-widget {
        pointer-events: none;
      }
      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_H5_DRAGGING_CLASS_NAME} &.functional-widget .exb-drop-area {
        pointer-events: all;
      }

      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_H5_DRAGGING_CLASS_NAME} &,
      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_DRAGGING_CLASS_NAME} & {
        > div.highlight-tip {
          .tip-content {
            outline-color: ${defaultColor};
          }
        }
      }

      body:not(.design-mode) &,
      body.lock-layout & {
        cursor: default;
      }

      body:not(.design-mode) & > div.highlight-tip {
        display: none !important;
      }

      & > div.highlight-tip {
        display: block;
        padding: inherit;
        position: absolute;
        left: 0;
        bottom: 0;
        top: 0;
        right: 0;
        pointer-events: none;
        transform: ${rotate > 0 || rotate < 0 ? `rotateZ(${rotate}deg)` : ''};
        .tip-content {
          height: 100%;
          padding: 1px;
          &:after {
            content: '';
            width: 100%;
            height: 100%;
            outline: ${isBlock && !selected
            ? 'none'
            : `1px ${outlineStyle} ${defaultColor}`};
            display: block;
            outline-color: ${!isFunctionalWidget || isSection
            ? defaultColor
            : 'transparent'};
          }
        }
      }

      &:hover > div.highlight-tip,
      &.hovered > div.highlight-tip {
        display: block;
        .tip-content {
          &:after {
            outline-color: ${hoverColor};
          }
        }
      }

      &.functional-widget:not(.selected):hover > div.highlight-tip,
      &.functional-widget:not(.selected).hovered > div.highlight-tip {
        .tip-content {
          &:after {
            outline-width: 2px;
          }
        }
      }
    `;
    }
    function canDrag() {
        var _a;
        const { selected, draggable = true } = allProps;
        const isInlineEditing = (_a = stateProps.isInlineEditing) !== null && _a !== void 0 ? _a : false;
        const isTouchDevice = jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isTouchDevice();
        return (draggable && // draggable !== false
            !pageContext.viewOnly &&
            !isInlineEditing &&
            (!isTouchDevice || selected));
    }
    const { layoutId, layoutItemId, top, left, right, bottom, resizable, draggable, isBlock, autoScroll, layoutItem, isFunctionalWidget, selected, isInlineEditing, hasEmbeddedLayout, hasExtension } = allProps;
    if (!layoutItem) {
        return null;
    }
    const { className, forbidContextMenu, onClick, onDoubleClick, children, id, isLastChild } = allProps, otherProps = __rest(allProps, ["className", "forbidContextMenu", "onClick", "onDoubleClick", "children", "id", "isLastChild"]);
    const isWidget = layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget;
    const isSection = layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section;
    const showContextMenu = !forbidContextMenu &&
        !pageContext.viewOnly &&
        (layoutItem.widgetId || layoutItem.sectionId) &&
        (!isFunctionalWidget || isSection);
    const effectOption = (_f = effect === null || effect === void 0 ? void 0 : effect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView]) === null || _f === void 0 ? void 0 : _f.option;
    const rotate = (_k = (_j = (_h = (_g = layoutItem.setting) === null || _g === void 0 ? void 0 : _g.style) === null || _h === void 0 ? void 0 : _h.transform) === null || _j === void 0 ? void 0 : _j.rotate) !== null && _k !== void 0 ? _k : 0;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.ViewportVisibilityContext.Provider, { value: (0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_5__.isDesignMode)() ? true : isInViewport },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationComponent, { id: id, parentId: layoutId, type: effectType, configType: effectOption === null || effectOption === void 0 ? void 0 : effectOption.configType, direction: effectOption === null || effectOption === void 0 ? void 0 : effectOption.direction, revert: asOneRevert, delay: props.delay, isLastChild: isLastChild, playId: asOnePlayId, hoverEffect: hoverEffect, hoverPlayId: previewId, onAnimationStart: handleSingleAnimationStart, onAnimationEnd: handleSingleAnimationEnd, css: getStyle(rotate), style: props.style, ref: refObj, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('builder-layout-item exb-rnd', className, {
                selected,
                'is-widget': isWidget,
                'is-section': isSection,
                'functional-widget': isWidget && isFunctionalWidget,
                'no-drag-action': !canDrag()
            }), onDoubleClick: doubleClick, onClick: onItemClick, onMouseDown: onMouseDown, "data-layoutitemid": layoutItemId, "data-layoutid": layoutId },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext.Provider, { value: animationContext },
                isWidget && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_renderer__WEBPACK_IMPORTED_MODULE_7__.WidgetRendererInBuilder, Object.assign({ rotate: rotate, onInitDragHandler: registerWidgetInitDragHandler, onInitResizeHandler: registerWidgetInitResizeHandler }, otherProps)),
                isSection && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_section_renderer__WEBPACK_IMPORTED_MODULE_8__.SectionRendererInBuilder, Object.assign({ rotate: rotate }, otherProps))),
            (showContextMenu || stateProps.useDragHandler) && !pageContext.viewOnly && !stateProps.isInController && createContextMenu(rotate),
            !pageContext.viewOnly && selected && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_select_wrapper__WEBPACK_IMPORTED_MODULE_6__["default"], { layoutId: layoutId, layoutItem: layoutItem, top: top, left: left, right: right, bottom: bottom, resizable: resizable, draggable: draggable, selected: selected, autoScroll: autoScroll, forbidToolbar: props.forbidToolbar, toolItems: props.toolItems, showDefaultTools: props.showDefaultTools, isInlineEditing: isInlineEditing, isFunctionalWidget: isFunctionalWidget, hasEmbeddedLayout: hasEmbeddedLayout, isSection: isSection, isBlock: isBlock, hasExtension: isWidget && hasExtension, widgetJson: stateProps.widgetJson, widgetState: stateProps.widgetState, rotate: rotate })),
            !pageContext.viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'highlight-tip' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'tip-content' }))),
            props.children)));
}
const mapStateToProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.mapStateToLayoutItemProps(state, ownProps),
    (state, ownProps) => { var _a; return (_a = state.appConfig.layouts[ownProps.layoutId]) === null || _a === void 0 ? void 0 : _a.type; },
    (state, ownProps) => {
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(state.appConfig, { layoutId: ownProps.layoutId, layoutItemId: ownProps.layoutItemId });
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const innerLayoutId = findInnerLayoutId(state, ownProps.layoutId, ownProps.layoutItemId);
            return innerLayoutId;
        }
        return null;
    },
    (state, ownProps) => {
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(state.appConfig, { layoutId: ownProps.layoutId, layoutItemId: ownProps.layoutItemId });
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.mapStateToWidgetProps(state, ownProps);
        }
        return null;
    },
    (state, ownProps) => {
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(state.appConfig, { layoutId: ownProps.layoutId, layoutItemId: ownProps.layoutItemId });
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.getSectionInfo(state, layoutItem.sectionId);
        }
        return null;
    },
    (state, ownProps) => {
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(state.appConfig, { layoutId: ownProps.layoutId, layoutItemId: ownProps.layoutItemId });
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            const sectionProps = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.getSectionInfo(state, layoutItem.sectionId);
            const activeViewId = (0,_menu_section_menu__WEBPACK_IMPORTED_MODULE_9__.findActiveViewId)(sectionProps);
            return state.appConfig.views[activeViewId];
        }
        return null;
    }
], (layoutItemProps, layoutType, innerLayoutId, widgetProps, sectionProps, activeView) => {
    return Object.assign(Object.assign(Object.assign({ layoutType,
        innerLayoutId,
        activeView }, layoutItemProps), (widgetProps !== null && widgetProps !== void 0 ? widgetProps : {})), (sectionProps !== null && sectionProps !== void 0 ? sectionProps : {}));
});


/***/ }),

/***/ "./jimu-layouts/lib/builder/menu/common-menu.tsx":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/builder/menu/common-menu.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteMenuItem: () => (/* binding */ deleteMenuItem),
/* harmony export */   draggingMenuItem: () => (/* binding */ draggingMenuItem),
/* harmony export */   duplicateMenuItem: () => (/* binding */ duplicateMenuItem),
/* harmony export */   floatingMenuItem: () => (/* binding */ floatingMenuItem),
/* harmony export */   getAppMode: () => (/* binding */ getAppMode),
/* harmony export */   getLabelOfLayoutItem: () => (/* binding */ getLabelOfLayoutItem),
/* harmony export */   isDesignMode: () => (/* binding */ isDesignMode),
/* harmony export */   isLockLayout: () => (/* binding */ isLockLayout),
/* harmony export */   isNormalWidget: () => (/* binding */ isNormalWidget),
/* harmony export */   pendingMenuItem: () => (/* binding */ pendingMenuItem),
/* harmony export */   settingMenuItem: () => (/* binding */ settingMenuItem),
/* harmony export */   sinkingMenuItem: () => (/* binding */ sinkingMenuItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _common_layout_actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _floating_area_chooser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./floating-area-chooser */ "./jimu-layouts/lib/builder/menu/floating-area-chooser.tsx");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/pending.svg */ "./jimu-icons/svg/outlined/editor/pending.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/move.svg */ "./jimu-icons/svg/outlined/editor/move.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/duplicate.svg */ "./jimu-icons/svg/outlined/editor/duplicate.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var jimu_icons_svg_outlined_editor_float_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/float.svg */ "./jimu-icons/svg/outlined/editor/float.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_float_svg__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_float_svg__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var jimu_icons_svg_outlined_editor_unfloat_svg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/unfloat.svg */ "./jimu-icons/svg/outlined/editor/unfloat.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_unfloat_svg__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_unfloat_svg__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/setting.svg */ "./jimu-icons/svg/outlined/application/setting.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_10__);











function getAppMode() {
    var _a;
    let state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    if (window.jimuConfig.isBuilder) {
        state = state.appStateInBuilder;
    }
    return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode;
}
function isLockLayout() {
    var _a, _b, _c;
    let state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    if (window.jimuConfig.isBuilder) {
        state = state.appStateInBuilder;
    }
    return (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false;
}
function getLabelOfLayoutItem(layoutItem) {
    var _a, _b, _c;
    const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widgetJson = appConfig.widgets[layoutItem.widgetId];
        return (_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.label) !== null && _a !== void 0 ? _a : '';
    }
    if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        const sectionJson = appConfig.sections[layoutItem.sectionId];
        return (_b = sectionJson === null || sectionJson === void 0 ? void 0 : sectionJson.label) !== null && _b !== void 0 ? _b : '';
    }
    if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
        const sgJson = appConfig.screenGroups[layoutItem.screenGroupId];
        return (_c = sgJson === null || sgJson === void 0 ? void 0 : sgJson.label) !== null && _c !== void 0 ? _c : '';
    }
    return '';
}
function hasContent(props) {
    const { layoutItem } = props;
    return layoutItem.widgetId != null || layoutItem.sectionId != null || layoutItem.screenGroupId != null;
}
function isDesignMode() {
    return getAppMode() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
}
function isNormalWidget(layoutItem) {
    var _a;
    let state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    if (window.jimuConfig.isBuilder) {
        state = state.appStateInBuilder;
    }
    if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
        const appConfig = state.appConfig;
        const widget = appConfig.widgets[layoutItem.widgetId];
        if (widget) {
            return ((_a = widget.manifest) === null || _a === void 0 ? void 0 : _a.widgetType) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout;
        }
    }
    return false;
}
const deleteMenuItem = {
    icon: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
    title: (props) => {
        return props.formatMessage('delete');
    },
    visible: (props) => {
        return getAppMode() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design &&
            (!isLockLayout() || isNormalWidget(props.layoutItem));
    },
    onClick: (props) => {
        const { layoutItem, layoutId } = props;
        const layoutInfo = {
            layoutId,
            layoutItemId: layoutItem.id
        };
        jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.appBuilderSync.publishConfirmDeleteToApp(layoutInfo);
    }
};
const pendingMenuItem = {
    icon: (jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5___default()),
    title: (props) => {
        return props.formatMessage('pendingTip');
    },
    visible: (props) => getAppMode() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !isLockLayout() && hasContent(props),
    onClick: (props) => {
        const { layoutId, layoutItem } = props;
        (0,_common_layout_actions__WEBPACK_IMPORTED_MODULE_1__.pendLayoutItem)({
            layoutId,
            layoutItemId: layoutItem.id
        });
    }
};
const settingMenuItem = {
    icon: (jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_10___default()),
    title: (props) => {
        return props.formatMessage('setting');
    },
    onClick: (props) => {
        const { layoutId, layoutItem } = props;
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({
            layoutId,
            layoutItemId: layoutItem.id
        }));
    }
};
const draggingMenuItem = {
    icon: (jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_6___default()),
    title: (props) => {
        const { layoutItem } = props;
        return props.formatMessage('dragToMove', { label: getLabelOfLayoutItem(layoutItem) });
    },
    visible: () => getAppMode() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !isLockLayout()
};
const duplicateMenuItem = {
    icon: (jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_7___default()),
    title: (props) => {
        return props.formatMessage('duplicate');
    },
    visible: (props) => {
        var _a, _b, _c;
        if (isLockLayout() || !isDesignMode()) {
            return false;
        }
        // if it is in a row, the number of sibling items should be less than 12
        const { layoutId } = props;
        const layout = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig) === null || _a === void 0 ? void 0 : _a.layouts[layoutId];
        if ((layout === null || layout === void 0 ? void 0 : layout.type) === 'ROW') {
            return ((_c = (_b = layout.order) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) < 12;
        }
        return true;
    },
    onClick: (props) => {
        const { layoutId, layoutItem } = props;
        (0,_common_layout_actions__WEBPACK_IMPORTED_MODULE_1__.duplicateLayoutItem)({ layoutId, layoutItemId: layoutItem.id });
    }
};
const floatingMenuItem = {
    icon: (jimu_icons_svg_outlined_editor_float_svg__WEBPACK_IMPORTED_MODULE_8___default()),
    title: (props) => {
        return props.formatMessage('floating');
    },
    visible: (props) => {
        if (isLockLayout() || !isDesignMode()) {
            return false;
        }
        const { layoutItem, layoutId } = props;
        return (0,_common_layout_actions__WEBPACK_IMPORTED_MODULE_1__.supportFloating)({ layoutId, layoutItemId: layoutItem.id });
    },
    settingPanel: _floating_area_chooser__WEBPACK_IMPORTED_MODULE_3__.FloatingAreaChooser,
    onClick: () => { }
};
const sinkingMenuItem = {
    icon: (jimu_icons_svg_outlined_editor_unfloat_svg__WEBPACK_IMPORTED_MODULE_9___default()),
    title: (props) => {
        return props.formatMessage('sinking');
    },
    visible: (props) => {
        var _a, _b;
        if (isLockLayout() || !isDesignMode()) {
            return false;
        }
        const { layoutItem } = props;
        return ((_b = (_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.isFloating) !== null && _b !== void 0 ? _b : false);
    },
    onClick: (props) => {
        const { layoutId, layoutItem, clientRect } = props;
        (0,_common_layout_actions__WEBPACK_IMPORTED_MODULE_1__.sinkingLayoutItem)({ layoutId, layoutItemId: layoutItem.id }, clientRect);
    }
};


/***/ }),

/***/ "./jimu-layouts/lib/builder/menu/floating-area-chooser.tsx":
/*!*****************************************************************!*\
  !*** ./jimu-layouts/lib/builder/menu/floating-area-chooser.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FloatingAreaChooser: () => (/* binding */ FloatingAreaChooser)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _common_layout_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/** @jsx jsx */




class FloatingAreaChooser extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.topLeft = this.updateFloatingArea.bind(this, 1);
        this.topCenter = this.updateFloatingArea.bind(this, 2);
        this.topRight = this.updateFloatingArea.bind(this, 3);
        this.middleLeft = this.updateFloatingArea.bind(this, 4);
        this.middleCenter = this.updateFloatingArea.bind(this, 5);
        this.middleRight = this.updateFloatingArea.bind(this, 6);
        this.bottomLeft = this.updateFloatingArea.bind(this, 7);
        this.bottomCenter = this.updateFloatingArea.bind(this, 8);
        this.bottomRight = this.updateFloatingArea.bind(this, 9);
    }
    updateFloatingArea(value) {
        const { layoutId, layoutItem } = this.props;
        const layoutInfo = { layoutId, layoutItemId: layoutItem.id };
        (0,_common_layout_actions__WEBPACK_IMPORTED_MODULE_2__.floatingLayoutItem)(layoutInfo, this.getSizeOfItem(), value);
    }
    getSizeOfItem() {
        const { layoutId, layoutItem } = this.props;
        let appDoc;
        if (window.jimuConfig.isBuilder) {
            const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
            appDoc = (appFrame === null || appFrame === void 0 ? void 0 : appFrame.contentDocument) || (appFrame === null || appFrame === void 0 ? void 0 : appFrame.contentWindow.document);
        }
        else {
            appDoc = document;
        }
        const layoutElem = appDoc.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
        if (layoutElem) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    getStyle() {
        let theme;
        if (window.jimuConfig.isBuilder) {
            theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_1__.getTheme)();
        }
        else {
            theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_1__.getTheme2)();
        }
        const borderColor = theme.colors.palette.light[500];
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      background-color: ${theme.colors.palette.light[300]};
      position: relative;
      padding: 4px;

      .content {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-row-gap: 0;
        grid-column-gap: 0;
        border: 1px solid ${borderColor};

        & > button {
          cursor: pointer;
          height: 50px;
          width: 50px;
          position: relative;
          border: none;
          background-color: transparent;

          &:after {
            content: '';
            position: absolute;
            left: 1px;
            top: 1px;
            right: 1px;
            bottom: 1px;
          }

          &:hover {
            &:after {
              outline: 1px solid ${theme.colors.palette.primary[700]};
              background: ${theme.colors.palette.primary[100]};
            }
          }
        }

        & > button:nth-of-type(3n+1) {
          border-right: 1px solid ${borderColor};
        }
        & > button:nth-of-type(3n) {
          border-left: 1px solid ${borderColor};
        }
        & > button:nth-of-type(1), & > button:nth-of-type(2), & > button:nth-of-type(3) {
          border-bottom: 1px solid ${borderColor};
        }
        & > button:nth-of-type(7), & > button:nth-of-type(8), & > button:nth-of-type(9) {
          border-top: 1px solid ${borderColor};
        }

        .selected:after {
          content: '';
          position: absolute;
          width: 100%;
          height: 100%;
          background-color: ${theme.colors.palette.primary[100]};
          border: 1px solid ${theme.colors.palette.primary[600]};
        }
      }
    `;
    }
    render() {
        const { area } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'floating-area-chooser d-flex', css: this.getStyle() },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'content w-100' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('top-left', { selected: area === 1 }), onClick: this.topLeft }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('top-center', { selected: area === 2 }), onClick: this.topCenter }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('top-right', { selected: area === 3 }), onClick: this.topRight }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('middle-left', { selected: area === 4 }), onClick: this.middleLeft }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('middle-center', { selected: area === 5 }), onClick: this.middleCenter }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('middle-right', { selected: area === 6 }), onClick: this.middleRight }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('bottom-left', { selected: area === 7 }), onClick: this.bottomLeft }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('bottom-center', { selected: area === 8 }), onClick: this.bottomCenter }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('bottom-right', { selected: area === 9 }), onClick: this.bottomRight }))));
    }
}
FloatingAreaChooser.defaultProps = {
    area: 0
};


/***/ }),

/***/ "./jimu-layouts/lib/builder/menu/screen-menu.tsx":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/builder/menu/screen-menu.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   screenMenuItems: () => (/* binding */ screenMenuItems)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _common_menu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/duplicate-page.svg */ "./jimu-icons/svg/outlined/editor/duplicate-page.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);





function findActiveScreenIndex(screenGroupId) {
    var _a, _b;
    let state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    if (window.jimuConfig.isBuilder) {
        state = state.appStateInBuilder;
    }
    const navInfo = (_a = state.appRuntimeInfo.screenGroupNavInfos) === null || _a === void 0 ? void 0 : _a[screenGroupId];
    return (_b = navInfo === null || navInfo === void 0 ? void 0 : navInfo.activeIndex) !== null && _b !== void 0 ? _b : 0;
}
const screenMenuItems = [
    {
        icon: (jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        title: (props) => {
            return props.formatMessage('duplicateScreen');
        },
        visible: () => (0,_common_menu__WEBPACK_IMPORTED_MODULE_2__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_common_menu__WEBPACK_IMPORTED_MODULE_2__.isLockLayout)(),
        onClick: (props) => {
            const { layoutItem } = props;
            const activeScreenIndex = findActiveScreenIndex(layoutItem.screenGroupId);
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            appConfigAction.duplicateScreenByIndex(activeScreenIndex, layoutItem.screenGroupId);
            appConfigAction.exec();
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(layoutItem.screenGroupId, activeScreenIndex + 1));
        }
    },
    {
        icon: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        title: (props) => {
            return props.formatMessage('deleteScreen');
        },
        visible: () => (0,_common_menu__WEBPACK_IMPORTED_MODULE_2__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_common_menu__WEBPACK_IMPORTED_MODULE_2__.isLockLayout)(),
        onClick: (props) => {
            const { layoutItem } = props;
            const activeScreenIndex = findActiveScreenIndex(layoutItem.screenGroupId);
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            const total = appConfigAction.appConfig.screenGroups[layoutItem.screenGroupId].screens.length;
            appConfigAction.removeScreenByIndex(activeScreenIndex, layoutItem.screenGroupId).exec();
            if (activeScreenIndex === total - 1) {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(layoutItem.screenGroupId, activeScreenIndex - 1));
            }
        }
    }
];


/***/ }),

/***/ "./jimu-layouts/lib/builder/menu/section-menu.tsx":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/builder/menu/section-menu.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   findActiveViewId: () => (/* binding */ findActiveViewId),
/* harmony export */   sectionMenuItems: () => (/* binding */ sectionMenuItems),
/* harmony export */   viewMenuItems: () => (/* binding */ viewMenuItems)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _common_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var jimu_icons_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/left.svg */ "./jimu-icons/svg/outlined/directional/left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/plus.svg */ "./jimu-icons/svg/outlined/editor/plus.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/duplicate-page.svg */ "./jimu-icons/svg/outlined/editor/duplicate-page.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var jimu_icons_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_8__);









function findSectionInfo(layoutItem) {
    let state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    if (window.jimuConfig.isBuilder) {
        state = state.appStateInBuilder;
    }
    return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.getSectionInfo(state, layoutItem.sectionId);
}
function findActiveViewId(props) {
    var _a;
    const { navInfo, views, activeView } = props !== null && props !== void 0 ? props : {};
    if (!navInfo) {
        return activeView === null || activeView === void 0 ? void 0 : activeView.id;
    }
    if (!navInfo.useProgress) {
        return navInfo.currentViewId;
    }
    const visibleViews = ((_a = navInfo.visibleViews) === null || _a === void 0 ? void 0 : _a.length) > 0 ? navInfo.visibleViews : views;
    const { currentIndex } = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getIndexFromProgress)(navInfo.progress, visibleViews.length);
    return visibleViews[currentIndex];
}
const duplicateViewTool = {
    icon: (jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_7___default()),
    title: (props) => {
        return props.formatMessage('duplicateView');
    },
    visible: () => (0,_common_menu__WEBPACK_IMPORTED_MODULE_3__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_common_menu__WEBPACK_IMPORTED_MODULE_3__.isLockLayout)(),
    onClick: (props) => {
        const { layoutItem } = props;
        const sectionInfo = findSectionInfo(layoutItem);
        let activeViewId = findActiveViewId(sectionInfo);
        if (!activeViewId) {
            const sectionInfo = findSectionInfo(layoutItem);
            activeViewId = sectionInfo.views[0];
        }
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const newView = appConfigAction.duplicateView(activeViewId, layoutItem.sectionId, true);
        appConfigAction.exec();
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(layoutItem.sectionId, newView.id);
    }
};
const deleteViewTool = {
    icon: (jimu_icons_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_8___default()),
    title: (props) => {
        return props.formatMessage('deleteView');
    },
    visible: (props) => {
        const appMode = (0,_common_menu__WEBPACK_IMPORTED_MODULE_3__.getAppMode)();
        if (appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design || (0,_common_menu__WEBPACK_IMPORTED_MODULE_3__.isLockLayout)()) {
            return false;
        }
        const { layoutItem } = props;
        const sectionInfo = findSectionInfo(layoutItem);
        if (!sectionInfo) {
            return false;
        }
        const { views } = sectionInfo;
        return views && views.length > 1;
    },
    onClick: (props) => {
        const { layoutItem } = props;
        const sectionInfo = findSectionInfo(layoutItem);
        const { views } = sectionInfo;
        const activeViewId = findActiveViewId(sectionInfo);
        if (views.length > 1) {
            const indexToDelete = views.indexOf(activeViewId);
            let viewIdToShow;
            if (indexToDelete > 0) {
                // show previous view
                viewIdToShow = views[indexToDelete - 1];
            }
            else {
                // show next view
                viewIdToShow = views[1];
            }
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)()
                .removeView(activeViewId, layoutItem.sectionId)
                .exec();
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(props.layoutItem.sectionId, viewIdToShow);
        }
    }
};
const sectionMenuItems = [
    {
        icon: (jimu_icons_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        autoFlipIcon: true,
        size: 10,
        title: (props) => {
            return props.formatMessage('previousView');
        },
        onClick: (props) => {
            const { layoutItem } = props;
            const sectionInfo = findSectionInfo(layoutItem);
            const { views } = sectionInfo;
            const activeViewId = findActiveViewId(sectionInfo);
            const index = views.indexOf(activeViewId);
            if (index > 0) {
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(layoutItem.sectionId, views[index - 1]);
            }
        },
        disabled: (props) => {
            const { layoutItem } = props;
            const sectionInfo = findSectionInfo(layoutItem);
            if (!sectionInfo) {
                return true;
            }
            const { views } = sectionInfo;
            const activeViewId = findActiveViewId(sectionInfo);
            const index = views.indexOf(activeViewId);
            return index <= 0;
        }
    },
    {
        label: (props) => {
            const { layoutItem } = props;
            const sectionInfo = findSectionInfo(layoutItem);
            if (!sectionInfo) {
                return '';
            }
            const { views } = sectionInfo;
            const activeViewId = findActiveViewId(sectionInfo);
            const index = Math.max(0, views.indexOf(activeViewId));
            return `${index + 1} / ${views.length}`;
        }
    },
    {
        icon: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_5___default()),
        autoFlipIcon: true,
        size: 10,
        title: (props) => {
            return props.formatMessage('nextView');
        },
        onClick: (props) => {
            const { layoutItem } = props;
            const sectionInfo = findSectionInfo(layoutItem);
            const { views } = sectionInfo;
            const activeViewId = findActiveViewId(sectionInfo);
            const index = views.indexOf(activeViewId);
            if (index >= 0 && index < views.length - 1) {
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(layoutItem.sectionId, views[index + 1]);
            }
        },
        disabled: (props) => {
            const { layoutItem } = props;
            const sectionInfo = findSectionInfo(layoutItem);
            if (!sectionInfo) {
                return true;
            }
            const { views } = sectionInfo;
            const activeViewId = findActiveViewId(sectionInfo);
            const index = views.indexOf(activeViewId);
            return index < 0 || index >= views.length - 1;
        }
    },
    {
        icon: (jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_6___default()),
        title: (props) => {
            return props.formatMessage('addView');
        },
        visible: () => (0,_common_menu__WEBPACK_IMPORTED_MODULE_3__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_common_menu__WEBPACK_IMPORTED_MODULE_3__.isLockLayout)(),
        onClick: (props) => {
            // const appConfig = getAppStore().getState().appConfig
            const { layoutItem } = props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            // const viewJson = Immutable({}).merge({
            //   id: appConfigUtils.getUniqueId(appConfig, 'view'),
            //   label: appConfigUtils.getUniqueLabel(appConfig, 'view', i18n.getIntl().formatMessage({ id: 'view' }))
            // }) as IMViewJson
            const viewId = appConfigAction.addView(layoutItem.sectionId);
            appConfigAction.exec();
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(layoutItem.sectionId, viewId);
        }
    },
    duplicateViewTool,
    deleteViewTool,
    { seperator: true }
];
const viewMenuItems = [
    duplicateViewTool,
    deleteViewTool
];


/***/ }),

/***/ "./jimu-layouts/lib/builder/page-body.tsx":
/*!************************************************!*\
  !*** ./jimu-layouts/lib/builder/page-body.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageBody: () => (/* binding */ PageBody)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/builder/layout-entry.tsx");
/* harmony import */ var _page_renderer_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./page-renderer-common */ "./jimu-layouts/lib/builder/page-renderer-common.ts");
/* harmony import */ var _common_page_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/page-util */ "./jimu-layouts/lib/common/page-util.ts");
/* harmony import */ var _controller_panel_builder_group__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../controller-panel/builder/group */ "./jimu-layouts/lib/controller-panel/builder/group.tsx");
/** @jsx jsx */






function mapStateToProps(state, pageId) {
    const animationPreview = state.appRuntimeInfo.animationPreview;
    if ((animationPreview === null || animationPreview === void 0 ? void 0 : animationPreview.pageId) === pageId) {
        return { previewId: animationPreview.id, playMode: animationPreview.playMode };
    }
    return { previewId: 0, playMode: null };
}
/* eslint-disable @typescript-eslint/no-unused-vars */
function PageBody(props) {
    const { pageJson, visible, renderedPageId, browserSizeMode, activePagePart, pageContext, headerFooterHeight } = props;
    const [playId, setPlayId] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(0);
    const { previewId, playMode } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => mapStateToProps(state, pageJson.id), jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.shallowEqual);
    /* eslint-disable react-hooks/exhaustive-deps */
    const pageHeight = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return (0,_common_page_util__WEBPACK_IMPORTED_MODULE_4__.computePageHeight)(pageJson, headerFooterHeight);
    }, [headerFooterHeight]);
    const layout = pageJson.layout;
    const oneByOneEffect = pageJson.oneByOneEffect && pageJson.oneByOneEffect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None ? pageJson.oneByOneEffect : null;
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return oneByOneEffect === null ? true : ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const sizeMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return oneByOneEffect === null ? null : state.browserSizeMode;
    });
    const effectRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(oneByOneEffect);
    const sizeModeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(sizeMode);
    const visibleRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(visible);
    const revert = oneByOneEffect ? (!visible) : null;
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        effectRef.current = oneByOneEffect;
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (!isDesignMode) { // isDesignMode === false
            // play every animation
            setPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
        }
        else if (!visibleRef.current) {
            setPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)()); // restore the hidden items
        }
    }, [isDesignMode]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (!isDesignMode && sizeModeRef.current !== sizeMode) {
            setPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
        }
        sizeModeRef.current = sizeMode;
    }, [sizeMode, isDesignMode]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (!isDesignMode && visibleRef.current !== visible && effectRef.current) {
            setPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
        }
        visibleRef.current = visible;
    }, [visible]);
    const viewOnly = !layout[browserSizeMode];
    let maxWidth;
    if (pageJson.mode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PageMode.FitWindow && pageJson.maxWidth > 0) {
        maxWidth = pageJson.maxWidth;
    }
    const pageContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
        let rootLayoutId;
        if (pageJson.layout) {
            rootLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutId(pageJson.layout, browserSizeMode, state.appConfig.mainSizeMode);
        }
        return Object.assign(Object.assign({}, pageContext), { maxWidth,
            viewOnly,
            // visible,
            rootLayoutId, pageId: renderedPageId });
    }, [pageContext, viewOnly, maxWidth, renderedPageId, pageJson.layout, browserSizeMode]);
    const animationContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        // isDesignMdoe === false
        const setting = (!isDesignMode || previewId > 0) ? oneByOneEffect : null;
        return {
            setting,
            revert,
            playId: previewId > 0 ? previewId : playId,
            oid: pageContextValue.rootLayoutId,
            playMode,
            onContextAnimationEnd: () => {
                if (previewId > 0) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.clearAnimationPreview());
                }
                else {
                    setPlayId(-1);
                }
            }
        };
    }, [isDesignMode, revert, playId, previewId, oneByOneEffect, pageContextValue.rootLayoutId]);
    const getStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      display: ${visible ? 'flex' : 'none'};
      position: relative;
      background-color: ${pageJson.bodyBackgroundColor || 'transparent'};
      z-index: 1;
      flex: 1 0 auto;
      height: ${pageHeight};

      body:not(.design-mode) & {
        .edit-mask {
          display: none !important;
        }
      }

      .exb-drop-area {
        pointer-events: ${activePagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body ? 'none !important' : 'auto'}
      }
    `;
    }, [visible, pageHeight, activePagePart, pageJson.bodyBackgroundColor]);
    if (!layout) {
        return;
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.PageContext.Provider, { key: pageJson.id, value: pageContextValue },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.PageVisibilityContext.Provider, { value: visible },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: pageJson.id, "data-pageid": pageJson.id, className: 'page', css: getStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext.Provider, { value: animationContextValue },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_entry__WEBPACK_IMPORTED_MODULE_2__["default"], { layouts: layout, isPageItem: true, visible: visible, className: 'w-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                margin: 0 auto;
                background-color: transparent;
                z-index: 0;
              ` })),
                browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_controller_panel_builder_group__WEBPACK_IMPORTED_MODULE_5__.ControllerPanelGroup, { pageId: pageJson.id }),
                activePagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'edit-mask', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                ${_page_renderer_common__WEBPACK_IMPORTED_MODULE_3__.maskStyle};
                background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(pageContext.theme.colors.palette.dark[800], 0.6)};
                z-index: 1;
              `, onClick: _page_renderer_common__WEBPACK_IMPORTED_MODULE_3__.editBody }))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/page-context.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/builder/page-context.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageContext: () => (/* binding */ PageContext),
/* harmony export */   PageVisibilityContext: () => (/* binding */ PageVisibilityContext),
/* harmony export */   ScreenGroupContext: () => (/* binding */ ScreenGroupContext),
/* harmony export */   ViewVisibilityContext: () => (/* binding */ ViewVisibilityContext),
/* harmony export */   ViewportVisibilityContext: () => (/* binding */ ViewportVisibilityContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const PageContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    viewOnly: true
});
const ViewportVisibilityContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(true);
const PageVisibilityContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(true);
const ViewVisibilityContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    isInView: false,
    isInCurrentView: false
});
const ScreenGroupContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext('');


/***/ }),

/***/ "./jimu-layouts/lib/builder/page-footer.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/builder/page-footer.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageFooter: () => (/* binding */ PageFooter)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_icons_outlined_editor_edit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/edit */ "./jimu-icons/outlined/editor/edit.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/builder/layout-entry.tsx");
/* harmony import */ var _page_renderer_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./page-renderer-common */ "./jimu-layouts/lib/builder/page-renderer-common.ts");
/* harmony import */ var _common_page_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/page-util */ "./jimu-layouts/lib/common/page-util.ts");
/** @jsx jsx */









function getStyle(footer, height, footerVisible, builderTheme, theme) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    ${_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.resizeHandlerStyle};
    ${(0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.editBtnStyle)(builderTheme)};
    display: ${footerVisible ? 'flex' : 'none'};
    position: relative;
    width: 100%;
    height: auto;
    min-height: ${parseFloat(height)}px;
    overflow: hidden;
    background-color: ${footer.backgroundColor || theme.footer.bg || 'transparent'};
    background-image: ${footer.backgroundIMage};
    background-position: ${footer.backgroundPosition};
    color: ${theme.footer.color};
    border-top: 1px dashed ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.white, 0.12)};
    z-index: 0;

    &:hover {
      .edit-mask {
        display: flex;
      }
    }

    body.lock-layout &,
    body:not(.design-mode) & {
      > .resize-handler {
        display: none !important;
      }
    }
    body:not(.design-mode) & {
      .edit-mask, .edit-mask-all {
        display: none !important;
      }
    }
  `;
}
function bindResizeHandler(footerRef) {
    let dh;
    let initHeight;
    return (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(footerRef)
        .origin('parent')
        .resizable({
        inertia: false,
        edges: {
            top: '.resize-handler'
        },
        onstart: (event) => {
            event.stopPropagation();
            dh = 0;
            initHeight = footerRef.getBoundingClientRect().height;
        },
        onmove: (event) => {
            event.stopPropagation();
            const deltaRect = event.deltaRect;
            dh += deltaRect.height;
            footerRef.style.height = `${initHeight + dh}px`;
        },
        onend: (event) => {
            event.stopPropagation();
            footerRef.style.height = null;
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)()
                .editFooterProperty(`height.${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.getCurrentSizeMode()}`, Math.round(initHeight + dh))
                .exec();
        }
    });
}
function PageFooter(props) {
    const { footer, footerVisible, browserSizeMode, mainSizeMode, activePagePart, pageContext, onHeightChange } = props;
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => { var _a; return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design; });
    const footerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const height = footer.height[browserSizeMode] || footer.height[mainSizeMode] || _common_page_util__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_FOOTER_HEIGHT;
    const layout = footer.layout;
    const viewOnly = !layout[browserSizeMode];
    const builderTheme = pageContext.builderTheme;
    /* eslint-disable react-hooks/exhaustive-deps */
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        let interactble;
        if (footerRef.current) {
            interactble = bindResizeHandler(footerRef.current);
        }
        return () => {
            if (interactble) {
                interactble.unset();
            }
        };
    }, []);
    const footerLayoutId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.getFooterLayoutId)();
    const pageContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return Object.assign(Object.assign({}, pageContext), { isFooter: true, rootLayoutId: footerLayoutId, viewOnly: viewOnly || (isDesignMode && activePagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer) });
    }, [pageContext, footerLayoutId, viewOnly, activePagePart, isDesignMode]);
    const handleSizeChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((_, height) => {
        onHeightChange(Math.round(height));
    }, [onHeightChange]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.PageContext.Provider, { value: pageContextValue },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'footer', css: getStyle(footer, height, footerVisible, pageContext.builderTheme, pageContext.theme), ref: el => (footerRef.current = el) },
            !viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'resize-handler', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              top: ${-_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.RESIZE_HANDLER_HEIGHT / 2}px;
              z-index: 1;
            ` })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
            overflow: auto;
            display: flex;
            position: relative;
            z-index: 0;
            min-height: ${parseFloat(height)}px;
          ` },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_entry__WEBPACK_IMPORTED_MODULE_6__["default"], { layouts: layout, isPageItem: true, visible: footerVisible })),
            activePagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer && !viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'edit-mask-all', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              ${_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.maskStyle};
              background: ${activePagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body ? 'transparent' : jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.light[400], 0.6)};
              z-index: 1;
            `, onClick: _page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.editBody })),
            activePagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body && (!viewOnly || browserSizeMode === mainSizeMode) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'edit-mask justify-content-center align-items-center', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              ${_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.maskStyle};
              background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.light[400], 0.6)};
              z-index: 1;
              display: none;
            ` },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Button, { className: 'edit-btn btn-large border-0', onClick: _page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.editFooter },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_edit__WEBPACK_IMPORTED_MODULE_3__.EditOutlined, { size: 'm' }),
                    pageContext.formatMessage('editFooter')))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, handleWidth: false, onResize: handleSizeChange }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/page-header.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/builder/page-header.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageHeader: () => (/* binding */ PageHeader)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_icons_outlined_editor_edit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/edit */ "./jimu-icons/outlined/editor/edit.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/builder/layout-entry.tsx");
/* harmony import */ var _page_renderer_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./page-renderer-common */ "./jimu-layouts/lib/builder/page-renderer-common.ts");
/* harmony import */ var _common_page_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/page-util */ "./jimu-layouts/lib/common/page-util.ts");
/** @jsx jsx */









function getStyle(header, height, headerVisible, builderTheme, theme) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    ${_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.resizeHandlerStyle};
    ${(0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.editBtnStyle)(builderTheme)};
    position: relative;
    z-index: 0;
    top: 0;
    display: ${headerVisible ? 'flex' : 'none'};
    width: 100%;
    height: auto;
    min-height: ${parseFloat(height)}px;
    overflow: hidden;
    background-color: ${header.backgroundColor || theme.header.bg || 'transparent'};
    background-image: ${header.backgroundIMage};
    background-position: ${header.backgroundPosition};
    color: ${theme.header.color};
    border-bottom: 1px dashed ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.white, 0.12)};
    flex: 0 0 auto;

    &:hover {
      .edit-mask {
        display: flex;
      }
    }

    body.lock-layout &,
    body:not(.design-mode) & {
      border-bottom: none;
      > .resize-handler {
        display: none !important;
      }
    }
    body:not(.design-mode) & {
      position: ${header.sticky ? 'sticky' : 'relative'};
      z-index: ${header.sticky ? 2 : '0'};

      .edit-mask, .edit-mask-all {
        display: none !important;
      }
    }
  `;
}
function bindResizeHandler(headerRef) {
    let dh;
    let initHeight;
    return (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(headerRef)
        .origin('parent')
        .resizable({
        inertia: false,
        edges: {
            bottom: '.resize-handler'
        },
        onstart: (event) => {
            event.stopPropagation();
            dh = 0;
            initHeight = headerRef.getBoundingClientRect().height;
            headerRef.style.minHeight = '0px';
        },
        onmove: (event) => {
            event.stopPropagation();
            const deltaRect = event.deltaRect;
            dh += deltaRect.height;
            headerRef.style.height = `${initHeight + dh}px`;
        },
        onend: (event) => {
            event.stopPropagation();
            headerRef.style.height = null;
            headerRef.style.minHeight = null;
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)()
                .editHeaderProperty(`height.${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.getCurrentSizeMode()}`, Math.round(initHeight + dh))
                .exec();
        }
    });
}
function PageHeader(props) {
    const { header, headerVisible, browserSizeMode, mainSizeMode, activePagePart, pageContext, onHeightChange } = props;
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => { var _a; return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design; });
    const headerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const height = header.height[browserSizeMode] || header.height[mainSizeMode] || _common_page_util__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_HEADER_HEIGHT;
    const layout = header.layout;
    const viewOnly = !layout[browserSizeMode];
    const builderTheme = pageContext.builderTheme;
    /* eslint-disable react-hooks/exhaustive-deps */
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        let interactble;
        if (headerRef.current) {
            interactble = bindResizeHandler(headerRef.current);
        }
        return () => {
            if (interactble) {
                interactble.unset();
            }
        };
    }, []);
    const headerLayoutId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.getHeaderLayoutId)();
    const pageContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return Object.assign(Object.assign({}, pageContext), { isHeader: true, rootLayoutId: headerLayoutId, viewOnly: viewOnly || (isDesignMode && activePagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header) });
    }, [pageContext, headerLayoutId, viewOnly, activePagePart, isDesignMode]);
    const handleSizeChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((_, height) => {
        onHeightChange(Math.round(height));
    }, [onHeightChange]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.PageContext.Provider, { value: pageContextValue },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'header', css: getStyle(header, height, headerVisible, pageContext.builderTheme, pageContext.theme), ref: el => (headerRef.current = el) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
            overflow: auto;
            display: flex;
            position: relative;
            z-index: 0;
            min-height: ${parseFloat(height)}px;
          ` },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_entry__WEBPACK_IMPORTED_MODULE_6__["default"], { layouts: layout, isPageItem: true, visible: headerVisible })),
            !viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'resize-handler', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              bottom: ${-_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.RESIZE_HANDLER_HEIGHT / 2}px;
              z-index: 1;
            ` })),
            activePagePart !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header && !viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'edit-mask-all', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              ${_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.maskStyle};
              background: ${activePagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body ? 'transparent' : jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.light[400], 0.6)};
              z-index: 1;
            `, onClick: _page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.editBody })),
            activePagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body && (!viewOnly || browserSizeMode === mainSizeMode) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'edit-mask justify-content-center align-items-center', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              ${_page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.maskStyle};
              background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.light[400], 0.6)};
              z-index: 1;
              display: none;
            ` },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Button, { className: 'edit-btn btn-large border-0', onClick: _page_renderer_common__WEBPACK_IMPORTED_MODULE_7__.editHeader },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_edit__WEBPACK_IMPORTED_MODULE_3__.EditOutlined, { size: 'm' }),
                    pageContext.formatMessage('editHeader')))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, handleWidth: false, onResize: handleSizeChange }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/page-renderer-common.ts":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/builder/page-renderer-common.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RESIZE_HANDLER_HEIGHT: () => (/* binding */ RESIZE_HANDLER_HEIGHT),
/* harmony export */   editBody: () => (/* binding */ editBody),
/* harmony export */   editBtnStyle: () => (/* binding */ editBtnStyle),
/* harmony export */   editFooter: () => (/* binding */ editFooter),
/* harmony export */   editHeader: () => (/* binding */ editHeader),
/* harmony export */   getDialogLayoutId: () => (/* binding */ getDialogLayoutId),
/* harmony export */   getFooterLayoutId: () => (/* binding */ getFooterLayoutId),
/* harmony export */   getHeaderLayoutId: () => (/* binding */ getHeaderLayoutId),
/* harmony export */   getPageLayoutId: () => (/* binding */ getPageLayoutId),
/* harmony export */   getVisiblePageId: () => (/* binding */ getVisiblePageId),
/* harmony export */   maskStyle: () => (/* binding */ maskStyle),
/* harmony export */   resizeHandlerStyle: () => (/* binding */ resizeHandlerStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");


const RESIZE_HANDLER_HEIGHT = 16;
const resizeHandlerStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  .resize-handler {
    height: ${RESIZE_HANDLER_HEIGHT}px;
    width: 100%;
    cursor: ns-resize;
    position: absolute;
  }
`;
const maskStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  right: 0;
  top: 0;
  left: 0;
  bottom: 0;
`;
function editBtnStyle(theme) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    .edit-btn {
      background: ${theme.colors.primary};
      color: ${theme.colors.palette.dark[800]};
      border-radius: 2px;
      &:hover {
        background: ${theme.colors.palette.primary[600]};
        color: ${theme.colors.black};
      }
    }
  `;
}
function editHeader() {
    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.activePagePartChanged(jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header));
}
function editFooter() {
    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.activePagePartChanged(jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer));
}
function editBody() {
    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.activePagePartChanged(jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body));
}
function getHeaderLayoutId() {
    const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    const sizeModeLayout = state.appConfig.header.layout;
    return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutId(sizeModeLayout, state.browserSizeMode, state.appConfig.mainSizeMode);
}
function getFooterLayoutId() {
    const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    const sizeModeLayout = state.appConfig.footer.layout;
    return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutId(sizeModeLayout, state.browserSizeMode, state.appConfig.mainSizeMode);
}
function getPageLayoutId(pageId) {
    var _a;
    const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    const sizeModeLayout = (_a = state.appConfig.pages[pageId]) === null || _a === void 0 ? void 0 : _a.layout;
    if (sizeModeLayout) {
        return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutId(sizeModeLayout, state.browserSizeMode, state.appConfig.mainSizeMode);
    }
    return null;
}
function getDialogLayoutId(dialogId) {
    var _a;
    const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    const sizeModeLayout = (_a = state.appConfig.dialogs[dialogId]) === null || _a === void 0 ? void 0 : _a.layout;
    return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutId(sizeModeLayout, state.browserSizeMode, state.appConfig.mainSizeMode);
}
function getVisiblePageId(pageStatus) {
    return Object.keys(pageStatus).find(pid => pageStatus[pid]);
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/page-renderer.tsx":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/builder/page-renderer.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageRenderer: () => (/* binding */ PageRenderer),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _fixed_layout_builder_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../fixed-layout/builder/layout */ "./jimu-layouts/lib/fixed-layout/builder/layout.tsx");
/* harmony import */ var _flow_layout_layout_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flow-layout/layout-transform */ "./jimu-layouts/lib/flow-layout/layout-transform.ts");
/* harmony import */ var _row_layout_layout_transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../row-layout/layout-transform */ "./jimu-layouts/lib/row-layout/layout-transform.ts");
/* harmony import */ var _grid_layout_layout_transform__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../grid-layout/layout-transform */ "./jimu-layouts/lib/grid-layout/layout-transform.ts");
/* harmony import */ var _flow_layout_builder_layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flow-layout/builder/layout */ "./jimu-layouts/lib/flow-layout/builder/layout.tsx");
/* harmony import */ var _grid_layout_builder_layout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../grid-layout/builder/layout */ "./jimu-layouts/lib/grid-layout/builder/layout.tsx");
/* harmony import */ var _column_layout_builder_layout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../column-layout/builder/layout */ "./jimu-layouts/lib/column-layout/builder/layout.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../translations/default */ "./jimu-layouts/lib/translations/default.ts");
/* harmony import */ var _common_layout_actions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _page_header__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./page-header */ "./jimu-layouts/lib/builder/page-header.tsx");
/* harmony import */ var _page_footer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./page-footer */ "./jimu-layouts/lib/builder/page-footer.tsx");
/* harmony import */ var _page_body__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./page-body */ "./jimu-layouts/lib/builder/page-body.tsx");
/* harmony import */ var _page_renderer_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./page-renderer-common */ "./jimu-layouts/lib/builder/page-renderer-common.ts");
/* harmony import */ var _menu_common_menu__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _row_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../row-layout/builder/layout-service */ "./jimu-layouts/lib/row-layout/builder/layout-service.ts");
/* harmony import */ var _grid_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../grid-layout/builder/layout-service */ "./jimu-layouts/lib/grid-layout/builder/layout-service.ts");
/* harmony import */ var _fixed_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../fixed-layout/builder/layout-service */ "./jimu-layouts/lib/fixed-layout/builder/layout-service.ts");
/* harmony import */ var _flow_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../flow-layout/builder/layout-service */ "./jimu-layouts/lib/flow-layout/builder/layout-service.ts");
/* harmony import */ var _column_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../column-layout/builder/layout-service */ "./jimu-layouts/lib/column-layout/builder/layout-service.ts");
/** @jsx jsx */

























jimu_for_builder__WEBPACK_IMPORTED_MODULE_19__.LayoutServiceProvider.getInstance().registerService(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.RowLayout, new _row_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_20__.RowLayoutService());
jimu_for_builder__WEBPACK_IMPORTED_MODULE_19__.LayoutServiceProvider.getInstance().registerService(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout, new _grid_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_21__.GridLayoutService());
jimu_for_builder__WEBPACK_IMPORTED_MODULE_19__.LayoutServiceProvider.getInstance().registerService(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FixedLayout, new _fixed_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_22__.FixedLayoutService());
jimu_for_builder__WEBPACK_IMPORTED_MODULE_19__.LayoutServiceProvider.getInstance().registerService(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout, new _flow_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_23__.FlowLayoutService());
jimu_for_builder__WEBPACK_IMPORTED_MODULE_19__.LayoutServiceProvider.getInstance().registerService(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout, new _column_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_24__.ColumnLayoutService());
(0,jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.registerLayoutBuilder)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FixedLayout, _fixed_layout_builder_layout__WEBPACK_IMPORTED_MODULE_1__["default"]);
(0,jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.registerLayoutBuilder)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout, _flow_layout_builder_layout__WEBPACK_IMPORTED_MODULE_5__["default"]);
(0,jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.registerLayoutBuilder)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout, _grid_layout_builder_layout__WEBPACK_IMPORTED_MODULE_6__["default"]);
(0,jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.registerLayoutBuilder)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout, _column_layout_builder_layout__WEBPACK_IMPORTED_MODULE_7__["default"]);
class PageRenderer extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.updateHeaderHeight = (height) => {
            this.setState({ headerHeight: height });
        };
        this.updateFooterHeight = (height) => {
            this.setState({ footerHeight: height });
        };
        this.startPaste = () => {
            var _a;
            const clipboardItem = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.clipboard;
            const { activePagePart, pageStatus, currentDialogId, dialogs } = this.props;
            if (clipboardItem) {
                let targetLayoutId;
                if (currentDialogId && dialogs[currentDialogId]) {
                    targetLayoutId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getDialogLayoutId)(currentDialogId);
                }
                else if (activePagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header) {
                    targetLayoutId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getHeaderLayoutId)();
                }
                else if (activePagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer) {
                    targetLayoutId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getFooterLayoutId)();
                }
                else {
                    const vivisiblePageId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getVisiblePageId)(pageStatus);
                    targetLayoutId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getPageLayoutId)(vivisiblePageId);
                }
                (0,_common_layout_actions__WEBPACK_IMPORTED_MODULE_12__.pasteLayoutItem)(clipboardItem, targetLayoutId);
            }
        };
        this.isMac = () => {
            var _a, _b;
            return ((_b = (_a = window.jimuUA) === null || _a === void 0 ? void 0 : _a.os) === null || _b === void 0 ? void 0 : _b.name) === 'macOS';
        };
        this.clearSelection = (e) => {
            if ((0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_17__.isDesignMode)() && !(0,_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_10__.isResizing)() && !(0,_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_9__.isDragging)()) {
                e.stopPropagation();
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
            }
        };
        this.formatMessage = (id, values) => {
            if (this.props.intl) {
                return this.props.intl.formatMessage({ id, defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_11__["default"][id] }, values);
            }
            return _translations_default__WEBPACK_IMPORTED_MODULE_11__["default"][id];
        };
        this.state = { headerHeight: 0, footerHeight: 0 };
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().registerExtension({
            epName: jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer,
            extension: new _flow_layout_layout_transform__WEBPACK_IMPORTED_MODULE_2__.FlowLayoutTransformer()
        });
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().registerExtension({
            epName: jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer,
            extension: new _row_layout_layout_transform__WEBPACK_IMPORTED_MODULE_3__.RowLayoutTransformer()
        });
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().registerExtension({
            epName: jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer,
            extension: new _grid_layout_layout_transform__WEBPACK_IMPORTED_MODULE_4__.GridLayoutTransformer()
        });
        if (this.isMac()) {
            this.keyBindings = {
                'command+keyv': this.startPaste
            };
        }
        else {
            this.keyBindings = {
                'ctrl+keyv': this.startPaste
            };
        }
        this.updatePageContext();
    }
    componentDidMount() {
        if ((0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_17__.isDesignMode)() && !document.body.classList.contains('design-mode')) {
            document.body.classList.add('design-mode');
        }
        if ((0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_17__.isLockLayout)() && !document.body.classList.contains('lock-layout')) {
            document.body.classList.add('lock-layout');
        }
    }
    componentDidUpdate(prevProps) {
        var _a;
        const documentElement = (_a = window.document) === null || _a === void 0 ? void 0 : _a.documentElement;
        if (documentElement) {
            if (window.jimuConfig.isInBuilder && (0,_menu_common_menu__WEBPACK_IMPORTED_MODULE_17__.isDesignMode)()) {
                documentElement.classList.add('is-in-builder');
            }
            else {
                documentElement.classList.remove('is-in-builder');
            }
        }
        const previousPageId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getVisiblePageId)(prevProps.pageStatus);
        const currentPageId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getVisiblePageId)(this.props.pageStatus);
        if (previousPageId !== currentPageId) {
            this.pageRef.scrollTop = 0;
        }
    }
    getPageStyle() {
        const { pageStatus, pages, minHeight } = this.props;
        const visiblePageId = Object.keys(pageStatus).find((pid) => pageStatus[pid]);
        const pageJson = pages[visiblePageId];
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: relative;
      margin: 0 auto;
      overflow: hidden;
      height: ${pageJson.mode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PageMode.FitWindow ? '100%' : 'auto'};
      min-height: ${minHeight}px;
      .is-dragging {
        z-index: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.LayoutZIndex.DraggingItem};
        opacity: 0.8;
      }

      body:not(.design-mode) & {
        overflow: auto;
        height: 100%;
      }
    `;
    }
    updatePageContext() {
        const { theme } = this.props;
        const pageContext = {
            theme,
            builderTheme: (0,jimu_theme__WEBPACK_IMPORTED_MODULE_18__.getBuilderThemeVariables)(),
            formatMessage: this.formatMessage
        };
        if (!this.pageContext) {
            this.pageContext = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(pageContext);
        }
        else {
            for (const prop in pageContext) {
                if (this.pageContext[prop] !== pageContext[prop]) {
                    this.pageContext = this.pageContext.set(prop, pageContext[prop]);
                }
            }
        }
    }
    render() {
        const { pageStatus, pages } = this.props;
        const visiblePageId = (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getVisiblePageId)(pageStatus);
        if (!visiblePageId || !(pages === null || pages === void 0 ? void 0 : pages[visiblePageId])) {
            return null;
        }
        this.updatePageContext();
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'page-renderer d-flex flex-column align-items-center w-100', ref: (el) => (this.pageRef = el), css: this.getPageStyle(), "data-testid": 'pageRenderer', onClick: this.clearSelection },
            this.renderDialog(),
            this.renderHeader(),
            Object.keys(pageStatus).map((pId) => this.renderPageBody(pId)),
            this.renderFooter(),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.Keyboard, { bindings: this.keyBindings })));
    }
    renderHeader() {
        if (!this.props.header) {
            return null;
        }
        const { header, headerVisible, browserSizeMode, mainSizeMode, activePagePart } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_page_header__WEBPACK_IMPORTED_MODULE_13__.PageHeader, { header: header, activePagePart: activePagePart, headerVisible: headerVisible, browserSizeMode: browserSizeMode, mainSizeMode: mainSizeMode, pageContext: this.pageContext, onHeightChange: this.updateHeaderHeight }));
    }
    renderFooter() {
        if (!this.props.footer) {
            return null;
        }
        const { footer, footerVisible, browserSizeMode, mainSizeMode, activePagePart } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_page_footer__WEBPACK_IMPORTED_MODULE_14__.PageFooter, { footer: footer, activePagePart: activePagePart, footerVisible: footerVisible, browserSizeMode: browserSizeMode, mainSizeMode: mainSizeMode, pageContext: this.pageContext, onHeightChange: this.updateFooterHeight }));
    }
    renderPageBody(renderedPageId) {
        const { pages, pageStatus, browserSizeMode, activePagePart } = this.props;
        const pageJson = pages[renderedPageId];
        if (!pageJson || pageJson.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PageType.Normal) {
            // page is removed, or current type is link or folder
            return;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_page_body__WEBPACK_IMPORTED_MODULE_15__.PageBody, { key: pageJson.id, pageJson: pageJson, renderedPageId: renderedPageId, activePagePart: activePagePart, browserSizeMode: browserSizeMode, pageContext: this.pageContext, visible: !!pageStatus[pageJson.id], headerFooterHeight: this.state.headerHeight + this.state.footerHeight }));
    }
    // viewOnly when dialog is in mode: !Large && AUTO
    isDialogViewOnly(dialogJson) {
        const { browserSizeMode } = this.props;
        const isAutoInUnLargeSize = browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large && !dialogJson.layout[browserSizeMode];
        return !!isAutoInUnLargeSize;
    }
    renderDialog() {
        const { currentDialogId, urlDialogJson, splashDialogJson, isSplashClosed, isPageDlgClosed, pageDialogJson, pageDialogId } = this.props;
        const showSplash = !isSplashClosed && splashDialogJson;
        const showPageDlg = !isPageDlgClosed && pageDialogJson;
        const showUrlDlg = urlDialogJson ? ((splashDialogJson === null || splashDialogJson === void 0 ? void 0 : splashDialogJson.id) === urlDialogJson.id || (pageDialogJson === null || pageDialogJson === void 0 ? void 0 : pageDialogJson.id) === urlDialogJson.id) ? null : urlDialogJson : null;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
            showUrlDlg && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.PageContext.Provider, { value: Object.assign(Object.assign({}, this.pageContext), { dialogId: currentDialogId, isDialog: true, viewOnly: this.isDialogViewOnly(urlDialogJson), rootLayoutId: (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getDialogLayoutId)(currentDialogId) }) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppDialog, { dialogJson: urlDialogJson }))),
            showPageDlg && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.PageContext.Provider, { value: Object.assign(Object.assign({}, this.pageContext), { dialogId: pageDialogId, isDialog: true, viewOnly: this.isDialogViewOnly(pageDialogJson), rootLayoutId: (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getDialogLayoutId)(pageDialogJson.id) }) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppDialog, { dialogJson: pageDialogJson, isOpenByPage: true }))),
            showSplash && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_8__.PageContext.Provider, { value: Object.assign(Object.assign({}, this.pageContext), { dialogId: splashDialogJson.id, isDialog: true, viewOnly: this.isDialogViewOnly(splashDialogJson), rootLayoutId: (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getDialogLayoutId)(splashDialogJson.id) }) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppDialog, { dialogJson: splashDialogJson })))));
    }
}
PageRenderer.displayName = 'BuilderPageRenderer';
const mapStateToProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state) => {
        const viewportSize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.findViewportSize(state.appConfig, state.browserSizeMode);
        return viewportSize.height;
    },
    (_, ownProps) => {
        return (0,_page_renderer_common__WEBPACK_IMPORTED_MODULE_16__.getVisiblePageId)(ownProps.pageStatus);
    },
    (_, ownProps) => ownProps.dialogId,
    (state) => state.appRuntimeInfo.currentPageId,
    (state) => state.appConfig.pages,
    (state) => state.appConfig.dialogs,
    (state) => state.appConfig.header,
    (state) => state.appConfig.footer,
    (state) => state.appConfig.mainSizeMode,
    (state) => state.browserSizeMode,
    (state) => { var _a; return (_a = state.appRuntimeInfo.activePagePart) !== null && _a !== void 0 ? _a : jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body; },
    (state) => state.appRuntimeInfo.clipboard,
    (state) => state.appRuntimeInfo.currentDialogId,
    (state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.dialogInfos; },
    (state) => {
        return state.appConfig.pages[state.appRuntimeInfo.currentPageId].autoOpenDialogId;
    }
], (minHeight, pageId, dialogId, currentPageId, pages, dialogs, header, footer, mainSizeMode, browserSizeMode, activePagePart, clipboardItem, currentDialogId, dialogInfos, pageDlgId) => {
    var _a, _b;
    if (!pageId || !pages[pageId]) {
        return {};
    }
    const dialogJson = dialogs[Object.keys(dialogs).find(dlgId => dialogs[dlgId].isSplash)];
    return {
        pages,
        dialogs,
        header,
        footer,
        headerVisible: !!pages[pageId].header,
        footerVisible: !!pages[pageId].footer,
        mainSizeMode,
        browserSizeMode,
        minHeight,
        activePagePart,
        clipboardItem,
        currentDialogId,
        splashDialogJson: dialogJson,
        isSplashClosed: (_a = dialogInfos === null || dialogInfos === void 0 ? void 0 : dialogInfos[dialogJson === null || dialogJson === void 0 ? void 0 : dialogJson.id]) === null || _a === void 0 ? void 0 : _a.isClosed,
        pageDialogId: pageDlgId,
        pageDialogJson: dialogs[pageDlgId],
        isPageDlgClosed: (_b = dialogInfos === null || dialogInfos === void 0 ? void 0 : dialogInfos[currentPageId + '-' + pageDlgId]) === null || _b === void 0 ? void 0 : _b.isClosed,
        urlDialogJson: dialogs[dialogId]
    };
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.injectIntl)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToProps)((0,jimu_theme__WEBPACK_IMPORTED_MODULE_18__.withTheme)(PageRenderer))));


/***/ }),

/***/ "./jimu-layouts/lib/builder/resize-cursor-util.ts":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/builder/resize-cursor-util.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCursor: () => (/* binding */ getCursor)
/* harmony export */ });
const STEP = 360 / 16; // Divide the circle into 16 parts.
function clampRotation(rotation) {
    if (isNaN(rotation)) {
        return 0;
    }
    const result = rotation % 360;
    return result < 0 ? result + 360 : result;
}
/**
 * The arrow of zero degree is the same as the y axis points to the bottom of the viewport.
 * @param rotation in degree, greater than 0 if rotate clockwise
 * @param initAngle in degree
 */
function getCursor(rotation, initAngle) {
    const r = clampRotation(rotation + initAngle);
    if (r >= 360 - STEP || r < STEP || (r >= STEP * 7 && r < STEP * 9)) {
        return 'ns-resize';
    }
    else if ((r >= STEP && r < STEP * 3) || (r >= STEP * 9 && r < STEP * 11)) {
        return 'nesw-resize';
    }
    else if ((r >= STEP * 3 && r < STEP * 5) || (r >= STEP * 11 && r < STEP * 13)) {
        return 'ew-resize';
    }
    else if ((r >= STEP * 5 && r < STEP * 7) || (r >= STEP * 13 && r < STEP * 15)) {
        return 'nwse-resize';
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/resize-handlers.tsx":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/builder/resize-handlers.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ResizeHandlers: () => (/* binding */ ResizeHandlers)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resize-cursor-util */ "./jimu-layouts/lib/builder/resize-cursor-util.ts");
/* harmony import */ var _shape_l__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shape-l */ "./jimu-layouts/lib/builder/shape-l.tsx");
/* harmony import */ var _shape_rect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shape-rect */ "./jimu-layouts/lib/builder/shape-rect.tsx");
/** @jsx jsx */





const cornerSize = 11;
const handlerSize = 10;
const sideLong = 16;
const sideShort = 4;
const sidePosition = 10;
const topLeftCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  top: 0;
  left: 0;
  position: absolute;
  /* cursor: nwse-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 135)};
  .jimu-rtl & {
    /* cursor: nesw-resize; */
    cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 135 + 90)};
  }
  > svg {
    position: absolute;
    top: 0;
    left: 0;
  }
`;
const topRightCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  top: 0;
  right: 0;
  position: absolute;
  /* cursor: nesw-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 225)};
  .jimu-rtl & {
    /* cursor: nwse-resize; */
    cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 225 + 90)};
  }
`;
const bottomLeftCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  bottom: 0;
  left: 0;
  position: absolute;
  /* cursor: nesw-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 45)};
  .jimu-rtl & {
    /* cursor: nwse-resize; */
    cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 45 + 90)};
  }
`;
const bottomRightCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  bottom: 0;
  right: 0;
  position: absolute;
  /* cursor: nwse-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 315)};
  .jimu-rtl & {
    /* cursor: nesw-resize; */
    cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 315 + 90)};
  }
`;
const topSideCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  height: ${handlerSize}px;
  left: ${sidePosition}px;
  right: ${sidePosition}px;
  top: 0px;
  position: absolute;
  /* cursor: ns-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 180)};

  canvas {
    left: 50%;
    top: 0;
    width: ${sideLong}px;
    height: ${sideShort}px;
    margin-left: ${-sideLong / 2}px;
    margin-top: 1px;
  }
`;
const rightSideCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  width: ${handlerSize}px;
  top: ${sidePosition}px;
  bottom: ${sidePosition}px;
  right: 0;
  position: absolute;
  /* cursor: ew-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 270)};

  canvas {
    top: 50%;
    right: 0;
    width: ${sideShort}px;
    height: ${sideLong}px;
    margin-top: ${-sideLong / 2}px;
    margin-right: 1px;
  }
`;
const bottomSideCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  height: ${handlerSize}px;
  left: ${sidePosition}px;
  right: ${sidePosition}px;
  bottom: 0;
  position: absolute;
  /* cursor: ns-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 0)};

  canvas {
    left: 50%;
    bottom: 0;
    width: ${sideLong}px;
    height: ${sideShort}px;
    margin-left: ${-sideLong / 2}px;
    margin-bottom: 1px;
  }
`;
const leftSideCursor = (rotation) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  width: ${handlerSize}px;
  top: ${sidePosition}px;
  bottom: ${sidePosition}px;
  left: 0;
  position: absolute;
  /* cursor: ew-resize; */
  cursor: ${(0,_resize_cursor_util__WEBPACK_IMPORTED_MODULE_2__.getCursor)(rotation, 90)};

  canvas {
    top: 50%;
    left: 0;
    width: ${sideShort}px;
    height: ${sideLong}px;
    margin-top: ${-sideLong / 2}px;
    margin-left: 1px;
  }
`;
function getResizableSides(props) {
    const { left = true, top = true, right = true, bottom = true } = props;
    return {
        top,
        right,
        bottom,
        left,
        topRight: top && right,
        bottomRight: bottom && right,
        bottomLeft: bottom && left,
        topLeft: top && left
    };
}
function ResizeHandlers(props) {
    const { rotation = 0 } = props;
    const { top, right, bottom, left, topLeft, topRight, bottomRight, bottomLeft } = getResizableSides(props);
    const rectHandle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    width: ${cornerSize}px;
    height: ${cornerSize}px;
    padding: 1px;
    z-index: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutZIndex.HandlerTools};
  `;
    const cornerHandlerStyle = rectHandle;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 action-area' },
        top && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '2', "data-testid": 'top', className: 'rnd-resize-top handle no-drag-action', css: topSideCursor(rotation) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_rect__WEBPACK_IMPORTED_MODULE_4__.ShapeRect, { direction: 'h' }))),
        right && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '4', "data-testid": 'right', className: 'rnd-resize-right handle no-drag-action', css: rightSideCursor(rotation) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_rect__WEBPACK_IMPORTED_MODULE_4__.ShapeRect, { direction: 'v' }))),
        bottom && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '6', "data-testid": 'bottom', className: 'rnd-resize-bottom handle no-drag-action', css: bottomSideCursor(rotation) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_rect__WEBPACK_IMPORTED_MODULE_4__.ShapeRect, { direction: 'h' }))),
        left && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '8', "data-testid": 'left', className: 'rnd-resize-left handle no-drag-action', css: leftSideCursor(rotation) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_rect__WEBPACK_IMPORTED_MODULE_4__.ShapeRect, { direction: 'v' }))),
        topLeft && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '1', "data-testid": 'topLeft', className: 'rnd-resize-top rnd-resize-left handle no-drag-action', css: [cornerHandlerStyle, topLeftCursor(rotation)] },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_l__WEBPACK_IMPORTED_MODULE_3__.ShapeL, { pos: 'tl' }))),
        topRight && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '3', "data-testid": 'topRight', className: 'rnd-resize-top rnd-resize-right handle no-drag-action', css: [cornerHandlerStyle, topRightCursor(rotation)] },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_l__WEBPACK_IMPORTED_MODULE_3__.ShapeL, { pos: 'tr' }))),
        bottomRight && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '5', "data-testid": 'bottomRight', className: 'rnd-resize-bottom rnd-resize-right handle no-drag-action', css: [cornerHandlerStyle, bottomRightCursor(rotation)] },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_l__WEBPACK_IMPORTED_MODULE_3__.ShapeL, { pos: 'br' }))),
        bottomLeft && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '7', "data-testid": 'bottomLeft', className: 'rnd-resize-bottom rnd-resize-left handle no-drag-action', css: [cornerHandlerStyle, bottomLeftCursor(rotation)] },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shape_l__WEBPACK_IMPORTED_MODULE_3__.ShapeL, { pos: 'bl' })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/section-renderer.tsx":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/builder/section-renderer.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionRendererInBuilder: () => (/* binding */ SectionRendererInBuilder)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/builder/layout-entry.tsx");
/* harmony import */ var _runtime_section_renderer_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../runtime/section-renderer-base */ "./jimu-layouts/lib/runtime/section-renderer-base.tsx");




class SectionRendererInBuilder extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_runtime_section_renderer_base__WEBPACK_IMPORTED_MODULE_3__.SectionRendererBase, Object.assign({}, this.props, { layoutEntryComponent: _layout_entry__WEBPACK_IMPORTED_MODULE_2__["default"], viewVisibilityContext: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.ViewVisibilityContext })));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/select-wrapper.tsx":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/builder/select-wrapper.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectWrapper: () => (/* binding */ SelectWrapper),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _page_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../translations/default */ "./jimu-layouts/lib/translations/default.ts");
/* harmony import */ var _resize_handlers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resize-handlers */ "./jimu-layouts/lib/builder/resize-handlers.tsx");
/* harmony import */ var _layout_item_toolbar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./layout-item-toolbar */ "./jimu-layouts/lib/builder/layout-item-toolbar.tsx");
/* harmony import */ var jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/outlined/editor/lock */ "./jimu-icons/outlined/editor/lock.tsx");
/** @jsx jsx */










class SelectWrapper extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.formatMessage = (id, values) => {
            if (this.props.intl != null) {
                return this.props.intl.formatMessage({ id, defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"][id] }, values);
            }
            return _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"][id];
        };
        this.isMac = () => {
            var _a, _b;
            return ((_b = (_a = window.jimuUA) === null || _a === void 0 ? void 0 : _a.os) === null || _b === void 0 ? void 0 : _b.name) === 'macOS';
        };
        this.copyItem = () => {
            const { layoutId, layoutItem, lockLayout } = this.props;
            if (!lockLayout) {
                const rect = this.ref.getBoundingClientRect();
                const width = rect.width;
                const height = rect.height;
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.clipboardChanged({
                    layoutId,
                    width,
                    height,
                    layoutItemId: layoutItem.id
                }));
            }
        };
        this.deleteSelectedItem = () => {
            const { selected, layoutId, layoutItem, lockLayout, isFunctionalWidget, isDesignMode } = this.props;
            if (!selected || !isDesignMode) {
                return;
            }
            // only normal widgets can de deleted in lock layout mode
            if (!lockLayout || isFunctionalWidget) {
                const layoutInfo = {
                    layoutId,
                    layoutItemId: layoutItem.id
                };
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishConfirmDeleteToApp(layoutInfo);
            }
        };
        this.state = { selected: false, updateIndex: 0 };
        this.screenGroupInfo = '';
        if (this.isMac()) {
            this.keyBindings = {
                delete: this.deleteSelectedItem,
                backspace: this.deleteSelectedItem,
                'command+keyc': this.copyItem
            };
        }
        else {
            this.keyBindings = {
                delete: this.deleteSelectedItem,
                backspace: this.deleteSelectedItem,
                'ctrl+keyc': this.copyItem
            };
        }
    }
    componentDidMount() {
        let boundaryElement;
        const info = this.screenGroupInfo.split(':');
        if (info.length > 1) {
            const layoutId = info[0];
            const layoutItemId = info[1];
            boundaryElement = document.querySelector(`div.builder-layout-item[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItemId}"]`);
        }
        this.modifiers = [
            {
                name: 'preventOverflow',
                enabled: true,
                options: {
                    boundary: boundaryElement !== null && boundaryElement !== void 0 ? boundaryElement : 'viewport',
                    altAxis: true // allow the popper to overlap its reference element.
                }
            },
            {
                name: 'flip',
                enabled: true,
                options: {
                    boundary: boundaryElement !== null && boundaryElement !== void 0 ? boundaryElement : 'viewport',
                    fallbackPlacements: (0,jimu_ui__WEBPACK_IMPORTED_MODULE_4__.getFallbackPlacementsModifier)(['top-start', 'bottom-start'], true).options.fallbackPlacements
                }
            }
        ];
        if (this.props.selected) {
            this.setState({ selected: true }); // Used to update the toolbar when widget is dragged from widget list
        }
    }
    componentDidUpdate(prevProps) {
        this.scrollIntoView();
        if (this.props.selected && !prevProps.isDesignMode && this.props.isDesignMode) {
            // this.ref is not undefined now, it's time to show the toolbar
            this.setState({ updateIndex: this.state.updateIndex + 1 });
        }
    }
    doScroll() {
        const { layoutId, layoutItem } = this.props;
        const element = document.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
        if (element != null) {
            element.scrollIntoView({ behavior: 'auto', block: 'center' });
        }
    }
    scrollIntoView() {
        var _a, _b;
        const { selected, autoScroll } = this.props;
        if (!selected || !autoScroll) {
            return;
        }
        const { layoutId } = this.props;
        let viewChanged = false;
        let screenChanged = false;
        const appConfig = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)().appConfig;
        const layoutJson = appConfig.layouts[layoutId];
        if (((_a = layoutJson.parent) === null || _a === void 0 ? void 0 : _a.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View) {
            const viewJson = appConfig.views[layoutJson.parent.id];
            if ((viewJson === null || viewJson === void 0 ? void 0 : viewJson.parent) != null) {
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(viewJson.parent, viewJson.id);
                viewChanged = true;
            }
        }
        if (((_b = layoutJson.parent) === null || _b === void 0 ? void 0 : _b.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Screen) {
            const screenJson = appConfig.screens[layoutJson.parent.id];
            if ((screenJson === null || screenJson === void 0 ? void 0 : screenJson.parent) != null) {
                const screens = appConfig.screenGroups[screenJson.parent].screens;
                const activeIndex = screens.indexOf(screenJson.id);
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenJson.parent, activeIndex, true));
                screenChanged = true;
            }
        }
        if (!viewChanged && !screenChanged) {
            this.doScroll();
        }
        else {
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                this.doScroll();
            });
        }
    }
    getStyle() {
        const { isFunctionalWidget, isSection, selected, isBlock, rotate = 0 } = this.props;
        const defaultColor = jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(this.pageContext.builderTheme.colors.palette.dark[300], 0.6);
        const hoverColor = this.pageContext.builderTheme.colors.palette.primary[600];
        const selectedColor = hoverColor;
        const outlineStyle = (!isFunctionalWidget || isSection) ? 'dashed' : 'solid';
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_5__.GLOBAL_H5_DRAGGING_CLASS_NAME} &,
      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_5__.GLOBAL_DRAGGING_CLASS_NAME} & {
        > .action-area {
          display: none !important;
        }
        > div.selected-tip {
          .tip-content {
            outline-color: ${defaultColor};
          }
        }
      }

      transform: ${rotate > 0 || rotate < 0 ? `rotateZ(${rotate}deg)` : ''};
      padding: inherit;
      position: absolute;
      left: 0;
      bottom: 0;
      top: 0;
      right: 0;
      z-index: ${selected ? jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutZIndex.HandlerTools : 'auto'};
      pointer-events: none;

      & > div.selected-tip {
        display: block;
        padding: inherit;
        position: absolute;
        left: 0;
        bottom: 0;
        top: 0;
        right: 0;
        pointer-events: none;
        .tip-content {
          height: 100%;
          padding: 1px;
          &:after {
            content: '';
            width: 100%;
            height: 100%;
            outline: ${isBlock && !selected ? 'none' : `1px ${outlineStyle} ${defaultColor}`};
            display: block;
            outline-color: ${!isFunctionalWidget || isSection ? defaultColor : 'transparent'};
          }
        }
      }

      .exb-rnd.selected > & > div.selected-tip {
        display: block;
        .tip-content {
          &:after {
            outline-color: ${selectedColor};
          }
        }
      }

      & > .action-area {
        position: relative;
        .handle {
          position: absolute;
          pointer-events: all;
        }
      }

      .lock-layout-tip {
        background: ${this.pageContext.builderTheme.colors.palette.dark[100]};
        border: 1px solid ${this.pageContext.builderTheme.colors.palette.light[700]};
        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.5);
        width: 20px;
        height: 20px;
        position: absolute;
        left: -10px;
        top: -10px;

        svg {
          margin-bottom: 6px;
          margin-left: 4px;
        }
      }
    `;
    }
    getKeyboardComponent() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.Keyboard, { bindings: this.keyBindings });
    }
    isResizable() {
        const { resizable = true, selected } = this.props;
        return selected && !this.pageContext.viewOnly && !this.props.lockLayout && resizable;
    }
    showToolbar() {
        const { forbidToolbar, selected } = this.props;
        return !forbidToolbar && !this.pageContext.viewOnly && selected;
    }
    render() {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_page_context__WEBPACK_IMPORTED_MODULE_2__.ScreenGroupContext.Consumer, null, (info) => {
            this.screenGroupInfo = info;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.PageContext.Consumer, null, (pageContext) => {
                this.pageContext = pageContext;
                if (!this.props.isDesignMode) {
                    return null;
                }
                const { layoutId, layoutItem, resizable = true, draggable = true, selected, toolItems, showDefaultTools, left, top, right, bottom, rotate } = this.props;
                const lockBBox = !draggable && !resizable;
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { "data-testid": 'select-wrapper', ref: (el) => (this.ref = el), css: this.getStyle(), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-wrapper', {
                        selected,
                        'no-embed-layout': !this.props.hasEmbeddedLayout
                    }) },
                    !pageContext.viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'selected-tip' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'tip-content' }))),
                    this.showToolbar() && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item_toolbar__WEBPACK_IMPORTED_MODULE_8__.LayoutItemToolbar, { layoutId: layoutId, layoutItem: layoutItem, refElement: this.ref, modifiers: this.modifiers, builderTheme: this.pageContext.builderTheme, formatMessage: this.formatMessage, toolItems: toolItems, showDefaultTools: showDefaultTools })),
                    this.isResizable() && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_resize_handlers__WEBPACK_IMPORTED_MODULE_7__.ResizeHandlers, { left: left, right: right, top: top, bottom: bottom, rotation: rotate, builderTheme: pageContext.builderTheme })),
                    lockBBox && selected && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'lock-layout-tip rounded-circle' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_9__.LockOutlined, { size: 's', color: pageContext.builderTheme.colors.black }))),
                    selected && this.getKeyboardComponent()));
            }));
        }));
    }
}
const mapStateToProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state) => { var _a, _b, _c; return (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false; },
    (state) => state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design,
    (state, props) => { var _a, _b; return props.isSection ? (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.sectionNavInfos) === null || _b === void 0 ? void 0 : _b[props.layoutItem.sectionId] : null; }
], (lockLayout, isDesignMode, sectionNavInfo) => ({ lockLayout, isDesignMode, sectionNavInfo }));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToProps)((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.injectIntl)(SelectWrapper)));


/***/ }),

/***/ "./jimu-layouts/lib/builder/shape-l.tsx":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/builder/shape-l.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ShapeL: () => (/* binding */ ShapeL)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/** @jsx jsx */


const size = 9;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  width: ${size}px;
  height: ${size}px;
  background: transparent;
  position: absolute;
`;
function ShapeL(props) {
    const { pos } = props;
    const ref = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        var _a;
        const ratio = (_a = window.devicePixelRatio) !== null && _a !== void 0 ? _a : 1;
        ref.current.width = size * ratio;
        ref.current.height = size * ratio;
        const ctx = ref.current.getContext('2d');
        if (!ctx) {
            return;
        }
        ctx.scale(ratio, ratio);
        ctx.strokeStyle = '#444';
        ctx.fillStyle = '#fff';
        ctx.lineWidth = 2;
        if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL()) {
            if (pos === 'tl') {
                ctx.translate(size, 0);
                ctx.rotate(Math.PI / 2);
            }
            if (pos === 'br') {
                ctx.translate(0, size);
                ctx.rotate(-Math.PI / 2);
            }
            if (pos === 'bl') {
                ctx.translate(size, size);
                ctx.rotate(Math.PI);
            }
        }
        else {
            if (pos === 'tr') {
                ctx.translate(size, 0);
                ctx.rotate(Math.PI / 2);
            }
            if (pos === 'br') {
                ctx.translate(size, size);
                ctx.rotate(Math.PI);
            }
            if (pos === 'bl') {
                ctx.translate(0, size);
                ctx.rotate(-Math.PI / 2);
            }
        }
        ctx.beginPath();
        ctx.moveTo(1, 1);
        ctx.lineTo(size - 1, 1);
        ctx.lineTo(size - 1, size / 3);
        ctx.lineTo(size / 3, size / 3);
        ctx.lineTo(size / 3, size - 1);
        ctx.lineTo(1, size - 1);
        ctx.closePath();
        ctx.stroke();
        ctx.fill();
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas", { css: style, ref: ref });
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/shape-rect.tsx":
/*!*************************************************!*\
  !*** ./jimu-layouts/lib/builder/shape-rect.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ShapeRect: () => (/* binding */ ShapeRect)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/** @jsx jsx */

const long = 16;
const short = 4;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  background: transparent;
  position: absolute;
`;
function ShapeRect(props) {
    const { direction } = props;
    const ref = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        var _a;
        const ratio = (_a = window.devicePixelRatio) !== null && _a !== void 0 ? _a : 1;
        if (direction === 'h') {
            ref.current.width = long * ratio;
            ref.current.height = short * ratio;
        }
        else {
            ref.current.width = short * ratio;
            ref.current.height = long * ratio;
        }
        const ctx = ref.current.getContext('2d');
        if (!ctx) {
            return;
        }
        ctx.scale(ratio, ratio);
        ctx.strokeStyle = '#444';
        ctx.fillStyle = '#fff';
        ctx.lineWidth = 2;
        if (direction === 'h') {
            ctx.rect(1, 1, long - 2, short - 2);
        }
        else {
            ctx.rect(1, 1, short - 2, long - 2);
        }
        ctx.stroke();
        ctx.fill();
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas", { css: style, ref: ref });
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/theme-tooltip.tsx":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/builder/theme-tooltip.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ThemedTooltip: () => (/* binding */ ThemedTooltip)
/* harmony export */ });
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");


const ThemedTooltip = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_1__.withBuilderTheme)(jimu_ui__WEBPACK_IMPORTED_MODULE_0__.Tooltip);


/***/ }),

/***/ "./jimu-layouts/lib/builder/toolbar-context.tsx":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/builder/toolbar-context.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ToolbarContext: () => (/* binding */ ToolbarContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const ToolbarContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({});


/***/ }),

/***/ "./jimu-layouts/lib/builder/toolbar-group.tsx":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/builder/toolbar-group.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ToolbarGroup: () => (/* binding */ ToolbarGroup)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _toolbar_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toolbar-item */ "./jimu-layouts/lib/builder/toolbar-item.tsx");
/* harmony import */ var _toolbar_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./toolbar-context */ "./jimu-layouts/lib/builder/toolbar-context.tsx");
/* harmony import */ var _theme_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/** @jsx jsx */







const noAction = () => { };
const TheTooltip = window.jimuConfig.isInBuilder ? _theme_tooltip__WEBPACK_IMPORTED_MODULE_5__.ThemedTooltip : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Tooltip;
class ToolbarGroup extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.dropdownBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_6__.utils.autoBindHandlers(this, ['togglePopToolItems', 'onItemClick']);
    }
    getBaseStyle() {
        const { theme } = this.contextProps;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      cursor: pointer;
      display: flex;
      justify-content: space-around;
      align-items: center;
      background-color: ${theme.colors.palette.light[300]};

      &:hover {
        background-color: ${theme.colors.palette.light[500]} !important;
      }
    `;
    }
    getValue(target, props) {
        if (typeof target === 'function') {
            return target(props);
        }
        return target;
    }
    togglePopToolItems(e) {
        if (e) {
            e.stopPropagation();
        }
        this.contextProps.onItemClick(this.props.uid);
    }
    onItemClick(toolConfig, props) {
        const { parentRef } = this.contextProps;
        toolConfig.onClick(Object.assign(Object.assign({}, props), { clientRect: parentRef.getBoundingClientRect() }));
        // focus the drop down button if any item is clicked
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
            this.dropdownBtnRef.current.focus();
        });
    }
    createToolItem(toolConfig, props, index) {
        if (!toolConfig.onClick && !toolConfig.seperator) {
            return null;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_item__WEBPACK_IMPORTED_MODULE_3__.ToolbarItem, Object.assign({ key: index, uid: `${this.props.uid}_${index + 1}`, isInGroup: true }, toolConfig, { onClick: () => { this.onItemClick(toolConfig, props); } })));
    }
    getGroupMenu(selectedTool, visibleTools) {
        const { theme } = this.contextProps;
        if (selectedTool) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { rotate: selectedTool.rotate, icon: selectedTool.icon, size: selectedTool.size || _toolbar_item__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_ICON_SIZE, color: theme.colors.black }));
        }
        if (visibleTools[0].icon) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { icon: visibleTools[0].icon, size: visibleTools[0].size || _toolbar_item__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_ICON_SIZE, color: theme.colors.black }));
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_item__WEBPACK_IMPORTED_MODULE_3__.ToolbarItem, Object.assign({ uid: `${this.props.uid}_0`, onClick: noAction }, visibleTools[0])));
    }
    handleDoubleClick(e) {
        e.stopPropagation();
    }
    tooltipStyle() {
        const { theme } = this.contextProps;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      border: none;

      .tooltip {
        color: ${theme.colors.black};
        background-color: ${theme.colors.palette.light[600]};
        border-color: ${theme.colors.palette.light[300]};
      }
    `;
    }
    render() {
        const { tools, uid } = this.props;
        if (!tools || tools.length === 0) {
            return null;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_context__WEBPACK_IMPORTED_MODULE_4__.ToolbarContext.Consumer, null, (props) => {
            this.contextProps = props;
            const { visible: rootVisible, caret = true, title } = tools[0];
            const isRootVisible = this.getValue(rootVisible, props);
            if (rootVisible !== undefined && !isRootVisible) {
                return null;
            }
            const visibleTools = tools.filter((tool) => {
                const { visible } = tool;
                const isVisible = this.getValue(visible, props);
                return typeof visible === 'undefined' || isVisible;
            });
            if (visibleTools.length === 0) {
                return null;
            }
            if (visibleTools.length === 1) {
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_item__WEBPACK_IMPORTED_MODULE_3__.ToolbarItem, Object.assign({ uid: `${uid}_0` }, visibleTools[0]));
            }
            let selectedTool;
            // eslint-disable-next-line
            visibleTools.some((tool) => {
                const { checked } = tool;
                if (this.getValue(checked, props)) {
                    selectedTool = tool;
                    return true;
                }
            });
            let tooltip = '';
            if (typeof title === 'function') {
                tooltip = title(props);
            }
            else if (typeof title === 'string') {
                tooltip = title;
            }
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'toolbar-group', css: this.getBaseStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Dropdown, { direction: 'down', size: 'sm', className: caret ? 'px-1' : '', isOpen: props.toggleOn && props.activeItem === uid, toggle: this.togglePopToolItems },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(TheTooltip, { placement: 'bottom', title: tooltip, css: this.tooltipStyle() },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownButton, { icon: true, arrow: caret, type: 'tertiary', size: 'sm', ref: this.dropdownBtnRef, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                      .caret-icon {
                        color: ${props.theme.colors.palette.dark[600]};
                        margin-left: 0.25rem;
                      }
                    `, onDoubleClick: this.handleDoubleClick }, this.getGroupMenu(selectedTool, visibleTools))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownMenu, { className: `p-0 ${window.jimuConfig.isInBuilder ? jimu_theme__WEBPACK_IMPORTED_MODULE_2__.Theme2GlobalStyleClassName : ''}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `min-width: 5rem;` }, visibleTools.map((toolConfig, index) => (this.createToolItem(toolConfig, props, index)))))));
        }));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/toolbar-item.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/builder/toolbar-item.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_ICON_SIZE: () => (/* binding */ DEFAULT_ICON_SIZE),
/* harmony export */   ToolbarItem: () => (/* binding */ ToolbarItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _toolbar_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toolbar-context */ "./jimu-layouts/lib/builder/toolbar-context.tsx");
/* harmony import */ var _theme_tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/** @jsx jsx */





const DEFAULT_ICON_SIZE = 16;
const TheTooltip = window.jimuConfig.isInBuilder ? _theme_tooltip__WEBPACK_IMPORTED_MODULE_4__.ThemedTooltip : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Tooltip;
const modifiers = [
    {
        name: 'flip',
        options: {
            fallbackPlacements: ['top', 'right']
        }
    }
];
class ToolbarItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.autoBindHandlers(this, ['select', 'handleMouseEnter', 'handleMouseLeave']);
    }
    componentDidUpdate() {
        const isVisible = this.getValue(this.props.visible, this.contextProps);
        const isDisabled = this.getValue(this.props.disabled, this.contextProps);
        if (!isVisible || isDisabled) {
            this.contextProps.onItemUnSelected(this.props.uid);
        }
    }
    componentWillUnmount() {
        this.contextProps.onItemUnSelected(this.props.uid);
    }
    select(e) {
        e.stopPropagation();
        if (this.props.onClick) {
            const { parentRef } = this.contextProps;
            this.props.onClick({
                layoutId: this.contextProps.layoutId,
                layoutItem: this.contextProps.layoutItem,
                clientRect: parentRef && parentRef.getBoundingClientRect()
            }, e);
            this.contextProps.onItemClick(this.props.uid);
        }
    }
    handleDoubleClick(e) {
        e.stopPropagation();
    }
    handleMouseEnter(e) {
        e.stopPropagation();
        if (this.props.onMouseEnter) {
            this.props.onMouseEnter({
                layoutId: this.contextProps.layoutId,
                layoutItem: this.contextProps.layoutItem,
                clientRect: null
            }, e);
        }
    }
    handleMouseLeave(e) {
        e.stopPropagation();
        if (this.props.onMouseLeave) {
            this.props.onMouseLeave({
                layoutId: this.contextProps.layoutId,
                layoutItem: this.contextProps.layoutItem,
                clientRect: null
            }, e);
        }
    }
    getValue(target, props) {
        if (typeof target === 'function') {
            return target(props);
        }
        return target;
    }
    getStyle() {
        const { theme } = this.contextProps;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      cursor: pointer;
      width: 32px;
      min-height: 32px;
      display: flex;
      justify-content: flex-start;
      user-select: none;
      background: ${theme.colors.palette.light[300]};

      &:hover {
        background: ${theme.colors.palette.light[500]};
      }
      &.selected {
        background: ${theme.colors.primary};
      }

      &.disabled,
      &.no-action {
        cursor: default;
        &:hover {
          background: ${theme.colors.palette.light[300]};
        }
      }
      &.disabled {
        .jimu-btn {
          cursor: default;
        }
        .jimu-btn svg, .toolbar-label {
          color: ${theme.colors.palette.dark[200]} !important;
        }
      }

      &.msg {
        width: auto;
        font-size: 12px;
        color: ${theme.colors.black};
        letter-spacing: 0.33px;
        text-align: center;
        padding: 0 8px;
      }

      .toolbar-group & {
        justify-content: flex-start;
      }

      .popper {
        border: 1px solid ${theme.colors.palette.dark[400]};
      }

      .toolbar-label {
        color: ${theme.colors.black};
      }
    `;
    }
    separatorStyle() {
        const { theme } = this.contextProps;
        if (this.props.isInGroup) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        width: 100%;
        height: 1px;
        background-color: ${theme.colors.palette.light[600]};
        align-self: center;
      `;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      div.toolbar-item + &,
      div.toolbar-group + & {
        display: block;
      }
      display: none;
      width: 1px;
      height: 30px;
      border-left: 1px solid ${theme.colors.palette.light[600]};
      align-self: center;
    `;
    }
    tooltipStyle() {
        const { theme } = this.contextProps;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      border: none;

      .tooltip {
        color: ${theme.colors.black};
        background-color: ${theme.colors.palette.light[600]};
        border-color: ${theme.colors.palette.light[300]};
      }
    `;
    }
    createButton({ textContent, iconContent, tooltip, isDisabled, noAction, isChecked, rotate, iconSize, autoFlipIcon, ref }) {
        const title = textContent ? '' : tooltip;
        const titleProps = isDisabled ? { title } : {};
        const buttonComponent = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, Object.assign({ "aria-label": textContent || tooltip, ref: ref, className: 'px-0 w-100 text-left', type: 'tertiary', size: 'sm', icon: iconContent && !textContent, role: 'menuitem', onClick: isDisabled || noAction ? null : this.select, disabled: isDisabled, onMouseEnter: this.handleMouseEnter, onMouseLeave: this.handleMouseLeave, onDoubleClick: this.handleDoubleClick, "data-extname": this.props.extName }, titleProps),
            iconContent && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('tool-item-icon', { checked: isChecked }), icon: iconContent, rotate: rotate, size: iconSize, color: this.contextProps.theme.colors.black, autoFlip: autoFlipIcon })),
            textContent && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'toolbar-label text-nowrap' }, textContent));
        if (isDisabled) {
            return buttonComponent;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(TheTooltip, { placement: 'bottom', title: title, modifiers: modifiers, css: this.tooltipStyle() }, buttonComponent);
    }
    render() {
        const { icon, autoFlipIcon, label, size, checked, disabled, visible, rotate, settingPanel, title, uid, widgetId, className, seperator } = this.props;
        if (seperator) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_context__WEBPACK_IMPORTED_MODULE_3__.ToolbarContext.Consumer, null, (props) => {
                this.contextProps = props;
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { "data-testid": 'toolbarSeparator', css: this.separatorStyle() });
            }));
        }
        const noAction = this.props.onClick == null;
        const iconSize = size || DEFAULT_ICON_SIZE;
        const SettingPanel = settingPanel;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_context__WEBPACK_IMPORTED_MODULE_3__.ToolbarContext.Consumer, null, (props) => {
            this.contextProps = props;
            if (widgetId && props.layoutItem.widgetId !== widgetId) {
                // TODO - prevent renderring toolbar item for the previous selected widget.
                // Should have better solution
                return null;
            }
            let tooltip = '';
            if (typeof title === 'function') {
                tooltip = title(props);
            }
            else if (typeof title === 'string') {
                tooltip = title;
            }
            const showSettingPanel = settingPanel && props.activeItem === uid && props.toggleOn;
            const isChecked = showSettingPanel || this.getValue(checked, props);
            const isDisabled = this.getValue(disabled, props);
            const isVisible = this.getValue(visible, props);
            const textContent = this.getValue(label, props);
            const iconContent = this.getValue(icon, props);
            if (visible != null && !isVisible) {
                return null;
            }
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('toolbar-item', className, {
                    selected: isChecked,
                    disabled: isDisabled,
                    msg: textContent,
                    'no-action': noAction
                }), css: this.getStyle() },
                !SettingPanel && this.createButton({ textContent, iconContent, tooltip, isDisabled, noAction, isChecked, rotate, iconSize, autoFlipIcon, ref: null }),
                SettingPanel && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                    this.createButton({ textContent, iconContent, tooltip, isDisabled, noAction, isChecked, rotate, iconSize, autoFlipIcon, ref: ref => { this.reference = ref; } }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { placement: 'bottom-start', reference: this.reference, open: showSettingPanel, disablePortal: true },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                          display: flex;
                          pointer-events: all;
                          background-color: ${props.theme.colors.white};
                          border-radius: 2px;
                          box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);
                        `, className: 'd-flex' }, showSettingPanel && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(SettingPanel, Object.assign({}, props))))))));
        }));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/toolbar.tsx":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/builder/toolbar.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Toolbar: () => (/* binding */ Toolbar)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _toolbar_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toolbar-context */ "./jimu-layouts/lib/builder/toolbar-context.tsx");
/* harmony import */ var _toolbar_group__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./toolbar-group */ "./jimu-layouts/lib/builder/toolbar-group.tsx");
/* harmony import */ var _toolbar_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./toolbar-item */ "./jimu-layouts/lib/builder/toolbar-item.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/** @jsx jsx */









class _Toolbar extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            activeItem: null
        };
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_6__.utils.autoBindHandlers(this, ['onItemClick', 'onItemUnSelected']);
    }
    onItemClick(value) {
        let isOn = this.state.toggleOn;
        if (value === this.state.activeItem) {
            isOn = !isOn;
        }
        else {
            isOn = true;
        }
        this.setState({
            activeItem: value,
            toggleOn: isOn
        });
    }
    onItemUnSelected(value) {
        if (value === this.state.activeItem) {
            this.setState({
                activeItem: null,
                toggleOn: false
            });
        }
    }
    getStyle() {
        const { theme } = this.props;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      display: flex;
      pointer-events: all;
      border-radius: 2px;
      box-shadow: 0 2px 8px 1px rgba(0,0,0,0.20);
      height: 100%;
      margin: 5px 0;
      background: ${theme.colors.palette.light[300]};

      .toolbar-item, .toolbar-item {
        .jimu-btn:focus, .jimu-btn:focus-visible {
          z-index: 1;
        }
      }

      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_7__.GLOBAL_DRAGGING_CLASS_NAME} &,
      .${_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_8__.GLOBAL_RESIZING_CLASS_NAME} &,
      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_7__.GLOBAL_H5_DRAGGING_CLASS_NAME} & {
        display: none;
      }
    `;
    }
    reOrganizeTools() {
        const { tools } = this.props;
        const sizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_6__.utils.getCurrentSizeMode();
        if (sizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            const filterTools = tools.filter(toolItem => {
                let tool;
                if (Array.isArray(toolItem)) {
                    tool = toolItem[0];
                }
                else {
                    tool = toolItem;
                }
                const { visible, seperator = false } = tool;
                const isVisible = typeof visible === 'function' ? visible(this.props) : visible;
                return !seperator && (typeof visible === 'undefined' || isVisible);
            });
            if (filterTools.length > 8) {
                // Small size accepts 8 toolbar items at most.
                const newTools = tools.slice(0, 8);
                const groupedTools = tools.slice(8).map(tool => { return Object.assign(Object.assign({}, tool), { label: tool.title }); });
                const tool = [
                    {
                        icon: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_1___default()),
                        caret: false
                    },
                    ...groupedTools
                ];
                newTools.push(tool);
                return newTools;
            }
        }
        return tools;
    }
    render() {
        const { tools, isLockLayout } = this.props;
        if (!tools || tools.length === 0) {
            return null;
        }
        const organizedTools = this.reOrganizeTools();
        const { activeItem, toggleOn } = this.state;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_context__WEBPACK_IMPORTED_MODULE_3__.ToolbarContext.Provider, { value: Object.assign(Object.assign({}, this.props), { activeItem, toggleOn, onItemClick: this.onItemClick, onItemUnSelected: this.onItemUnSelected, isLockLayout: isLockLayout }) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: `layout-item-toolbar ${window.jimuConfig.isInBuilder ? jimu_theme__WEBPACK_IMPORTED_MODULE_2__.Theme2GlobalStyleClassName : ''}` }, organizedTools.map((toolConfig, index) => {
                if (Array.isArray(toolConfig)) {
                    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_group__WEBPACK_IMPORTED_MODULE_4__.ToolbarGroup, { uid: `${index}`, key: index, tools: toolConfig });
                }
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_toolbar_item__WEBPACK_IMPORTED_MODULE_5__.ToolbarItem, Object.assign({ uid: `${index}`, key: index }, toolConfig));
            }))));
    }
}
const mapFunc = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false; }, isLockLayout => ({ isLockLayout }));
const Toolbar = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapFunc)(_Toolbar);


/***/ }),

/***/ "./jimu-layouts/lib/builder/types.ts":
/*!*******************************************!*\
  !*** ./jimu-layouts/lib/builder/types.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./jimu-layouts/lib/builder/util.ts":
/*!******************************************!*\
  !*** ./jimu-layouts/lib/builder/util.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addSectionInPlaceholder: () => (/* binding */ addSectionInPlaceholder),
/* harmony export */   addWidgetInPlaceholder: () => (/* binding */ addWidgetInPlaceholder),
/* harmony export */   canDropAtPlaceholder: () => (/* binding */ canDropAtPlaceholder),
/* harmony export */   dropAtPlaceholder: () => (/* binding */ dropAtPlaceholder)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


function canDropAtPlaceholder(draggingItem) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
    if (draggingItem.layoutInfo) {
        const { layoutId, layoutItemId } = draggingItem.layoutInfo;
        const layoutItem = appConfigAction.appConfig.layouts[layoutId].content[layoutItemId];
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && !layoutItem.widgetId) { // can not be a placeholder
            return false;
        }
        return true;
    }
    else if (draggingItem.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && draggingItem.manifest) {
        if (!draggingItem.uri) {
            return false;
        }
    }
    return true;
}
function dropAtPlaceholder(placeholderLayoutInfo, draggingItem) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
    if (draggingItem.layoutInfo) {
        const { layoutId, layoutItemId } = draggingItem.layoutInfo;
        const layoutItem = appConfigAction.appConfig.layouts[layoutId].content[layoutItemId];
        appConfigAction.removeLayoutItem(draggingItem.layoutInfo, false, false);
        const setting = layoutItem.setting;
        appConfigAction.addContentToPlaceholder(placeholderLayoutInfo, layoutItem.type, layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget ? layoutItem.widgetId : layoutItem.sectionId);
        if (setting === null || setting === void 0 ? void 0 : setting.placeholderStyle) {
            appConfigAction.editLayoutItemProperty(placeholderLayoutInfo, 'setting', setting.without('placeholderStyle'));
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, placeholderLayoutInfo));
        });
    }
    else {
        if (draggingItem.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && draggingItem.uri) {
            addWidgetInPlaceholder(placeholderLayoutInfo, draggingItem);
        }
        else if (draggingItem.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            addSectionInPlaceholder(placeholderLayoutInfo);
        }
    }
}
function addSectionInPlaceholder(placeholderLayoutInfo) {
    const { layoutId, layoutItemId } = placeholderLayoutInfo;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
    const sectionJson = appConfigAction.createSection();
    appConfigAction.addContentToPlaceholder(placeholderLayoutInfo, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, sectionJson.id);
    const layoutItem = appConfigAction.appConfig.layouts[layoutId].content[layoutItemId];
    const setting = layoutItem.setting;
    if (setting === null || setting === void 0 ? void 0 : setting.placeholderStyle) {
        appConfigAction.editLayoutItemProperty(placeholderLayoutInfo, 'setting', setting.without('placeholderStyle'));
    }
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, {
            layoutId: layoutId,
            layoutItemId: layoutItemId
        }));
    });
}
function addWidgetInPlaceholder(placeholderLayoutInfo, draggingItem) {
    return __awaiter(this, void 0, void 0, function* () {
        const { layoutId, layoutItemId } = placeholderLayoutInfo;
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const widgetJson = yield appConfigAction.createWidget({ uri: draggingItem.uri, itemId: draggingItem.itemId });
        appConfigAction.addContentToPlaceholder(placeholderLayoutInfo, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, widgetJson.id);
        const layoutItem = appConfigAction.appConfig.layouts[layoutId].content[layoutItemId];
        const setting = layoutItem.setting;
        if (setting === null || setting === void 0 ? void 0 : setting.placeholderStyle) {
            appConfigAction.editLayoutItemProperty({
                layoutId: placeholderLayoutInfo.layoutId,
                layoutItemId: placeholderLayoutInfo.layoutItemId
            }, 'setting', setting.without('placeholderStyle'));
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, {
                layoutId: layoutId,
                layoutItemId: layoutItemId
            }));
        });
    });
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/widget-placeholder.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/builder/widget-placeholder.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetPlaceholder: () => (/* binding */ WidgetPlaceholder),
/* harmony export */   _WidgetPlaceholder: () => (/* binding */ _WidgetPlaceholder)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/editor/plus */ "./jimu-icons/outlined/editor/plus.tsx");
/* harmony import */ var _theme_tooltip__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./util */ "./jimu-layouts/lib/builder/util.ts");
/** @jsx jsx */









const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
  right: 0;
  display: flex;
  z-index: 0;
`;
class _WidgetPlaceholder extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.toggleModal = (e) => {
            e.stopPropagation();
            if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.appBuilderSync.publishSidePanelToApp({ type: 'widget', isPlaceholder: true, isItemAccepted: this.isItemAccepted, onSelect: this.setContent });
                return;
            }
            this.setState(prevState => ({
                showModal: !prevState.showModal
            }));
        };
        this.closeModal = () => {
            if (this.state.showModal) {
                this.setState({ showModal: false });
            }
        };
        this.toggleDragoverEffect = (isDragover, draggingItem) => {
            if (this.ref && isDragover && (0,_util__WEBPACK_IMPORTED_MODULE_8__.canDropAtPlaceholder)(draggingItem)) {
                this.ref.classList.add('dragover');
            }
            else {
                this.ref.classList.remove('dragover');
            }
        };
        this.onDrop = (draggingItem) => {
            if (!(0,_util__WEBPACK_IMPORTED_MODULE_8__.canDropAtPlaceholder)(draggingItem)) {
                return;
            }
            const { layoutId, layoutItemId } = this.props;
            (0,_util__WEBPACK_IMPORTED_MODULE_8__.dropAtPlaceholder)({ layoutId, layoutItemId }, draggingItem);
        };
        this.setContent = (item) => {
            const { layoutId, layoutItemId } = this.props;
            if (item.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                (0,_util__WEBPACK_IMPORTED_MODULE_8__.addWidgetInPlaceholder)({ layoutId, layoutItemId }, item).then(() => {
                    this.setState({
                        isBusy: false
                    });
                });
            }
            else if (item.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
                (0,_util__WEBPACK_IMPORTED_MODULE_8__.addSectionInPlaceholder)({ layoutId, layoutItemId });
            }
            this.setState({
                showModal: false,
                isBusy: true
            });
        };
        this.isItemAccepted = (item) => {
            return this.layoutContext.isItemAccepted(item, true);
        };
        this.fakeLayouts = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${this.props.layoutId}_${this.props.layoutItemId}_tlarge`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${this.props.layoutId}_${this.props.layoutItemId}_tmedium`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${this.props.layoutId}_${this.props.layoutItemId}_tsmall`
        });
        this.state = { showModal: false, isBusy: false };
    }
    componentDidUpdate(prevProps) {
        if (prevProps.currentDialogId !== this.props.currentDialogId) {
            this.setState({ showModal: false });
        }
    }
    getStyle(builderTheme) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      left: 0;
      top: 0;
      overflow: hidden;

      &.dragover .drop-tip {
        background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.primary[700], 0.5)} !important;
      }

      .add-btn {
        z-index: 1;
      }

      .mask {
        position: absolute;
        left:0;
        top:0;
        right:0;
        bottom:0;
        z-index:2;
        background: transparent;
      }

      &.aspect-ratio-wrapper {
        padding-top: ${(this.props.aspectRatio || 0) * 100}%;
      }

      &.aspect-ratio-wrapper > .exb-drop-area {
        position: absolute;
        padding: 0;
      }

      &.aspect-ratio-wrapper > .add-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    `;
    }
    getPopupStyle() {
        const { builderTheme } = this.pageContext;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      background-color: ${builderTheme.colors.palette.light[300]};
      max-height: 400px;
      overflow: auto;
    `;
    }
    getModalStyle() {
        const { builderTheme } = this.pageContext;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .modal-content {
        background-color: ${builderTheme.colors.palette.light[300]};
      }

      .modal-header {
        color: ${builderTheme.colors.black};
        .close {
          color: ${builderTheme.colors.palette.dark[700]};
          &:hover {
            color: ${builderTheme.colors.black};
          }
        }
      }
    `;
    }
    render() {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.PageContext.Consumer, null, (pageContext) => {
            this.pageContext = pageContext;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutContext.Consumer, null, (layoutContext) => {
                var _a;
                this.layoutContext = layoutContext;
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'layout-widget layout-item-content no-widget h-100 w-100 d-flex justify-content-center align-items-center', ref: el => { this.ref = el; }, css: this.getStyle(pageContext.builderTheme) },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_5__.DropArea, { css: dropareaStyle, className: 'drop-tip', layouts: this.fakeLayouts, isPlaceholder: true, highlightDragover: false, onToggleDragoverEffect: this.toggleDragoverEffect, onDrop: this.onDrop }),
                    this.state.isBusy && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.LoadingType.Primary }),
                    !this.state.isBusy && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: el => { this.btnRef = el; }, className: 'add-btn' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_theme_tooltip__WEBPACK_IMPORTED_MODULE_7__.ThemedTooltip, { title: (_a = this.props.intl) === null || _a === void 0 ? void 0 : _a.formatMessage({ id: 'addWidget' }) },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 36px; height: 36px; padding: 0.5rem;`, onClick: this.toggleModal, "aria-haspopup": true },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_6__.PlusOutlined, null))))),
                    !this.state.isBusy && this.state.showModal &&
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.WidgetListPopper, { referenceElement: this.btnRef, isAccepted: this.isItemAccepted, onSelect: this.setContent, onClose: this.closeModal }),
                    this.pageContext.viewOnly && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mask' })));
            }));
        }));
    }
}
const mapFunc = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)((state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.currentDialogId; }, currentDialogId => ({ currentDialogId }));
const WrappedComponent = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapFunc)(_WidgetPlaceholder);
const WidgetPlaceholder = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.injectIntl)(WrappedComponent);


/***/ }),

/***/ "./jimu-layouts/lib/builder/widget-renderer.tsx":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/builder/widget-renderer.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetRendererInBuilder: () => (/* binding */ WidgetRendererInBuilder)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_placeholder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-placeholder */ "./jimu-layouts/lib/builder/widget-placeholder.tsx");
/* harmony import */ var _interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/** @jsx jsx */




class WidgetRendererInBuilder extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    mask() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'widget-mask' });
    }
    getStyle() {
        // Set z-index higher than droparea (z-index: 10) when widget is inline editing
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .${_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_DRAGGING_CLASS_NAME} & {
        overflow: visible !important;
      }
      z-index: ${this.props.isInlineEditing ? jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutZIndex.HandlerTools : 0};

      .widget-mask {
        position: absolute;
        background: transparent;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 1;
      }

      body:not(.design-mode) & .widget-mask {
        display: none !important;
      }
    `;
    }
    getPlaceholderStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      body:not(.design-mode) & {
        display: none !important;
      }
    `;
    }
    render() {
        const { widgetId, isInlineEditing, isFunctionalWidget, hasEmbeddedLayout } = this.props;
        // if (!widgetId) {
        //   return <WidgetPlaceholder css={this.getPlaceholderStyle()} {...this.props} />
        // }
        const showMask = !isInlineEditing && isFunctionalWidget && !hasEmbeddedLayout;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.WidgetRenderer, Object.assign({ className: 'w-100', css: this.getStyle() }, this.props),
            !widgetId && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_placeholder__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, Object.assign({ css: this.getPlaceholderStyle() }, this.props)),
            showMask && widgetId && this.mask()));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/builder/column-item-setting.tsx":
/*!************************************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/builder/column-item-setting.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ColumnItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/common-layout-item-setting */ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx");
/* harmony import */ var _builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/common-transform-setting */ "./jimu-layouts/lib/builder/common-transform-setting.tsx");
/* harmony import */ var jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/outlined/editor/lock */ "./jimu-icons/outlined/editor/lock.tsx");
/* harmony import */ var jimu_icons_outlined_editor_unlock__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/editor/unlock */ "./jimu-icons/outlined/editor/unlock.tsx");
/** @jsx jsx */









const inputStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 100px;`;
const widthModes = [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom];
const heightModes = [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Auto, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom];
const heightModesWithoutAuto = [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom];
const availableWidthUnits = [jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PIXEL, jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PERCENTAGE];
const availableHeightUnits = [jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PIXEL];
class ColumnItemSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.updateBBox = (prop, value) => {
            var _a;
            let bbox = this.props.layoutItem.bbox;
            const { distance, unit } = value;
            const originalValue = bbox[prop];
            const contaienrRect = this.getSizeOfContainer();
            let newValue = distance.toFixed(2);
            let pixelValue;
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(originalValue) && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PIXEL) { // change from percentage to pixel
                if (contaienrRect) {
                    if (prop === 'left' || prop === 'right' || prop === 'width') {
                        newValue = Math.round(parseFloat(originalValue) * contaienrRect.width / 100);
                    }
                    else {
                        newValue = Math.round(parseFloat(originalValue) * contaienrRect.height / 100);
                    }
                    pixelValue = newValue;
                }
            }
            else if (!jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(originalValue) && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PERCENTAGE) { // change from pixel to percentage
                if (contaienrRect) {
                    if (prop === 'left' || prop === 'right' || prop === 'width') {
                        newValue = (parseFloat(originalValue) * 100 / contaienrRect.width).toFixed(4);
                    }
                    else {
                        newValue = (parseFloat(originalValue) * 100 / contaienrRect.height).toFixed(4);
                    }
                }
                pixelValue = parseFloat(originalValue);
            }
            if (!pixelValue && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PERCENTAGE) {
                // change percentage value
                const total = prop === 'width' ? contaienrRect.width : contaienrRect.height;
                pixelValue = Math.round(distance * total / 100);
            }
            else if (!pixelValue && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PIXEL) {
                pixelValue = distance;
            }
            bbox = bbox.set(prop, unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PERCENTAGE ? `${newValue}%` : `${newValue}px`);
            if (((_a = this.props.layoutItem.setting) === null || _a === void 0 ? void 0 : _a.heightMode) === 'ratio') {
                const ratio = this.props.layoutItem.setting.aspectRatio;
                if (prop === 'width') {
                    const height = pixelValue * ratio;
                    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.height)) {
                        const newValue = (height * 100 / contaienrRect.height).toFixed(4);
                        bbox = bbox.set('height', `${newValue}%`);
                    }
                    else {
                        bbox = bbox.set('height', `${Math.round(height)}px`);
                    }
                }
                else {
                    const width = pixelValue / ratio;
                    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.width)) {
                        const newValue = (width * 100 / contaienrRect.width).toFixed(4);
                        bbox = bbox.set('width', `${newValue}%`);
                    }
                    else {
                        bbox = bbox.set('width', `${Math.round(width)}px`);
                    }
                }
            }
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox);
        };
        this.toggleHeightMode = () => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            const heightMode = setting.heightMode === 'ratio' ? 'fixed' : 'ratio';
            setting = setting.set('heightMode', heightMode);
            if (heightMode === 'ratio') {
                const itemRect = this.getSizeOfItem();
                if (itemRect) {
                    setting = setting.set('aspectRatio', Number((itemRect.height / itemRect.width).toFixed(2)));
                }
            }
            else {
                let bbox = this.props.layoutItem.bbox;
                const rect = this.getSizeOfItem();
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.width)) {
                    const contaienrRect = this.getSizeOfContainer();
                    bbox = bbox.set('width', `${(rect.width * 100 / contaienrRect.width).toFixed(4)}%`);
                }
                else {
                    bbox = bbox.set('width', `${Math.round(rect.width)}px`);
                }
                bbox = bbox.set('height', `${Math.round(rect.height)}px`);
                this.props.onPosChange({
                    layoutId: this.props.layoutId,
                    layoutItemId: this.props.layoutItem.id
                }, bbox);
            }
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.updateAlignSelf = (e) => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.setIn(['style', 'alignSelf'], e.target.value);
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.updateHeightMode = (mode) => {
            const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            let bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(this.props.layoutItem.bbox);
            if (mode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom && isNaN(parseFloat(bbox.height))) {
                const rect = this.getSizeOfItem();
                bbox = bbox.set('height', `${Math.round(rect.height)}px`);
                this.props.onPosChange({
                    layoutId: this.props.layoutId,
                    layoutItemId: this.props.layoutItem.id
                }, bbox);
            }
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.setIn(['autoProps', 'height'], mode));
        };
        this.updateWidthMode = (mode) => {
            const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            let bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(this.props.layoutItem.bbox);
            if (mode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom && isNaN(parseFloat(bbox.width))) {
                const rect = this.getSizeOfItem();
                bbox = bbox.set('width', `${Math.round(rect.width)}px`);
                this.props.onPosChange({
                    layoutId: this.props.layoutId,
                    layoutItemId: this.props.layoutItem.id
                }, bbox);
            }
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.setIn(['autoProps', 'width'], mode));
        };
        this.updateAspectRatio = (newRatio) => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('aspectRatio', newRatio);
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.formatMessage = (id) => {
            return this.props.formatMessage(id);
        };
    }
    getSizeOfContainer() {
        const layoutElem = this.querySelector(`div.column-layout[data-layoutid="${this.props.layoutId}"]`);
        if (layoutElem) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    getSizeOfItem() {
        const { layoutId, layoutItem } = this.props;
        const layoutElem = this.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
        if (layoutElem) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    querySelector(selector) {
        const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
        if (appFrame) {
            const appFrameDoc = appFrame.contentDocument || appFrame.contentWindow.document;
            return appFrameDoc.querySelector(selector);
        }
        return null;
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .rotation-setting, .rotation-setting input {
        height: 26px;
      }

      .ratio-value {
        font-size: 12px;
      }

      .align-select {
        .dropdown-button, .dropdown-button:hover {
          height: 26px;
        }
      }
    `;
    }
    // getAspectRatio() {
    //   const ratio = this.props.layoutItem.setting?.aspectRatio ?? -1;
    //   if (ratio < 0) {
    //     return '';
    //   }
    //   const width = 100;
    //   const height = Math.round(ratio * 100);
    //   const common = layoutUtils.gcd(width, height);
    //   return `${width / common} : ${height / common}`;
    // }
    render() {
        var _a, _b, _c, _d;
        const { layoutId, layoutItem, isLockLayout, supportAutoSize } = this.props;
        if (!layoutItem) {
            return null;
        }
        const setting = layoutItem.setting || {};
        const style = setting.style || {};
        const bbox = layoutItem.bbox || {};
        const isAutoWidth = ((_a = setting.autoProps) === null || _a === void 0 ? void 0 : _a.width) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom;
        const heightMode = (_c = (_b = setting.autoProps) === null || _b === void 0 ? void 0 : _b.height) !== null && _c !== void 0 ? _c : jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom;
        const keepAspectRatio = setting.heightMode === 'ratio';
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'column-item-setting', css: this.getStyle() },
            !isLockLayout && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingSection, { role: 'group', title: this.formatMessage('size'), "aria-label": this.formatMessage('size') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { role: 'group', label: this.formatMessage('width'), "aria-label": this.formatMessage('width') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: inputStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__.SizeEditor, { label: 'W', mode: isAutoWidth ? jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch : jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom, sizeModes: widthModes, value: bbox === null || bbox === void 0 ? void 0 : bbox.width, availableUnits: availableWidthUnits, onChange: value => { this.updateBBox('width', value); }, onModeChange: this.updateWidthMode }))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { className: 'mt-0', label: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Tooltip, { title: this.formatMessage('keepAspectRatio'), placement: 'bottom' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { size: 'sm', type: 'tertiary', className: 'ml-1', icon: true, onClick: this.toggleHeightMode, "aria-pressed": keepAspectRatio }, keepAspectRatio ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_7__.LockOutlined, { size: 's' }) : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_unlock__WEBPACK_IMPORTED_MODULE_8__.UnlockOutlined, { size: 's' }))) }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { role: 'group', className: 'mt-0', label: this.formatMessage('height'), "aria-label": this.formatMessage('height') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: inputStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__.SizeEditor, { label: 'H', mode: heightMode || jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom, sizeModes: supportAutoSize ? heightModes : heightModesWithoutAuto, value: bbox.height, availableUnits: availableHeightUnits, onChange: value => { this.updateBBox('height', value); }, onModeChange: this.updateHeightMode, disabled: keepAspectRatio }))),
                    keepAspectRatio &&
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { label: this.formatMessage('aspectRatio'), "aria-label": this.formatMessage('aspectRatio') },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_2__.InputRatio, { value: setting.aspectRatio, style: { width: 100 }, onChange: this.updateAspectRatio })),
                    !isAutoWidth && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { label: this.formatMessage('align') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Select, { "aria-label": this.formatMessage('align'), className: 'align-select', value: (_d = style.alignSelf) !== null && _d !== void 0 ? _d : 'flex-start', onChange: this.updateAlignSelf, css: inputStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'flex-start' }, this.formatMessage('start')),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'flex-end' }, this.formatMessage('end')),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'center' }, this.formatMessage('center')))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_6__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, setting: setting, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage }))),
            (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget || layoutItem.sectionId) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_5__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, isSection: layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, style: this.props.style, onStyleChange: this.props.onStyleChange, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage }))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/builder/dnd-helper.ts":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/builder/dnd-helper.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calInsertPositionForColumn: () => (/* binding */ calInsertPositionForColumn)
/* harmony export */ });
function calInsertPositionForColumn(boundingRect, itemRect, childRects) {
    const centerY = itemRect.top + itemRect.height / 2;
    let result;
    let refId;
    let found = false;
    childRects.some((rect, i) => {
        const rectY = rect.top + rect.height / 2;
        if (rectY > centerY) {
            if (i === 0) { // insert before the first item
                result = rect.top / 2;
            }
            else { // insert between this and previous one
                const previousItem = childRects[i - 1];
                result = (rect.top + previousItem.top + previousItem.height) / 2;
            }
            found = true;
            refId = rect.id;
        }
        return found;
    });
    if (!found) { // insert after the last one
        const lastItem = childRects[childRects.length - 1];
        result = (lastItem.top + lastItem.height + boundingRect.height) / 2;
    }
    return {
        refId,
        insertY: result
    };
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/builder/layout-item.tsx":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/builder/layout-item.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColumnItem: () => (/* binding */ ColumnItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_layout_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/layout-item */ "./jimu-layouts/lib/builder/layout-item.tsx");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/column-layout/common/util.ts");
/** @jsx jsx */





class ColumnItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.state = {
            isResizing: false,
            dw: 0,
            dh: 0
        };
        this.onResizeStart = (id, initW, initH) => {
            this.initWidth = initW;
            this.initHeight = initH;
            this.props.onResizeStart(id);
            this.setState({
                isResizing: true
            });
        };
        this.onResizing = (id, x, y, dw, dh) => {
            this.props.onResizing(id, x, y, dw, dh);
            this.setState({
                dw,
                dh,
                isResizing: true
            });
        };
        this.onResizeEnd = (id, x, y, dw, dh, shiftKey) => {
            const { layoutItem } = this.props;
            this.props.onResizeEnd(id, x, y, dw, dh, layoutItem);
            this.setState({
                isResizing: false,
                dw: 0,
                dh: 0
            });
        };
    }
    isStretchInCrossAxis() {
        const { layoutItem } = this.props;
        return _common_util__WEBPACK_IMPORTED_MODULE_4__.isStretchInCrossAxis(layoutItem);
    }
    calHeight(itemSetting, bbox) {
        return _common_util__WEBPACK_IMPORTED_MODULE_4__.calHeight(itemSetting, bbox);
    }
    getStyle(layoutSetting, isStretch) {
        const { layoutItem } = this.props;
        const { dw, dh, isResizing } = this.state;
        const bbox = layoutItem.bbox || {};
        const style = this.calHeight(layoutSetting, bbox);
        if (isStretch) {
            style.width = 'auto';
        }
        else {
            style.width = bbox.width;
        }
        if (isResizing && (dw || dh)) {
            style.height = this.initHeight + dh;
            style.width = this.initWidth + dw;
        }
        this.autoHeight = style.height === 'auto';
        return _common_util__WEBPACK_IMPORTED_MODULE_4__.getItemStyle(style, layoutSetting, isStretch);
    }
    render() {
        var _a, _b;
        const { layoutId, layoutItem, draggable, resizable, selectable, showDefaultTools } = this.props;
        if (!layoutItem || layoutItem.isPending) {
            return null;
        }
        const layoutSetting = layoutItem.setting || {};
        const heightMode = (_b = (_a = layoutSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom;
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('flexbox-layout-item', { 'd-flex': heightMode !== _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto });
        const isStretch = this.isStretchInCrossAxis();
        const keepAspectRatio = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.shouldUseAspectRatio(layoutSetting);
        const ratio = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.parseAspectRatio(layoutSetting.aspectRatio);
        const oneByOneAnimationProps = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.handleOnebyOneAnimation(this.props);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_layout_item__WEBPACK_IMPORTED_MODULE_3__["default"], Object.assign({ css: this.getStyle(layoutSetting, isStretch), layoutId: layoutId, layoutItemId: layoutItem.id, onResizeStart: this.onResizeStart, onResizing: this.onResizing, onResizeEnd: this.onResizeEnd, left: !isStretch, right: !isStretch, top: false, bottom: heightMode === _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom && !keepAspectRatio, draggable: draggable, resizable: resizable, selectable: selectable, showDefaultTools: showDefaultTools, onClick: this.props.onClick, className: mergedClass, forceAspectRatio: keepAspectRatio, aspectRatio: ratio, autoHeight: this.autoHeight }, oneByOneAnimationProps)));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/builder/layout-service.ts":
/*!******************************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/builder/layout-service.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColumnLayoutService: () => (/* binding */ ColumnLayoutService)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/menu/screen-menu */ "./jimu-layouts/lib/builder/menu/screen-menu.tsx");






const commonMenu = [_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.duplicateMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.floatingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.pendingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.deleteMenuItem];
const sectionMenu = [].concat(_builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__.sectionMenuItems, commonMenu);
class ColumnLayoutService extends jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.BaseLayoutService {
    removeItemFromOrder(appConfig, layoutInfo) {
        const { layoutId, layoutItemId } = layoutInfo;
        const layoutJson = appConfig.layouts[layoutId];
        // remove it from order list
        let order = [].concat(layoutJson.order);
        order = order.filter(itemId => itemId !== layoutItemId);
        return appConfig.setIn(['layouts', layoutId, 'order'], order);
    }
    afterItemMoved(appConfig, layoutInfo) {
        return this.removeItemFromOrder(appConfig, layoutInfo);
    }
    afterItemRemoved(appConfig, layoutInfo) {
        return this.removeItemFromOrder(appConfig, layoutInfo);
    }
    duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context) {
        const result = super.duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context);
        let updatedAppConfig = result[0];
        const newItemId = result[1];
        // maintain order
        const layoutJson = updatedAppConfig.layouts[layoutInfo.layoutId];
        const order = [].concat(layoutJson.order);
        const index = order.indexOf(layoutInfo.layoutItemId);
        order.splice(index, 1, layoutInfo.layoutItemId, newItemId);
        updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutInfo.layoutId, 'order'], order);
        return [updatedAppConfig, newItemId];
    }
    getTocStructure(appConfig, layoutId) {
        var _a;
        const layoutJson = appConfig.layouts[layoutId];
        const sizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode();
        if (((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.order) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            const order = [].concat(layoutJson.order);
            return order.filter(itemId => {
                const item = layoutJson.content[itemId];
                return !item.isPending;
            }).map((layoutItemId) => {
                const item = layoutJson.content[layoutItemId];
                const service = new jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.ContentServiceWrapper(appConfig, item);
                return service.toTocNode({ layoutId, layoutItemId }, sizeMode);
            });
        }
        return [];
    }
    processAfterItemAdded(appConfig, draggingItem, layoutInfo, currentSizeMode, containerRect, itemRect, insertIndex) {
        var _a, _b;
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        let bbox = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.replaceBoundingBox(null, itemRect, containerRect);
        // only width and height are necessary
        bbox = bbox.without('left').without('top').without('right').without('bottom');
        appConfigAction
            .editLayoutItemProperty(layoutInfo, 'bbox', bbox)
            .adjustOrderOfItem(layoutInfo, insertIndex);
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfig, layoutInfo);
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            const widgetJson = appConfig.widgets[layoutItem.widgetId];
            if ((_b = (_a = widgetJson.manifest) === null || _a === void 0 ? void 0 : _a.defaultSize) === null || _b === void 0 ? void 0 : _b.autoHeight) {
                appConfigAction.editLayoutItemProperty(layoutInfo, 'setting.autoProps.height', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto);
            }
        }
        return appConfigAction.appConfig;
    }
    getToolItems(appConfig, layoutInfo, type) {
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'view') {
            return _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__.viewMenuItems;
        }
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'screen') {
            return _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_5__.screenMenuItems;
        }
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfig, layoutInfo);
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return sectionMenu;
        }
        return commonMenu;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/builder/layout.tsx":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/builder/layout.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _dnd_helper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dnd-helper */ "./jimu-layouts/lib/column-layout/builder/dnd-helper.ts");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/column-layout/default-setting.ts");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/column-layout/builder/layout-item.tsx");
/* harmony import */ var _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../builder/interactive/canvas-pane */ "./jimu-layouts/lib/builder/interactive/canvas-pane.ts");
/* harmony import */ var _common_style__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/style */ "./jimu-layouts/lib/column-layout/common/style.ts");
/** @jsx jsx */











const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  bottom: 0;
  top: 0;
  right: 0;
  background: transparent;
`;
const guideOverlay = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  ${dropareaStyle};
  z-index: 20;
  pointer-events: none;
`;
const dropIndicatorSize = 10;
class Layout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            isDragover: false
        };
        this.handleItemResizing = () => { };
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.autoBindHandlers(this, [
            'handleItemResizeStart',
            'handleItemResizing',
            'handleItemResizeEnd',
            'handleDrop',
            'handleDragOver',
            'handleDragEnter',
            'handleDragLeave',
            'handleToggleDragoverEffect'
        ]);
    }
    componentDidMount() {
        this.canvasPane = new _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_9__.CanvasPane(this.canvasRef);
        this.canvasPane.setSize(this.ref.clientWidth, this.ref.clientHeight);
    }
    componentDidUpdate() {
        this.canvasPane.setSize(this.ref.clientWidth, this.ref.clientHeight);
    }
    handleItemResizeStart(id) {
        const { layout } = this.props;
        this.domRect = this.ref.getBoundingClientRect();
        const draggingChild = this.ref.querySelector(`div.exb-rnd[data-layoutid="${layout.id}"][data-layoutitemid="${id}"]`);
        const rect = draggingChild.getBoundingClientRect();
        this.resizingRect = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.relativeClientRect(rect, this.domRect);
    }
    handleItemResizeEnd(id, x, y, dw, dh, layoutItem) {
        const { layout } = this.props;
        const bbox = layout.content[id].bbox;
        let width;
        if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(bbox.width)) {
            width = `${((this.resizingRect.width + dw) * 100 / this.domRect.width).toFixed(4)}%`;
        }
        else {
            width = `${Math.round(this.resizingRect.width + dw)}px`;
        }
        const newPos = {
            width,
            height: Math.round(this.resizingRect.height + dh)
        };
        this.childRects = [];
        this.domRect = null;
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        appConfigAction
            .editLayoutItemProperty({
            layoutId: this.props.layout.id,
            layoutItemId: id
        }, 'bbox', newPos)
            .exec();
    }
    handleDragOver(draggingItem, draggingElement, containerRect, itemRect) {
        var _a;
        let rect = itemRect;
        this.canvasPane.clear();
        if (((_a = this.childRects) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            const { insertY, refId } = (0,_dnd_helper__WEBPACK_IMPORTED_MODULE_6__.calInsertPositionForColumn)(containerRect, rect, this.childRects);
            this.referenceId = refId;
            rect = {
                top: insertY - dropIndicatorSize / 2 + this.ref.scrollTop,
                width: containerRect.width - dropIndicatorSize,
                left: dropIndicatorSize / 2,
                height: dropIndicatorSize
            };
        }
        else {
            rect = {
                top: containerRect.height / 2 - dropIndicatorSize / 2,
                width: containerRect.width - dropIndicatorSize,
                left: dropIndicatorSize / 2,
                height: dropIndicatorSize
            };
        }
        this.canvasPane.setColor(jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(this.builderTheme.colors.palette.primary[700], 1));
        this.canvasPane.drawRect(rect);
    }
    handleToggleDragoverEffect(value) {
        if (value) {
            this.referenceId = null;
            this.collectBounds(null);
        }
        this.setState({
            isDragover: value
        });
    }
    handleDragEnter() { }
    handleDragLeave() { }
    handleDrop(draggingItem, containerRect, itemRect) {
        this.canvasPane.clear();
        const { layout } = this.props;
        let insertIndex = 0;
        if (this.referenceId != null) {
            insertIndex = layout.order.indexOf(this.referenceId);
        }
        else if (layout.order != null) {
            insertIndex = layout.order.length;
        }
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__.addItemToLayout)(appConfigAction.appConfig, draggingItem, layout.id).then((result) => {
            const { layoutInfo, updatedAppConfig } = result;
            const service = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout);
            const outAppConfig = service.processAfterItemAdded(updatedAppConfig, draggingItem, layoutInfo, null, containerRect, itemRect, insertIndex);
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(outAppConfig, layoutInfo));
        }).finally(null);
        this.referenceId = null;
        this.childRects = [];
    }
    collectBounds(id) {
        const { layout } = this.props;
        this.childRects = [];
        this.domRect = this.ref.getBoundingClientRect();
        const draggableChildren = this.ref.parentNode.querySelectorAll(`div[data-layoutid="${layout.id}"] > .trail-container > div.exb-rnd`);
        if ((draggableChildren === null || draggableChildren === void 0 ? void 0 : draggableChildren.length) > 0) {
            draggableChildren.forEach((node) => {
                const itemId = node.getAttribute('data-layoutitemid');
                if (id !== itemId && layout.order.includes(itemId)) {
                    const rect = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.relativeClientRect(node.getBoundingClientRect(), this.domRect);
                    rect.id = itemId;
                    this.childRects.push(rect);
                }
            });
        }
        return this.childRects.sort((a, b) => a.top - b.top);
    }
    createItem(itemId, index, layoutSetting) {
        const { layout, itemDraggable, itemResizable, itemSelectable, showDefaultTools } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_8__.ColumnItem, { key: itemId, index: index, space: layoutSetting.space, layoutId: layout.id, layoutItemId: itemId, layoutItem: layout.content[itemId], draggable: itemDraggable, resizable: itemResizable, selectable: itemSelectable, showDefaultTools: showDefaultTools, onResizeStart: this.handleItemResizeStart, onResizing: this.handleItemResizing, onResizeEnd: this.handleItemResizeEnd }));
    }
    isEmpty() {
        var _a;
        const { layout } = this.props;
        const content = (_a = layout.order) !== null && _a !== void 0 ? _a : [];
        const hasSomethingToRender = content.length > 0 && content.some(id => {
            const layoutItem = layout.content[id];
            return !layoutItem.isPending;
        });
        return !hasSomethingToRender;
    }
    render() {
        var _a;
        const { layout, className } = this.props;
        const content = (_a = layout.order) !== null && _a !== void 0 ? _a : [];
        const layoutSetting = Object.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_COLUMN_LAYOUT_SETTING, layout.setting);
        const isEmpty = this.isEmpty();
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.PageContext.Consumer, null, (pageContext) => {
            this.builderTheme = pageContext.builderTheme;
            this.theme = pageContext.theme;
            const mergedStyle = {
                position: 'relative',
                minWidth: layoutSetting.min,
                padding: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.styleUtils.toCSSPadding(layoutSetting.padding)
            };
            const outClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout column-layout', className);
            const guideVisibleStyle = {
                display: this.state.isDragover ? 'block' : 'none'
            };
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: outClass, ref: (el) => (this.ref = el), style: mergedStyle, "data-layoutid": layout.id },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: true, layoutId: layout.id } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: layout.id, className: 'trail-container d-flex flex-column w-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                    position: ${isEmpty ? 'absolute' : null};
                    ${(0,_common_style__WEBPACK_IMPORTED_MODULE_10__.getLayoutStyle)(layoutSetting)};
                  ` },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_4__.DropArea, { css: dropareaStyle, layouts: this.props.layouts, highlightDragover: true, onDragEnter: this.handleDragEnter, onDragLeave: this.handleDragLeave, onDragOver: this.handleDragOver, onDrop: this.handleDrop, onToggleDragoverEffect: this.handleToggleDragoverEffect }),
                        content.map((layoutItem, index) => this.createItem(layoutItem, index, layoutSetting)))),
                isEmpty && this.props.children,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas", { css: guideOverlay, style: guideVisibleStyle, ref: (el) => (this.canvasRef = el) })));
        }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.mapStateToLayoutProps)(Layout));


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/common/style.ts":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/common/style.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getLayoutStyle: () => (/* binding */ getLayoutStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const getLayoutStyle = (layoutSetting) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  height: 100%;
  overflow-x: hidden;
  justify-content: ${layoutSetting.justifyContent};
  overflow-y: auto !important;
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
  &::-webkit-scrollbar {
    display: none;  /* Safari and Chrome */
  }
  &:hover {
    -ms-overflow-style: auto;  /* Internet Explorer 10+ */
    scrollbar-width: auto;  /* Firefox */
    &::-webkit-scrollbar {
      display: block;  /* Safari and Chrome */
    }
  }
  & > div.flexbox-layout-item ~ div.flexbox-layout-item {
    margin-top: ${layoutSetting.space}px;
  }
`;


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/common/util.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/common/util.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calHeight: () => (/* binding */ calHeight),
/* harmony export */   getItemStyle: () => (/* binding */ getItemStyle),
/* harmony export */   isStretchInCrossAxis: () => (/* binding */ isStretchInCrossAxis)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");



function calHeight(itemSetting, bbox) {
    var _a, _b;
    if (((_a = itemSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) === _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto || itemSetting.heightMode === 'ratio') {
        if (itemSetting.heightMode === 'ratio') {
            return { height: 'auto', flex: '0 0 auto' };
        }
        return { height: 'auto' };
    }
    if (((_b = itemSetting.autoProps) === null || _b === void 0 ? void 0 : _b.height) === _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch || itemSetting.heightMode === 'fit') {
        return { flex: '1 1 auto' };
    }
    return { height: bbox.height, flexShrink: 0 };
}
function isStretchInCrossAxis(layoutItem) {
    var _a, _b;
    return ((_b = (_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.autoProps) === null || _b === void 0 ? void 0 : _b.width) !== _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom;
}
function getItemStyle(style, layoutSetting, isStretch) {
    var _a, _b, _c;
    const isAutoHeight = ((_a = layoutSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) === _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    align-self: ${isStretch ? 'stretch' : (_c = (_b = layoutSetting.style) === null || _b === void 0 ? void 0 : _b.alignSelf) !== null && _c !== void 0 ? _c : 'auto'};
    width: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style, 'width')};
    height: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style, 'height')};
    flex: ${style.flex};
    flex-shrink: ${style.flexShrink};
    min-height: ${isAutoHeight ? 'unset' : null};
  `;
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/default-setting.ts":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/default-setting.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_COLUMN_LAYOUT_SETTING: () => (/* binding */ DEFAULT_COLUMN_LAYOUT_SETTING)
/* harmony export */ });
const DEFAULT_COLUMN_LAYOUT_SETTING = {
    min: 16,
    space: 10
};


/***/ }),

/***/ "./jimu-layouts/lib/common/page-util.ts":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/common/page-util.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_FOOTER_HEIGHT: () => (/* binding */ DEFAULT_FOOTER_HEIGHT),
/* harmony export */   DEFAULT_HEADER_HEIGHT: () => (/* binding */ DEFAULT_HEADER_HEIGHT),
/* harmony export */   computePageHeight: () => (/* binding */ computePageHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const DEFAULT_HEADER_HEIGHT = 75;
const DEFAULT_FOOTER_HEIGHT = 75;
function computePageHeight(pageJson, headerFooterHeight) {
    if (pageJson) {
        const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
        const pageLayoutId = pageJson.layout[appConfig.mainSizeMode];
        const layout = appConfig.layouts[pageLayoutId];
        // only grid page need specific height
        if ((layout === null || layout === void 0 ? void 0 : layout.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout) {
            if (headerFooterHeight > 0) {
                return `calc(100% - ${headerFooterHeight}px)`;
            }
            return '100%';
        }
    }
    return 'auto';
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/builder/group.tsx":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/builder/group.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ControllerPanelGroup: () => (/* binding */ ControllerPanelGroup)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ "./jimu-layouts/lib/controller-panel/util.ts");
/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./jimu-layouts/lib/controller-panel/builder/layout.tsx");
/** @jsx jsx */



function ControllerPanelGroup(props) {
    const { pageId } = props;
    const controllerInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return (0,_util__WEBPACK_IMPORTED_MODULE_1__.findPageRelatedControllerIds)(state.appConfig, pageId, state.browserSizeMode);
    });
    const controllerIds = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => controllerInfo.split(',').filter(id => id !== ''), [controllerInfo]);
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    // selected controllerId and widgetId
    const [controllerId, descendantWidgetId] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        if (!isDesignMode) { // ignore this in live view mode
            return [null, null];
        }
        const selection = state.appRuntimeInfo.selection;
        if (!selection) {
            return [null, null];
        }
        const { layoutId, layoutItemId } = selection;
        const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
        // 1. a controller widget with fixed arrangement is selected
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            const widgetJson = state.appConfig.widgets[layoutItem.widgetId];
            if ((widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.uri) === 'widgets/common/controller/' && ((_a = state.appConfig.controllerPanels) === null || _a === void 0 ? void 0 : _a[layoutItem.widgetId])) {
                return [layoutItem.widgetId, null];
            }
        }
        const findParentLayoutInfo = (parent) => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            switch (parent === null || parent === void 0 ? void 0 : parent.type) {
                case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View:
                    {
                        const viewId = parent.id;
                        const sectionId = state.appConfig.views[viewId].parent;
                        const sectionJson = state.appConfig.sections[sectionId];
                        const layoutInfo = ((_b = (_a = sectionJson.parent) === null || _a === void 0 ? void 0 : _a[state.browserSizeMode]) === null || _b === void 0 ? void 0 : _b[0]) || ((_d = (_c = sectionJson.parent) === null || _c === void 0 ? void 0 : _c[state.appConfig.mainSizeMode]) === null || _d === void 0 ? void 0 : _d[0]);
                        const layout = state.appConfig.layouts[layoutInfo === null || layoutInfo === void 0 ? void 0 : layoutInfo.layoutId];
                        return layout === null || layout === void 0 ? void 0 : layout.parent;
                    }
                case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget:
                    {
                        const wId = parent.id;
                        const wJson = state.appConfig.widgets[wId];
                        const layoutInfo = ((_f = (_e = wJson.parent) === null || _e === void 0 ? void 0 : _e[state.browserSizeMode]) === null || _f === void 0 ? void 0 : _f[0]) || ((_h = (_g = wJson.parent) === null || _g === void 0 ? void 0 : _g[state.appConfig.mainSizeMode]) === null || _h === void 0 ? void 0 : _h[0]);
                        const layout = state.appConfig.layouts[layoutInfo === null || layoutInfo === void 0 ? void 0 : layoutInfo.layoutId];
                        return layout === null || layout === void 0 ? void 0 : layout.parent;
                    }
                default:
                    return null;
            }
        };
        // 2. a widget in the conotroller widget is selected, and the controller is use fixed arrangement
        const layout = state.appConfig.layouts[layoutId];
        let parentInfo = layout.parent;
        while (parentInfo) {
            if (parentInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget) {
                const widgetJson = state.appConfig.widgets[parentInfo.id];
                if ((widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.uri) === 'widgets/common/controller/' && ((_b = state.appConfig.controllerPanels) === null || _b === void 0 ? void 0 : _b[widgetJson.id])) {
                    return [parentInfo.id, layoutItem.id];
                }
            }
            // find upward
            parentInfo = findParentLayoutInfo(parentInfo);
        }
        return [null, null];
    }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.shallowEqual);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        var _a;
        if (controllerId) {
            const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
            const openedWidgets = Object.keys((_a = state.widgetsRuntimeInfo) !== null && _a !== void 0 ? _a : {}).filter(wid => {
                const info = state.widgetsRuntimeInfo[wid];
                return info.state === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetState.Opened && info.controllerWidgetId !== controllerId;
            });
            if (openedWidgets.length > 0) {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.closeWidgets(openedWidgets));
            }
        }
    }, [controllerId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        var _a;
        // close all opened widgets when design mode changes
        const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
        const openedWidgets = Object.keys((_a = state.widgetsRuntimeInfo) !== null && _a !== void 0 ? _a : {}).filter(widgetId => {
            const info = state.widgetsRuntimeInfo[widgetId];
            return info.state === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetState.Opened;
        });
        if (openedWidgets.length > 0) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.closeWidgets(openedWidgets));
        }
    }, [isDesignMode]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null, controllerIds.map((id) => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_2__.ControllerPanelBuilder, { key: id, isDesignMode: isDesignMode, selected: controllerId === id && descendantWidgetId === null, innerSelected: controllerId === id && descendantWidgetId != null, controllerId: id })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/builder/layout.tsx":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/builder/layout.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ControllerPanelBuilder: () => (/* binding */ ControllerPanelBuilder)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_resize_handlers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/resize-handlers */ "./jimu-layouts/lib/builder/resize-handlers.tsx");
/* harmony import */ var _builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./panel */ "./jimu-layouts/lib/controller-panel/builder/panel.tsx");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util */ "./jimu-layouts/lib/controller-panel/util.ts");
/* harmony import */ var _use_animation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./use-animation */ "./jimu-layouts/lib/controller-panel/builder/use-animation.tsx");
/** @jsx jsx */










const { animated } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.spring;
function updateControllerStyle(controllerId, dx, dy, dw, dh, width, height) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_6__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    let originStyle = appConfig.controllerPanels[controllerId];
    if (originStyle.widthMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch) {
        if (dw !== 0) {
            if (dx !== 0) { // update left
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(originStyle.left)) {
                    originStyle = originStyle.set('left', `${(parseFloat(originStyle.left) + dx * 100 / window.innerWidth).toFixed(2)}%`);
                }
                else {
                    originStyle = originStyle.set('left', `${Math.round(parseFloat(originStyle.left) + dx)}px`);
                }
            }
            else { // update right
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(originStyle.right)) {
                    originStyle = originStyle.set('right', `${(parseFloat(originStyle.right) - dw * 100 / window.innerWidth).toFixed(2)}%`);
                }
                else {
                    originStyle = originStyle.set('right', `${Math.round(parseFloat(originStyle.right) - dw)}px`);
                }
            }
        }
    }
    else {
        if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(originStyle.width)) {
            originStyle = originStyle.set('width', `${(width * 100 / window.innerWidth).toFixed(2)}%`);
        }
        else {
            originStyle = originStyle.set('width', `${Math.round(width)}px`);
        }
    }
    if (originStyle.heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch) {
        if (dh !== 0) {
            if (dy !== 0) { // update top
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(originStyle.top)) {
                    originStyle = originStyle.set('top', `${(parseFloat(originStyle.top) + dy * 100 / window.innerHeight).toFixed(2)}%`);
                }
                else {
                    originStyle = originStyle.set('top', `${Math.round(parseFloat(originStyle.top) + dy)}px`);
                }
            }
            else { // update bottom
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(originStyle.bottom)) {
                    originStyle = originStyle.set('bottom', `${(parseFloat(originStyle.bottom) - dh * 100 / window.innerHeight).toFixed(2)}%`);
                }
                else {
                    originStyle = originStyle.set('bottom', `${Math.round(parseFloat(originStyle.bottom) - dh)}px`);
                }
            }
        }
    }
    else {
        if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(originStyle.height)) {
            originStyle = originStyle.set('height', `${(height * 100 / window.innerHeight).toFixed(2)}%`);
        }
        else {
            originStyle = originStyle.set('height', `${Math.round(height)}px`);
        }
    }
    appConfigAction.editControllerPanel(controllerId, originStyle).exec();
}
function ControllerPanelBuilder(props) {
    var _a, _b, _c, _d;
    const { controllerId, selected, innerSelected, isDesignMode } = props;
    const ref = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [isResizing, setIsResizing] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [size, setSize] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState();
    const [minimized, setMinimized] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const innerLayoutId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        // find the layoutInfo of the opened widget
        const controllerJson = state.appConfig.widgets[controllerId];
        const layoutName = controllerJson.manifest.layouts[0].name;
        const sizeModeLayouts = controllerJson.layouts[layoutName];
        return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(sizeModeLayouts, state.browserSizeMode, state.appConfig.mainSizeMode);
    });
    const items = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        // find the items of the opened widget
        const layout = state.appConfig.layouts[innerLayoutId];
        const itemIds = Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {})
            .filter(itemId => {
            const layoutItem = layout.content[itemId];
            return (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.widgetId) != null && !layoutItem.isPending;
        });
        itemIds.sort();
        return itemIds.join(',');
    });
    const hasItemOpened = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        if (isDesignMode) {
            return false;
        }
        const openedWidgets = Object.keys((_a = state.widgetsRuntimeInfo) !== null && _a !== void 0 ? _a : {}).filter(widgetId => {
            const info = state.widgetsRuntimeInfo[widgetId];
            return info.state === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetState.Opened;
        });
        // find the items of the opened widget
        const layout = state.appConfig.layouts[innerLayoutId];
        return Object.keys((_b = layout.content) !== null && _b !== void 0 ? _b : {})
            .some(itemId => {
            const layoutItem = layout.content[itemId];
            return (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.widgetId) != null && !layoutItem.isPending && openedWidgets.includes(layoutItem.widgetId);
        });
    });
    const itemIdList = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => items.split(',').filter(id => id !== ''), [items]);
    const panelJson = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.controllerPanels[controllerId];
    });
    const animationStyle = (0,_use_animation__WEBPACK_IMPORTED_MODULE_9__.useAnimation)({ controllerId });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        let width;
        let height;
        const onResizeStart = (_, initWidth, initHeight) => {
            width = initWidth;
            height = initHeight;
            setIsResizing(true);
            setSize({ dx: 0, dy: 0, dw: 0, dh: 0, width: initWidth, height: initHeight });
        };
        const onResizing = (_, dx, dy, dw, dh) => {
            setSize({ dx, dy, dw, dh, width: width + dw, height: height + dh });
        };
        const onResizeEnd = (_, dx, dy, dw, dh) => {
            setIsResizing(false);
            updateControllerStyle(controllerId, dx, dy, dw, dh, width + dw, height + dh);
        };
        let interactable;
        if (ref.current) {
            const interactable = (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(ref.current).origin('parent');
            (0,_builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_5__.bindResizeHandler)(interactable, {
                layoutItemId: 'controller',
                restrictEdges: true,
                onResizeStart,
                onResizing,
                onResizeEnd
            });
        }
        return () => {
            interactable === null || interactable === void 0 ? void 0 : interactable.unset();
        };
    }, [controllerId]);
    const handleClick = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        e.stopPropagation();
    }, []);
    const toggleMinimized = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setMinimized(!minimized);
    }, [minimized]);
    const handleClose = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e, widgetId) => {
        e.stopPropagation();
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.closeWidget(widgetId));
    }, []);
    const visible = isDesignMode ? (selected || innerSelected) : hasItemOpened;
    const getStyle = () => {
        const theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_2__.getTheme2)();
        if (isResizing) {
            let hPos;
            let vPos;
            if (panelJson.widthMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch) {
                hPos = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          left: calc(${panelJson.left} + ${size.dx}px);
          right: ${size.dx === 0 ? `calc(${panelJson.right} - ${size.dw}px)` : panelJson.right};
        `;
            }
            if (panelJson.heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch) {
                vPos = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          top: calc(${panelJson.top} + ${size.dy}px);
          bottom: ${size.dy === 0 ? `calc(${panelJson.bottom} - ${size.dh}px)` : panelJson.bottom};
        `;
            }
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        ${(0,_util__WEBPACK_IMPORTED_MODULE_8__.convertToStyle)(panelJson)};
        display: ${visible ? 'block' : 'none'};
        width: ${panelJson.widthMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch ? size.width + 'px' : 'auto'};
        height: ${panelJson.heightMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch ? size.height + 'px' : 'auto'};
        ${hPos}
        ${vPos}
        border: ${selected ? '1px solid var(--primary-600)' : 'none'};
        background: ${selected ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.palette.primary[600], 0.2) : 'transparent'};
      `;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      ${(0,_util__WEBPACK_IMPORTED_MODULE_8__.convertToStyle)(panelJson)};
      display: ${visible ? 'block' : 'none'};
      height: ${minimized ? '36px' : panelJson === null || panelJson === void 0 ? void 0 : panelJson.height};
      border: ${selected ? '1px solid var(--primary-600)' : 'none'};
      transition: height 0.3s ease-in-out;
      background: ${selected ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.palette.primary[600], 0.2) : 'transparent'};
    `;
    };
    let mergedStyle = animationStyle;
    const panelTransform = (0,_util__WEBPACK_IMPORTED_MODULE_8__.panelTransformStyle)(panelJson);
    if (panelTransform != null) {
        mergedStyle = Object.assign({}, {
            transform: panelTransform
        }, animationStyle);
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(animated.div, { ref: ref, style: mergedStyle, css: getStyle(), onClick: handleClick, className: 'panel-container' },
        selected && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_resize_handlers__WEBPACK_IMPORTED_MODULE_4__.ResizeHandlers, { left: !((_a = panelJson === null || panelJson === void 0 ? void 0 : panelJson.position) === null || _a === void 0 ? void 0 : _a.includes('LEFT')) || panelJson.widthMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch, right: !((_b = panelJson === null || panelJson === void 0 ? void 0 : panelJson.position) === null || _b === void 0 ? void 0 : _b.includes('RIGHT')) || panelJson.widthMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch, top: !((_c = panelJson === null || panelJson === void 0 ? void 0 : panelJson.position) === null || _c === void 0 ? void 0 : _c.includes('TOP')) || panelJson.heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch, bottom: !((_d = panelJson === null || panelJson === void 0 ? void 0 : panelJson.position) === null || _d === void 0 ? void 0 : _d.includes('BOTTOM')) || panelJson.heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Stretch })),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null, itemIdList.map(itemId => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_panel__WEBPACK_IMPORTED_MODULE_7__.Panel, { key: itemId, controllerId: controllerId, layoutId: innerLayoutId, layoutItemId: itemId, minimized: minimized, onToggle: toggleMinimized, onClose: handleClose }))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/builder/panel.tsx":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/builder/panel.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Panel: () => (/* binding */ Panel)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var _builder_layout_item_toolbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/layout-item-toolbar */ "./jimu-layouts/lib/builder/layout-item-toolbar.tsx");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_outlined_directional_up_double__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/directional/up-double */ "./jimu-icons/outlined/directional/up-double.tsx");
/** @jsx jsx */






const { animated, useSpring } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.spring;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: relative;
  display: flex;
  background-color: var(--white);
  box-shadow: 0px 0px 10px 1px rgba(0, 0, 0, 0.2);
  .panel-header {
    background-color: var(--primary-600);
    color: var(--white);
    font-weight: 500;
    font-size: 0.875rem;
    height: 36px;
    .actions .jimu-btn {
      color: var(--primary-200);
      &:hover {
        color: var(--white);
      }
    }
  }
  .panel-content {
    position: relative;
    overflow: hidden;

    .widget-content {
      z-index: 0;
    }

    .widget-mask {
      position: absolute;
      background: transparent;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      z-index: 1;
    }
  }
`;
const modifiers = [
    {
        name: 'preventOverflow',
        enabled: true,
        options: {
            boundary: 'viewport',
            altAxis: true // allow the popper to overlap its reference element.
        }
    },
    {
        name: 'flip',
        enabled: true,
        options: {
            boundary: 'viewport',
            fallbackPlacements: (0,jimu_ui__WEBPACK_IMPORTED_MODULE_1__.getFallbackPlacementsModifier)(['top-start', 'bottom-start'], true).options.fallbackPlacements
        }
    }
];
function Panel(props) {
    const { layoutId, layoutItemId, controllerId, minimized, onClick, onToggle, onClose } = props;
    const [mounted, setMounted] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const ref = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useTranslation();
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const selection = state.appRuntimeInfo.selection;
        if (!selection) { // ignore this in live view mode
            return false;
        }
        if (layoutId === selection.layoutId && layoutItemId === selection.layoutItemId) {
            return true;
        }
        const nested = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.querySelector(`div.builder-layout-item[data-layoutid="${selection.layoutId}"][data-layoutitemid="${selection.layoutItemId}"]`);
        return nested != null;
    });
    const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
        return layoutItem.widgetId;
    });
    const hasEmbeddedLayout = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const widgetJson = state.appConfig.widgets[widgetId];
        return ((_b = (_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.hasEmbeddedLayout) && Object.keys((_c = widgetJson.layouts) !== null && _c !== void 0 ? _c : {}).length > 0;
    });
    const isFunctionalWidget = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return ((_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _a === void 0 ? void 0 : _a.widgetType) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout;
    });
    const supportInlineEditing = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_c = (_b = (_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.supportInlineEditing) !== null && _c !== void 0 ? _c : false;
    });
    const isInlineEditing = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const widgetRuntimeInfo = state.widgetsRuntimeInfo[widgetId];
        return supportInlineEditing && (widgetRuntimeInfo === null || widgetRuntimeInfo === void 0 ? void 0 : widgetRuntimeInfo.isInlineEditing);
    });
    const isOpen = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const info = (_a = state.widgetsRuntimeInfo) === null || _a === void 0 ? void 0 : _a[widgetId];
        return (info === null || info === void 0 ? void 0 : info.state) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetState.Opened;
    });
    const label = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.label;
    }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.shallowEqual);
    const widgetClassLoaded = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetRuntimeInfo = state.widgetsRuntimeInfo[widgetId];
        return (_a = widgetRuntimeInfo === null || widgetRuntimeInfo === void 0 ? void 0 : widgetRuntimeInfo.isClassLoaded) !== null && _a !== void 0 ? _a : false;
    });
    const effect = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const panelJson = state.appConfig.controllerPanels[controllerId];
        return panelJson.effect;
    });
    const animationObj = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a, _b;
        if ((effect === null || effect === void 0 ? void 0 : effect.type) && effect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAnimationEffect)(effect.type, {
                configType: (_a = effect.option) === null || _a === void 0 ? void 0 : _a.configType,
                direction: (_b = effect.option) === null || _b === void 0 ? void 0 : _b.direction
            });
        }
        return null;
    }, [effect]);
    const [effectProps, api] = useSpring(() => {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_ANIMATION_PROPS;
    }, [animationObj]);
    const handleClose = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        onClose(e, widgetId);
        // after panel closed, focus back to button
        const button = document.querySelector(`.widget-controller .avatar-card[data-widgetid='${widgetId}']`).querySelector('button');
        button === null || button === void 0 ? void 0 : button.focus();
    }, [widgetId, onClose]);
    (0,jimu_ui__WEBPACK_IMPORTED_MODULE_1__.useTrapFocusLoop)(ref, true, true, false, mounted && isOpen);
    const handleClick = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        var _a;
        e.stopPropagation();
        const selection = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection;
        if (!selection || selection.layoutId !== layoutId || selection.layoutItemId !== layoutItemId) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({ layoutId, layoutItemId }));
        }
        onClick === null || onClick === void 0 ? void 0 : onClick(e);
    }, [layoutId, layoutItemId, onClick]);
    /**
     * Enable inline editing mode for the widget
     *
     * @memberof LayoutItemInBuilder
     */
    const handleDoubleClick = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        e.stopPropagation();
        if (supportInlineEditing) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.setWidgetIsInlineEditingState(widgetId, true));
        }
    }, [widgetId, supportInlineEditing]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if ((isOpen || selected) && !mounted) { // load the class when this widget is opened the first time
            setMounted(true);
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetManager.getInstance()
                .loadWidgetClass(widgetId)
                .catch((err) => {
                console.log(err);
            });
        }
    }, [isOpen, selected, widgetId, mounted]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (isOpen && !isDesignMode && animationObj != null) {
            api.start(Object.assign(Object.assign({}, animationObj.animateProps()), { onRest: () => {
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        ref.current.style.clipPath = null; // eliminate clipPath to show box-shadow
                        ref.current.parentElement.style.clipPath = null;
                    });
                } }));
        }
    }, [api, isOpen, isDesignMode, animationObj]);
    let WidgetClass;
    const shouldRender = isDesignMode ? selected : isOpen;
    if (mounted && widgetClassLoaded) {
        WidgetClass = jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetManager.getInstance().getWidgetClass(widgetId);
    }
    const showMask = isDesignMode && !isInlineEditing && isFunctionalWidget && !hasEmbeddedLayout;
    const theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_4__.getTheme2)();
    const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(animated.div, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('controller-panel flex-column w-100 h-100', { 'd-none': !mounted || !shouldRender }), css: style, style: animationObj != null ? effectProps : null, onClick: handleClick, onDoubleClick: handleDoubleClick, ref: ref },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-header d-flex align-items-center flex-shrink-0 px-4' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'label d-flex align-items-center h-100' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate' }, label)),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'actions ml-auto d-flex align-items-center' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { className: 'p-0', icon: true, type: 'tertiary', size: 'sm', onClick: onToggle },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_up_double__WEBPACK_IMPORTED_MODULE_5__.UpDoubleOutlined, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              transform: rotate(${minimized ? 180 : 0}deg);
              transition: transform 0.3s ease-in-out;
            ` })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { className: 'p-0 ml-2', icon: true, type: 'tertiary', size: 'sm', onClick: handleClose },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__.CloseOutlined, null)))),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-content d-flex flex-grow-1' },
            !widgetClassLoaded && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.LoadingType.Donut }),
            WidgetClass && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 widget-content p-1' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(WidgetClass, { widgetId: widgetId, layoutId: layoutId, layoutItemId: layoutItemId }),
                    isDesignMode && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_layout_item_toolbar__WEBPACK_IMPORTED_MODULE_3__.LayoutItemToolbar, { layoutId: layoutId, layoutItem: layoutItem, refElement: ref.current, modifiers: modifiers, builderTheme: theme, formatMessage: translate, showDefaultTools: false }))))),
            showMask && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'widget-mask' }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/builder/use-animation.tsx":
/*!*********************************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/builder/use-animation.tsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAnimation: () => (/* binding */ useAnimation)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const { useSpring } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.spring;
function useAnimation(props) {
    const { controllerId } = props;
    const previewId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const animationPreview = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.animationPreview;
        if ((animationPreview === null || animationPreview === void 0 ? void 0 : animationPreview.controllerId) === controllerId) {
            return animationPreview.id;
        }
        return -1;
    });
    const effect = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const panelJson = state.appConfig.controllerPanels[controllerId];
        return panelJson.effect;
    });
    const animationObj = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a, _b;
        if ((effect === null || effect === void 0 ? void 0 : effect.type) && effect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAnimationEffect)(effect.type, {
                configType: (_a = effect.option) === null || _a === void 0 ? void 0 : _a.configType,
                direction: (_b = effect.option) === null || _b === void 0 ? void 0 : _b.direction
            });
        }
        return null;
    }, [effect]);
    const [effectProps, api] = useSpring(() => {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_ANIMATION_PROPS;
    }, [animationObj]);
    // animation caused by preview actions
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (previewId > 0 && animationObj != null) {
            api.start(Object.assign(Object.assign({}, animationObj.animateProps()), { onRest: () => {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.clearAnimationPreview());
                } }));
        }
    }, [api, previewId, animationObj]);
    return animationObj != null ? effectProps : null;
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/util.ts":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/util.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertToStyle: () => (/* binding */ convertToStyle),
/* harmony export */   findPageRelatedControllerIds: () => (/* binding */ findPageRelatedControllerIds),
/* harmony export */   panelTransformStyle: () => (/* binding */ panelTransformStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _search_contents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search/contents */ "./jimu-layouts/lib/search/contents.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");



function findPageRelatedControllerIds(appConfig, pageId, browserSizeMode) {
    var _a;
    const result = Object.keys((_a = appConfig.controllerPanels) !== null && _a !== void 0 ? _a : {}).filter(controllerId => {
        const rootInfo = (0,_search_contents__WEBPACK_IMPORTED_MODULE_1__.getContentRootContainerInfo)(appConfig, controllerId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, browserSizeMode);
        if (rootInfo == null) {
            return false;
        }
        if (rootInfo.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page) {
            return true;
        }
        return rootInfo.id === pageId;
    });
    result.sort();
    return result.join(',');
}
function panelTransformStyle(panelJson) {
    if (panelJson == null) {
        return null;
    }
    const { position, offsetX = 0, offsetY = 0 } = panelJson;
    let translate;
    if (panelJson.widthMode !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (offsetX !== 0) {
            translate = `translateX(${offsetX}px)`;
        }
        if (position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopCenter || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleCenter || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomCenter) {
            translate = translate != null ? `${translate} translateX(-50%)` : 'translateX(-50%)';
        }
    }
    if (panelJson.heightMode !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (offsetY !== 0) {
            translate = translate != null ? `${translate} translateY(${offsetY}px)` : `translateY(${offsetY}px)`;
        }
        if (position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleLeft || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleCenter || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleRight) {
            translate = translate != null ? `${translate} translateY(-50%)` : 'translateY(-50%)';
        }
    }
    return translate;
}
function convertToStyle(panelJson) {
    let posStyle;
    switch (panelJson === null || panelJson === void 0 ? void 0 : panelJson.position) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopLeft:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: 0; bottom: auto; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopRight:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: auto; bottom: auto; right: 0;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomLeft:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: auto; left: 0; bottom: 0; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomRight:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: auto; left: auto; bottom: 0; right: 0;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopCenter:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: 50%; bottom: auto; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomCenter:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: auto; left: 50%; bottom: 0; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleLeft:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 50%; left: 0; bottom: auto; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleRight:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 50%; left: auto; bottom: auto; right: 0;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleCenter:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 50%; left: 50%; bottom: auto; right: auto;`;
            break;
        default:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: 0; bottom: auto; right: auto;`;
            break;
    }
    let widthModeStyle;
    let heightModeStyle;
    if (panelJson.widthMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        widthModeStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width:auto;left:${panelJson.left};right:${panelJson.right};`;
    }
    if (panelJson.heightMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        heightModeStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `height:auto;top:${panelJson.top};bottom:${panelJson.bottom};`;
    }
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    position: fixed;
    ${posStyle}
    width: ${panelJson === null || panelJson === void 0 ? void 0 : panelJson.width};
    height: ${panelJson === null || panelJson === void 0 ? void 0 : panelJson.height};
    ${widthModeStyle};
    ${heightModeStyle}
    overflow: visible;
    z-index: 2;
  `;
}


/***/ }),

/***/ "./jimu-layouts/lib/default-common-setting.ts":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/default-common-setting.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_LAYOUT_ITEM_SETTING: () => (/* binding */ DEFAULT_LAYOUT_ITEM_SETTING)
/* harmony export */ });
const DEFAULT_LAYOUT_ITEM_SETTING = {
    order: 0
};


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/action-block.tsx":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/action-block.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionBlock: () => (/* binding */ ActionBlock)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-for-builder/templates */ "jimu-for-builder/templates");
/* harmony import */ var jimu_icons_outlined_application_template__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/application/template */ "./jimu-icons/outlined/application/template.tsx");
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/** @jsx jsx */







const buttonStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  pointer-events: all;
`;
function getStyle(builderTheme) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    position: relative;
    height: 200px;
    padding: 1rem;
    pointer-events: none;
    z-index: 1;
    .btn-text {
      line-height: 32px;
    }
    .btn {
      background: ${builderTheme.colors.palette.light[600]};
      &:hover {
        background: ${builderTheme.colors.palette.light[800]};
      }
    }
    .action-item {
      width: 32px;
    }
    .action-seprator {
      width: 300px;
      height: 1px;
      background-color: ${builderTheme.colors.palette.dark[800]};
    }
  `;
}
function ActionBlock(props) {
    const { pageContext, onPageTemplateSelected } = props;
    const { builderTheme, formatMessage, isHeader, isFooter } = pageContext;
    const [showTemplatePopper, setShowTemplatePopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const templateRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const show = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const lockLayout = (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false;
        const isDesignMode = state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
        return isDesignMode && !lockLayout;
    });
    const toggleTemplatePopper = e => {
        e.stopPropagation();
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            if (pageContext.isDialog) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: 'templateBlock', templateMethod: 'getWindowTemplates', onSelect: onPageTemplateSelected });
            }
            else {
                const name = isHeader ? 'getHeaderTemplates' : (isFooter ? 'getFooterTemplates' : 'getFullScreenPageTemplates');
                const templateType = name === 'getFullScreenPageTemplates' ? 'template' : 'templateBlock';
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: templateType, templateMethod: name, onSelect: onPageTemplateSelected });
            }
            return;
        }
        setShowTemplatePopper(!showTemplatePopper);
    };
    const closeTemplatePopover = () => {
        setShowTemplatePopper(false);
    };
    let tooltip;
    if (pageContext.isHeader) {
        tooltip = formatMessage('chooseHeaderTemplate');
    }
    else if (pageContext.isFooter) {
        tooltip = formatMessage('chooseFooterTemplate');
    }
    else {
        tooltip = formatMessage('chooseTemplate', {
            type: pageContext.isDialog
                ? formatMessage('dialog').toLocaleLowerCase()
                : formatMessage('page').toLocaleLowerCase()
        });
    }
    if (!show) {
        return null;
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-100 flex-column justify-content-center align-items-center', css: getStyle(builderTheme) },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex flex-column justify-content-center align-items-center' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_6__.ThemedTooltip, { placement: 'bottom', title: tooltip },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-item', ref: templateRef },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, onClick: toggleTemplatePopper, css: buttonStyle, className: 'rounded-circle' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_template__WEBPACK_IMPORTED_MODULE_5__.TemplateOutlined, { autoFlip: true, size: 'm', color: builderTheme.colors.palette.dark[800] })))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-seprator mt-4' }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("h5", { className: 'btn-text mt-2' }, formatMessage('dropWidgetToAdd'))),
        showTemplatePopper && !pageContext.isDialog && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: isHeader ? (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getHeaderTemplates)() : (isFooter ? (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getFooterTemplates)() : (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getFullScreenPageTemplates)(false)), referenceElement: templateRef.current, onItemSelect: onPageTemplateSelected, onClose: closeTemplatePopover })),
        showTemplatePopper && pageContext.isDialog && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getWindowTemplates)(false), referenceElement: templateRef.current, onItemSelect: onPageTemplateSelected, onClose: closeTemplatePopover }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/fixed-item-menu.tsx":
/*!*******************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/fixed-item-menu.tsx ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fixedItemMenu: () => (/* binding */ fixedItemMenu)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_icons_svg_outlined_gis_data_layer_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/gis/data-layer.svg */ "./jimu-icons/svg/outlined/gis/data-layer.svg");
/* harmony import */ var jimu_icons_svg_outlined_gis_data_layer_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_gis_data_layer_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_max_height_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/max-height.svg */ "./jimu-icons/svg/outlined/directional/max-height.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_max_height_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_max_height_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_directional_max_width_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/max-width.svg */ "./jimu-icons/svg/outlined/directional/max-width.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_max_width_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_max_width_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_directional_max_all_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/max-all.svg */ "./jimu-icons/svg/outlined/directional/max-all.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_max_all_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_max_all_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var jimu_icons_svg_outlined_directional_align_left_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/align-left.svg */ "./jimu-icons/svg/outlined/directional/align-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_align_left_svg__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_align_left_svg__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_left_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/snap-left.svg */ "./jimu-icons/svg/outlined/directional/snap-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_left_svg__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_snap_left_svg__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_right_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/snap-right.svg */ "./jimu-icons/svg/outlined/directional/snap-right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_right_svg__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_snap_right_svg__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_top_svg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/snap-top.svg */ "./jimu-icons/svg/outlined/directional/snap-top.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_top_svg__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_snap_top_svg__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_bottom_svg__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/snap-bottom.svg */ "./jimu-icons/svg/outlined/directional/snap-bottom.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_bottom_svg__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_snap_bottom_svg__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_horizontal_middle_svg__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/snap-horizontal-middle.svg */ "./jimu-icons/svg/outlined/directional/snap-horizontal-middle.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_horizontal_middle_svg__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_snap_horizontal_middle_svg__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_vertical_middle_svg__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/snap-vertical-middle.svg */ "./jimu-icons/svg/outlined/directional/snap-vertical-middle.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_snap_vertical_middle_svg__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_snap_vertical_middle_svg__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var jimu_icons_svg_outlined_directional_send_backward_svg__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/send-backward.svg */ "./jimu-icons/svg/outlined/directional/send-backward.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_send_backward_svg__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_send_backward_svg__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var jimu_icons_svg_outlined_directional_send_forward_svg__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/send-forward.svg */ "./jimu-icons/svg/outlined/directional/send-forward.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_send_forward_svg__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_send_forward_svg__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var jimu_icons_svg_outlined_directional_bring_back_svg__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/bring-back.svg */ "./jimu-icons/svg/outlined/directional/bring-back.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_bring_back_svg__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_bring_back_svg__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var jimu_icons_svg_outlined_directional_bring_front_svg__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/bring-front.svg */ "./jimu-icons/svg/outlined/directional/bring-front.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_bring_front_svg__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_bring_front_svg__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var jimu_icons_svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/lock.svg */ "./jimu-icons/svg/outlined/editor/lock.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var jimu_icons_svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/unlock.svg */ "./jimu-icons/svg/outlined/editor/unlock.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var _layout_action__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./layout-action */ "./jimu-layouts/lib/fixed-layout/builder/layout-action.ts");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");





















const fixedItemMenu = [
    [
        {
            icon: (jimu_icons_svg_outlined_directional_align_left_svg__WEBPACK_IMPORTED_MODULE_6___default()),
            visible: () => (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_20__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_20__.isLockLayout)(),
            title: (props) => {
                return props.formatMessage('align');
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_snap_left_svg__WEBPACK_IMPORTED_MODULE_7___default()),
            label: (props) => {
                return props.formatMessage(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL() ? 'snapToRight' : 'snapToLeft');
            },
            title: (props) => {
                return props.formatMessage(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL() ? 'snapToRight' : 'snapToLeft');
            },
            autoFlipIcon: true,
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignTo)({ layoutId, layoutItemId: layoutItem.id }, 'left');
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_snap_horizontal_middle_svg__WEBPACK_IMPORTED_MODULE_11___default()),
            label: (props) => {
                return props.formatMessage('alignHCenter');
            },
            title: (props) => {
                return props.formatMessage('alignHCenter');
            },
            disabled: (props) => {
                var _a, _b;
                const { layoutItem } = props;
                if (((_b = (_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.autoProps) === null || _b === void 0 ? void 0 : _b.width) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
                    return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(layoutItem.bbox.left) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(layoutItem.bbox.right);
                }
                return false;
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignHorizontalCenter)({ layoutId, layoutItemId: layoutItem.id });
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_snap_right_svg__WEBPACK_IMPORTED_MODULE_8___default()),
            label: (props) => {
                return props.formatMessage(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL() ? 'snapToLeft' : 'snapToRight');
            },
            title: (props) => {
                return props.formatMessage(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL() ? 'snapToLeft' : 'snapToRight');
            },
            autoFlipIcon: true,
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignTo)({ layoutId, layoutItemId: layoutItem.id }, 'right');
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_snap_top_svg__WEBPACK_IMPORTED_MODULE_9___default()),
            label: (props) => {
                return props.formatMessage('snapToTop');
            },
            title: (props) => {
                return props.formatMessage('snapToTop');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignTo)({ layoutId, layoutItemId: layoutItem.id }, 'top');
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_snap_vertical_middle_svg__WEBPACK_IMPORTED_MODULE_12___default()),
            label: (props) => {
                return props.formatMessage('alignVCenter');
            },
            title: (props) => {
                return props.formatMessage('alignVCenter');
            },
            disabled: (props) => {
                var _a, _b;
                const { layoutItem } = props;
                if (((_b = (_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.autoProps) === null || _b === void 0 ? void 0 : _b.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
                    return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(layoutItem.bbox.top) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(layoutItem.bbox.bottom);
                }
                return false;
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignVerticalCenter)({ layoutId, layoutItemId: layoutItem.id });
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_snap_bottom_svg__WEBPACK_IMPORTED_MODULE_10___default()),
            label: (props) => {
                return props.formatMessage('snapToBottom');
            },
            title: (props) => {
                return props.formatMessage('snapToBottom');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignTo)({ layoutId, layoutItemId: layoutItem.id }, 'bottom');
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_max_width_svg__WEBPACK_IMPORTED_MODULE_4___default()),
            label: (props) => {
                return props.formatMessage('fullWidth');
            },
            title: (props) => {
                return props.formatMessage('fullWidth');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignFullWidth)({ layoutId, layoutItemId: layoutItem.id });
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_max_height_svg__WEBPACK_IMPORTED_MODULE_3___default()),
            label: (props) => {
                return props.formatMessage('fullHeight');
            },
            title: (props) => {
                return props.formatMessage('fullHeight');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignFullHeight)({ layoutId, layoutItemId: layoutItem.id });
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_max_all_svg__WEBPACK_IMPORTED_MODULE_5___default()),
            label: (props) => {
                return props.formatMessage('fullSize');
            },
            title: (props) => {
                return props.formatMessage('fullSize');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.alignFullSize)({ layoutId, layoutItemId: layoutItem.id });
            }
        }
    ],
    [
        {
            icon: (jimu_icons_svg_outlined_gis_data_layer_svg__WEBPACK_IMPORTED_MODULE_2___default()),
            visible: () => (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_20__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_20__.isLockLayout)(),
            title: (props) => {
                return props.formatMessage('arrange');
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_send_backward_svg__WEBPACK_IMPORTED_MODULE_13___default()),
            label: (props) => {
                return props.formatMessage('sendBackward');
            },
            title: (props) => {
                return props.formatMessage('sendBackward');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.sendBackward)({ layoutId, layoutItemId: layoutItem.id });
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_send_forward_svg__WEBPACK_IMPORTED_MODULE_14___default()),
            label: (props) => {
                return props.formatMessage('bringForward');
            },
            title: (props) => {
                return props.formatMessage('bringForward');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.bringForward)({ layoutId, layoutItemId: layoutItem.id });
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_bring_back_svg__WEBPACK_IMPORTED_MODULE_15___default()),
            label: (props) => {
                return props.formatMessage('sendToBack');
            },
            title: (props) => {
                return props.formatMessage('sendToBack');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.sendToBack)({ layoutId, layoutItemId: layoutItem.id });
            }
        },
        {
            icon: (jimu_icons_svg_outlined_directional_bring_front_svg__WEBPACK_IMPORTED_MODULE_16___default()),
            label: (props) => {
                return props.formatMessage('bringToFront');
            },
            title: (props) => {
                return props.formatMessage('bringToFront');
            },
            onClick: (props) => {
                const { layoutItem, layoutId } = props;
                (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.bringToFront)({ layoutId, layoutItemId: layoutItem.id });
            }
        }
    ],
    {
        icon: (props) => {
            var _a, _b;
            const { layoutItem } = props;
            const lockLayout = (_b = (_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.lockLayout) !== null && _b !== void 0 ? _b : false;
            return lockLayout ? (jimu_icons_svg_outlined_editor_lock_svg__WEBPACK_IMPORTED_MODULE_17___default()) : (jimu_icons_svg_outlined_editor_unlock_svg__WEBPACK_IMPORTED_MODULE_18___default());
        },
        visible: () => (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_20__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_20__.isLockLayout)(),
        title: (props) => {
            var _a, _b;
            const { layoutItem } = props;
            const lockLayout = (_b = (_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.lockLayout) !== null && _b !== void 0 ? _b : false;
            return props.formatMessage(lockLayout ? 'unlockLayout' : 'lockLayout');
        },
        onClick: (props) => {
            const { layoutItem, layoutId } = props;
            (0,_layout_action__WEBPACK_IMPORTED_MODULE_19__.toggleLockLayout)({ layoutId, layoutItemId: layoutItem.id });
        }
    },
    { seperator: true }
];


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/fixed-item-setting.tsx":
/*!**********************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/fixed-item-setting.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FixedItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/fixed-layout/default-setting.ts");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var _builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/common-layout-item-setting */ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx");
/* harmony import */ var _builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/common-transform-setting */ "./jimu-layouts/lib/builder/common-transform-setting.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _item_position_setting__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./item-position-setting */ "./jimu-layouts/lib/fixed-layout/builder/item-position-setting.tsx");
/* harmony import */ var _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./fixed-item-menu */ "./jimu-layouts/lib/fixed-layout/builder/fixed-item-menu.tsx");
/* harmony import */ var _builder_toolbar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../builder/toolbar */ "./jimu-layouts/lib/builder/toolbar.tsx");
/* harmony import */ var jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/editor/lock */ "./jimu-icons/outlined/editor/lock.tsx");
/* harmony import */ var jimu_icons_outlined_editor_unlock__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/editor/unlock */ "./jimu-icons/outlined/editor/unlock.tsx");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/** @jsx jsx */















const sizemodes = [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutItemSizeModes.Auto, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutItemSizeModes.Custom, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutItemSizeModes.Stretch];
const sizemodesWithoutAuto = [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutItemSizeModes.Custom, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutItemSizeModes.Stretch];
const group1 = [
    _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[1][1],
    _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[1][2],
    _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[1][3],
    _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[1][4],
    { seperator: true },
    _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][1],
    _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][2],
    _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][3]
].map(item => { return Object.assign(Object.assign({}, item), { title: item.title, label: null }); });
const positionMenus = [
    ...group1,
    [
        { icon: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_13___default()), caret: false },
        _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][4],
        _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][5],
        _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][6],
        { seperator: true },
        _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][7],
        _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][8],
        _fixed_item_menu__WEBPACK_IMPORTED_MODULE_9__.fixedItemMenu[0][9]
    ]
];
class FixedItemSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.updateBBox = (prop, value) => {
            var _a;
            let bbox = this.props.layoutItem.bbox;
            const { distance, unit } = value;
            const originalValue = bbox[prop];
            const contaienrRect = this.getSizeOfContainer();
            let newValue = distance.toFixed(2);
            let pixelValue;
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.isPercentage(originalValue) && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PIXEL) { // change from percentage to pixel
                if (contaienrRect) {
                    if (prop === 'left' || prop === 'right' || prop === 'width') {
                        newValue = Math.round(parseFloat(originalValue) * contaienrRect.width / 100);
                    }
                    else {
                        newValue = Math.round(parseFloat(originalValue) * contaienrRect.height / 100);
                    }
                    pixelValue = newValue;
                }
            }
            else if (!jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.isPercentage(originalValue) && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PERCENTAGE) { // change from pixel to percentage
                if (contaienrRect) {
                    if (prop === 'left' || prop === 'right' || prop === 'width') {
                        newValue = (parseFloat(originalValue) * 100 / contaienrRect.width).toFixed(4);
                    }
                    else {
                        newValue = (parseFloat(originalValue) * 100 / contaienrRect.height).toFixed(4);
                    }
                }
                pixelValue = parseFloat(originalValue);
            }
            if (!pixelValue && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PERCENTAGE) {
                // change percentage value
                const total = prop === 'width' ? contaienrRect.width : contaienrRect.height;
                pixelValue = Math.round(distance * total / 100);
            }
            else if (!pixelValue && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PIXEL) {
                pixelValue = distance;
            }
            bbox = bbox.set(prop, unit === jimu_ui__WEBPACK_IMPORTED_MODULE_3__.DistanceUnits.PERCENTAGE ? `${newValue}%` : `${newValue}px`);
            if (((_a = this.props.layoutItem.setting) === null || _a === void 0 ? void 0 : _a.heightMode) === 'ratio') {
                const ratio = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.parseAspectRatio(this.props.layoutItem.setting.aspectRatio);
                if (prop === 'width') {
                    const height = pixelValue * ratio;
                    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.isPercentage(bbox.height)) {
                        const newValue = (height * 100 / contaienrRect.height).toFixed(4);
                        bbox = bbox.set('height', `${newValue}%`);
                    }
                    else {
                        bbox = bbox.set('height', `${Math.round(height)}px`);
                    }
                }
                else {
                    const width = pixelValue / ratio;
                    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.isPercentage(bbox.width)) {
                        const newValue = (width * 100 / contaienrRect.width).toFixed(4);
                        bbox = bbox.set('width', `${newValue}%`);
                    }
                    else {
                        bbox = bbox.set('width', `${Math.round(width)}px`);
                    }
                }
            }
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox);
        };
        this.updateMode = (prop, value) => {
            var _a;
            const setting = (_a = this.props.layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.setIn(['autoProps', prop], value));
        };
        this.updateLockParent = (e) => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('lockParent', e.target.checked);
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.toggleHeightMode = () => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            const mode = setting.heightMode === 'ratio' ? 'fixed' : 'ratio';
            setting = setting.set('heightMode', mode);
            if (mode === 'ratio') {
                const itemRect = this.getSizeOfItem();
                if (itemRect) {
                    setting = setting.set('aspectRatio', Number((itemRect.height / itemRect.width).toFixed(2)))
                        .setIn(['autoProps', 'height', 'AUTO']);
                }
            }
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.updateAspectRatio = (newRatio) => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('aspectRatio', newRatio);
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.flipLeftRight = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.isRTL();
        this.state = { enableToolbar: false };
    }
    componentDidMount() {
        if (this.ref) {
            this.setState({ enableToolbar: true });
        }
    }
    getSizeOfContainer() {
        const layoutElem = this.querySelector(`div.fixed-layout[data-layoutid="${this.props.layoutId}"]`);
        if (layoutElem) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    getSizeOfItem() {
        const { layoutId, layoutItem } = this.props;
        const layoutElem = this.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
        if (layoutElem) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    querySelector(selector) {
        const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
        if (appFrame) {
            const appFrameDoc = appFrame.contentDocument || appFrame.contentWindow.document;
            return appFrameDoc.querySelector(selector);
        }
        return null;
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .layout-item-toolbar {
        box-shadow: none;
        background: transparent;

        .toolbar-item, icon-container {
          width: 28px;
          min-height: 28px;
        }
        .toolbar-group {
          background: transparent;
          margin: 0 1px;
        }
        .toolbar-item {
          margin: 0 1px;
          background: transparent;
          &:hover {
            background: var(--light-500);
          }

          svg {
            width: 14px;
            height: 14px;
          }
        }
      }

      .ratio-value {
        font-size: 12px;
      }
    `;
    }
    render() {
        const { layoutItem, layoutId, formatMessage, isLockLayout, supportAutoSize } = this.props;
        if (!layoutItem) {
            return null;
        }
        this.itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_FIX_LAYOUT_ITEM_SETTING, layoutItem.setting);
        const isKeepAspect = this.itemSetting.heightMode === 'ratio';
        const widthMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.getLayoutItemSizeMode('width', layoutItem.bbox, this.itemSetting.autoProps);
        const heightMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.getLayoutItemSizeMode('height', layoutItem.bbox, this.itemSetting.autoProps);
        const bbox = layoutItem.bbox;
        const theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_14__.getTheme)();
        const inputStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 100px;`;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'fixed-item-setting', css: this.getStyle(), ref: el => (this.ref = el) },
            !isLockLayout && this.state.enableToolbar && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { className: 'p-0 d-flex justify-content-center' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_toolbar__WEBPACK_IMPORTED_MODULE_10__.Toolbar, { layoutId: layoutId, layoutItem: layoutItem, parentRef: this.ref, theme: theme, tools: positionMenus, formatMessage: this.props.formatMessage })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { role: 'group', "aria-label": `${formatMessage('size')} & ${formatMessage('position')}`, title: `${formatMessage('size')} & ${formatMessage('position')}` },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { role: 'group', "aria-label": formatMessage('width'), label: formatMessage('width') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: inputStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_4__.SizeEditor, { label: 'W', mode: widthMode, sizeModes: supportAutoSize && !isKeepAspect ? sizemodes : sizemodesWithoutAuto, value: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.utils.stringOfLinearUnit(bbox.width), onChange: value => { this.updateBBox('width', value); }, onModeChange: value => { this.updateMode('width', value); } }))),
                    widthMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutItemSizeModes.Auto && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Tooltip, { title: formatMessage('keepAspectRatio'), placement: 'bottom' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { size: 'sm', type: 'tertiary', className: 'ml-1', icon: true, onClick: this.toggleHeightMode, "aria-pressed": isKeepAspect }, isKeepAspect ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_11__.LockOutlined, { size: 's' }) : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_unlock__WEBPACK_IMPORTED_MODULE_12__.UnlockOutlined, { size: 's' }))))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { role: 'group', "aria-label": formatMessage('height'), label: formatMessage('height'), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)({ 'mt-0': widthMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutItemSizeModes.Auto }) },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: inputStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_4__.SizeEditor, { label: 'H', mode: heightMode, sizeModes: supportAutoSize ? sizemodes : sizemodesWithoutAuto, disabled: isKeepAspect, value: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.utils.stringOfLinearUnit(bbox.height), onChange: value => { this.updateBBox('height', value); }, onModeChange: value => { this.updateMode('height', value); } }))),
                    isKeepAspect && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { "aria-label": formatMessage('aspectRatio'), label: formatMessage('aspectRatio') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_4__.InputRatio, { value: this.itemSetting.aspectRatio, style: { width: 100 }, onChange: this.updateAspectRatio }))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_item_position_setting__WEBPACK_IMPORTED_MODULE_8__.ItemPositionSetting, Object.assign({}, this.props, { widthMode: widthMode, heightMode: heightMode }))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_6__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, setting: layoutItem.setting, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { label: formatMessage('lockParent') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Switch, { "aria-label": formatMessage('lockParent'), checked: this.itemSetting.lockParent, onChange: this.updateLockParent }))))),
            (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget || layoutItem.sectionId) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_5__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, style: this.props.style, isSection: layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, onStyleChange: this.props.onStyleChange, formatMessage: this.props.formatMessage, setting: layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({}), onSettingChange: this.props.onSettingChange }))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/item-position-setting.tsx":
/*!*************************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/item-position-setting.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ItemPositionSetting: () => (/* binding */ ItemPositionSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/fixed-layout/default-setting.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../fixed-layout-util */ "./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_stretched__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-stretched */ "./jimu-icons/outlined/directional/arrow-stretched.tsx");
/** @jsx jsx */







const availableUnits = [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PIXEL, jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE];
class ItemPositionSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.updateBBox = (prop, value) => {
            const bbox = this.props.layoutItem.bbox;
            const { distance, unit } = value;
            const originalValue = bbox[prop];
            let newValue = distance.toFixed(2);
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(originalValue) && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PIXEL) {
                // change from percentage to pixel
                const contaienrRect = this.getSizeOfContainer();
                if (contaienrRect != null) {
                    if (prop === 'left' || prop === 'right' || prop === 'width') {
                        newValue = Math.round((parseFloat(originalValue) * contaienrRect.width) / 100);
                    }
                    else {
                        newValue = Math.round((parseFloat(originalValue) * contaienrRect.height) / 100);
                    }
                }
            }
            else if (!jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(originalValue) && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
                // change from pixel to percentage
                const contaienrRect = this.getSizeOfContainer();
                if (contaienrRect != null) {
                    if (prop === 'left' || prop === 'right' || prop === 'width') {
                        newValue = ((parseFloat(originalValue) * 100) / contaienrRect.width).toFixed(2);
                    }
                    else {
                        newValue = ((parseFloat(originalValue) * 100) / contaienrRect.height).toFixed(2);
                    }
                }
            }
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox.set(prop, value.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE ? `${newValue}%` : `${newValue}px`));
        };
        this.flipLeftRight = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isRTL();
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .position-setting {
        background-color: var(--light-500);
        position: relative;
        width: 100%;
        padding-top: 60%;
        overflow: visible;
      }

      .content {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        padding: 7px;
      }

      .w-half {
        width: calc(50% - 16px);
        position: relative;
        z-index: 0;
      }
      .h-half {
        height: calc(50% - 16px);
        position: relative;
        z-index: 0;
      }
      .pos-label {
        z-index: 1;
      }

      .box-column {
        width: 32px;
        overflow: visible;
      }

      .box-item {
        width: 24px;
        height: 24px;
        background-color: var(--dark-200);
        margin: 4px 0;
        position: relative;
        overflow: visible;

        &.stretch {
          background-color: transparent;
          border: 1px solid var(--dark-200);
        }
        .h-arrow, .v-arrow {
          display: none;
          .arrow-icon {
            color: var(--dark-200);
            width: 100%;
            height: 100%;
          }
          position: absolute;
          width: 100%;
        }
        .h-arrow {
          top: 50%;
          transform: translateY(-50%);
        }
        .v-arrow {
          left: 50%;
          transform: translateX(-50%);
        }
        &.stretch-w .h-arrow,
        &.stretch-h .v-arrow {
          display: block;
        }
      }

      .anchor {
        position: absolute;
        width: 16px;
        height: 16px;
        background: transparent;
        overflow: visible;

        &.selected {
          width: 10px;
          height: 10px;
          opacity: 1;
          background: var(--primary-100);
          border: 2px solid var(--primary-600) !important;
          border-radius: 3px !important;
        }
        &.top.left {
          border-radius: 3px 0 0 0;
        }
        &.top.right {
          border-radius: 0 3px 0 0;
        }
        &.bottom.right {
          border-radius: 0 0 3px 0;
        }
        &.bottom.left {
          border-radius: 0 0 0 3px;
        }
        &.left {
          left: 6px;
          border-left: 2px solid var(--dark-200);
          &.selected:before {
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            content: '';
            height: 2px;
            width: 10px;
            background-color: var(--primary-600);
          }
        }
        &.top {
          top: 6px;
          border-top: 2px solid var(--dark-200);
          &.selected:after {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            content: '';
            width: 2px;
            height: 10px;
            background-color: var(--primary-600);
          }
        }
        &.bottom {
          bottom: 6px;
          border-bottom: 2px solid var(--dark-200);
          &.selected:after {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            content: '';
            width: 2px;
            height: 10px;
            background-color: var(--primary-600);
          }
        }
        &.right {
          right: 6px;
          border-right: 2px solid var(--dark-200);
          &.selected:before {
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            content: '';
            height: 2px;
            width: 10px;
            background-color: var(--primary-600);
          }
        }
      }

      .from-left {
        border-left: 2px solid var(--primary-600);
        &.is-auto {
          border-left-color: var(--dark-200);
        }
        &.allow-change:hover {
          border-left-color: var(--primary-600);
        }
      }
      .from-top {
        border-top: 2px solid var(--primary-600);
        &.is-auto {
          border-top-color: var(--dark-200);
        }
        &.allow-change:hover {
          border-top-color: var(--primary-600);
        }
      }
      .from-right {
        border-right: 2px solid var(--primary-600);
        &.is-auto {
          border-right-color: var(--dark-200);
        }
        &.allow-change:hover {
          border-right-color: var(--primary-600);
        }
      }
      .from-bottom {
        border-bottom: 2px solid var(--primary-600);
        &.is-auto {
          border-bottom-color: var(--dark-200);
        }
        &.allow-change:hover {
          border-bottom-color: var(--primary-600);
        }
      }
      /* .line-h.is-auto,
      .line-v.is-auto {
        border-color: var(--dark-200);
      } */
      .line-h {
        position: absolute;
        width: 100%;
        top: 50%;
        transform: translateY(-50%);
        height: 12px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        z-index: 0;

        &.allow-change {
          cursor: pointer;
          &:hover:after {
            border-top-color: var(--primary-600);
          }
        }
        &:after {
          content: '';
          height: 0;
          width: 100%;
          border-top: 2px solid var(--primary-600);
        }
        &.is-auto:after {
          border-top-style: dashed;
          border-top-color: var(--dark-200);
        }
      }
      .line-v {
        position: absolute;
        height: 100%;
        width: 12px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        justify-content: center;
        z-index: 0;

        &.allow-change {
          cursor: pointer;
          &:hover:after {
            border-left-color: var(--primary-600);
          }
        }
        &:after {
          content: '';
          width: 0;
          height: 100%;
          border-left: 2px solid var(--primary-600);
        }
        &.is-auto:after {
          border-left-style: dashed;
          border-left-color: var(--dark-200);
        }
      }

      .auto-label {
        width: 16px;
        height: 16px;
        background: var(--primary);
        border: 1px solid var(--light-500);
        font-size: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--light-300);
      }

      .style-setting--input-unit {
        &:hover {
          input.jimu-numeric-input-input {
            background-color: var(--light-200);
          }
          .style-setting--unit-selector {
            background-color: var(--light-200);
          }
        }
        border-radius: 2px;
        width: 52px;
        height: 24px;

        input.jimu-numeric-input-input {
          height: 24px;
          font-size: 12px;
          padding: 0;
          text-align: center;
          border: none;
          background-color: var(--light-500);
          &:focus {
            background-color: var(--light-200);
          }
        }
        .style-setting--unit-selector {
          background-color: var(--light-500);
          color: var(--dark-400);
          height: 24px;
          width: auto;
          min-width: 0;
          padding: 0;
          margin-left: 0;
          font-size: 12px;
          border: none;
        }
      }

      .origin-tip {
        margin-top: 8px;
        font-size: 12px;
        color: var(--dark-400);
      }
    `;
    }
    inputUnit(prop) {
        const { layoutItem, formatMessage } = this.props;
        const value = jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.stringOfLinearUnit(layoutItem.bbox[prop]);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'pos-label', role: 'group', "aria-label": formatMessage(prop) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_1__.InputUnit, { units: availableUnits, min: -Infinity, max: Infinity, value: value, onChange: (value) => { this.updateBBox(prop, value); } })));
    }
    getSizeOfContainer() {
        const layoutElem = this.querySelector(`div.fixed-layout[data-layoutid="${this.props.layoutId}"]`);
        return layoutElem === null || layoutElem === void 0 ? void 0 : layoutElem.getBoundingClientRect();
    }
    getSizeOfItem() {
        const { layoutId, layoutItem } = this.props;
        const layoutElem = this.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
        return layoutElem === null || layoutElem === void 0 ? void 0 : layoutElem.getBoundingClientRect();
    }
    querySelector(selector) {
        var _a;
        const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
        if (appFrame != null) {
            const appFrameDoc = (_a = appFrame.contentDocument) !== null && _a !== void 0 ? _a : appFrame.contentWindow.document;
            return appFrameDoc.querySelector(selector);
        }
        return null;
    }
    switchAuto(side, otherSize, originValue) {
        var _a, _b;
        const { layoutId, layoutItem } = this.props;
        const setting = (_a = layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
        let bbox = ((_b = layoutItem.bbox) !== null && _b !== void 0 ? _b : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({}));
        if (originValue && bbox[side] == null) {
            const containerRect = this.getSizeOfContainer();
            const rect = this.getSizeOfItem();
            switch (side) {
                case 'left':
                    bbox = bbox.set(side, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(rect.left, containerRect.width));
                    break;
                case 'right':
                    bbox = bbox.set(side, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(containerRect.width - rect.right, containerRect.width));
                    break;
                case 'top':
                    bbox = bbox.set(side, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(rect.top, containerRect.height));
                    break;
                case 'bottom':
                    bbox = bbox.set(side, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(containerRect.height - rect.bottom, containerRect.height));
                    break;
            }
            this.props.onPosChange({
                layoutId,
                layoutItemId: layoutItem.id
            }, bbox);
        }
        this.props.onSettingChange({
            layoutId,
            layoutItemId: layoutItem.id
        }, setting.setIn(['autoProps', side], !originValue).setIn(['autoProps', otherSize], originValue));
    }
    checkAutoProps(itemSetting) {
        const box = (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__.generateBBoxStyle)(this.props.layoutItem.bbox, itemSetting);
        const leftAuto = box.left == null || (itemSetting.hCenter && box.left === '50%');
        const rightAuto = box.right == null || (itemSetting.hCenter && box.left === '50%');
        const topAuto = box.top == null || (itemSetting.vCenter && box.top === '50%');
        const bottomAuto = box.bottom == null || (itemSetting.vCenter && box.top === '50%');
        return { leftAuto, rightAuto, topAuto, bottomAuto };
    }
    checkOrigin(leftAuto, rightAuto, topAuto, bottomAuto) {
        let left = leftAuto;
        let right = rightAuto;
        let top = topAuto;
        let bottom = bottomAuto;
        if (leftAuto === rightAuto) {
            left = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isRTL();
            right = !left;
        }
        if (topAuto === bottomAuto) {
            top = false;
            bottom = true;
        }
        return { top, bottom, left, right };
    }
    /**
     * When width is custom, only one of the left and right can set to custom.
     * @param prop
     * @param relatedProp
     * @param side
     */
    allowChangeAutoProps(side) {
        var _a;
        const itemSetting = this.props.layoutItem.setting;
        const autoProps = (_a = itemSetting === null || itemSetting === void 0 ? void 0 : itemSetting.autoProps) !== null && _a !== void 0 ? _a : {};
        const sizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.getLayoutItemSizeMode(side, this.props.layoutItem.bbox, autoProps);
        if (sizeMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch ||
            (side === 'width' && (itemSetting === null || itemSetting === void 0 ? void 0 : itemSetting.hCenter)) ||
            (side === 'height' && (itemSetting === null || itemSetting === void 0 ? void 0 : itemSetting.vCenter))) {
            return false;
        }
        return true;
    }
    getOrigin(left, top, right, bottom) {
        const { formatMessage } = this.props;
        if (!left && !top) {
            return this.flipLeftRight ? formatMessage('TR') : formatMessage('TL');
        }
        if (!right && !top) {
            return this.flipLeftRight ? formatMessage('TL') : formatMessage('TR');
        }
        if (!right && !bottom) {
            return this.flipLeftRight ? formatMessage('BL') : formatMessage('BR');
        }
        if (!left && !bottom) {
            return this.flipLeftRight ? formatMessage('BR') : formatMessage('BL');
        }
        return '';
    }
    render() {
        const { layoutItem, widthMode, heightMode, formatMessage } = this.props;
        if (layoutItem == null) {
            return null;
        }
        const itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_FIX_LAYOUT_ITEM_SETTING, layoutItem.setting);
        const { leftAuto, rightAuto, topAuto, bottomAuto } = this.checkAutoProps(itemSetting);
        const { top, bottom, left, right } = this.checkOrigin(leftAuto, rightAuto, topAuto, bottomAuto);
        const canSwitchXAuto = this.allowChangeAutoProps('width');
        const canSwitchYAuto = this.allowChangeAutoProps('height');
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: 'w-100' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'position-setting rounded-lg' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'content d-flex justify-content-center align-items-center' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-half flex-column justify-content-center align-items-center' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-100 justify-content-center align-items-center' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', title: canSwitchXAuto ? formatMessage(leftAuto ? 'changeToCustom' : 'changeToAuto') : '' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('from-left line-h flex-grow-1 flex-shrink-1', {
                                        'is-auto': leftAuto,
                                        'allow-change': canSwitchXAuto
                                    }), onClick: canSwitchXAuto ? this.switchAuto.bind(this, 'left', 'right', leftAuto) : null })),
                            leftAuto ? null : this.inputUnit('left'))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex h-100 flex-column justify-content-center align-items-center box-column' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex h-half w-100 flex-column justify-content-center align-items-center' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', title: canSwitchYAuto ? formatMessage(topAuto ? 'changeToCustom' : 'changeToAuto') : '' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('from-top line-v flex-grow-1 flex-shrink-1', {
                                        'is-auto': topAuto,
                                        'allow-change': canSwitchYAuto
                                    }), onClick: canSwitchYAuto ? this.switchAuto.bind(this, 'top', 'bottom', topAuto) : null })),
                            topAuto ? null : this.inputUnit('top')),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('box-item rounded-lg', {
                                stretch: widthMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch || heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch,
                                'stretch-w': widthMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch,
                                'stretch-h': heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch
                            }) },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'h-arrow' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_stretched__WEBPACK_IMPORTED_MODULE_6__.ArrowStretchedOutlined, { className: 'arrow-icon' })),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'v-arrow' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_stretched__WEBPACK_IMPORTED_MODULE_6__.ArrowStretchedOutlined, { className: 'arrow-icon', rotate: 90 }))),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex h-half w-100 flex-column justify-content-center align-items-center' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', title: canSwitchYAuto ? formatMessage(bottomAuto ? 'changeToCustom' : 'changeToAuto') : '' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('from-bottom line-v flex-grow-1 flex-shrink-1', {
                                        'is-auto': bottomAuto,
                                        'allow-change': canSwitchYAuto
                                    }), onClick: canSwitchYAuto ? this.switchAuto.bind(this, 'bottom', 'top', bottomAuto) : null })),
                            bottomAuto ? null : this.inputUnit('bottom'))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-half flex-column justify-content-center align-items-center' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-100 justify-content-center align-items-center' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', title: canSwitchXAuto ? formatMessage(rightAuto ? 'changeToCustom' : 'changeToAuto') : '' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('from-right line-h flex-grow-1 flex-shrink-1', {
                                        'is-auto': rightAuto,
                                        'allow-change': canSwitchXAuto
                                    }), onClick: canSwitchXAuto ? this.switchAuto.bind(this, 'right', 'left', rightAuto) : null })),
                            rightAuto ? null : this.inputUnit('right'))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('anchor top left', {
                            selected: !left && !top
                        }) }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('anchor top right', {
                            selected: !right && !top
                        }) }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('anchor bottom left', {
                            selected: !left && !bottom
                        }) }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('anchor bottom right', {
                            selected: !bottom && !right
                        }) }))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'origin-tip d-flex justify-content-center align-item-center' }, this.getOrigin(left, top, right, bottom))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/layout-action.ts":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/layout-action.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   alignFullHeight: () => (/* binding */ alignFullHeight),
/* harmony export */   alignFullSize: () => (/* binding */ alignFullSize),
/* harmony export */   alignFullWidth: () => (/* binding */ alignFullWidth),
/* harmony export */   alignHorizontalCenter: () => (/* binding */ alignHorizontalCenter),
/* harmony export */   alignTo: () => (/* binding */ alignTo),
/* harmony export */   alignVerticalCenter: () => (/* binding */ alignVerticalCenter),
/* harmony export */   bringForward: () => (/* binding */ bringForward),
/* harmony export */   bringToFront: () => (/* binding */ bringToFront),
/* harmony export */   sendBackward: () => (/* binding */ sendBackward),
/* harmony export */   sendToBack: () => (/* binding */ sendToBack),
/* harmony export */   toggleLockLayout: () => (/* binding */ toggleLockLayout)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! invariant */ "./node_modules/invariant/invariant.js");
/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(invariant__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util */ "./jimu-layouts/lib/fixed-layout/builder/util.ts");





function bringForward(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const { layoutId, layoutItemId } = layoutInfo;
    const layout = appConfig.layouts[layoutId];
    invariant__WEBPACK_IMPORTED_MODULE_3__(layout.order, 'parent order must not be empty to alter order');
    const order = [].concat(layout.order);
    const index = order.indexOf(layoutItemId);
    if (index === order.length - 1 || index < 0) {
        return;
    }
    order[index] = order[index + 1];
    order[index + 1] = layoutInfo.layoutItemId;
    appConfigAction.editLayoutProperty(layoutId, 'order', order).exec();
}
function bringToFront(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const { layoutId, layoutItemId } = layoutInfo;
    const layout = appConfig.layouts[layoutId];
    invariant__WEBPACK_IMPORTED_MODULE_3__(layout.order, 'parent order must not be empty to alter order');
    const order = [].concat(layout.order);
    const index = order.indexOf(layoutItemId);
    if (index === order.length - 1 || index < 0) {
        return;
    }
    order.splice(index, 1);
    order.push(layoutInfo.layoutItemId);
    appConfigAction.editLayoutProperty(layoutId, 'order', order).exec();
}
function sendBackward(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const { layoutId, layoutItemId } = layoutInfo;
    const layout = appConfig.layouts[layoutId];
    invariant__WEBPACK_IMPORTED_MODULE_3__(layout.order, 'parent order must not be empty to alter order');
    const order = [].concat(layout.order);
    const index = order.indexOf(layoutItemId);
    if (index <= 0) {
        return;
    }
    order[index] = order[index - 1];
    order[index - 1] = layoutInfo.layoutItemId;
    appConfigAction.editLayoutProperty(layoutId, 'order', order).exec();
}
function sendToBack(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const { layoutId, layoutItemId } = layoutInfo;
    const layout = appConfig.layouts[layoutId];
    invariant__WEBPACK_IMPORTED_MODULE_3__(layout.order, 'parent order must not be empty to alter order');
    const order = [].concat(layout.order);
    const index = order.indexOf(layoutItemId);
    if (index <= 0) {
        return;
    }
    order.splice(index, 1);
    order.splice(0, 0, layoutInfo.layoutItemId);
    appConfigAction.editLayoutProperty(layoutId, 'order', order).exec();
}
function toggleLockLayout(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(appConfig, layoutInfo);
    const setting = layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
    appConfigAction.editLayoutItemProperty(layoutInfo, 'setting.lockLayout', !setting.lockLayout).exec();
}
function alignTo(layoutInfo, prop) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(appConfig, layoutInfo);
    const bbox = layoutItem.bbox;
    let setting = layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
    const value = parseInt(bbox[prop], 10);
    if (value !== 0) {
        appConfigAction.editLayoutItemProperty(layoutInfo, 'bbox', bbox.set(prop, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox[prop]) ? '0%' : '0px'));
    }
    setting = setting.setIn(['autoProps', prop], false);
    let autoProp;
    switch (prop) {
        case 'top':
            autoProp = 'bottom';
            break;
        case 'bottom':
            autoProp = 'top';
            break;
        case 'left':
            autoProp = 'right';
            break;
        case 'right':
            autoProp = 'left';
            break;
    }
    setting = setting.setIn(['autoProps', autoProp], true);
    if (prop === 'left' || prop === 'right') {
        setting = setting.set('hCenter', false);
    }
    else if (prop === 'top' || prop === 'bottom') {
        setting = setting.set('vCenter', false);
    }
    appConfigAction.editLayoutItemProperty(layoutInfo, 'setting', setting);
    if (appConfigAction.appConfig.useAutoSortInFixedLayout) {
        const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_4__.sortLayoutItems)(appConfigAction.appConfig.layouts[layoutInfo.layoutId]);
        appConfigAction.editLayoutProperty(layoutInfo.layoutId, 'order', sortedLayout.order);
    }
    appConfigAction.exec();
}
function alignFullWidth(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(appConfig, layoutInfo);
    const bbox = layoutItem.bbox;
    let setting = layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
    setting = setting
        .set('hCenter', false)
        .setIn(['autoProps', 'left'], false)
        .setIn(['autoProps', 'right'], false)
        .setIn(['autoProps', 'width'], jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch);
    appConfigAction
        .editLayoutItemProperty(layoutInfo, 'bbox', bbox.set('left', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.left) ? '0%' : '0px')
        .set('right', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.right) ? '0%' : '0px')
        .set('width', '100%'))
        .editLayoutItemProperty(layoutInfo, 'setting', setting);
    if (appConfigAction.appConfig.useAutoSortInFixedLayout) {
        const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_4__.sortLayoutItems)(appConfigAction.appConfig.layouts[layoutInfo.layoutId]);
        appConfigAction.editLayoutProperty(layoutInfo.layoutId, 'order', sortedLayout.order);
    }
    appConfigAction.exec();
}
function alignCenter(layoutInfo, direction) {
    var _a, _b;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(appConfig, layoutInfo);
    let setting = layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
    let bbox = layoutItem.bbox;
    if (direction === 'h') {
        if (((_a = setting.autoProps) === null || _a === void 0 ? void 0 : _a.width) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.left) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.right)) {
                const unit = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.left) ? '%' : 'px';
                const spacing = parseFloat(bbox.left) + parseFloat(bbox.right);
                bbox = bbox.set('left', `${spacing / 2}${unit}`).set('right', `${spacing / 2}${unit}`);
            }
            else {
                return;
            }
        }
        else {
            bbox = bbox.set('left', '50%');
            setting = setting.set('hCenter', true).setIn(['autoProps', 'left'], false).setIn(['autoProps', 'right'], true);
        }
    }
    else {
        if (((_b = setting.autoProps) === null || _b === void 0 ? void 0 : _b.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.top) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.bottom)) {
                const unit = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.top) ? '%' : 'px';
                const spacing = parseFloat(bbox.top) + parseFloat(bbox.bottom);
                bbox = bbox.set('top', `${spacing / 2}${unit}`).set('bottom', `${spacing / 2}${unit}`);
            }
            else {
                return;
            }
        }
        else {
            bbox = bbox.set('top', '50%');
            setting = setting.set('vCenter', true).setIn(['autoProps', 'top'], false).setIn(['autoProps', 'bottom'], true);
        }
    }
    appConfigAction
        .editLayoutItemProperty(layoutInfo, 'bbox', bbox)
        .editLayoutItemProperty(layoutInfo, 'setting', setting);
    if (appConfigAction.appConfig.useAutoSortInFixedLayout) {
        const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_4__.sortLayoutItems)(appConfigAction.appConfig.layouts[layoutInfo.layoutId]);
        appConfigAction.editLayoutProperty(layoutInfo.layoutId, 'order', sortedLayout.order);
    }
    appConfigAction.exec();
}
function alignVerticalCenter(layoutInfo) {
    alignCenter(layoutInfo, 'v');
}
function alignHorizontalCenter(layoutInfo) {
    alignCenter(layoutInfo, 'h');
}
function alignFullHeight(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(appConfig, layoutInfo);
    const bbox = layoutItem.bbox;
    let setting = layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
    setting = setting
        .set('vCenter', false)
        .setIn(['autoProps', 'top'], false)
        .setIn(['autoProps', 'bottom'], false)
        .setIn(['autoProps', 'height'], jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch);
    appConfigAction
        .editLayoutItemProperty(layoutInfo, 'bbox', bbox.set('top', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.top) ? '0%' : '0px')
        .set('bottom', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.bottom) ? '0%' : '0px')
        .set('height', '100%'))
        .editLayoutItemProperty(layoutInfo, 'setting', setting);
    if (appConfigAction.appConfig.useAutoSortInFixedLayout) {
        const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_4__.sortLayoutItems)(appConfigAction.appConfig.layouts[layoutInfo.layoutId]);
        appConfigAction.editLayoutProperty(layoutInfo.layoutId, 'order', sortedLayout.order);
    }
    appConfigAction.exec();
}
function alignFullSize(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const appConfig = appConfigAction.appConfig;
    const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(appConfig, layoutInfo);
    const bbox = layoutItem.bbox;
    let setting = layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
    setting = setting
        .set('vCenter', false)
        .set('hCenter', false)
        .setIn(['autoProps', 'top'], false)
        .setIn(['autoProps', 'bottom'], false)
        .setIn(['autoProps', 'left'], false)
        .setIn(['autoProps', 'right'], false)
        .setIn(['autoProps', 'height'], jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch)
        .setIn(['autoProps', 'width'], jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch);
    appConfigAction
        .editLayoutItemProperty(layoutInfo, 'bbox', bbox.set('top', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.top) ? '0%' : '0px')
        .set('bottom', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.bottom) ? '0%' : '0px')
        .set('left', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.left) ? '0%' : '0px')
        .set('right', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox.right) ? '0%' : '0px')
        .set('width', '100%')
        .set('height', '100%'))
        .editLayoutItemProperty(layoutInfo, 'setting', setting);
    if (appConfigAction.appConfig.useAutoSortInFixedLayout) {
        const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_4__.sortLayoutItems)(appConfigAction.appConfig.layouts[layoutInfo.layoutId]);
        appConfigAction.editLayoutProperty(layoutInfo.layoutId, 'order', sortedLayout.order);
    }
    appConfigAction.exec();
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/layout-item.tsx":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/layout-item.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/fixed-layout/default-setting.ts");
/* harmony import */ var _builder_layout_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/layout-item */ "./jimu-layouts/lib/builder/layout-item.tsx");
/* harmony import */ var _fixed_item_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fixed-item-menu */ "./jimu-layouts/lib/fixed-layout/builder/fixed-item-menu.tsx");
/* harmony import */ var _fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../fixed-layout-util */ "./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/fixed-layout/common/util.ts");
/** @jsx jsx */







class FixedItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.state = {};
        this.handleResizeEnd = (id, dx, dy, dw, dh, shiftKey) => {
            const { layoutItem } = this.props;
            this.props.onResizeEnd(id, dx, dy, dw, dh, shiftKey, layoutItem, this.itemSetting);
        };
        this.handleResizing = (id, dx, dy, dw, dh, shiftKey, speed) => {
            this.props.onResizing(id, dx, dy, dw, dh, shiftKey, speed);
        };
        this.moveUp = () => {
            this.props.onMoveByKey(this.props.layoutItemId, 0, -1);
        };
        this.moveDown = () => {
            this.props.onMoveByKey(this.props.layoutItemId, 0, 1);
        };
        this.moveLeft = () => {
            this.props.onMoveByKey(this.props.layoutItemId, -1, 0);
        };
        this.moveRight = () => {
            this.props.onMoveByKey(this.props.layoutItemId, 1, 0);
        };
    }
    getKeyboardComponent() {
        if (!this.props.isDesignMode) {
            return null;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.Keyboard, { bindings: {
                up: this.moveUp,
                down: this.moveDown,
                left: this.moveLeft,
                right: this.moveRight
            } }));
    }
    getPositionStyle() {
        var _a, _b;
        const { layoutItem, offsetX, offsetY, dw, dh, initRect, containerRect } = this.props;
        let pos = (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__.generateBBoxStyle)(layoutItem.bbox, this.itemSetting);
        const setting = layoutItem.setting;
        if (initRect != null) {
            pos = (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__.generateResizingBBoxStyle)(initRect, containerRect, {
                dw,
                dh: this.itemSetting.heightMode === 'ratio' ? dw / jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.parseAspectRatio(this.itemSetting.aspectRatio) : dh,
                dx: offsetX,
                dy: offsetY
            }, true); // The emotion css will process RTL
            if ((setting === null || setting === void 0 ? void 0 : setting.hCenter) && ((_a = layoutItem.bbox) === null || _a === void 0 ? void 0 : _a.left) === '50%') {
                pos.left = '50%';
            }
            if ((setting === null || setting === void 0 ? void 0 : setting.vCenter) && ((_b = layoutItem.bbox) === null || _b === void 0 ? void 0 : _b.top) === '50%') {
                pos.top = '50%';
            }
        }
        const mergedStyle = Object.assign(Object.assign({}, pos), (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__.applyPositionSetting)(layoutItem.bbox, this.itemSetting, Boolean(initRect)));
        if (dw !== 0 || dh !== 0) {
            // is resizing. The right style will take effect in RTL.
            mergedStyle.right = 'auto';
        }
        return _common_util__WEBPACK_IMPORTED_MODULE_6__.getPositionStyle(mergedStyle);
    }
    render() {
        const { layoutId, layoutItem, isLayoutLockChildren, draggable = true, resizable = true, showDefaultTools = true } = this.props;
        if (layoutItem == null || layoutItem.isPending) {
            return null;
        }
        this.itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_FIX_LAYOUT_ITEM_SETTING, layoutItem.setting);
        const lockLayout = this.itemSetting.lockLayout;
        const ratio = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.parseAspectRatio(this.itemSetting.aspectRatio);
        const useAspectRatio = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.shouldUseAspectRatio(this.itemSetting);
        const widthMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.getLayoutItemSizeMode('width', layoutItem.bbox, this.itemSetting.autoProps);
        const heightMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.getLayoutItemSizeMode('height', layoutItem.bbox, this.itemSetting.autoProps);
        const oneByOneAnimationProps = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.handleOnebyOneAnimation(this.props);
        const [cssStyle, transform] = this.getPositionStyle();
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_layout_item__WEBPACK_IMPORTED_MODULE_3__["default"], Object.assign({ className: 'd-flex', css: cssStyle, style: { transform }, layoutId: layoutId, layoutItemId: layoutItem.id, restrict: this.itemSetting.lockParent || isLayoutLockChildren, draggable: draggable && !lockLayout, resizable: resizable && !lockLayout, showDefaultTools: showDefaultTools, toolItems: showDefaultTools ? _fixed_item_menu__WEBPACK_IMPORTED_MODULE_4__.fixedItemMenu : [], onResizeStart: this.props.onResizeStart, onResizing: this.handleResizing, onResizeEnd: this.handleResizeEnd, onClick: this.props.onClick, top: heightMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto && !useAspectRatio, bottom: heightMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto && !useAspectRatio, left: widthMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto, right: widthMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto, forceAspectRatio: useAspectRatio, aspectRatio: ratio, isInSection: this.props.isInSection, autoWidth: widthMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto, autoHeight: heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto }, oneByOneAnimationProps), this.props.selected && this.getKeyboardComponent()));
    }
}
const mapStateToLayoutItemProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a;
        const selection = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection;
        if (selection != null) {
            return selection.layoutId === ownProps.layoutId && selection.layoutItemId === ownProps.layoutItemId;
        }
        return false;
    },
    (state) => { var _a; return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design; }
], (selected, isDesignMode) => ({ selected, isDesignMode }));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToLayoutItemProps)(FixedItem));


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/layout-service.ts":
/*!*****************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/layout-service.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FixedLayoutService: () => (/* binding */ FixedLayoutService)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _fixed_layout_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../fixed-layout-util */ "./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util */ "./jimu-layouts/lib/fixed-layout/builder/util.ts");
/* harmony import */ var _fixed_item_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./fixed-item-menu */ "./jimu-layouts/lib/fixed-layout/builder/fixed-item-menu.tsx");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../builder/menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../builder/menu/screen-menu */ "./jimu-layouts/lib/builder/menu/screen-menu.tsx");









const commonMenu = [_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_6__.duplicateMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_6__.floatingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_6__.pendingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_6__.deleteMenuItem];
const widgetMenu = [].concat(_fixed_item_menu__WEBPACK_IMPORTED_MODULE_5__.fixedItemMenu, commonMenu);
const sectionMenu = [].concat(_fixed_item_menu__WEBPACK_IMPORTED_MODULE_5__.fixedItemMenu, _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_7__.sectionMenuItems, commonMenu);
class FixedLayoutService extends jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.BaseLayoutService {
    removeItemFromOrder(appConfig, layoutInfo) {
        const { layoutId, layoutItemId } = layoutInfo;
        const layoutJson = appConfig.layouts[layoutId];
        // remove it from order list
        let order = [].concat(layoutJson.order);
        order = order.filter((itemId) => itemId !== layoutItemId);
        return appConfig.setIn(['layouts', layoutId, 'order'], order);
    }
    afterItemMoved(appConfig, layoutInfo) {
        return this.removeItemFromOrder(appConfig, layoutInfo);
    }
    afterItemRemoved(appConfig, layoutInfo) {
        return this.removeItemFromOrder(appConfig, layoutInfo);
    }
    updateBBoxAfterAdd(appConfig, draggingItem, layoutInfo, containerRect, itemRect, snapResult, currentSizeMode) {
        var _a, _b, _c, _d, _e, _f;
        const draggingLayoutInfo = draggingItem.layoutInfo;
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfig, layoutInfo);
        let setting = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)((_a = layoutItem.setting) !== null && _a !== void 0 ? _a : {});
        let bbox;
        if (draggingItem.id == null && (draggingLayoutInfo === null || draggingLayoutInfo === void 0 ? void 0 : draggingLayoutInfo.layoutId) === layoutInfo.layoutId) {
            // from the same origin, not a pending item
            // adjust position in the same layout
            const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfig, draggingItem.layoutInfo);
            const originBBox = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.bbox;
            if (originBBox) {
                const newBBox = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.replaceBoundingBox(originBBox, snapResult, containerRect);
                // keep the original size if move item in the same layout
                bbox = newBBox.set('width', originBBox.width).set('height', originBBox.height);
            }
            else {
                bbox = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.replaceBoundingBox(null, snapResult, containerRect);
            }
        }
        else {
            bbox = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.replaceBoundingBox(null, snapResult, containerRect);
            // apply auto for new widget
            if (draggingItem.layoutInfo == null && layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
                const widgetJson = appConfig.widgets[layoutItem.widgetId];
                if ((!snapResult.width || !snapResult.height) && ((_b = widgetJson.manifest) === null || _b === void 0 ? void 0 : _b.defaultSize)) {
                    const { width, height } = widgetJson.manifest.defaultSize;
                    snapResult = Object.assign(Object.assign({}, itemRect), { width, height });
                }
                if ((_d = (_c = widgetJson.manifest) === null || _c === void 0 ? void 0 : _c.defaultSize) === null || _d === void 0 ? void 0 : _d.autoWidth) {
                    setting = setting.setIn(['autoProps', 'width'], jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto);
                }
                if ((_f = (_e = widgetJson.manifest) === null || _e === void 0 ? void 0 : _e.defaultSize) === null || _f === void 0 ? void 0 : _f.autoHeight) {
                    setting = setting.setIn(['autoProps', 'height'], jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto);
                }
            }
        }
        const applyResult = (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_3__.applySnapResult)(bbox, setting, containerRect, itemRect);
        bbox = applyResult.bbox;
        setting = applyResult.setting;
        const layoutJson = appConfig.layouts[layoutInfo.layoutId];
        const isHeader = layoutJson.parent.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Header;
        const isFooter = layoutJson.parent.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Footer;
        if (draggingItem.layoutInfo == null && (isHeader || isFooter)) {
            // header and footer should use its height in config when add widget from widget list
            const containerHeight = isHeader
                ? parseInt(`${appConfig.header.height[currentSizeMode]}`)
                : parseInt(`${appConfig.footer.height[currentSizeMode]}`);
            bbox = bbox.set('height', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.toRatio(Math.min(itemRect.height, containerHeight), containerHeight));
        }
        return [bbox, setting];
    }
    processAfterItemAdded(appConfig, draggingItem, layoutInfo, currentSizeMode, containerRect, itemRect, insertIndex, options) {
        var _a;
        const updatedAppConfig = appConfig;
        const { snapResult } = options;
        // update bbox and order
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(updatedAppConfig);
        const [bbox, setting] = this.updateBBoxAfterAdd(updatedAppConfig, draggingItem, layoutInfo, containerRect, itemRect, snapResult, currentSizeMode);
        appConfigAction
            .editLayoutItemProperty(layoutInfo, 'bbox', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.isRTL() ? (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_3__.flipBBox)(bbox) : bbox)
            .editLayoutItemProperty(layoutInfo, 'setting', setting);
        if (draggingItem.layoutInfo != null && draggingItem.layoutInfo.layoutId === layoutInfo.layoutId) {
            appConfigAction
                .editLayoutItemProperty(layoutInfo, 'setting.vCenter', false)
                .editLayoutItemProperty(layoutInfo, 'setting.hCenter', false);
        }
        if (((_a = draggingItem.layoutInfo) === null || _a === void 0 ? void 0 : _a.layoutId) !== layoutInfo.layoutId) {
            appConfigAction.adjustOrderOfItem(layoutInfo, null);
        }
        if (updatedAppConfig.useAutoSortInFixedLayout) {
            const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_4__.sortLayoutItems)(appConfigAction.appConfig.layouts[layoutInfo.layoutId], containerRect.width, containerRect.height);
            appConfigAction.editLayoutProperty(layoutInfo.layoutId, 'order', sortedLayout.order);
        }
        return appConfigAction.appConfig;
    }
    duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context) {
        const result = super.duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context);
        let updatedAppConfig = result[0];
        const newItemId = result[1];
        // maintain order
        const layoutJson = updatedAppConfig.layouts[layoutInfo.layoutId];
        const order = [].concat(layoutJson.order);
        order.push(newItemId);
        updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutInfo.layoutId, 'order'], order);
        // offset
        updatedAppConfig = this.offsetDupliateItem(updatedAppConfig, {
            layoutId: layoutInfo.layoutId,
            layoutItemId: newItemId
        });
        return [updatedAppConfig, newItemId];
    }
    getTocStructure(appConfig, layoutId) {
        var _a;
        const layoutJson = appConfig.layouts[layoutId];
        const sizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode();
        if (((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.order) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            const order = [].concat(layoutJson.order);
            return order
                .filter((itemId) => {
                const item = layoutJson.content[itemId];
                return !item.isPending;
            })
                .map((layoutItemId) => {
                const item = layoutJson.content[layoutItemId];
                const service = new jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.ContentServiceWrapper(appConfig, item);
                return service.toTocNode({ layoutId, layoutItemId }, sizeMode);
            });
        }
        return [];
    }
    getToolItems(appConfig, layoutInfo, type) {
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'view') {
            return _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_7__.viewMenuItems;
        }
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'screen') {
            return _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_8__.screenMenuItems;
        }
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfig, layoutInfo);
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return sectionMenu;
        }
        return widgetMenu;
    }
    offsetDupliateItem(appConfig, layoutInfo) {
        var _a, _b;
        const { layoutId, layoutItemId } = layoutInfo;
        const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
        let { bbox, setting } = layoutItem;
        const offset = (value) => {
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.isPercentage(value)) {
                return `${parseFloat(value) + 5}%`;
            }
            const pxValue = parseInt(value, 10);
            if (!isNaN(pxValue)) {
                return pxValue + 20;
            }
            return value;
        };
        if ((_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _a === void 0 ? void 0 : _a.left) {
            bbox = bbox.set('right', offset(bbox.right));
        }
        else {
            bbox = bbox.set('left', offset(bbox.left));
        }
        if ((_b = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _b === void 0 ? void 0 : _b.top) {
            bbox = bbox.set('bottom', offset(bbox.bottom));
        }
        else {
            bbox = bbox.set('top', offset(bbox.top));
        }
        if ((setting === null || setting === void 0 ? void 0 : setting.hCenter) && (setting === null || setting === void 0 ? void 0 : setting.vCenter)) {
            setting = setting.set('vCenter', false);
        }
        return appConfig
            .setIn(['layouts', layoutId, 'content', layoutItemId, 'bbox'], bbox)
            .setIn(['layouts', layoutId, 'content', layoutItemId, 'setting'], setting);
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/layout.tsx":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/layout.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/fixed-layout/default-setting.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/fixed-layout/builder/layout-item.tsx");
/* harmony import */ var _builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../builder/interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./util */ "./jimu-layouts/lib/fixed-layout/builder/util.ts");
/* harmony import */ var _fixed_layout_util__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../fixed-layout-util */ "./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts");
/* harmony import */ var _move_guide__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./move-guide */ "./jimu-layouts/lib/fixed-layout/builder/move-guide.ts");
/* harmony import */ var _action_block__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./action-block */ "./jimu-layouts/lib/fixed-layout/builder/action-block.tsx");
/* harmony import */ var _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../builder/interactive/canvas-pane */ "./jimu-layouts/lib/builder/interactive/canvas-pane.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/** @jsx jsx */
















const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  bottom: 0;
  top: 0;
  right: 0;
  background: transparent;
`;
const guideOverlay = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  ${dropareaStyle};
  pointer-events: none;
`;
class Layout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.handleMouseDown = (e) => {
            this.mousedownX = e.screenX;
            this.mousedownY = e.screenY;
        };
        this.updateDeviceRatio = () => {
            this.canvasPane.setSize(this.ref.clientWidth, this.ref.clientHeight, window.devicePixelRatio);
        };
        this.handleMoveItemByKey = (id, dx, dy) => {
            var _a, _b, _c;
            const { layout } = this.props;
            let itemWidth;
            let itemHeight;
            let bbox = layout.content[id].bbox;
            let setting = (_a = layout.content[id].setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            const isAlignCenter = ((_b = setting === null || setting === void 0 ? void 0 : setting.hCenter) !== null && _b !== void 0 ? _b : false) || ((_c = setting === null || setting === void 0 ? void 0 : setting.vCenter) !== null && _c !== void 0 ? _c : false);
            if (isAlignCenter) {
                const element = this.ref.querySelector(`div[data-layoutitemid="${id}"]`);
                itemWidth = element.clientWidth;
                itemHeight = element.clientHeight;
            }
            if (dx !== 0) {
                // modify left and right
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.left)) {
                    const pValue = parseFloat(bbox.left);
                    if (setting === null || setting === void 0 ? void 0 : setting.hCenter) {
                        bbox = bbox.set('left', `${(50 - (itemWidth * 100 / 2) / this.ref.clientWidth + dx * 0.1).toFixed(1)}%`);
                    }
                    else {
                        bbox = bbox.set('left', `${(pValue + dx * 0.1).toFixed(1)}%`);
                    }
                }
                else {
                    const pValue = parseFloat(bbox.left);
                    if (setting === null || setting === void 0 ? void 0 : setting.hCenter) {
                        bbox = bbox.set('left', `${(this.ref.clientWidth - itemWidth) / 2 + dx}px`);
                    }
                    else {
                        bbox = bbox.set('left', `${pValue + dx}px`);
                    }
                }
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.right)) {
                    const pValue = parseFloat(bbox.right);
                    if (setting === null || setting === void 0 ? void 0 : setting.hCenter) {
                        bbox = bbox.set('right', `${(50 + (itemWidth * 100 / 2) / this.ref.clientWidth - dx * 0.1).toFixed(1)}%`);
                    }
                    else {
                        bbox = bbox.set('right', `${(pValue - dx * 0.1).toFixed(1)}%`);
                    }
                }
                else {
                    const pValue = parseFloat(bbox.right);
                    if (setting === null || setting === void 0 ? void 0 : setting.hCenter) {
                        bbox = bbox.set('right', `${(this.ref.clientWidth + itemWidth) / 2 - dx}px`);
                    }
                    else {
                        bbox = bbox.set('right', `${pValue - dx}px`);
                    }
                }
                if (setting === null || setting === void 0 ? void 0 : setting.hCenter) {
                    setting = setting.set('hCenter', false);
                }
            }
            if (dy !== 0) {
                // modify top and bottom
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.top)) {
                    const pValue = parseFloat(bbox.top);
                    if (setting === null || setting === void 0 ? void 0 : setting.vCenter) {
                        bbox = bbox.set('top', `${(50 - (itemHeight * 100 / 2) / this.ref.clientHeight + dy * 0.1).toFixed(1)}%`);
                    }
                    else {
                        bbox = bbox.set('top', `${(pValue + dy * 0.1).toFixed(1)}%`);
                    }
                }
                else {
                    const pValue = parseFloat(bbox.top);
                    if (setting === null || setting === void 0 ? void 0 : setting.vCenter) {
                        bbox = bbox.set('top', `${(this.ref.clientHeight - itemHeight) / 2 + dy}px`);
                    }
                    else {
                        bbox = bbox.set('top', `${pValue + dy}px`);
                    }
                }
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.bottom)) {
                    const pValue = parseFloat(bbox.bottom);
                    if (setting === null || setting === void 0 ? void 0 : setting.vCenter) {
                        bbox = bbox.set('bottom', `${(50 + (itemHeight * 100 / 2) / this.ref.clientHeight - dy * 0.1).toFixed(1)}%`);
                    }
                    else {
                        bbox = bbox.set('bottom', `${(pValue - dy * 0.1).toFixed(1)}%`);
                    }
                }
                else {
                    const pValue = parseFloat(bbox.bottom);
                    if (setting === null || setting === void 0 ? void 0 : setting.hCenter) {
                        bbox = bbox.set('bottom', `${(this.ref.clientHeight + itemHeight) / 2 - dy}px`);
                    }
                    else {
                        bbox = bbox.set('bottom', `${pValue - dy}px`);
                    }
                }
                if (setting === null || setting === void 0 ? void 0 : setting.vCenter) {
                    setting = setting.set('vCenter', false);
                }
            }
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            if (isAlignCenter) {
                appConfigAction.editLayoutItemProperty({
                    layoutId: layout.id,
                    layoutItemId: id
                }, 'setting', setting);
            }
            appConfigAction.editLayoutItemProperty({
                layoutId: layout.id,
                layoutItemId: id
            }, 'bbox', bbox);
            if (appConfigAction.appConfig.useAutoSortInFixedLayout) {
                const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_11__.sortLayoutItems)(appConfigAction.appConfig.layouts[layout.id], this.ref.clientWidth, this.ref.clientHeight);
                appConfigAction.editLayoutProperty(layout.id, 'order', sortedLayout.order);
            }
            appConfigAction.exec();
        };
        this.toggleShowWidgetList = (e) => {
            e.stopPropagation();
            this.setState({ showWidgetList: !this.state.showWidgetList });
        };
        this.closeWidgetList = () => {
            if (this.state.showWidgetList) {
                this.setState({ showWidgetList: false });
            }
        };
        this.handlePageTemplateSelected = (templatePageJson) => {
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            this.setState({ isLoadingTemplate: true });
            if (this.pageContext.isHeader) {
                appConfigAction.applyHeaderTemplate(templatePageJson).then(() => {
                    appConfigAction.exec();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        this.setState({ isLoadingTemplate: false });
                    });
                }).catch(err => { console.error(err); });
            }
            else if (this.pageContext.isFooter) {
                appConfigAction.applyFooterTemplate(templatePageJson).then(() => {
                    appConfigAction.exec();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        this.setState({ isLoadingTemplate: false });
                    });
                }).catch(err => { console.error(err); });
            }
            else if (this.pageContext.isDialog) {
                appConfigAction.applyDialogTemplate(this.pageContext.dialogId, templatePageJson).then(() => {
                    appConfigAction.exec();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        this.setState({ isLoadingTemplate: false });
                    });
                }).catch(err => { console.error(err); });
            }
            else {
                appConfigAction.applyPageBodyTemplate(this.pageContext.pageId, templatePageJson)
                    .then(() => {
                    appConfigAction.exec();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        this.setState({ isLoadingTemplate: false });
                    });
                }).catch(err => { console.error(err); });
            }
        };
        if (this.props.layout == null) {
            return;
        }
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.autoBindHandlers(this, [
            'handleResizeStart',
            'handleResizing',
            'handleResizeEnd',
            'handleDragStart',
            'handleDragEnd',
            'handleDragOver',
            'handleDragEnter',
            'handleDragLeave',
            'handleDrop',
            'handleActivate',
            'handleToggleDragoverEffect'
        ]);
        const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(`${jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer}`);
        if ((exts === null || exts === void 0 ? void 0 : exts.length) > 0) {
            const ext = exts.find(item => item.layoutType === this.props.layout.type);
            this.layoutTransform = ext === null || ext === void 0 ? void 0 : ext.transformLayout;
        }
        this.flipLeftRight = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isRTL();
        this.state = {
            offsetX: 0,
            offsetY: 0,
            dw: 0,
            dh: 0,
            isDragover: false,
            showWidgetList: false,
            isLoadingTemplate: false
        };
    }
    handleActivate(e) {
        if (!(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_9__.isDesignMode)()) {
            return;
        }
        if (Math.abs(e.screenX - this.mousedownX) > jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.CLICK_TOLRERANCE ||
            Math.abs(e.screenY - this.mousedownY) > jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.CLICK_TOLRERANCE) {
            e.stopPropagation();
            return;
        }
        const { isInSection, isInWidget } = this.props;
        if (!this.pageContext.viewOnly && !isInSection && !isInWidget && !(0,_builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_10__.isResizing)() && !(0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_6__.isDragging)()) {
            e.stopPropagation();
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
        }
    }
    componentDidMount() {
        var _a, _b, _c;
        this.canvasPane = new _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_15__.CanvasPane(this.canvasRef, this.pageContext.builderTheme);
        this.updateDeviceRatio();
        // monitor devicePixelRatio change
        const mqString = `(resolution: ${window.devicePixelRatio}dppx)`;
        this.mediaQueryList = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, mqString);
        const { name, version } = window.jimuUA.browser;
        if (name.toLowerCase() === 'safari' && parseInt(version) < 14) {
            (_b = this.mediaQueryList) === null || _b === void 0 ? void 0 : _b.addListener(this.updateDeviceRatio);
        }
        else {
            (_c = this.mediaQueryList) === null || _c === void 0 ? void 0 : _c.addEventListener('change', this.updateDeviceRatio);
        }
    }
    componentWillUnmount() {
        var _a, _b;
        const { name, version } = window.jimuUA.browser;
        if (name.toLowerCase() === 'safari' && parseInt(version) < 14) {
            (_a = this.mediaQueryList) === null || _a === void 0 ? void 0 : _a.removeListener(this.updateDeviceRatio);
        }
        else {
            (_b = this.mediaQueryList) === null || _b === void 0 ? void 0 : _b.removeEventListener('change', this.updateDeviceRatio);
        }
    }
    componentDidUpdate() {
        this.updateDeviceRatio();
    }
    isResizingItem() {
        return this.state.dh !== 0 || this.state.dw !== 0;
    }
    handleResizeStart(id) {
        const { layout } = this.props;
        this.rndingLayoutId = id;
        const draggingChild = this.ref.querySelector(`div.exb-rnd[data-layoutid="${layout.id}"][data-layoutitemid="${id}"]`);
        this.domRect = this.ref.getBoundingClientRect();
        this.bboxGridlines = (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.getGridlinesOfLayout)(this.props.layout, this.domRect.width, this.domRect.height, id);
        const rect = draggingChild.getBoundingClientRect();
        const units = this.getPositionUnit(id);
        this.resizingRect = Object.assign({ units }, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.relativeClientRect(rect, this.domRect));
    }
    getResizingDelta(id, dx, dy, dw, dh, shiftKey) {
        const layoutItem = this.props.layout.content[id];
        const rndDelta = (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.moveGuide)(layoutItem, this.domRect, this.resizingRect, { x: dx, w: dw, y: dy, h: dh }, shiftKey, this.bboxGridlines, this.canvasPane, this.pageContext.builderTheme);
        return rndDelta;
    }
    handleResizing(id, dx, dy, dw, dh, shiftKey, speed) {
        this.canvasPane.clear();
        if (speed > 500) {
            this.setState({
                offsetX: dx,
                offsetY: dy,
                dw: dw,
                dh: dh
            });
            return;
        }
        const rndDelta = this.getResizingDelta(id, dx, dy, dw, dh, shiftKey);
        this.setState({
            offsetX: rndDelta.x,
            offsetY: rndDelta.y,
            dw: rndDelta.w,
            dh: rndDelta.h
        });
    }
    handleResizeEnd(id, dx, dy, dw, dh, shiftKey, layoutItem, itemSetting) {
        var _a, _b;
        this.rndingLayoutId = null;
        const { layout } = this.props;
        const delta = this.getResizingDelta(id, dx, dy, dw, dh, shiftKey);
        this.canvasPane.clear();
        const newPos = (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_12__.generateResizingBBoxStyle)(this.resizingRect, this.domRect, {
            dx: delta.x,
            dy: delta.y,
            dw: delta.w,
            dh: delta.h
        });
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const layoutInfo = { layoutId: layout.id, layoutItemId: id };
        const { bbox, setting } = (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_12__.applySnapResult)((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layoutItem.bbox), layoutItem.setting, this.domRect, newPos);
        let newBBox = bbox;
        if ((itemSetting === null || itemSetting === void 0 ? void 0 : itemSetting.hCenter) && ((_a = layoutItem.bbox) === null || _a === void 0 ? void 0 : _a.left) === '50%') {
            newBBox = newBBox.set('left', '50%');
        }
        if ((itemSetting === null || itemSetting === void 0 ? void 0 : itemSetting.vCenter) && ((_b = layoutItem.bbox) === null || _b === void 0 ? void 0 : _b.top) === '50%') {
            newBBox = newBBox.set('top', '50%');
        }
        appConfigAction
            .editLayoutItemProperty(layoutInfo, 'bbox', this.flipLeftRight ? (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_12__.flipBBox)(newBBox) : newBBox)
            .editLayoutItemProperty(layoutInfo, 'setting', setting);
        if (appConfigAction.appConfig.useAutoSortInFixedLayout) {
            const sortedLayout = (0,_util__WEBPACK_IMPORTED_MODULE_11__.sortLayoutItems)(appConfigAction.appConfig.layouts[layoutInfo.layoutId], this.domRect.width, this.domRect.height);
            appConfigAction.editLayoutProperty(layoutInfo.layoutId, 'order', sortedLayout.order);
        }
        appConfigAction.exec();
        this.bboxGridlines = null;
        this.setState({
            offsetX: 0,
            offsetY: 0,
            dw: 0,
            dh: 0
        });
    }
    handleDragOver(draggingItem, draggingElement, containerRect, itemRect, clientX, clientY, speed) {
        var _a, _b, _c;
        this.canvasPane.clear();
        if (!this.state.isDragover || speed > 500) {
            return;
        }
        // const gridlines = this.calculateGridlines(draggingItem, itemRect)
        let deltaX = 0;
        let deltaY = 0;
        let excludeItemId;
        let layoutItem;
        let units;
        if (((_a = draggingItem.layoutInfo) === null || _a === void 0 ? void 0 : _a.layoutId) === this.props.layout.id) {
            excludeItemId = draggingItem.layoutInfo.layoutItemId;
            units = this.getPositionUnit(excludeItemId);
            layoutItem = this.props.layout.content[excludeItemId];
        }
        else {
            units = (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.getBBoxUnits)({}, this.flipLeftRight);
        }
        const hasRotation = draggingItem.rotation > 0 || draggingItem.rotation < 0;
        const rndDelta = (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.moveGuide)(layoutItem, this.domRect, itemRect, {
            x: 0,
            y: 0,
            w: 0,
            h: 0
        }, false, this.bboxGridlines, hasRotation ? null : this.canvasPane, hasRotation ? null : this.pageContext.builderTheme);
        // snap draggingElement
        if (draggingElement != null && (rndDelta.x !== 0 || rndDelta.y !== 0)) {
            const tx = (_b = parseFloat(draggingElement.getAttribute('data-translatex'))) !== null && _b !== void 0 ? _b : 0;
            const ty = (_c = parseFloat(draggingElement.getAttribute('data-translatey'))) !== null && _c !== void 0 ? _c : 0;
            draggingElement.style.transform = `translate(${tx + rndDelta.x}px, ${ty + rndDelta.y}px)`;
        }
        deltaX = rndDelta.x;
        deltaY = rndDelta.y;
        this.canvasPane.setColor(this.pageContext.builderTheme.colors.palette.primary[600]);
        const rect = {
            width: itemRect.width,
            height: itemRect.height,
            left: itemRect.left + deltaX,
            top: itemRect.top + deltaY,
            units
        };
        (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.drawPosition)(rect, this.domRect, this.canvasPane);
        if (draggingItem.layoutInfo == null || draggingItem.isPending) {
            this.canvasPane.setColor(jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(this.pageContext.builderTheme.colors.palette.primary[700], 0.2));
            const rect = {
                left: itemRect.left + deltaX,
                top: itemRect.top + deltaY,
                width: itemRect.width,
                height: itemRect.height
            };
            this.canvasPane.drawRect(rect);
        }
    }
    handleToggleDragoverEffect(value, draggingItem) {
        var _a;
        this.canvasPane.clear();
        if (value) {
            this.domRect = this.ref.getBoundingClientRect();
            let excludeId;
            if (((_a = draggingItem.layoutInfo) === null || _a === void 0 ? void 0 : _a.layoutId) === this.props.layout.id) {
                excludeId = draggingItem.layoutInfo.layoutItemId;
            }
            this.bboxGridlines = (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.getGridlinesOfLayout)(this.props.layout, this.domRect.width, this.domRect.height, excludeId);
        }
        this.setState({
            isDragover: value
        });
    }
    handleDragEnter(draggingItem) { }
    handleDragLeave() { }
    handleDrop(draggingItem, containerRect, itemRect) {
        let units;
        if (draggingItem.layoutInfo == null ||
            draggingItem.layoutInfo.layoutId !== this.props.layout.id) {
            units = (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.getBBoxUnits)({}, this.flipLeftRight);
        }
        else {
            units = this.getPositionUnit(draggingItem.layoutInfo.layoutItemId);
        }
        const { snappedRect, delta } = this.calSnappedRect(draggingItem, containerRect, Object.assign({ units }, itemRect), draggingItem.layoutInfo);
        this.canvasPane.clear();
        const rect = {
            left: itemRect.left + delta.x,
            top: itemRect.top + delta.y,
            width: itemRect.width,
            height: itemRect.height,
            right: containerRect.width - (itemRect.left + delta.x + itemRect.width),
            bottom: containerRect.height - (itemRect.top + delta.y + itemRect.height)
        };
        this.addWidgetToLayout(draggingItem, containerRect, rect, snappedRect).catch(err => { console.error(err); });
        this.bboxGridlines = null;
    }
    calSnappedRect(draggingItem, containerRect, itemRect, layoutInfo) {
        let layoutItem;
        if ((layoutInfo === null || layoutInfo === void 0 ? void 0 : layoutInfo.layoutId) === this.props.layout.id) {
            layoutItem = this.props.layout.content[layoutInfo.layoutItemId];
        }
        const delta = (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.moveGuide)(layoutItem, this.domRect, itemRect, { x: 0, y: 0, w: 0, h: 0 }, false, this.bboxGridlines);
        const snappedRect = {
            left: itemRect.left + delta.x,
            top: itemRect.top + delta.y,
            width: itemRect.width,
            height: itemRect.height
        };
        snappedRect.right = containerRect.width - ((+snappedRect.left) + (+snappedRect.width));
        snappedRect.bottom = containerRect.height - ((+snappedRect.top) + (+snappedRect.height));
        if (itemRect.width > containerRect.width) {
            snappedRect.width = containerRect.width;
            snappedRect.left = 0;
        }
        if (itemRect.height > containerRect.height) {
            snappedRect.height = containerRect.height;
            snappedRect.top = 0;
        }
        // Use percentage size by default
        snappedRect.left = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(snappedRect.left, containerRect.width);
        snappedRect.top = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(snappedRect.top, containerRect.height);
        snappedRect.width = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(snappedRect.width, containerRect.width);
        snappedRect.height = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(snappedRect.height, containerRect.height);
        snappedRect.right = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(snappedRect.right, containerRect.width);
        snappedRect.bottom = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(snappedRect.bottom, containerRect.height);
        return { snappedRect, delta };
    }
    addWidgetToLayout(draggingItem, containerRect, itemRect, snapResult, appConfig) {
        return __awaiter(this, void 0, void 0, function* () {
            const { layout, browserSizeMode } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
            const result = yield (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_8__.addItemToLayout)(appConfigAction.appConfig, draggingItem, layout.id);
            const { layoutInfo, updatedAppConfig } = result;
            const service = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FixedLayout);
            const outAppConfig = service.processAfterItemAdded(updatedAppConfig, draggingItem, layoutInfo, browserSizeMode, containerRect, itemRect, null, { snapResult });
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(outAppConfig, layoutInfo));
        });
    }
    getPositionUnit(layoutItemId) {
        const layoutItem = this.props.layout.content[layoutItemId];
        const bbox = layoutItem.bbox;
        return (0,_move_guide__WEBPACK_IMPORTED_MODULE_13__.getBBoxUnits)(bbox, this.flipLeftRight);
    }
    createItem(targetLayout, layoutItemId, key) {
        const { itemResizable, itemDraggable, itemSelectable, showDefaultTools } = this.props;
        const { offsetX, offsetY, dw, dh } = this.state;
        const deltaX = layoutItemId === this.rndingLayoutId ? offsetX : 0;
        const deltaY = layoutItemId === this.rndingLayoutId ? offsetY : 0;
        const deltaW = layoutItemId === this.rndingLayoutId ? dw : 0;
        const deltaH = layoutItemId === this.rndingLayoutId ? dh : 0;
        const initRect = layoutItemId === this.rndingLayoutId ? this.resizingRect : undefined;
        const containerRect = layoutItemId === this.rndingLayoutId ? this.domRect : undefined;
        const layoutItem = targetLayout.content[layoutItemId];
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_5__["default"], { key: `${targetLayout.id}_${layoutItemId}`, index: key, layoutItem: layoutItem, offsetX: deltaX, offsetY: deltaY, dw: deltaW, dh: deltaH, initRect: initRect, containerRect: containerRect, layoutId: targetLayout.id, layoutItemId: layoutItemId, draggable: itemDraggable, resizable: itemResizable, selectable: itemSelectable, showDefaultTools: showDefaultTools, isLayoutLockChildren: this.layoutSetting.lockChildren, onResizeStart: this.handleResizeStart, onResizing: this.handleResizing, onResizeEnd: this.handleResizeEnd, onMoveByKey: this.handleMoveItemByKey, isInSection: this.props.isInSection }));
    }
    render() {
        const { layout, className, style, layouts, isPageItem, mainSizeMode, browserSizeMode } = this.props;
        if (layout == null) {
            return null;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.PageContext.Consumer, null, (props) => {
            var _a, _b;
            this.pageContext = props;
            let targetLayout = layout;
            const viewOnly = layouts[browserSizeMode] !== layout.id;
            if (viewOnly && this.layoutTransform != null) {
                targetLayout = this.layoutTransform(layout, mainSizeMode, browserSizeMode);
            }
            this.layoutSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_FIX_LAYOUT_SETTING, viewOnly ? {} : layout.setting);
            const content = (_a = targetLayout.order) !== null && _a !== void 0 ? _a : [];
            const mergedClasses = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout fixed-layout', className, {
                [_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_6__.LIMITED_BOUNDARY_CLASS_NAME]: (_b = layout.setting) === null || _b === void 0 ? void 0 : _b.lockDescendants
            });
            const isResizing = this.state.dh !== 0 || this.state.dw !== 0;
            const mergedStyle = Object.assign(Object.assign(Object.assign({ height: 'auto', position: 'relative' }, style), jimu_ui__WEBPACK_IMPORTED_MODULE_2__.styleUtils.toCSSStyle(this.layoutSetting.style)), { width: '100%', overflow: 'hidden' });
            const guideVisibleStyle = {
                display: this.state.isDragover || isResizing ? 'block' : 'none',
                zIndex: content.length + 1
            };
            const showActionBlock = !this.state.isLoadingTemplate &&
                jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isEmptyLayout(targetLayout) &&
                !props.viewOnly &&
                layout.id === props.rootLayoutId;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: mergedClasses, ref: el => (this.ref = el), onClick: this.handleActivate, onMouseDown: this.handleMouseDown, style: mergedStyle, "data-layoutid": targetLayout.id },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: false } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: targetLayout.id, "data-layoutid": targetLayout.id, className: 'trail-container', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                    position: absolute;
                    left: 0;
                    right: 0;
                    top: 0;
                    bottom: 0;
                  ` },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_7__.DropArea, { css: dropareaStyle, layouts: this.props.layouts, highlightDragover: !isPageItem, onDragEnter: this.handleDragEnter, onDragLeave: this.handleDragLeave, onDragOver: this.handleDragOver, onDrop: this.handleDrop, onToggleDragoverEffect: this.handleToggleDragoverEffect, isRepeat: this.props.isRepeat }),
                        content.map((layoutItemId, index) => this.createItem(targetLayout, layoutItemId, index)))),
                showActionBlock && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_action_block__WEBPACK_IMPORTED_MODULE_14__.ActionBlock, { pageContext: this.pageContext, onPageTemplateSelected: this.handlePageTemplateSelected })),
                this.state.isLoadingTemplate && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Primary })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas", { css: guideOverlay, style: guideVisibleStyle, ref: el => (this.canvasRef = el) })));
        }));
    }
}
Layout.displayName = 'FixedLayout';
// const DroppableLayout = withDrop()(Layout);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.mapStateToLayoutProps)(Layout));


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/move-edge-guide.ts":
/*!******************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/move-edge-guide.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   drawHorizontalCandidate: () => (/* binding */ drawHorizontalCandidate),
/* harmony export */   drawHorizontalSnapLine: () => (/* binding */ drawHorizontalSnapLine),
/* harmony export */   drawVerticalCandidate: () => (/* binding */ drawVerticalCandidate),
/* harmony export */   drawVerticalSnapLine: () => (/* binding */ drawVerticalSnapLine),
/* harmony export */   findRelated: () => (/* binding */ findRelated),
/* harmony export */   isRelated: () => (/* binding */ isRelated),
/* harmony export */   isSamePosition: () => (/* binding */ isSamePosition),
/* harmony export */   snapToEdge: () => (/* binding */ snapToEdge)
/* harmony export */ });
/* harmony import */ var _move_guide_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./move-guide-common */ "./jimu-layouts/lib/fixed-layout/builder/move-guide-common.ts");

function distance(source, target) {
    return Math.abs(target.pixelValue - source.pixelValue);
}
/**
 * Check if the gridline should be involved when calculating snapping in horizontal direction
 * 1. Distance is less than 4 times of snap tolerance
 * 2. Unit should compatible:
 *   2.1 both in pixel and use the same origin
 *   2.2 both in percentage
 * @param source
 * @param target
 */
function isRelated(source, target) {
    if (distance(target, source) < 4 * _move_guide_common__WEBPACK_IMPORTED_MODULE_0__.SNAP_TOLERANCE) {
        const targetUsePercentage = target.usePercentage;
        const sourceUsePercentage = source.usePercentage;
        if (targetUsePercentage === sourceUsePercentage) {
            return targetUsePercentage || target.origin === source.origin;
        }
    }
    return false;
}
function isSamePosition(source, delta, target) {
    if (source.pixelValue + delta === target.pixelValue) {
        const targetUsePercentage = target.usePercentage;
        const sourceUsePercentage = source.usePercentage;
        if (targetUsePercentage === sourceUsePercentage) {
            return targetUsePercentage || target.origin === source.origin;
        }
    }
    return false;
}
function findRelated(activeItem, gridlines) {
    const relatedList = gridlines
        .filter(item => isRelated(activeItem, item))
        .sort((a, b) => distance(a, activeItem) - distance(b, activeItem)); // previous use reverse order
    return relatedList;
}
function drawHorizontalSnapLine(activeItems, // top, ym and bottom
otherItems, deltaY, canvasPane, theme) {
    if (canvasPane != null && theme != null) {
        canvasPane.setColor(theme.colors.palette.danger[500]);
        activeItems.forEach(activeItem => {
            if (activeItem != null) {
                let xmin = activeItem.from;
                let xmax = activeItem.to;
                let hasSamePosition = false;
                otherItems.forEach(otherItem => {
                    if (isSamePosition(activeItem, deltaY, otherItem)) {
                        xmin = Math.min(xmin, otherItem.from);
                        xmax = Math.max(xmax, otherItem.to);
                        hasSamePosition = true;
                    }
                });
                if (hasSamePosition) {
                    const y = activeItem.pixelValue + deltaY;
                    canvasPane.drawLine(xmin, y, xmax, y);
                }
            }
        });
    }
}
function drawHorizontalCandidate(snapItem, canvasPane, theme) {
    if (canvasPane != null && theme != null) {
        canvasPane.setColor(theme.colors.palette.danger[500]);
        canvasPane.drawLine(snapItem.from, snapItem.pixelValue, snapItem.to, snapItem.pixelValue, true);
    }
}
function drawVerticalCandidate(snapItem, canvasPane, theme) {
    if (canvasPane != null && theme != null) {
        canvasPane.setColor(theme.colors.palette.danger[500]);
        canvasPane.drawLine(snapItem.pixelValue, snapItem.from, snapItem.pixelValue, snapItem.to, true);
    }
}
function drawVerticalSnapLine(activeItems, // left, xm and right
otherItems, deltaX, canvasPane, theme) {
    if (canvasPane != null && theme != null) {
        canvasPane.setColor(theme.colors.palette.danger[500]);
        activeItems.forEach(activeItem => {
            if (activeItem != null) {
                let ymin = activeItem.from;
                let ymax = activeItem.to;
                let hasSamePosition = false;
                otherItems.forEach(otherItem => {
                    if (isSamePosition(activeItem, deltaX, otherItem)) {
                        ymin = Math.min(ymin, otherItem.from);
                        ymax = Math.max(ymax, otherItem.to);
                        hasSamePosition = true;
                    }
                });
                if (hasSamePosition) {
                    const x = activeItem.pixelValue + deltaX;
                    canvasPane.drawLine(x, ymin, x, ymax);
                }
            }
        });
    }
}
function snapToEdge(activeItem, bboxGridlines, delta, canSnapToX, canSnapToY, canvasPane, theme) {
    let dx = 0;
    let dy = 0;
    if (!canSnapToX && !canSnapToY) {
        return { dx, dy };
    }
    let verticalLines = [];
    let horizontalLines = [];
    bboxGridlines.forEach(item => {
        if (canSnapToX) {
            // eslint-disable-next-line
            const v = [item.left, item.xm, item.right].filter(line => {
                var _a, _b, _c;
                if (line != null) {
                    // from and to may be undefined if height is auto
                    line.from = (_a = item.rect.top) !== null && _a !== void 0 ? _a : item.rect.bottom;
                    line.to = (item.rect.top >= 0 && item.rect.bottom >= 0) ? item.rect.bottom : activeItem.rect.top;
                    if (delta.w !== 0) {
                        return delta.x === 0
                            ? line.pixelValue >= ((_b = activeItem.right) === null || _b === void 0 ? void 0 : _b.pixelValue)
                            : line.pixelValue <= ((_c = activeItem.left) === null || _c === void 0 ? void 0 : _c.pixelValue);
                    }
                    else if (delta.h !== 0) {
                        return false;
                    }
                    return true;
                }
            });
            verticalLines = verticalLines.concat(v);
        }
        if (canSnapToY) {
            // eslint-disable-next-line
            const h = [item.top, item.ym, item.bottom].filter(line => {
                var _a, _b, _c;
                if (line != null) {
                    // from and to may be undefined if width is auto
                    line.from = (_a = item.rect.left) !== null && _a !== void 0 ? _a : item.rect.right;
                    line.to = (item.rect.left >= 0 && item.rect.right >= 0) ? item.rect.right : activeItem.rect.left;
                    if (delta.h !== 0) {
                        return delta.y === 0
                            ? line.pixelValue >= ((_b = activeItem.bottom) === null || _b === void 0 ? void 0 : _b.pixelValue)
                            : line.pixelValue <= ((_c = activeItem.top) === null || _c === void 0 ? void 0 : _c.pixelValue);
                    }
                    else if (delta.w !== 0) {
                        return false;
                    }
                    return true;
                }
            });
            horizontalLines = horizontalLines.concat(h);
        }
    });
    // 1. horizontal
    if (canSnapToX) {
        const xEdges = [activeItem.left, activeItem.xm, activeItem.right];
        // eslint-disable-next-line
        xEdges.some(gridline => {
            if (gridline != null) {
                const candidates = findRelated(gridline, verticalLines);
                if ((candidates === null || candidates === void 0 ? void 0 : candidates.length) > 0) {
                    if (canvasPane != null && theme != null) {
                        candidates.forEach(candidate => { drawVerticalCandidate(candidate, canvasPane, theme); });
                    }
                    const nearest = candidates[0];
                    if (distance(nearest, gridline) <= _move_guide_common__WEBPACK_IMPORTED_MODULE_0__.SNAP_TOLERANCE) {
                        dx = nearest.pixelValue - gridline.pixelValue;
                        drawVerticalSnapLine(xEdges, verticalLines, dx, canvasPane, theme);
                        return true;
                    }
                }
            }
        });
    }
    // 2. vertical
    if (canSnapToY) {
        const yEdges = [activeItem.top, activeItem.ym, activeItem.bottom];
        // eslint-disable-next-line
        yEdges.some(gridline => {
            if (gridline != null) {
                const candidates = findRelated(gridline, horizontalLines);
                if ((candidates === null || candidates === void 0 ? void 0 : candidates.length) > 0) {
                    if (canvasPane != null && theme != null) {
                        candidates.forEach(candidate => { drawHorizontalCandidate(candidate, canvasPane, theme); });
                    }
                    const nearest = candidates[0];
                    if (distance(nearest, gridline) <= _move_guide_common__WEBPACK_IMPORTED_MODULE_0__.SNAP_TOLERANCE) {
                        dy = nearest.pixelValue - gridline.pixelValue;
                        drawHorizontalSnapLine(yEdges, horizontalLines, dy, canvasPane, theme);
                        return true;
                    }
                }
            }
        });
    }
    return { dx, dy };
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/move-guide-common.ts":
/*!********************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/move-guide-common.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SNAP_TOLERANCE: () => (/* binding */ SNAP_TOLERANCE)
/* harmony export */ });
const SNAP_TOLERANCE = 5; // tolerance for snap


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/move-guide.ts":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/move-guide.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FixedSides: () => (/* binding */ FixedSides),
/* harmony export */   drawPosition: () => (/* binding */ drawPosition),
/* harmony export */   flipDelta: () => (/* binding */ flipDelta),
/* harmony export */   getBBoxOrigin: () => (/* binding */ getBBoxOrigin),
/* harmony export */   getBBoxUnits: () => (/* binding */ getBBoxUnits),
/* harmony export */   getGridlineOfActiveItem: () => (/* binding */ getGridlineOfActiveItem),
/* harmony export */   getGridlineOfLayoutItem: () => (/* binding */ getGridlineOfLayoutItem),
/* harmony export */   getGridlines: () => (/* binding */ getGridlines),
/* harmony export */   getGridlinesOfLayout: () => (/* binding */ getGridlinesOfLayout),
/* harmony export */   getRectOfLayoutItem: () => (/* binding */ getRectOfLayoutItem),
/* harmony export */   getRectOrigin: () => (/* binding */ getRectOrigin),
/* harmony export */   isSameOrigin: () => (/* binding */ isSameOrigin),
/* harmony export */   isSnapToPercentage: () => (/* binding */ isSnapToPercentage),
/* harmony export */   isValidGridline: () => (/* binding */ isValidGridline),
/* harmony export */   moveGuide: () => (/* binding */ moveGuide),
/* harmony export */   updateDelta: () => (/* binding */ updateDelta)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _move_space_guide__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./move-space-guide */ "./jimu-layouts/lib/fixed-layout/builder/move-space-guide.ts");
/* harmony import */ var _move_edge_guide__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./move-edge-guide */ "./jimu-layouts/lib/fixed-layout/builder/move-edge-guide.ts");
/* harmony import */ var jimu_layouts_lib_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/lib/utils */ "./jimu-layouts/lib/utils.ts");





const minSize = 16;
var FixedSides;
(function (FixedSides) {
    FixedSides[FixedSides["Start"] = 0] = "Start";
    FixedSides[FixedSides["End"] = 1] = "End";
    FixedSides[FixedSides["None"] = 2] = "None";
})(FixedSides || (FixedSides = {}));
function gridlineSotrer(a, b) {
    return a.pixelValue - b.pixelValue;
}
function getBBoxUnits(bbox, rtl = false) {
    const result = {};
    const allProps = ['left', 'right', 'width', 'top', 'bottom', 'height'];
    allProps.forEach(prop => {
        if ((bbox === null || bbox === void 0 ? void 0 : bbox[prop]) != null) {
            result[prop] = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox[prop]) ? '%' : 'px';
        }
        else {
            result[prop] = '%'; // Use percentage by default
        }
    });
    if (rtl) { // swap left and right in RTL
        const temp = result.left;
        result.left = result.right;
        result.right = temp;
    }
    return result;
}
function drawPosition(itemRect, containerRect, canvasPane) {
    const right = containerRect.width - (itemRect.left + itemRect.width);
    const bottom = containerRect.height - (itemRect.top + itemRect.height);
    const leftValue = itemRect.units.left === 'px'
        ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${Math.round(itemRect.left)}px`)
        : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(itemRect.left, containerRect.width));
    const rightValue = itemRect.units.right === 'px'
        ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${Math.round(right)}px`)
        : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(right, containerRect.width));
    const topValue = itemRect.units.top === 'px'
        ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${Math.round(itemRect.top)}px`)
        : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(itemRect.top, containerRect.height));
    const bottomValue = itemRect.units.bottom === 'px'
        ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${Math.round(bottom)}px`)
        : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(bottom, containerRect.height));
    if (itemRect.left <= right) {
        if (itemRect.top <= bottom) {
            // top-left
            canvasPane.drawLine(0, itemRect.top, itemRect.left, itemRect.top, false, leftValue);
            canvasPane.drawLine(itemRect.left, 0, itemRect.left, itemRect.top, false, topValue);
        }
        else {
            // bottom-left
            canvasPane.drawLine(0, itemRect.top + itemRect.height, itemRect.left, itemRect.top + itemRect.height, false, leftValue);
            canvasPane.drawLine(itemRect.left, itemRect.top + itemRect.height, itemRect.left, containerRect.height, false, bottomValue);
        }
    }
    else {
        if (itemRect.top <= bottom) {
            // top-right
            canvasPane.drawLine(itemRect.left + itemRect.width, itemRect.top, containerRect.width, itemRect.top, false, rightValue);
            canvasPane.drawLine(itemRect.left + itemRect.width, 0, itemRect.left + itemRect.width, itemRect.top, false, topValue);
        }
        else {
            // bottom-right
            canvasPane.drawLine(itemRect.left + itemRect.width, itemRect.top + itemRect.height, containerRect.width, itemRect.top + itemRect.height, false, rightValue);
            canvasPane.drawLine(itemRect.left + itemRect.width, itemRect.top + itemRect.height, itemRect.left + itemRect.width, containerRect.height, false, bottomValue);
        }
    }
}
function isValidGridline(gridline, origin, snapToPercentage) {
    if (gridline == null) {
        return false;
    }
    const { origin: posOrigin, value } = gridline;
    if (snapToPercentage) {
        // percentage could ignore the origin, since all value of gridline is origin from top-left
        return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(value);
    }
    return posOrigin === origin && jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(value) === snapToPercentage;
}
/**
 * Check if the itemRect should snap to pixel value or percentage value
 * @param bbox The bbox property of the itemRect. Only exists when dragging or resizing a item already in the layout
 * @param itemRect Rect in pixel of the dragging/resizing layout item
 * @param containerWidth
 * @param containerHeight
 */
function isSnapToPercentage(bbox, itemRect, containerWidth, containerHeight) {
    const result = { leftRight: true, topBottom: true };
    if (bbox == null) {
        return result;
    }
    const bboxUnits = getBBoxUnits(bbox, (0,jimu_layouts_lib_utils__WEBPACK_IMPORTED_MODULE_4__.isRTL)());
    const [xOrigin, yOrigin] = getRectOrigin(itemRect, {
        width: containerWidth,
        height: containerHeight
    });
    result.leftRight =
        xOrigin === 0 ? bboxUnits.left === '%' : bboxUnits.right === '%';
    result.topBottom =
        yOrigin === 0 ? bboxUnits.top === '%' : bboxUnits.bottom === '%';
    return result;
}
function getRectOrigin(itemRect, containerRect) {
    const top = itemRect.top;
    const bottom = containerRect.height - (itemRect.top + itemRect.height);
    const left = itemRect.left;
    const right = containerRect.width - (itemRect.left + itemRect.width);
    const xOrigin = right < left ? 1 : 0;
    const yOrigin = bottom < top ? 1 : 0;
    return [xOrigin, yOrigin];
}
function getBBoxOrigin(setting) {
    var _a, _b, _c, _d;
    let xOrigin = NaN;
    let yOrigin = NaN;
    if (((_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _a === void 0 ? void 0 : _a.width) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        xOrigin = ((_b = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _b === void 0 ? void 0 : _b.left) ? 1 : 0;
    }
    if (((_c = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _c === void 0 ? void 0 : _c.height) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        yOrigin = ((_d = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _d === void 0 ? void 0 : _d.top) ? 1 : 0;
    }
    return [xOrigin, yOrigin];
}
function isSameOrigin(itemRect, setting, containerWidth, containerHeight) {
    const containerRect = { width: containerWidth, height: containerHeight };
    const rectOrigin = getRectOrigin(itemRect, containerRect);
    const bboxOrigin = getBBoxOrigin(setting);
    return [
        rectOrigin[0] === bboxOrigin[0] || isNaN(bboxOrigin[0]),
        rectOrigin[1] === bboxOrigin[1] || isNaN(bboxOrigin[1])
    ];
}
function getPixelValue(value, total) {
    return jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(value)
        ? Math.round(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.fromRatio(value, total))
        : Math.round(parseFloat(value));
}
function getRectOfLayoutItem(layoutItem, containerWidth, containerHeight) {
    var _a, _b, _c;
    const rect = {};
    const bbox = (_a = layoutItem.bbox) !== null && _a !== void 0 ? _a : {};
    const autoProps = (_c = (_b = layoutItem.setting) === null || _b === void 0 ? void 0 : _b.autoProps) !== null && _c !== void 0 ? _c : {};
    if (autoProps.width === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        rect.left = getPixelValue(bbox.left, containerWidth);
        rect.right = containerWidth - getPixelValue(bbox.right, containerWidth);
        rect.width = rect.right - rect.left;
    }
    else if (autoProps.width === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
        if (autoProps.left) {
            rect.right = containerWidth - getPixelValue(bbox.right, containerWidth);
        }
        else {
            rect.left = getPixelValue(bbox.left, containerWidth);
        }
    }
    else {
        rect.width = getPixelValue(bbox.width, containerWidth);
        if (autoProps.left) {
            rect.right = containerWidth - getPixelValue(bbox.right, containerWidth);
            rect.left = rect.right - rect.width;
        }
        else {
            rect.left = getPixelValue(bbox.left, containerWidth);
            rect.right = rect.left + rect.width;
        }
    }
    if (autoProps.height === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        rect.top = getPixelValue(bbox.top, containerHeight);
        rect.bottom = containerHeight - getPixelValue(bbox.bottom, containerHeight);
        rect.height = rect.bottom - rect.top;
    }
    else if (autoProps.height === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
        if (autoProps.top) {
            rect.bottom =
                containerHeight - getPixelValue(bbox.bottom, containerHeight);
        }
        else {
            rect.top = getPixelValue(bbox.top, containerHeight);
        }
    }
    else {
        rect.height = getPixelValue(bbox.height, containerHeight);
        if (autoProps.top) {
            rect.bottom =
                containerHeight - getPixelValue(bbox.bottom, containerHeight);
            rect.top = rect.bottom - rect.height;
        }
        else {
            rect.top = getPixelValue(bbox.top, containerHeight);
            rect.bottom = rect.top + rect.height;
        }
    }
    return rect;
}
function getGridlineOfActiveItem(layoutItem, itemRect, containerWidth, containerHeight, delta) {
    var _a, _b, _c, _d, _e, _f, _g;
    const { x: dx, y: dy, w: dw, h: dh } = delta !== null && delta !== void 0 ? delta : { x: 0, y: 0, w: 0, h: 0 };
    const setting = (_a = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) !== null && _a !== void 0 ? _a : {};
    const currentRect = {
        left: Math.round(itemRect.left + dx),
        width: Math.round(itemRect.width + dw),
        right: 0,
        top: Math.round(itemRect.top + dy),
        height: Math.round(itemRect.height + dh),
        bottom: 0
    };
    currentRect.right = currentRect.left + currentRect.width;
    currentRect.bottom = currentRect.top + currentRect.height;
    const result = { id: layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.id, rect: currentRect };
    const rectOrigin = getRectOrigin(currentRect, {
        width: containerWidth,
        height: containerHeight
    });
    const bboxUnits = getBBoxUnits(layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.bbox, (0,jimu_layouts_lib_utils__WEBPACK_IMPORTED_MODULE_4__.isRTL)());
    if ((0,jimu_layouts_lib_utils__WEBPACK_IMPORTED_MODULE_4__.isRTL)()) {
        const left = bboxUnits.left;
        bboxUnits.left = bboxUnits.right;
        bboxUnits.right = left;
    }
    if (((_b = setting.autoProps) === null || _b === void 0 ? void 0 : _b.width) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        result.left = {
            value: `1${bboxUnits.left}`,
            pixelValue: currentRect.left,
            usePercentage: bboxUnits.left === '%',
            origin: rectOrigin[0],
            from: currentRect.top,
            to: currentRect.bottom
        };
        result.right = {
            value: `1${bboxUnits.right}`,
            pixelValue: currentRect.left + currentRect.width,
            usePercentage: bboxUnits.right === '%',
            origin: rectOrigin[1],
            from: currentRect.top,
            to: currentRect.bottom
        };
    }
    else if (rectOrigin[0] === 0) {
        result.left = {
            value: `1${bboxUnits.left}`,
            pixelValue: currentRect.left,
            usePercentage: bboxUnits.left === '%',
            origin: rectOrigin[0],
            from: currentRect.top,
            to: currentRect.bottom
        };
        if (bboxUnits.width === bboxUnits.left &&
            ((_c = setting.autoProps) === null || _c === void 0 ? void 0 : _c.width) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
            result.xm = {
                value: `1${bboxUnits.left}`,
                pixelValue: currentRect.left + currentRect.width / 2,
                usePercentage: bboxUnits.left === '%',
                origin: rectOrigin[0],
                from: currentRect.top,
                to: currentRect.bottom
            };
            result.right = {
                value: `1${bboxUnits.left}`,
                pixelValue: currentRect.left + currentRect.width,
                usePercentage: bboxUnits.left === '%',
                origin: rectOrigin[0],
                from: currentRect.top,
                to: currentRect.bottom
            };
        }
    }
    else {
        result.right = {
            value: `1${bboxUnits.right}`,
            pixelValue: currentRect.left + currentRect.width,
            usePercentage: bboxUnits.right === '%',
            origin: rectOrigin[0],
            from: currentRect.top,
            to: currentRect.bottom
        };
        if (bboxUnits.width === bboxUnits.right &&
            ((_d = setting.autoProps) === null || _d === void 0 ? void 0 : _d.width) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
            result.xm = {
                value: `1${bboxUnits.right}`,
                pixelValue: currentRect.left + currentRect.width / 2,
                usePercentage: bboxUnits.right === '%',
                origin: rectOrigin[0],
                from: currentRect.top,
                to: currentRect.bottom
            };
            result.left = {
                value: `1${bboxUnits.right}`,
                pixelValue: currentRect.left,
                usePercentage: bboxUnits.right === '%',
                origin: rectOrigin[0],
                from: currentRect.top,
                to: currentRect.bottom
            };
        }
    }
    if (((_e = setting.autoProps) === null || _e === void 0 ? void 0 : _e.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        result.top = {
            value: `1${bboxUnits.top}`,
            pixelValue: currentRect.top,
            usePercentage: bboxUnits.top === '%',
            origin: rectOrigin[1],
            from: currentRect.left,
            to: currentRect.right
        };
        result.bottom = {
            value: `1${bboxUnits.bottom}`,
            pixelValue: currentRect.top + currentRect.height,
            usePercentage: bboxUnits.bottom === '%',
            origin: rectOrigin[1],
            from: currentRect.left,
            to: currentRect.right
        };
    }
    else if (rectOrigin[1] === 0) {
        result.top = {
            value: `1${bboxUnits.top}`,
            pixelValue: currentRect.top,
            usePercentage: bboxUnits.top === '%',
            origin: rectOrigin[1],
            from: currentRect.left,
            to: currentRect.right
        };
        if (bboxUnits.height === bboxUnits.top &&
            ((_f = setting.autoProps) === null || _f === void 0 ? void 0 : _f.height) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
            result.ym = {
                value: `1${bboxUnits.top}`,
                pixelValue: currentRect.top + currentRect.height / 2,
                usePercentage: bboxUnits.top === '%',
                origin: rectOrigin[1],
                from: currentRect.left,
                to: currentRect.right
            };
            result.bottom = {
                value: `1${bboxUnits.top}`,
                pixelValue: currentRect.top + currentRect.height,
                usePercentage: bboxUnits.top === '%',
                origin: rectOrigin[1],
                from: currentRect.left,
                to: currentRect.right
            };
        }
    }
    else {
        result.bottom = {
            value: `1${bboxUnits.bottom}`,
            pixelValue: currentRect.top + currentRect.height,
            usePercentage: bboxUnits.bottom === '%',
            origin: rectOrigin[1],
            from: currentRect.left,
            to: currentRect.right
        };
        if (bboxUnits.height === bboxUnits.bottom &&
            ((_g = setting.autoProps) === null || _g === void 0 ? void 0 : _g.height) !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
            result.ym = {
                value: `1${bboxUnits.bottom}`,
                pixelValue: currentRect.top + currentRect.height / 2,
                usePercentage: bboxUnits.bottom === '%',
                origin: rectOrigin[1],
                from: currentRect.left,
                to: currentRect.right
            };
            result.top = {
                value: `1${bboxUnits.bottom}`,
                pixelValue: currentRect.top,
                usePercentage: bboxUnits.bottom === '%',
                origin: rectOrigin[1],
                from: currentRect.left,
                to: currentRect.right
            };
        }
    }
    return result;
}
function getGridlineOfLayoutItem(layoutItem, containerWidth, containerHeight) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j;
    const bbox = layoutItem.bbox;
    const bboxUnits = getBBoxUnits(bbox, (0,jimu_layouts_lib_utils__WEBPACK_IMPORTED_MODULE_4__.isRTL)());
    const setting = (_a = layoutItem.setting) !== null && _a !== void 0 ? _a : {};
    const rect = getRectOfLayoutItem(layoutItem, containerWidth, containerHeight);
    const result = { id: layoutItem.id, rect };
    const getRightOrBottomValue = (value) => {
        if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(value)) {
            return `${100 - parseFloat(value)}%`;
        }
        return value;
    };
    const flipLeftRight = (value) => {
        if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(value)) {
            return `${100 - parseFloat(value)}%`;
        }
        return `${containerWidth - parseFloat(value)}px`;
    };
    const left = { value: bbox.left, pixelValue: rect.left, usePercentage: bboxUnits.left === '%', origin: 0 };
    const top = { value: bbox.top, pixelValue: rect.top, usePercentage: bboxUnits.top === '%', origin: 0 };
    const right = {
        value: getRightOrBottomValue(bbox.right),
        pixelValue: rect.right,
        usePercentage: bboxUnits.right === '%',
        origin: 1
    };
    const bottom = {
        value: getRightOrBottomValue(bbox.bottom),
        pixelValue: rect.bottom,
        usePercentage: bboxUnits.bottom === '%',
        origin: 1
    };
    if (((_b = setting.autoProps) === null || _b === void 0 ? void 0 : _b.width) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        // left and right are fixed, width is flexible
        result.left = left;
        result.right = right;
        // if unit of left and right are both percentage, xm is also determined
        if (bboxUnits.left === bboxUnits.right && bboxUnits.left === '%') {
            result.xm = {
                value: `${(parseFloat(result.left.value) +
                    parseFloat(result.right.value)) /
                    2}%`,
                pixelValue: (rect.left + rect.right) / 2,
                usePercentage: bboxUnits.left === '%'
            };
        }
    }
    else if (((_c = setting.autoProps) === null || _c === void 0 ? void 0 : _c.width) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
        if ((_d = setting.autoProps) === null || _d === void 0 ? void 0 : _d.left) {
            // left is true means the origin is right
            // only right can be fixed
            result.right = right;
        }
        else {
            // only left can be fixed
            result.left = left;
        }
    }
    else {
        // by default width is custom
        // left, right and width can be fixed if they has same unit
        if ((_e = setting.autoProps) === null || _e === void 0 ? void 0 : _e.left) {
            result.right = right;
            if (bboxUnits.right === bboxUnits.width) {
                const rightValue = parseFloat(bbox.right);
                const widthValue = parseFloat(bbox.width);
                const leftValue = bboxUnits.right === 'px'
                    ? rightValue + widthValue
                    : 100 - (rightValue + widthValue);
                const centerValue = bboxUnits.right === 'px'
                    ? rightValue + widthValue / 2
                    : 100 - (rightValue + widthValue / 2);
                result.left = {
                    value: `${leftValue}${bboxUnits.right}`,
                    pixelValue: rect.left,
                    usePercentage: bboxUnits.right === '%',
                    origin: 1
                };
                result.xm = {
                    value: `${centerValue}${bboxUnits.right}`,
                    pixelValue: rect.left + rect.width / 2,
                    usePercentage: bboxUnits.right === '%',
                    origin: 1
                };
            }
        }
        else {
            result.left = left;
            if (bboxUnits.left === bboxUnits.width) {
                const leftValue = parseFloat(bbox.left);
                const widthValue = parseFloat(bbox.width);
                const rightValue = leftValue + widthValue;
                result.right = {
                    value: `${rightValue}${bboxUnits.left}`,
                    pixelValue: rect.right,
                    usePercentage: bboxUnits.left === '%',
                    origin: 0
                };
                result.xm = {
                    value: `${leftValue + widthValue / 2}${bboxUnits.left}`,
                    pixelValue: rect.left + rect.width / 2,
                    usePercentage: bboxUnits.left === '%',
                    origin: 0
                };
            }
        }
    }
    if ((0,jimu_layouts_lib_utils__WEBPACK_IMPORTED_MODULE_4__.isRTL)()) {
        result.rect.left = containerWidth - result.rect.right;
        result.rect.right = result.rect.left + result.rect.width;
        let left;
        let right;
        let xm;
        if (result.left != null) {
            right = {
                value: flipLeftRight(result.left.value),
                pixelValue: result.rect.right,
                usePercentage: bboxUnits.left === '%',
                origin: result.left.origin === 0 ? 1 : 0
            };
        }
        if (result.right != null) {
            left = {
                value: flipLeftRight(result.right.value),
                pixelValue: result.rect.left,
                usePercentage: bboxUnits.right === '%',
                origin: result.right.origin === 0 ? 1 : 0
            };
        }
        if (result.xm != null) {
            xm = {
                value: flipLeftRight(result.xm.value),
                pixelValue: result.rect.left + result.rect.width / 2,
                usePercentage: result.xm.usePercentage,
                origin: result.xm.origin === 0 ? 1 : 0
            };
        }
        result.right = right;
        result.left = left;
        result.xm = xm;
    }
    if (((_f = setting.autoProps) === null || _f === void 0 ? void 0 : _f.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch) {
        // top and bottom are fixed, height is flexible
        result.top = top;
        result.bottom = bottom;
        // if unit of top and bottom are both percentage, xm is also determined
        if (bboxUnits.top === bboxUnits.bottom && bboxUnits.top === '%') {
            result.ym = {
                value: `${(parseFloat(result.top.value) +
                    parseFloat(result.bottom.value)) /
                    2}%`,
                pixelValue: (rect.top + rect.bottom) / 2,
                usePercentage: bboxUnits.top === '%'
            };
        }
    }
    else if (((_g = setting.autoProps) === null || _g === void 0 ? void 0 : _g.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto) {
        if ((_h = setting.autoProps) === null || _h === void 0 ? void 0 : _h.top) {
            // top is true means the origin is bottom
            // only bottom can be fixed
            result.bottom = bottom;
        }
        else {
            // only top can be fixed
            result.top = top;
        }
    }
    else {
        // by default height is custom
        // top, bottom and height can be fixed if they has same unit
        if ((_j = setting.autoProps) === null || _j === void 0 ? void 0 : _j.top) {
            result.bottom = bottom;
            if (bboxUnits.bottom === bboxUnits.height) {
                const bottomValue = parseFloat(bbox.bottom);
                const heightValue = parseFloat(bbox.height);
                const topValue = bboxUnits.bottom === 'px'
                    ? bottomValue + heightValue
                    : 100 - (bottomValue + heightValue);
                const centerValue = bboxUnits.bottom === 'px'
                    ? bottomValue + heightValue / 2
                    : 100 - (bottomValue + heightValue / 2);
                result.top = {
                    value: `${topValue}${bboxUnits.bottom}`,
                    pixelValue: rect.top,
                    usePercentage: bboxUnits.bottom === '%',
                    origin: 1
                };
                result.ym = {
                    value: `${centerValue}${bboxUnits.bottom}`,
                    pixelValue: rect.top + rect.height / 2,
                    usePercentage: bboxUnits.bottom === '%',
                    origin: 1
                };
            }
        }
        else {
            result.top = top;
            if (bboxUnits.top === bboxUnits.height) {
                const topValue = parseFloat(bbox.top);
                const heightValue = parseFloat(bbox.height);
                const bottomValue = topValue + heightValue;
                result.bottom = {
                    value: `${bottomValue}${bboxUnits.top}`,
                    pixelValue: rect.bottom,
                    usePercentage: bboxUnits.top === '%',
                    origin: 0
                };
                result.ym = {
                    value: `${topValue + heightValue / 2}${bboxUnits.top}`,
                    pixelValue: rect.top + rect.height / 2,
                    usePercentage: bboxUnits.top === '%',
                    origin: 0
                };
            }
        }
    }
    return result;
}
function getGridlinesOfLayout(layout, containerWidth, containerHeight, excludeId) {
    var _a;
    const gridlines = [];
    Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {}).forEach(id => {
        if (id !== excludeId) {
            const layoutItem = layout.content[id];
            // skip the pending items, they will not be rendered
            if (!layoutItem.isPending) {
                const gridline = getGridlineOfLayoutItem(layoutItem, containerWidth, containerHeight);
                gridlines.push(gridline);
            }
        }
    });
    // add container border as gridlines
    const rect = { left: 0, right: containerWidth, width: containerWidth, top: 0, bottom: containerHeight, height: containerHeight };
    // pixel unit
    gridlines.push({
        id: '',
        left: { value: '0px', pixelValue: 0, usePercentage: false, origin: 0, from: 0, to: containerHeight },
        right: { value: '0px', pixelValue: containerWidth, usePercentage: false, origin: 1, from: 0, to: containerHeight },
        top: { value: '0px', pixelValue: 0, origin: 0, usePercentage: false, from: 0, to: containerWidth },
        bottom: { value: '0px', pixelValue: containerHeight, usePercentage: false, origin: 1, from: 0, to: containerWidth },
        rect
    });
    // percentage unit
    gridlines.push({
        id: '',
        left: { value: '0%', pixelValue: 0, usePercentage: true, origin: 0, from: 0, to: containerHeight },
        xm: { value: '50%', pixelValue: Math.round(containerWidth / 2), usePercentage: true, origin: 0, from: 0, to: containerHeight },
        right: { value: '0%', pixelValue: containerWidth, usePercentage: true, origin: 1, from: 0, to: containerHeight },
        top: { value: '0%', pixelValue: 0, usePercentage: true, origin: 0, from: 0, to: containerWidth },
        ym: { value: '50%', pixelValue: Math.round(containerHeight / 2), usePercentage: true, origin: 0, from: 0, to: containerWidth },
        bottom: { value: '0%', pixelValue: containerHeight, usePercentage: true, origin: 1, from: 0, to: containerWidth },
        rect
    });
    return gridlines;
}
/**
 * Calculate grid lines that can be used as snap target when dragging.
 * @param layout
 * @param excludeItemId
 */
function getGridlines(bboxGridlines, containerWidth, containerHeight, itemRect, activeLayoutItem) {
    let hLines = [];
    let vLines = [];
    if (bboxGridlines == null || bboxGridlines.length === 0) {
        return { leftToRight: hLines, topToBottom: vLines };
    }
    const snapToPercentage = isSnapToPercentage(activeLayoutItem === null || activeLayoutItem === void 0 ? void 0 : activeLayoutItem.bbox, itemRect, containerWidth, containerHeight);
    const rectOrigin = getRectOrigin(itemRect, {
        width: containerWidth,
        height: containerHeight
    });
    bboxGridlines.forEach(bboxGridline => {
        hLines = hLines.concat([bboxGridline.left, bboxGridline.xm, bboxGridline.right].filter(item => isValidGridline(item, rectOrigin[0], snapToPercentage.leftRight)));
        vLines = vLines.concat([bboxGridline.top, bboxGridline.ym, bboxGridline.bottom].filter(item => isValidGridline(item, rectOrigin[1], snapToPercentage.topBottom)));
    });
    hLines.sort(gridlineSotrer);
    vLines.sort(gridlineSotrer);
    return { leftToRight: hLines, topToBottom: vLines };
}
/**
 * When resizing in RTL, the resize edge should be flipped. That means if you resize by dragging the right edge,
 * the interactjs will move the left edge.
 * @param dx
 * @param dw
 */
function flipDelta(dx, dw) {
    if (dx === 0) {
        // move left edge
        return { x: dw, w: -dw };
    }
    return { x: 0, w: -dw };
}
function keepMinimalSize(draggingBound, delta) {
    if (delta.w !== 0 || delta.h !== 0) {
        const result = {
            x: delta.x,
            y: delta.y,
            w: delta.w,
            h: delta.h
        };
        if (draggingBound.width + delta.w < minSize) {
            result.w = minSize - draggingBound.width;
            if (delta.x !== 0) {
                // resizing left side
                result.x = -result.w;
            }
        }
        if (draggingBound.height + delta.h < minSize) {
            result.h = minSize - draggingBound.height;
            if (delta.y !== 0) {
                // resizing top side
                result.y = -result.h;
            }
        }
        return result;
    }
    return delta;
}
function moveGuide(activeLayoutItem, containerRect, draggingBound, delta, shiftKey, bboxGridlines, canvasPane, theme) {
    var _a, _b;
    // do not support move guide if the active layout item is aligned center and it is resizing
    const setting = (_a = activeLayoutItem === null || activeLayoutItem === void 0 ? void 0 : activeLayoutItem.setting) !== null && _a !== void 0 ? _a : {};
    const bbox = (_b = activeLayoutItem === null || activeLayoutItem === void 0 ? void 0 : activeLayoutItem.bbox) !== null && _b !== void 0 ? _b : {};
    const isResizing = delta.w !== 0 || delta.h !== 0;
    if (isResizing && ((setting.hCenter && bbox.left === '50%') || (setting.vCenter && bbox.top === '50%'))) {
        return delta;
    }
    let limitedDelta = keepMinimalSize(draggingBound, delta);
    if (shiftKey) {
        // keep the proportion of width and height
        limitedDelta = keepAspectRatio(draggingBound, limitedDelta);
    }
    const activeItem = getGridlineOfActiveItem(activeLayoutItem, draggingBound, containerRect.width, containerRect.height, limitedDelta);
    // 1. if it can be snapped by distance
    let { dx, dy } = (0,_move_space_guide__WEBPACK_IMPORTED_MODULE_2__.snapByDistance)(activeItem, bboxGridlines, limitedDelta, containerRect.width, containerRect.height, canvasPane, theme);
    // 2. if it can be snapped to edge
    const edgeSnapResult = (0,_move_edge_guide__WEBPACK_IMPORTED_MODULE_3__.snapToEdge)(activeItem, bboxGridlines, limitedDelta, dx === 0 && (!isResizing || delta.w !== 0), dy === 0 && (!isResizing || delta.h !== 0), canvasPane, theme);
    dx = dx !== 0 ? dx : edgeSnapResult.dx;
    dy = dy !== 0 ? dy : edgeSnapResult.dy;
    let updatedDelta = limitedDelta;
    if (dx !== 0 || dy !== 0) {
        updatedDelta = updateDelta(limitedDelta, dx, dy);
    }
    return updatedDelta;
}
function updateDelta(delta, dx, dy) {
    let { x, y, w, h } = delta;
    let fixedX;
    let fixedY;
    if (w === 0) {
        fixedX = FixedSides.None;
    }
    else if (x === 0) {
        fixedX = FixedSides.Start;
    }
    else {
        fixedX = FixedSides.End;
    }
    if (h === 0) {
        fixedY = FixedSides.None;
    }
    else if (y === 0) {
        fixedY = FixedSides.Start;
    }
    else {
        fixedY = FixedSides.End;
    }
    if (dx !== 0) {
        if (fixedX === FixedSides.None) {
            // dragging
            x += dx;
        }
        else if (fixedX === FixedSides.End) {
            // resizing at left side
            x += dx;
            w += -dx;
        }
        else {
            // resizing at right side
            w += dx;
        }
    }
    if (dy !== 0) {
        if (fixedY === FixedSides.None) {
            // dragging
            y += dy;
        }
        else if (fixedY === FixedSides.End) {
            // resizing at top side
            y += dy;
            h += -dy;
        }
        else {
            // resizing at bottom side
            h += dy;
        }
    }
    return { x, y, w, h };
}
function keepAspectRatio(draggingBound, delta) {
    if (delta.w === 0 && delta.h === 0) {
        return delta;
    }
    const ratio = draggingBound.height / draggingBound.width;
    let w = delta.w;
    let h = delta.h;
    let x = delta.x;
    let y = delta.y;
    if (Math.abs(w) * ratio > Math.abs(h)) {
        h = Math.round(w * ratio);
    }
    else {
        w = Math.round(h / ratio);
    }
    if (x !== 0) {
        x = -w;
    }
    if (y !== 0) {
        y = -h;
    }
    return { x, y, w, h };
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/move-space-guide.ts":
/*!*******************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/move-space-guide.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addBottomEdge: () => (/* binding */ addBottomEdge),
/* harmony export */   addLeftEdge: () => (/* binding */ addLeftEdge),
/* harmony export */   addRightEdge: () => (/* binding */ addRightEdge),
/* harmony export */   addTopEdge: () => (/* binding */ addTopEdge),
/* harmony export */   drawHorizontalDistance: () => (/* binding */ drawHorizontalDistance),
/* harmony export */   drawHorizontalGap: () => (/* binding */ drawHorizontalGap),
/* harmony export */   drawVerticalDistance: () => (/* binding */ drawVerticalDistance),
/* harmony export */   drawVerticalGap: () => (/* binding */ drawVerticalGap),
/* harmony export */   findNextHorizontallyRelated: () => (/* binding */ findNextHorizontallyRelated),
/* harmony export */   findNextVerticallyRelated: () => (/* binding */ findNextVerticallyRelated),
/* harmony export */   findPreviousHorizontallyRelated: () => (/* binding */ findPreviousHorizontallyRelated),
/* harmony export */   findPreviousVerticallyRelated: () => (/* binding */ findPreviousVerticallyRelated),
/* harmony export */   isRelatedHorizontal: () => (/* binding */ isRelatedHorizontal),
/* harmony export */   isRelatedVertical: () => (/* binding */ isRelatedVertical),
/* harmony export */   snapByDistance: () => (/* binding */ snapByDistance),
/* harmony export */   snapToNearbyHorizontal: () => (/* binding */ snapToNearbyHorizontal),
/* harmony export */   snapToNearbyVertical: () => (/* binding */ snapToNearbyVertical),
/* harmony export */   snapToNextHorizontal: () => (/* binding */ snapToNextHorizontal),
/* harmony export */   snapToNextVertical: () => (/* binding */ snapToNextVertical),
/* harmony export */   snapToPreviousHorizontal: () => (/* binding */ snapToPreviousHorizontal),
/* harmony export */   snapToPreviousVertical: () => (/* binding */ snapToPreviousVertical)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _move_guide_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./move-guide-common */ "./jimu-layouts/lib/fixed-layout/builder/move-guide-common.ts");



/**
 * Check if the target should be involved when calculating distance snapping in horizontal direction
 * 1. Should intersect in vertical direction
 * 2. Should not intersect in horizontal direction
 * 3. Unit should compatible:
 *    3.1 both in pixel and use the same origin
 *    3.2 both in percentage
 * @param source
 * @param target
 */
function isRelatedHorizontal(source, target) {
    var _a, _b, _c, _d;
    if (target.rect.top > source.rect.bottom ||
        target.rect.bottom < source.rect.top) {
        return false;
    }
    if (target.rect.right + _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE < source.rect.left) {
        if (((_a = target.right) === null || _a === void 0 ? void 0 : _a.value) != null && ((_b = source.left) === null || _b === void 0 ? void 0 : _b.value) != null) {
            const targetUsePercentage = target.right.usePercentage;
            const sourceUsePercentage = source.left.usePercentage;
            if (targetUsePercentage === sourceUsePercentage) {
                return targetUsePercentage || target.right.origin === source.left.origin;
            }
        }
    }
    if (source.rect.right + _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE < target.rect.left) {
        if (((_c = source.right) === null || _c === void 0 ? void 0 : _c.value) != null && ((_d = target.left) === null || _d === void 0 ? void 0 : _d.value) != null) {
            const targetUsePercentage = target.left.usePercentage;
            const sourceUsePercentage = source.right.usePercentage;
            if (targetUsePercentage === sourceUsePercentage) {
                return targetUsePercentage || target.left.origin === source.right.origin;
            }
        }
    }
    return false;
}
function isRelatedVertical(source, target) {
    var _a, _b, _c, _d;
    if (target.rect.left > source.rect.right ||
        target.rect.right < source.rect.left) {
        return false;
    }
    if (target.rect.bottom + _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE < source.rect.top) {
        if (((_a = target.bottom) === null || _a === void 0 ? void 0 : _a.value) != null && ((_b = source.top) === null || _b === void 0 ? void 0 : _b.value) != null) {
            const targetUsePercentage = target.bottom.usePercentage;
            const sourceUsePercentage = source.top.usePercentage;
            if (targetUsePercentage === sourceUsePercentage) {
                return targetUsePercentage || target.bottom.origin === source.top.origin;
            }
        }
    }
    if (source.rect.bottom + _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE < target.rect.top) {
        if (((_c = source.bottom) === null || _c === void 0 ? void 0 : _c.value) != null && ((_d = target.top) === null || _d === void 0 ? void 0 : _d.value) != null) {
            const targetUsePercentage = target.top.usePercentage;
            const sourceUsePercentage = source.bottom.usePercentage;
            if (targetUsePercentage === sourceUsePercentage) {
                return targetUsePercentage || target.top.origin === source.bottom.origin;
            }
        }
    }
    return false;
}
function findPreviousHorizontallyRelated(activeItem, gridlines) {
    let result;
    const previousList = gridlines
        .filter(item => { var _a, _b; return ((_a = item.right) === null || _a === void 0 ? void 0 : _a.pixelValue) < ((_b = activeItem.left) === null || _b === void 0 ? void 0 : _b.pixelValue); })
        .sort((a, b) => b.right.pixelValue - a.right.pixelValue); // previous use reverse order
    // eslint-disable-next-line
    previousList.some(item => {
        const isRelated = isRelatedHorizontal(activeItem, item);
        if (isRelated) {
            result = { value: item };
            return true;
        }
    });
    if (result != null) {
        result.next = findPreviousHorizontallyRelated(result.value, gridlines);
    }
    return result;
}
function addLeftEdge(gridlineNode, usePercentage) {
    const left = {
        id: '',
        right: {
            value: usePercentage ? '0%' : '0px',
            pixelValue: 0,
            usePercentage,
            origin: 0,
            from: Number.NEGATIVE_INFINITY,
            to: Number.POSITIVE_INFINITY
        },
        rect: { left: -100, width: 100, right: 0, top: Number.NEGATIVE_INFINITY, bottom: Number.POSITIVE_INFINITY }
    };
    if (gridlineNode == null) {
        return { value: left };
    }
    let currentNode = gridlineNode;
    // find the last node
    while (currentNode.next != null) {
        currentNode = currentNode.next;
    }
    currentNode.next = { value: left };
    return gridlineNode;
}
function findNextHorizontallyRelated(activeItem, gridlines) {
    let result;
    const previousList = gridlines
        .filter(item => { var _a, _b; return ((_a = item.left) === null || _a === void 0 ? void 0 : _a.pixelValue) > ((_b = activeItem.right) === null || _b === void 0 ? void 0 : _b.pixelValue); })
        .sort((a, b) => a.left.pixelValue - b.left.pixelValue);
    // eslint-disable-next-line
    previousList.some(item => {
        const isRelated = isRelatedHorizontal(activeItem, item);
        if (isRelated) {
            result = { value: item };
            return true;
        }
    });
    if (result != null) {
        result.next = findNextHorizontallyRelated(result.value, gridlines);
    }
    return result;
}
function addRightEdge(gridlineNode, usePercentage, containerWidth) {
    const right = {
        id: '',
        left: {
            value: usePercentage ? '0%' : '0px',
            pixelValue: containerWidth,
            usePercentage,
            origin: 1,
            from: Number.NEGATIVE_INFINITY,
            to: Number.POSITIVE_INFINITY
        },
        rect: { left: containerWidth, width: 100, right: containerWidth + 100, top: Number.NEGATIVE_INFINITY, bottom: Number.POSITIVE_INFINITY }
    };
    if (gridlineNode == null) {
        return { value: right };
    }
    let currentNode = gridlineNode;
    // find the last node
    while (currentNode.next != null) {
        currentNode = currentNode.next;
    }
    currentNode.next = { value: right };
    return gridlineNode;
}
function findPreviousVerticallyRelated(activeItem, gridlines) {
    let result;
    const previousList = gridlines
        .filter(item => { var _a, _b; return ((_a = item.bottom) === null || _a === void 0 ? void 0 : _a.pixelValue) < ((_b = activeItem.top) === null || _b === void 0 ? void 0 : _b.pixelValue); })
        .sort((a, b) => b.bottom.pixelValue - a.bottom.pixelValue); // use reverse order
    // eslint-disable-next-line
    previousList.some(item => {
        const isRelated = isRelatedVertical(activeItem, item);
        if (isRelated) {
            result = { value: item };
            return true;
        }
    });
    if (result != null) {
        result.next = findPreviousVerticallyRelated(result.value, gridlines);
    }
    return result;
}
function addTopEdge(gridlineNode, usePercentage) {
    const top = {
        id: '',
        bottom: {
            value: usePercentage ? '0%' : '0px',
            pixelValue: 0,
            usePercentage,
            origin: 0,
            from: Number.NEGATIVE_INFINITY,
            to: Number.POSITIVE_INFINITY
        },
        rect: { top: -100, height: 100, bottom: 0, left: Number.NEGATIVE_INFINITY, right: Number.POSITIVE_INFINITY }
    };
    if (gridlineNode == null) {
        return { value: top };
    }
    let currentNode = gridlineNode;
    // find the last node
    while (currentNode.next != null) {
        currentNode = currentNode.next;
    }
    currentNode.next = { value: top };
    return gridlineNode;
}
function findNextVerticallyRelated(activeItem, gridlines) {
    let result;
    const previousList = gridlines
        .filter(item => { var _a, _b; return ((_a = item.top) === null || _a === void 0 ? void 0 : _a.pixelValue) > ((_b = activeItem.bottom) === null || _b === void 0 ? void 0 : _b.pixelValue); })
        .sort((a, b) => a.top.pixelValue - b.top.pixelValue);
    // eslint-disable-next-line
    previousList.some(item => {
        const isRelated = isRelatedVertical(activeItem, item);
        if (isRelated) {
            result = { value: item };
            return true;
        }
    });
    if (result != null) {
        result.next = findNextVerticallyRelated(result.value, gridlines);
    }
    return result;
}
function addBottomEdge(gridlineNode, usePercentage, containerHeight) {
    const bottom = {
        id: '',
        top: {
            value: usePercentage ? '0%' : '0px',
            pixelValue: containerHeight,
            usePercentage,
            origin: 1,
            from: Number.NEGATIVE_INFINITY,
            to: Number.POSITIVE_INFINITY
        },
        rect: { top: containerHeight, height: 100, bottom: containerHeight + 100, left: Number.NEGATIVE_INFINITY, right: Number.POSITIVE_INFINITY }
    };
    if (gridlineNode == null) {
        return { value: bottom };
    }
    let currentNode = gridlineNode;
    // find the last node
    while (currentNode.next != null) {
        currentNode = currentNode.next;
    }
    currentNode.next = { value: bottom };
    return gridlineNode;
}
function snapToNearbyHorizontal(activeItem, previousItem, nextItem, canvasPane, containerWidth, theme) {
    const isBothEdge = previousItem.gridline.rect.top === Number.NEGATIVE_INFINITY && nextItem.gridline.rect.top === Number.NEGATIVE_INFINITY;
    if (isBothEdge || activeItem.left == null || activeItem.right == null) {
        return 0;
    }
    const distanceBefore = activeItem.left.pixelValue - previousItem.gridline.right.pixelValue;
    const distanceAfter = nextItem.gridline.left.pixelValue - activeItem.right.pixelValue;
    const tolerance = previousItem.fixed || nextItem.fixed ? _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE : _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE * 2;
    if (Math.abs(distanceAfter - distanceBefore) < tolerance) {
        let delta;
        let distance;
        if (previousItem.fixed || nextItem.fixed) {
            // resizing
            delta = distanceAfter - distanceBefore;
        }
        else {
            // dragging
            delta = (distanceAfter - distanceBefore) / 2;
        }
        if (previousItem.fixed) {
            distance = distanceBefore;
        }
        else if (nextItem.fixed) {
            distance = distanceAfter;
        }
        else {
            distance = distanceBefore + delta;
        }
        drawHorizontalGap(previousItem.gridline, activeItem, distance, false, false, canvasPane, containerWidth, theme);
        drawHorizontalGap(activeItem, nextItem.gridline, distance, false, true, canvasPane, containerWidth, theme);
        return delta;
    }
    return 0;
}
function snapToNearbyVertical(activeItem, previousItem, nextItem, canvasPane, containerHeight, theme) {
    const isBothEdge = previousItem.gridline.rect.left === Number.NEGATIVE_INFINITY && nextItem.gridline.rect.left === Number.NEGATIVE_INFINITY;
    if (isBothEdge || activeItem.top == null || activeItem.bottom == null) {
        return 0;
    }
    const distanceBefore = activeItem.top.pixelValue - previousItem.gridline.bottom.pixelValue;
    const distanceAfter = nextItem.gridline.top.pixelValue - activeItem.bottom.pixelValue;
    const tolerance = previousItem.fixed || nextItem.fixed ? _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE : _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE * 2;
    if (Math.abs(distanceAfter - distanceBefore) < tolerance) {
        let delta;
        let distance;
        if (previousItem.fixed || nextItem.fixed) {
            // resizing
            delta = distanceAfter - distanceBefore;
        }
        else {
            // dragging
            delta = (distanceAfter - distanceBefore) / 2;
        }
        if (previousItem.fixed) {
            distance = distanceBefore;
        }
        else if (nextItem.fixed) {
            distance = distanceAfter;
        }
        else {
            distance = distanceBefore + delta;
        }
        drawVerticalGap(previousItem.gridline, activeItem, distance, false, false, canvasPane, containerHeight, theme);
        drawVerticalGap(activeItem, nextItem.gridline, distance, false, true, canvasPane, containerHeight, theme);
        return delta;
    }
    return 0;
}
function snapToPreviousHorizontal(activeItem, previousNode, canvasPane, containerWidth, theme) {
    if ((previousNode === null || previousNode === void 0 ? void 0 : previousNode.next) == null) {
        return 0;
    }
    const snapDistance = activeItem.rect.left - previousNode.value.rect.right;
    let currentNode = previousNode;
    let selectedDistance = -1;
    while (currentNode.next != null) {
        const nextNode = currentNode.next;
        const distance = currentNode.value.rect.left - nextNode.value.rect.right;
        if (selectedDistance === -1) {
            if (Math.abs(distance - snapDistance) <= _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE) {
                selectedDistance = distance;
                drawHorizontalGap(nextNode.value, currentNode.value, selectedDistance, true, false, canvasPane, containerWidth, theme);
            }
        }
        else if (distance === selectedDistance) {
            // distance already selected
            drawHorizontalGap(nextNode.value, currentNode.value, selectedDistance, true, false, canvasPane, containerWidth, theme);
        }
        currentNode = nextNode;
    }
    if (selectedDistance > 0) {
        const delta = selectedDistance - snapDistance;
        drawHorizontalGap(previousNode.value, activeItem, selectedDistance, false, false, canvasPane, containerWidth, theme);
        return delta;
    }
    return 0;
}
function snapToNextHorizontal(activeItem, node, canvasPane, containerWidth, theme) {
    if ((node === null || node === void 0 ? void 0 : node.next) == null) {
        return 0;
    }
    const snapDistance = node.value.rect.left - activeItem.rect.right;
    let currentNode = node;
    let selectedDistance = -1;
    while (currentNode.next != null) {
        const nextNode = currentNode.next;
        const distance = nextNode.value.rect.left - currentNode.value.rect.right;
        if (selectedDistance === -1) {
            if (Math.abs(distance - snapDistance) <= _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE) {
                selectedDistance = distance;
                drawHorizontalGap(currentNode.value, nextNode.value, selectedDistance, true, true, canvasPane, containerWidth, theme);
            }
        }
        else if (distance === selectedDistance) {
            // distance already selected
            drawHorizontalGap(currentNode.value, nextNode.value, selectedDistance, true, true, canvasPane, containerWidth, theme);
        }
        currentNode = nextNode;
    }
    if (selectedDistance > 0) {
        const delta = snapDistance - selectedDistance;
        drawHorizontalGap(activeItem, node.value, selectedDistance, false, true, canvasPane, containerWidth, theme);
        return delta;
    }
    return 0;
}
function snapToPreviousVertical(activeItem, previousNode, canvasPane, containerHeight, theme) {
    if ((previousNode === null || previousNode === void 0 ? void 0 : previousNode.next) == null) {
        return 0;
    }
    const snapDistance = activeItem.rect.top - previousNode.value.rect.bottom;
    let currentNode = previousNode;
    let selectedDistance = -1;
    while (currentNode.next != null) {
        const nextNode = currentNode.next;
        const distance = currentNode.value.rect.top - nextNode.value.rect.bottom;
        if (selectedDistance === -1) {
            if (Math.abs(distance - snapDistance) <= _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE) {
                selectedDistance = distance;
                drawVerticalGap(nextNode.value, currentNode.value, selectedDistance, true, false, canvasPane, containerHeight, theme);
            }
        }
        else if (distance === selectedDistance) {
            // distance already selected
            drawVerticalGap(nextNode.value, currentNode.value, selectedDistance, true, false, canvasPane, containerHeight, theme);
        }
        currentNode = nextNode;
    }
    if (selectedDistance > 0) {
        const delta = selectedDistance - snapDistance;
        drawVerticalGap(previousNode.value, activeItem, selectedDistance, false, false, canvasPane, containerHeight, theme);
        return delta;
    }
    return 0;
}
function snapToNextVertical(activeItem, node, canvasPane, containerHeight, theme) {
    if ((node === null || node === void 0 ? void 0 : node.next) == null) {
        return 0;
    }
    const snapDistance = node.value.rect.top - activeItem.rect.bottom;
    let currentNode = node;
    let selectedDistance = -1;
    while (currentNode.next != null) {
        const nextNode = currentNode.next;
        const distance = nextNode.value.rect.top - currentNode.value.rect.bottom;
        if (selectedDistance === -1) {
            if (Math.abs(distance - snapDistance) <= _move_guide_common__WEBPACK_IMPORTED_MODULE_2__.SNAP_TOLERANCE) {
                selectedDistance = distance;
                drawVerticalGap(currentNode.value, nextNode.value, selectedDistance, true, true, canvasPane, containerHeight, theme);
            }
        }
        else if (distance === selectedDistance) {
            // distance already selected
            drawVerticalGap(currentNode.value, nextNode.value, selectedDistance, true, true, canvasPane, containerHeight, theme);
        }
        currentNode = nextNode;
    }
    if (selectedDistance > 0) {
        const delta = snapDistance - selectedDistance;
        drawVerticalGap(activeItem, node.value, selectedDistance, false, true, canvasPane, containerHeight, theme);
        return delta;
    }
    return 0;
}
/**
 *
 * @param previousItem
 * @param nextItem
 * @param distance
 * @param reverse If true, start drawing from nextItem to previousItem
 * @param canvasPane
 * @param theme
 */
function drawHorizontalGap(previousItem, nextItem, distance, drawLabel, reverse, canvasPane, containerWidth, theme) {
    if (canvasPane != null && theme != null) {
        const ymin = Math.max(previousItem.rect.top, nextItem.rect.top);
        const ymax = Math.min(previousItem.rect.bottom, nextItem.rect.bottom);
        canvasPane.setColor(jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.palette.danger[800], 0.6));
        const rect = {
            left: reverse ? nextItem.rect.left - distance : previousItem.rect.right,
            top: ymin,
            width: distance,
            height: ymax - ymin
        };
        canvasPane.drawRect(rect);
        if (drawLabel) {
            const center = (ymin + ymax) / 2;
            const usePercentage = previousItem.right.usePercentage;
            const label = usePercentage
                ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(distance, containerWidth))
                : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${distance}px`);
            canvasPane.setColor(theme.colors.palette.primary[600]);
            canvasPane.drawLine(reverse ? nextItem.rect.left - distance : previousItem.rect.right, center, reverse ? nextItem.rect.left : previousItem.rect.right + distance, center, false, label);
        }
    }
}
function drawHorizontalDistance(activeItem, previousItem, nextItem, isResizing, dx, canvasPane, containerWidth, theme) {
    var _a;
    if (canvasPane != null && theme != null) {
        canvasPane.setColor(theme.colors.palette.primary[600]);
        let isEdge = ((_a = previousItem.gridline) === null || _a === void 0 ? void 0 : _a.rect.top) === Number.NEGATIVE_INFINITY;
        const previousRect = previousItem.gridline.rect;
        // Do not draw distance to edge if it is not resizing
        if (previousRect != null && activeItem.left != null && (!isEdge || (isResizing && !previousItem.fixed))) {
            const ymin = Math.max(activeItem.rect.top, previousRect.top);
            const ymax = Math.min(activeItem.rect.bottom, previousRect.bottom);
            const center = (ymin + ymax) / 2;
            const usePercentage = activeItem.left.usePercentage;
            let distance = activeItem.rect.left - previousRect.right;
            if (!previousItem.fixed) {
                distance += dx;
            }
            const label = usePercentage
                ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(distance, containerWidth))
                : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${distance}px`);
            canvasPane.drawLine(previousRect.right, center, previousRect.right + distance, center, false, label);
        }
        isEdge = nextItem.gridline.rect.top === Number.NEGATIVE_INFINITY;
        const nextRect = nextItem.gridline.rect;
        if (nextRect != null && activeItem.right != null && (!isEdge || (isResizing && !nextItem.fixed))) {
            const ymin = Math.max(activeItem.rect.top, nextRect.top);
            const ymax = Math.min(activeItem.rect.bottom, nextRect.bottom);
            const center = (ymin + ymax) / 2;
            const usePercentage = activeItem.right.usePercentage;
            let distance = nextRect.left - activeItem.rect.right;
            if (!nextItem.fixed) {
                distance -= dx;
            }
            const label = usePercentage
                ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(distance, containerWidth))
                : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${distance}px`);
            canvasPane.drawLine(nextRect.left, center, nextRect.left - distance, center, false, label);
        }
    }
}
function drawVerticalGap(previousItem, nextItem, distance, drawLabel, reverse, canvasPane, containerHeight, theme) {
    if (canvasPane != null && theme != null) {
        const xmin = Math.max(previousItem.rect.left, nextItem.rect.left);
        const xmax = Math.min(previousItem.rect.right, nextItem.rect.right);
        canvasPane.setColor(jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.palette.danger[800], 0.6));
        const rect = {
            left: xmin,
            top: reverse ? nextItem.rect.top - distance : previousItem.rect.bottom,
            width: xmax - xmin,
            height: distance
        };
        canvasPane.drawRect(rect);
        if (drawLabel) {
            const center = (xmin + xmax) / 2;
            const usePercentage = previousItem.bottom.usePercentage;
            const label = usePercentage
                ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(distance, containerHeight))
                : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${distance}px`);
            canvasPane.setColor(theme.colors.palette.primary[600]);
            canvasPane.drawLine(center, reverse ? nextItem.rect.top - distance : previousItem.rect.bottom, center, reverse ? nextItem.rect.top : previousItem.rect.bottom + distance, false, label);
        }
    }
}
function drawVerticalDistance(activeItem, previousItem, nextItem, isResizing, dy, canvasPane, containerHeight, theme) {
    if (canvasPane != null && theme != null) {
        canvasPane.setColor(theme.colors.palette.primary[600]);
        let isEdge = previousItem.gridline.rect.left === Number.NEGATIVE_INFINITY;
        const previousRect = previousItem.gridline.rect;
        if (previousRect != null && activeItem.top != null && (!isEdge || (isResizing && !previousItem.fixed))) {
            const xmin = Math.max(activeItem.rect.left, previousRect.left);
            const xmax = Math.min(activeItem.rect.right, previousRect.right);
            const center = (xmin + xmax) / 2;
            const usePercentage = activeItem.top.usePercentage;
            let distance = activeItem.rect.top - previousRect.bottom;
            if (!previousItem.fixed) {
                distance += dy;
            }
            const label = usePercentage
                ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(distance, containerHeight))
                : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${distance}px`);
            canvasPane.drawLine(center, previousRect.bottom, center, previousRect.bottom + distance, false, label);
        }
        isEdge = nextItem.gridline.rect.left === Number.NEGATIVE_INFINITY;
        const nextRect = nextItem.gridline.rect;
        if (nextRect != null && activeItem.bottom != null && (!isEdge || (isResizing && !nextItem.fixed))) {
            const xmin = Math.max(activeItem.rect.left, nextRect.left);
            const xmax = Math.min(activeItem.rect.right, nextRect.right);
            const center = (xmin + xmax) / 2;
            const usePercentage = activeItem.bottom.usePercentage;
            let distance = nextRect.top - activeItem.rect.bottom;
            if (!nextItem.fixed) {
                distance -= dy;
            }
            const label = usePercentage
                ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPercentageNumber(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.toRatio(distance, containerHeight))
                : jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.formatPixelNumber(`${distance}px`);
            canvasPane.drawLine(center, nextRect.top, center, nextRect.top - distance, false, label);
        }
    }
}
function snapByDistance(activeItem, bboxGridlines, delta, containerWidth, containerHeight, canvasPane, theme) {
    var _a, _b, _c, _d, _e;
    let dx = 0;
    let dy = 0;
    const isResizing = delta.w !== 0 || delta.h !== 0;
    if (!isResizing || delta.w !== 0) {
        // 1. horizontal
        let previousItems = findPreviousHorizontallyRelated(activeItem, bboxGridlines);
        previousItems = addLeftEdge(previousItems, ((_a = activeItem.left) === null || _a === void 0 ? void 0 : _a.value) == null || ((_b = activeItem.left) === null || _b === void 0 ? void 0 : _b.usePercentage));
        let nextItems = findNextHorizontallyRelated(activeItem, bboxGridlines);
        nextItems = addRightEdge(nextItems, ((_c = activeItem.right) === null || _c === void 0 ? void 0 : _c.value) == null || activeItem.right.usePercentage, containerWidth);
        // 1.1 snap to nearby two items
        dx = snapToNearbyHorizontal(activeItem, { gridline: previousItems.value, fixed: delta.w !== 0 && delta.x === 0 }, { gridline: nextItems.value, fixed: delta.w !== 0 && delta.x !== 0 }, canvasPane, containerWidth, theme);
        // 1.2 snap to previous items
        if (dx === 0 && (delta.w === 0 || delta.x !== 0)) {
            dx = snapToPreviousHorizontal(activeItem, previousItems, canvasPane, containerWidth, theme);
        }
        // 1.3 snap to next items
        if (dx === 0 && (delta.w === 0 || delta.x === 0)) {
            dx = snapToNextHorizontal(activeItem, nextItems, canvasPane, containerWidth, theme);
        }
        drawHorizontalDistance(activeItem, { gridline: previousItems.value, fixed: delta.w !== 0 && delta.x === 0 }, { gridline: nextItems.value, fixed: delta.w !== 0 && delta.x !== 0 }, delta.w !== 0, dx, canvasPane, containerWidth, theme);
    }
    if (!isResizing || delta.h !== 0) {
        // 2. vertical
        let previousItems = findPreviousVerticallyRelated(activeItem, bboxGridlines);
        previousItems = addTopEdge(previousItems, ((_d = activeItem.top) === null || _d === void 0 ? void 0 : _d.value) == null || activeItem.top.usePercentage);
        let nextItems = findNextVerticallyRelated(activeItem, bboxGridlines);
        nextItems = addBottomEdge(nextItems, ((_e = activeItem.bottom) === null || _e === void 0 ? void 0 : _e.value) == null || activeItem.bottom.usePercentage, containerHeight);
        // 2.1 snap to nearby two items
        dy = snapToNearbyVertical(activeItem, { gridline: previousItems.value, fixed: delta.h !== 0 && delta.y === 0 }, { gridline: nextItems.value, fixed: delta.h !== 0 && delta.y !== 0 }, canvasPane, containerHeight, theme);
        // 2.2 snap to previous items
        if (dy === 0 && (delta.h === 0 || delta.y !== 0)) {
            dy = snapToPreviousVertical(activeItem, previousItems, canvasPane, containerHeight, theme);
        }
        // 2.3 snap to next items
        if (dy === 0 && (delta.h === 0 || delta.y === 0)) {
            dy = snapToNextVertical(activeItem, nextItems, canvasPane, containerHeight, theme);
        }
        drawVerticalDistance(activeItem, { gridline: previousItems === null || previousItems === void 0 ? void 0 : previousItems.value, fixed: delta.h !== 0 && delta.y === 0 }, { gridline: nextItems === null || nextItems === void 0 ? void 0 : nextItems.value, fixed: delta.y !== 0 && delta.y !== 0 }, delta.h !== 0, dy, canvasPane, containerHeight, theme);
    }
    return { dx, dy };
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/builder/util.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/builder/util.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   sortLayoutItems: () => (/* binding */ sortLayoutItems)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _move_guide__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./move-guide */ "./jimu-layouts/lib/fixed-layout/builder/move-guide.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");



function sortLayoutItems(layout, containerWidth, containerHeight) {
    var _a;
    const gridlines = {};
    let width = containerWidth;
    let height = containerHeight;
    if (!width || !height) {
        let element;
        if (window.jimuConfig.isBuilder) {
            const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
            if (appFrame) {
                const appFrameDoc = appFrame.contentDocument || appFrame.contentWindow.document;
                element = appFrameDoc.querySelector(`div.fixed-layout[data-layoutid=${layout.id}]`);
            }
        }
        else {
            element = document.querySelector(`div.fixed-layout[data-layoutid=${layout.id}]`);
        }
        if (element) {
            width = element.clientWidth;
            height = element.clientHeight;
        }
        else {
            width = 100;
            height = 100;
        }
    }
    Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {}).forEach(id => {
        const layoutItem = layout.content[id];
        const gridline = (0,_move_guide__WEBPACK_IMPORTED_MODULE_1__.getGridlineOfLayoutItem)(layoutItem, width, height);
        gridlines[id] = gridline;
    });
    const order = [...layout.order];
    order.sort((a, b) => {
        const ra = gridlines[a].rect;
        const rb = gridlines[b].rect;
        if (ra.top > rb.top) {
            return 1;
        }
        if (ra.top < rb.top) {
            return -1;
        }
        const leftA = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.isRTL)() ? ra.right : ra.left;
        const leftB = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.isRTL)() ? rb.right : rb.left;
        if (leftA > leftB) {
            return 1;
        }
        if (leftA < leftB) {
            return -1;
        }
        if (ra.width > rb.width || ra.height > rb.height) {
            return 1;
        }
        if (ra.width < rb.width || ra.height < rb.height) {
            return -1;
        }
        return 0;
    });
    return layout.set('order', order);
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/common/util.ts":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/common/util.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPositionStyle: () => (/* binding */ getPositionStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");


function getPositionStyle(mergedStyle) {
    return [
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      left: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'left')};
      right: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'right')};
      top: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'top')};
      bottom: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'bottom')};
      width: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'width')};
      height: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'height')};
    `,
        mergedStyle.transform
    ];
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/default-setting.ts":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/default-setting.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_FIX_LAYOUT_ITEM_SETTING: () => (/* binding */ DEFAULT_FIX_LAYOUT_ITEM_SETTING),
/* harmony export */   DEFAULT_FIX_LAYOUT_SETTING: () => (/* binding */ DEFAULT_FIX_LAYOUT_SETTING)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _default_common_setting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../default-common-setting */ "./jimu-layouts/lib/default-common-setting.ts");


const DEFAULT_FIX_LAYOUT_SETTING = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, {
    gridSize: 1
});
const DEFAULT_FIX_LAYOUT_ITEM_SETTING = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_common_setting__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_LAYOUT_ITEM_SETTING, {
    lockParent: false,
    lockLayout: false,
    autoProps: {}
});


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts":
/*!************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   applyPositionSetting: () => (/* binding */ applyPositionSetting),
/* harmony export */   applySnapResult: () => (/* binding */ applySnapResult),
/* harmony export */   autoResponseToDevice: () => (/* binding */ autoResponseToDevice),
/* harmony export */   contains: () => (/* binding */ contains),
/* harmony export */   fixedLayoutTransform: () => (/* binding */ fixedLayoutTransform),
/* harmony export */   flipAutoProps: () => (/* binding */ flipAutoProps),
/* harmony export */   flipBBox: () => (/* binding */ flipBBox),
/* harmony export */   generateBBoxStyle: () => (/* binding */ generateBBoxStyle),
/* harmony export */   generateResizingBBoxStyle: () => (/* binding */ generateResizingBBoxStyle),
/* harmony export */   getAbsolutePos: () => (/* binding */ getAbsolutePos),
/* harmony export */   intersects: () => (/* binding */ intersects),
/* harmony export */   mergePos: () => (/* binding */ mergePos),
/* harmony export */   sortLayoutItems: () => (/* binding */ sortLayoutItems)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");
/* eslint-disable prefer-const */



function sortLayoutItems(layout) {
    if (layout.content == null || Object.keys(layout.content).length === 0) {
        return [];
    }
    const defaultSize = 1280;
    const parseValue = (value) => {
        return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(value) ? (parseFloat(value) * defaultSize) / 100 : +value;
    };
    const sortFunc = (item1, item2) => {
        // compare top
        const top1 = parseValue(item1.bbox.top);
        const top2 = parseValue(item2.bbox.top);
        if (top1 > top2) {
            return 1;
        }
        if (top1 < top2) {
            return -1;
        }
        // compare left
        const left1 = parseValue(item1.bbox.left);
        const left2 = parseValue(item2.bbox.left);
        if (left1 > left2) {
            return 1;
        }
        if (left1 < left2) {
            return -1;
        }
        return 0;
    };
    return Object.keys(layout.content)
        .map(key => layout.content[key])
        .sort(sortFunc)
        .map(layoutItem => layoutItem.id);
}
function fixedLayoutTransform(layout, fromSizeMode, toSizeMode) {
    const fromSizeModeWidth = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getSizeModeWidth(fromSizeMode);
    const toSizeModeWidth = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getSizeModeWidth(toSizeMode);
    if (fromSizeModeWidth < toSizeModeWidth) {
        return layout;
    }
    return autoResponseToDevice(layout, toSizeModeWidth);
}
/**
 * Convert a layout to a small size(width) layout.
 *
 * Return the new layout.
 *
 *
 * @param layout
 * @param convertToColumn
 * @param appConfig
 */
function autoResponseToDevice(layout, deviceWidth) {
    const defaultWidth = deviceWidth;
    const defaultHeight = 800;
    const content = layout.order;
    if (content == null || content.length === 0) {
        return layout;
    }
    let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(layout);
    const bboxes = [];
    content.forEach(itemId => {
        bboxes.push(Object.assign({ id: itemId }, getAbsolutePos(layout.content[itemId].bbox, defaultWidth, defaultHeight)));
    });
    bboxes.sort(sortPos);
    // merge the items that are contained by another
    const groupedBBoxes = [bboxes[0]];
    for (let i = 1; i < bboxes.length; i++) {
        const item = bboxes[i];
        // eslint-disable-next-line
        const grouped = groupedBBoxes.some(b => {
            if (contains(b, item)) {
                // b is always at the top left of the item after sorting
                if (b.content == null) {
                    b.content = [];
                }
                b.content.push(Object.assign({}, item));
                return true;
            }
        });
        if (!grouped) {
            groupedBBoxes.push(item);
        }
    }
    // restrict the bbox of each item into the container
    let lastTop = 0;
    let updatedContent = [];
    groupedBBoxes.forEach(b => {
        let deltaY = 0;
        restrictPos(b, defaultWidth);
        if (b.y < lastTop) {
            deltaY = lastTop - b.y;
            b.y = lastTop;
        }
        lastTop = b.y + b.h;
        updatedLayout = updatedLayout
            .setIn(['content', b.id, 'bbox'], {
            left: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.x, defaultWidth),
            top: `${b.y}px`,
            width: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.w, defaultWidth),
            height: `${b.h}px`
        })
            .setIn(['content', b.id, 'setting', 'autoProps', 'width'], _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom);
        updatedContent.push(b.id);
        if (b.content != null) {
            b.content.forEach(subItem => {
                restrictPos(subItem, defaultWidth);
                if (deltaY > 0) {
                    subItem.y += deltaY;
                }
                updatedLayout = updatedLayout
                    .setIn(['content', b.id, 'bbox'], {
                    left: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.x, defaultWidth),
                    top: `${b.y}px`,
                    width: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.w, defaultWidth),
                    height: `${b.h}px`
                })
                    .setIn(['content', b.id, 'setting', 'autoProps', 'width'], _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom);
                updatedContent.push(subItem.id);
            });
        }
    });
    updatedLayout = updatedLayout.set('order', updatedContent);
    return updatedLayout;
}
function restrictPos(b, maxWidth, isInGroup) {
    // restrict the bbox of each item into the container
    if (b.x > maxWidth) {
        if (!isInGroup) {
            // wrap the item
            b.x = 0;
            b.y += b.h;
        }
        else {
            // move left
            b.x = maxWidth - b.w;
        }
    }
    if (b.x < 0) {
        b.x = 0;
    }
    if (b.x + b.w > maxWidth) {
        if (b.w < maxWidth) {
            b.x = maxWidth - b.w;
        }
        else {
            b.w = maxWidth;
            b.x = 0;
        }
    }
}
function sortPos(p1, p2) {
    // top to bottom, left to right
    if (p1.y !== p2.y) {
        return p1.y > p2.y ? 1 : -1;
    }
    else if (p1.x !== p2.x) {
        return p1.x > p2.x ? 1 : -1;
    }
    return 0;
}
function intersects(p1, p2) {
    const x1 = Math.max(p1.x, p2.x);
    const x2 = Math.min(p1.x + p1.w, p2.x + p2.w);
    const y1 = Math.max(p1.y, p2.y);
    const y2 = Math.min(p1.y + p1.h, p2.y + p2.h);
    return x1 < x2 && y1 < y2;
}
function contains(p1, p2) {
    return p1.x <= p2.x && p1.x + p1.w > p2.x + p2.w && p1.y <= p2.y && p1.y + p1.h > p2.y + p2.h;
}
function mergePos(p1, p2) {
    const left = Math.min(p1.x, p2.x);
    const top = Math.min(p1.y, p2.y);
    const right = Math.max(p1.x + p1.w, p2.x + p2.w);
    const bottom = Math.max(p1.y + p1.h, p2.y + p2.h);
    return {
        x: left,
        y: top,
        w: right - left,
        h: bottom - top
    };
}
function getAbsolutePos(b, containerWidth, containerHeight) {
    var _a, _b;
    const result = {};
    let x = 0;
    let y = 0;
    let w = containerWidth;
    let h = containerHeight * 0.2; // default is 100% width, 20% height
    if (b != null) {
        ['left', 'right', 'top', 'bottom', 'width', 'height'].forEach(prop => {
            if (b[prop] !== undefined && b[prop] !== 'auto') {
                const size = ['left', 'right', 'width'].includes(prop) ? containerWidth : containerHeight;
                result[prop] = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(b[prop]) ? (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fromRatio)(b[prop], size) : parseFloat(b[prop]);
            }
        });
        if (result.left !== undefined) {
            x = result.left;
        }
        if (result.width !== undefined) {
            w = result.width;
            if (result.left === undefined && result.right !== undefined) {
                x = containerWidth - result.right - w;
            }
        }
        else {
            w = containerWidth - ((_a = result.left) !== null && _a !== void 0 ? _a : 0) - ((_b = result.right) !== null && _b !== void 0 ? _b : 0);
        }
        if (result.top !== undefined) {
            y = result.top;
        }
        if (result.height !== undefined) {
            h = result.height;
            if (result.top === undefined && result.bottom !== undefined) {
                y = containerHeight - result.bottom - h;
            }
        }
        else if (result.top !== undefined && result.bottom !== undefined) {
            h = containerHeight - result.top - result.bottom;
        }
    }
    return { x, y, w, h };
}
function generateResizingBBoxStyle(initRect, containerRect, delta, autoFlip = false) {
    const result = {};
    result.left = initRect.left + delta.dx;
    result.width = initRect.width + delta.dw;
    const right = containerRect.right - initRect.right;
    if (delta.dw === 0) {
        // move
        result.right = right - delta.dx;
    }
    else if (delta.dx === 0) {
        // resize at right
        if (delta.dw > 0) {
            delta.dw = Math.min(right, delta.dw);
        }
        result.right = right - delta.dw;
        result.width = initRect.width + delta.dw;
    }
    else {
        result.right = right;
        if (delta.dx < 0) {
            delta.dx = Math.max(-initRect.left, delta.dx);
            delta.dw = -delta.dx;
            result.left = initRect.left + delta.dx;
            result.width = initRect.width + delta.dw;
        }
    }
    result.top = initRect.top + delta.dy;
    result.height = initRect.height + delta.dh;
    const bottom = containerRect.bottom - initRect.bottom;
    if (delta.dh === 0) {
        // move
        result.bottom = bottom - delta.dy;
    }
    else if (delta.dy === 0) {
        // resize at bottom
        if (delta.dh > 0) {
            delta.dh = Math.min(bottom, delta.dh);
        }
        result.bottom = bottom - delta.dh;
        result.height = initRect.height + delta.dh;
    }
    else {
        result.bottom = bottom;
        if (delta.dy < 0) {
            delta.dy = Math.max(-initRect.top, delta.dy);
            delta.dh = -delta.dy;
            result.top = initRect.top + delta.dy;
            result.height = initRect.height + delta.dh;
        }
    }
    if (autoFlip && (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
        return flipBBox(result);
    }
    return result;
}
function generateBBoxStyle(bbox, setting) {
    var _a, _b, _c, _d, _e;
    const result = {};
    let autoProps = (_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) !== null && _a !== void 0 ? _a : {};
    let box = bbox;
    const heightMode = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemSizeMode)('height', bbox, autoProps);
    const widthMode = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemSizeMode)('width', bbox, autoProps);
    if (heightMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        result.top = box.top;
        result.bottom = box.bottom;
    }
    else {
        const topAuto = (_b = autoProps.top) !== null && _b !== void 0 ? _b : false;
        const bottomAuto = (_c = autoProps.bottom) !== null && _c !== void 0 ? _c : false;
        if (heightMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
            result.height = box.height;
        }
        // one and only one of the top or bottom can be used
        if ((topAuto === bottomAuto || bottomAuto) && bbox.top != null) {
            result.top = box.top;
        }
        else {
            result.bottom = box.bottom;
        }
        // align center
        if (setting.vCenter && box.top === '50%') {
            result.top = '50%';
        }
    }
    if (widthMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        result.left = box.left;
        result.right = box.right;
    }
    else {
        const leftAuto = (_d = autoProps.left) !== null && _d !== void 0 ? _d : false;
        const rightAuto = (_e = autoProps.right) !== null && _e !== void 0 ? _e : false;
        if (widthMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
            result.width = box.width;
        }
        // one and only one of the left or right can be used
        if (leftAuto === rightAuto) {
            if (box.left != null) {
                result.left = box.left;
            }
            else {
                result.right = box.right;
            }
        }
        else if (leftAuto && box.right != null) {
            result.right = box.right;
        }
        else {
            result.left = box.left;
        }
        // align center
        if (setting.hCenter && box.left === '50%') {
            result.left = '50%';
        }
    }
    return result;
}
function flipAutoProps(autoProps) {
    const result = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(autoProps);
    const temp = autoProps.left;
    return result.set('left', autoProps.right).set('right', temp);
}
function flipBBox(bbox) {
    const result = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(bbox);
    const temp = bbox.left;
    return result.set('left', bbox.right).set('right', temp);
}
function applyPositionSetting(bbox, itemSetting, isResizing = false) {
    const extraStyle = {};
    const hCenter = itemSetting.hCenter && bbox.left === '50%';
    const vCenter = itemSetting.vCenter && bbox.top === '50%';
    const sign = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)() ? -1 : 1;
    if (hCenter && vCenter) {
        extraStyle.right = 'auto';
        extraStyle.bottom = 'auto';
        extraStyle.transform = `translate(${sign * -50}%, -50%)`;
    }
    else if (hCenter) {
        extraStyle.right = 'auto';
        extraStyle.transform = `translateX(${sign * -50}%)`;
    }
    else if (vCenter) {
        extraStyle.bottom = 'auto';
        extraStyle.transform = 'translateY(-50%)';
    }
    if (!isResizing && (0,_utils__WEBPACK_IMPORTED_MODULE_0__.shouldUseAspectRatio)(itemSetting)) {
        extraStyle.height = 'auto';
    }
    return extraStyle;
}
/**
 * Do not change the autoProps value except that value is empty.
 */
function applySnapResult(bbox, setting, containerRect, snapRect) {
    var _a, _b;
    let outputBox = bbox;
    let outSetting = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(setting !== null && setting !== void 0 ? setting : {});
    if (((_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _a === void 0 ? void 0 : _a.width) !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (snapRect.left < snapRect.right) {
            if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
                outSetting = outSetting.setIn(['autoProps', 'right'], false).setIn(['autoProps', 'left'], true);
            }
            else {
                outSetting = outSetting.setIn(['autoProps', 'left'], false).setIn(['autoProps', 'right'], true);
            }
        }
        else {
            if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
                outSetting = outSetting.setIn(['autoProps', 'left'], false).setIn(['autoProps', 'right'], true);
            }
            else {
                outSetting = outSetting.setIn(['autoProps', 'right'], false).setIn(['autoProps', 'left'], true);
            }
        }
    }
    if (((_b = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _b === void 0 ? void 0 : _b.height) !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (snapRect.top < snapRect.bottom) {
            outSetting = outSetting.setIn(['autoProps', 'top'], false).setIn(['autoProps', 'bottom'], true);
        }
        else {
            outSetting = outSetting.setIn(['autoProps', 'top'], true).setIn(['autoProps', 'bottom'], false);
        }
    }
    ['left', 'right', 'top', 'bottom', 'width', 'height'].forEach(prop => {
        const size = prop === 'left' || prop === 'right' || prop === 'width' ? containerRect.width : containerRect.height;
        let usePercentage = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox[prop]);
        if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
            if (prop === 'left') {
                usePercentage = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox.right);
            }
            else if (prop === 'right') {
                usePercentage = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox.left);
            }
        }
        if (bbox[prop] == null || usePercentage) {
            outputBox = outputBox.set(prop, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(snapRect[prop], size));
        }
        else {
            outputBox = outputBox.set(prop, `${Math.round(snapRect[prop])}px`);
        }
    });
    return { bbox: outputBox, setting: outSetting };
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/action-block.tsx":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/action-block.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionBlock: () => (/* binding */ ActionBlock)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-for-builder/templates */ "jimu-for-builder/templates");
/* harmony import */ var jimu_icons_outlined_brand_block__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/brand/block */ "./jimu-icons/outlined/brand/block.tsx");
/* harmony import */ var jimu_icons_outlined_brand_screen_group__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/brand/screen-group */ "./jimu-icons/outlined/brand/screen-group.tsx");
/* harmony import */ var jimu_icons_outlined_application_template__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/outlined/application/template */ "./jimu-icons/outlined/application/template.tsx");
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/** @jsx jsx */









const buttonStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  pointer-events: auto;
`;
function getStyle(builderTheme) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    body.lock-layout &,
    body:not(.design-mode) & {
      display: none !important;
    }

    display: flex;
    height: 200px;
    padding: 1rem;
    pointer-events: none;
    position: relative;
    z-index: 1;
    .btn-text {
      line-height: 32px;
    }
    .btn {
      margin-right: 2rem;
      background: ${builderTheme.colors.palette.light[600]};
      &:hover {
        background: ${builderTheme.colors.palette.light[800]};
      }
    }
    .action-item {
      width: 32px;
    }

    .action-seprator {
      width: 300px;
      height: 1px;
      background-color: ${builderTheme.colors.palette.dark[800]};
    }
  `;
}
function sizemodeSupported(browserSizeMode) {
    return browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large;
}
function ActionBlock(props) {
    const { pageContext, browserSizeMode, onPageTemplateSelected, onBlockTemplateSelected, onScreenTemplateSelected, blockOnly } = props;
    const { builderTheme, formatMessage, isHeader, isFooter } = pageContext;
    const [showTemplatePopper, setShowTemplatePopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [showBlockPopper, setShowBlockPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [showScreenPopper, setShowScreenPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const blockRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const screenRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const templateRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const show = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const lockLayout = (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false;
        const isDesignMode = state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
        return isDesignMode && !lockLayout;
    });
    const isPageBody = !isHeader && !isFooter;
    let templateTooltip;
    if (isHeader) {
        templateTooltip = formatMessage('chooseHeaderTemplate');
    }
    else if (isFooter) {
        templateTooltip = formatMessage('chooseFooterTemplate');
    }
    else {
        templateTooltip = formatMessage('chooseTemplate', {
            type: pageContext.isDialog
                ? formatMessage('dialog').toLocaleLowerCase()
                : formatMessage('page').toLocaleLowerCase()
        });
    }
    const toggleBlockPopper = (e) => {
        e.stopPropagation();
        if (browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: 'templateBlock', templateMethod: 'getBlockTemplates', onSelect: onBlockTemplateSelected });
            return;
        }
        setShowBlockPopper(!showBlockPopper);
    };
    const toggleScreenPopper = (e) => {
        e.stopPropagation();
        setShowScreenPopper(!showScreenPopper);
    };
    const toggleTemplatePopper = (e) => {
        e.stopPropagation();
        if (browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: 'template', templateMethod: 'getScrollingPageTemplates', onSelect: onPageTemplateSelected });
            return;
        }
        setShowTemplatePopper(!showTemplatePopper);
    };
    const closeBlockPopper = () => {
        setShowBlockPopper(false);
    };
    const closeScreenPopper = () => {
        setShowScreenPopper(false);
    };
    const closeTemplatePopover = () => {
        setShowTemplatePopper(false);
    };
    const onBlockSelected = (template) => {
        setShowBlockPopper(false);
        onBlockTemplateSelected(template);
    };
    const onScreenSelected = (template) => {
        setShowScreenPopper(false);
        onScreenTemplateSelected(template);
    };
    const onTemplateSelected = (template) => {
        setShowTemplatePopper(false);
        onPageTemplateSelected(template);
    };
    if (!show) {
        return null;
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 flex-column justify-content-center align-items-center', css: getStyle(builderTheme) },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex' },
            isPageBody && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_8__.ThemedTooltip, { placement: 'bottom', title: formatMessage('insertABlock') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-item' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { ref: blockRef, icon: true, onClick: toggleBlockPopper, css: buttonStyle, className: 'rounded-circle' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_brand_block__WEBPACK_IMPORTED_MODULE_5__.BlockOutlined, { size: 'm', color: builderTheme.colors.palette.dark[800] })))),
                sizemodeSupported(browserSizeMode) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_8__.ThemedTooltip, { placement: 'bottom', title: formatMessage('insertAScreenGroup') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-item ml-5' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { ref: screenRef, icon: true, onClick: toggleScreenPopper, css: buttonStyle, className: 'rounded-circle' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_brand_screen_group__WEBPACK_IMPORTED_MODULE_6__.ScreenGroupOutlined, { size: 16, color: builderTheme.colors.palette.dark[800] }))))))),
            !blockOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_8__.ThemedTooltip, { placement: 'bottom', title: templateTooltip },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('action-item', { 'ml-5': isPageBody }) },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { ref: templateRef, icon: true, onClick: toggleTemplatePopper, css: buttonStyle, className: 'rounded-circle' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_template__WEBPACK_IMPORTED_MODULE_7__.TemplateOutlined, { autoFlip: true, size: 16, color: builderTheme.colors.palette.dark[800] })))))),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-seprator mt-4' }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("h5", { className: 'btn-text mt-2' }, formatMessage('dropWidgetToAdd'))),
        isPageBody && showBlockPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getBlockTemplates)(), referenceElement: blockRef.current, onItemSelect: onBlockSelected, onClose: closeBlockPopper })),
        isPageBody && showScreenPopper && sizemodeSupported(browserSizeMode) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getScreenGroupTemplates)(), referenceElement: screenRef.current, onItemSelect: onScreenSelected, onClose: closeScreenPopper })),
        !blockOnly && showTemplatePopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getScrollingPageTemplates)(false), referenceElement: templateRef.current, onItemSelect: onTemplateSelected, onClose: closeTemplatePopover }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/dnd-helper.ts":
/*!************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/dnd-helper.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DropIndicatorSize: () => (/* binding */ DropIndicatorSize),
/* harmony export */   calInsertPositionForColumn: () => (/* binding */ calInsertPositionForColumn)
/* harmony export */ });
const DropIndicatorSize = 10;
function calInsertPositionForColumn(boundingRect, centerY, childRects, indicatorSize) {
    // const centerY = itemRect.top + itemRect.height / 2;
    let result;
    let refId;
    let found = false;
    childRects.some((rect, i) => {
        const rectY = rect.top + rect.height / 2;
        if (rectY > centerY) {
            if (i === 0) {
                // insert before the first item
                result = Math.max(rect.top / 2, rect.top - DropIndicatorSize / 2);
            }
            else {
                // insert between this and previous one
                const previousItem = childRects[i - 1];
                result = (rect.top + previousItem.top + previousItem.height) / 2;
            }
            found = true;
            refId = rect.id;
        }
        return found;
    });
    if (!found) {
        // insert after the last one
        const lastItem = childRects[childRects.length - 1];
        result = Math.min(lastItem.top + lastItem.height + DropIndicatorSize / 2, (lastItem.top + lastItem.height + boundingRect.height) / 2);
    }
    return {
        refId,
        insertY: result
    };
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/floating-item-setting.tsx":
/*!************************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/floating-item-setting.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FloatingItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/flow-layout/default-setting.ts");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var _builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/common-layout-item-setting */ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var _screen_group_setting__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./screen-group-setting */ "./jimu-layouts/lib/flow-layout/builder/screen-group-setting.tsx");
/** @jsx jsx */








// const marginSides = [Sides.T, Sides.R, Sides.B, Sides.L];
const inputStyle = { width: 110 };
class FloatingItemSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.updateWidth = (value) => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('width', jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit(value));
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.updateBBoxWidth = (value) => {
            let bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(this.props.layoutItem.bbox || {});
            bbox = bbox.set('width', jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit(value));
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox);
        };
        this.updateHeight = (value) => {
            let bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(this.props.layoutItem.bbox || {});
            bbox = bbox.set('height', jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit(value));
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox);
        };
        this.updateOffsetX = (value) => {
            const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.set('offsetX', value));
        };
        this.updateOffsetY = (value) => {
            const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.set('offsetY', value));
        };
        this.updateHeightMode = (mode) => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('heightMode', mode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom ? 'fixed' : 'auto');
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
    }
    updateFloatingArea(value) {
        const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
        this.props.onSettingChange({
            layoutId: this.props.layoutId,
            layoutItemId: this.props.layoutItem.id
        }, setting.set('floatingArea', value));
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .floating-position {
        margin-bottom: 1rem;
      }

      .floating-area-chooser {
        position: relative;

        .content {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr;
          grid-row-gap: 0;
          grid-column-gap: 0;
          border: 1px solid var(--light-500);

          & > div {
            cursor: pointer;
            width: 30px;
            height: 30px;
            position: relative;
          }

          & > div:nth-of-type(3n+1) {
            border-right: 1px solid var(--light-500);
          }
          & > div:nth-of-type(3n) {
            border-left: 1px solid var(--light-500);
          }
          & > div:nth-of-type(1), & > div:nth-of-type(2), & > div:nth-of-type(3) {
            border-bottom: 1px solid var(--light-500);
          }
          & > div:nth-of-type(7), & > div:nth-of-type(8), & > div:nth-of-type(9) {
            border-top: 1px solid var(--light-500);
          }

          .selected:after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: var(--primary-100);
            border: 1px solid var(--primary-600);
          }
        }
      }
    `;
    }
    render() {
        const { layoutId, layoutItem, formatMessage, isLockLayout } = this.props;
        if (!layoutItem) {
            return null;
        }
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_group_setting__WEBPACK_IMPORTED_MODULE_7__["default"], Object.assign({}, this.props));
        }
        this.itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_FLOW_ITEM_SETTING, layoutItem.setting);
        const bbox = layoutItem.bbox;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flow-item-setting', css: this.getStyle() },
            !isLockLayout && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingSection, { title: `${formatMessage('position')} & ${formatMessage('size')}` },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'floating-position d-flex' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'floating-area-chooser' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'content' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('top-left', { selected: this.itemSetting.floatingArea === 1 }), onClick: this.updateFloatingArea.bind(this, 1) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('top-center', { selected: this.itemSetting.floatingArea === 2 }), onClick: this.updateFloatingArea.bind(this, 2) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('top-right', { selected: this.itemSetting.floatingArea === 3 }), onClick: this.updateFloatingArea.bind(this, 3) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('middle-left', { selected: this.itemSetting.floatingArea === 4 }), onClick: this.updateFloatingArea.bind(this, 4) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('middle-center', { selected: this.itemSetting.floatingArea === 5 }), onClick: this.updateFloatingArea.bind(this, 5) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('middle-right', { selected: this.itemSetting.floatingArea === 6 }), onClick: this.updateFloatingArea.bind(this, 6) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('bottom-left', { selected: this.itemSetting.floatingArea === 7 }), onClick: this.updateFloatingArea.bind(this, 7) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('bottom-center', { selected: this.itemSetting.floatingArea === 8 }), onClick: this.updateFloatingArea.bind(this, 8) }),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('bottom-right', { selected: this.itemSetting.floatingArea === 9 }), onClick: this.updateFloatingArea.bind(this, 9) }))),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex flex-grow-1 flex-column justify-content-between align-items-end' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 110px` },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-2' }, "W"),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_6__.SizeEditor, { label: 'W', mode: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom, disableModeSelect: true, value: bbox === null || bbox === void 0 ? void 0 : bbox.width, onChange: this.updateBBoxWidth })),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 110px` },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-2' }, "H"),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_6__.SizeEditor, { label: 'H', mode: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom, disableModeSelect: true, value: bbox === null || bbox === void 0 ? void 0 : bbox.height, onChange: this.updateHeight })))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, { label: formatMessage('offsetX') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.NumericInput, { style: inputStyle, value: this.itemSetting.offsetX, precision: 0, onChange: this.updateOffsetX, size: 'sm' })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, { label: formatMessage('offsetY') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.NumericInput, { style: inputStyle, precision: 0, value: this.itemSetting.offsetY, onChange: this.updateOffsetY, size: 'sm' })))),
            (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget || layoutItem.sectionId) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_4__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, isSection: false, style: this.props.style, onStyleChange: this.props.onStyleChange, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage }))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/floating-layout-item.tsx":
/*!***********************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/floating-layout-item.tsx ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_layout_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/layout-item */ "./jimu-layouts/lib/builder/layout-item.tsx");
/* harmony import */ var _layout_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../layout-utils */ "./jimu-layouts/lib/flow-layout/layout-utils.ts");
/** @jsx jsx */





class FloatingLayoutItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.state = {
            isResizing: false,
            dx: 0,
            dy: 0,
            dw: 0,
            dh: 0
        };
        this.onResizeStart = (id, initWidth, initHeight) => {
            this.setState({
                isResizing: true
            });
            this.initHeight = initHeight;
            this.initWidth = initWidth;
        };
        this.onResizing = (id, x, y, dw, dh) => {
            this.setState({
                dx: x,
                dy: y,
                dw,
                dh
            });
        };
        this.onResizeEnd = (id, x, y, dw, dh, shiftKey) => {
            const { layoutId, layoutItem } = this.props;
            let bbox = layoutItem.bbox;
            bbox = bbox.set('height', Math.round(parseInt(bbox.height, 10) + dh))
                .set('width', Math.round(parseInt(bbox.width, 10) + dw))
                .set('left', Math.round(parseInt(bbox.left, 10) + x))
                .set('top', Math.round(parseInt(bbox.top, 10) + y))
                .set('bottom', Math.round(parseInt(bbox.top, 10) - dh + y));
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            appConfigAction.editLayoutItemProperty({
                layoutId,
                layoutItemId: layoutItem.id
            }, 'bbox', bbox).exec();
            this.setState({
                isResizing: false,
                dx: 0,
                dy: 0,
                dw: 0,
                dh: 0
            });
        };
    }
    calculatePosition() {
        const { layoutItem } = this.props;
        const { dh, dw, isResizing } = this.state;
        return (0,_layout_utils__WEBPACK_IMPORTED_MODULE_4__.calculateFloatingPosition)(layoutItem, { dh, dw, isResizing, initWidth: this.initWidth, initHeight: this.initHeight });
    }
    render() {
        const { layoutId, layoutItem, selectable, selected } = this.props;
        if (!layoutItem) {
            return null;
        }
        // const { dh, dw, dx, dy } = this.state;
        // const itemSetting: FlowLayoutItemSetting = lodash.assign({}, DEFAULT_FLOW_ITEM_SETTING, layoutItem.setting);
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('flexbox-layout-item floating d-flex', {
            selected
        });
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.PageContext.Consumer, null, (pageContext) => {
            this.pageContext = pageContext;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_layout_item__WEBPACK_IMPORTED_MODULE_3__["default"], { css: this.calculatePosition(), layoutId: layoutId, layoutItemId: layoutItem.id, onResizeStart: this.onResizeStart, onResizing: this.onResizing, onResizeEnd: this.onResizeEnd, restrict: true, draggable: false, selectable: selectable, className: mergedClass }));
        }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.mapStateToLayoutItemProps)(FloatingLayoutItem));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/flow-context-menu.tsx":
/*!********************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/flow-context-menu.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlowContextMenu: () => (/* binding */ FlowContextMenu)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _builder_context_menu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../builder/context-menu */ "./jimu-layouts/lib/builder/context-menu.tsx");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


function FlowContextMenu(props) {
    const { isFirst, isLast, menuItems } = props, otherProps = __rest(props, ["isFirst", "isLast", "menuItems"]);
    const [menus, setMenus] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(menuItems);
    const lockLayout = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const lockLayout = (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false;
        return lockLayout;
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        const filterMenu = menuItems.filter((item) => {
            var _a;
            if (typeof item.visible === 'function') {
                return item.visible({ layoutId: props.layoutId, layoutItem: props.layoutItem, clientRect: null });
            }
            return (_a = item.visible) !== null && _a !== void 0 ? _a : true;
        });
        setMenus(filterMenu);
    }, [isFirst, isLast, menuItems, props.layoutId, props.layoutItem, lockLayout]);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_builder_context_menu__WEBPACK_IMPORTED_MODULE_1__["default"], Object.assign({ menuItems: menus }, otherProps));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/flow-item-setting.tsx":
/*!********************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/flow-item-setting.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FlowItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/flow-layout/default-setting.ts");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var _builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/common-layout-item-setting */ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var _layout_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../layout-utils */ "./jimu-layouts/lib/flow-layout/layout-utils.ts");
/* harmony import */ var _screen_group_setting__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./screen-group-setting */ "./jimu-layouts/lib/flow-layout/builder/screen-group-setting.tsx");
/* harmony import */ var _floating_item_setting__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./floating-item-setting */ "./jimu-layouts/lib/flow-layout/builder/floating-item-setting.tsx");
/** @jsx jsx */










// const marginSides = [Sides.T, Sides.R, Sides.B, Sides.L];
const inputStyle = { width: 110 };
const heightModes = [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom];
const heightUnits = [jimu_ui__WEBPACK_IMPORTED_MODULE_5__.DistanceUnits.PIXEL];
class FlowItemSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.updateWidth = (value) => {
            let setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('width', jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit(value));
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.updateBBoxWidth = (value) => {
            let bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(this.props.layoutItem.bbox || {});
            bbox = bbox.set('width', jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit(value));
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox);
        };
        this.updateHeight = (value) => {
            let bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(this.props.layoutItem.bbox || {});
            bbox = bbox.set('height', jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit(value));
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox);
        };
        this.updateOffsetX = (value) => {
            const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.set('offsetX', value));
        };
        this.updateOffsetY = (value) => {
            const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.set('offsetY', value));
        };
        this.updateHeightMode = (mode) => {
            var _a, _b, _c;
            const { layoutItem } = this.props;
            let setting = (_a = layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('heightMode', mode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom ? 'fixed' : 'auto');
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
            if (!((_b = layoutItem.bbox) === null || _b === void 0 ? void 0 : _b.height)) {
                const itemRect = this.getSizeOfItem();
                if (itemRect) {
                    let bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)((_c = layoutItem.bbox) !== null && _c !== void 0 ? _c : {});
                    bbox = bbox.set('height', `${Math.round(itemRect.height)}px`);
                    this.props.onPosChange({
                        layoutId: this.props.layoutId,
                        layoutItemId: this.props.layoutItem.id
                    }, bbox);
                }
            }
        };
    }
    getSizeOfItem() {
        const { layoutId, layoutItem } = this.props;
        const layoutElem = this.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
        if (layoutElem) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    querySelector(selector) {
        const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
        if (appFrame) {
            const appFrameDoc = appFrame.contentDocument || appFrame.contentWindow.document;
            return appFrameDoc.querySelector(selector);
        }
        return null;
    }
    updateFloatingArea(value) {
        const setting = this.props.layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
        this.props.onSettingChange({
            layoutId: this.props.layoutId,
            layoutItemId: this.props.layoutItem.id
        }, setting.set('floatingArea', value));
    }
    render() {
        var _a, _b;
        const { layoutId, layoutItem, formatMessage, isLockLayout } = this.props;
        if (!layoutItem) {
            return null;
        }
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_group_setting__WEBPACK_IMPORTED_MODULE_8__["default"], Object.assign({}, this.props));
        }
        this.itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_FLOW_ITEM_SETTING, layoutItem.setting);
        if (this.itemSetting.isFloating) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_floating_item_setting__WEBPACK_IMPORTED_MODULE_9__["default"], Object.assign({}, this.props));
        }
        const bbox = layoutItem.bbox;
        const width = jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit((0,_layout_utils__WEBPACK_IMPORTED_MODULE_7__.getWidthFromSetting)(this.itemSetting));
        const height = jimu_ui__WEBPACK_IMPORTED_MODULE_5__.utils.stringOfLinearUnit(parseFloat((_a = layoutItem.bbox) === null || _a === void 0 ? void 0 : _a.height) > 0 ? (_b = layoutItem.bbox) === null || _b === void 0 ? void 0 : _b.height : 100);
        const isAuto = this.itemSetting.heightMode === 'auto' || jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isPercentage(bbox === null || bbox === void 0 ? void 0 : bbox.height);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flow-item-setting' },
            !isLockLayout && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingSection, { title: formatMessage('size') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, { label: formatMessage('width') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: inputStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_6__.SizeEditor, { label: 'W', mode: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom, disableModeSelect: true, value: width, onChange: this.updateWidth }))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, { label: formatMessage('height') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: inputStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_6__.SizeEditor, { label: 'H', mode: isAuto ? jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto : jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom, sizeModes: heightModes, availableUnits: heightUnits, disableModeSelect: false, value: height, onChange: this.updateHeight, onModeChange: this.updateHeightMode })))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingSection, { title: formatMessage('position') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, { label: formatMessage('offsetX') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.NumericInput, { style: inputStyle, value: this.itemSetting.offsetX, onChange: this.updateOffsetX, precision: 0, size: 'sm' })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, { label: formatMessage('offsetY') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.NumericInput, { style: inputStyle, value: this.itemSetting.offsetY, onChange: this.updateOffsetY, precision: 0, size: 'sm' })))),
            (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget || layoutItem.sectionId) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_4__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, isSection: false, style: this.props.style, onStyleChange: this.props.onStyleChange, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage }))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/layout-item.tsx":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/layout-item.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder/templates */ "jimu-for-builder/templates");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/flow-layout/default-setting.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _builder_layout_item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../builder/layout-item */ "./jimu-layouts/lib/builder/layout-item.tsx");
/* harmony import */ var _flow_context_menu__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./flow-context-menu */ "./jimu-layouts/lib/flow-layout/builder/flow-context-menu.tsx");
/* harmony import */ var _layout_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../layout-utils */ "./jimu-layouts/lib/flow-layout/layout-utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/flow-layout/builder/utils.ts");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/setting.svg */ "./jimu-icons/svg/outlined/application/setting.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/move.svg */ "./jimu-icons/svg/outlined/editor/move.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! jimu-icons/svg/outlined/brand/block.svg */ "./jimu-icons/svg/outlined/brand/block.svg");
/* harmony import */ var jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jimu-icons/svg/outlined/brand/screen-group.svg */ "./jimu-icons/svg/outlined/brand/screen-group.svg");
/* harmony import */ var jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/up.svg */ "./jimu-icons/svg/outlined/directional/up.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/flow-layout/common/util.ts");
/** @jsx jsx */








// import { DropArea } from '../../builder/interactive/droparea-hook';











class FlowLayoutItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            isResizing: false,
            dh: 0,
            showBlockTemplatePopup: false,
            showScreenTemplatePopup: false,
            referenceElem: null
        };
        this.onResizeStart = (id, initWidth, initHeight) => {
            const { padding } = this.props;
            this.minHeight = _types__WEBPACK_IMPORTED_MODULE_6__.MIN_LAYOUT_ITEM_SIZE + padding;
            this.initHeight = initHeight;
            this.setState({
                dh: 0,
                isResizing: true
            });
        };
        this.onResizing = (id, x, y, dw, dh) => {
            let delta = dh;
            if (dh < 0 && this.initHeight + dh < this.minHeight) {
                delta = this.minHeight - this.initHeight;
            }
            this.setState({
                dh: delta,
                isResizing: true
            });
        };
        this.onResizeEnd = (id, x, y, dw, dh, shiftKey) => {
            const { layoutId, layoutItem } = this.props;
            let delta = dh;
            if (dh < 0 && this.initHeight + dh < this.minHeight) {
                delta = this.minHeight - this.initHeight;
            }
            const bbox = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layoutItem.bbox || {}).set('height', Math.round(this.initHeight + delta));
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            appConfigAction.editLayoutItemProperty({
                layoutId,
                layoutItemId: layoutItem.id
            }, 'bbox', bbox).exec();
            this.setState({
                isResizing: false,
                dh: 0
            });
        };
        this.toggleBlockTemplatePopup = () => {
            if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishSidePanelToApp({ type: 'templateBlock', templateMethod: 'getBlockTemplates', onSelect: this.onTemplateBlockSelected });
                return;
            }
            this.setState({ showBlockTemplatePopup: !this.state.showBlockTemplatePopup });
        };
        this.toggleScreenTemplatePopup = () => {
            if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
                jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishSidePanelToApp({ type: 'template', templateMethod: 'getScreenGroupTemplates', onSelect: this.onTemplateScreenGroupSelected });
                return;
            }
            this.setState({ showScreenTemplatePopup: !this.state.showScreenTemplatePopup });
        };
        this.removeLayoutItem = () => {
            const { layoutId, layoutItemId } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            appConfigAction.removeLayoutItem({ layoutId, layoutItemId }, true).exec();
        };
        this.moveLayoutItemUp = () => {
            const { layoutId, layoutItemId } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            const appConfig = (0,_utils__WEBPACK_IMPORTED_MODULE_10__.moveUp)(appConfigAction.appConfig, { layoutId, layoutItemId });
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig).exec();
        };
        this.moveLayoutItemDown = () => {
            const { layoutId, layoutItemId } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            const appConfig = (0,_utils__WEBPACK_IMPORTED_MODULE_10__.moveDown)(appConfigAction.appConfig, { layoutId, layoutItemId });
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig).exec();
        };
        this.switchSetting = () => {
            const { layoutId, layoutItemId, selected } = this.props;
            if (!selected) {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({
                    layoutId,
                    layoutItemId
                }));
            }
        };
        this.onTemplateBlockSelected = (template) => {
            (0,_utils__WEBPACK_IMPORTED_MODULE_10__.addTemplateRow)(this.props.layoutId, this.props.layoutItemId, template);
            this.setState({ showBlockTemplatePopup: false });
        };
        this.onTemplateScreenGroupSelected = (template) => {
            (0,_utils__WEBPACK_IMPORTED_MODULE_10__.addTemplateScreenGroup)(this.props.layoutId, this.props.layoutItemId, template);
            this.setState({ showScreenTemplatePopup: false });
        };
        this.fakeTopLayouts = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${this.props.layoutId}_${this.props.layoutItemId}_tlarge`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${this.props.layoutId}_${this.props.layoutItemId}_tmedium`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${this.props.layoutId}_${this.props.layoutItemId}_tsmall`
        });
        this.fakeBottomLayouts = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${this.props.layoutId}_${this.props.layoutItemId}_blarge`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${this.props.layoutId}_${this.props.layoutItemId}_bmedium`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${this.props.layoutId}_${this.props.layoutItemId}_bsmall`
        });
        this.minHeight = 0;
        this.contextMenus = [{
                icon: (jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_15___default()),
                title: this.props.formatMessage('insertABlock'),
                onClick: this.toggleBlockTemplatePopup,
                visible: () => !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.isLockLayout)()
            },
            {
                icon: (jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_16___default()),
                title: this.props.formatMessage('insertAScreenGroup'),
                onClick: this.toggleScreenTemplatePopup,
                visible: () => !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.isLockLayout)() && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small
            },
            _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.duplicateMenuItem,
            {
                icon: (jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_13___default()),
                title: this.props.formatMessage('setting'),
                onClick: this.switchSetting
            }, {
                icon: (jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_14___default()),
                title: this.props.formatMessage('dragToMove', { label: (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.getLabelOfLayoutItem)(this.props.layoutItem) }),
                className: 'tool-drag-handler',
                onClick: () => { },
                visible: () => !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.isLockLayout)()
            }, {
                icon: (jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_17___default()),
                onClick: this.moveLayoutItemUp,
                title: this.props.formatMessage('moveup'),
                visible: () => !this.props.isFirst && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.isLockLayout)()
            }, {
                icon: (jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_17___default()),
                rotate: 180,
                onClick: this.moveLayoutItemDown,
                title: this.props.formatMessage('movedown'),
                visible: () => !this.props.isLast && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.isLockLayout)()
            }, {
                icon: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_12___default()),
                title: this.props.formatMessage('delete'),
                onClick: this.removeLayoutItem,
                visible: () => !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_11__.isLockLayout)()
            }];
    }
    // dropAtTop = (draggingItem: LayoutItemConstructorProps, containerRect: ClientRect, itemRect: ClientRect) => {
    //   this.props.onDropAtBoundary(draggingItem, itemRect, this.props.index);
    // }
    // dropAtBottom = (draggingItem: LayoutItemConstructorProps, containerRect: ClientRect, itemRect: ClientRect) => {
    //   this.props.onDropAtBoundary(draggingItem, itemRect, this.props.index + 1);
    // }
    calHeight(itemSetting) {
        if (this.state.isResizing) {
            return `${this.initHeight + this.state.dh}px`;
        }
        const height = _common_util__WEBPACK_IMPORTED_MODULE_18__.calHeight(this.props.layoutItem, itemSetting);
        this.autoHeight = height === 'auto';
        return height;
    }
    createContextMenu() {
        const { builderTheme } = this.pageContext;
        const { layoutId, layoutItem, isFirst, isLast } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_flow_context_menu__WEBPACK_IMPORTED_MODULE_8__.FlowContextMenu, { layoutId: layoutId, layoutItem: layoutItem, builderTheme: builderTheme, positionType: 'center', size: _types__WEBPACK_IMPORTED_MODULE_6__.CONTEXT_MENU_ITEM_SIZE, iconSize: _types__WEBPACK_IMPORTED_MODULE_6__.CONTEXT_MENU_ICON_SIZE, className: 'widget-context-menu', menuItems: this.contextMenus, isFirst: isFirst, isLast: isLast },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: ref => { this.reference = ref; }, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;` }),
            this.state.showBlockTemplatePopup && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_3__.getBlockTemplates)(), referenceElement: this.reference, onItemSelect: this.onTemplateBlockSelected, onClose: this.toggleBlockTemplatePopup })),
            this.state.showScreenTemplatePopup && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_3__.getScreenGroupTemplates)(), referenceElement: this.reference, onItemSelect: this.onTemplateScreenGroupSelected, onClose: this.toggleScreenTemplatePopup }))));
    }
    getStyle(itemSetting) {
        const { builderTheme } = this.pageContext;
        const { index, gutter } = this.props;
        const sign = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isRTL() ? -1 : 1;
        return [
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        margin-top: ${index > 0 ? `${gutter}px` : 'unset'};
        width: ${(0,_layout_utils__WEBPACK_IMPORTED_MODULE_9__.getWidthFromSetting)(itemSetting)};
        height: ${this.calHeight(itemSetting)};
        flex-shrink: 0;
        position: relative;
        cursor: default;
        & > div.widget-context-menu {
          display: none;
        }

        &:hover > div.widget-context-menu {
          display: flex;
        }

        .template-popup {
          background-color: ${builderTheme.colors.black};
        }

        .tool-drag-handler {
          cursor: move;
        }
      `,
            itemSetting.offsetX || itemSetting.offsetY ? `translate(${(itemSetting.offsetX || 0) * sign}px, ${itemSetting.offsetY || 0}px)` : null
        ];
    }
    render() {
        const { layoutId, layoutItem, draggable, selectable, isEmpty, selected } = this.props;
        if (!layoutItem || isEmpty) {
            return null;
        }
        const itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_FLOW_ITEM_SETTING, layoutItem.setting);
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('flow-layout-item d-flex', {
            selected
        });
        const oneByOneAnimationProps = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.handleOnebyOneAnimation(this.props);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.PageContext.Consumer, null, (pageContext) => {
            this.pageContext = pageContext;
            const [cssStyle, transform] = this.getStyle(itemSetting);
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_layout_item__WEBPACK_IMPORTED_MODULE_7__["default"], Object.assign({ id: `${layoutId}_block_${layoutItem.id}`, css: cssStyle, style: { transform }, layoutId: layoutId, layoutItemId: layoutItem.id, onResizeStart: this.onResizeStart, onResizing: this.onResizing, onResizeEnd: this.onResizeEnd, 
                // onDragStart={this.props.onDragStart}
                left: false, right: false, top: false, bottom: itemSetting.heightMode === 'fixed', restrict: true, useDragHandler: true, draggable: draggable, selectable: selectable, forbidContextMenu: true, forbidToolbar: true, isBlock: true, className: mergedClass, autoHeight: this.autoHeight }, oneByOneAnimationProps), !pageContext.viewOnly && this.createContextMenu()));
        }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_layout_utils__WEBPACK_IMPORTED_MODULE_9__.mapStateToFlowItemProps)(FlowLayoutItem));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/layout-service.ts":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/layout-service.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlowLayoutService: () => (/* binding */ FlowLayoutService)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/menu/screen-menu */ "./jimu-layouts/lib/builder/menu/screen-menu.tsx");






const blockMenu = [_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.duplicateMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.sinkingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.deleteMenuItem];
const screenGroupMenu = [_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.pendingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.duplicateMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.deleteMenuItem];
class FlowLayoutService extends jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.BaseLayoutService {
    removeItemFromOrder(appConfig, layoutInfo) {
        const { layoutId, layoutItemId } = layoutInfo;
        const layoutJson = appConfig.layouts[layoutId];
        // remove it from order list
        let order = [].concat(layoutJson.order);
        order = order.filter(itemId => itemId !== layoutItemId);
        return appConfig.setIn(['layouts', layoutId, 'order'], order);
    }
    afterItemMoved(appConfig, layoutInfo) {
        return this.removeItemFromOrder(appConfig, layoutInfo);
    }
    afterItemRemoved(appConfig, layoutInfo) {
        return this.removeItemFromOrder(appConfig, layoutInfo);
    }
    duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context) {
        var _a;
        const result = super.duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context);
        let updatedAppConfig = result[0];
        const newItemId = result[1];
        // maintain order
        const layoutJson = updatedAppConfig.layouts[layoutInfo.layoutId];
        const order = [].concat(layoutJson.order);
        const index = order.indexOf(layoutInfo.layoutItemId);
        order.splice(index, 1, layoutInfo.layoutItemId, newItemId);
        updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutInfo.layoutId, 'order'], order);
        // offset
        const targetLayoutItem = layoutJson.content[newItemId];
        if ((_a = targetLayoutItem.setting) === null || _a === void 0 ? void 0 : _a.isFloating) {
            updatedAppConfig = this.offsetDupliateItem(updatedAppConfig, { layoutId: layoutInfo.layoutId, layoutItemId: newItemId });
        }
        return [updatedAppConfig, newItemId];
    }
    getTocStructure(appConfig, layoutId) {
        var _a;
        const layoutJson = appConfig.layouts[layoutId];
        const sizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode();
        if (((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.order) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            const order = [].concat(layoutJson.order);
            return order.filter(itemId => {
                const item = layoutJson.content[itemId];
                return !item.isPending;
            }).map((layoutItemId) => {
                const item = layoutJson.content[layoutItemId];
                const service = new jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.ContentServiceWrapper(appConfig, item);
                return service.toTocNode({ layoutId, layoutItemId }, sizeMode);
            });
        }
        return [];
    }
    processAfterItemAdded(appConfig, draggingItem, layoutInfo, currentSizeMode, containerRect, itemRect, insertIndex) {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const bbox = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.replaceBoundingBox(null, itemRect, containerRect);
        appConfigAction
            .editLayoutItemProperty(layoutInfo, 'bbox', bbox)
            .adjustOrderOfItem(layoutInfo, insertIndex);
        return appConfigAction.appConfig;
    }
    getToolItems(appConfig, layoutInfo, type) {
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'view') {
            return _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__.viewMenuItems;
        }
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'screen') {
            return _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_5__.screenMenuItems;
        }
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfig, layoutInfo);
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
            return screenGroupMenu;
        }
        return blockMenu;
    }
    offsetDupliateItem(appConfig, layoutInfo) {
        var _a, _b;
        const { layoutId, layoutItemId } = layoutInfo;
        const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
        let { bbox, setting } = layoutItem;
        const offset = value => {
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.isPercentage(value)) {
                return `${parseFloat(value) + 5}%`;
            }
            const pxValue = parseInt(value, 10);
            if (!isNaN(pxValue)) {
                return pxValue + 20;
            }
            return value;
        };
        if ((_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _a === void 0 ? void 0 : _a.left) {
            bbox = bbox.set('right', offset(bbox.right));
        }
        else {
            bbox = bbox.set('left', offset(bbox.left));
        }
        if ((_b = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _b === void 0 ? void 0 : _b.top) {
            bbox = bbox.set('bottom', offset(bbox.bottom));
        }
        else {
            bbox = bbox.set('top', offset(bbox.top));
        }
        if ((setting === null || setting === void 0 ? void 0 : setting.hCenter) && (setting === null || setting === void 0 ? void 0 : setting.vCenter)) {
            setting = setting.set('vCenter', false);
        }
        return appConfig
            .setIn(['layouts', layoutId, 'content', layoutItemId, 'bbox'], bbox)
            .setIn(['layouts', layoutId, 'content', layoutItemId, 'setting'], setting);
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/layout.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/layout.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _dnd_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dnd-helper */ "./jimu-layouts/lib/flow-layout/builder/dnd-helper.ts");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/flow-layout/builder/layout-item.tsx");
/* harmony import */ var _floating_layout_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./floating-layout-item */ "./jimu-layouts/lib/flow-layout/builder/floating-layout-item.tsx");
/* harmony import */ var _screen_group__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./screen-group */ "./jimu-layouts/lib/flow-layout/builder/screen-group.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../builder/interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var _builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../builder/interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/flow-layout/default-setting.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/flow-layout/builder/utils.ts");
/* harmony import */ var _action_block__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./action-block */ "./jimu-layouts/lib/flow-layout/builder/action-block.tsx");
/* harmony import */ var _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../builder/interactive/canvas-pane */ "./jimu-layouts/lib/builder/interactive/canvas-pane.ts");
/** @jsx jsx */
/* eslint-disable prefer-const */

















const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  bottom: 0;
  top: 0;
  right: 0;
  background: transparent;
`;
const guideOverlay = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  ${dropareaStyle};
  z-index: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.LayoutZIndex.DragMoveTip};
  pointer-events: none;
`;
class Layout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            isDragover: false,
            isLoadingTemplate: false
        };
        this.handleActivate = (e) => {
            if (!(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_12__.isDesignMode)()) {
                return;
            }
            if (Math.abs(e.screenX - this.mousedownX) > jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.CLICK_TOLRERANCE ||
                Math.abs(e.screenY - this.mousedownY) > jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.CLICK_TOLRERANCE) {
                e.stopPropagation();
                return;
            }
            const { isInSection, isInWidget } = this.props;
            if (!this.pageContext.viewOnly && !isInSection && !isInWidget && !(0,_builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_10__.isResizing)() && !(0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_11__.isDragging)()) {
                e.stopPropagation();
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
            }
        };
        this.handleMouseDown = (e) => {
            this.mousedownX = e.screenX;
            this.mousedownY = e.screenY;
        };
        this.handleDropAtBoundary = (draggingItem, itemRect, insertIndex) => {
            if (insertIndex < this.props.layout.order.length) {
                this.referenceId = this.props.layout.order[insertIndex];
            }
            else {
                this.referenceId = null;
            }
            if (this.domRect == null) {
                this.domRect = this.ref.getBoundingClientRect();
            }
            this.handleDrop(draggingItem, this.domRect, itemRect);
        };
        this.onWidgetItemSelected = (item) => {
            var _a, _b, _c;
            const rect = this.ref.getBoundingClientRect();
            const itemRect = {
                height: (_c = (_b = (_a = item.manifest) === null || _a === void 0 ? void 0 : _a.defaultSize) === null || _b === void 0 ? void 0 : _b.height) !== null && _c !== void 0 ? _c : 300
            };
            this.addWidgetToLayout(item, rect, itemRect, 4, 0);
        };
        this.handleBlockTemplateSelected = (template) => {
            this.setState({ isLoadingTemplate: true });
            (0,_utils__WEBPACK_IMPORTED_MODULE_14__.addTemplateRow)(this.props.layout.id, '', template).finally(() => {
                this.setState({ isLoadingTemplate: false });
            });
        };
        this.handleScreenTemplateSelected = (template) => {
            this.setState({ isLoadingTemplate: true });
            (0,_utils__WEBPACK_IMPORTED_MODULE_14__.addTemplateScreenGroup)(this.props.layout.id, '', template).finally(() => {
                this.setState({ isLoadingTemplate: false });
            });
        };
        this.handlePageTemplateSelected = (templatePageJson) => {
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            this.setState({ isLoadingTemplate: true });
            if (this.pageContext.isHeader) {
                appConfigAction.applyHeaderTemplate(templatePageJson).then(() => {
                    appConfigAction.exec();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        this.setState({ isLoadingTemplate: false });
                    });
                }).finally(null);
            }
            else if (this.pageContext.isFooter) {
                appConfigAction.applyFooterTemplate(templatePageJson).then(() => {
                    appConfigAction.exec();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        this.setState({ isLoadingTemplate: false });
                    });
                }).finally(null);
            }
            else {
                appConfigAction.applyPageBodyTemplate(this.pageContext.pageId, templatePageJson)
                    .then(() => {
                    appConfigAction.exec();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        this.setState({ isLoadingTemplate: false });
                    });
                }).finally(null);
            }
        };
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.autoBindHandlers(this, [
            'handleDrop',
            'handleDragOver',
            'handleDragEnter',
            'handleDragLeave',
            'handleToggleDragoverEffect'
        ]);
        const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(`${jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer}`);
        if ((exts === null || exts === void 0 ? void 0 : exts.length) > 0) {
            const ext = exts.find(item => item.layoutType === this.props.layout.type);
            this.layoutTransform = ext === null || ext === void 0 ? void 0 : ext.transformLayout;
        }
    }
    componentDidMount() {
        this.canvasPane = new _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_16__.CanvasPane(this.canvasRef);
        this.canvasPane.setSize(this.ref.clientWidth, this.ref.clientHeight);
    }
    componentDidUpdate() {
        this.canvasPane.setSize(this.ref.clientWidth, this.ref.clientHeight);
    }
    handleDragOver(draggingItem, draggingElement, containerRect, itemRect, clientX, clientY) {
        var _a, _b, _c;
        const { layout } = this.props;
        const layoutInfo = (_a = draggingItem.layoutInfo) !== null && _a !== void 0 ? _a : { layoutId: null };
        let rect = itemRect;
        this.canvasPane.clear();
        if (((_b = this.childRects) === null || _b === void 0 ? void 0 : _b.length) > 0) {
            const { insertY, refId } = (0,_dnd_helper__WEBPACK_IMPORTED_MODULE_3__.calInsertPositionForColumn)(containerRect, clientY, this.childRects, _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize);
            this.referenceId = refId;
            if (layoutInfo.layoutId === this.props.layout.id) {
                const content = layout.order;
                const draggingIndex = content.indexOf(layoutInfo.layoutItemId);
                const refIndex = content.indexOf(refId);
                if (((_c = layout.content[layoutInfo.layoutItemId].setting) === null || _c === void 0 ? void 0 : _c.isFloating) ||
                    draggingIndex === refIndex - 1 ||
                    (refId == null && draggingIndex === content.length - 1)) {
                    return;
                }
            }
            rect = {
                top: insertY - _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize / 2 + this.ref.scrollTop,
                width: containerRect.width - _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize,
                left: _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize / 2,
                height: _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize
            };
        }
        else {
            this.referenceId = null;
            rect = {
                top: containerRect.height / 2 - _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize / 2,
                width: containerRect.width - _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize,
                left: _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize / 2,
                height: _dnd_helper__WEBPACK_IMPORTED_MODULE_3__.DropIndicatorSize
            };
        }
        this.canvasPane.setColor(jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(this.builderTheme.colors.palette.primary[700], 0.4));
        this.canvasPane.drawRect(rect);
    }
    handleToggleDragoverEffect(value, draggingItem) {
        var _a;
        if (value) {
            this.referenceId = null;
            this.collectBounds((_a = draggingItem.layoutInfo) !== null && _a !== void 0 ? _a : { layoutId: null });
        }
        this.canvasPane.clear();
        this.setState({
            isDragover: value
        });
    }
    handleDragEnter(draggingItem) { }
    handleDragLeave() { }
    handleDrop(draggingItem, containerRect, itemRect) {
        var _a, _b;
        this.canvasPane.clear();
        const { layout } = this.props;
        const draggingLayoutInfo = (_a = draggingItem.layoutInfo) !== null && _a !== void 0 ? _a : { layoutId: null };
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        let insertIndex = 0;
        if (this.referenceId != null) {
            insertIndex = layout.order.indexOf(this.referenceId);
        }
        else if (layout.order != null) {
            insertIndex = layout.order.length;
        }
        this.referenceId = null;
        this.childRects = [];
        // move in the same layout or add a new row widget
        if (draggingLayoutInfo.layoutId === layout.id) {
            if ((_b = layout.content[draggingLayoutInfo.layoutItemId].setting) === null || _b === void 0 ? void 0 : _b.isFloating) {
                const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
                // pending item added back
                appConfigAction.setLayoutItemToPending(draggingLayoutInfo, false);
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, Object.assign(Object.assign({}, draggingLayoutInfo), { autoScroll: false })));
                return;
            }
            (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_9__.addItemToLayout)(appConfigAction.appConfig, draggingItem, layout.id).then(result => {
                const { layoutInfo, updatedAppConfig } = result;
                const service = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout);
                const outAppConfig = service.processAfterItemAdded(updatedAppConfig, draggingItem, layoutInfo, null, containerRect, itemRect, insertIndex);
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(outAppConfig, Object.assign(Object.assign({}, layoutInfo), { autoScroll: true })));
            }).finally(null);
            return;
        }
        // Create a row widget, then add the dragging item
        const totalCols = 12;
        const rowWidth = this.maxPageWidth > 0 ? Math.min(this.maxPageWidth, containerRect.width) : containerRect.width;
        const colWidth = rowWidth / totalCols;
        const span = Math.min(Math.ceil(itemRect.width / colWidth), totalCols);
        if (draggingItem.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
            (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_9__.addItemToLayout)(appConfigAction.appConfig, draggingItem, layout.id).then(result => {
                const { layoutInfo, updatedAppConfig } = result;
                const service = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout);
                const outAppConfig = service.processAfterItemAdded(updatedAppConfig, draggingItem, layoutInfo, null, containerRect, itemRect, insertIndex);
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(outAppConfig, Object.assign(Object.assign({}, layoutInfo), { autoScroll: true })));
            }).finally(null);
        }
        else {
            this.addWidgetToLayout(draggingItem, containerRect, itemRect, span, insertIndex);
        }
    }
    addWidgetToLayout(draggingItem, containerRect, itemRect, width, insertIndex, appConfig) {
        (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_9__.addBlockToFlowLayout)(draggingItem, this.props.layout.id, containerRect, itemRect, width, insertIndex, appConfig).finally(null);
    }
    collectBounds(layoutInfo) {
        const { layout } = this.props;
        this.childRects = [];
        this.domRect = this.ref.getBoundingClientRect();
        const draggableChildren = this.ref.parentNode.querySelectorAll(`div[data-layoutid="${layout.id}"] > div.exb-rnd`);
        if ((draggableChildren === null || draggableChildren === void 0 ? void 0 : draggableChildren.length) > 0) {
            draggableChildren.forEach(node => {
                var _a;
                const itemId = node.getAttribute('data-layoutitemid');
                if ((layoutInfo.layoutId !== layout.id || layoutInfo.layoutItemId !== itemId) &&
                    ((_a = layout.order) === null || _a === void 0 ? void 0 : _a.includes(itemId))) {
                    const rect = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.relativeClientRect(node.getBoundingClientRect(), this.domRect);
                    rect.id = itemId;
                    this.childRects.push(rect);
                }
            });
        }
        return this.childRects.sort((a, b) => a.top - b.top);
    }
    createItem(item, total, index, layoutSetting) {
        if (item === null || item === void 0 ? void 0 : item.isPending) {
            return null;
        }
        const { layouts, layout, itemDraggable, itemSelectable } = this.props;
        const isFirst = (0,_utils__WEBPACK_IMPORTED_MODULE_14__.isFirstNonFloatingItem)({ layoutId: layout.id, layoutItemId: item.id });
        const isLast = (0,_utils__WEBPACK_IMPORTED_MODULE_14__.isLastNonFloatingItem)({ layoutId: layout.id, layoutItemId: item.id });
        const itemSetting = item.setting;
        if (item.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_group__WEBPACK_IMPORTED_MODULE_6__.ScreenGroup, { key: `${layout.id}_${item.id}`, itemIndex: index, isFirst: isFirst, isLast: isLast, layoutId: layout.id, layoutItemId: item.id, layoutItem: item, theme: this.pageContext.builderTheme, formatMessage: this.pageContext.formatMessage }));
        }
        if (itemSetting === null || itemSetting === void 0 ? void 0 : itemSetting.isFloating) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_floating_layout_item__WEBPACK_IMPORTED_MODULE_5__["default"], { key: `${layout.id}_${item.id}`, index: index, total: total, builderTheme: this.builderTheme, layouts: layouts, layoutId: layout.id, layoutItemId: item.id, layoutItem: item, gutter: layoutSetting.gutter, draggable: itemDraggable, selectable: itemSelectable, onDropAtBoundary: this.handleDropAtBoundary, formatMessage: this.pageContext.formatMessage }));
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_4__["default"], { key: `${layout.id}_${item.id}`, index: index, isFirst: isFirst, isLast: isLast, builderTheme: this.builderTheme, layouts: layouts, layoutId: layout.id, layoutItemId: item.id, layoutItem: item, gutter: layoutSetting.gutter, draggable: itemDraggable, selectable: itemSelectable, onDropAtBoundary: this.handleDropAtBoundary, formatMessage: this.pageContext.formatMessage }));
    }
    getActionStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      height: 200px;
      padding: 1rem;
      pointer-events: none;
      z-index: 1;
      .btn-text {
        line-height: 32px;
      }
      .btn {
        margin-right: 2rem;
        background: ${this.builderTheme.colors.palette.light[600]};
        &:hover {
          background: ${this.builderTheme.colors.palette.light[800]};
        }
      }
      .action-item {
        width: 32px;
      }

      .action-seprator {
        .sep {
          width: 65px;
          height: 1px;
          background-color: ${this.builderTheme.colors.palette.dark[800]};
        }
        .btn-text {
          margin: 0 13px;
        }
      }
    `;
    }
    getStyle() {
        const { builderTheme } = this.pageContext;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      & > .trail-container > .builder-layout-item {
        margin-bottom: 10px;
        border-top: 1px dashed ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.dark[600], 0.6)};
        border-bottom: 1px dashed ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.dark[600], 0.6)};
        z-index: 0;

        .widget-context-menu {
          width: 100%;
          height: auto;
          top: 0;
        }

        &.selected, &.floating {
          z-index: 1;
        }
      }

      body:not(.design-mode) & {
        & > .trail-container > .builder-layout-item {
          margin-bottom: 0;
          border-top: none;
          border-bottom: none;
        }
      }
    `;
    }
    createActions(blockOnly) {
        const { viewOnly, rootLayoutId } = this.pageContext;
        const { layout } = this.props;
        const isPageBody = !this.pageContext.isHeader && !this.pageContext.isFooter;
        if (this.state.isLoadingTemplate ||
            !isPageBody ||
            viewOnly ||
            layout.id !== rootLayoutId) {
            return null;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_action_block__WEBPACK_IMPORTED_MODULE_15__.ActionBlock, { pageContext: this.pageContext, browserSizeMode: this.props.browserSizeMode, blockOnly: blockOnly, onPageTemplateSelected: this.handlePageTemplateSelected, onBlockTemplateSelected: this.handleBlockTemplateSelected, onScreenTemplateSelected: this.handleScreenTemplateSelected }));
    }
    render() {
        const { layout, className, isPageItem, layouts, mainSizeMode, browserSizeMode } = this.props;
        if (layout == null) {
            return null;
        }
        const outClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout flow-layout w-100', className);
        const guideVisibleStyle = {
            display: this.state.isDragover ? 'block' : 'none'
        };
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.PageContext.Consumer, null, (props) => {
            var _a;
            this.builderTheme = props.builderTheme;
            this.maxPageWidth = props.maxWidth;
            this.pageContext = props;
            let targetLayout = layout;
            const viewOnly = layouts[browserSizeMode] !== layout.id;
            if (viewOnly && this.layoutTransform != null) {
                targetLayout = this.layoutTransform(layout, mainSizeMode, browserSizeMode);
            }
            const content = (_a = targetLayout.order) !== null && _a !== void 0 ? _a : [];
            const layoutSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_13__.DEFAULT_FLOW_SETTING, targetLayout.setting);
            const mergedStyle = Object.assign({ position: 'relative' }, jimu_ui__WEBPACK_IMPORTED_MODULE_2__.styleUtils.toCSSStyle(layoutSetting.style));
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: outClass, ref: el => (this.ref = el), css: this.getStyle(), style: mergedStyle, "data-layoutid": layout.id, onClick: this.handleActivate, onMouseDown: this.handleMouseDown },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: true } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: targetLayout.id, "data-layoutid": targetLayout.id, className: 'trail-container d-flex flex-column align-items-center', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                    width: 100%;
                  ` },
                        !props.viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_8__.DropArea, { css: dropareaStyle, layouts: this.props.layouts, isRepeat: this.props.isRepeat, highlightDragover: !isPageItem, onDragEnter: this.handleDragEnter, onDragLeave: this.handleDragLeave, onDragOver: this.handleDragOver, onDrop: this.handleDrop, onToggleDragoverEffect: this.handleToggleDragoverEffect })),
                        content.length > 0 &&
                            content.map((layoutItemId, index) => {
                                return this.createItem(targetLayout.content[layoutItemId], content.length, index, layoutSetting);
                            }))),
                !this.state.isLoadingTemplate &&
                    !props.viewOnly &&
                    jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.isEmptyLayout(targetLayout) &&
                    layout.id === props.rootLayoutId &&
                    this.createActions(false),
                content.length > 0 && this.createActions(true),
                this.state.isLoadingTemplate && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Primary }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas", { css: guideOverlay, style: guideVisibleStyle, ref: el => (this.canvasRef = el) })));
        }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_7__.utils.mapStateToLayoutProps)(Layout));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/screen-context-menu.tsx":
/*!**********************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/screen-context-menu.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenContextMenu: () => (/* binding */ ScreenContextMenu)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-for-builder/templates */ "jimu-for-builder/templates");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/flow-layout/builder/utils.ts");
/* harmony import */ var _flow_context_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./flow-context-menu */ "./jimu-layouts/lib/flow-layout/builder/flow-context-menu.tsx");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/setting.svg */ "./jimu-icons/svg/outlined/application/setting.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/move.svg */ "./jimu-icons/svg/outlined/editor/move.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/svg/outlined/brand/block.svg */ "./jimu-icons/svg/outlined/brand/block.svg");
/* harmony import */ var jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/svg/outlined/brand/screen-group.svg */ "./jimu-icons/svg/outlined/brand/screen-group.svg");
/* harmony import */ var jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/up.svg */ "./jimu-icons/svg/outlined/directional/up.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_13__);
/** @jsx jsx */














function ScreenContextMenu(props) {
    const { layoutId, layoutItemId, builderTheme, layoutItem, formatMessage, isFirst, isLast } = props;
    const [showBlockPopper, setShowBlockPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [showScreenGroupPopper, setShowScreenGroupPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const contextMenuRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const onTemplateBlockSelected = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((template) => {
        (0,_utils__WEBPACK_IMPORTED_MODULE_5__.addTemplateRow)(layoutId, layoutItemId, template);
        setShowBlockPopper(false);
    }, [layoutId, layoutItemId]);
    const toggleBlockPopper = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishSidePanelToApp({ type: 'templateBlock', templateMethod: 'getBlockTemplates', onSelect: onTemplateBlockSelected });
            return;
        }
        setShowBlockPopper(!showBlockPopper);
    }, [showBlockPopper, onTemplateBlockSelected]);
    const toggleScreenGroupPopper = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setShowScreenGroupPopper(!showScreenGroupPopper);
    }, [showScreenGroupPopper]);
    const onTemplateScreenGroupSelected = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((template) => {
        (0,_utils__WEBPACK_IMPORTED_MODULE_5__.addTemplateScreenGroup)(layoutId, layoutItemId, template);
        setShowScreenGroupPopper(false);
    }, [layoutId, layoutItemId]);
    const moveLayoutItemUp = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const appConfig = (0,_utils__WEBPACK_IMPORTED_MODULE_5__.moveUp)(appConfigAction.appConfig, { layoutId, layoutItemId });
        (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig).exec();
    }, [layoutId, layoutItemId]);
    const moveLayoutItemDown = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const appConfig = (0,_utils__WEBPACK_IMPORTED_MODULE_5__.moveDown)(appConfigAction.appConfig, { layoutId, layoutItemId });
        (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig).exec();
    }, [layoutId, layoutItemId]);
    const removeLayoutItem = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishConfirmDeleteToApp({ layoutId, layoutItemId });
    }, [layoutId, layoutItemId]);
    const switchSetting = () => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({
            layoutId,
            layoutItemId
        }));
    };
    const sizemodeSupported = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large;
    }, []);
    const contextMenus = [{
            icon: (jimu_icons_svg_outlined_brand_block_svg__WEBPACK_IMPORTED_MODULE_11___default()),
            title: formatMessage('insertABlock'),
            onClick: toggleBlockPopper,
            visible: () => !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.isLockLayout)()
        },
        {
            icon: (jimu_icons_svg_outlined_brand_screen_group_svg__WEBPACK_IMPORTED_MODULE_12___default()),
            title: formatMessage('insertAScreenGroup'),
            onClick: toggleScreenGroupPopper,
            visible: () => sizemodeSupported() && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.isLockLayout)()
        },
        _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.pendingMenuItem, Object.assign(Object.assign({}, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.duplicateMenuItem), { visible: () => sizemodeSupported() && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.isLockLayout)() }), {
            icon: (jimu_icons_svg_outlined_application_setting_svg__WEBPACK_IMPORTED_MODULE_9___default()),
            title: formatMessage('setting'),
            onClick: switchSetting
        }, {
            icon: (jimu_icons_svg_outlined_editor_move_svg__WEBPACK_IMPORTED_MODULE_10___default()),
            title: formatMessage('dragToMove', { label: (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.getLabelOfLayoutItem)(layoutItem) }),
            className: 'tool-drag-handler',
            onClick: () => { },
            visible: () => !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.isLockLayout)()
        }, {
            icon: (jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_13___default()),
            onClick: moveLayoutItemUp,
            title: formatMessage('moveup'),
            visible: () => !isFirst && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.isLockLayout)()
        }, {
            icon: (jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_13___default()),
            rotate: 180,
            onClick: moveLayoutItemDown,
            title: formatMessage('movedown'),
            visible: () => !isLast && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.isLockLayout)()
        }, {
            icon: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_8___default()),
            title: formatMessage('delete'),
            onClick: removeLayoutItem,
            visible: () => !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_7__.isLockLayout)()
        }];
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_flow_context_menu__WEBPACK_IMPORTED_MODULE_6__.FlowContextMenu, { layoutId: layoutId, layoutItem: layoutItem, builderTheme: builderTheme, positionType: 'center', size: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.CONTEXT_MENU_ITEM_SIZE, iconSize: jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.CONTEXT_MENU_ICON_SIZE, className: 'widget-context-menu', menuItems: contextMenus, isFirst: isFirst, isLast: isLast },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: contextMenuRef, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;` }),
        showBlockPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getBlockTemplates)(), referenceElement: contextMenuRef.current, onItemSelect: onTemplateBlockSelected, onClose: toggleBlockPopper })),
        showScreenGroupPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getScreenGroupTemplates)(), referenceElement: contextMenuRef.current, onItemSelect: onTemplateScreenGroupSelected, onClose: toggleScreenGroupPopper }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/screen-group-setting-popper.tsx":
/*!******************************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/screen-group-setting-popper.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TransitionPopperContent: () => (/* binding */ TransitionPopperContent),
/* harmony export */   icons: () => (/* binding */ icons)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/** @jsx jsx */



const icons = {
    [jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push]: __webpack_require__(/*! jimu-ui/advanced/lib/assets/icon_animation_transition_push.svg */ "./jimu-ui/advanced/lib/assets/icon_animation_transition_push.svg"),
    [jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade]: __webpack_require__(/*! jimu-ui/advanced/lib/assets/icon_animation_transition_fade.svg */ "./jimu-ui/advanced/lib/assets/icon_animation_transition_fade.svg"),
    [jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover]: __webpack_require__(/*! jimu-ui/advanced/lib/assets/icon_animation_transition_push.svg */ "./jimu-ui/advanced/lib/assets/icon_animation_transition_push.svg")
};
class TransitionPopperContent extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.onTypeChanged = (e, type, isPanel) => {
            if (isPanel) {
                this.props.onPanelTransitionTypeChange(type);
            }
            else {
                this.props.onTransitionTypeChange(type);
            }
        };
        this.updateFirstPanel = (e) => {
            // e.target.checked;
        };
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .animation-cards {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-row-gap: 12px;
        grid-column-gap: 12px;
      }

      .card-item {
        font-size: 13px;
        flex: 0 0 45%;

        user-select: none;
        cursor: pointer;
        position: relative;

        .card-content {
          width: 100%;
          height: 5rem;
          background-color: var(--light-200);
        }

        &.selected .card-content {
          outline: 2px solid var(--primary-700);
        }

        .card-image {
          width: 100%;
          height: 100%;
          padding: 8px;
          &:after {
            display: none;
          }
        }

        .card-name {
          max-width: 90px;
          margin: 0 auto;
          color: var(--dark-800);
          .card-name-content {
            line-height: 1rem;
            max-height: 2rem;
            white-space: normal;
          }
        }
      }
    `;
    }
    createAnimationCard(type, index, isPanel = false) {
        const { transitionType, panelTransitionType } = this.props;
        let effectType;
        if (isPanel) {
            effectType = panelTransitionType !== null && panelTransitionType !== void 0 ? panelTransitionType : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push;
        }
        else {
            effectType = transitionType !== null && transitionType !== void 0 ? transitionType : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('d-flex flex-column align-items-center card-item', {
                selected: type === effectType
            }), key: index, onClick: (e) => { this.onTypeChanged(e, type, isPanel); } },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex justify-content-center card-content' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'card-image' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { className: 'w-100', currentColor: false, icon: icons[type], size: 72 }))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'card-name flex-grow-1 d-flex align-items-start mt-1' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'text-center text-truncate card-name-content', title: this.props.formatMessage(type.toLowerCase()) }, this.props.formatMessage(type.toLowerCase())))));
    }
    render() {
        const { formatMessage } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'bg-light-300 border-color-gray-400', css: this.getStyle() },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { title: formatMessage('mainStage') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'animation-cards' }, [jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade, jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover, jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push]
                    .map((info, index) => this.createAnimationCard(info, index)))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { title: formatMessage('scrollingPanel') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'animation-cards' }, [jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push, jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade]
                    .map((info, index) => this.createAnimationCard(info, index, true)))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Checkbox, { onChange: this.updateFirstPanel, className: 'mr-2' }),
                    formatMessage('applyToFirstPanel')))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/screen-group-setting.tsx":
/*!***********************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/screen-group-setting.tsx ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _screen_group_setting_popper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./screen-group-setting-popper */ "./jimu-layouts/lib/flow-layout/builder/screen-group-setting-popper.tsx");
/** @jsx jsx */





const animationIcon = __webpack_require__(/*! jimu-ui/advanced/lib/assets/icon_animation_in_none.svg */ "./jimu-ui/advanced/lib/assets/icon_animation_in_none.svg");
class ScreenGroupSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.sidePopperTrigger = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.onTransitionTypeChange = (type) => {
            const { screenGroupId } = this.props.layoutItem;
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)().editScreenGroupProperty(screenGroupId, 'transitionType', type).exec();
        };
        this.onPanelTransitionTypeChange = (type) => {
            const { screenGroupId } = this.props.layoutItem;
            (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)().editScreenGroupProperty(screenGroupId, 'panelTransitionType', type).exec();
        };
        this.toggleSidePanel = () => {
            this.setState({ showSidePanel: !this.state.showSidePanel });
        };
        this.state = {
            showSidePanel: false
        };
    }
    getAnimBoxStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      background-color: transparent;
      width: 100%;
      height: 72px;

      .img-tip {
        position: relative;
        min-width: 90px;
        height: 72px;
        cursor: pointer;
        background: var(--light-200);

        .has-sibling {
          position: absolute;
          &.first {
            left: 5px;
            top: 5px;
          }
          &.second {
            bottom: 5px;
            right: 5px;
          }
        }

        .diag-sep {
          position: absolute;
          height: 1px;
          width: 80px;
          top: 36px;
          transform: rotateZ(-45deg);
          background: var(--light-500);
        }
      }

      .anim-label {
        align-self: flex-start;
      }
    `;
    }
    getSidePopperStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .header {
        height: 60px;
        padding: 0 0.5rem;
      }
      .side-popper-title {
        color: var(--dark-600);
        font-size: 13px;
      }
      .side-content {
        position: relative;
        width: 100%;
        height: calc(100% - 60px);
        overflow: auto;
      }
    `;
    }
    render() {
        var _a, _b, _c, _d, _e;
        const { formatMessage } = this.props;
        const transitionType = (_a = this.props.transitionType) !== null && _a !== void 0 ? _a : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade;
        const panelTransitionType = (_b = this.props.panelTransitionType) !== null && _b !== void 0 ? _b : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingSection, { title: formatMessage('transition') },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'anima-box d-flex justify-content-between align-items-center', css: this.getAnimBoxStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'img-tip d-flex justify-content-center align-items-center', onClick: this.toggleSidePanel },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'anim-icon first has-sibling' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (_c = _screen_group_setting_popper__WEBPACK_IMPORTED_MODULE_4__.icons[transitionType]) !== null && _c !== void 0 ? _c : animationIcon, size: 32 })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'diag-sep' }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'anim-icon second has-sibling' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (_d = _screen_group_setting_popper__WEBPACK_IMPORTED_MODULE_4__.icons[panelTransitionType]) !== null && _d !== void 0 ? _d : animationIcon, size: 32 }))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex flex-column justify-content-between align-items-end h-100' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'anim-label' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", null, formatMessage(transitionType.toLowerCase())),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mx-1' }, "/"),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", null, formatMessage(panelTransitionType.toLowerCase()))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'amin-icons w-100', ref: this.sidePopperTrigger },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', onClick: this.toggleSidePanel, className: 'text-truncate', title: formatMessage('change') }, formatMessage('change'))))),
            this.state.showSidePanel && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SidePopper, { isOpen: true, title: formatMessage('transition'), css: this.getSidePopperStyle(), position: 'right', toggle: this.toggleSidePanel, trigger: (_e = this.sidePopperTrigger) === null || _e === void 0 ? void 0 : _e.current },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'side-content' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_group_setting_popper__WEBPACK_IMPORTED_MODULE_4__.TransitionPopperContent, { transitionType: transitionType, panelTransitionType: panelTransitionType, onTransitionTypeChange: this.onTransitionTypeChange, onPanelTransitionTypeChange: this.onPanelTransitionTypeChange, formatMessage: formatMessage }))))));
    }
}
const mapStateToProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, props) => {
        const { screenGroupId } = props.layoutItem;
        const { appConfig } = state.appStateInBuilder;
        return appConfig.screenGroups[screenGroupId].transitionType;
    },
    (state, props) => {
        const { screenGroupId } = props.layoutItem;
        const { appConfig } = state.appStateInBuilder;
        return appConfig.screenGroups[screenGroupId].panelTransitionType;
    }
], (transitionType, panelTransitionType) => ({ transitionType, panelTransitionType }));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToProps)(ScreenGroupSetting));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/screen-group.tsx":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/screen-group.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenGroup: () => (/* binding */ ScreenGroup)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _screen_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./screen-menu */ "./jimu-layouts/lib/flow-layout/builder/screen-menu.tsx");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common */ "./jimu-layouts/lib/flow-layout/common/index.tsx");
/* harmony import */ var _screen_side_panel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./screen-side-panel */ "./jimu-layouts/lib/flow-layout/builder/screen-side-panel.tsx");
/* harmony import */ var _builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../builder/interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _builder_layout_entry__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../builder/layout-entry */ "./jimu-layouts/lib/builder/layout-entry.tsx");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _screen_context_menu__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./screen-context-menu */ "./jimu-layouts/lib/flow-layout/builder/screen-context-menu.tsx");
/* harmony import */ var _common_type__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/type */ "./jimu-layouts/lib/flow-layout/common/type.ts");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/flow-layout/common/util.ts");
/** @jsx jsx */














function getStyle(viewHeight, builderTheme, isFirst, isLast, selected, isOverlay) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    position: relative;
    width: 100%;

    & > div.widget-context-menu {
      display: none;
    }

    &:hover > div.widget-context-menu {
      display: flex;
    }

    body.lock-layout & {
      .screen-menu {
        bottom: ${isFirst ? (isLast ? '-10px' : '-32px') : 'auto'};
        z-index: ${isFirst && isLast ? 10 : null};
      }
    }

    .screen-menu {
      display: ${selected ? 'block' : 'none'};
      position: absolute;
      opacity: ${selected ? 0.8 : 0.5};
      left: 0;
      top: ${isFirst ? 'auto' : '-32px'};
      bottom: ${isFirst ? '-32px' : 'auto'};
      height: 32px;
      width: 100%;
      background-color: ${builderTheme.colors.palette.light[200]};
      overflow: visible;

      .info {
        color: ${builderTheme.colors.black};
      }

      .jimu-btn svg {
        color: ${builderTheme.colors.palette.dark[600]};
      }
    }

    .screen-group {
      position: relative;
      height: ${viewHeight}px;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .main-panels {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      pointer-events: none;
      z-index: 0;
    }

    &.small-size .main-panels {
      z-index: ${isOverlay ? 0 : 1};
    }

    &.small-size .side-panels {
      z-index: ${isOverlay ? 1 : 0};
    }

    .side-panels {
      position: relative;
      z-index: 1;
      pointer-events: none;

      > div:first-of-type > div.panel-content {
        padding-top: ${Math.round(viewHeight * _common_type__WEBPACK_IMPORTED_MODULE_12__.SCREEN_RATIO_IN_SMALL_SIZE)}px;
      }

      /* > div:nth-last-of-type(2) {
        min-height: ${viewHeight}px;
      } */
    }

    body:not(.design-mode) & {
      .screen-group {
        position: static;
        height: auto;
        overflow-y: unset;
        overflow-x: unset;
      }
      .side-panels {
        > div:first-of-type > div.panel-content {
          padding-top: ${100 * _common_type__WEBPACK_IMPORTED_MODULE_12__.SCREEN_RATIO_IN_SMALL_SIZE}vh;
          padding-top: calc(var(--vh) * ${100 * _common_type__WEBPACK_IMPORTED_MODULE_12__.SCREEN_RATIO_IN_SMALL_SIZE});
        }
        /* > div:nth-last-of-type(2) {
          min-height: 100vh;
        } */
      }
      .screen-menu {
        display: none !important;
      }
    }

    .group-tip {
      display: none;
      padding: inherit;
      position: absolute;
      left: 0;
      bottom: 0;
      top: 0;
      right: 0;
      pointer-events: none;
      .tip-content {
        height: 100%;
        padding: 2px;
        &:after {
          content: '';
          width: 100%;
          height: 100%;
          outline: 2px solid ${builderTheme.colors.palette.primary[700]};
          display: block;
        }
      }
    }

    &:hover .group-tip {
      display: block;
    }
  `;
}
function clearSelectionInScreen(screenGroupId, screenIndex) {
    var _a;
    const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const sizeMode = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode;
    const selection = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection;
    if (selection != null) {
        const screenGroup = appConfig.screenGroups[screenGroupId];
        const screenId = screenGroup.screens[screenIndex];
        const screenJson = appConfig.screens[screenId];
        if (screenJson) { // the active screen may being removed
            const screenLayoutId = screenJson.main.layout[sizeMode];
            // selection is in the layout
            if (selection.layoutId === screenLayoutId) {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
            }
            // selection in descendant of the layout
            const element = document.querySelector(`div[data-layoutid="${screenLayoutId}"] div[data-layoutid="${selection.layoutId}"][data-layoutitemid="${selection.layoutItemId}"]`);
            if (element != null) {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
            }
        }
    }
}
function ScreenGroup(props) {
    var _a;
    const { layoutId, layoutItemId, layoutItem, formatMessage, itemIndex, isFirst, isLast } = props;
    const { screenGroupId } = layoutItem;
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const selection = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection;
        if (selection) {
            return selection.layoutId === layoutId && selection.layoutItemId === layoutItemId;
        }
        return false;
    });
    const screenGroup = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.screenGroups[layoutItem.screenGroupId];
    });
    const hasPanel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        // screen with panel and without panel can be mixed
        const screenIds = state.appConfig.screenGroups[layoutItem.screenGroupId].screens;
        return screenIds.some(screenId => {
            const screen = state.appConfig.screens[screenId];
            return screen.panel != null;
        });
    });
    const browserSizeMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.browserSizeMode;
    });
    const { screens, stretchPanel = true, triggerType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Bottom, verticalSpace = '0', panelTransitionType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push } = screenGroup;
    let transitionType = (_a = screenGroup.transitionType) !== null && _a !== void 0 ? _a : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade;
    if (browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small && !hasPanel) {
        transitionType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover;
    }
    const navInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return (_a = state.appRuntimeInfo.screenGroupNavInfos) === null || _a === void 0 ? void 0 : _a[screenGroupId];
    });
    const viewportSize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.findViewportSize(state.appConfig, state.browserSizeMode || jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large);
    });
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => { var _a; return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design; });
    const { viewOnly, builderTheme, pageId } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.PageContext);
    const headerHeight = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const pageJson = state.appConfig.pages[pageId];
        if (pageJson === null || pageJson === void 0 ? void 0 : pageJson.header) {
            const headerJson = state.appConfig.header;
            if (headerJson === null || headerJson === void 0 ? void 0 : headerJson.sticky) {
                const browserSizeMode = state.browserSizeMode;
                const mainSizeMode = state.appConfig.mainSizeMode;
                const height = headerJson.height[browserSizeMode] || headerJson.height[mainSizeMode] || _common_type__WEBPACK_IMPORTED_MODULE_12__.DEFAULT_HEADER_HEIGHT;
                return parseInt(height, 10);
            }
        }
        return 0;
    });
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const screenGroupRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const mainPanelRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const monitorScrollRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(true);
    const scrollListenerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const interactableRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [activeIndex, setActiveIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(0);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (selected) {
            const element = document.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItemId}"]`);
            if (element != null) {
                element.scrollIntoView({ behavior: 'auto', block: 'center' });
            }
        }
    }, [selected, layoutId, layoutItemId]);
    const isOverlay = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a, _b, _c;
        if (browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            return false;
        }
        const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
        const screens = (_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[screenGroupId]) === null || _b === void 0 ? void 0 : _b.screens;
        if (screens === null || screens === void 0 ? void 0 : screens[activeIndex]) {
            const screen = appConfig.screens[screens[activeIndex]];
            return (_c = screen.panel) === null || _c === void 0 ? void 0 : _c.overlay;
        }
        return false;
    }, [screenGroupId, activeIndex, browserSizeMode]);
    const scrollIntoView = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((index) => {
        var _a;
        // check if side panel of index is in current view extent
        const sideElements = screenGroupRef.current.querySelectorAll('div.screen-side-panel');
        let previousItemsHeight = 0;
        // let targetHeight = 0;
        sideElements.forEach(element => {
            const elementIndex = +element.getAttribute('data-index');
            if (elementIndex < index) {
                previousItemsHeight += element.clientHeight;
            }
        });
        screenGroupRef.current.scrollTop = previousItemsHeight;
        if (transitionType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
            const screenContainerElem = (_a = mainPanelRef.current) === null || _a === void 0 ? void 0 : _a.children[0];
            if (screenContainerElem) {
                screenContainerElem.scrollTop = screenGroupRef.current.scrollTop;
            }
        }
    }, [transitionType]);
    const onItemDragStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        (0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_8__.setIsDragging)(true);
    }, []);
    const onItemDragEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        (0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_8__.setIsDragging)(false);
    }, []);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (domRef.current && !interactableRef.current) {
            const { layoutId, layoutItemId, layoutItem } = props;
            interactableRef.current = (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(domRef.current).origin('parent');
            interactableRef.current = (0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_8__.bindDragHandler)(interactableRef.current, {
                layoutId,
                layoutItemId,
                // onDragging,
                onDragStart: onItemDragStart,
                onDragEnd: onItemDragEnd,
                useDragHandler: true,
                itemType: layoutItem.type,
                rootLayoutId: () => layoutId,
                restrict: () => true
            });
            interactableRef.current.draggable({
                modifiers: [jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact.modifiers.restrictRect({
                        restriction: 'parent'
                    })]
            });
        }
        return () => {
            if (interactableRef.current) {
                interactableRef.current.unset();
                interactableRef.current = null;
            }
        };
        // eslint-disable-next-line
    }, []);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if ((navInfo === null || navInfo === void 0 ? void 0 : navInfo.activeIndex) != null && navInfo.activeIndex !== activeIndex) {
            // clear selection if it is a child of the last screen
            clearSelectionInScreen(screenGroupId, activeIndex);
            setActiveIndex(navInfo.activeIndex);
            if (navInfo.scrollIntoView) {
                monitorScrollRef.current = false; // do not monitor scroll event when user jumps to another screen
                scrollIntoView(navInfo.activeIndex);
                setTimeout(() => {
                    monitorScrollRef.current = true;
                }, 200);
            }
        }
    }, [navInfo, activeIndex, scrollIntoView, screenGroupId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (scrollListenerRef.current) {
            screenGroupRef.current.removeEventListener('scroll', scrollListenerRef.current);
            scrollListenerRef.current = null;
        }
        scrollListenerRef.current = () => {
            var _a;
            const screenContainerElem = (_a = mainPanelRef.current) === null || _a === void 0 ? void 0 : _a.children[0];
            if (!screenContainerElem || transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
                return;
            }
            // for cover effect
            screenContainerElem.scrollTop = screenGroupRef.current.scrollTop;
        };
        screenGroupRef.current.addEventListener('scroll', scrollListenerRef.current);
    }, [transitionType]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, 0));
    }, [isDesignMode, screenGroupId]);
    const onInterctionChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((index, isIntersecting) => {
        if (!monitorScrollRef.current) {
            return;
        }
        if (isIntersecting && index !== activeIndex) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, index, false));
        }
        else if (!isIntersecting && index > 0) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, index - 1, false));
        }
    }, [activeIndex, screenGroupId]);
    const selectItem = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        e.stopPropagation();
        if (!(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_10__.isLockLayout)() && !viewOnly && browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({ layoutId, layoutItemId }));
        }
    }, [viewOnly, browserSizeMode, layoutId, layoutItemId]);
    const sidepanelResizeHandler = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        if (!screenGroupRef.current) {
            return;
        }
        const mainPanelContainer = screenGroupRef.current.children[0];
        const sidePanelContainer = screenGroupRef.current.children[1];
        mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
    }, []);
    const debounceResizeHandler = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(sidepanelResizeHandler, 200), [sidepanelResizeHandler]);
    const onSidePanelHeightChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((index, height) => {
        if (!screenGroupRef.current) {
            return;
        }
        const mainPanelContainer = screenGroupRef.current.children[0];
        const sidePanelContainer = screenGroupRef.current.children[1];
        if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
            mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
            return;
        }
        if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover) {
            (0,_common_util__WEBPACK_IMPORTED_MODULE_13__.updateScreenHeight)(mainPanelContainer, sidePanelContainer, browserSizeMode);
            return;
        }
        if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push) {
            const relatedElement = mainPanelContainer.querySelector(`div.screen-main-panel[data-index="${index}"]`);
            const panelElement = sidePanelContainer.querySelector(`div.screen-side-panel[data-index="${index}"]`);
            relatedElement.style.height = `${panelElement.clientHeight}px`;
            mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
        }
    }, [browserSizeMode, transitionType]);
    const deleteSelectedItem = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.builderActions.confirmDeleteContentChanged({ layoutId, layoutItemId }));
    }, [layoutId, layoutItemId]);
    const keyBindings = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return {
            delete: deleteSelectedItem,
            backspace: deleteSelectedItem
        };
    }, [deleteSelectedItem]);
    if (screens.length > 0) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_4__.ScreenGroupContext.Provider, { value: `${layoutId}:${layoutItemId}` },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('builder-layout-item exb-rnd', {
                    selected,
                    'small-size': browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small
                }), css: getStyle(viewportSize.height, builderTheme, isFirst, isLast, selected, isOverlay), "data-layoutitemid": layoutItemId, "data-layoutid": layoutId, onClick: selectItem, ref: domRef },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'screen-menu' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_menu__WEBPACK_IMPORTED_MODULE_5__.ScreenGroupMenu, { activeScreenIndex: activeIndex, itemIndex: itemIndex, total: screens.length, screenGroupId: screenGroupId, layoutId: layoutId, layoutItemId: layoutItemId, browserSizeMode: browserSizeMode, hasPanel: hasPanel, formatMessage: formatMessage })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'screen-group', ref: screenGroupRef },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'main-panels', ref: mainPanelRef },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common__WEBPACK_IMPORTED_MODULE_6__.ScreenMainPanelList, { rootLayoutId: layoutId, activeIndex: activeIndex, viewHeight: viewportSize.height, headerHeight: headerHeight, screens: screens, transitionType: transitionType, layoutEntry: _builder_layout_entry__WEBPACK_IMPORTED_MODULE_9__["default"], isSmallSize: browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small, isDesignMode: isDesignMode, builderTheme: builderTheme, formatMessage: formatMessage })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'side-panels' },
                        screens.map((screenId, idx) => {
                            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_side_panel__WEBPACK_IMPORTED_MODULE_7__.ScreenSidePanel, { key: screenId, index: idx, isLast: idx === screens.length - 1, screenId: screenId, viewHeight: viewportSize.height, headerHeight: headerHeight, refElement: isDesignMode ? domRef.current : null, layoutEntry: _builder_layout_entry__WEBPACK_IMPORTED_MODULE_9__["default"], viewOnly: viewOnly, builderTheme: builderTheme, isActive: idx === activeIndex, isSmallSize: browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small, isDesignMode: isDesignMode, stretched: stretchPanel, triggerType: triggerType, verticalSpace: verticalSpace, transitionType: panelTransitionType, screenTransitionType: transitionType, onHeightChange: onSidePanelHeightChange, onInterctionChange: onInterctionChange, formatMessage: formatMessage }));
                        }),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: debounceResizeHandler }))),
                !viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_context_menu__WEBPACK_IMPORTED_MODULE_11__.ScreenContextMenu, { layoutId: layoutId, layoutItemId: layoutItemId, layoutItem: layoutItem, isFirst: isFirst, isLast: isLast, builderTheme: builderTheme, formatMessage: formatMessage })),
                isDesignMode && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'group-tip' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'tip-content' }))),
                isDesignMode && selected && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.Keyboard, { bindings: keyBindings }))));
    }
    return null;
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/screen-menu.tsx":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/screen-menu.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenGroupMenu: () => (/* binding */ ScreenGroupMenu)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-for-builder/templates */ "jimu-for-builder/templates");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/plus.svg */ "./jimu-icons/svg/outlined/editor/plus.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/up.svg */ "./jimu-icons/svg/outlined/directional/up.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/duplicate-page.svg */ "./jimu-icons/svg/outlined/editor/duplicate-page.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/** @jsx jsx */











function ScreenGroupMenu(props) {
    const { formatMessage, activeScreenIndex, total, layoutId, layoutItemId, screenGroupId, browserSizeMode, hasPanel } = props;
    const editable = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const lockLayout = (_b = (_a = state.appConfig.forBuilderAttributes) === null || _a === void 0 ? void 0 : _a.lockLayout) !== null && _b !== void 0 ? _b : false;
        const appMode = (_c = state.appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.appMode;
        return appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !lockLayout;
    });
    const readonly = !editable || browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large;
    const [showPopper, setShowPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const popperRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const closeScreenPopper = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setShowPopper(false);
    }, []);
    const tooltipStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_5__.getTheme2)();
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      border: none;

      .tooltip {
        color: ${theme.colors.black};
        background-color: ${theme.colors.palette.light[600]};
        border-color: ${theme.colors.palette.light[300]};
      }
    `;
    }, []);
    const addScreen = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((templateJson) => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
        const screenGroupId = appConfigAction.appConfig.layouts[layoutId].content[layoutItemId].screenGroupId;
        appConfigAction.createScreenFromTemplate(null, templateJson).then((newScreenId) => {
            let appConfig = appConfigAction.appConfig;
            appConfig = appConfig.setIn(['screenGroups', screenGroupId, 'screens'], [].concat(appConfig.screenGroups[screenGroupId].screens, newScreenId)).setIn(['screens', newScreenId, 'parent'], screenGroupId);
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.appConfigChanged(appConfig));
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, appConfig.screenGroups[screenGroupId].screens.length - 1));
        });
        closeScreenPopper();
    }, [closeScreenPopper, layoutId, layoutItemId]);
    const toggleScreenPopper = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        if (hasPanel) {
            setShowPopper(!showPopper);
        }
        else {
            const templates = (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getScreenTemplates)();
            const templateJson = templates.find(item => item.name === 'nopanel');
            if (templateJson) {
                addScreen(templateJson);
            }
        }
    }, [showPopper, hasPanel, addScreen]);
    const moveup = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, activeScreenIndex - 1));
    }, [screenGroupId, activeScreenIndex]);
    const movedown = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, activeScreenIndex + 1));
    }, [screenGroupId, activeScreenIndex]);
    const removeScreen = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
        appConfigAction.removeScreenByIndex(activeScreenIndex, screenGroupId).exec();
        if (activeScreenIndex === total - 1) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, activeScreenIndex - 1));
        }
    }, [activeScreenIndex, total, screenGroupId]);
    const duplicateScreen = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
        appConfigAction.duplicateScreenByIndex(activeScreenIndex, screenGroupId);
        appConfigAction.exec();
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, activeScreenIndex + 1));
    }, [activeScreenIndex, screenGroupId]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'menu-bar d-flex justify-content-between align-items-center' },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex justify-content-start align-items-center' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'info ml-2' },
                formatMessage('screen'),
                ": ",
                activeScreenIndex + 1,
                " / ",
                total),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__.ThemedTooltip, { title: activeScreenIndex === 0 ? '' : formatMessage('previous'), placement: 'bottom', css: tooltipStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, className: 'rounded-circle', disabled: activeScreenIndex === 0, type: 'tertiary', onClick: moveup },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { icon: (jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_8___default()), size: 16 }))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__.ThemedTooltip, { title: activeScreenIndex === total - 1 ? '' : formatMessage('next'), placement: 'bottom', css: tooltipStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, className: 'rounded-circle', disabled: activeScreenIndex === total - 1, type: 'tertiary', onClick: movedown },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { icon: (jimu_icons_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_8___default()), rotate: 180, size: 16 }))),
            !readonly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: popperRef },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__.ThemedTooltip, { title: formatMessage('newScreen'), placement: 'bottom', css: tooltipStyle() },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, onClick: toggleScreenPopper, className: 'rounded-circle', type: 'tertiary', "data-testid": 'addBtn' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { icon: (jimu_icons_svg_outlined_editor_plus_svg__WEBPACK_IMPORTED_MODULE_7___default()), size: 16 }))))),
            !readonly && showPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getScreenTemplates)(), referenceElement: popperRef.current, onItemSelect: addScreen, onClose: closeScreenPopper })),
            !readonly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__.ThemedTooltip, { title: formatMessage('duplicateScreen'), placement: 'bottom', css: tooltipStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, className: 'rounded-circle', type: 'tertiary', onClick: duplicateScreen, "data-testid": 'duplicateBtn' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { icon: (jimu_icons_svg_outlined_editor_duplicate_page_svg__WEBPACK_IMPORTED_MODULE_9___default()), size: 16 })))),
            !readonly && total > 1 && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__.ThemedTooltip, { title: formatMessage('deleteScreen'), placement: 'bottom', css: tooltipStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, className: 'rounded-circle', type: 'tertiary', onClick: removeScreen, "data-testid": 'removeBtn' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { icon: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_6___default()), size: 16 })))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/screen-side-action-block.tsx":
/*!***************************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/screen-side-action-block.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Placeholder: () => (/* binding */ Placeholder)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/outlined/editor/plus */ "./jimu-icons/outlined/editor/plus.tsx");
/** @jsx jsx */








const buttonStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  width: 36px;
  height: 36px;
  padding: 0.5rem;
`;
const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  bottom: 0;
  top: 0;
  right: 0;
  background: transparent;
`;
function getStyle(builderTheme) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    display: flex;
    height: 200px;
    position: relative;
    z-index: 1;
    border: 1px dashed ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.dark[600], 0.6)};

    body.lock-layout &,
    body:not(.design-mode) & {
      display: none !important;
    }

    .action-item {
      z-index: 1;
    }
  `;
}
function Placeholder(props) {
    const { layouts, builderTheme } = props;
    const layoutId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return layouts[state.browserSizeMode] || layouts[state.appConfig.mainSizeMode];
    });
    const [showPopper, setShowPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const templateRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const togglePopper = (e) => {
        e.stopPropagation();
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.appBuilderSync.publishSidePanelToApp({ type: 'widget', isPlaceholder: true, isItemAccepted: isItemAccepted, onSelect: addWidget });
            return;
        }
        setShowPopper(!showPopper);
    };
    const closePopper = () => {
        setShowPopper(false);
    };
    const addWidget = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((item) => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
        (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__.addItemToLayout)(appConfigAction.appConfig, item, layoutId).then(({ layoutInfo, updatedAppConfig }) => {
            const columnService = jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout);
            const outAppConfig = columnService.processAfterItemAdded(updatedAppConfig, item, layoutInfo, null, { width: 100, height: 100 }, { left: 0, top: 0 }, null);
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(outAppConfig, layoutInfo));
        });
        setShowPopper(false);
    }, [layoutId]);
    const onDrop = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((draggingItem, containerRect, itemRect) => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
        (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__.addItemToLayout)(appConfigAction.appConfig, draggingItem, layoutId).then(({ layoutInfo, updatedAppConfig }) => {
            const columnService = jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout);
            const outAppConfig = columnService.processAfterItemAdded(updatedAppConfig, draggingItem, layoutInfo, null, containerRect, itemRect, null);
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(outAppConfig, layoutInfo));
        });
    }, [layoutId]);
    const isItemAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((item) => {
        if (item.layoutInfo) {
            return item.layoutInfo.layoutId !== layoutId;
        }
        return true;
    }, [layoutId]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutContext.Provider, { value: { isItemAccepted } },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'placeholder-btn w-100 justify-content-center align-items-center', css: getStyle(builderTheme) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_6__.DropArea, { css: dropareaStyle, layouts: layouts, onDrop: onDrop }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-item', ref: templateRef },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, css: buttonStyle, onClick: togglePopper },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_7__.PlusOutlined, { size: 'm' }))),
            showPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.WidgetListPopper, { referenceElement: templateRef.current, isAccepted: isItemAccepted, onSelect: addWidget, onClose: closePopper })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/screen-side-panel.tsx":
/*!********************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/screen-side-panel.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenSidePanel: () => (/* binding */ ScreenSidePanel)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var _common_screen_side_panel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/screen-side-panel */ "./jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx");
/* harmony import */ var _use_intersection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../use-intersection */ "./jimu-layouts/lib/flow-layout/use-intersection.tsx");
/* harmony import */ var _screen_side_action_block__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./screen-side-action-block */ "./jimu-layouts/lib/flow-layout/builder/screen-side-action-block.tsx");
/* harmony import */ var jimu_icons_outlined_application_invisible__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/outlined/application/invisible */ "./jimu-icons/outlined/application/invisible.tsx");
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/** @jsx jsx */











const animated = jimu_core__WEBPACK_IMPORTED_MODULE_0__.spring.animated;
function getStyle(props, viewHeight, headerHeight, isActive, verticalSpace, stretched, transitionType, screenTransitionType, isSmallSize, panelVisible, builderTheme, isResizing, width) {
    const { side, size } = props.panel || {};
    const visibleButtonStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    color: ${builderTheme.colors.palette.dark[900]};
    background-color: ${builderTheme.colors.palette.light[400]};
    border-color: ${builderTheme.colors.palette.light[600]};
    &:hover {
      color: ${builderTheme.colors.black};
      background-color: ${builderTheme.colors.palette.light[600]};
    }
  `;
    if (isSmallSize) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      ${(0,_common_screen_side_panel__WEBPACK_IMPORTED_MODULE_6__.getSidePanelStyle)(props, viewHeight, headerHeight, isActive, verticalSpace, stretched, transitionType, screenTransitionType, isSmallSize)};

      .panel-content {
        transform: none !important;

        &:not(.visible) {
          pointer-events: none;
          > .layout-wrapper > .layout,
          > .layout-wrapper > .placeholder-btn {
            pointer-events: none;
          }
        }
      }

      &.minimized .exb-drop-area, &.minimized .toggle-visible-btn {
        pointer-events: none !important;
      }

      .resize-handle {
        display: none;
      }

      .layout-wrapper {
        transform-origin: right bottom;
      }

      .toggle-visible-btn {
        display: flex;
        justify-content: flex-end;
        pointer-events: auto;

        > button {
          ${visibleButtonStyle};
        }
      }
      body:not(.design-mode) & .toggle-visible-btn {
        display: none !important;
      }
    `;
    }
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    ${(0,_common_screen_side_panel__WEBPACK_IMPORTED_MODULE_6__.getSidePanelStyle)(props, viewHeight, headerHeight, isActive, verticalSpace, stretched, transitionType, screenTransitionType, isSmallSize)};

    .panel-content {
      position: relative;
      touch-action: none;
      width: ${isResizing ? `${width}px` : size};

      &:not(.visible) {
        pointer-events: none;
        > .layout-wrapper > .layout,
        > .layout-wrapper > .placeholder-btn {
          pointer-events: none;
        }
      }

      &.simple-mode {
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        width: 100% !important;
      }

      .layout-wrapper {
        position: relative;
        transform-origin: right bottom;
      }
    }

    .toggle-visible-btn {
      display: flex;
      justify-content: flex-end;
      pointer-events: auto;
      > button {
        ${visibleButtonStyle};
        svg {
          margin-right: 0;
          margin-left: 0;
        }
      }
    }

    &.minimized .exb-drop-area, &.minimized .toggle-visible-btn {
        pointer-events: none !important;
      }

    .panel-content:hover {
      .resize-handle {
        display: block;
      }
    }
    body:not(.design-mode) & .resize-handle,
    body:not(.design-mode) & .toggle-visible-btn,
    body.lock-layout & .resize-handle {
      display: none !important;
    }
    .resize-handle {
      position: absolute;
      cursor: ew-resize;
      top: 0;
      bottom: 0;
      display: ${isResizing ? 'block' : 'none'};
      touch-action: none;
      outline: 1px solid var(--light-400);
      width: 5px;
      pointer-events: auto;
      &:after {
        content: '';
        position: absolute;
        z-index: -1;
        top: 0;
        bottom: 0;
        left: 50%;
        border-left: 1px dotted var(--light-400);
        transform: translate(-50%);
      }

      &.left {
        left: -5px;
        display: ${side !== 'left' ? 'none' : 'none !important'};
      }
      &.right {
        right: -5px;
        display: ${side !== 'right' ? 'none' : 'none !important'};
      }
    }
  `;
}
function updateScreenSize(screenId, size) {
    var _a;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)();
    const screenJson = appConfigAction.appConfig.screens[screenId];
    let newSize;
    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage((_a = screenJson.panel) === null || _a === void 0 ? void 0 : _a.size)) {
        newSize = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.toRatio(size, document.body.clientWidth);
    }
    else {
        newSize = `${Math.round(size)}px`;
    }
    appConfigAction.editScreenProperty(screenId, 'panel.size', newSize).exec();
}
function ScreenSidePanel(props) {
    const { index, screenId, onInterctionChange, onHeightChange, builderTheme, viewHeight, headerHeight, layoutEntry: LayoutEntry, isActive, isSmallSize, isDesignMode, transitionType, screenTransitionType, triggerType, stretched, viewOnly, verticalSpace = '0', useAnimation = true, formatMessage } = props;
    const screenJson = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.screens[screenId];
    });
    const panelVisible = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        return (_c = (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.screenPanelStates) === null || _b === void 0 ? void 0 : _b[screenId]) !== null && _c !== void 0 ? _c : true;
    });
    const { panel } = screenJson;
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const elementRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const interactableRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [isResizing, setIsResizing] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [deltaWidth, setDeltaWidth] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(0);
    const panelVisibleRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(panelVisible);
    const designModeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(isDesignMode);
    const initWidth = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const initialOffset = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        if (panel && panel.overlay && Math.abs(parseFloat(panel.offset)) > 0) {
            const isRTL = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext.isRTL;
            const factor = isRTL ? (panel.side === 'left' ? -1 : 1) : (panel.side === 'right' ? -1 : 1);
            return parseFloat(panel.offset) * factor;
        }
        return 0;
    }, [panel]);
    const [animationProps, api] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.spring.useSpring(() => ({ opacity: 1, size: 1, x: 0, y: 0 }));
    const onResizeStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((id, width) => {
        initWidth.current = width;
        setIsResizing(true);
        setDeltaWidth(0);
    }, []);
    const onResizing = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((id, dx, dy, dw, dh) => {
        setDeltaWidth(dw);
    }, []);
    const onResizeEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((id, dx, dy, dw, dh) => {
        updateScreenSize(screenId, initWidth.current + dw);
        setIsResizing(false);
    }, [screenId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (designModeRef.current !== isDesignMode) {
            designModeRef.current = isDesignMode;
            if (!isDesignMode) {
                api.start({ opacity: 1, x: 0, y: 0, immediate: true, onRest: null });
            }
            else {
                if (panelVisibleRef.current) {
                    api.start({ opacity: 1, x: 0, y: 0, immediate: true, onRest: null });
                }
                else {
                    api.start({ opacity: 0, immediate: true, onRest: null });
                }
            }
        }
    }, [isDesignMode, api]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (!interactableRef.current && elementRef.current) {
            interactableRef.current = (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(elementRef.current);
            (0,_builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_5__.bindResizeHandler)(interactableRef.current, {
                layoutItemId: screenId,
                onResizeStart: onResizeStart,
                onResizing: onResizing,
                onResizeEnd: onResizeEnd
            });
            return () => {
                if (interactableRef.current) {
                    interactableRef.current.unset();
                    interactableRef.current = null;
                }
            };
        }
    }, [screenId, onResizeStart, onResizing, onResizeEnd]);
    const intersectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((isIntersecting) => {
        onInterctionChange(index, isIntersecting);
    }, [index, onInterctionChange]);
    const onSizeChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((width, height) => {
        onHeightChange(index, height);
    }, [index, onHeightChange]);
    const hidePanel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        const buttonRect = e.target.getBoundingClientRect();
        const parentRect = domRef.current.getBoundingClientRect();
        const isRTL = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext.isRTL;
        domRef.current.classList.add('minimized');
        api.start({
            opacity: 0,
            size: 0,
            x: isRTL ? parentRect.left - buttonRect.left : parentRect.right - buttonRect.right,
            y: parentRect.bottom - buttonRect.bottom,
            immediate: !useAnimation,
            onRest: () => {
                panelVisibleRef.current = false;
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenPanelVisibleChanged(screenId, false));
            }
        });
    }, [api, screenId, useAnimation]);
    const showPanel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        domRef.current.classList.remove('minimized');
        api.start({
            opacity: 1,
            size: 1,
            x: 0,
            y: 0,
            immediate: !useAnimation,
            onRest: null
        });
    }, [api, useAnimation]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (panelVisibleRef.current !== panelVisible && panelVisible) {
            showPanel();
            panelVisibleRef.current = panelVisible;
        }
    }, [panelVisible, showPanel]);
    (0,_use_intersection__WEBPACK_IMPORTED_MODULE_7__.useIntersection)(domRef.current, props.refElement, isSmallSize ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Lower : triggerType !== null && triggerType !== void 0 ? triggerType : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Bottom, intersectionChange);
    const animationStyle = {
        opacity: animationProps.opacity,
        translateX: initialOffset,
        x: animationProps.x,
        y: animationProps.y
    };
    const togglable = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        return !viewOnly && isActive && (panel === null || panel === void 0 ? void 0 : panel.overlay);
    }, [panel, isActive, viewOnly]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('screen-side-panel', {
            'top-spacing': index === 0 && ((panel === null || panel === void 0 ? void 0 : panel.overlay) || isSmallSize)
        }), "data-screenid": screenId, "data-index": index, ref: domRef, css: getStyle(screenJson, viewHeight, headerHeight, isActive, verticalSpace, stretched || panel == null, transitionType, screenTransitionType, isSmallSize, panelVisible, builderTheme, isResizing, initWidth.current + deltaWidth) },
        panel && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(animated.div, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('panel-content', { visible: panelVisible }), ref: elementRef, style: animationStyle },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'layout-wrapper' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: panel.layout }),
                !viewOnly && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_side_action_block__WEBPACK_IMPORTED_MODULE_8__.Placeholder, { layouts: panel.layout, builderTheme: builderTheme }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'resize-handle left rnd-resize-left' }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'resize-handle right rnd-resize-right' })),
            togglable() && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'toggle-visible-btn', onClick: hidePanel, "data-testid": `toggleBtn-${panelVisible}` },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_10__.ThemedTooltip, { placement: 'auto', title: formatMessage('hideInDesignView') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { type: 'default', size: 'sm', className: 'rounded' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_invisible__WEBPACK_IMPORTED_MODULE_9__.InvisibleOutlined, { size: 'm' }))))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('panel-spacing', { 'last-item': props.isLast }) }))),
        !panel && panelVisible && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-content-placeholder' }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: onSizeChange })));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/builder/utils.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/builder/utils.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addTemplateRow: () => (/* binding */ addTemplateRow),
/* harmony export */   addTemplateScreenGroup: () => (/* binding */ addTemplateScreenGroup),
/* harmony export */   isFirstNonFloatingItem: () => (/* binding */ isFirstNonFloatingItem),
/* harmony export */   isLastNonFloatingItem: () => (/* binding */ isLastNonFloatingItem),
/* harmony export */   moveDown: () => (/* binding */ moveDown),
/* harmony export */   moveUp: () => (/* binding */ moveUp)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



// Add template below the layout item
function addTemplateRow(layoutId, layoutItemId, layoutTemplate) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.widgetService.createFromTemplate((0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)().appConfig, layoutTemplate, null, [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode()], {}, { isBlock: true });
        const appConfig = result[0];
        const newWidgetId = result[1];
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const layoutInfo = appConfigAction.addTemplateContentToLayout(layoutId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, newWidgetId);
        const layout = appConfigAction.appConfig.layouts[layoutId];
        const order = layout.order || [];
        const insertIndex = order.indexOf(layoutItemId);
        appConfigAction.adjustOrderOfItem(layoutInfo, insertIndex >= 0 ? insertIndex + 1 : NaN);
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, Object.assign(Object.assign({}, layoutInfo), { autoScroll: true })));
        return layoutInfo;
    });
}
function addTemplateScreenGroup(layoutId, layoutItemId, screenGroupTemplate) {
    return __awaiter(this, void 0, void 0, function* () {
        const context = {};
        const result = yield jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.screenGroupService.createFromTemplate((0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)().appConfig, screenGroupTemplate, null, [jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode()], context);
        const appConfig = result[0];
        const newScreenGroupId = result[1];
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        const layoutInfo = appConfigAction.addTemplateContentToLayout(layoutId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, newScreenGroupId);
        const layout = appConfigAction.appConfig.layouts[layoutId];
        const order = layout.order || [];
        const insertIndex = order.indexOf(layoutItemId);
        appConfigAction.adjustOrderOfItem(layoutInfo, insertIndex >= 0 ? insertIndex + 1 : NaN);
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfigAction.appConfig, Object.assign(Object.assign({}, layoutInfo), { autoScroll: true })));
        return layoutInfo;
    });
}
function isFirstNonFloatingItem(layoutInfo) {
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfig = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)().appConfig;
    const layout = appConfig.layouts[layoutId];
    let result = false;
    // eslint-disable-next-line
    layout.order.some(id => {
        var _a;
        const item = layout.content[id];
        if (!((_a = item.setting) === null || _a === void 0 ? void 0 : _a.isFloating) && !item.isPending) {
            result = id === layoutItemId;
            return true;
        }
    });
    return result;
}
function isLastNonFloatingItem(layoutInfo) {
    var _a;
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfig = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)().appConfig;
    const layout = appConfig.layouts[layoutId];
    let result = false;
    for (let i = layout.order.length - 1; i >= 0; i--) {
        const id = layout.order[i];
        const item = layout.content[id];
        if (!((_a = item.setting) === null || _a === void 0 ? void 0 : _a.isFloating) && !item.isPending) {
            result = id === layoutItemId;
            break;
        }
    }
    return result;
}
/**
 * Move a layout item down in the scrolling page, take the floating item into account.
 * @param layoutInfo
 */
function moveDown(appConfig, layoutInfo) {
    var _a;
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
    const layout = appConfigAction.appConfig.layouts[layoutId];
    const order = layout.order;
    const result = [].concat(order);
    const index = order.indexOf(layoutItemId);
    let target = order.length - 1;
    for (let i = index + 1; i < order.length; i++) {
        const id = order[i];
        const item = layout.content[id];
        if (!((_a = item.setting) === null || _a === void 0 ? void 0 : _a.isFloating)) {
            target = i;
            break;
        }
    }
    result.splice(target + 1, 0, layoutItemId);
    result.splice(index, 1);
    appConfigAction.editLayoutProperty(layoutId, 'order', result);
    return appConfigAction.appConfig;
}
/**
 * Move a layout item up in the scrolling page, take the floating item into account.
 * @param layoutInfo
 */
function moveUp(appConfig, layoutInfo) {
    var _a;
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
    const layout = appConfigAction.appConfig.layouts[layoutId];
    const order = layout.order;
    const result = [].concat(order);
    const index = order.indexOf(layoutItemId);
    let target = 0;
    for (let i = index - 1; i >= 0; i--) {
        const id = order[i];
        const item = layout.content[id];
        if (!((_a = item.setting) === null || _a === void 0 ? void 0 : _a.isFloating)) {
            target = i;
            break;
        }
    }
    result.splice(index, 1);
    result.splice(target, 0, layoutItemId);
    appConfigAction.editLayoutProperty(layoutId, 'order', result);
    return appConfigAction.appConfig;
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/index.tsx":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/index.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenMainPanel: () => (/* reexport safe */ _screen_main_panel__WEBPACK_IMPORTED_MODULE_1__.ScreenMainPanel),
/* harmony export */   ScreenMainPanelList: () => (/* reexport safe */ _screen_main_panel_list__WEBPACK_IMPORTED_MODULE_2__.ScreenMainPanelList),
/* harmony export */   ScreenSidePanel: () => (/* reexport safe */ _screen_side_panel__WEBPACK_IMPORTED_MODULE_0__.ScreenSidePanel)
/* harmony export */ });
/* harmony import */ var _screen_side_panel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./screen-side-panel */ "./jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx");
/* harmony import */ var _screen_main_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./screen-main-panel */ "./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx");
/* harmony import */ var _screen_main_panel_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./screen-main-panel-list */ "./jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx");





/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx":
/*!************************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenMainPanelList: () => (/* binding */ ScreenMainPanelList)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _screen_main_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./screen-main-panel */ "./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx");
/** @jsx jsx */


function getContainerStyle(transitionType, viewHeight, headerHeight, isSmallSize, numOfScreens) {
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: sticky;
      height: ${viewHeight}px;
      top: 0;

      body:not(.design-mode) & {
        height: ${headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh'};
        height: ${headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)'};
        top: ${headerHeight > 0 ? `${headerHeight}px` : 0};
        .layout .exb-drop-area {
          pointer-events: none !important;
        }
      }

      .screen-main-panel {
        position: absolute;
        opacity: 0;
        visibility: hidden;
        z-index: 0;
        transition: ${isSmallSize ? null : 'opacity 400ms'};
        top: 0;
        /* height: ${isSmallSize ? 'unset' : '100% !important'}; */

        .layout .exb-drop-area {
          pointer-events: none;
        }

        &.is-active {
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
          z-index: 1;

          .layout .exb-drop-area {
            pointer-events: auto;
          }
        }
      }
    `;
    }
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: sticky;
      height: ${viewHeight}px;
      overflow: hidden;
      top: 0;

      body:not(.design-mode) & {
        height: 100%;
        overflow: unset;
        position: relative;

        .screen-main-panel {
          top: ${headerHeight > 0 ? `${headerHeight}px` : 0};
        }
      }

      & > div:first-of-type {
        margin-top: 0 !important;
      }

      .screen-main-panel {
        position: sticky;
        top: 0;
        margin-top: ${numOfScreens === 1 ? '0 !important' : null};

        .spacing-area {
          display: none;
        }
      }
    `;
    }
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: sticky;
      height: ${viewHeight}px;
      overflow: hidden;
      top: 0;

      body:not(.design-mode) & {
        height: auto;
        overflow: unset;

        .screen-main-panel > .layout {
          top: ${headerHeight > 0 ? `${headerHeight}px` : 0};
        }
      }

      .screen-main-panel > .layout {
        position: sticky !important;
        top: 0;
      }
    `;
    }
}
function getPlaceholderStyle(transitionType, viewHeight, isSmallSize) {
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      height: calc(100% - ${viewHeight}px);
      background: transparent;
      pointer-events: none;

      body:not(.design-mode) & {
        height: calc(100% - 100vh);
        height: calc(100% - var(--vh) * 100);
      }
    `;
    }
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover || transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      height: calc(100% - ${viewHeight}px);
      background: transparent;
      pointer-events: none;
      display: block;

      body:not(.design-mode) & {
        height: calc(100% - 100vh);
        height: calc(100% - var(--vh) * 100);
        display: none;
      }
    `;
    }
}
function ScreenMainPanelList(props) {
    const { rootLayoutId, activeIndex, viewHeight, headerHeight, screens, transitionType, isSmallSize, layoutEntry, isDesignMode, formatMessage, builderTheme } = props;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'screen-container', css: getContainerStyle(transitionType, viewHeight, headerHeight, isSmallSize, screens.length) }, screens.map((screenId, idx) => {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_main_panel__WEBPACK_IMPORTED_MODULE_1__.ScreenMainPanel, { key: screenId, rootLayoutId: rootLayoutId, index: idx, isActive: activeIndex === idx, screenId: screenId, viewHeight: viewHeight, headerHeight: headerHeight, isAbsolute: transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade, isLast: idx === screens.length - 1, isSmallSize: isSmallSize, layoutEntry: layoutEntry, isDesignMode: isDesignMode, formatMessage: formatMessage, builderTheme: builderTheme }));
        })),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'screen-placeholder', css: getPlaceholderStyle(transitionType, viewHeight, isSmallSize) })));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx":
/*!*******************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenMainPanel: () => (/* binding */ ScreenMainPanel)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type */ "./jimu-layouts/lib/flow-layout/common/type.ts");
/* harmony import */ var jimu_icons_outlined_application_visible__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/application/visible */ "./jimu-icons/outlined/application/visible.tsx");
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/** @jsx jsx */






function ScreenMainPanel(props) {
    const { rootLayoutId, viewHeight, headerHeight, screenId, isActive, isAbsolute, isLast, isSmallSize, layoutEntry: LayoutEntry, isDesignMode, formatMessage, builderTheme } = props;
    const screenJson = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.screens[screenId];
    });
    const panelVisible = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        return (_c = (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.screenPanelStates) === null || _b === void 0 ? void 0 : _b[screenId]) !== null && _c !== void 0 ? _c : true;
    });
    const { main } = screenJson;
    const { side, size, overlay = true } = screenJson.panel || {};
    const elementRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const showPanel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenPanelVisibleChanged(screenId, true));
    }, [screenId]);
    function getStyle() {
        var _a, _b, _c, _d;
        if (isSmallSize) {
            const isDocked = !overlay && screenJson.panel != null; // overlay === false
            const heightInDesignMode = isDocked
                ? `${Math.round(viewHeight * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}px`
                : `${viewHeight}px`;
            const heightInRuntime = isDocked
                ? `${Math.round(100 * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}`
                : '100';
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        pointer-events: none !important;
        display: flex;
        flex-direction: column;
        width: 100%;
        height: ${viewHeight}px;

        > .layout {
          ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundEmotionStyle((_b = (_a = screenJson.main) === null || _a === void 0 ? void 0 : _a.background) !== null && _b !== void 0 ? _b : {})};
          height: ${heightInDesignMode} !important;
          border: none !important;
          pointer-events: auto;
        }

        body:not(.design-mode) & {
          height: ${headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh'};
          height: ${headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)'};
          > .layout {
            height: ${heightInRuntime}vh !important;
            height: calc(var(--vh) * ${heightInRuntime}) !important;
          }
        }

        .spacing-area {
          flex: 1;
          background: transparent;
          pointer-events: none;
        }

        .toggle-visible-btn {
          position: absolute;
          bottom: 0;
          right: left;
          pointer-events: auto;
        }
      `;
        }
        let left = '0px';
        let right = '0px';
        if (side !== 'none') {
            if (!overlay && side !== 'right') {
                left = size;
            }
            if (!overlay && side === 'right') {
                right = size;
            }
        }
        const btnStyle = builderTheme
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      color: ${builderTheme.colors.palette.dark[900]};
      background-color: ${builderTheme.colors.palette.light[400]};
      border-color: ${builderTheme.colors.palette.light[600]};
      &:hover {
        color: ${builderTheme.colors.black};
        background-color: ${builderTheme.colors.palette.light[600]};
      }
    `
            : null;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundEmotionStyle((_d = (_c = screenJson.main) === null || _c === void 0 ? void 0 : _c.background) !== null && _d !== void 0 ? _d : {})};
      left: ${isAbsolute ? left : null};
      right: ${isAbsolute ? right : null};
      margin-left: ${!isAbsolute ? left : null};
      margin-right: ${!isAbsolute ? right : null};
      pointer-events: auto;
      display: flex;
      flex-direction: column;
      position: relative;

      > .layout {
        height: ${viewHeight}px !important;
        background: transparent;
        border: none !important;
      }

      body:not(.design-mode) & {
        > .layout {
          height: ${headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh'} !important;
          height: ${headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)'} !important;
        }
      }

      .spacing-area {
        flex: 1;
        background: transparent;
        pointer-events: none;
      }

      .toggle-visible-btn {
        position: absolute;
        bottom: 0;
        right: 0;

        > button {
          ${btnStyle};
          svg {
            margin-right: 0;
            margin-left: 0;
          }
        }
      }
    `;
    }
    const clazzName = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('screen-main-panel', {
        'is-active': isActive,
        'last-one': isLast
    });
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_2__.PageVisibilityContext.Provider, { value: isAbsolute ? isActive : true },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `${rootLayoutId}_screen_${screenId}`, className: clazzName, css: getStyle(), ref: elementRef, "data-screenid": screenId, "data-index": props.index },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: main.layout, isInWidget: true }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'spacing-area' }),
            isDesignMode && !panelVisible && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'toggle-visible-btn', onClick: showPanel, "data-testid": 'toggleBtn' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__.ThemedTooltip, { placement: 'auto', title: formatMessage('showInDesignView') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'default', size: 'sm', className: 'rounded' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_visible__WEBPACK_IMPORTED_MODULE_4__.VisibleOutlined, { size: 'm' }))))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx":
/*!*******************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenSidePanel: () => (/* binding */ ScreenSidePanel),
/* harmony export */   getSidePanelStyle: () => (/* binding */ getSidePanelStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _use_intersection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../use-intersection */ "./jimu-layouts/lib/flow-layout/use-intersection.tsx");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type */ "./jimu-layouts/lib/flow-layout/common/type.ts");
/** @jsx jsx */




const MIN_PANEL_RATIO = 0.25;
function getSidePanelStyle(props, viewHeight, headerHeight, isActive, verticalSpace, stretched, transitionType, screenTransitionType, isSmallSize) {
    const { side, size, offset, background, overlay = true, padding } = props.panel || {};
    const isRTL = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext.isRTL;
    const factor = isRTL ? (side === 'left' ? '-' : '') : (side === 'right' ? '-' : '');
    const backgroundStyle = jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundEmotionStyle(background !== null && background !== void 0 ? background : {});
    const spacing = parseFloat(verticalSpace);
    if (isSmallSize) {
        // overlay === false
        const docked = !overlay;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: 100%;
      background: transparent;
      pointer-events: none;
      position: relative;
      opacity: ${transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade ? (isActive ? '1' : '0.5') : null};
      min-height: ${screenTransitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover ? `${viewHeight}px` : null};
      padding-top: ${screenTransitionType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade && docked ? `${Math.round(viewHeight * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}px` : null};

      &.top-spacing > .panel-content {
        /* margin-top: ${Math.round(viewHeight * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}px; */
      }

      .panel-content {
        width: 100%;
        ${overlay ? '' : backgroundStyle};
        /* margin-top: ${transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push ? '${Math.round(viewHeight * SCREEN_RATIO_IN_SMALL_SIZE)}px' : 'unset'}; */

        > .layout, > .layout-wrapper > .layout {
          pointer-events: auto;
          ${overlay ? backgroundStyle : ''};
          min-height: ${Math.round(viewHeight * MIN_PANEL_RATIO)}px;
          padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(padding)};
        }

        > .layout-wrapper > .column-layout > .trail-container,
        > .column-layout > .trail-container {
          overflow-y: hidden;
        }

        > .layout-wrapper > .placeholder-btn {
          pointer-events: auto;
          ${overlay ? backgroundStyle : ''};
        }

        .panel-spacing {
          height: ${Math.round(viewHeight * spacing / 100)}px;
        }
      }

      .panel-content-placeholder {
        width: 1px;
        min-height: ${viewHeight}px;
      }

      body:not(.design-mode) & {
        min-height: ${screenTransitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover ? '100vh' : null};
        min-height: ${screenTransitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover ? 'calc(var(--vh) * 100)' : null};
        padding-top: ${screenTransitionType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade && docked ? `${100 * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE}vh` : null};
        padding-top: ${screenTransitionType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade && docked ? `calc(var(--vh) * ${100 * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE})` : null};

        > .layout, > .layout-wrapper > .layout {
          min-height: ${Math.round(100 * MIN_PANEL_RATIO)}vh;
          min-height: calc(var(--vh) * ${Math.round(100 * MIN_PANEL_RATIO)});
        }

        .panel-content-placeholder {
          min-height: 100vh;
          min-height: calc(var(--vh) * 100);
        }

        .panel-spacing {
          height: ${spacing}vh;
          height: calc(var(--vh) * ${spacing});
        }
      }
    `;
    }
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    width: 100%;
    background: transparent;
    pointer-events: none;
    display: flex;
    flex-direction: ${side === 'right' ? 'row-reverse' : 'row'};
    justify-content: ${side === 'center' && overlay ? 'center' : 'flex-start'};
    position: relative;
    opacity: ${transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade ? (isActive ? '1' : '0.5') : null};

    &.top-spacing > .panel-content {
      /* margin-top: ${Math.round(viewHeight * 2 / 3)}px; */
    }

    .panel-content {
      width: ${size};
      transform: ${overlay && Math.abs(parseFloat(offset)) > 0 ? `translateX(${factor}${offset})` : null};
      flex: 0 auto;
      min-height: ${stretched ? `${viewHeight}px` : 'unset'};
      ${overlay ? '' : backgroundStyle};

      > .layout,
      > .layout-wrapper > .layout {
        pointer-events: auto;
        ${overlay ? backgroundStyle : ''};
        min-height: ${Math.round(viewHeight * MIN_PANEL_RATIO)}px;
        padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(padding)};
      }

      > .layout-wrapper > .column-layout > .trail-container,
      > .column-layout > .trail-container {
        overflow-y: hidden;
      }

      > .layout-wrapper > .placeholder-btn {
        pointer-events: auto;
        ${overlay ? backgroundStyle : ''};
      }

      .panel-spacing {
        height: ${Math.round(viewHeight * spacing / 100)}px;

        &.last-item {
          height: ${stretched ? `${Math.round(viewHeight * spacing / 100)}` : viewHeight}px;
        }
      }
    }

    .panel-content-placeholder {
      width: 1px;
      min-height: ${stretched ? viewHeight : Math.round(viewHeight * MIN_PANEL_RATIO)}px;
    }

    body:not(.design-mode) & {
      &.top-spacing > .panel-content {
        /* margin-top: ${66.7}vh; */
      }

      .panel-content {
        min-height: ${stretched ? (headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh') : 'unset'};
        min-height: ${stretched ? (headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)') : 'unset'};
        > .layout, > .layout-wrapper > .layout {
          min-height: unset;
        }

        .panel-spacing {
          height: ${spacing}vh;
          height: calc(var(--vh) * ${spacing});

          &.last-item {
            height: ${stretched ? spacing : 100}vh;
            height: calc(var(--vh) * ${stretched ? spacing : 100});
          }
        }
      }
      .panel-content-placeholder {
        min-height: ${stretched ? '100' : Math.round(100 * MIN_PANEL_RATIO)}vh;
        min-height: calc(var(--vh) * ${stretched ? '100' : Math.round(100 * MIN_PANEL_RATIO)});
      }
    }
  `;
}
/* eslint-disable @typescript-eslint/no-unused-vars */
function ScreenSidePanel(props) {
    var _a;
    const { index, screenId, onInterctionChange, onHeightChange, viewHeight, headerHeight, layoutEntry: LayoutEntry, isActive, isSmallSize, transitionType, screenTransitionType, triggerType, stretched, verticalSpace = '0' } = props;
    const screenJson = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.screens[screenId];
    });
    const { panel } = screenJson;
    const elementRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [loaded, setLoaded] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const handleHeightChangeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const intersectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((isIntersecting) => {
        onInterctionChange(index, isIntersecting);
    }, [index, onInterctionChange]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        handleHeightChangeRef.current = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(onHeightChange, 200);
        return () => {
            var _a;
            (_a = handleHeightChangeRef.current) === null || _a === void 0 ? void 0 : _a.cancel();
        };
    }, [onHeightChange]);
    const onSizeChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((width, height) => {
        var _a;
        (_a = handleHeightChangeRef.current) === null || _a === void 0 ? void 0 : _a.call(handleHeightChangeRef, index, height);
    }, [index]);
    (0,_use_intersection__WEBPACK_IMPORTED_MODULE_2__.useIntersection)(elementRef.current, props.refElement, isSmallSize ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Lower : (triggerType !== null && triggerType !== void 0 ? triggerType : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Bottom), intersectionChange);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        setLoaded(true);
    }, []);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('screen-side-panel', {
            'top-spacing': index === 0 && (((_a = screenJson.panel) === null || _a === void 0 ? void 0 : _a.overlay) || isSmallSize)
        }), "data-screenid": screenId, "data-index": index, ref: elementRef, css: getSidePanelStyle(screenJson, viewHeight, headerHeight, isActive, verticalSpace, stretched || panel == null, transitionType, screenTransitionType, isSmallSize) },
        panel && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-content' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: panel.layout }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('panel-spacing', { 'last-item': props.isLast }) }))),
        !panel && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-content-placeholder' }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: onSizeChange })));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/type.ts":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/type.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_HEADER_HEIGHT: () => (/* binding */ DEFAULT_HEADER_HEIGHT),
/* harmony export */   SCREEN_RATIO_IN_SMALL_SIZE: () => (/* binding */ SCREEN_RATIO_IN_SMALL_SIZE)
/* harmony export */ });
const SCREEN_RATIO_IN_SMALL_SIZE = 0.33;
const DEFAULT_HEADER_HEIGHT = 75;


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/util.ts":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/util.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calHeight: () => (/* binding */ calHeight),
/* harmony export */   updateScreenHeight: () => (/* binding */ updateScreenHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");


function updateScreenHeight(mainPanelContainer, sidePanelContainer, browserSizeMode) {
    const screenElements = mainPanelContainer.querySelectorAll('div.screen-main-panel');
    const panelElements = sidePanelContainer.querySelectorAll('div.screen-side-panel');
    const size = screenElements.length;
    for (let i = 1; i < size; i++) {
        const screenItem = screenElements.item(i);
        const previousItem = screenElements.item(i - 1);
        const previousPanelItem = panelElements.item(i - 1);
        screenItem.style.marginTop = `${previousPanelItem.clientHeight - previousItem.clientHeight}px`;
    }
    if (browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
        mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
    }
}
function calHeight(layoutItem, itemSetting) {
    const bbox = layoutItem.bbox || {};
    const height = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(bbox, 'height');
    if (!height || (0,_utils__WEBPACK_IMPORTED_MODULE_1__.isPercentage)(height)) {
        return 'auto';
    }
    switch (itemSetting.heightMode) {
        case 'auto':
            return 'auto';
        case 'fixed':
            return height;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/default-setting.ts":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/default-setting.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_FLOW_ITEM_SETTING: () => (/* binding */ DEFAULT_FLOW_ITEM_SETTING),
/* harmony export */   DEFAULT_FLOW_SETTING: () => (/* binding */ DEFAULT_FLOW_SETTING)
/* harmony export */ });
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

const DEFAULT_FLOW_SETTING = {
    gutter: 0,
    style: {
        padding: {
            number: [0],
            unit: 'px'
        },
        justifyContent: 'flex-start',
        alignItems: 'stretch',
        borderRadius: {
            number: [0],
            unit: jimu_ui__WEBPACK_IMPORTED_MODULE_0__.DistanceUnits.PIXEL
        }
    }
};
const DEFAULT_FLOW_ITEM_SETTING = {
    lockParent: true,
    heightMode: 'auto',
    offsetX: 0,
    offsetY: 0
};


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/layout-setting.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/layout-setting.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./default-setting */ "./jimu-layouts/lib/flow-layout/default-setting.ts");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/** @jsx jsx */





const inputStyle = { width: 110 };
class FlowLayoutSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.updateSpace = value => {
            const { layoutId } = this.props;
            if (!isNaN(value.distance)) {
                const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
                appConfigAction.editLayoutProperty(layoutId, 'setting.gutter', value.distance).exec();
            }
        };
        this.updatePadding = value => {
            const { layoutId } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            appConfigAction.editLayoutProperty(layoutId, 'setting.style.padding', value).exec();
        };
    }
    render() {
        const { formatMessage } = this.props;
        const setting = this.props.setting || {};
        const style = setting.style || {};
        const gutter = setting.gutter >= 0 ? setting.gutter : _default_setting__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_FLOW_SETTING.gutter;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { role: 'group', className: 'flow-layout-setting', title: formatMessage('layout'), "aria-label": formatMessage('layout') },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { label: formatMessage('gap') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_4__.InputUnit, { style: inputStyle, "aria-label": formatMessage('gap'), min: 0, value: { distance: gutter, unit: undefined }, onChange: this.updateSpace })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { flow: 'wrap', role: 'group', label: formatMessage('padding'), "aria-label": formatMessage('padding') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_4__.Padding, { value: style.padding, onChange: this.updatePadding }))));
    }
}
const mapStateToProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)((state, ownProps) => { var _a, _b, _c, _d; return (_d = (_c = (_b = (_a = state.appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.layouts) === null || _c === void 0 ? void 0 : _c[ownProps.layoutId]) === null || _d === void 0 ? void 0 : _d.setting; }, setting => ({ setting }));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToProps)(FlowLayoutSetting));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/layout-transform.ts":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/layout-transform.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlowLayoutTransformer: () => (/* binding */ FlowLayoutTransformer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class FlowLayoutTransformer {
    constructor() {
        this.id = 'flow-layout-transformer';
        this.layoutType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout;
    }
    transformLayout(layout, fromSizeMode, toSizeMode) {
        if (fromSizeMode !== toSizeMode && toSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layout);
            (layout.order || []).forEach((itemId) => {
                updatedLayout = updatedLayout.setIn(['content', itemId, 'setting', 'heightMode'], 'auto');
            });
            return updatedLayout;
        }
        return layout;
    }
    transformLayoutItem(item, index, fromLayoutId, toLayoutId, fromSizeMode, toSizeMode) {
        return { index, item };
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/layout-utils.ts":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/layout-utils.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateFloatingPosition: () => (/* binding */ calculateFloatingPosition),
/* harmony export */   getWidthFromSetting: () => (/* binding */ getWidthFromSetting),
/* harmony export */   mapStateToFlowItemProps: () => (/* binding */ mapStateToFlowItemProps)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _search_contents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../search/contents */ "./jimu-layouts/lib/search/contents.ts");




const mapStateToFlowItemProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a;
        const { layoutItem } = ownProps;
        const selection = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection;
        if (selection) {
            return selection.layoutId === ownProps.layoutId && selection.layoutItemId === layoutItem.id;
        }
        return false;
    },
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutItem } = ownProps;
        let padding = [0, 0, 0, 0];
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widgetId = layoutItem.widgetId;
            const widgetJson = state.appConfig.widgets[widgetId];
            if (widgetJson) {
                padding = jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.expandStyleArray((_c = (_b = (_a = widgetJson.config) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.padding) === null || _c === void 0 ? void 0 : _c.number);
            }
        }
        return padding[0] + padding[2]; // top and bottom padding of inner row widget
    },
    (state, ownProps) => {
        const { layoutItem } = ownProps;
        let isEmpty = true;
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widgetId = layoutItem.widgetId;
            const widgetJson = state.appConfig.widgets[widgetId];
            if (widgetJson) {
                const layoutName = Object.keys(widgetJson.layouts)[0];
                const layoutId = (0,_search_contents__WEBPACK_IMPORTED_MODULE_3__.findLayoutId)(widgetJson.layouts[layoutName], state.browserSizeMode, state.appConfig.mainSizeMode);
                const layout = state.appConfig.layouts[layoutId];
                if (layout && Object.keys(layout.content || []).length > 0) {
                    // eslint-disable-next-line
                    Object.keys(layout.content || []).some((itemId) => {
                        const layoutItem = layout.content[itemId];
                        if (!layoutItem.isPending) {
                            isEmpty = false;
                            return true;
                        }
                    });
                }
            }
        }
        return isEmpty;
    }
], (selected, padding, isEmpty) => ({ selected, padding, isEmpty }));
function getWidthFromSetting(setting) {
    const value = parseFloat(setting === null || setting === void 0 ? void 0 : setting.width);
    if (value > 0) {
        if (`${setting.width}`.includes('px')) {
            return `${Math.round(value)}px`;
        }
        return `${Math.round(value)}%`;
    }
    return '100%';
}
function calculateFloatingPosition(layoutItem, resizingProps = {}) {
    var _a, _b, _c;
    const setting = layoutItem.setting;
    const floatingArea = (_a = setting === null || setting === void 0 ? void 0 : setting.floatingArea) !== null && _a !== void 0 ? _a : 1;
    const offsetX = `${(_b = setting === null || setting === void 0 ? void 0 : setting.offsetX) !== null && _b !== void 0 ? _b : 0}px`;
    const offsetY = `${(_c = setting === null || setting === void 0 ? void 0 : setting.offsetY) !== null && _c !== void 0 ? _c : 0}px`;
    const { dh, dw, initWidth, initHeight, isResizing } = resizingProps;
    // translateX will not be modified by the emotion if it uses calc()
    const translateX = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.isRTL)() ? `translateX(calc(50% + ${offsetX}))` : `translateX(calc(-50% + ${offsetX}))`;
    const pos = {};
    switch (floatingArea) {
        case 1: // top-left
            pos.left = offsetX;
            pos.top = offsetY;
            pos.transform = null;
            break;
        case 2: // top-center
            pos.left = '50%';
            pos.top = offsetY;
            pos.transform = translateX;
            break;
        case 3: // top-right
            pos.right = offsetX;
            pos.top = offsetY;
            pos.transform = null;
            break;
        case 4: // middle-left
            pos.left = offsetX;
            pos.top = '50%';
            pos.transform = `translateY(calc(-50% + ${offsetY}))`;
            break;
        case 5: // middle-center
            pos.left = '50%';
            pos.top = '50%';
            pos.transform = `${translateX} translateY(calc(-50% + ${offsetY}))`;
            break;
        case 6: // middle-right
            pos.right = offsetX;
            pos.top = '50%';
            pos.transform = `translateY(calc(-50% + ${offsetY}))`;
            break;
        case 7: // bottom-left
            pos.left = offsetX;
            pos.bottom = offsetY;
            pos.transform = null;
            break;
        case 8: // bottom-center
            pos.left = '50%';
            pos.bottom = offsetY;
            pos.transform = translateX;
            break;
        case 9: // bottom-right
            pos.right = offsetX;
            pos.bottom = offsetY;
            pos.transform = null;
            break;
    }
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    position: fixed;
    z-index: 1;
    width: ${isResizing ? `${initWidth + dw}px` : (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(layoutItem.bbox, 'width')};
    height: ${isResizing ? `${initHeight + dh}px` : (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(layoutItem.bbox, 'height')};
    left: ${pos.left};
    right: ${pos.right};
    top: ${pos.top};
    bottom: ${pos.bottom};
    transform: ${pos.transform};
  `;
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/use-intersection.tsx":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/use-intersection.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   INTERSECTION_HEIGHT: () => (/* binding */ INTERSECTION_HEIGHT),
/* harmony export */   useIntersection: () => (/* binding */ useIntersection)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const INTERSECTION_HEIGHT = 2; // in percentage
function buildThresholdList() {
    const step = 100;
    const result = [0];
    for (let i = 1; i <= step; i++) {
        result.push(i / step);
    }
    return result;
}
function getRootMargin(triggerType) {
    switch (triggerType) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Top:
            return `0% 0% -${100 - INTERSECTION_HEIGHT}% 0%`;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Bottom:
            // make a little space between the bottom in order to trigger screen out
            return `-${100 - INTERSECTION_HEIGHT}% 0% -2px 0%`;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Upper:
            return `-${100 / 3 - INTERSECTION_HEIGHT / 2}% 0% -${200 / 3 - INTERSECTION_HEIGHT / 2}% 0%`;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Lower:
            return `-${200 / 3 - INTERSECTION_HEIGHT / 2}% 0% -${100 / 3 - INTERSECTION_HEIGHT / 2}% 0%`;
        default:
            return undefined;
    }
}
/**
 *
 * @param ref
 * @param rootElement
 * @param onIntersectionChange
 */
function useIntersection(ref, rootElement, triggerType, onIntersectionChange) {
    const observerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const lastIntersecting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (observerRef.current) {
            observerRef.current.unobserve(ref);
            observerRef.current = null;
        }
        const handleIntersectionChange = (entry) => {
            /**
             * This event may be trigged later than the intersecting time.
             * For example, the two rects may looks like the following when
             * interction change event is fired.
             *               ------------ rect.top
             *               |          |
             *          ----------------------- rootRect.top
             *          |    |          |     |
             *          |    |          |     |
             *          |    |          |     |
             *          ----------------------- rootRect.bottom
             *               |          |
             *               |          |
             *               ------------ rect.bottom
             */
            const rect = entry.boundingClientRect;
            const rootRect = entry.rootBounds;
            const isTopIntersecting = Math.abs(rect.bottom - rootRect.top) >= Math.abs(rect.top - rootRect.top);
            if (entry.isIntersecting) {
                lastIntersecting.current = true;
                if (isTopIntersecting) {
                    onIntersectionChange(true);
                    return false;
                }
            }
            else if (lastIntersecting.current) {
                lastIntersecting.current = false;
                if (isTopIntersecting) {
                    onIntersectionChange(false);
                    return false;
                }
            }
        };
        if (ref && typeof IntersectionObserver === 'function') {
            const handler = (entries) => {
                handleIntersectionChange(entries[0]);
            };
            const observer = new IntersectionObserver(handler, {
                threshold: buildThresholdList(),
                root: rootElement || document,
                rootMargin: getRootMargin(triggerType)
            });
            observer.observe(ref);
            observerRef.current = observer;
            return () => {
                observerRef.current.unobserve(ref);
                observerRef.current = null;
            };
        }
    }, [ref, rootElement, onIntersectionChange, triggerType]);
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/action-block.tsx":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/action-block.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionBlock: () => (/* binding */ ActionBlock)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-for-builder/templates */ "jimu-for-builder/templates");
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/outlined/editor/plus */ "./jimu-icons/outlined/editor/plus.tsx");
/* harmony import */ var jimu_icons_outlined_application_grid_template__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/application/grid-template */ "./jimu-icons/outlined/application/grid-template.tsx");
/** @jsx jsx */









const buttonStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  pointer-events: auto;
`;
function getStyle(isGridPage) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    body.lock-layout &,
    body:not(.design-mode) & {
      display: none !important;
    }

    display: flex;
    height: ${isGridPage ? '200px' : '100%'};
    padding: 1rem;
    pointer-events: none;
    position: relative;
    z-index: 1;
    .btn-text {
      line-height: 32px;
    }
    .btn {
      margin-right: 8px;
    }
    .action-item {
      width: 32px;
    }
    .action-seprator {
      width: 300px;
      height: 1px;
      background-color: var(--light-300);
    }
  `;
}
function ActionBlock(props) {
    const { layoutId, pageContext, onTemplateSelected, onPageTemplateSelected } = props;
    const { formatMessage, rootLayoutId } = pageContext;
    const [showTemplatePopper, setShowTemplatePopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [showPageTemplatePopper, setShowPageTemplatePopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [showWidgetPopper, setShowWidgetPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const isGridPage = layoutId === rootLayoutId;
    const placeholderRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const templateRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const pageTemplateRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const show = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const lockLayout = (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false;
        const isDesignMode = state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
        return isDesignMode && !lockLayout;
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        if (!isGridPage && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            setShowTemplatePopper(true);
        }
    });
    const templateTooltip = formatMessage('chooseTemplate', {
        type: formatMessage('grid').toLocaleLowerCase()
    });
    const pageTemplateTooltip = formatMessage('chooseTemplate', {
        type: formatMessage('page').toLocaleLowerCase()
    });
    const toggleTemplatePopper = (e) => {
        e.stopPropagation();
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: 'template', templateMethod: 'getGridTemplates', onSelect: handleTemplateSelected });
            return;
        }
        setShowTemplatePopper(!showTemplatePopper);
    };
    const closeTemplatePopper = () => {
        setShowTemplatePopper(false);
    };
    const togglePageTemplatePopper = (e) => {
        e.stopPropagation();
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: 'template', templateMethod: 'getFullScreenGridPageTemplates', onSelect: handlePageTemplateSelected });
            return;
        }
        setShowPageTemplatePopper(!showPageTemplatePopper);
    };
    const closePageTemplatePopper = () => {
        setShowPageTemplatePopper(false);
    };
    const toggleWidgetPopper = (e) => {
        e.stopPropagation();
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: 'widget', isPlaceholder: false, isItemAccepted: () => true, onSelect: handleWidgetSelected });
            return;
        }
        setShowWidgetPopper(!showWidgetPopper);
    };
    const closeWidgetPopper = () => {
        setShowWidgetPopper(false);
    };
    const handleTemplateSelected = (template) => {
        setShowTemplatePopper(false);
        onTemplateSelected(template);
    };
    const handlePageTemplateSelected = (template) => {
        setShowPageTemplatePopper(false);
        onPageTemplateSelected(template);
    };
    const handleWidgetSelected = (item) => {
        setShowWidgetPopper(false);
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)();
        let res;
        if (item.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            res = new Promise(resolve => {
                resolve(appConfigAction.addNewSectionToLayout(layoutId));
            });
        }
        else {
            res = appConfigAction.addNewWidgetToLayout(layoutId, { uri: item.uri, itemId: item.itemId });
        }
        res.then(layoutItemId => {
            const rootLayoutInfo = { layoutId, layoutItemId };
            appConfigAction
                .editLayoutProperty(layoutId, 'setting.rootItem', layoutItemId)
                .editLayoutItemProperty(rootLayoutInfo, 'bbox', { width: 100 });
            (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_6__.updateLayoutAndSelection)(appConfigAction.appConfig, rootLayoutInfo);
        });
    };
    if (!show) {
        return null;
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 flex-column justify-content-center align-items-center', css: getStyle(isGridPage) },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex justify-content-center align-items-center' },
            !isGridPage && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__.ThemedTooltip, { placement: 'bottom', title: formatMessage('addWidget') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, ref: placeholderRef, css: buttonStyle, onClick: toggleWidgetPopper, "aria-haspopup": true },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_7__.PlusOutlined, { size: 16 }))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__.ThemedTooltip, { placement: 'bottom', title: templateTooltip },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-item' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { ref: templateRef, icon: true, onClick: toggleTemplatePopper, css: buttonStyle, "aria-haspopup": true },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_grid_template__WEBPACK_IMPORTED_MODULE_8__.GridTemplateOutlined, { autoFlip: true, size: 16 })))))),
            isGridPage && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__.ThemedTooltip, { placement: 'bottom', title: pageTemplateTooltip },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-item' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { ref: pageTemplateRef, icon: true, onClick: togglePageTemplatePopper, css: buttonStyle, className: 'rounded-circle', "aria-haspopup": true },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_grid_template__WEBPACK_IMPORTED_MODULE_8__.GridTemplateOutlined, { autoFlip: true, size: 16 })))))),
        isGridPage && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'action-seprator mt-4' }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("h5", { className: 'btn-text mt-2' }, formatMessage('dropWidgetToAdd'))))),
        showTemplatePopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getGridTemplates)(), referenceElement: templateRef.current, onItemSelect: handleTemplateSelected, onClose: closeTemplatePopper })),
        showWidgetPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.WidgetListPopper, { referenceElement: placeholderRef.current, isAccepted: () => true, onSelect: handleWidgetSelected, onClose: closeWidgetPopper })),
        showPageTemplatePopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.TemplateSelector, { templates: (0,jimu_for_builder_templates__WEBPACK_IMPORTED_MODULE_4__.getFullScreenGridPageTemplates)(false), referenceElement: pageTemplateRef.current, onItemSelect: handlePageTemplateSelected, onClose: closePageTemplatePopper }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/draggable-tab.tsx":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/draggable-tab.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DraggableTab: () => (/* binding */ DraggableTab)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _builder_interactive_droparea_effect_interactjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/interactive/droparea-effect-interactjs */ "./jimu-layouts/lib/builder/interactive/droparea-effect-interactjs.tsx");
/* harmony import */ var _builder_interactive_droparea_effect_h5__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../builder/interactive/droparea-effect-h5 */ "./jimu-layouts/lib/builder/interactive/droparea-effect-h5.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/grid-layout/builder/utils.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/grid-layout/builder/types.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */











const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  .nav-link.grid-tab.highlight-pre {
    position: relative;
    &:after {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 50%;
      height: 100%;
      background-color: var(--primary-300);
    }
  }

  .nav-link.grid-tab.highlight-next {
    position: relative;
    &:after {
      content: '';
      position: absolute;
      right: 0;
      top: 0;
      width: 50%;
      height: 100%;
      background-color: var(--primary-300);
    }
  }
`;
function DraggableTab(props) {
    const { layoutId, layoutItemId, onDragStart, title } = props, otherProps = __rest(props, ["layoutId", "layoutItemId", "onDragStart", "title"]);
    const btnRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const isInRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(false);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const pageContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.PageContext);
    const layoutContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutContext);
    const itemType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const appConfig = state.appConfig;
        const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
        return layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type;
    });
    const label = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return (0,_common_utils__WEBPACK_IMPORTED_MODULE_10__.getLabelOfGridTab)(state.appConfig, { layoutId, layoutItemId }, translate);
    });
    const getCurrentRootLayoutId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => pageContext.rootLayoutId, [pageContext.rootLayoutId]);
    const handleDragStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback(() => {
        onDragStart(layoutItemId);
    });
    const handleOnDragOver = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((draggingItem, draggingElement, containerRect, itemRect, clientX, clientY) => {
        if (!isInRef.current) {
            return;
        }
        if (clientX <= containerRect.width / 2) {
            btnRef.current.classList.add('highlight-pre');
            btnRef.current.classList.remove('highlight-next');
        }
        else {
            btnRef.current.classList.remove('highlight-pre');
            btnRef.current.classList.add('highlight-next');
        }
    });
    const handleOnDrop = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((draggingItem, containerRect, itemRect, clientX, clientY) => {
        const layoutInfo = {
            layoutId
        };
        let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.getAppConfigAction)();
        let isBeforeReferenceItem = false;
        if (clientX <= containerRect.width / 2) {
            isBeforeReferenceItem = !jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isRTL();
        }
        else {
            isBeforeReferenceItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isRTL();
        }
        // insert after this item
        (0,_utils__WEBPACK_IMPORTED_MODULE_8__.addItemToGrid)(appConfigAction.appConfig, draggingItem, layoutInfo, layoutItemId, _types__WEBPACK_IMPORTED_MODULE_9__.SideType.Center).then((result) => {
            const { appConfig, layoutInfo: newLayoutInfo } = result;
            appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_4__.getAppConfigAction)(appConfig);
            if (isBeforeReferenceItem) {
                const refItem = appConfig.layouts[layoutId].content[layoutItemId];
                const parentId = refItem.parent;
                const parentItem = appConfig.layouts[layoutId].content[parentId];
                const childIds = [...parentItem.children];
                childIds.splice(childIds.indexOf(layoutItemId), 2, newLayoutInfo.layoutItemId, layoutItemId);
                appConfigAction.editLayoutItemProperty({ layoutId, layoutItemId: parentId }, 'children', childIds);
            }
            appConfigAction.exec();
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(newLayoutInfo));
        });
    });
    const handleToggleDragoverEffect = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((isIn) => {
        isInRef.current = isIn;
        if (!isIn) {
            btnRef.current.classList.remove('highlight-pre');
            btnRef.current.classList.remove('highlight-next');
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        btnRef.current.setAttribute('data-layoutid', layoutId);
        btnRef.current.setAttribute('data-layoutitemid', layoutItemId);
        const dragInteratable = (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(btnRef.current).origin('parent');
        const interactable = (0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_5__.bindDragHandler)(dragInteratable, {
            layoutId,
            layoutItemId,
            itemType,
            useDragHandler: false,
            onDragStart: handleDragStart,
            rootLayoutId: getCurrentRootLayoutId,
            restrict: () => true
        });
        interactable.draggable({
            modifiers: [
                jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact.modifiers.restrictRect({
                    restriction: btnRef.current.parentElement.parentElement //`div.grid-layout[data-layoutid=${layoutId}]`
                })
            ]
        });
        const contextRef = {
            current: {
                props: {
                    layouts: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
                        [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${layoutId}_${layoutItemId}_tlarge`,
                        [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${layoutId}_${layoutItemId}_tmedium`,
                        [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${layoutId}_${layoutItemId}_tsmall`
                    }),
                    highlightDragover: true,
                    onDragOver: handleOnDragOver,
                    onDrop: handleOnDrop,
                    onToggleDragoverEffect: handleToggleDragoverEffect
                },
                layoutId,
                pageContext,
                layoutContext
            }
        };
        const dropInteractble = (0,_builder_interactive_droparea_effect_interactjs__WEBPACK_IMPORTED_MODULE_6__.initInteractive)(btnRef.current, contextRef, '.grid-tab');
        (0,_builder_interactive_droparea_effect_h5__WEBPACK_IMPORTED_MODULE_7__.initH5)(btnRef.current, contextRef);
        return () => {
            dragInteratable.unset();
            dropInteractble.unset();
        };
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [layoutId, layoutItemId]); // rebind event handler if layoutId/layoutItemId changes, e.g. use custom small size mode
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, Object.assign({}, otherProps, { title: label, innerRef: btnRef, innnerClassName: 'grid-tab', css: style }));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/grid-item-menu.tsx":
/*!*****************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/grid-item-menu.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   gridItemMenu: () => (/* binding */ gridItemMenu)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _grid_item_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./grid-item-util */ "./jimu-layouts/lib/grid-layout/builder/grid-item-util.ts");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/pending.svg */ "./jimu-icons/svg/outlined/editor/pending.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/duplicate.svg */ "./jimu-icons/svg/outlined/editor/duplicate.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jimu_icons_svg_outlined_editor_split_horizontal_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/split-horizontal.svg */ "./jimu-icons/svg/outlined/editor/split-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_split_horizontal_svg__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_split_horizontal_svg__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var jimu_icons_svg_outlined_editor_split_vertical_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/split-vertical.svg */ "./jimu-icons/svg/outlined/editor/split-vertical.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_split_vertical_svg__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_split_vertical_svg__WEBPACK_IMPORTED_MODULE_8__);









const gridItemMenu = [
    {
        icon: (jimu_icons_svg_outlined_editor_split_horizontal_svg__WEBPACK_IMPORTED_MODULE_7___default()),
        title: (props) => {
            return props.formatMessage('splitHorizontally');
        },
        visible: () => {
            return !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.isLockLayout)();
        },
        onClick: (props) => {
            const { layoutId, layoutItem } = props;
            (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_3__.splitGridCell)({ layoutId, layoutItemId: layoutItem.id }, 'h');
        }
    },
    {
        icon: (jimu_icons_svg_outlined_editor_split_vertical_svg__WEBPACK_IMPORTED_MODULE_8___default()),
        title: (props) => {
            return props.formatMessage('splitVertically');
        },
        visible: () => {
            return !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.isLockLayout)();
        },
        onClick: (props) => {
            const { layoutId, layoutItem } = props;
            (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_3__.splitGridCell)({ layoutId, layoutItemId: layoutItem.id }, 'v');
        }
    },
    {
        icon: (jimu_icons_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_6___default()),
        title: (props) => {
            return props.formatMessage('duplicate');
        },
        visible: () => {
            return !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.isLockLayout)();
        },
        onClick: (props) => {
            const { layoutId, layoutItem } = props;
            (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_3__.duplicateItem)({ layoutId, layoutItemId: layoutItem.id });
        }
    },
    _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.floatingMenuItem,
    {
        icon: (jimu_icons_svg_outlined_editor_pending_svg__WEBPACK_IMPORTED_MODULE_5___default()),
        title: (props) => {
            return props.formatMessage('pendingTip');
        },
        visible: (props) => {
            const { layoutItem } = props;
            const isPlaceholder = layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId == null;
            return (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.isLockLayout)() && !isPlaceholder;
        },
        onClick: (props) => {
            const { layoutId, layoutItem } = props;
            (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_3__.pendGridLayoutItem)({
                layoutId,
                layoutItemId: layoutItem.id
            });
        }
    },
    {
        icon: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        title: (props) => {
            return props.formatMessage('delete');
        },
        visible: (props) => {
            return (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.getAppMode)() === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design &&
                (!(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.isLockLayout)() || (0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_2__.isNormalWidget)(props.layoutItem));
        },
        onClick: (props) => {
            const { layoutItem, layoutId } = props;
            const layoutInfo = {
                layoutId,
                layoutItemId: layoutItem.id
            };
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.appBuilderSync.publishConfirmDeleteToApp(layoutInfo);
        }
    }
];


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/grid-item-setting.tsx":
/*!********************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/grid-item-setting.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ GridItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var _builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/common-layout-item-setting */ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/** @jsx jsx */






function GridItemSetting(props) {
    var _a, _b;
    const { layoutItem, layoutId } = props;
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const [label, setLabel] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState((_a = layoutItem.label) !== null && _a !== void 0 ? _a : '');
    const isInTab = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const layout = state.appStateInBuilder.appConfig.layouts[layoutId];
        if (layoutItem.parent) {
            const parentItem = layout.content[layoutItem.parent];
            return parentItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab;
        }
        return false;
    });
    const innerLabel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const layout = state.appStateInBuilder.appConfig.layouts[layoutId];
        const gridItem = layout.content[layoutItem.id];
        if (!isInTab || (gridItem.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row && gridItem.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column)) {
            return '';
        }
        return gridItem.label;
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        setLabel(innerLabel);
    }, [innerLabel]);
    const handleLabelChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((value) => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        appConfigAction.editLayoutItemProperty({ layoutId, layoutItemId: layoutItem.id }, 'label', value !== '' ? value : undefined).exec();
    }, [layoutId, layoutItem.id]);
    const handleExpandableChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((value) => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        appConfigAction.editLayoutItemProperty({ layoutId, layoutItemId: layoutItem.id }, 'expandable', value).exec();
    }, [layoutId, layoutItem.id]);
    const updateLabel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        setLabel(e.target.value);
    }, []);
    if (!layoutItem) {
        return null;
    }
    const gridItem = layoutItem;
    if (isInTab && (gridItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row || gridItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column)) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'grid-item-setting h-100' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingSection, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, { label: translate('label'), flow: 'wrap' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.TextInput, { size: 'sm', value: label, onChange: updateLabel, onAcceptValue: handleLabelChange, className: 'w-100' })))));
    }
    if (gridItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'grid-item-setting h-100' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingSection, { title: translate('gridItem') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_3__.SettingRow, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Label, { centric: true },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { "aria-label": translate('allowExpansion'), checked: (_b = layoutItem.expandable) !== null && _b !== void 0 ? _b : true, onChange: (e, checked) => { handleExpandableChange(e.target.checked); } }),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'ml-2 text-truncate' }, translate('allowExpansion'))))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_4__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, style: props.style, isSection: layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, onStyleChange: props.onStyleChange, formatMessage: props.formatMessage, setting: layoutItem.setting || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({}), onSettingChange: props.onSettingChange })));
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'grid-item-setting h-100' },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'h-100 align-items-center justify-content-center d-flex flex-column', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `color: var(--dark-500)` },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_5__.InfoOutlined, { size: 48 })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-4' }, translate('noConfigNeeded')))));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/grid-item-toolbar.tsx":
/*!********************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/grid-item-toolbar.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridItemToolbar: () => (/* binding */ GridItemToolbar),
/* harmony export */   gridRowColTools: () => (/* binding */ gridRowColTools)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _builder_toolbar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/toolbar */ "./jimu-layouts/lib/builder/toolbar.tsx");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_data_row_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/svg/outlined/data/row.svg */ "./jimu-icons/svg/outlined/data/row.svg");
/* harmony import */ var jimu_icons_svg_outlined_data_row_svg__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_data_row_svg__WEBPACK_IMPORTED_MODULE_6__);
/** @jsx jsx */







let count = 0;
const modifiers = [
    {
        name: 'preventOverflow',
        enabled: true,
        options: {
            boundary: 'viewport',
            altAxis: true // allow the popper to overlap its reference element.
        }
    },
    {
        name: 'flip',
        enabled: true,
        options: {
            boundary: 'viewport',
            fallbackPlacements: (0,jimu_ui__WEBPACK_IMPORTED_MODULE_1__.getFallbackPlacementsModifier)(['top-start', 'bottom-start'], true).options.fallbackPlacements
        }
    }
];
const gridRowColTools = [
    {
        icon: (jimu_icons_svg_outlined_data_row_svg__WEBPACK_IMPORTED_MODULE_6___default()),
        title: (props) => {
            const { layoutItem, formatMessage } = props;
            const type = layoutItem.gridType;
            let labelId;
            if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
                labelId = 'distributeSpaceH';
            }
            else if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
                labelId = 'distributeSpaceV';
            }
            return formatMessage(labelId);
        },
        visible: (props) => {
            const { layoutItem } = props;
            const type = layoutItem.gridType;
            return (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row || type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) && !(0,_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.isLockLayout)();
        },
        onClick: (props) => {
            const { layoutId } = props;
            const layoutItem = props.layoutItem;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
            const num = layoutItem.children.length;
            const size = 100 / num;
            layoutItem.children.forEach(childId => {
                appConfigAction.editLayoutItemProperty({ layoutId: layoutId, layoutItemId: childId }, 'bbox', { width: size });
            });
            appConfigAction.exec();
        },
        onMouseEnter: (props) => {
            const { layoutId, layoutItem } = props;
            const gridElement = document.querySelector(`div.grid-layout[data-layoutid="${layoutId}"]`);
            const groupElement = gridElement.querySelector(`div[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
            groupElement.classList.add('menu-active');
        },
        onMouseLeave: (props) => {
            const { layoutId, layoutItem } = props;
            const gridElement = document.querySelector(`div.grid-layout[data-layoutid="${layoutId}"]`);
            const groupElement = gridElement.querySelector(`div[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"]`);
            groupElement.classList.remove('menu-active');
        }
    }
];
function GridItemToolbar(props) {
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => state.extensionsInfo[jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.ContextTool]);
    const { layoutId, layoutItem, refElement } = props;
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages);
    if (!refElement) {
        return null;
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__._Popper, { placement: 'top-start', reference: refElement, open: true, modifiers: modifiers, version: count++, trapFocus: false, autoFocus: false, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        background: transparent;
        box-shadow: none;
      ` },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_toolbar__WEBPACK_IMPORTED_MODULE_4__.Toolbar, { layoutId: layoutId, layoutItem: layoutItem, theme: (0,jimu_theme__WEBPACK_IMPORTED_MODULE_5__.getTheme2)(), parentRef: refElement, tools: gridRowColTools, formatMessage: translate }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/grid-item-util.ts":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/grid-item-util.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   attach: () => (/* binding */ attach),
/* harmony export */   attachToGridItem: () => (/* binding */ attachToGridItem),
/* harmony export */   createEmptyGridItem: () => (/* binding */ createEmptyGridItem),
/* harmony export */   duplicateItem: () => (/* binding */ duplicateItem),
/* harmony export */   pendGridLayoutItem: () => (/* binding */ pendGridLayoutItem),
/* harmony export */   splitGridCell: () => (/* binding */ splitGridCell),
/* harmony export */   updateGridItem: () => (/* binding */ updateGridItem),
/* harmony export */   updateSize: () => (/* binding */ updateSize)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/grid-layout/builder/types.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");






function createEmptyGridItem(layout, type) {
    const outItem = {
        id: `${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.getMaximumId(layout) + 1}`,
        gridType: type
    };
    const outLayout = layout.setIn(['content', outItem.id], outItem);
    return { outLayout, outItem };
}
function attachToGridItem(layout, source, target, side) {
    switch (side) {
        case _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Center:
            return attach(layout, source, target, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab, false, true);
        case _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Top:
            return attach(layout, source, target, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column, true, false);
        case _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Bottom:
            return attach(layout, source, target, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column, false, false);
        case _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Left:
            return attach(layout, source, target, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row, true, false);
        case _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Right:
            return attach(layout, source, target, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row, false, false);
    }
}
function updateSize(layout, itemId, size) {
    return layout.setIn(['content', itemId, 'bbox'], { width: size });
}
function updateGridItem(layout, itemId, propName, value) {
    return layout.setIn(['content', itemId, propName], value);
}
function addChild(layout, itemIdToAdd, targetItemId, index, insertBefore) {
    const targetLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, targetItemId);
    const items = [].concat(targetLayoutItem.children);
    const position = insertBefore ? index : index + 1;
    items.splice(position, 0, itemIdToAdd);
    return updateGridItem(layout, targetItemId, 'children', items);
}
function duplicateItem(layoutInfo) {
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const newItemId = appConfigAction.duplicateLayoutItemInSameLayout({ layoutId, layoutItemId });
    const newLayoutInfo = { layoutId, layoutItemId: newItemId };
    (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__.updateLayoutAndSelection)(appConfigAction.appConfig, newLayoutInfo);
}
function pendGridLayoutItem(layoutInfo) {
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    appConfigAction.setLayoutItemToPending(layoutInfo, true);
    (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_5__.updateLayoutAndSelection)(appConfigAction.appConfig, null);
}
function replaceChild(layout, itemIdToAdd, targetItemId, index) {
    const targetLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, targetItemId);
    const items = [...targetLayoutItem.children];
    items.splice(index, 1, itemIdToAdd);
    return updateGridItem(layout, targetItemId, 'children', items);
}
function mergeIntoANewGroup(layout, source, target, type, beforeTarget, shareSpace) {
    const targetLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, target);
    const { parent } = targetLayoutItem;
    const size = +targetLayoutItem.bbox.width;
    const parentLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, parent);
    const r = createEmptyGridItem(layout, type);
    let outLayout = r.outLayout;
    const group = r.outItem;
    outLayout = updateGridItem(outLayout, group.id, 'parent', parent);
    outLayout = updateSize(outLayout, group.id, size);
    if (parentLayoutItem) {
        // use group to replace the target
        const index = parentLayoutItem.children.indexOf(target);
        outLayout = replaceChild(outLayout, group.id, parent, index);
    }
    outLayout = updateGridItem(outLayout, source, 'parent', group.id);
    outLayout = updateGridItem(outLayout, target, 'parent', group.id);
    outLayout = updateSize(outLayout, source, shareSpace ? 100 : 50);
    outLayout = updateSize(outLayout, target, shareSpace ? 100 : 50);
    outLayout = updateGridItem(outLayout, group.id, 'children', beforeTarget ? [source, target] : [target, source]);
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
        outLayout = updateGridItem(outLayout, group.id, 'activeTab', 1);
    }
    if (target === outLayout.setting.rootItem) {
        outLayout = outLayout.setIn(['setting', 'rootItem'], group.id);
    }
    return outLayout;
}
function attachPlain(layout, sourceItem, target, type, beforeTarget, shareSpace) {
    const targetLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, target);
    const { parent } = targetLayoutItem;
    const size = +targetLayoutItem.bbox.width;
    const parentLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, parent);
    // const parentSetting = parentLayoutItem?.setting
    let outLayout = layout;
    if ((parentLayoutItem === null || parentLayoutItem === void 0 ? void 0 : parentLayoutItem.gridType) === type) {
        // add as a new item of the parent
        const index = parentLayoutItem.children.indexOf(target);
        outLayout = addChild(outLayout, sourceItem.id, parent, index, beforeTarget);
        outLayout = updateGridItem(outLayout, sourceItem.id, 'parent', parent);
        outLayout = updateSize(outLayout, sourceItem.id, shareSpace ? 100 : size / 2);
        outLayout = updateSize(outLayout, target, shareSpace ? 100 : size / 2);
        if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
            outLayout = updateGridItem(outLayout, parent, 'activeTab', index + 1);
        }
        return outLayout;
    }
    return mergeIntoANewGroup(outLayout, sourceItem.id, target, type, beforeTarget, shareSpace);
}
function attachColumnOrRow(layout, sourceItem, target, type, beforeTarget, shareSpace) {
    const sourceType = sourceItem.gridType;
    const targetLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, target);
    const { parent } = targetLayoutItem;
    const size = +targetLayoutItem.bbox.width;
    const parentLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, parent);
    // const parentSetting = parentLayoutItem?.setting
    let outLayout = layout;
    if ((parentLayoutItem === null || parentLayoutItem === void 0 ? void 0 : parentLayoutItem.gridType) === type) {
        // add as a new item of the parent
        const index = parentLayoutItem.children.indexOf(target);
        if (sourceType === type) {
            // extract the source content to the parent
            const sourceContent = sourceItem.children;
            const parentContent = [...parentLayoutItem.children];
            if (beforeTarget) {
                parentContent.splice(index, 0, ...sourceContent);
            }
            else {
                parentContent.splice(index + 1, 0, ...sourceContent);
            }
            outLayout = updateGridItem(outLayout, parent, 'children', parentContent);
            outLayout = outLayout.set('content', outLayout.content.without(sourceItem.id)); // remove the source
            sourceContent.forEach(childId => {
                const childItem = outLayout.content[childId];
                const childSize = +childItem.bbox.width;
                outLayout = updateSize(outLayout, childId, childSize * size / 200);
                outLayout = updateGridItem(outLayout, childId, 'parent', parent);
            });
            outLayout = updateSize(outLayout, target, size / 2);
        }
        else {
            outLayout = addChild(outLayout, sourceItem.id, parent, index, beforeTarget);
            outLayout = updateGridItem(outLayout, sourceItem.id, 'parent', parent);
            outLayout = updateSize(outLayout, sourceItem.id, shareSpace ? 100 : size / 2);
            outLayout = updateSize(outLayout, target, shareSpace ? 100 : size / 2);
            if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
                outLayout = updateGridItem(outLayout, parent, 'activeTab', index + 1);
            }
        }
        return outLayout;
    }
    if (sourceType === type) {
        // put the reference item into the source item's group, and use the source item to replace the reference
        const index = parentLayoutItem.children.indexOf(target);
        outLayout = addChild(outLayout, target, sourceItem.id, beforeTarget ? sourceItem.children.length : 0, !beforeTarget);
        outLayout = updateGridItem(outLayout, target, 'parent', sourceItem.id);
        outLayout = updateSize(outLayout, target, 50);
        sourceItem.children.forEach(childId => {
            const childItem = outLayout.content[childId];
            const childSize = +childItem.bbox.width;
            outLayout = updateSize(outLayout, childId, childSize * 0.5);
        });
        const parentContent = [...parentLayoutItem.children];
        parentContent.splice(index, 1, sourceItem.id);
        outLayout = updateGridItem(outLayout, parent, 'children', parentContent);
        outLayout = updateGridItem(outLayout, sourceItem.id, 'parent', parent);
        return outLayout;
    }
    return mergeIntoANewGroup(outLayout, sourceItem.id, target, type, beforeTarget, shareSpace);
}
function attachTab(layout, sourceItem, target, type, beforeTarget, shareSpace) {
    const targetLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, target);
    const { parent } = targetLayoutItem;
    const size = +targetLayoutItem.bbox.width;
    const parentLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, parent);
    // const parentSetting = parentLayoutItem?.setting
    let outLayout = layout;
    // add tab to form tab
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
        if ((parentLayoutItem === null || parentLayoutItem === void 0 ? void 0 : parentLayoutItem.gridType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
            // extract source's children to parent
            const index = parentLayoutItem.children.indexOf(target);
            const items = [].concat(parentLayoutItem.children);
            items.splice(index + 1, 0, ...sourceItem.children);
            outLayout = updateGridItem(layout, parent, 'children', items);
            sourceItem.children.forEach(childId => {
                outLayout = updateGridItem(outLayout, childId, 'parent', parent);
            });
            outLayout = outLayout.set('content', outLayout.content.without(sourceItem.id));
            return outLayout;
        }
        // add the target as first child of the source tab
        const index = parentLayoutItem.children.indexOf(target);
        const items = [].concat(parentLayoutItem.children);
        items.splice(index, 1, sourceItem.id);
        outLayout = updateGridItem(layout, parent, 'children', items);
        outLayout = addChild(outLayout, target, sourceItem.id, 0, true);
        outLayout = updateGridItem(outLayout, target, 'parent', sourceItem.id);
        outLayout = updateGridItem(outLayout, sourceItem.id, 'parent', parent);
        return outLayout;
    }
    // add tab to form row/column
    if ((parentLayoutItem === null || parentLayoutItem === void 0 ? void 0 : parentLayoutItem.gridType) === type) {
        // add as a new item of the parent
        const index = parentLayoutItem.children.indexOf(target);
        outLayout = addChild(outLayout, sourceItem.id, parent, index, beforeTarget);
        outLayout = updateGridItem(outLayout, sourceItem.id, 'parent', parent);
        outLayout = updateSize(outLayout, sourceItem.id, shareSpace ? 100 : size / 2);
        outLayout = updateSize(outLayout, target, shareSpace ? 100 : size / 2);
        return outLayout;
    }
    return mergeIntoANewGroup(outLayout, sourceItem.id, target, type, beforeTarget, shareSpace);
}
function attach(layout, source, target, type, beforeTarget, shareSpace) {
    const sourceLayoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, source);
    const { gridType: sourceType } = sourceLayoutItem;
    switch (sourceType) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row:
            return attachColumnOrRow(layout, sourceLayoutItem, target, type, beforeTarget, shareSpace);
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab:
            return attachTab(layout, sourceLayoutItem, target, type, beforeTarget, shareSpace);
        default:
            return attachPlain(layout, sourceLayoutItem, target, type, beforeTarget, shareSpace);
    }
}
function splitGridCell(layoutInfo, direction) {
    const { layoutId, layoutItemId } = layoutInfo;
    const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
    const { layouts } = appConfigAction.appConfig;
    let outLayout = layouts[layoutId];
    const r = createEmptyGridItem(outLayout, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain);
    outLayout = r.outLayout;
    outLayout = outLayout.setIn(['content', r.outItem.id, 'type'], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget);
    const newItem = outLayout.content[r.outItem.id];
    if (direction === 'h') {
        outLayout = attach(outLayout, newItem.id, layoutItemId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row, false, false);
    }
    else {
        outLayout = attach(outLayout, newItem.id, layoutItemId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column, false, false);
    }
    const appConfig = appConfigAction.appConfig.setIn(['layouts', layoutId], outLayout);
    (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)(appConfig).exec();
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/grid-item.tsx":
/*!************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/grid-item.tsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridItemComponent: () => (/* binding */ GridItemComponent)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core/dnd */ "jimu-core/dnd");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/grid-layout/builder/layout-item.tsx");
/* harmony import */ var _common_splitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/splitter */ "./jimu-layouts/lib/grid-layout/common/splitter.tsx");
/* harmony import */ var _builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _draggable_tab__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./draggable-tab */ "./jimu-layouts/lib/grid-layout/builder/draggable-tab.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/* harmony import */ var _grid_item_toolbar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./grid-item-toolbar */ "./jimu-layouts/lib/grid-layout/builder/grid-item-toolbar.tsx");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/** @jsx jsx */











function GridItemComponent(props) {
    const { layout, layoutItemId, isLast, onDragStart, onDragging, onDragEnd, className } = props;
    const layoutItem = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return (0,_common_utils__WEBPACK_IMPORTED_MODULE_8__.getGridItem)(layout, layoutItemId);
    }, [layout, layoutItemId]);
    const parentType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        if (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.parent) {
            const parentItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_8__.getGridItem)(layout, layoutItem.parent);
            return parentItem.gridType;
        }
        return null;
    }, [layoutItem, layout]);
    const splitSpace = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const size = (_b = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.splitSize) !== null && _b !== void 0 ? _b : 8;
        let numOfChildren = 0;
        if (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.parent) {
            const parentItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_8__.getGridItem)(layout, layoutItem.parent);
            numOfChildren = parentItem.children.length;
        }
        const total = size * (numOfChildren - 1);
        return total / numOfChildren;
    });
    const animationContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext);
    const interval = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a, _b;
        if (((_b = (_a = animationContext === null || animationContext === void 0 ? void 0 : animationContext.setting) === null || _a === void 0 ? void 0 : _a.option) === null || _b === void 0 ? void 0 : _b.parentMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ParentAnimationMode.AllAtOnce) {
            return 0;
        }
        return 250;
    }, [animationContext]);
    const getStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        let size;
        if (splitSpace > 0) {
            size = `calc(${+layoutItem.bbox.width}% - ${splitSpace.toFixed(2)}px)`;
        }
        else {
            size = `${+layoutItem.bbox.width}%`;
        }
        if (parentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        height: 100%;
        width: ${size};
      `;
        }
        if (parentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        width: 100%;
        height: ${size};
      `;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: 100%;
      height: 100%;
    `;
    }, [layoutItem.bbox.width, splitSpace, parentType]);
    if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(RowContainer, { className: className, css: getStyle(), layout: layout, layoutItemId: layoutItemId, items: layoutItem.children }));
    }
    if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(ColContainer, { className: className, css: getStyle(), layout: layout, layoutItemId: layoutItemId, items: layoutItem.children }));
    }
    if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(TabContainer, { className: className, css: getStyle(), layout: layout, layoutItemId: layoutItemId, items: layoutItem.children, onDragStart: onDragStart, onDragEnd: onDragEnd }));
    }
    const idx = (0,_common_utils__WEBPACK_IMPORTED_MODULE_8__.indexOfPlainContent)(layout, layoutItemId);
    const isLastChild = (0,_common_utils__WEBPACK_IMPORTED_MODULE_8__.isLastChildOfRootItem)(layout, layoutItemId);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_4__.GridLayoutItem, { css: getStyle(), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(`d-flex ${className}`, { 'is-last': isLast }), layoutId: layout.id, layoutItemId: layoutItemId, delay: idx * interval, isLastChild: isLastChild, onDragStart: onDragStart, onDragging: onDragging, onDragEnd: onDragEnd }));
}
function RowContainer(props) {
    const { layout, layoutItemId, items, className } = props;
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const selection = state.appRuntimeInfo.selection;
        return (selection === null || selection === void 0 ? void 0 : selection.layoutId) === layout.id && (selection === null || selection === void 0 ? void 0 : selection.layoutItemId) === layoutItemId;
    });
    const handleResizeEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id, dx) => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)();
        const index = items.indexOf(id);
        const nextId = items[index + 1];
        const layoutItem = layout.content[id];
        const nextLayoutItem = layout.content[nextId];
        appConfigAction.editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: id
        }, 'bbox', { width: +layoutItem.bbox.width + dx }).editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: nextId
        }, 'bbox', { width: +nextLayoutItem.bbox.width - dx }).exec();
    });
    const handleDragStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        var _a;
        const targetElement = domRef.current.querySelector(`div[data-layoutitemid="${id}"]`);
        let splitter;
        let neighborItem;
        if ((_a = targetElement.nextElementSibling) === null || _a === void 0 ? void 0 : _a.classList.contains('grid-split')) {
            splitter = targetElement.nextElementSibling;
            neighborItem = splitter.nextElementSibling;
        }
        else {
            splitter = targetElement.previousElementSibling;
            neighborItem = splitter.previousElementSibling;
        }
        const parentRect = targetElement.parentElement.getBoundingClientRect();
        const targetRect = targetElement.getBoundingClientRect();
        targetElement.style.width = `${targetElement.clientWidth}px`;
        targetElement.style.height = `${targetElement.clientHeight}px`;
        targetElement.style.left = `${targetRect.left - parentRect.left}px`;
        targetElement.style.top = `${targetRect.top - parentRect.top}px`;
        targetElement.style.position = 'absolute';
        neighborItem.style.width = `${targetElement.clientWidth + splitter.clientWidth + neighborItem.clientWidth}px`;
        splitter.style.display = 'none';
    });
    const handleDragEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        var _a;
        const targetElement = domRef.current.querySelector(`div[data-layoutitemid="${id}"]`);
        let splitter;
        let neighborItem;
        if ((_a = targetElement.nextElementSibling) === null || _a === void 0 ? void 0 : _a.classList.contains('grid-split')) {
            splitter = targetElement.nextElementSibling;
            neighborItem = splitter.nextElementSibling;
        }
        else {
            splitter = targetElement.previousElementSibling;
            neighborItem = splitter.previousElementSibling;
        }
        targetElement.style.width = null;
        targetElement.style.height = null;
        targetElement.style.left = null;
        targetElement.style.top = null;
        targetElement.style.position = null;
        neighborItem.style.width = null;
        splitter.style.display = null;
    });
    const createItem = (itemId, isLast) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, { key: itemId },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridItemComponent, { key: itemId, className: 'grid-row-item', layout: layout, layoutItemId: itemId, onDragStart: handleDragStart, onDragEnd: handleDragEnd }),
            !isLast && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_splitter__WEBPACK_IMPORTED_MODULE_5__.Splitter, { referenceItemId: itemId, layoutId: layout.id, direction: 'row', onResizeEnd: handleResizeEnd }))));
    };
    const theme2 = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_10__.getTheme2)();
    // position relative only works when an item need to be dragged, so that its origin is top left of the row
    // otherwise, position should not set in order to make the maximize work.
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `d-flex ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        position: ${isDesignMode ? 'relative' : 'initial'};
        .is-last {
          width: auto;
          flex-grow: 1;
          flex-shrink: 1;
          flex-basis: 0;
        }
        &.menu-active > .grid-row-item {
          &:after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0.3;
            background: ${theme2.colors.palette.primary[600]};
          }
        }
        &.menu-active > .grid-row-item:nth-of-type(4n-1):after {
          background: ${theme2.colors.palette.danger[800]};
          opacity: 0.6;
        }
      `, "data-layoutid": layout.id, "data-layoutitemid": layoutItemId, ref: domRef },
        items.map((item, index) => createItem(item, index === items.length - 1)),
        selected && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_grid_item_toolbar__WEBPACK_IMPORTED_MODULE_9__.GridItemToolbar, { layoutId: layout.id, layoutItem: layout.content[layoutItemId], refElement: domRef.current }))));
}
function ColContainer(props) {
    const { layout, layoutItemId, items, className } = props;
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const selection = state.appRuntimeInfo.selection;
        return (selection === null || selection === void 0 ? void 0 : selection.layoutId) === layout.id && (selection === null || selection === void 0 ? void 0 : selection.layoutItemId) === layoutItemId;
    });
    const handleResizeEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id, dx, dy) => {
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)();
        const index = items.indexOf(id);
        const nextId = items[index + 1];
        const layoutItem = layout.content[id];
        const nextLayoutItem = layout.content[nextId];
        appConfigAction.editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: id
        }, 'bbox', { width: +layoutItem.bbox.width + dy }).editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: nextId
        }, 'bbox', { width: +nextLayoutItem.bbox.width - dy }).exec();
    });
    const handleDragStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        var _a;
        const targetElement = domRef.current.querySelector(`div[data-layoutitemid="${id}"]`);
        let splitter;
        let neighborItem;
        if ((_a = targetElement.nextElementSibling) === null || _a === void 0 ? void 0 : _a.classList.contains('grid-split')) {
            splitter = targetElement.nextElementSibling;
            neighborItem = splitter.nextElementSibling;
        }
        else {
            splitter = targetElement.previousElementSibling;
            neighborItem = splitter.previousElementSibling;
        }
        const parentRect = targetElement.parentElement.getBoundingClientRect();
        const targetRect = targetElement.getBoundingClientRect();
        targetElement.style.width = `${targetElement.clientWidth}px`;
        targetElement.style.height = `${targetElement.clientHeight}px`;
        targetElement.style.left = `${targetRect.left - parentRect.left}px`;
        targetElement.style.top = `${targetRect.top - parentRect.top}px`;
        targetElement.style.position = 'absolute';
        neighborItem.style.height = `${targetElement.clientHeight + splitter.clientHeight + neighborItem.clientHeight}px`;
        splitter.style.display = 'none';
    });
    const handleDragEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        var _a;
        const targetElement = domRef.current.querySelector(`div[data-layoutitemid="${id}"]`);
        let splitter;
        let neighborItem;
        if ((_a = targetElement.nextElementSibling) === null || _a === void 0 ? void 0 : _a.classList.contains('grid-split')) {
            splitter = targetElement.nextElementSibling;
            neighborItem = splitter.nextElementSibling;
        }
        else {
            splitter = targetElement.previousElementSibling;
            neighborItem = splitter.previousElementSibling;
        }
        targetElement.style.width = null;
        targetElement.style.height = null;
        targetElement.style.left = null;
        targetElement.style.top = null;
        targetElement.style.position = null;
        neighborItem.style.height = null;
        splitter.style.display = null;
    });
    const createItem = (itemId, isLast) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, { key: itemId },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridItemComponent, { key: itemId, className: 'grid-col-item', layout: layout, layoutItemId: itemId, onDragStart: handleDragStart, onDragEnd: handleDragEnd }),
            !isLast && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_splitter__WEBPACK_IMPORTED_MODULE_5__.Splitter, { referenceItemId: itemId, layoutId: layout.id, direction: 'col', onResizeEnd: handleResizeEnd }))));
    };
    const theme2 = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_10__.getTheme2)();
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `d-flex flex-column ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        position: ${isDesignMode ? 'relative' : 'initial'};
        .is-last {
          height: auto;
          flex-grow: 1;
          flex-shrink: 1;
          flex-basis: 0;
        }
        &.menu-active > .grid-col-item {
          &:after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0.3;
            background: ${theme2.colors.palette.primary[600]};
          }
        }
        &.menu-active > .grid-col-item:nth-of-type(4n-1):after {
          background: ${theme2.colors.palette.danger[800]};
          opacity: 0.6;
        }
      `, "data-layoutid": layout.id, "data-layoutitemid": layoutItemId, ref: domRef },
        items.map((item, index) => createItem(item, index === items.length - 1)),
        selected && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_grid_item_toolbar__WEBPACK_IMPORTED_MODULE_9__.GridItemToolbar, { layoutId: layout.id, layoutItem: layout.content[layoutItemId], refElement: domRef.current }))));
}
function TabContainer(props) {
    var _a;
    const { layout, layoutItemId, items, className, onDragStart, onDragEnd } = props;
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const [activeTab, setActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(0);
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const originRectRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const dragPlaceholderRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const isRootItem = ((_a = layout.setting) === null || _a === void 0 ? void 0 : _a.rootItem) === layoutItemId;
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        let interactable = (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(domRef.current).origin('parent');
        interactable = (0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_6__.bindDragHandler)(interactable, {
            layoutId: layout.id,
            layoutItemId,
            useDragHandler: false,
            itemType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget,
            rootLayoutId: null,
            restrict: null,
            onDragStart,
            onDragEnd
        });
        interactable.draggable({
            modifiers: [
                jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact.modifiers.restrictRect({
                    restriction: `div.grid-layout[data-layoutid="${layout.id}"]`
                })
            ]
        });
        return () => {
            if (interactable) {
                interactable.unset();
                interactable = null;
            }
        };
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (domRef.current) {
            if (isRootItem) {
                (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(domRef.current).draggable(false);
            }
            else {
                (0,jimu_core_dnd__WEBPACK_IMPORTED_MODULE_1__.interact)(domRef.current).draggable(true);
            }
        }
    }, [isRootItem]);
    const active = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a;
        const layoutItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_8__.getGridItem)(layout, layoutItemId);
        return (_a = layoutItem.activeTab) !== null && _a !== void 0 ? _a : 0;
    }, [layout, layoutItemId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        setActiveTab(active);
    }, [active]);
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        const index = items.indexOf(id);
        setActiveTab(index);
    });
    const handleTabDragStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        const idx = items.indexOf(id);
        if (idx === items.length - 1) {
            setActiveTab(items.length - 2);
        }
        else {
            setActiveTab(idx + 1);
        }
    });
    const handleDragStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        const targetElement = domRef.current.querySelector(`div[data-layoutitemid="${id}"]`);
        const targetRect = targetElement.getBoundingClientRect();
        originRectRef.current = targetRect;
        const elem = (0,_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_6__.createDraggingPlaceholder)(targetRect);
        dragPlaceholderRef.current = document.body.appendChild(elem);
        const idx = items.indexOf(id);
        if (idx === items.length - 1) {
            setActiveTab(items.length - 2);
        }
        else {
            setActiveTab(idx + 1);
        }
    });
    const handleDragging = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id, dx, dy) => {
        // set display to none will cause the moving item out of view
        const ox = dx - originRectRef.current.left;
        const oy = dy - originRectRef.current.top;
        dragPlaceholderRef.current.style.transform = `translate(${Math.round(ox)}px, ${Math.round(oy)}px) translateZ(0)`;
    });
    const handleDragEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id) => {
        document.body.removeChild(dragPlaceholderRef.current);
        dragPlaceholderRef.current = null;
    });
    const createItem = (itemId, index) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_draggable_tab__WEBPACK_IMPORTED_MODULE_7__.DraggableTab, { key: itemId, id: itemId, title: `${index}`, layoutId: layout.id, layoutItemId: itemId, onDragStart: handleTabDragStart },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridItemComponent, { layout: layout, layoutItemId: itemId, onDragStart: handleDragStart, onDragging: handleDragging, onDragEnd: handleDragEnd })));
    };
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(className, 'exb-rnd'), "data-layoutid": layout.id, "data-layoutitemid": layoutItemId, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `${isDesignMode ? 'relative' : 'initial'};`, ref: domRef },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { type: 'tabs', fill: true, scrollable: true, className: 'w-100 h-100', value: items[activeTab], onChange: handleTabChange, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          & > .tab-content {
            overflow: hidden;
          }
        ` }, [...items].map((item, index) => createItem(item, index)))));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/layout-item.tsx":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/layout-item.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridLayoutItem: () => (/* binding */ GridLayoutItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/grid-layout/builder/utils.ts");
/* harmony import */ var _builder_layout_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/layout-item */ "./jimu-layouts/lib/builder/layout-item.tsx");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../builder/interactive/canvas-pane */ "./jimu-layouts/lib/builder/interactive/canvas-pane.ts");
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/* harmony import */ var _builder_util__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../builder/util */ "./jimu-layouts/lib/builder/util.ts");
/* harmony import */ var _grid_item_menu__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./grid-item-menu */ "./jimu-layouts/lib/grid-layout/builder/grid-item-menu.tsx");
/* harmony import */ var _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../builder/menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/grid-layout/builder/types.ts");
/* harmony import */ var jimu_icons_outlined_application_maxgrid__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/application/maxgrid */ "./jimu-icons/outlined/application/maxgrid.tsx");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! jimu-icons/outlined/editor/lock */ "./jimu-icons/outlined/editor/lock.tsx");
/* harmony import */ var jimu_icons_outlined_editor_unlock__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jimu-icons/outlined/editor/unlock */ "./jimu-icons/outlined/editor/unlock.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../translations/default */ "./jimu-layouts/lib/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! jimu-icons/outlined/editor/plus */ "./jimu-icons/outlined/editor/plus.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/** @jsx jsx */






















const sectionMenu = [].concat(_builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_11__.sectionMenuItems, _grid_item_menu__WEBPACK_IMPORTED_MODULE_10__.gridItemMenu);
const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  z-index: 10;
  display: flex;
`;
const guideOverlay = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  ${dropareaStyle};
  pointer-events: none;
`;
const getStyle = (isPlaceholder) => {
    const theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_14__.getTheme2)();
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    & > .max-grid-item-btn {
      display: none;
      background: var(--light-500);
      width: 26px;
      height: 26px;
      position: absolute;
      top: 0;
      right: 0;
    }

    & > .layout-widget > .add-btn {
      display: ${isPlaceholder ? 'none' : 'block'};
    }

    & > .add-btn {
      z-index: 20;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .lock-mask {
      position: absolute;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      z-index: 20;
      pointer-events: none;
      transition: all 400ms;

      .mask {
        width: 100%;
        height: 100%;
        background: ${theme.colors.white};
        opacity: 0.1;
      }

      .lock-btn {
        background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.white, 0.6)};
        border-color: ${theme.colors.black} !important;
        box-shadow: 0px 0px 8px 0px rgba(0, 0, 0, 0.3);
        width: 38px;
        height: 38px;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        transition: all 400ms;
        pointer-events: all;
      }

      &.unlock {
        width: 32px;
        height: 32px;

        .mask {
          background: transparent;
        }

        .lock-btn {
          width: 26px;
          height: 26px;
        }
      }
    }

    body:not(.design-mode) &:hover > .max-grid-item-btn {
      display: flex;
      justify-content: center;
      align-items: center;
    }
  `;
};
const maximizedStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  top: 0;
  width: 100% !important;
  height: 100% !important;
  z-index: 30;
  background: var(--light);
`;
function GridLayoutItem(props) {
    const { layoutId, layoutItemId, onDragStart, onDragging, onDragEnd, delay, isLastChild, className } = props;
    const [maximized, setMaximized] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [showWidgetListPopper, setShowWidgetListPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [locked, setLocked] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(true);
    const canvasPaneRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const canvasRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const isEnter = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(false);
    const btnRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const theme2 = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_14__.getTheme2)();
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_17__["default"]);
    const expandable = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return _common_utils__WEBPACK_IMPORTED_MODULE_21__.isExpandable(state, layoutId, layoutItemId);
    });
    const isLockLayout = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const lockLayout = (_c = (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.forBuilderAttributes) === null || _b === void 0 ? void 0 : _b.lockLayout) !== null && _c !== void 0 ? _c : false;
        const isDesignMode = state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
        return !isDesignMode || lockLayout;
    });
    const hasEmbeddedLayout = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return true;
        }
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widgetJson = state.appConfig.widgets[layoutItem.widgetId];
            if (((_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _a === void 0 ? void 0 : _a.widgetType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout || ((_c = (_b = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _b === void 0 ? void 0 : _b.properties) === null || _c === void 0 ? void 0 : _c.hasEmbeddedLayout)) {
                return widgetJson.layouts != null;
            }
        }
        return false;
    });
    const isPlaceholder = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
        return (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.widgetId) == null;
    });
    const isSection = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
        return (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section;
    });
    const fakeLayouts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${layoutId}_${layoutItemId}_tlarge`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${layoutId}_${layoutItemId}_tmedium`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${layoutId}_${layoutItemId}_tsmall`
        });
    }, [layoutId, layoutItemId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        const theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_14__.getTheme)();
        canvasPaneRef.current = new _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_7__.CanvasPane(canvasRef.current, theme);
    });
    const handleResize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((width, height) => {
        if (!width || !height) {
            return;
        }
        canvasPaneRef.current.setSize(width, height, window.devicePixelRatio);
    });
    const handleToggleDragoverEffect = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((isIn) => {
        isEnter.current = isIn;
        // to make sure only one grid layout can have drop-target
        document.querySelectorAll('div.grid-layout').forEach(element => {
            const gridId = element.getAttribute('data-layoutid');
            if (gridId === layoutId) {
                if (isIn && !element.classList.contains('drop-target')) {
                    element.classList.add('drop-target');
                }
            }
            else if (element.classList.contains('drop-target')) {
                element.classList.remove('drop-target');
            }
        });
        canvasPaneRef.current.clear();
    });
    const onDragOver = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((draggingItem, draggingElement, containerRect, itemRect, clientX, clientY) => {
        if (!isEnter.current) {
            return;
        }
        const { width, height } = containerRect;
        canvasPaneRef.current.clear();
        const theme = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_14__.getTheme)();
        canvasPaneRef.current.setColor(jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.palette.primary[700], 0.2));
        if (isPlaceholder && (0,_builder_util__WEBPACK_IMPORTED_MODULE_9__.canDropAtPlaceholder)(draggingItem)) {
            // normal widget，drop at this placeholder directly
            canvasPaneRef.current.drawRect({ left: 0, top: 0, width, height });
            return;
        }
        let rect;
        if (clientY <= height * 0.2) {
            rect = { left: 0, top: 0, width, height: height / 2 };
        }
        else if (clientY >= height * 0.8) {
            rect = { left: 0, top: height / 2, width, height: height / 2 };
        }
        else {
            if (clientX <= width * 0.2) {
                rect = { left: 0, top: 0, width: width / 2, height };
            }
            else if (clientX >= width * 0.8) {
                rect = { left: width / 2, top: 0, width: width / 2, height };
            }
            else {
                rect = { left: width * 0.2, top: height * 0.2, width: width * 0.6, height: height * 0.6 };
            }
        }
        canvasPaneRef.current.drawRect(rect);
    }, [isPlaceholder]);
    const onDrop = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((draggingItem, containerRect, itemRect, clientX, clientY) => {
        let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)();
        if (isPlaceholder && (0,_builder_util__WEBPACK_IMPORTED_MODULE_9__.canDropAtPlaceholder)(draggingItem)) {
            // normal widget，drop at this placeholder directly
            (0,_builder_util__WEBPACK_IMPORTED_MODULE_9__.dropAtPlaceholder)({ layoutId, layoutItemId }, draggingItem);
            return;
        }
        const { width, height } = containerRect;
        let side;
        if (clientY <= height * 0.2) {
            side = _types__WEBPACK_IMPORTED_MODULE_12__.SideType.Top;
        }
        else if (clientY >= height * 0.8) {
            side = _types__WEBPACK_IMPORTED_MODULE_12__.SideType.Bottom;
        }
        else {
            if (clientX <= width * 0.2) {
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_20__.utils.isRTL()) {
                    side = _types__WEBPACK_IMPORTED_MODULE_12__.SideType.Right;
                }
                else {
                    side = _types__WEBPACK_IMPORTED_MODULE_12__.SideType.Left;
                }
            }
            else if (clientX >= width * 0.8) {
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_20__.utils.isRTL()) {
                    side = _types__WEBPACK_IMPORTED_MODULE_12__.SideType.Left;
                }
                else {
                    side = _types__WEBPACK_IMPORTED_MODULE_12__.SideType.Right;
                }
            }
            else {
                side = _types__WEBPACK_IMPORTED_MODULE_12__.SideType.Center;
            }
        }
        const layoutInfo = {
            layoutId
        };
        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.addItemToGrid)(appConfigAction.appConfig, draggingItem, layoutInfo, layoutItemId, side).then((result) => {
            const { appConfig, layoutInfo: newLayoutInfo } = result;
            appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.getAppConfigAction)(appConfig);
            appConfigAction.exec();
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(newLayoutInfo));
        });
    }, [isPlaceholder, layoutId, layoutItemId]);
    const setWidget = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((item) => {
        if (item.itemType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            (0,_builder_util__WEBPACK_IMPORTED_MODULE_9__.addSectionInPlaceholder)({ layoutId, layoutItemId });
        }
        else {
            (0,_builder_util__WEBPACK_IMPORTED_MODULE_9__.addWidgetInPlaceholder)({ layoutId, layoutItemId }, item);
        }
        setShowWidgetListPopper(false);
    }, [layoutId, layoutItemId]);
    const toggleShowWidgetListPopper = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        e.stopPropagation();
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            jimu_for_builder__WEBPACK_IMPORTED_MODULE_3__.appBuilderSync.publishSidePanelToApp({ type: 'widget', isPlaceholder: true, isItemAccepted: _builder_util__WEBPACK_IMPORTED_MODULE_9__.canDropAtPlaceholder, onSelect: setWidget });
            return;
        }
        setShowWidgetListPopper(!showWidgetListPopper);
    }, [showWidgetListPopper, setWidget]);
    const toggleMaximize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setMaximized(!maximized);
    }, [maximized]);
    const toggleLockMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setLocked(!locked);
    }, [locked]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_layout_item__WEBPACK_IMPORTED_MODULE_5__["default"], { layoutId: layoutId, layoutItemId: layoutItemId, resizable: false, className: className, showDefaultTools: false, toolItems: isSection ? sectionMenu : _grid_item_menu__WEBPACK_IMPORTED_MODULE_10__.gridItemMenu, delay: delay, isLastChild: isLastChild, onDragStart: onDragStart, onDragging: onDragging, onDragEnd: onDragEnd, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `${getStyle(isPlaceholder)};${maximized ? maximizedStyle : ''}` },
        (!hasEmbeddedLayout || locked) && !isLockLayout && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_6__.DropArea, { css: dropareaStyle, layouts: fakeLayouts, highlightDragover: true, onDragOver: onDragOver, onDrop: onDrop, onToggleDragoverEffect: handleToggleDragoverEffect })),
        isPlaceholder && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'add-btn' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_8__.ThemedTooltip, { title: translate('addWidget') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, ref: btnRef, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 36px; height: 36px; padding: 0.5rem;`, onClick: toggleShowWidgetListPopper, "aria-haspopup": true },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_plus__WEBPACK_IMPORTED_MODULE_19__.PlusOutlined, null))))),
        isPlaceholder && showWidgetListPopper &&
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.WidgetListPopper, { referenceElement: btnRef.current, isAccepted: _builder_util__WEBPACK_IMPORTED_MODULE_9__.canDropAtPlaceholder, onSelect: setWidget, onClose: () => { setShowWidgetListPopper(false); } }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas", { css: guideOverlay, ref: canvasRef }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleWidth: true, handleHeight: true, onResize: handleResize }),
        expandable && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, type: 'tertiary', className: 'max-grid-item-btn p-0', onClick: toggleMaximize, title: maximized ? translate('restore') : translate('maximize') },
            maximized && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_18__.CloseOutlined, null),
            !maximized && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_maxgrid__WEBPACK_IMPORTED_MODULE_13__.MaxgridOutlined, null))),
        hasEmbeddedLayout && !isLockLayout && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('lock-mask', { unlock: !locked }) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mask' }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Tooltip, { title: locked ? translate('unlockGridItem') : translate('lockGridItem') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { className: 'lock-btn rounded-circle', size: 'sm', type: 'tertiary', icon: true, onClick: toggleLockMode },
                    !locked && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_unlock__WEBPACK_IMPORTED_MODULE_16__.UnlockOutlined, { size: 14, color: theme2.colors.black }),
                    locked && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_lock__WEBPACK_IMPORTED_MODULE_15__.LockOutlined, { size: 20, color: theme2.colors.black })))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/layout-service.ts":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/layout-service.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridLayoutService: () => (/* binding */ GridLayoutService)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _grid_item_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./grid-item-util */ "./jimu-layouts/lib/grid-layout/builder/grid-item-util.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/grid-layout/builder/utils.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _grid_item_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./grid-item-menu */ "./jimu-layouts/lib/grid-layout/builder/grid-item-menu.tsx");
/* harmony import */ var _grid_item_toolbar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./grid-item-toolbar */ "./jimu-layouts/lib/grid-layout/builder/grid-item-toolbar.tsx");
/* harmony import */ var _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../builder/menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../builder/menu/screen-menu */ "./jimu-layouts/lib/builder/menu/screen-menu.tsx");










const sectionMenu = [].concat(_builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_8__.sectionMenuItems, _grid_item_menu__WEBPACK_IMPORTED_MODULE_6__.gridItemMenu);
class GridLayoutService extends jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.BaseLayoutService {
    beforeItemRemoved(appConfig, layoutInfo) {
        const { layoutId, layoutItemId } = layoutInfo;
        let layoutJson = appConfig.layouts[layoutId];
        layoutJson = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.detachGridItem)(layoutJson, layoutItemId);
        return appConfig.setIn(['layouts', layoutId], layoutJson);
    }
    pendItem(appConfig, layoutInfo) {
        let updatedAppConfig = appConfig;
        let layout = updatedAppConfig.layouts[layoutInfo.layoutId];
        layout = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.detachGridItem)(layout, layoutInfo.layoutItemId);
        updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutInfo.layoutId], layout);
        // clear rootItem if it is the last item in grid
        if (layout.setting.rootItem === layoutInfo.layoutItemId) {
            updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutInfo.layoutId, 'setting'], layout.setting.without('rootItem'));
        }
        updatedAppConfig = super.pendItem(updatedAppConfig, layoutInfo);
        return updatedAppConfig;
    }
    duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context) {
        const result = super.duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context);
        let updatedAppConfig = result[0];
        const newItemId = result[1];
        const { layoutId, layoutItemId } = layoutInfo;
        let layout = updatedAppConfig.layouts[layoutId];
        const layoutItem = layout.content[layoutItemId];
        if (!layoutItem.parent) {
            layout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_2__.attach)(layout, newItemId, layoutItemId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row, false, false);
        }
        else {
            const parentItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_3__.getGridItem)(layout, layoutItem.parent);
            const children = [...parentItem.children];
            const index = children.indexOf(layoutItemId);
            children.splice(index, 0, newItemId);
            layout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_2__.updateGridItem)(layout, layoutItem.parent, 'children', children);
            layout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_2__.updateGridItem)(layout, newItemId, 'parent', layoutItem.parent);
            if (parentItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
                layout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_2__.updateSize)(layout, newItemId, +layoutItem.bbox.width);
            }
            else {
                const halfSize = +layoutItem.bbox.width / 2;
                layout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_2__.updateSize)(layout, newItemId, halfSize);
                layout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_2__.updateSize)(layout, layoutItemId, halfSize);
            }
        }
        updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutId], layout);
        return [updatedAppConfig, newItemId];
    }
    getTocStructure(appConfig, layoutId) {
        var _a;
        const layoutJson = appConfig.layouts[layoutId];
        const rootItemId = (_a = layoutJson.setting) === null || _a === void 0 ? void 0 : _a.rootItem;
        const rootNode = this.fetchGridNode(appConfig, layoutJson, `${rootItemId}`, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.utils.getCurrentSizeMode());
        return rootNode != null ? [rootNode] : [];
    }
    getToolItems(appConfig, layoutInfo, type) {
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'view') {
            return _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_8__.viewMenuItems;
        }
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'screen') {
            return _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_9__.screenMenuItems;
        }
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.searchUtils.findLayoutItem(appConfig, layoutInfo);
        if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row || layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
            return _grid_item_toolbar__WEBPACK_IMPORTED_MODULE_7__.gridRowColTools;
        }
        if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
            return [];
        }
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return sectionMenu;
        }
        return _grid_item_menu__WEBPACK_IMPORTED_MODULE_6__.gridItemMenu;
    }
    processAfterItemAdded(appConfig, draggingItem, layoutInfo, currentSizeMode, containerRect, itemRect, insertIndex, options) {
        return appConfig;
    }
    translate(id) {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.i18n.getIntl().formatMessage({ id });
    }
    fetchGridNode(appConfig, layout, itemId, browserSizeMode) {
        var _a, _b, _c, _d;
        const item = (_a = layout.content) === null || _a === void 0 ? void 0 : _a[itemId];
        if (item == null) {
            return null;
        }
        const { gridType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain, children } = item;
        if (gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain) {
            const service = new jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.ContentServiceWrapper(appConfig, item);
            return service.toTocNode({ layoutId: layout.id, layoutItemId: itemId }, browserSizeMode);
        }
        let label;
        if (gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
            label = (_b = item.label) !== null && _b !== void 0 ? _b : this.translate('gridRow');
        }
        else if (gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
            label = (_c = item.label) !== null && _c !== void 0 ? _c : this.translate('gridCol');
        }
        else if (gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
            label = (_d = item.label) !== null && _d !== void 0 ? _d : this.translate('tabs');
        }
        let isInTab = false;
        if (item.parent) {
            const parentItem = layout.content[item.parent];
            isInTab = parentItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab;
        }
        const editable = isInTab && (gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row || gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column);
        const result = {
            label,
            type: 'layoutItem',
            layoutId: layout.id,
            layoutItemId: itemId,
            isLabelReadOnly: !editable
        };
        if ((children === null || children === void 0 ? void 0 : children.length) > 0) {
            result.children = [...children].map((itemId) => this.fetchGridNode(appConfig, layout, itemId, browserSizeMode));
        }
        return result;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/layout.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/layout.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/grid-layout/builder/utils.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/* harmony import */ var _grid_item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./grid-item */ "./jimu-layouts/lib/grid-layout/builder/grid-item.tsx");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/grid-layout/builder/types.ts");
/* harmony import */ var _action_block__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./action-block */ "./jimu-layouts/lib/grid-layout/builder/action-block.tsx");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/** @jsx jsx */











const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  bottom: 0;
  top: 0;
  right: 0;
  background: transparent;
  display: flex;
`;
const getStyle = (layoutSetting) => {
    const theme2 = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_10__.getTheme2)();
    const padding = (0,_common_utils__WEBPACK_IMPORTED_MODULE_6__.calPaddingStyle)(layoutSetting);
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    overflow: hidden;
    position: relative;
    ${padding}

    .grid-root-drop-area {
      position: absolute;
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.04);
      box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
      border-radius: 7px;
      display: none !important;
      z-index: 30;

      &.top {
        top: 2px;
        left: 50%;
        width: 60px;
        height: 10px;
        transform: translateX(-50%);
      }

      &.bottom {
        bottom: 2px;
        left: 50%;
        width: 60px;
        height: 10px;
        transform: translateX(-50%);
      }

      &.right {
        right: 2px;
        top: 50%;
        height: 60px;
        width: 10px;
        transform: translateY(-50%);
      }

      &.left {
        left: 2px;
        top: 50%;
        height: 60px;
        width: 10px;
        transform: translateY(-50%);
      }
    }

    .${_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_H5_DRAGGING_CLASS_NAME} &.drop-target > .grid-root-drop-area,
    .${_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_DRAGGING_CLASS_NAME} &.drop-target > .grid-root-drop-area {
      display: flex !important;
    }

    .highlight-area {
      background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme2.colors.palette.primary[700], 0.2)};
      position: absolute;
      opacity: 0.6;
      pointer-events: none;
      display: none;

      &.active {
        display: block;
      }

      &.top {
        top: 0;
        width: 100%;
        height: 50%;
      }
      &.bottom {
        bottom: 0;
        width: 100%;
        height: 50%;
      }
      &.left {
        left: 0;
        width: 50%;
        height: 100%;
      }
      &.right {
        right: 0;
        width: 50%;
        height: 100%;
      }
      &.center {
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    }
  `;
};
class GridLayout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.handleTemplateSelected = (templateGridJson) => __awaiter(this, void 0, void 0, function* () {
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            const { layout } = this.props;
            yield appConfigAction.applyGridTemplate(layout.parent.id, templateGridJson);
            appConfigAction.exec();
        });
        this.handlePageTemplateSelected = (templatePageJson) => {
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            this.setState({ isLoadingTemplate: true });
            appConfigAction.applyPageBodyTemplate(this.pageContext.pageId, templatePageJson)
                .then(() => {
                appConfigAction.exec();
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                    this.setState({ isLoadingTemplate: false });
                });
            }).finally(null);
        };
        this.highlight = (side) => {
            this.tipRef.current.classList.add('active', side);
        };
        this.clearHighlight = (side) => {
            this.tipRef.current.classList.remove('active', side);
        };
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.autoBindHandlers(this, ['handleDrop']);
        const { layout } = this.props;
        this.fakeLayouts = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${layout.id}_tlarge`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${layout.id}_tmedium`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${layout.id}_tsmall`
        });
        this.tipRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
    }
    findExtension() {
        const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(`${jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer}`);
        if ((exts === null || exts === void 0 ? void 0 : exts.length) > 0) {
            const ext = exts.find(item => item.layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout);
            this.layoutTransform = ext === null || ext === void 0 ? void 0 : ext.transformLayout;
        }
    }
    handleDragOver() { }
    handleDragEnter() { }
    handleDragLeave() { }
    handleDrop(draggingItem, containerRect, itemRect) {
        const { layout } = this.props;
        const layoutInfo = {
            layoutId: layout.id
        };
        let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        (0,_utils__WEBPACK_IMPORTED_MODULE_5__.addItemToGrid)(appConfigAction.appConfig, draggingItem, layoutInfo, null, _types__WEBPACK_IMPORTED_MODULE_8__.SideType.Center).then((result) => {
            const { appConfig, layoutInfo: newLayoutInfo } = result;
            appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
            appConfigAction.exec();
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(newLayoutInfo));
        });
    }
    handleDropAtSide(draggingItem, side) {
        this.clearHighlight(side);
        const layoutId = this.props.layout.id;
        let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        this.tipRef.current.parentElement.classList.remove('drop-target');
        (0,_utils__WEBPACK_IMPORTED_MODULE_5__.splitGrid)(appConfigAction.appConfig, draggingItem, layoutId, side).then(({ appConfig, itemId }) => {
            appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
            appConfigAction.exec();
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({
                layoutId,
                layoutItemId: itemId
            }));
        });
    }
    render() {
        var _a, _b, _c;
        const { layouts, layout, browserSizeMode, mainSizeMode, className } = this.props;
        const viewOnly = layouts[browserSizeMode] !== layout.id;
        let finalLayout = layout;
        if (viewOnly) {
            if (this.layoutTransform == null) {
                this.findExtension();
            }
            if (this.layoutTransform != null) {
                finalLayout = this.layoutTransform(layout, mainSizeMode, browserSizeMode);
            }
        }
        const { rootItem: rootItemId } = (_a = finalLayout.setting) !== null && _a !== void 0 ? _a : {};
        const rootItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_6__.getGridItem)(finalLayout, rootItemId);
        const outClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout grid-layout d-flex w-100 h-100', className);
        const childrenSize = (_c = (_b = rootItem === null || rootItem === void 0 ? void 0 : rootItem.children) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.PageContext.Consumer, null, (props) => {
            this.pageContext = props;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: outClass, css: getStyle(finalLayout.setting), "data-layoutid": finalLayout.id },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: false } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: finalLayout.id, "data-layoutid": finalLayout.id, className: 'trail-container d-flex w-100 h-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                    width: 100%;
                  ` },
                        rootItem == null && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_3__.DropArea, { css: dropareaStyle, layouts: this.props.layouts, highlightDragover: true, onDragEnter: this.handleDragEnter, onDragLeave: this.handleDragLeave, onDragOver: this.handleDragOver, onDrop: this.handleDrop },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                          width: 100%;
                          background: var(--cyan-500);
                        ` }))),
                        rootItem == null && !viewOnly && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_action_block__WEBPACK_IMPORTED_MODULE_9__.ActionBlock, { layoutId: layout.id, pageContext: props, onTemplateSelected: this.handleTemplateSelected, onPageTemplateSelected: this.handlePageTemplateSelected })),
                        rootItem
                            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_grid_item__WEBPACK_IMPORTED_MODULE_7__.GridItemComponent, { className: 'w-100 h-100', layout: finalLayout, layoutItemId: rootItemId })
                            : this.props.children)),
                childrenSize > 1 && ([_types__WEBPACK_IMPORTED_MODULE_8__.SideType.Top, _types__WEBPACK_IMPORTED_MODULE_8__.SideType.Right, _types__WEBPACK_IMPORTED_MODULE_8__.SideType.Bottom, _types__WEBPACK_IMPORTED_MODULE_8__.SideType.Left].map(side => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_3__.DropArea, { key: side, className: `${side} grid-root-drop-area shadow-sm`, layouts: this.fakeLayouts, onDrop: (draggingItem) => { this.handleDropAtSide(draggingItem, side); }, onDragEnter: () => { this.highlight(side); }, onDragLeave: () => { this.clearHighlight(side); } })))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: this.tipRef, className: 'highlight-area' })));
        }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.mapStateToLayoutProps)(GridLayout));


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/types.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/types.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SideType: () => (/* binding */ SideType)
/* harmony export */ });
var SideType;
(function (SideType) {
    SideType["Top"] = "top";
    SideType["Bottom"] = "bottom";
    SideType["Left"] = "left";
    SideType["Right"] = "right";
    SideType["Center"] = "center";
})(SideType || (SideType = {}));


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/builder/utils.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/builder/utils.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addItemToGrid: () => (/* binding */ addItemToGrid),
/* harmony export */   detachGridItem: () => (/* binding */ detachGridItem),
/* harmony export */   splitGrid: () => (/* binding */ splitGrid)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/grid-layout/builder/types.ts");
/* harmony import */ var _grid_item_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./grid-item-util */ "./jimu-layouts/lib/grid-layout/builder/grid-item-util.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function addItem(appConfig, item, parentLayoutInfo) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        const { layoutInfo: { layoutId, layoutItemId }, updatedAppConfig } = yield (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_2__.addItemToLayout)(appConfig, item, parentLayoutInfo.layoutId);
        let outAppConfig = updatedAppConfig;
        if (((_a = item.layoutInfo) === null || _a === void 0 ? void 0 : _a.layoutId) !== parentLayoutInfo.layoutId) {
            outAppConfig = updatedAppConfig.setIn(['layouts', layoutId, 'content', layoutItemId, 'gridType'], jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain);
        }
        return { newLayoutItemId: layoutItemId, updatedAppConfig: outAppConfig };
    });
}
function addItemToGrid(appConfig, item, parentLayoutInfo, referenceItemId, side) {
    return __awaiter(this, void 0, void 0, function* () {
        // const { layoutInfo } = item
        const { layoutId: pLayoutId } = parentLayoutInfo;
        let outAppConfig = appConfig;
        // let newLayoutItemId
        // if (layoutInfo?.layoutId === pLayoutId) {
        //   const layoutItem = appConfig.layouts[pLayoutId].content[layoutInfo.layoutItemId]
        //   if (layoutItem.isPending) {
        //     outAppConfig = outAppConfig.setIn(['layouts', pLayoutId, 'content', layoutInfo.layoutItemId], layoutItem.without('isPending'))
        //   } else {
        //     // move in the same grid
        //     const updateLayout = getAppConfigAction().detachGridItem(appConfig.layouts[pLayoutId], layoutInfo.layoutItemId)
        //     outAppConfig = outAppConfig.setIn(['layouts', pLayoutId], updateLayout)
        //   }
        //   newLayoutItemId = layoutInfo.layoutItemId
        // } else {
        const result = yield addItem(appConfig, item, parentLayoutInfo);
        const newLayoutItemId = result.newLayoutItemId;
        outAppConfig = result.updatedAppConfig;
        // }
        if (!referenceItemId) {
            outAppConfig = outAppConfig.setIn(['layouts', pLayoutId, 'content', newLayoutItemId, 'bbox'], { width: 100 })
                .setIn(['layouts', pLayoutId, 'content', newLayoutItemId, 'gridType'], jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain)
                .setIn(['layouts', pLayoutId, 'setting', 'rootItem'], newLayoutItemId);
        }
        else {
            const outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.attachToGridItem)(outAppConfig.layouts[pLayoutId], newLayoutItemId, referenceItemId, side);
            outAppConfig = outAppConfig.setIn(['layouts', pLayoutId], outLayout);
        }
        return { appConfig: outAppConfig, layoutInfo: { layoutId: pLayoutId, layoutItemId: newLayoutItemId } };
    });
}
function splitGrid(appConfig, item, gridLayoutId, side) {
    return __awaiter(this, void 0, void 0, function* () {
        const { layoutInfo } = item;
        let outAppConfig = appConfig;
        let newLayoutItemId;
        if ((layoutInfo === null || layoutInfo === void 0 ? void 0 : layoutInfo.layoutId) === gridLayoutId) {
            // move in the same grid
            const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.searchUtils.findLayoutItem(appConfig, layoutInfo);
            if (layoutItem.isPending) { // already detached
                outAppConfig = outAppConfig.setIn(['layouts', gridLayoutId, 'content', layoutInfo.layoutItemId], layoutItem.without('isPending'));
            }
            else {
                const updateLayout = detachGridItem(outAppConfig.layouts[gridLayoutId], layoutInfo.layoutItemId);
                outAppConfig = outAppConfig.setIn(['layouts', gridLayoutId], updateLayout);
            }
            newLayoutItemId = layoutInfo.layoutItemId;
        }
        else {
            const result = yield addItem(appConfig, item, { layoutId: gridLayoutId });
            newLayoutItemId = result.newLayoutItemId;
            outAppConfig = result.updatedAppConfig;
        }
        const layout = outAppConfig.layouts[gridLayoutId];
        const rootLayoutItemId = layout.setting.rootItem;
        const rootItem = layout.content[rootLayoutItemId];
        let newRootItem;
        if (side === _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Left || side === _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Right) {
            if (rootItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
                // append to existing row
                let outLayout = layout;
                outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, rootLayoutItemId, 100);
                outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, newLayoutItemId, 50);
                outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateGridItem)(outLayout, newLayoutItemId, 'parent', rootLayoutItemId);
                rootItem.children.forEach(id => {
                    const childItem = outLayout.content[id];
                    outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, id, +childItem.bbox.width / 2);
                });
                const content = [...rootItem.children];
                if (side === _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Left) {
                    content.unshift(newLayoutItemId);
                }
                else {
                    content.push(newLayoutItemId);
                }
                outLayout = outLayout.setIn(['content', rootLayoutItemId, 'children'], content);
                outAppConfig = outAppConfig.setIn(['layouts', gridLayoutId], outLayout);
                return { appConfig: outAppConfig, itemId: newLayoutItemId };
            }
            newRootItem = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.createEmptyGridItem)(layout, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row);
        }
        else {
            if (rootItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
                // append to existing column
                let outLayout = layout;
                outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, rootLayoutItemId, 100);
                outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, newLayoutItemId, 50);
                outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateGridItem)(outLayout, newLayoutItemId, 'parent', rootLayoutItemId);
                rootItem.children.forEach(id => {
                    const childItem = outLayout.content[id];
                    outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, id, +childItem.bbox.width / 2);
                });
                const content = [...rootItem.children];
                if (side === _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Top) {
                    content.unshift(newLayoutItemId);
                }
                else {
                    content.push(newLayoutItemId);
                }
                outLayout = outLayout.setIn(['content', rootLayoutItemId, 'children'], content);
                outAppConfig = outAppConfig.setIn(['layouts', gridLayoutId], outLayout);
                return { appConfig: outAppConfig, itemId: newLayoutItemId };
            }
            newRootItem = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.createEmptyGridItem)(layout, jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column);
        }
        let { outLayout, outItem } = newRootItem;
        outLayout = outLayout.setIn(['setting', 'rootItem'], outItem.id);
        outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, outItem.id, 100);
        outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, rootLayoutItemId, 50);
        outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateGridItem)(outLayout, rootLayoutItemId, 'parent', outItem.id);
        outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateSize)(outLayout, newLayoutItemId, 50);
        outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateGridItem)(outLayout, newLayoutItemId, 'parent', outItem.id);
        if (side === _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Left || side === _types__WEBPACK_IMPORTED_MODULE_3__.SideType.Top) {
            outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateGridItem)(outLayout, outItem.id, 'children', [newLayoutItemId, rootLayoutItemId]);
        }
        else {
            outLayout = (0,_grid_item_util__WEBPACK_IMPORTED_MODULE_4__.updateGridItem)(outLayout, outItem.id, 'children', [rootLayoutItemId, newLayoutItemId]);
        }
        outAppConfig = outAppConfig.setIn(['layouts', gridLayoutId], outLayout);
        return { appConfig: outAppConfig, itemId: newLayoutItemId };
    });
}
// detach a grid item from its parent but do not remove the layout item
function detachGridItem(layout, layoutItemId) {
    const layoutItem = layout.content[layoutItemId];
    const { parent } = layoutItem;
    if (!parent) {
        // detach root or already detached
        if (layout.setting.rootItem === layoutItemId) {
            return layout.setIn(['setting', 'rootItem'], null);
        }
        return layout;
    }
    let outLayout = layout.setIn(['content', layoutItemId], layoutItem.without('parent'));
    const parentLayoutItem = layout.content[parent];
    if (!parentLayoutItem || (parentLayoutItem === null || parentLayoutItem === void 0 ? void 0 : parentLayoutItem.children) == null) {
        return layout;
    }
    const index = parentLayoutItem.children.indexOf(layoutItemId);
    const remainItems = parentLayoutItem.children.filter((itemId) => itemId !== layoutItemId);
    if (remainItems.length === 1) {
        const child = remainItems[0];
        // remove parent, and reset the relationship between grandparent and child
        outLayout = outLayout.setIn(['content', child, 'bbox', 'width'], parentLayoutItem.bbox.width);
        if (parentLayoutItem.parent != null) {
            outLayout = outLayout.setIn(['content', child, 'parent'], parentLayoutItem.parent);
            const grandParentItem = layout.content[parentLayoutItem.parent];
            if (grandParentItem) {
                const order = [...grandParentItem.children];
                const index = order.indexOf(parent);
                order.splice(index, 1, child);
                outLayout = outLayout.setIn(['content', parentLayoutItem.parent, 'children'], order);
            }
        }
        else {
            // parent is root
            outLayout = outLayout.setIn(['content', child], outLayout.content[child].without('parent'));
            outLayout = outLayout.setIn(['setting', 'rootItem'], child);
        }
        outLayout = outLayout.set('content', outLayout.content.without(parent));
    }
    else {
        if (index < remainItems.length) {
            const itemToUpdate = outLayout.content[remainItems[index]];
            outLayout = outLayout.setIn(['content', remainItems[index], 'bbox', 'width'], itemToUpdate.bbox.width + layoutItem.bbox.width);
        }
        else {
            const itemToUpdate = outLayout.content[remainItems[remainItems.length - 1]];
            outLayout = outLayout.setIn(['content', remainItems[remainItems.length - 1], 'bbox', 'width'], itemToUpdate.bbox.width + layoutItem.bbox.width);
        }
        outLayout = outLayout.setIn(['content', parent, 'children'], remainItems);
    }
    return outLayout;
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/common/splitter.tsx":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/common/splitter.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Splitter: () => (/* binding */ Splitter)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const MIN_SIZE = 32;
function restrictResizing(prevItemRect, nextItemRect, direction, dx, dy, isRTL) {
    let x = dx;
    let y = dy;
    if (direction === 'row') {
        const prevWidth = isRTL ? nextItemRect.width : prevItemRect.width;
        const nextWidth = isRTL ? prevItemRect.width : nextItemRect.width;
        if (dx < 0) {
            if (prevWidth > MIN_SIZE) {
                x = -Math.min(Math.abs(dx), prevWidth - MIN_SIZE);
            }
            else {
                x = 0;
            }
        }
        if (dx > 0) {
            if (nextWidth > MIN_SIZE) {
                x = Math.min(dx, nextWidth - MIN_SIZE);
            }
            else {
                x = 0;
            }
        }
    }
    else {
        if (dy < 0) {
            if (prevItemRect.height > MIN_SIZE) {
                y = -Math.min(Math.abs(dy), prevItemRect.height - MIN_SIZE);
            }
            else {
                y = 0;
            }
        }
        if (dy > 0) {
            if (nextItemRect.height > MIN_SIZE) {
                y = Math.min(dy, nextItemRect.height - MIN_SIZE);
            }
            else {
                y = 0;
            }
        }
    }
    return { x, y };
}
function getSize(layoutItemElement) {
    const layoutId = layoutItemElement.getAttribute('data-layoutid');
    const layoutItemId = layoutItemElement.getAttribute('data-layoutitemid');
    const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
    return +layoutItem.bbox.width;
}
function Splitter(props) {
    var _a, _b;
    const { referenceItemId, direction, layoutId, onResizeEnd } = props;
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const interactableRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const interactRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const isRTL = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext) === null || _a === void 0 ? void 0 : _a.isRTL) !== null && _b !== void 0 ? _b : false;
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const layoutResizable = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const layout = state.appConfig.layouts[props.layoutId];
        return (_b = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.resizable) !== null && _b !== void 0 ? _b : true;
    });
    const size = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const layout = state.appConfig.layouts[layoutId];
        return (_b = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.splitSize) !== null && _b !== void 0 ? _b : 8;
    });
    const color = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const layout = state.appConfig.layouts[layoutId];
        return (_b = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.splitColor) !== null && _b !== void 0 ? _b : 'var(--light-500)';
    });
    const style = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        const pxSize = `${size}px`;
        const canResize = isDesignMode ? true : layoutResizable;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: ${direction === 'col' ? '100%' : pxSize};
      height: ${direction === 'col' ? pxSize : '100%'};
      background: ${color};
      position: relative;
      z-index: 10;
      flex-shrink: 0;

      .horizontal-splitter {
        cursor: ${canResize ? 'col-resize' : 'default'};
      }

      .vertical-splitter {
        cursor: ${canResize ? 'row-resize' : 'default'};
      }
    `;
    }, [direction, layoutResizable, isDesignMode, size, color]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        let dx;
        let dy;
        let parentRect;
        let prevItem;
        let prevItemRect;
        let prevSize;
        let originPrevItemWidth;
        let originPrevItemHeight;
        let nextItem;
        let nextItemRect;
        let nextSize;
        let originNextItemWidth;
        let originNextItemHeight;
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.moduleLoader.loadModule('jimu-core/dnd').then(module => {
            const interact = module.interact;
            interactRef.current = interact;
            if (!domRef.current) { // maybe unmounted in this async callback
                return;
            }
            interactableRef.current = interact(domRef.current)
                .origin('parent')
                .draggable({
                inertia: false,
                autoScroll: false,
                enabled: isDesignMode ? true : layoutResizable,
                modifiers: [
                    interact.modifiers.restrict({
                        restriction: 'parent'
                    })
                ],
                lockAxis: direction === 'row' ? 'x' : 'y',
                onstart: (event) => {
                    event.stopPropagation();
                    dx = 0;
                    dy = 0;
                    parentRect = domRef.current.parentElement.getBoundingClientRect();
                    prevItem = domRef.current.previousElementSibling;
                    prevItemRect = prevItem.getBoundingClientRect();
                    originPrevItemWidth = prevItem.style.width;
                    originPrevItemHeight = prevItem.style.height;
                    prevSize = getSize(prevItem);
                    nextItem = domRef.current.nextElementSibling;
                    nextItemRect = nextItem.getBoundingClientRect();
                    originNextItemWidth = nextItem.style.width;
                    originNextItemHeight = nextItem.style.height;
                    nextSize = getSize(nextItem);
                },
                onmove: (event) => {
                    event.stopPropagation();
                    dx += event.dx;
                    dy += event.dy;
                    const { x, y } = restrictResizing(prevItemRect, nextItemRect, direction, dx, dy, isRTL);
                    const factor = isRTL ? -1 : 1;
                    if (direction === 'row') {
                        prevItem.style.width = `calc(${prevSize}% + ${x * factor}px)`;
                        nextItem.style.width = `calc(${nextSize}% - ${x * factor}px)`;
                    }
                    else {
                        prevItem.style.height = `calc(${prevSize}% + ${y}px)`;
                        nextItem.style.height = `calc(${nextSize}% - ${y}px)`;
                    }
                },
                onend: (event) => {
                    event.stopPropagation();
                    dx += event.dx;
                    dy += event.dy;
                    const { x, y } = restrictResizing(prevItemRect, nextItemRect, direction, dx, dy, isRTL);
                    const factor = isRTL ? -1 : 1;
                    // restore style of items
                    prevItem.style.width = originPrevItemWidth;
                    nextItem.style.width = originNextItemWidth;
                    prevItem.style.height = originPrevItemHeight;
                    nextItem.style.height = originNextItemHeight;
                    onResizeEnd(referenceItemId, Math.round(x * factor * 10000 / parentRect.width) / 100, Math.round(y * 10000 / parentRect.height) / 100);
                }
            });
        });
        return () => {
            var _a;
            (_a = interactableRef.current) === null || _a === void 0 ? void 0 : _a.unset();
            interactableRef.current = null;
        };
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (interactableRef.current != null) {
            interactRef.current(domRef.current).draggable(isDesignMode ? true : layoutResizable);
        }
    }, [layoutResizable, isDesignMode]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: domRef, css: style, className: 'grid-split flex-shrink-0' },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100', {
                'horizontal-splitter': direction === 'row',
                'vertical-splitter': direction === 'col'
            }) })));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/common/utils.ts":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/common/utils.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calPaddingStyle: () => (/* binding */ calPaddingStyle),
/* harmony export */   getGridItem: () => (/* binding */ getGridItem),
/* harmony export */   getGridLayoutStructure: () => (/* binding */ getGridLayoutStructure),
/* harmony export */   getLabelOfGridTab: () => (/* binding */ getLabelOfGridTab),
/* harmony export */   indexOfPlainContent: () => (/* binding */ indexOfPlainContent),
/* harmony export */   isExpandable: () => (/* binding */ isExpandable),
/* harmony export */   isLastChildOfRootItem: () => (/* binding */ isLastChildOfRootItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");


function indexOfPlainContent(layout, layoutItemId) {
    var _a, _b;
    let start = 0;
    const rootItemId = layout.setting.rootItem;
    const rootItem = getGridItem(layout, rootItemId);
    if (rootItem && ((_a = rootItem.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        const candidates = [...rootItem.children];
        while (candidates.length > 0) {
            const firstItemId = candidates.shift();
            const firstItem = getGridItem(layout, firstItemId);
            const parentId = firstItem.parent;
            const parentItem = getGridItem(layout, parentId);
            if (`${firstItem.id}` === layoutItemId ||
                (parentItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab && parentItem.children.includes(layoutItemId))) {
                return start;
            }
            if (((_b = firstItem.children) === null || _b === void 0 ? void 0 : _b.length) > 0) {
                // it is a group
                candidates.unshift(...firstItem.children);
                continue;
            }
            // tab only increase index once
            if (parentItem.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab ||
                (parentItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab && parentItem.children.indexOf(firstItemId) === 0)) {
                start += 1;
            }
        }
    }
    return start;
}
function isLastChildOfRootItem(layout, layoutItemId) {
    var _a;
    let currentItem = getGridItem(layout, layoutItemId);
    if (((_a = currentItem === null || currentItem === void 0 ? void 0 : currentItem.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        // children's is behind currentItem
        return false;
    }
    while (currentItem != null) {
        const parentId = currentItem.parent;
        if (parentId == null) {
            break;
        }
        // check if it the last child of its parent
        const parentItem = getGridItem(layout, parentId);
        const len = parentItem.children.length;
        const lastId = parentItem.children[len - 1];
        if (+lastId !== +currentItem.id) {
            return false;
        }
        currentItem = parentItem;
    }
    return true;
}
function isExpandable(state, layoutId, layoutItemId) {
    var _a, _b;
    const layout = state.appConfig.layouts[layoutId];
    const layoutItem = layout.content[layoutItemId];
    const canExpand = (_a = layoutItem.expandable) !== null && _a !== void 0 ? _a : true;
    if (!canExpand) {
        return false;
    }
    // set expandable to false if it is the only item in grid
    const rootItem = (_b = layout === null || layout === void 0 ? void 0 : layout.setting) === null || _b === void 0 ? void 0 : _b.rootItem;
    let isOnlyItem = false;
    if (rootItem === layoutItemId) {
        const rootLayoutItem = getGridItem(layout, rootItem);
        if (rootLayoutItem.children == null || rootLayoutItem.children.length === 0) {
            isOnlyItem = true;
        }
    }
    return !isOnlyItem;
}
function getGridItem(layout, layoutItemId) {
    var _a;
    return (_a = layout.content) === null || _a === void 0 ? void 0 : _a[layoutItemId];
}
function fetchGridNode(layout, layoutItemId) {
    const item = getGridItem(layout, layoutItemId);
    if (item == null) {
        return null;
    }
    const { gridType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain, children } = item;
    const result = { layoutItemId, type: gridType };
    if ((children === null || children === void 0 ? void 0 : children.length) > 0) {
        result.children = [...children].map((itemId) => fetchGridNode(layout, itemId));
    }
    return result;
}
function getGridLayoutStructure(layout) {
    var _a;
    if (layout.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout) {
        return null;
    }
    const rootItemId = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.rootItem;
    return fetchGridNode(layout, `${rootItemId}`);
}
function getLabelOfGridTab(appConfig, layoutInfo, translate) {
    var _a, _b, _c, _d, _e, _f, _g;
    const { layoutId, layoutItemId } = layoutInfo;
    const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widget = appConfig.widgets[layoutItem.widgetId];
        if (!widget) {
            return translate('placeholder');
        }
        return (_b = (_a = widget === null || widget === void 0 ? void 0 : widget.label) !== null && _a !== void 0 ? _a : layoutItem.label) !== null && _b !== void 0 ? _b : layoutItem.id; // may be a placeholder
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        const section = appConfig.sections[layoutItem.sectionId];
        return section.label;
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.gridType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
        return (_c = layoutItem.label) !== null && _c !== void 0 ? _c : translate('gridRow');
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.gridType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
        return (_d = layoutItem.label) !== null && _d !== void 0 ? _d : translate('gridCol');
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.gridType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
        return (_e = layoutItem.label) !== null && _e !== void 0 ? _e : translate('tabs');
    }
    return (_g = (_f = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.label) !== null && _f !== void 0 ? _f : layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.id) !== null && _g !== void 0 ? _g : '';
}
function calPaddingStyle(layoutSetting) {
    var _a;
    const padding = jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding((_a = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.style) === null || _a === void 0 ? void 0 : _a.padding);
    if (padding) {
        if (layoutSetting.paddingColor) {
            const paddingTokens = padding.split(' ');
            const paddingColor = layoutSetting.paddingColor;
            let prefix = '';
            const ua = window.jimuUA.browser.name.toLowerCase();
            if (ua === 'firefox') {
                prefix = '-moz-';
            }
            else if (ua === 'safari' || ua === 'chrome') {
                prefix = '-webkit-';
            }
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        padding: ${padding};
        background-image:
        ${prefix}linear-gradient(270deg, ${paddingColor} ${paddingTokens[0]}, transparent ${paddingTokens[0]}),
        ${prefix}linear-gradient(180deg, ${paddingColor} ${paddingTokens[1]}, transparent ${paddingTokens[1]}),
        ${prefix}linear-gradient(90deg, ${paddingColor} ${paddingTokens[2]}, transparent ${paddingTokens[2]}),
        ${prefix}linear-gradient(0deg, ${paddingColor} ${paddingTokens[3]}, transparent ${paddingTokens[3]});
      `;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      padding: ${padding};
    `;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/layout-setting.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/layout-setting.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var jimu_ui_basic_color_picker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/color-picker */ "jimu-ui/basic/color-picker");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/** @jsx jsx */







const availableUnits = [jimu_ui__WEBPACK_IMPORTED_MODULE_5__.DistanceUnits.PIXEL];
class _Setting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.handlePaddingChange = (value) => {
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            this.getLayoutIds().forEach(layoutId => {
                appConfigAction.editLayoutProperty(layoutId, 'setting.style.padding', value);
            });
            appConfigAction.exec();
        };
        this.handleSettingChange = (prop, value) => {
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            this.getLayoutIds().forEach(layoutId => {
                appConfigAction.editLayoutProperty(layoutId, `setting.${prop}`, value);
            });
            appConfigAction.exec();
        };
        this.toggleExpandable = () => {
            var _a;
            const { layoutId, allItemsExpandable } = this.props;
            const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
            const layout = appConfigAction.appConfig.layouts[layoutId];
            Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {}).forEach(itemId => {
                const layoutItem = layout.content[itemId];
                if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain) {
                    appConfigAction.editLayoutItemProperty({ layoutId, layoutItemId: itemId }, 'expandable', !allItemsExpandable);
                }
            });
            appConfigAction.exec();
        };
    }
    getLayoutIds() {
        const result = [];
        const { layouts } = this.props;
        if (layouts != null) {
            Object.keys(layouts).forEach(sizemode => {
                result.push(layouts[sizemode]);
            });
        }
        return result;
    }
    render() {
        var _a, _b, _c, _d;
        const { layoutSetting, allItemsExpandable, allItemsNotExpandable, formatMessage, appTheme } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flexbox-layout-setting' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { role: 'group', title: formatMessage('layout'), "aria-label": formatMessage('layout') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { label: formatMessage('padding'), role: 'group', "aria-label": formatMessage('padding'), flow: 'wrap' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__.Padding, { value: (_a = layoutSetting.style) === null || _a === void 0 ? void 0 : _a.padding, onChange: this.handlePaddingChange })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { label: formatMessage('paddingColor') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_color_picker__WEBPACK_IMPORTED_MODULE_4__.ThemeColorPicker, { "aria-label": formatMessage('paddingColor'), specificTheme: appTheme, value: layoutSetting.paddingColor, onChange: (value) => { this.handleSettingChange('paddingColor', value); } })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { label: formatMessage('gap'), truncateLabel: true },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_color_picker__WEBPACK_IMPORTED_MODULE_4__.ThemeColorPicker, { "aria-label": formatMessage('gap'), specificTheme: appTheme, value: (_b = layoutSetting.splitColor) !== null && _b !== void 0 ? _b : 'var(--light-500)', onChange: (value) => { this.handleSettingChange('splitColor', value); } }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__.InputUnit, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 74px !important;`, className: 'ml-2', units: availableUnits, min: 1, max: 100, precision: 0, value: { distance: (_c = layoutSetting.splitSize) !== null && _c !== void 0 ? _c : 8, unit: jimu_ui__WEBPACK_IMPORTED_MODULE_5__.DistanceUnits.PIXEL }, onChange: (value) => { this.handleSettingChange('splitSize', value.distance); } }))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { role: 'group', title: formatMessage('gridItems'), "aria-label": formatMessage('gridItems') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Label, { centric: true },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Checkbox, { "aria-label": formatMessage('allowResize'), checked: (_d = layoutSetting.resizable) !== null && _d !== void 0 ? _d : true, onChange: (_, checked) => { this.handleSettingChange('resizable', checked); } }),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'ml-2' }, formatMessage('allowResize')))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-100 align-items-center' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Label, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 80%;`, className: 'justify-content-start' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Checkbox, { "aria-label": formatMessage('allowExpansion'), checked: allItemsExpandable, indeterminate: !allItemsExpandable && !allItemsNotExpandable, onClick: this.toggleExpandable }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'ml-2 text-truncate' }, formatMessage('allowExpansion'))),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Tooltip, { title: formatMessage('gridSettingOverrideTip'), placement: 'bottom' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_5__.Button, { className: 'ml-auto', type: 'tertiary', icon: true },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_6__.InfoOutlined, null))))))));
    }
}
const mapStateToSettingProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)((state, ownProps) => {
    const appState = state.appStateInBuilder;
    if (!appState) {
        return null;
    }
    return ownProps.layouts[appState.browserSizeMode] || ownProps.layouts[appState.appConfig.mainSizeMode];
}, (state, ownProps) => {
    var _a, _b;
    const appState = state.appStateInBuilder;
    if (!appState) {
        return {};
    }
    const layoutId = ownProps.layouts[appState.browserSizeMode] || ownProps.layouts[appState.appConfig.mainSizeMode];
    const { layouts } = appState.appConfig;
    return (_b = (_a = layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.setting) !== null && _b !== void 0 ? _b : {};
}, (state, ownProps) => {
    var _a;
    const appState = state.appStateInBuilder;
    if (!appState) {
        return false;
    }
    const layoutId = ownProps.layouts[appState.browserSizeMode] || ownProps.layouts[appState.appConfig.mainSizeMode];
    const { layouts } = appState.appConfig;
    const layout = layouts[layoutId];
    const idList = Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {});
    if (idList.length > 0) {
        return idList.every(itemId => {
            var _a;
            const layoutItem = layout.content[itemId];
            if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain) {
                return (_a = layoutItem.expandable) !== null && _a !== void 0 ? _a : true;
            }
            return true;
        });
    }
    return true;
}, (state, ownProps) => {
    var _a;
    const appState = state.appStateInBuilder;
    if (!appState) {
        return false;
    }
    const layoutId = ownProps.layouts[appState.browserSizeMode] || ownProps.layouts[appState.appConfig.mainSizeMode];
    const { layouts } = appState.appConfig;
    const layout = layouts[layoutId];
    const idList = Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {});
    if (idList.length > 0) {
        return idList.every(itemId => {
            const layoutItem = layout.content[itemId];
            if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain) {
                return layoutItem.expandable != null && !layoutItem.expandable;
            }
            return true;
        });
    }
    return true;
}, (layoutId, layoutSetting, allItemsExpandable, allItemsNotExpandable) => ({ layoutId, layoutSetting, allItemsExpandable, allItemsNotExpandable }));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToSettingProps)(_Setting));


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/layout-transform.ts":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/layout-transform.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridLayoutTransformer: () => (/* binding */ GridLayoutTransformer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class GridLayoutTransformer {
    constructor() {
        this.id = 'grid-layout-transformer';
        this.layoutType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout;
        this.transformLayout = (layout, fromSizeMode, toSizeMode) => {
            var _a, _b;
            if (fromSizeMode !== toSizeMode && toSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
                let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layout);
                const rootId = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.rootItem;
                if (rootId && ((_b = layout.content) === null || _b === void 0 ? void 0 : _b[rootId])) {
                    const contentIds = [];
                    const rootItem = layout.content[rootId];
                    updatedLayout = this.collectItem(layout, rootId, rootItem.children, contentIds);
                    if (contentIds.length > 0) {
                        updatedLayout = updatedLayout.setIn(['content', rootId, 'gridType'], jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab);
                        updatedLayout = updatedLayout.setIn(['content', rootId, 'children'], contentIds);
                    }
                }
                return updatedLayout;
            }
            return layout;
        };
        this.collectItem = (layout, rootId, childIds, itemList) => {
            let updatedLayout = layout;
            childIds === null || childIds === void 0 ? void 0 : childIds.forEach(itemId => {
                var _a;
                if (!layout.content[itemId].isPending) {
                    const item = layout.content[itemId];
                    if (item.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column && item.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row && item.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
                        itemList.push(itemId);
                        updatedLayout = updatedLayout.setIn(['content', itemId, 'parent'], rootId);
                    }
                    else if (((_a = item.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                        updatedLayout = this.collectItem(updatedLayout, rootId, item.children, itemList);
                    }
                }
            });
            return updatedLayout;
        };
    }
    transformLayoutItem(item, index, fromLayoutId, toLayoutId, fromSizeMode, toSizeMode) {
        return { index, item };
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/builder/column-hint.tsx":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/builder/column-hint.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColumnHint: () => (/* binding */ ColumnHint)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/** @jsx jsx */

function ColumnHint(props) {
    const { builderTheme, visible, gutter = 0 } = props;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        pointer-events: none;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0px;
        position: absolute;
        z-index: 1;
        display: ${visible ? 'flex' : 'none'};
      ` }, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].map(key => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { key: key, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              width: 8.333333%;
            ` },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                padding-left: ${gutter / 2}px;
                padding-right: ${gutter / 2}px;
                height: 100%;
                width: 100%;
                overflow: hidden;
              ` },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                  transform: translateY(-5%);
                  border: 1px dashed ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(builderTheme.colors.palette.dark[300], 0.6)};
                  height: 110%;
                  width: 100%;
                ` }))));
    })));
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/builder/layout-item.tsx":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/builder/layout-item.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RowItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/row-layout/utils.ts");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _builder_layout_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/layout-item */ "./jimu-layouts/lib/builder/layout-item.tsx");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/row-layout/common/util.ts");
/** @jsx jsx */









const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  max-height: 40px;
  height: 20%;
  right: 0;
  z-index: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutZIndex.BoundaryDropArea};
  display: flex;
  pointer-events: all;
  display: flex;

  &.drop-active {
    background: transparent !important;
  }

  body:not(.design-mode) & {
    display: none !important;
  }
`;
const topDropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  ${dropareaStyle};
  top: 0;
`;
const bottomDropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  ${dropareaStyle};
  bottom: 0;
`;
class RowItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            isResizing: false,
            dh: 0
        };
        this.handleResizeStart = (id, initW, initH) => {
            this.initWidth = initW;
            this.initHeight = initH;
            this.props.onResizeStart(id);
            this.setState({
                isResizing: true
            });
        };
        this.handleResizing = (id, x, y, dw, dh) => {
            this.props.onResizing(id, x, y, dw, dh);
            this.setState({
                dh,
                isResizing: true
            });
        };
        this.handleResizeEnd = (id, x, y, dw, dh, shiftKey) => {
            const { layoutItem } = this.props;
            this.props.onResizeEnd(id, x, y, dw, dh, layoutItem);
            this.setState({
                isResizing: false,
                dh: 0
            });
        };
        this.handleDropAtTop = (draggingItem, containerRect, itemRect) => {
            this.dropAtBoundary(draggingItem, containerRect, itemRect, 'top');
        };
        this.handleDropAtBottom = (draggingItem, containerRect, itemRect) => {
            this.dropAtBoundary(draggingItem, containerRect, itemRect, 'bottom');
        };
        this.dropAtBoundary = (draggingItem, containerRect, itemRect, side) => {
            let appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)();
            (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_4__.mergeWidgetsIntoColumn)(appConfigAction.appConfig, draggingItem, containerRect, itemRect, {
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItemId
            }, side).then(({ updatedAppConfig }) => {
                appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_2__.getAppConfigAction)(updatedAppConfig);
                appConfigAction.exec();
            }).finally(null);
        };
        this.fakeTopLayouts = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${this.props.layoutId}_${this.props.layoutItemId}_tlarge`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${this.props.layoutId}_${this.props.layoutItemId}_tmedium`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${this.props.layoutId}_${this.props.layoutItemId}_tsmall`
        });
        this.fakeBottomLayouts = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large]: `${this.props.layoutId}_${this.props.layoutItemId}_blarge`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium]: `${this.props.layoutId}_${this.props.layoutItemId}_bmedium`,
            [jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small]: `${this.props.layoutId}_${this.props.layoutItemId}_bsmall`
        });
    }
    isFunctionalWidget() {
        var _a, _b, _c;
        const { layoutItem } = this.props;
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            let isLayoutWidget = false;
            const widget = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig) === null || _a === void 0 ? void 0 : _a.widgets) === null || _b === void 0 ? void 0 : _b[layoutItem.widgetId];
            if (((_c = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _c === void 0 ? void 0 : _c.properties) != null) {
                isLayoutWidget =
                    widget.manifest.widgetType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout ||
                        widget.manifest.properties.hasEmbeddedLayout;
            }
            return !isLayoutWidget;
        }
        return false; // layoutItem.type is LayoutItemType.Section
    }
    getStyle(itemSetting) {
        const { gutter, layoutItem, isMultiRow } = this.props;
        const { dh, isResizing } = this.state;
        const bbox = layoutItem.bbox;
        const sign = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL() ? -1 : 1;
        const mergedStyle = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.calItemHeight)(itemSetting, bbox, isMultiRow);
        if (isResizing && dh !== 0) {
            mergedStyle.height = this.initHeight + dh;
        }
        return _common_util__WEBPACK_IMPORTED_MODULE_8__.getItemStyle(isMultiRow, sign, gutter, mergedStyle, itemSetting);
    }
    render() {
        var _a;
        const { order, span, offset, layoutId, layoutItem, draggable, resizable, selectable } = this.props;
        if (layoutItem == null || layoutItem.isPending) {
            return null;
        }
        const itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_ROW_ITEM_SETTING, layoutItem.setting);
        const isRatio = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.shouldUseAspectRatio(itemSetting);
        const heightMode = (_a = itemSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height;
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('row-layout-item d-flex', `col-${span}`, `offset-${offset}`, `order-${order}`, {
            'fix-height': heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom
        });
        const canDropAtBoundary = this.isFunctionalWidget();
        const highlightStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: 100%;
      height: 10px;
      background: ${this.props.builderTheme.colors.palette.primary[700]};
    `;
        const ratio = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.parseAspectRatio(itemSetting.aspectRatio);
        const oneByOneAnimationProps = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.handleOnebyOneAnimation(this.props);
        const [cssStyle, transform] = this.getStyle(itemSetting);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_layout_item__WEBPACK_IMPORTED_MODULE_6__["default"], Object.assign({ css: cssStyle, style: { transform }, layoutId: layoutId, layoutItemId: layoutItem.id, onResizeStart: this.handleResizeStart, onResizing: this.handleResizing, onResizeEnd: this.handleResizeEnd, left: true, right: true, top: false, bottom: heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom && !isRatio, draggable: draggable, resizable: resizable, selectable: selectable, onClick: this.props.onClick, className: mergedClass, forceAspectRatio: isRatio, aspectRatio: ratio, autoHeight: heightMode === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto }, oneByOneAnimationProps),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                canDropAtBoundary &&
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_5__.DropArea, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                ${topDropareaStyle};
              `, layouts: this.fakeTopLayouts, highlightDragover: true, onDrop: this.handleDropAtTop },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: highlightStyle })),
                canDropAtBoundary &&
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_5__.DropArea, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                ${bottomDropareaStyle};
              `, layouts: this.fakeBottomLayouts, highlightDragover: true, onDrop: this.handleDropAtBottom },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `${highlightStyle};position: absolute; bottom:0;` })))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/builder/layout-service.ts":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/builder/layout-service.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RowLayoutService: () => (/* binding */ RowLayoutService)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/menu/common-menu */ "./jimu-layouts/lib/builder/menu/common-menu.tsx");
/* harmony import */ var _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../builder/menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/menu/screen-menu */ "./jimu-layouts/lib/builder/menu/screen-menu.tsx");






const commonMenu = [_builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.duplicateMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.floatingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.pendingMenuItem, _builder_menu_common_menu__WEBPACK_IMPORTED_MODULE_3__.deleteMenuItem];
const sectionMenu = [].concat(_builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__.sectionMenuItems, commonMenu);
class RowLayoutService extends jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.BaseLayoutService {
    removeItemFromOrder(appConfig, layoutInfo) {
        const { layoutId, layoutItemId } = layoutInfo;
        const layoutJson = appConfig.layouts[layoutId];
        if (!(layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.order)) {
            return appConfig;
        }
        // remove it from order list
        let order = [].concat(layoutJson.order);
        order = order.filter(itemId => itemId !== layoutItemId);
        return appConfig.setIn(['layouts', layoutId, 'order'], order);
    }
    afterItemMoved(appConfig, layoutInfo, toLayoutId) {
        let updatedAppConfig = super.afterItemMoved(appConfig, layoutInfo, toLayoutId);
        updatedAppConfig = this.removeItemFromOrder(updatedAppConfig, layoutInfo);
        return this.clearEmptyRowInFlowLayout(updatedAppConfig, layoutInfo);
    }
    afterItemRemoved(appConfig, layoutInfo) {
        let updatedAppConfig = super.afterItemRemoved(appConfig, layoutInfo);
        updatedAppConfig = this.removeItemFromOrder(updatedAppConfig, layoutInfo);
        return this.clearEmptyRowInFlowLayout(updatedAppConfig, layoutInfo);
    }
    duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context) {
        const result = super.duplicateItemInSameLayout(appConfig, layoutInfo, sizeMode, context);
        let updatedAppConfig = result[0];
        const newItemId = result[1];
        // maintain order
        const layoutJson = updatedAppConfig.layouts[layoutInfo.layoutId];
        const order = [].concat(layoutJson.order);
        const index = order.indexOf(layoutInfo.layoutItemId);
        order.splice(index, 1, layoutInfo.layoutItemId, newItemId);
        updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutInfo.layoutId, 'order'], order);
        // offset
        updatedAppConfig = this.offsetDupliateItem(updatedAppConfig, layoutInfo.layoutId);
        return [updatedAppConfig, newItemId];
    }
    getTocStructure(appConfig, layoutId) {
        var _a;
        const layoutJson = appConfig.layouts[layoutId];
        const sizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode();
        if (((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.order) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            const order = [].concat(layoutJson.order);
            return order.filter(itemId => {
                const item = layoutJson.content[itemId];
                return !item.isPending;
            }).map((layoutItemId) => {
                const item = layoutJson.content[layoutItemId];
                const service = new jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.ContentServiceWrapper(appConfig, item);
                return service.toTocNode({ layoutId, layoutItemId }, sizeMode);
            });
        }
        return [];
    }
    processAfterItemAdded(appConfig, draggingItem, layoutInfo, currentSizeMode, containerRect, itemRect, insertIndex) {
        var _a;
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        // only left, width and height are necessary
        const bbox = {
            left: itemRect.left,
            width: itemRect.width,
            height: itemRect.height
        };
        if (((_a = draggingItem.layoutInfo) === null || _a === void 0 ? void 0 : _a.layoutId) !== layoutInfo.layoutId) {
            appConfigAction.editLayoutItemProperty(layoutInfo, 'setting.autoProps.height', jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch);
        }
        appConfigAction
            .editLayoutItemProperty(layoutInfo, 'bbox', bbox)
            .adjustOrderOfItem(layoutInfo, insertIndex);
        return appConfigAction.appConfig;
    }
    getToolItems(appConfig, layoutInfo, type) {
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'view') {
            return _builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_4__.viewMenuItems;
        }
        if ((type === null || type === void 0 ? void 0 : type.toLowerCase()) === 'screen') {
            return _builder_menu_screen_menu__WEBPACK_IMPORTED_MODULE_5__.screenMenuItems;
        }
        const layoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.findLayoutItem(appConfig, layoutInfo);
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
            return sectionMenu;
        }
        return commonMenu;
    }
    offsetDupliateItem(appConfig, layoutId) {
        let updatedAppConfig = appConfig;
        const layout = appConfig.layouts[layoutId];
        const getValue = (layoutItemId, prop) => parseInt(updatedAppConfig.layouts[layoutId].content[layoutItemId].bbox[prop], 10);
        const updateValue = (layoutItemId, prop, value) => {
            updatedAppConfig = updatedAppConfig.setIn(['layouts', layoutId, 'content', layoutItemId, 'bbox', prop], value);
        };
        const order = Object.keys(layout.content).sort((a, b) => getValue(a, 'left') - getValue(b, 'left'));
        // compress row items
        let totalWidth = 0;
        for (let i = 0; i < order.length; i++) {
            totalWidth += getValue(order[i], 'width');
        }
        updateValue(order[0], 'left', 0);
        if (totalWidth <= 12) {
            for (let i = 1; i < order.length; i++) {
                updateValue(order[i], 'left', getValue(order[i - 1], 'left') + getValue(order[i - 1], 'width'));
            }
        }
        else {
            // scale down
            const ratio = totalWidth / 12;
            updateValue(order[0], 'width', Math.max(1, Math.floor(getValue(order[0], 'width') / ratio)));
            for (let i = 1; i < order.length; i++) {
                updateValue(order[i], 'left', getValue(order[i - 1], 'left') + getValue(order[i - 1], 'width'));
                updateValue(order[i], 'width', Math.max(1, Math.floor(getValue(order[i], 'width') / ratio)));
            }
        }
        return updatedAppConfig;
    }
    /**
     * If row layout is in the flow page, and the last item of this row is removed. The row needs to be removed too.
     * @param appConfig
     * @param removedLayoutInfo
     * @returns
     */
    clearEmptyRowInFlowLayout(appConfig, removedLayoutInfo) {
        var _a, _b, _c;
        const layout = appConfig.layouts[removedLayoutInfo.layoutId];
        const contentLength = (_b = (_a = layout === null || layout === void 0 ? void 0 : layout.order) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0;
        if (contentLength > 0) {
            return appConfig;
        }
        const widgetId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.searchUtils.getWidgetIdThatUseTheLayoutId(appConfig, removedLayoutInfo.layoutId);
        if (widgetId) {
            const widgetJson = appConfig.widgets[widgetId];
            const widgetName = (_c = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _c === void 0 ? void 0 : _c.name;
            if (widgetName === 'row') {
                // check if this row widget is a child of Flow layout
                const sizeMode = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getCurrentSizeMode();
                const parentLayoutInfo = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.widgetService.findParent(appConfig, widgetId, sizeMode);
                if (parentLayoutInfo) {
                    const parentLayoutJson = appConfig.layouts[parentLayoutInfo.layoutId];
                    if ((parentLayoutJson === null || parentLayoutJson === void 0 ? void 0 : parentLayoutJson.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
                        const layoutService = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(parentLayoutJson.type);
                        return layoutService.removeItem(appConfig, parentLayoutInfo, sizeMode, true, false);
                    }
                }
            }
        }
        return appConfig;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/builder/layout.tsx":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/builder/layout.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/row-layout/types.ts");
/* harmony import */ var _row__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./row */ "./jimu-layouts/lib/row-layout/builder/row.tsx");
/** @jsx jsx */






class RowLayout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.onResize = (width, height) => {
            var _a;
            if (this.props.browserSizeMode !== this.props.mainSizeMode) {
                return;
            }
            if (height === 0) {
                return;
            }
            const { widgetId } = this.props;
            if (((_a = window.runtimeInfo.widgets) === null || _a === void 0 ? void 0 : _a[widgetId]) != null) {
                window.runtimeInfo.widgets[widgetId].height = height;
            }
            else {
                window.runtimeInfo.widgets[widgetId] = { height };
            }
        };
        this.handleDebounceResize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(this.onResize, 200);
    }
    findExtension() {
        const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(`${jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer}`);
        if ((exts === null || exts === void 0 ? void 0 : exts.length) > 0) {
            const ext = exts.find(item => item.layoutType === 'ROW');
            this.layoutTransform = ext === null || ext === void 0 ? void 0 : ext.transformLayout;
        }
    }
    collectRowItems() {
        var _a;
        const { layout, layouts, browserSizeMode, mainSizeMode } = this.props;
        if (this.layoutTransform == null) {
            this.findExtension();
        }
        let targetLayout = layout;
        const viewOnly = layouts[browserSizeMode] !== layout.id;
        if (viewOnly && this.layoutTransform != null) {
            targetLayout = this.layoutTransform(layout, mainSizeMode, browserSizeMode, jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.getAppConfig());
        }
        this.finalLayout = targetLayout;
        const content = (_a = targetLayout.order) !== null && _a !== void 0 ? _a : [];
        const rows = [];
        let row = [];
        let rowIndex = 0;
        rows.push(row);
        content.forEach((itemId) => {
            if (targetLayout.content[itemId].isPending) {
                return;
            }
            const bbox = targetLayout.content[itemId].bbox;
            const left = parseInt(bbox.left, 10);
            const rowNum = Math.floor(left / _types__WEBPACK_IMPORTED_MODULE_4__.TOTAL_COLS);
            if (rowNum > rowIndex) {
                row = [];
                rowIndex = rowNum;
                rows.push(row);
            }
            row.push(itemId);
        });
        return rows;
    }
    createRow() {
        const { layout, layouts } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_row__WEBPACK_IMPORTED_MODULE_5__.Row, { layouts: layouts, layout: layout, transformedLayout: this.finalLayout, isMultiRow: this.numOfRows > 1 }, this.props.children));
    }
    render() {
        var _a, _b;
        const { layout, className } = this.props;
        const layoutSetting = (_a = layout.setting) !== null && _a !== void 0 ? _a : _default_setting__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_ROW_LAYOUT_SETTING;
        const style = (_b = layoutSetting.style) !== null && _b !== void 0 ? _b : _default_setting__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_ROW_LAYOUT_SETTING.style;
        this.numOfRows = this.collectRowItems().length;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout d-flex', className), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          width: 100%;
          padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(style.padding)};
        `, "data-layoutid": layout.id },
            this.createRow(),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: this.handleDebounceResize })));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.utils.mapStateToLayoutProps)(RowLayout));


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/builder/row-item-setting.tsx":
/*!******************************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/builder/row-item-setting.tsx ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RowItemSetting)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ "jimu-ui/advanced/setting-components");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/style-setting-components */ "jimu-ui/advanced/style-setting-components");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/common-transform-setting */ "./jimu-layouts/lib/builder/common-transform-setting.tsx");
/* harmony import */ var _builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/common-layout-item-setting */ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/** @jsx jsx */








const inputStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 72px`;
const sizeEditorStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width: 100px;`;
const heightModes = [
    jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Auto,
    jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch,
    jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom
];
const heightModesWithoutAuto = [
    jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch,
    jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Custom
];
class RowItemSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.handleAlignChange = (e) => {
            this.updateStyle('alignSelf', e.target.value);
        };
        this.handleHeightChange = (value) => {
            let bbox = this.props.layoutItem.bbox;
            const { distance, unit } = value;
            const originalValue = bbox.height;
            const contaienrRect = this.getSizeOfContainer();
            let newValue = distance.toFixed(2);
            if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(originalValue) && unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PIXEL) {
                // change from percentage to pixel
                if (contaienrRect != null) {
                    newValue = Math.round((parseFloat(originalValue) * contaienrRect.height) / 100);
                }
            }
            else if (!jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(originalValue) &&
                unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
                // change from pixel to percentage
                if (contaienrRect != null) {
                    newValue = ((parseFloat(originalValue) * 100) /
                        contaienrRect.height).toFixed(4);
                }
            }
            bbox = bbox.set('height', unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE ? `${newValue}%` : `${newValue}px`);
            this.props.onPosChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, bbox);
        };
        this.handleHeightModeChange = (mode) => {
            var _a;
            const setting = (_a = this.props.layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.setIn(['autoProps', 'height'], mode));
        };
        this.updateAspectSetting = (heightMode) => {
            var _a;
            let setting = (_a = this.props.layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            if (setting.heightMode === 'fit') { // back compatible, save this setting in autoProps
                setting = setting.setIn(['autoProps', 'height'], jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch);
            }
            setting = setting.set('heightMode', heightMode);
            if (heightMode === 'ratio') {
                const itemRect = this.getSizeOfItem();
                if (itemRect != null) {
                    setting = setting.set('aspectRatio', Number((itemRect.height / itemRect.width).toFixed(2)));
                }
            }
            else {
                const bbox = this.props.layoutItem.bbox;
                const rect = this.getSizeOfItem();
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.utils.isPercentage(bbox.height)) {
                    const contaienrRect = this.getSizeOfContainer();
                    this.props.onPosChange({
                        layoutId: this.props.layoutId,
                        layoutItemId: this.props.layoutItem.id
                    }, bbox.set('height', `${((rect.height * 100) / contaienrRect.height).toFixed(4)}%`));
                }
                else {
                    this.props.onPosChange({
                        layoutId: this.props.layoutId,
                        layoutItemId: this.props.layoutItem.id
                    }, bbox.set('height', `${Math.round(rect.height)}px`));
                }
            }
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.handleAspectRatioChange = (newRatio) => {
            var _a;
            let setting = (_a = this.props.layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            setting = setting.set('aspectRatio', newRatio);
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting);
        };
        this.handleOffsetXChange = (value) => {
            var _a;
            const setting = (_a = this.props.layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.set('offsetX', value));
        };
        this.handleOffsetYChange = (value) => {
            var _a;
            const setting = (_a = this.props.layoutItem.setting) !== null && _a !== void 0 ? _a : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
            this.props.onSettingChange({
                layoutId: this.props.layoutId,
                layoutItemId: this.props.layoutItem.id
            }, setting.set('offsetY', value));
        };
        this.formatMessage = (id) => {
            return this.props.formatMessage(id);
        };
    }
    updateStyle(key, value) {
        var _a;
        const { layoutItem } = this.props;
        const setting = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)((_a = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) !== null && _a !== void 0 ? _a : {});
        this.props.onSettingChange({
            layoutId: this.props.layoutId,
            layoutItemId: this.props.layoutItem.id
        }, setting.setIn(['style', key], value));
    }
    getSizeOfContainer() {
        const layoutElem = this.querySelector(`div.row-layout[data-layoutid="${this.props.layoutId}"]`);
        if (layoutElem != null) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    getSizeOfItem() {
        const { layoutId, layoutItem } = this.props;
        // not only widget, but also for section and placeholder
        const layoutElem = this.querySelector(`div.exb-rnd[data-layoutid="${layoutId}"][data-layoutitemid="${layoutItem.id}"] > div.layout-item-content`);
        if (layoutElem != null) {
            return layoutElem.getBoundingClientRect();
        }
        return null;
    }
    querySelector(selector) {
        var _a;
        const appFrame = document.querySelector(`iframe[name="${jimu_core__WEBPACK_IMPORTED_MODULE_0__.APP_FRAME_NAME_IN_BUILDER}"]`);
        if (appFrame != null) {
            const appFrameDoc = (_a = appFrame.contentDocument) !== null && _a !== void 0 ? _a : appFrame.contentWindow.document;
            return appFrameDoc.querySelector(selector);
        }
        return null;
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .align-select {
        .dropdown-button,
        .dropdown-button:hover {
          height: 26px;
        }
      }
    `;
    }
    render() {
        var _a, _b, _c, _d;
        const { layoutId, layoutItem, isLockLayout, supportAutoSize } = this.props;
        if (layoutItem == null) {
            return null;
        }
        const itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_ROW_ITEM_SETTING, layoutItem.setting);
        const bbox = layoutItem.bbox;
        const style = (_a = itemSetting.style) !== null && _a !== void 0 ? _a : {};
        const heightMode = (_c = (_b = itemSetting.autoProps) === null || _b === void 0 ? void 0 : _b.height) !== null && _c !== void 0 ? _c : jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch;
        const keepAspectRatio = itemSetting.heightMode === 'ratio';
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'row-item-setting', css: this.getStyle() },
            !isLockLayout && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingSection, { role: 'group', title: this.formatMessage('size'), "aria-label": this.formatMessage('size') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { role: 'group', label: this.formatMessage('height'), "aria-label": this.formatMessage('height') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: sizeEditorStyle },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__.SizeEditor, { label: 'H', mode: heightMode, sizeModes: supportAutoSize ? heightModes : heightModesWithoutAuto, value: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.stringOfLinearUnit(bbox.height), onChange: this.handleHeightChange, onModeChange: this.handleHeightModeChange, disabled: keepAspectRatio }))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, null,
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { "aria-label": this.formatMessage('keepAspectRatio'), checked: keepAspectRatio, onChange: e => {
                                this.updateAspectSetting(e.target.checked ? 'ratio' : 'fixed');
                            }, className: 'mr-2' }),
                        this.formatMessage('keepAspectRatio')),
                    keepAspectRatio && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { label: this.formatMessage('aspectRatio'), "aria-label": this.formatMessage('aspectRatio') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_style_setting_components__WEBPACK_IMPORTED_MODULE_3__.InputRatio, { value: itemSetting.aspectRatio, style: { width: 100 }, onChange: this.handleAspectRatioChange }))),
                    heightMode !== jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_4__.LayoutItemSizeModes.Stretch && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { label: this.formatMessage('align') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": this.formatMessage('align'), className: 'align-select', css: sizeEditorStyle, value: (_d = style.alignSelf) !== null && _d !== void 0 ? _d : 'flex-start', onChange: this.handleAlignChange },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'flex-start' }, this.formatMessage('T')),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'flex-end' }, this.formatMessage('B')),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'center' }, this.formatMessage('center')))))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingSection, { role: 'group', title: this.formatMessage('position'), "aria-label": this.formatMessage('position') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_5__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, setting: layoutItem.setting, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { label: this.formatMessage('offsetX'), "aria-label": this.formatMessage('offsetX') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { css: inputStyle, value: itemSetting.offsetX, onChange: this.handleOffsetXChange, precision: 0, size: 'sm' })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_1__.SettingRow, { label: this.formatMessage('offsetY'), "aria-label": this.formatMessage('offsetY') },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { css: inputStyle, value: itemSetting.offsetY, onChange: this.handleOffsetYChange, precision: 0, size: 'sm' }))))),
            (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget || layoutItem.sectionId != null) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_6__["default"], { layoutId: layoutId, layoutItemId: layoutItem.id, isSection: layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, style: this.props.style, onStyleChange: this.props.onStyleChange, onSettingChange: this.props.onSettingChange, formatMessage: this.props.formatMessage }))));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/builder/row.tsx":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/builder/row.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Row: () => (/* binding */ Row)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-for-builder */ "jimu-for-builder");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/row-layout/builder/layout-item.tsx");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/* harmony import */ var _builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../builder/interactive/canvas-pane */ "./jimu-layouts/lib/builder/interactive/canvas-pane.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils */ "./jimu-layouts/lib/row-layout/builder/utils.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/row-layout/types.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/row-layout/utils.ts");
/* harmony import */ var _column_hint__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./column-hint */ "./jimu-layouts/lib/row-layout/builder/column-hint.tsx");
/** @jsx jsx */












const dropareaStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`;
const guideOverlay = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  ${dropareaStyle};
  bottom: 0;
  top: 0;
  z-index: ${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutZIndex.DragMoveTip};
  pointer-events: none;
`;
class Row extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            // dragEnterred: false,
            isResizing: false,
            updatingRects: null,
            isDragoverCenter: false
        };
        // this.childrenRef = {};
        jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.autoBindHandlers(this, [
            'handleItemResizeStart',
            'handleItemResizing',
            'handleItemResizeEnd',
            'handleDrop',
            'handleDragOver',
            'handleDragEnter',
            'handleDragLeave',
            'handleToggleDragoverCenterEffect'
        ]);
        this.flipLeftRight = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isRTL();
    }
    componentDidMount() {
        this.canvasPane = new _builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_7__.CanvasPane(this.guideDragOverRef);
    }
    handleItemResizeStart(id) {
        this.domRect = this.ref.getBoundingClientRect();
        this.setState({
            isResizing: true
        });
    }
    handleItemResizing(id, x, y, dw, dh) {
        const colWidth = this.domRect.width / _types__WEBPACK_IMPORTED_MODULE_9__.TOTAL_COLS;
        const deltaX = Math.round(x / colWidth);
        const deltaW = Math.round(dw / colWidth);
        const resizingRects = (0,_utils__WEBPACK_IMPORTED_MODULE_8__.resizeItem)(id, deltaX, deltaW, this.childRects);
        this.setState({
            updatingRects: resizingRects
        });
    }
    handleItemResizeEnd(id, x, y, dw, dh, layoutItem) {
        const { layout } = this.props;
        const colWidth = this.domRect.width / _types__WEBPACK_IMPORTED_MODULE_9__.TOTAL_COLS;
        const deltaX = Math.round(x / colWidth);
        const deltaW = Math.round(dw / colWidth);
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const resizingRects = (0,_utils__WEBPACK_IMPORTED_MODULE_8__.resizeItem)(id, deltaX, deltaW, this.childRects);
        resizingRects.forEach((rectItem) => {
            const bbox = layout.content[rectItem.id].bbox;
            let updatedHeight = bbox.height;
            if (rectItem.id === id) {
                if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.utils.isPercentage(bbox.height)) {
                    updatedHeight = `${(parseFloat(rectItem.height) + (dh * 100 / this.domRect.height)).toFixed(4)}%`;
                }
                else {
                    updatedHeight = `${Math.round(parseFloat(rectItem.height) + dh)}px`;
                }
            }
            const rect = {
                left: rectItem.left,
                width: rectItem.width,
                height: updatedHeight
            };
            appConfigAction.editLayoutItemProperty({
                layoutId: layout.id,
                layoutItemId: rectItem.id
            }, 'bbox', rect);
        });
        appConfigAction.exec();
        this.setState({
            isResizing: false,
            updatingRects: null
        });
    }
    handleToggleDragoverCenterEffect(value) {
        this.referenceId = null;
        if (value) {
            this.collectBounds();
        }
        this.setState({
            isDragoverCenter: value
        });
    }
    handleDragOver(draggingItem, draggingElement, containerRect, itemRect, clientX, clientY) {
        var _a;
        // const { layout } = this.props;
        const layoutInfo = (_a = draggingItem.layoutInfo) !== null && _a !== void 0 ? _a : { layoutId: null };
        const updatedRects = this.reCalculateRects(draggingItem, containerRect, itemRect, clientX);
        let targetRect;
        // eslint-disable-next-line
        updatedRects.some((childRect) => {
            if (childRect.id == null || (childRect.layoutId === layoutInfo.layoutId && childRect.id === layoutInfo.layoutItemId)) {
                targetRect = childRect;
                return true;
            }
        });
        let available = true;
        let insertPos = targetRect.left;
        // eslint-disable-next-line
        this.flippedChildRects.some((childRect) => {
            if (childRect.layoutId === targetRect.layoutId && childRect.id === targetRect.id) {
                // eslint-disable-next-line
                return;
            }
            if (childRect.left <= targetRect.left && (childRect.left + childRect.width) > targetRect.left) {
                available = false;
            }
            if (!available) {
                const updatedChildRect = updatedRects.find(item => item.layoutId === childRect.layoutId && item.id === childRect.id);
                if (updatedChildRect.left + updatedChildRect.width <= targetRect.left) {
                    insertPos = childRect.left + childRect.width;
                }
                else {
                    insertPos = childRect.left;
                }
                return true;
            }
        });
        this.dragInsertPos = insertPos;
        this.canvasPane.clear();
        if (available) {
            this.canvasPane.drawRect({
                left: insertPos * this.colWidth + this.space / 2,
                top: 0,
                width: targetRect.width * this.colWidth - this.space,
                height: itemRect.height // use the real height of dragging item
            });
        }
        else {
            const restrainedInsertPos = Math.min(containerRect.width - this.space / 2, Math.max(0, insertPos * this.colWidth - this.space / 2));
            this.canvasPane.drawRect({
                left: restrainedInsertPos,
                top: 0,
                width: 10,
                height: containerRect.height
            });
        }
    }
    handleDragEnter() {
        this.canvasPane.setSize(this.ref.clientWidth, this.ref.clientHeight);
        this.canvasPane.setColor(jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(this.builderTheme.colors.palette.primary[700], 0.5));
    }
    handleDragLeave() {
        this.canvasPane.clear();
    }
    getConfig() {
        var _a;
        const { layout } = this.props;
        return (_a = layout.setting) !== null && _a !== void 0 ? _a : _default_setting__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_ROW_LAYOUT_SETTING;
    }
    reCalculateRects(draggingItem, containerRect, itemRect, clientX) {
        var _a, _b;
        const layoutInfo = (_a = draggingItem.layoutInfo) !== null && _a !== void 0 ? _a : { layoutId: null };
        const { layout } = this.props;
        const config = this.getConfig();
        this.space = (_b = config.space) !== null && _b !== void 0 ? _b : 0;
        // this.paddings = styleUtils.expandStyleArray(lodash.getValue(config, 'style.padding.number', [0]));
        // width should add the marginLeft and marginRight, which equals to this.space
        const rowWidth = this.maxPageWidth > 0 ? Math.min(this.maxPageWidth, containerRect.width) : containerRect.width;
        const cursorLeft = clientX - (containerRect.width - rowWidth) / 2;
        const itemLeft = itemRect.left - (containerRect.width - rowWidth) / 2;
        this.colWidth = rowWidth / _types__WEBPACK_IMPORTED_MODULE_9__.TOTAL_COLS;
        const cursorLeftInRow1 = Math.round(cursorLeft / this.colWidth);
        const itemLeftInRow = Math.round(itemLeft / this.colWidth);
        const span = Math.max(1, Math.ceil(itemRect.width / this.colWidth)); // at least 1
        const cursorLeftInRow = (0,_utils__WEBPACK_IMPORTED_MODULE_8__.snapLeft)(layout.id, draggingItem, itemLeftInRow, span, cursorLeftInRow1, this.flippedChildRects);
        if (draggingItem.id == null && this.isInRow(layoutInfo)) { // move in the same layout, exclude the pending item
            return (0,_utils__WEBPACK_IMPORTED_MODULE_8__.moveItem)(layoutInfo.layoutItemId, cursorLeftInRow, this.flippedChildRects);
        }
        // drag from different layout or from widget list
        return (0,_utils__WEBPACK_IMPORTED_MODULE_8__.insertItem)({
            width: span,
            height: itemRect.height,
            layoutId: layoutInfo.layoutId,
            id: layoutInfo.layoutItemId
        }, cursorLeftInRow, this.flippedChildRects);
    }
    handleDrop(draggingItem, containerRect, itemRect
    // clientX: number,
    // clientY: number,
    ) {
        const { layout } = this.props;
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)();
        const { addedItemRect, insertIndex, appConfig } = this.calDropPosition(appConfigAction.appConfig, draggingItem, containerRect, itemRect, false);
        if (addedItemRect != null) {
            (0,_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_6__.addItemToLayout)(appConfig, draggingItem, layout.id).then((result) => {
                const { layoutInfo, updatedAppConfig } = result;
                const service = jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.LayoutServiceProvider.getInstance().getServiceByType(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.RowLayout);
                const outAppConfig = service.processAfterItemAdded(updatedAppConfig, draggingItem, layoutInfo, null, containerRect, addedItemRect, insertIndex);
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(outAppConfig, layoutInfo));
            }).finally(null);
        }
        else {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.layoutChanged(appConfig, draggingItem.layoutInfo));
        }
        this.canvasPane.clear();
        // this.hideColGuide();
    }
    calDropPosition(appConfig, draggingItem, containerRect, itemRect, isPaste) {
        var _a;
        // const clientX = itemRect.left;
        const rowWidth = this.maxPageWidth > 0 ? Math.min(this.maxPageWidth, containerRect.width) : containerRect.width;
        // const cursorLeft = clientX - (containerRect.width - rowWidth) / 2;
        // const itemLeft = itemRect.left - (containerRect.width - rowWidth) / 2;
        const layoutInfo = (_a = draggingItem.layoutInfo) !== null && _a !== void 0 ? _a : { layoutId: null };
        const { layout } = this.props;
        const colWidth = rowWidth / _types__WEBPACK_IMPORTED_MODULE_9__.TOTAL_COLS;
        // let cursorLeftInRow = Math.round(cursorLeft / colWidth);
        const cursorLeftInRow = this.dragInsertPos;
        // const itemLeftInRow = Math.round(itemLeft / this.colWidth);
        const span = Math.max(1, Math.ceil(itemRect.width / colWidth)); // at least 1
        // cursorLeftInRow = snapLeft(layout.id, draggingItem, itemLeftInRow, span, cursorLeftInRow, this.flippedChildRects);
        const appConfigAction = (0,jimu_for_builder__WEBPACK_IMPORTED_MODULE_1__.getAppConfigAction)(appConfig);
        let updatedRects;
        if (!isPaste && draggingItem.id == null && this.isInRow(layoutInfo)) { // move in the same row
            updatedRects = (0,_utils__WEBPACK_IMPORTED_MODULE_8__.moveItem)(layoutInfo.layoutItemId, cursorLeftInRow, this.flippedChildRects);
        }
        else { // drag from different layout or from widget list
            updatedRects = (0,_utils__WEBPACK_IMPORTED_MODULE_8__.insertItem)({
                width: span,
                height: itemRect.height,
                layoutId: layoutInfo.layoutId,
                id: layoutInfo.layoutItemId
            }, cursorLeftInRow, this.flippedChildRects);
        }
        let addedItemRect;
        let insertIndex;
        updatedRects.forEach((rectItem, index) => {
            var _a;
            let rect = {
                left: rectItem.left,
                width: rectItem.width,
                height: rectItem.height
            };
            if (this.flipLeftRight) {
                rect = (0,_utils__WEBPACK_IMPORTED_MODULE_10__.flipRowItemPos)(rect);
            }
            if (rectItem.layoutId === layout.id) { // item that is in the same layout
                appConfigAction.editLayoutItemProperty({
                    layoutId: rectItem.layoutId,
                    layoutItemId: rectItem.id
                }, 'bbox', rect);
                if (rectItem.id === ((_a = draggingItem.layoutInfo) === null || _a === void 0 ? void 0 : _a.layoutItemId) && draggingItem.id != null) {
                    // set pending to false
                    appConfigAction.setLayoutItemToPending({
                        layoutId: rectItem.layoutId,
                        layoutItemId: rectItem.id
                    }, false);
                }
            }
            else {
                const firstIndexInRow = 0;
                addedItemRect = rect;
                insertIndex = firstIndexInRow + index;
            }
        });
        return { addedItemRect, insertIndex, appConfig: appConfigAction.appConfig };
    }
    isInRow(layoutInfo) {
        const { layout } = this.props;
        return (layoutInfo === null || layoutInfo === void 0 ? void 0 : layoutInfo.layoutId) === layout.id;
    }
    collectBounds() {
        var _a;
        const { transformedLayout } = this.props;
        const content = (_a = transformedLayout.order) !== null && _a !== void 0 ? _a : [];
        this.childRects = [];
        content.forEach((itemId) => {
            var _a, _b;
            if (transformedLayout.content[itemId].isPending) {
                return;
            }
            const bbox = (_b = (_a = transformedLayout.content) === null || _a === void 0 ? void 0 : _a[itemId]) === null || _b === void 0 ? void 0 : _b.bbox;
            if (bbox != null) {
                this.childRects.push({
                    layoutId: transformedLayout.id,
                    id: itemId,
                    left: parseInt(bbox.left, 10),
                    width: parseInt(bbox.width, 10),
                    height: bbox.height
                });
            }
        });
        this.childRects.sort((a, b) => a.left - b.left);
        if (this.flipLeftRight) {
            this.flippedChildRects = [];
            this.childRects.forEach((item) => {
                let rect = {
                    left: item.left,
                    width: item.width,
                    height: item.height
                };
                rect = (0,_utils__WEBPACK_IMPORTED_MODULE_10__.flipRowItemPos)(rect);
                this.flippedChildRects.push({
                    layoutId: item.layoutId,
                    id: item.id,
                    left: rect.left,
                    width: rect.width,
                    height: rect.height
                });
            });
            this.flippedChildRects.sort((a, b) => a.left - b.left);
        }
        else {
            this.flippedChildRects = this.childRects;
        }
        return this.childRects;
    }
    createItem(childRects, index) {
        var _a;
        const { transformedLayout, itemDraggable, itemResizable, itemSelectable, isMultiRow } = this.props;
        const config = this.getConfig();
        const childRect = childRects[index];
        const gutter = (_a = config.space) !== null && _a !== void 0 ? _a : 0;
        let offset;
        if (index === 0) {
            offset = childRect.left;
        }
        else {
            const previousBBox = childRects[index - 1];
            offset = childRect.left - previousBBox.left - previousBBox.width;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_2__["default"], { key: `${childRect.layoutId}_${childRect.id}`, order: index + 1, offset: offset, span: childRect.width, gutter: gutter, isMultiRow: isMultiRow, builderTheme: this.builderTheme, layoutId: transformedLayout.id, layoutItemId: childRect.id, layoutItem: transformedLayout.content[childRect.id], draggable: itemDraggable, resizable: itemResizable, selectable: itemSelectable, 
            // itemDisplaySetting={itemDisplaySetting}
            onResizeStart: this.handleItemResizeStart, onResizing: this.handleItemResizing, onResizeEnd: this.handleItemResizeEnd }));
    }
    render() {
        var _a;
        const { transformedLayout, className } = this.props;
        const { isResizing, isDragoverCenter } = this.state;
        const config = this.getConfig();
        const isDragover = isDragoverCenter;
        let content;
        if (isResizing && this.state.updatingRects != null) {
            content = this.state.updatingRects;
        }
        else {
            this.collectBounds();
            content = this.childRects;
        }
        const gutter = (_a = config.space) !== null && _a !== void 0 ? _a : 0;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.PageContext.Consumer, null, (props) => {
            this.maxPageWidth = props.maxWidth;
            this.builderTheme = props.builderTheme;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('row-layout', className, { 'row-rtl': this.flipLeftRight }), css: _utils__WEBPACK_IMPORTED_MODULE_10__.ROW_STYLE, "data-layoutid": transformedLayout.id },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                width: 100%;
                max-width: ${props.maxWidth > 0 ? `${props.maxWidth}px` : 'none'};
              ` },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: el => (this.ref = el), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                    position: relative;
                    height: 100%;
                    margin-left: ${-gutter / 2}px;
                    margin-right: ${-gutter / 2}px;
                    display: flex;
                    flex-direction: column;
                    .row {
                      overflow: ${this.props.isMultiRow ? 'auto' : 'unset'};
                    }
                    & > .jimu-widget-placeholder {
                      width: calc(100% - ${gutter}px);
                      align-self: center;
                    }
                  ` },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: false } },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('row m-0', {
                                    'flex-nowrap': !this.props.isMultiRow,
                                    'h-100': content.length > 0
                                }), oid: transformedLayout.id, "data-layoutid": transformedLayout.id },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_5__.DropArea, { css: dropareaStyle, layouts: this.props.layouts, highlightDragover: false, onDragEnter: this.handleDragEnter, onDragLeave: this.handleDragLeave, onDragOver: this.handleDragOver, onDrop: this.handleDrop, onToggleDragoverEffect: this.handleToggleDragoverCenterEffect }),
                                content.map((_, index) => this.createItem(content, index)))),
                        content.length === 0 && this.props.children,
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_column_hint__WEBPACK_IMPORTED_MODULE_11__.ColumnHint, { visible: isDragover || isResizing, builderTheme: props.builderTheme, gutter: gutter }),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                      ${guideOverlay};
                      display: ${isDragover ? 'block' : 'none'};
                    `, ref: el => (this.guideDragOverRef = el) })))));
        }));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/builder/utils.ts":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/builder/utils.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   canDrop: () => (/* binding */ canDrop),
/* harmony export */   insertItem: () => (/* binding */ insertItem),
/* harmony export */   moveItem: () => (/* binding */ moveItem),
/* harmony export */   resizeItem: () => (/* binding */ resizeItem),
/* harmony export */   snapLeft: () => (/* binding */ snapLeft)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/row-layout/types.ts");
/* eslint-disable prefer-const */



function canDrop(rects) {
    let used = 0;
    let bigItems = 0;
    rects.forEach(item => {
        used += item.width;
        if (item.width >= 3) {
            bigItems += 1;
        }
    });
    return _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - used >= _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN || bigItems >= _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - used;
}
function indexOfChildRect(id, rects) {
    let index = -1;
    // eslint-disable-next-line
    rects.some((item, idx) => {
        if (item.id === id) {
            index = idx;
            return true;
        }
    });
    return index;
}
/**
 * Calculate the insert position using current mouse position
 * @param droppableLayoutId layoutId of the container
 * @param draggingItem
 * @param itemLeft column index of the item
 * @param itemWidth num of columns
 * @param value column index of the mouse
 * @param allRects
 */
function snapLeft(droppableLayoutId, draggingItem, itemLeft, itemWidth, value, // cursor left
allRects) {
    var _a;
    let left;
    const layoutInfo = (_a = draggingItem.layoutInfo) !== null && _a !== void 0 ? _a : { layoutId: null };
    const sameLayout = layoutInfo.layoutId === droppableLayoutId;
    const conflict = allRects.some(cItem => {
        if (sameLayout && cItem.id === layoutInfo.layoutItemId) {
            return false;
        }
        return ((cItem.left >= itemLeft && cItem.left < itemLeft + itemWidth) ||
            (itemLeft >= cItem.left && itemLeft < cItem.left + cItem.width));
    });
    if (!conflict) { // enough space
        return itemLeft;
    }
    // eslint-disable-next-line
    allRects.some((cItem, index) => {
        if (sameLayout && cItem.id === layoutInfo.layoutItemId) {
            return false;
        }
        const mouseInCItem = value >= cItem.left && value <= cItem.left + cItem.width;
        if (mouseInCItem) {
            if (value >= cItem.left && value < cItem.left + cItem.width / 2) {
                left = cItem.left;
                return true;
            }
            else {
                left = cItem.left + cItem.width;
                return true;
            }
        }
        else {
            // there must be an item that interact with dragging item
            if (itemLeft < cItem.left && itemLeft + itemWidth > cItem.left) {
                let available = 0;
                if (index === 0) {
                    available = cItem.left;
                }
                else {
                    let previousItem;
                    for (let j = index - 1; j >= 0; j -= 1) {
                        previousItem = allRects[j];
                        if (!sameLayout || previousItem.id !== layoutInfo.layoutItemId) {
                            break;
                        }
                    }
                    if (previousItem != null) {
                        available = cItem.left - (previousItem.left + previousItem.width);
                    }
                    else {
                        available = cItem.left;
                    }
                }
                if (available >= itemWidth) {
                    left = cItem.left - itemWidth;
                }
                else {
                    left = cItem.left - available;
                }
                return true;
            }
            if (itemLeft > cItem.left && itemLeft < cItem.left + cItem.width) {
                left = cItem.left + cItem.width;
                return true;
            }
        }
    });
    return left;
}
/**
 *
 * @param id id of the item being resized
 * @param dx num of columns resized at the left side
 * @param dw num of columns resized at the right side
 * @param rects all row items' position and size
 */
// TODO use Immutable IMChildRect
function resizeItem(id, dx, dw, allRects) {
    const rects = allRects.map(item => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(item));
    const index = indexOfChildRect(id, rects);
    if (jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.isRTL()) {
        if (dx !== 0) {
            dx = 0;
        }
        else {
            dx = -dw;
        }
    }
    if (dx > 0) {
        // resize at the left side, decrease width
        const target = rects[index];
        const delta = Math.min(dx, target.width - 1);
        rects[index] = target.set('left', target.left + delta).set('width', target.width - delta);
        return rects;
    }
    if (dx < 0) {
        // resize at the left side, increase width
        let previousSize = 0;
        for (let i = 0; i < index; i += 1) {
            previousSize += Math.min(rects[i].width, _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN);
        }
        const totalAvailable = rects[index].left - previousSize;
        const toExpand = Math.abs(dx);
        if (totalAvailable > 0) {
            let expanded = 0;
            // 1. use gaps available
            for (let i = index; i >= 0; i -= 1) {
                const current = rects[i];
                let gap = 0;
                if (i > 0) {
                    const previous = rects[i - 1];
                    gap = current.left - (previous.left + previous.width);
                }
                else {
                    gap = current.left;
                }
                if (gap === 0) {
                    continue;
                }
                const toMove = expanded + gap >= toExpand ? toExpand - expanded : gap;
                rects[index] = rects[index].set('width', rects[index].width + toMove);
                for (let j = i; j <= index; j += 1) {
                    rects[j] = rects[j].set('left', rects[j].left - toMove);
                }
                if (expanded + gap >= toExpand) {
                    return rects;
                }
                expanded += gap;
            }
            // 2. compact previous items
            if (index > 0) {
                for (let i = index - 1; i >= 0; i -= 1) {
                    const current = rects[i];
                    const gap = current.width - _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN;
                    if (gap <= 0) {
                        continue;
                    }
                    const toMove = expanded + gap >= toExpand ? toExpand - expanded : gap;
                    rects[index] = rects[index].set('width', rects[index].width + toMove);
                    rects[i] = current.set('width', current.width - toMove);
                    for (let j = i + 1; j <= index; j += 1) {
                        rects[j] = rects[j].set('left', rects[j].left - toMove);
                    }
                    if (expanded + gap >= toExpand) {
                        return rects;
                    }
                    expanded += gap;
                }
            }
        }
        return rects;
    }
    if (dw < 0) {
        // resize at the right side, decrease width
        const delta = Math.min(Math.abs(dw), rects[index].width - 1);
        rects[index] = rects[index].set('width', rects[index].width - delta);
        return rects;
    }
    if (dw > 0) {
        // resize at the right side, increase width
        let nextSize = 0;
        for (let i = index + 1; i < rects.length; i += 1) {
            nextSize += Math.min(rects[i].width, _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN);
        }
        const totalAvailable = _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - (rects[index].left + rects[index].width) - nextSize;
        const toExpand = dw;
        if (totalAvailable > 0) {
            let expanded = 0;
            // 1. use gaps available
            for (let i = index; i < rects.length; i += 1) {
                const current = rects[i];
                let gap = 0;
                if (i !== rects.length - 1) {
                    const next = rects[i + 1];
                    gap = next.left - (current.left + current.width);
                }
                else {
                    gap = _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - (current.left + current.width);
                }
                if (gap === 0) {
                    continue;
                }
                const toMove = expanded + gap >= toExpand ? toExpand - expanded : gap;
                rects[index] = rects[index].set('width', rects[index].width + toMove);
                for (let j = index + 1; j <= i; j += 1) {
                    rects[j] = rects[j].set('left', rects[j].left + toMove);
                }
                if (expanded + gap >= toExpand) {
                    return rects;
                }
                expanded += gap;
            }
            // 2. compact following items
            if (index !== rects.length - 1) {
                for (let i = index + 1; i < rects.length; i += 1) {
                    const current = rects[i];
                    const gap = current.width - _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN;
                    if (gap <= 0) {
                        continue;
                    }
                    const toMove = expanded + gap >= toExpand ? toExpand - expanded : gap;
                    rects[index] = rects[index].set('width', rects[index].width + toMove);
                    rects[i] = current.set('width', current.width - toMove);
                    for (let j = index + 1; j <= i; j += 1) {
                        rects[j] = rects[j].set('left', rects[j].left + toMove);
                    }
                    if (expanded + gap >= toExpand) {
                        return rects;
                    }
                    expanded += gap;
                }
            }
        }
        return rects;
    }
    return rects;
}
/**
 * @param id id of the item being moved
 * @param x position to move
 * @param rects all row items' position and size
 */
function moveItem(id, x, allRects) {
    const rects = allRects.map(item => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(item));
    const index = indexOfChildRect(id, rects);
    const target = rects[index];
    rects.splice(index, 1); // clear the space taken by target item
    return insertItem(target, x, rects);
}
function insertItem(rect, pos, allRects) {
    const rects = allRects.map(item => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(item));
    let target = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(rect);
    const x = Math.max(pos, 0);
    target = target.set('left', x);
    if (rects == null || rects.length === 0) {
        target = target.set('width', Math.min(target.width, _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - target.left));
        return [target];
    }
    let insertIndex = rects.length; // rect index that target will insert before
    let end; // the right most column
    const checkpoint = () => {
        if (insertIndex === 0) {
            used = rects[insertIndex].left;
            end = used;
        }
        else {
            const previous = rects[insertIndex - 1];
            used =
                insertIndex < rects.length
                    ? rects[insertIndex].left - (previous.left + previous.width)
                    : _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - (previous.left + previous.width);
            end = previous.left + previous.width + used;
        }
    };
    // eslint-disable-next-line
    rects.some((r, index) => {
        if (x <= r.left) {
            insertIndex = index;
            return true;
        }
    });
    let used = insertIndex < rects.length ? rects[insertIndex].left - x : _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - x;
    if (used >= target.width) {
        rects.splice(insertIndex, 0, target);
        return rects;
    }
    // 0. Is there enough space before the insert pos
    const oldUsed = used;
    checkpoint();
    if (used >= target.width) {
        target = target.set('left', end - target.width);
        rects.splice(insertIndex, 0, target);
        return rects;
    }
    used = oldUsed;
    // 1. take the following gaps
    for (let i = insertIndex; i < rects.length; i += 1) {
        const current = rects[i];
        let gap = 0;
        if (i !== rects.length - 1) {
            const next = rects[i + 1];
            gap = next.left - (current.left + current.width);
        }
        else {
            gap = _types__WEBPACK_IMPORTED_MODULE_2__.TOTAL_COLS - (current.left + current.width);
        }
        if (gap === 0) {
            continue;
        }
        const toMove = used + gap >= target.width ? target.width - used : gap;
        for (let j = insertIndex; j <= i; j += 1) {
            rects[j] = rects[j].set('left', rects[j].left + toMove);
        }
        if (used + gap >= target.width) {
            rects.splice(insertIndex, 0, target);
            return rects;
        }
        used += gap;
    }
    // check gaps
    checkpoint();
    if (used >= target.width) {
        target = target.set('left', end - target.width);
        rects.splice(insertIndex, 0, target);
        return rects;
    }
    // 2. take the previous gaps
    for (let i = insertIndex - 1; i >= 0; i -= 1) {
        const current = rects[i];
        let gap = 0;
        if (i > 0) {
            const previous = rects[i - 1];
            gap = current.left - (previous.left + previous.width);
        }
        else {
            gap = current.left;
        }
        if (gap === 0) {
            continue;
        }
        const toMove = used + gap >= target.width ? target.width - used : gap;
        for (let j = i; j <= insertIndex - 1; j += 1) {
            rects[j] = rects[j].set('left', rects[j].left - toMove);
        }
        if (used + gap >= target.width) {
            target = target.set('left', end - target.width);
            rects.splice(insertIndex, 0, target);
            return rects;
        }
        used += gap;
    }
    // check gaps
    checkpoint();
    if (used >= _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN) {
        target = target.set('left', end - used).set('width', used);
        rects.splice(insertIndex, 0, target);
        return rects;
    }
    // 3. gaps is not enough for the target rect, compact following items
    if (insertIndex !== rects.length) {
        for (let i = insertIndex; i < rects.length; i += 1) {
            const current = rects[i];
            const gap = current.width - _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN;
            if (gap <= 0) {
                continue;
            }
            const toMove = used + gap >= _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN ? _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN - used : gap;
            rects[i] = current.set('width', current.width - toMove);
            for (let j = insertIndex; j <= i; j += 1) {
                rects[j] = rects[j].set('left', rects[j].left + toMove);
            }
            if (used + gap >= _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN) {
                target = target.set('left', rects[insertIndex].left - _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN).set('width', _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN);
                rects.splice(insertIndex, 0, target);
                return rects;
            }
            used += gap;
        }
    }
    // check gaps
    checkpoint();
    if (used >= _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN) {
        target = target.set('left', end - used).set('width', used);
        rects.splice(insertIndex, 0, target);
        return rects;
    }
    // 4. compact previous items
    for (let i = insertIndex - 1; i >= 0; i -= 1) {
        const current = rects[i];
        const gap = current.width - _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN;
        if (gap <= 0) {
            continue;
        }
        const toMove = used + gap >= _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN ? _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN - used : gap;
        rects[i] = current.set('width', current.width - toMove);
        for (let j = i + 1; j <= insertIndex - 1; j += 1) {
            rects[j] = rects[j].set('left', rects[j].left - toMove);
        }
        if (used + gap >= _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN) {
            target = target.set('left', end - _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN).set('width', _types__WEBPACK_IMPORTED_MODULE_2__.MIN_SPAN);
            rects.splice(insertIndex, 0, target);
            return rects;
        }
        used += gap;
    }
    return rects;
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/common/util.ts":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/common/util.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getItemStyle: () => (/* binding */ getItemStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");


function getItemStyle(isMultiRow, sign, gutter, mergedStyle, itemSetting) {
    var _a, _b, _c, _d;
    if (isMultiRow) {
        return [
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        padding: ${gutter / 2}px 0;
        height: ${_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox(mergedStyle, 'height')};
        align-self: ${mergedStyle.alignSelf};
      `,
            itemSetting.offsetX !== 0 || itemSetting.offsetY !== 0
                ? `translate(${((_a = itemSetting.offsetX) !== null && _a !== void 0 ? _a : 0) * sign}px, ${(_b = itemSetting.offsetY) !== null && _b !== void 0 ? _b : 0}px)`
                : null
        ];
    }
    return [
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      padding: 0 ${gutter / 2}px;
      height: ${_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox(mergedStyle, 'height')};
      align-self: ${mergedStyle.alignSelf};
    `,
        itemSetting.offsetX !== 0 || itemSetting.offsetY !== 0
            ? `translate(${((_c = itemSetting.offsetX) !== null && _c !== void 0 ? _c : 0) * sign}px, ${(_d = itemSetting.offsetY) !== null && _d !== void 0 ? _d : 0}px)`
            : null
    ];
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/default-setting.ts":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/default-setting.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_ROW_ITEM_SETTING: () => (/* binding */ DEFAULT_ROW_ITEM_SETTING),
/* harmony export */   DEFAULT_ROW_LAYOUT_SETTING: () => (/* binding */ DEFAULT_ROW_LAYOUT_SETTING)
/* harmony export */ });
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

const DEFAULT_ROW_LAYOUT_SETTING = {
    space: 10,
    style: {
        padding: {
            number: [10, 10, 10, 10],
            unit: jimu_ui__WEBPACK_IMPORTED_MODULE_0__.DistanceUnits.PIXEL
        }
    }
};
const DEFAULT_ROW_ITEM_SETTING = {
    heightMode: 'fixed',
    aspectRatio: 1,
    offsetX: 0,
    offsetY: 0,
    style: {
        alignSelf: 'flex-start'
    }
};


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/layout-transform.ts":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/layout-transform.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RowLayoutTransformer: () => (/* binding */ RowLayoutTransformer),
/* harmony export */   getHeightOfLayoutItems: () => (/* binding */ getHeightOfLayoutItems),
/* harmony export */   getWidgetHeight: () => (/* binding */ getWidgetHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search */ "./jimu-layouts/lib/search/index.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/row-layout/types.ts");




function getWidgetHeight(appConfig, widgetsState, widgetId) {
    var _a, _b, _c, _d, _e, _f, _g;
    const widgetJson = appConfig.widgets[widgetId];
    if (widgetJson != null) {
        const browserSizeMode = _utils__WEBPACK_IMPORTED_MODULE_2__.getCurrentSizeMode();
        const mainSizeMode = appConfig.mainSizeMode;
        const layoutId = widgetJson.layouts.DEFAULT[browserSizeMode];
        const mainLayoutId = widgetJson.layouts.DEFAULT[mainSizeMode];
        const layout = (_a = appConfig.layouts[layoutId]) !== null && _a !== void 0 ? _a : appConfig.layouts[mainLayoutId];
        const padding = (_e = (_d = (_c = (_b = layout.setting) === null || _b === void 0 ? void 0 : _b.style) === null || _c === void 0 ? void 0 : _c.padding) === null || _d === void 0 ? void 0 : _d.number) !== null && _e !== void 0 ? _e : [0];
        const paddingValues = _utils__WEBPACK_IMPORTED_MODULE_2__.expandStyleArray(padding);
        const widgetHeight = (_g = (_f = widgetsState === null || widgetsState === void 0 ? void 0 : widgetsState[widgetId]) === null || _f === void 0 ? void 0 : _f.height) !== null && _g !== void 0 ? _g : 0;
        let pt = paddingValues[0];
        let pb = paddingValues[2];
        if (_utils__WEBPACK_IMPORTED_MODULE_2__.isPercentage(pt)) {
            pt = _utils__WEBPACK_IMPORTED_MODULE_2__.fromRatio(pt, widgetHeight);
        }
        if (_utils__WEBPACK_IMPORTED_MODULE_2__.isPercentage(pb)) {
            pb = _utils__WEBPACK_IMPORTED_MODULE_2__.fromRatio(pb, widgetHeight);
        }
        return widgetHeight - pt - pb;
    }
    return 0;
}
function getHeightOfLayoutItems(appConfig, widgetsState, layoutId) {
    var _a;
    const widgetId = _search__WEBPACK_IMPORTED_MODULE_1__.getWidgetIdThatUseTheLayoutId(appConfig, layoutId);
    const widgetHeight = getWidgetHeight(appConfig, widgetsState, widgetId);
    if (widgetHeight > 0) {
        const rowLayout = appConfig.layouts[layoutId];
        const itemIds = (_a = rowLayout.order) !== null && _a !== void 0 ? _a : [];
        const result = {};
        itemIds.forEach(itemId => {
            const layoutItem = appConfig.layouts[layoutId].content[itemId];
            result[itemId] = _utils__WEBPACK_IMPORTED_MODULE_2__.calHeightOfLayoutItem(widgetHeight, layoutItem);
        });
        return result;
    }
    return null;
}
class RowLayoutTransformer {
    constructor() {
        this.id = 'row-layout-transformer';
        this.layoutType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.RowLayout;
    }
    transformLayout(layout, fromSizeMode, toSizeMode, appConfig) {
        var _a, _b;
        if (fromSizeMode === toSizeMode) {
            return layout;
        }
        let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layout);
        if (toSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            const itemHeights = getHeightOfLayoutItems(appConfig, (_a = window.runtimeInfo) === null || _a === void 0 ? void 0 : _a.widgets, layout.id);
            let index = 0;
            const order = Object.keys((_b = layout.content) !== null && _b !== void 0 ? _b : {}).sort((a, b) => {
                return parseInt(layout.content[a].bbox.left, 10) - parseInt(layout.content[b].bbox.left, 10);
            });
            order.forEach(itemId => {
                var _a, _b, _c;
                const layoutItem = layout.content[itemId];
                if (!layoutItem.isPending) {
                    updatedLayout = updatedLayout.setIn(['content', itemId, 'bbox'], {
                        left: index * _types__WEBPACK_IMPORTED_MODULE_3__.TOTAL_COLS,
                        width: _types__WEBPACK_IMPORTED_MODULE_3__.TOTAL_COLS,
                        height: (_b = (_a = layoutItem.bbox) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : 'auto'
                    });
                    if (itemHeights != null) {
                        const setting = (_c = layoutItem.setting) !== null && _c !== void 0 ? _c : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
                        updatedLayout = updatedLayout
                            .setIn(['content', itemId, 'bbox', 'height'], itemHeights[itemId].height)
                            .setIn(['content', itemId, 'setting'], setting.merge(itemHeights[itemId].setting));
                    }
                    index += 1;
                }
            });
        }
        return updatedLayout;
    }
    transformLayoutItem(item, index, fromLayoutId, toLayoutId, fromSizeMode, toSizeMode) {
        return { item, index };
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/types.ts":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/row-layout/types.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MIN_SPAN: () => (/* binding */ MIN_SPAN),
/* harmony export */   TOTAL_COLS: () => (/* binding */ TOTAL_COLS)
/* harmony export */ });
const MIN_SPAN = 2;
const TOTAL_COLS = 12;


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/utils.ts":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/row-layout/utils.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ROW_STYLE: () => (/* binding */ ROW_STYLE),
/* harmony export */   calItemHeight: () => (/* binding */ calItemHeight),
/* harmony export */   flipRowItemPos: () => (/* binding */ flipRowItemPos)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/row-layout/types.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");



const ROW_STYLE = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  width: 100%;
  display: flex;
  justify-content: center;

  .offset-1 {
    margin-left: 8.33333%;
    margin-right: 0;
  }
  .offset-2 {
    margin-left: 16.66667%;
    margin-right: 0;
  }
  .offset-3 {
    margin-left: 25%;
    margin-right: 0;
  }
  .offset-4 {
    margin-left: 33.33333%;
    margin-right: 0;
  }
  .offset-5 {
    margin-left: 41.66667%;
    margin-right: 0;
  }
  .offset-6 {
    margin-left: 50%;
    margin-right: 0;
  }
  .offset-7 {
    margin-left: 58.33333%;
    margin-right: 0;
  }
  .offset-8 {
    margin-left: 66.66667%;
    margin-right: 0;
  }
  .offset-9 {
    margin-left: 75%;
    margin-right: 0;
  }
  .offset-10 {
    margin-left: 83.33333%;
    margin-right: 0;
  }
  .offset-11 {
    margin-left: 91.66667%;
    margin-right: 0;
  }
`;
function flipRowItemPos(bbox) {
    const result = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(bbox);
    return result.set('left', _types__WEBPACK_IMPORTED_MODULE_1__.TOTAL_COLS - parseInt(bbox.left, 10) - parseInt(bbox.width, 10));
}
function calItemHeight(itemSetting, bbox, isMultiRow) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
    if (isMultiRow) {
        return {
            height: ((_a = itemSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto ? 'auto' : bbox.height,
            alignSelf: (_c = (_b = itemSetting.style) === null || _b === void 0 ? void 0 : _b.alignSelf) !== null && _c !== void 0 ? _c : 'flex-start'
        };
    }
    // 1. aspect ratio
    if (itemSetting.heightMode === 'ratio') {
        return { alignSelf: (_e = (_d = itemSetting.style) === null || _d === void 0 ? void 0 : _d.alignSelf) !== null && _e !== void 0 ? _e : 'flex-start' };
    }
    // 2. use autoProps.height first
    if (((_f = itemSetting.autoProps) === null || _f === void 0 ? void 0 : _f.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto) {
        return { height: 'auto', alignSelf: (_h = (_g = itemSetting.style) === null || _g === void 0 ? void 0 : _g.alignSelf) !== null && _h !== void 0 ? _h : 'flex-start' };
    }
    else if (((_j = itemSetting.autoProps) === null || _j === void 0 ? void 0 : _j.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
        return { height: bbox.height, alignSelf: (_l = (_k = itemSetting.style) === null || _k === void 0 ? void 0 : _k.alignSelf) !== null && _l !== void 0 ? _l : 'flex-start' };
    }
    else if (((_m = itemSetting.autoProps) === null || _m === void 0 ? void 0 : _m.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        return { alignSelf: 'stretch' };
    }
    // 3. back compatible, use setting.heightMode
    if (itemSetting.heightMode === 'fit') {
        return { alignSelf: 'stretch' };
    }
    else if (parseFloat(bbox.height) > 0) {
        return { height: bbox.height, alignSelf: (_p = (_o = itemSetting.style) === null || _o === void 0 ? void 0 : _o.alignSelf) !== null && _p !== void 0 ? _p : 'flex-start' };
    }
    return { alignSelf: 'stretch' };
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-auto-play.tsx":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-auto-play.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoPlay: () => (/* binding */ useAutoPlay)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");
/** @jsx jsx */


function nextView(sectionId, loop) {
    var _a, _b;
    const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    const views = state.appConfig.sections[sectionId].views;
    let navInfo = (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.sectionNavInfos) === null || _b === void 0 ? void 0 : _b[sectionId];
    const currentIndex = (navInfo === null || navInfo === void 0 ? void 0 : navInfo.currentViewId) ? views.indexOf(navInfo.currentViewId) : 0;
    const nextIndex = currentIndex < views.length - 1 ? currentIndex + 1 : 0;
    if (!loop && nextIndex === 0) {
        return false;
    }
    // do not change queryObject when it is auto playing
    if (navInfo) {
        navInfo = navInfo.set('previousViewId', views[currentIndex]).set('currentViewId', views[nextIndex]);
    }
    else {
        navInfo = {
            previousViewId: views[currentIndex],
            currentViewId: views[nextIndex]
        };
    }
    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.sectionNavInfoChanged(sectionId, navInfo));
    return true;
}
function useAutoPlay(props) {
    const { sectionId, autoPlay, interval = _types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_AUTOPLAY_INTERVAL, loop = false } = props;
    const playHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    // const [isPlaying, setIsPlaying] = React.useState<boolean>();
    const isAutoplaySuspendMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        if (!autoPlay) {
            return null;
        }
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design || ((_b = state.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.isPrintPreview);
    });
    const modeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(isAutoplaySuspendMode);
    const stopPlay = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        if (playHandlerRef.current) {
            clearInterval(playHandlerRef.current);
            playHandlerRef.current = null;
        }
    }, []);
    const startPlay = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        stopPlay(); // stop previous auto play
        playHandlerRef.current = setInterval(() => {
            const continued = nextView(sectionId, loop);
            if (!continued) {
                stopPlay();
            }
        }, interval * 1000);
    }, [sectionId, loop, interval, stopPlay]);
    // auto play props change affects
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (!modeRef.current) {
            if (!autoPlay) {
                stopPlay();
                return;
            }
            startPlay();
        }
        return () => {
            stopPlay();
        };
    }, [autoPlay, interval, loop, stopPlay, startPlay]);
    // isDesignMode change affects
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (modeRef.current !== isAutoplaySuspendMode && isAutoplaySuspendMode !== null) {
            modeRef.current = isAutoplaySuspendMode;
            if (isAutoplaySuspendMode) {
                stopPlay();
                return;
            }
            if (autoPlay) {
                startPlay();
            }
        }
    }, [isAutoplaySuspendMode, startPlay, stopPlay, autoPlay]);
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-content.tsx":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-content.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionContent: () => (/* binding */ SectionContent)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _view_content__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./view-content */ "./jimu-layouts/lib/runtime/view-content.tsx");
/** @jsx jsx */


function SectionContent(props) {
    var _a, _b;
    const { views, navInfo, animationPreview, playMode, currentIndex, previousIndex, progress, loop, viewTransition } = props;
    const isPreviewOneByOne = animationPreview && playMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.OneByOne;
    const { setting, playId } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext);
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        if (!setting || setting.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None) {
            return true;
        }
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    // isDesignMode === false
    const animationSetting = !isDesignMode || isPreviewOneByOne || ((navInfo === null || navInfo === void 0 ? void 0 : navInfo.playId) && (navInfo === null || navInfo === void 0 ? void 0 : navInfo.withOneByOne)) ? setting : null;
    const animationContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return {
            // trigger: AnimationTriggerType.Manual,
            setting: animationSetting,
            playId: isPreviewOneByOne ? playId : null
            // inheritedOneByOneSetting: null,
            // depth: depth + 1,
            // onAnimationEnd
        };
    }, [animationSetting, isPreviewOneByOne, playId]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext.Provider, { value: animationContext },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'section-content' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.TransitionContainer, { useProgress: (_a = navInfo === null || navInfo === void 0 ? void 0 : navInfo.useProgress) !== null && _a !== void 0 ? _a : false, useStep: (_b = navInfo === null || navInfo === void 0 ? void 0 : navInfo.useStep) !== null && _b !== void 0 ? _b : false, previousIndex: previousIndex, currentIndex: currentIndex, progress: progress, transitionType: viewTransition === null || viewTransition === void 0 ? void 0 : viewTransition.type, direction: viewTransition === null || viewTransition === void 0 ? void 0 : viewTransition.direction, playId: navInfo === null || navInfo === void 0 ? void 0 : navInfo.playId, withOneByOne: navInfo === null || navInfo === void 0 ? void 0 : navInfo.withOneByOne, loop: loop }, views.map((viewId) => {
                const isActive = viewId === views[currentIndex];
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_view_content__WEBPACK_IMPORTED_MODULE_1__.ViewContent, { key: viewId, viewId: viewId, isActive: isActive, layoutEntryComponent: props.layoutEntryComponent, viewVisibilityContext: props.viewVisibilityContext }));
            })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-nav.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-nav.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionNav: () => (/* binding */ SectionNav)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/outlined/directional/left */ "./jimu-icons/outlined/directional/left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/outlined/directional/right */ "./jimu-icons/outlined/directional/right.tsx");
/** @jsx jsx */



function SectionNav(props) {
    var _a, _b, _c;
    const { sectionId, currentIndex, numOfViews, onCurrentViewChange } = props;
    const arrowsNav = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return (_a = state.appConfig.sections[sectionId]) === null || _a === void 0 ? void 0 : _a.arrowsNav;
    });
    const dotsNav = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return (_a = state.appConfig.sections[sectionId]) === null || _a === void 0 ? void 0 : _a.dotsNav;
    });
    const dotsNavPosition = (_a = dotsNav === null || dotsNav === void 0 ? void 0 : dotsNav.position) !== null && _a !== void 0 ? _a : 'b';
    const dots = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        const result = [];
        for (let i = 0; i < numOfViews; i++) {
            result.push(i);
        }
        return result;
    }, [numOfViews]);
    const arrowStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      cursor: pointer;
      pointer-events: auto;

      &.disabled {
        cursor: default;
        svg {
          color: var(--light-400);
        }
      }

      &.first {
        left: ${(_a = arrowsNav.offset) !== null && _a !== void 0 ? _a : 0}px;
        top: 50%;
        transform: translateY(-50%);

        &.vertical {
          top: ${(_b = arrowsNav.offset) !== null && _b !== void 0 ? _b : 0}px;
          left: 50%;
          transform: translateX(-50%) rotate(90deg);
        }
      }
      &.second {
        right: ${(_c = arrowsNav.offset) !== null && _c !== void 0 ? _c : 0}px;
        top: 50%;
        transform: translateY(-50%);

        &.vertical {
          bottom: ${(_d = arrowsNav.offset) !== null && _d !== void 0 ? _d : 0}px;
          left: 50%;
          top: auto;
          right: auto;
          transform: translateX(-50%) rotate(90deg);
        }
      }
    `;
    };
    const dotStyle = () => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      display: flex;
      flex-direction: ${dotsNavPosition === 'l' || dotsNavPosition === 'r' ? 'column' : 'row'};
      justify-content: center;
      align-items: center;
      overflow: visible;
      pointer-events: none;
      background: transparent;

      .dot {
        pointer-events: all;
        cursor: pointer;
        border: 1px solid var(--light-500);
        background: var(--light-100);
        width: ${(_a = dotsNav.size) !== null && _a !== void 0 ? _a : 8}px;
        height: ${(_b = dotsNav.size) !== null && _b !== void 0 ? _b : 8}px;

        &.active {
          border-color: var(--white);
          background: var(--primary-500);
          width: ${dotsNav.size > 0 ? dotsNav.size * 1.5 : 12}px;
          height: ${dotsNav.size > 0 ? dotsNav.size * 1.5 : 12}px;
        }

        &.disabled {
          cursor: default;
        }
      }

      &.snap-left {
        height: 100%;
        top: 0;
        left: ${(_c = dotsNav.offset) !== null && _c !== void 0 ? _c : 50}px;
        width: ${(_d = dotsNav.size) !== null && _d !== void 0 ? _d : 8}px;

        > div:not(:first-of-type) {
          margin-top: ${(_e = dotsNav.spacing) !== null && _e !== void 0 ? _e : 10}px;
        }
      }
      &.snap-right {
        height: 100%;
        top: 0;
        right: ${(_f = dotsNav.offset) !== null && _f !== void 0 ? _f : 50}px;
        width: ${(_g = dotsNav.size) !== null && _g !== void 0 ? _g : 8}px;

        > div:not(:first-of-type) {
          margin-top: ${(_h = dotsNav.spacing) !== null && _h !== void 0 ? _h : 10}px;
        }
      }
      &.snap-top {
        width: 100%;
        top: ${(_j = dotsNav.offset) !== null && _j !== void 0 ? _j : 50}px;
        height: ${(_k = dotsNav.size) !== null && _k !== void 0 ? _k : 8}px;

        > div:not(:first-of-type) {
          margin-left: ${(_l = dotsNav.spacing) !== null && _l !== void 0 ? _l : 10}px;
        }
      }
      &.snap-bottom {
        width: 100%;
        bottom: ${(_m = dotsNav.offset) !== null && _m !== void 0 ? _m : 50}px;
        height: ${(_o = dotsNav.size) !== null && _o !== void 0 ? _o : 8}px;

        > div:not(:first-of-type) {
          margin-left: ${(_p = dotsNav.spacing) !== null && _p !== void 0 ? _p : 10}px;
        }
      }
    `;
    };
    const createDot = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((index, isActive) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { key: index, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('dot rounded-circle', { active: isActive, disabled: numOfViews <= 1 }), onClick: isActive ? undefined : () => { onCurrentViewChange(index); } }));
    }, [onCurrentViewChange, numOfViews]);
    const previousView = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const nextIndex = currentIndex > 0 ? currentIndex - 1 : numOfViews - 1;
        onCurrentViewChange(nextIndex);
    }, [currentIndex, numOfViews, onCurrentViewChange]);
    const nextView = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const nextIndex = currentIndex < numOfViews - 1 ? currentIndex + 1 : 0;
        onCurrentViewChange(nextIndex);
    }, [currentIndex, numOfViews, onCurrentViewChange]);
    const hasPreviousView = numOfViews > 1 && currentIndex !== 0;
    const hasNextView = numOfViews > 1 && currentIndex !== numOfViews - 1;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
        (arrowsNav === null || arrowsNav === void 0 ? void 0 : arrowsNav.visible) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('arrows-nav first', {
                    vertical: arrowsNav.direction === 'v',
                    disabled: !hasPreviousView
                }), css: arrowStyle(), onClick: hasPreviousView ? previousView : null },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_1__.LeftOutlined, { autoFlip: arrowsNav.direction !== 'v', size: (_b = arrowsNav.size) !== null && _b !== void 0 ? _b : 24 })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('arrows-nav second', {
                    vertical: arrowsNav.direction === 'v',
                    disabled: !hasNextView
                }), css: arrowStyle(), onClick: hasNextView ? nextView : null },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_2__.RightOutlined, { autoFlip: arrowsNav.direction !== 'v', size: (_c = arrowsNav.size) !== null && _c !== void 0 ? _c : 24 })))),
        (dotsNav === null || dotsNav === void 0 ? void 0 : dotsNav.visible) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('dots-nav', {
                'snap-left': dotsNavPosition === 'l',
                'snap-top': dotsNavPosition === 't',
                'snap-right': dotsNavPosition === 'r',
                'snap-bottom': dotsNavPosition === 'b'
            }), css: dotStyle() }, dots.map((index) => createDot(index, index === currentIndex))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-renderer-base.tsx":
/*!************************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-renderer-base.tsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionRendererBase: () => (/* binding */ SectionRendererBase)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _section_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./section-content */ "./jimu-layouts/lib/runtime/section-content.tsx");
/* harmony import */ var _section_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./section-nav */ "./jimu-layouts/lib/runtime/section-nav.tsx");
/* harmony import */ var _section_auto_play__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./section-auto-play */ "./jimu-layouts/lib/runtime/section-auto-play.tsx");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */






function getStyle(forceAspectRatio, aspectRatio) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    overflow: visible;
    position: relative;
    aspect-ratio: ${forceAspectRatio && aspectRatio > 0 ? aspectRatio : null};

    .section-content {
      position: relative;
      overflow: hidden;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .section-view {
      position: absolute;
    }

    .hidden {
      display: none !important;
    }
  `;
}
function SectionRendererBase(props) {
    var _a;
    const { views, navInfo, activeView, animationPreview, playMode, transition, sectionId, autoPlay, focusable = true, interval = _types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_AUTOPLAY_INTERVAL, loop = true, className, sectionStyle, rotate, forceAspectRatio, aspectRatio, layoutEntryComponent, viewVisibilityContext } = props;
    const currentIndexRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const sectionRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const hasFocusRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(false);
    const isSectionFocusedRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(false);
    const blurEventHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const [interuptAutoplay, setInteruptAutoplay] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const activeViewId = activeView === null || activeView === void 0 ? void 0 : activeView.id;
    const renderInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a;
        let visibleViews = views;
        let currentIndex;
        let previousIndex;
        let progress;
        if (navInfo) {
            visibleViews = (_a = navInfo.visibleViews) !== null && _a !== void 0 ? _a : views;
            if (navInfo.useProgress) {
                progress = navInfo.progress;
                const r = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getIndexFromProgress)(progress, visibleViews.length);
                currentIndex = r.currentIndex;
            }
            else {
                currentIndex = Math.max(0, visibleViews.indexOf(navInfo.currentViewId));
                if (navInfo.previousViewId) {
                    previousIndex = Math.max(0, visibleViews.indexOf(navInfo.previousViewId));
                }
                else {
                    previousIndex = Math.max(0, currentIndex - 1);
                }
            }
        }
        else {
            // TODO remove nav by activeView, use navInfo only
            currentIndex = Math.max(0, visibleViews.indexOf(activeViewId));
            previousIndex = currentIndex;
        }
        currentIndexRef.current = currentIndex;
        return { currentIndex, previousIndex, progress };
    }, [activeViewId, navInfo, views]);
    const _b = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return jimu_ui__WEBPACK_IMPORTED_MODULE_2__.styleUtils.toCSSStyle(sectionStyle);
    }, [sectionStyle]), { transform } = _b, otherStyle = __rest(_b, ["transform"]);
    const rotateStyle = rotate > 0 || rotate < 0 ? `rotateZ(${rotate}deg)` : '';
    let mergedTransform = rotateStyle;
    if (transform) {
        mergedTransform = `${transform} ${rotateStyle}`;
    }
    const onMouseEnter = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setInteruptAutoplay(true);
    }, []);
    const onMouseLeave = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setInteruptAutoplay(false);
    }, []);
    const onFocus = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        hasFocusRef.current = true;
        isSectionFocusedRef.current = e.target === sectionRef.current;
        if (blurEventHandlerRef.current != null) {
            clearTimeout(blurEventHandlerRef.current);
            blurEventHandlerRef.current = null;
        }
        if (autoPlay) {
            setInteruptAutoplay(true);
        }
    }, [autoPlay]);
    const onBlur = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        hasFocusRef.current = false;
        if (blurEventHandlerRef.current != null) {
            clearTimeout(blurEventHandlerRef.current);
            blurEventHandlerRef.current = null;
        }
        if (autoPlay) {
            blurEventHandlerRef.current = setTimeout(() => {
                setInteruptAutoplay(false);
            }, 500);
        }
    }, [autoPlay]);
    const isAutoPlaying = autoPlay && !interuptAutoplay;
    (0,_section_auto_play__WEBPACK_IMPORTED_MODULE_5__.useAutoPlay)({
        sectionId,
        interval,
        loop,
        autoPlay: isAutoPlaying
    });
    const onCurrentViewChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((nextIndex) => {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(sectionId, views[nextIndex]);
    }, [sectionId, views]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(`section-layout layout-item-content w-100 ${(_a = sectionStyle === null || sectionStyle === void 0 ? void 0 : sectionStyle.boxShadow) === null || _a === void 0 ? void 0 : _a.presetStyle}`, className), css: getStyle(forceAspectRatio, aspectRatio), "data-sectionid": sectionId, style: Object.assign(Object.assign({}, otherStyle), { transform: mergedTransform }), onMouseEnter: autoPlay ? onMouseEnter : null, onMouseLeave: autoPlay ? onMouseLeave : null, onTouchStart: autoPlay ? onMouseEnter : null, onTouchEnd: autoPlay ? onMouseLeave : null, onFocus: onFocus, onBlur: onBlur, tabIndex: focusable ? 0 : undefined, ref: sectionRef },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_section_content__WEBPACK_IMPORTED_MODULE_3__.SectionContent, { views: views, navInfo: navInfo, animationPreview: animationPreview, playMode: playMode, currentIndex: renderInfo.currentIndex, previousIndex: renderInfo.previousIndex, progress: renderInfo.progress, loop: isAutoPlaying && loop, viewTransition: transition, layoutEntryComponent: layoutEntryComponent, viewVisibilityContext: viewVisibilityContext }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_section_nav__WEBPACK_IMPORTED_MODULE_4__.SectionNav, { sectionId: sectionId, numOfViews: views.length, currentIndex: renderInfo.currentIndex, onCurrentViewChange: onCurrentViewChange })));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/view-content.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/runtime/view-content.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ViewContent: () => (/* binding */ ViewContent)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/** @jsx jsx */

// import { ViewVisibilityContext } from '../builder/page-context';


function getBackgroundStyle(view, bgColor) {
    if (!view) {
        return null;
    }
    let backgroundImage = {};
    if (view.backgroundIMage) {
        backgroundImage = typeof view.backgroundIMage === 'string' ? {} : view.backgroundIMage;
    }
    const fillType = view.backgroundPosition ? jimu_ui__WEBPACK_IMPORTED_MODULE_1__.FillType[view.backgroundPosition.toUpperCase()] : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.FillType.FILL;
    let color;
    // for back compatible
    if (view.backgroundColor == null) {
        color = bgColor;
    }
    else if (view.backgroundColor === '') {
        color = 'transparent';
    }
    else {
        color = view.backgroundColor ? view.backgroundColor : '';
    }
    const backgroundConfig = {
        color,
        fillType: fillType,
        image: backgroundImage
    };
    return jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundStyle(backgroundConfig);
}
function ViewContent(props) {
    var _a, _b;
    const { viewId, isActive, layoutEntryComponent, viewVisibilityContext } = props;
    const view = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        return (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.views) === null || _b === void 0 ? void 0 : _b[viewId];
    });
    const bgColor = (_b = (_a = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_2__.useTheme)()) === null || _a === void 0 ? void 0 : _a.body) === null || _b === void 0 ? void 0 : _b.bg;
    const LayoutEntry = layoutEntryComponent;
    const ViewVisibilityContext = viewVisibilityContext;
    const [started, setStarted] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const viewVisibility = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return { isInView: true, isInCurrentView: isActive };
    }, [isActive]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (isActive && view.lazyLoad && !started) {
            setStarted(true);
        }
    }, [isActive, view.lazyLoad, started]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100 d-flex section-view', {
            [jimu_ui__WEBPACK_IMPORTED_MODULE_1__.FOCUSABLE_CONTAINER_CLASS]: isActive
        }), style: getBackgroundStyle(view, bgColor), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `&, .exb-drop-area { pointer-events: ${isActive ? 'auto' : 'none'}; }`, key: viewId, id: `${view.parent}_${view.id}` }, (started || !view.lazyLoad) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null,
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(ViewVisibilityContext.Provider, { value: viewVisibility },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: view === null || view === void 0 ? void 0 : view.layout, isInSection: true, className: 'w-100' }))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/search/contents.ts":
/*!*********************************************!*\
  !*** ./jimu-layouts/lib/search/contents.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   checkIsLayoutInfoInWidget: () => (/* binding */ checkIsLayoutInfoInWidget),
/* harmony export */   findLayoutId: () => (/* binding */ findLayoutId),
/* harmony export */   findLayoutItem: () => (/* binding */ findLayoutItem),
/* harmony export */   findParentLayoutInfo: () => (/* binding */ findParentLayoutInfo),
/* harmony export */   getBlockAnchorPointsInPage: () => (/* binding */ getBlockAnchorPointsInPage),
/* harmony export */   getBrowserSizeModeByLayoutId: () => (/* binding */ getBrowserSizeModeByLayoutId),
/* harmony export */   getBrowserSizeModeByLayoutIdAndWidgetId: () => (/* binding */ getBrowserSizeModeByLayoutIdAndWidgetId),
/* harmony export */   getChildrenContents: () => (/* binding */ getChildrenContents),
/* harmony export */   getContentContainerInfo: () => (/* binding */ getContentContainerInfo),
/* harmony export */   getContentIdInLayoutItem: () => (/* binding */ getContentIdInLayoutItem),
/* harmony export */   getContentLayoutInfosInOneSizeMode: () => (/* binding */ getContentLayoutInfosInOneSizeMode),
/* harmony export */   getContentLayoutItem: () => (/* binding */ getContentLayoutItem),
/* harmony export */   getContentRootContainerInfo: () => (/* binding */ getContentRootContainerInfo),
/* harmony export */   getContentsInContainer: () => (/* binding */ getContentsInContainer),
/* harmony export */   getContentsInContainerRecursive: () => (/* binding */ getContentsInContainerRecursive),
/* harmony export */   getContentsInContainerRecursiveAdv: () => (/* binding */ getContentsInContainerRecursiveAdv),
/* harmony export */   getContentsInLayout: () => (/* binding */ getContentsInLayout),
/* harmony export */   getContentsInLayoutRecursive: () => (/* binding */ getContentsInLayoutRecursive),
/* harmony export */   getContentsInLayoutWithRecrusiveLayouts: () => (/* binding */ getContentsInLayoutWithRecrusiveLayouts),
/* harmony export */   getContentsInTheSameContainer: () => (/* binding */ getContentsInTheSameContainer),
/* harmony export */   getContentsInTheSameRootContainer: () => (/* binding */ getContentsInTheSameRootContainer),
/* harmony export */   getLayoutInfoHoldContent: () => (/* binding */ getLayoutInfoHoldContent),
/* harmony export */   getLayoutInfosByType: () => (/* binding */ getLayoutInfosByType),
/* harmony export */   getLayoutInfosHoldcontent: () => (/* binding */ getLayoutInfosHoldcontent),
/* harmony export */   getLayoutItemIds: () => (/* binding */ getLayoutItemIds),
/* harmony export */   getMapWidgets: () => (/* binding */ getMapWidgets),
/* harmony export */   getParentWidgetIdOfContent: () => (/* binding */ getParentWidgetIdOfContent),
/* harmony export */   getRelatedLayoutInfosInWidgetByLayoutInfo: () => (/* binding */ getRelatedLayoutInfosInWidgetByLayoutInfo),
/* harmony export */   getRelatedLayoutItemsInWidgetByLayoutInfo: () => (/* binding */ getRelatedLayoutItemsInWidgetByLayoutInfo),
/* harmony export */   getRootContainerInfoOfLayout: () => (/* binding */ getRootContainerInfoOfLayout),
/* harmony export */   getScreenAnchorPointsInPage: () => (/* binding */ getScreenAnchorPointsInPage),
/* harmony export */   getWidgetIdThatUseTheLayoutId: () => (/* binding */ getWidgetIdThatUseTheLayoutId)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function findLayoutItem(appConfig, layoutInfo) {
    var _a, _b, _c;
    if (!layoutInfo) {
        return null;
    }
    const { layoutId, layoutItemId } = layoutInfo;
    return (_c = (_b = (_a = appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
}
/**
 * Find parent layout item in current page.
 * @param layoutInfo
 */
function findParentLayoutInfo(layoutInfo, appConfig, browserSizeMode) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
    const { layoutId } = layoutInfo;
    const layout = appConfig.layouts[layoutId];
    switch ((_a = layout === null || layout === void 0 ? void 0 : layout.parent) === null || _a === void 0 ? void 0 : _a.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View:
            {
                const viewJson = appConfig.views[layout.parent.id];
                const sectionJson = appConfig.sections[viewJson.parent];
                if (((_c = (_b = sectionJson === null || sectionJson === void 0 ? void 0 : sectionJson.parent) === null || _b === void 0 ? void 0 : _b[browserSizeMode]) === null || _c === void 0 ? void 0 : _c.length) === 1) {
                    return sectionJson.parent[browserSizeMode][0];
                }
                if (((_e = (_d = sectionJson === null || sectionJson === void 0 ? void 0 : sectionJson.parent) === null || _d === void 0 ? void 0 : _d[browserSizeMode]) === null || _e === void 0 ? void 0 : _e.length) > 1) {
                    return findParentLayoutInfo(sectionJson.parent[browserSizeMode][0], appConfig, browserSizeMode);
                }
                return null;
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget:
            {
                const widgetJson = appConfig.widgets[layout.parent.id];
                if (((_g = (_f = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.parent) === null || _f === void 0 ? void 0 : _f[browserSizeMode]) === null || _g === void 0 ? void 0 : _g.length) === 1) {
                    return widgetJson.parent[browserSizeMode][0];
                }
                if (((_j = (_h = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.parent) === null || _h === void 0 ? void 0 : _h[browserSizeMode]) === null || _j === void 0 ? void 0 : _j.length) > 1) {
                    return findParentLayoutInfo(widgetJson.parent[browserSizeMode][0], appConfig, browserSizeMode);
                }
                return null;
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Screen:
            {
                const screenJson = appConfig.screens[layout.parent.id];
                const sgJson = appConfig.screenGroups[screenJson.parent];
                return (_k = sgJson.parent) === null || _k === void 0 ? void 0 : _k[browserSizeMode];
            }
        default:
            return null;
    }
}
function getContentIdInLayoutItem(item) {
    switch (item.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            return typeof (item.widgetId) === 'string' ? item.widgetId : null;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
            return typeof (item.sectionId) === 'string' ? item.sectionId : null;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            return typeof (item.screenGroupId) === 'string' ? item.screenGroupId : null;
        default:
            return null;
    }
}
/**
 * return the content ids in the layout. Do not consider the embedded layouts
 * @param layoutJson
 */
function getContentsInLayout(layoutJson, type, withPending = false) {
    if (!(layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.content)) {
        return [];
    }
    return Object.keys(layoutJson.content)
        .filter(itemId => layoutJson.content[itemId].type === type &&
        !!getContentIdInLayoutItem(layoutJson.content[itemId]) &&
        (withPending || !layoutJson.content[itemId].isPending))
        .map(itemId => getContentIdInLayoutItem(layoutJson.content[itemId]));
}
/**
 * Return the content ids in a layout, search the whole layout tree, including the layout widget, the normal widget that has embed layout, and views, screens, etc.
 * @param appConfig
 * @param layoutId the layout to search
 * @param type content type
 * @param sizeMode the sizeMode to search
 * @param withPending will include the pending content if true
 */
function getContentsInLayoutRecursive(appConfig, layoutId, type, sizeMode, withPending = false) {
    let ret = [];
    const widgetIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, withPending);
    const sectionIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, withPending);
    const screenGroupIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, withPending);
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        ret = ret.concat(widgetIds);
    }
    else if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        ret = ret.concat(sectionIds);
    }
    else if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
        ret = ret.concat(screenGroupIds);
    }
    const hasLayoutWidgetIds = widgetIds.filter(widgetId => {
        var _a, _b, _c, _d, _e;
        return ((_b = (_a = appConfig.widgets[widgetId]) === null || _a === void 0 ? void 0 : _a.manifest) === null || _b === void 0 ? void 0 : _b.widgetType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout ||
            ((_e = (_d = (_c = appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.manifest) === null || _d === void 0 ? void 0 : _d.properties) === null || _e === void 0 ? void 0 : _e.hasEmbeddedLayout);
    });
    hasLayoutWidgetIds.forEach(hasLayoutWidgetId => {
        var _a;
        Object.keys((_a = appConfig.widgets[hasLayoutWidgetId].layouts) !== null && _a !== void 0 ? _a : {}).forEach(layoutKey => {
            const layoutId = findLayoutId(appConfig.widgets[hasLayoutWidgetId].layouts[layoutKey], sizeMode, appConfig.mainSizeMode);
            ret = ret.concat(getContentsInLayoutRecursive(appConfig, layoutId, type, sizeMode, withPending));
        });
    });
    sectionIds.forEach(sectionId => {
        var _a, _b;
        (_b = (_a = appConfig.sections) === null || _a === void 0 ? void 0 : _a[sectionId]) === null || _b === void 0 ? void 0 : _b.views.forEach(viewId => {
            const layoutId = findLayoutId(appConfig.views[viewId].layout, sizeMode, appConfig.mainSizeMode);
            if (appConfig.views[viewId] && layoutId) {
                ret = ret.concat(getContentsInLayoutRecursive(appConfig, layoutId, type, sizeMode, withPending));
            }
        });
    });
    screenGroupIds.forEach(screenGroupId => {
        var _a, _b;
        (_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[screenGroupId]) === null || _b === void 0 ? void 0 : _b.screens.forEach(screenId => {
            var _a, _b, _c, _d, _e;
            const mainLayoutId = findLayoutId((_b = (_a = appConfig.screens) === null || _a === void 0 ? void 0 : _a[screenId]) === null || _b === void 0 ? void 0 : _b.main.layout, sizeMode, appConfig.mainSizeMode);
            if (mainLayoutId) {
                ret = ret.concat(getContentsInLayoutRecursive(appConfig, mainLayoutId, type, sizeMode, withPending));
            }
            const panelLayoutId = findLayoutId((_e = (_d = (_c = appConfig.screens) === null || _c === void 0 ? void 0 : _c[screenId]) === null || _d === void 0 ? void 0 : _d.panel) === null || _e === void 0 ? void 0 : _e.layout, sizeMode, appConfig.mainSizeMode);
            if (panelLayoutId) {
                ret = ret.concat(getContentsInLayoutRecursive(appConfig, panelLayoutId, type, sizeMode, withPending));
            }
        });
    });
    return ret;
}
/**
 * Return the content ids in a layout, search the widgets with layout but don't search nested containers.
 * @param appConfig
 * @param layoutId
 * @param type
 */
function getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, sizeMode, withPending = false) {
    let ret = [];
    // No need to deal with screen group as it cannot be placed in a layout widget
    const widgetIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, withPending);
    const sectionIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, withPending);
    const sgIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, withPending);
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        ret = ret.concat(widgetIds);
    }
    else if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
        ret = ret.concat(sgIds);
    }
    else {
        ret = ret.concat(sectionIds);
    }
    const layoutWidgetIds = widgetIds.filter(widgetId => appConfig.widgets &&
        appConfig.widgets[widgetId] &&
        (appConfig.widgets[widgetId].manifest.widgetType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout || appConfig.widgets[widgetId].manifest.properties.hasEmbeddedLayout));
    layoutWidgetIds.forEach(layoutWidgetId => {
        var _a;
        Object.keys((_a = appConfig.widgets[layoutWidgetId].layouts) !== null && _a !== void 0 ? _a : {}).forEach(layoutKey => {
            const layoutId = findLayoutId(appConfig.widgets[layoutWidgetId].layouts[layoutKey], sizeMode, appConfig.mainSizeMode);
            ret = ret.concat(getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, sizeMode, withPending));
        });
    });
    return ret;
}
/**
 * Return the layout item that holds the content.
 * In one layout, a content is not allowed to be put in multiple items.
 * @param layoutJson
 * @param widgetId
 */
function getContentLayoutItem(layoutJson, id, type) {
    if (!(layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.content)) {
        return null;
    }
    const layoutItemId = Object.keys(layoutJson.content).find(itemId => layoutJson.content[itemId].type === type &&
        (layoutJson.content[itemId].widgetId === id || layoutJson.content[itemId].sectionId === id || layoutJson.content[itemId].screenGroupId === id) &&
        !layoutJson.content[itemId].isPending);
    return layoutJson.content[layoutItemId];
}
/**
 * Return the layout item ids in a layout
 * @param appConfig
 * @param layoutId
 * @param withPending
 */
function getLayoutItemIds(appConfig, layoutId, withPending = false) {
    const layout = appConfig.layouts[layoutId];
    if (layout === null || layout === void 0 ? void 0 : layout.content) {
        return withPending
            ? Object.keys(layout.content)
            : Object.keys(layout.content).filter(itemId => !layout.content[itemId].isPending);
    }
    return [];
}
function getLayoutInfosByType(layoutJson, type, withPending = false) {
    if (!(layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.content)) {
        return [];
    }
    return Object.keys(layoutJson.content)
        .filter(itemId => layoutJson.content[itemId].type === type &&
        !!getContentIdInLayoutItem(layoutJson.content[itemId]) &&
        (withPending || !layoutJson.content[itemId].isPending))
        .map(itemId => ({ layoutId: layoutJson.id, layoutItemId: itemId }));
}
/**
 * Find a widget id that use the layoutId
 * @param appConfig
 * @param layoutId
 */
function getWidgetIdThatUseTheLayoutId(appConfig, layoutId) {
    var _a;
    // eslint-disable-next-line
    const layoutJson = appConfig.layouts[layoutId];
    if (((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) === null || _a === void 0 ? void 0 : _a.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget) {
        return layoutJson.parent.id;
    }
    return null;
}
/**
 * Return the container that holds the widget, search the widgets with layout but don't search the nested container.
 * @param appConfig
 * @param widgetId
 */
function getContentContainerInfo(appConfig, id, type, sizeMode, withPending = false) {
    var _a;
    const layoutInfo = getLayoutInfoHoldContent(appConfig, id, type, sizeMode, withPending);
    if (layoutInfo) {
        const layoutJson = appConfig.layouts[layoutInfo.layoutId];
        switch ((_a = layoutJson.parent) === null || _a === void 0 ? void 0 : _a.type) {
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Page:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: layoutJson.parent.id };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Dialog:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog, id: layoutJson.parent.id };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Header:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Footer:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.View, id: layoutJson.parent.id };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Screen:
                {
                    const screenJson = appConfig.screens[layoutJson.parent.id];
                    const mainPanelLayoutId = screenJson.main.layout[sizeMode];
                    return { type: mainPanelLayoutId === layoutInfo.layoutId ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenMain : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenPanel, id: layoutJson.parent.id };
                }
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget:
                {
                    const widgetId = layoutJson.parent.id;
                    return getContentContainerInfo(appConfig, widgetId, type, sizeMode, withPending);
                }
        }
    }
    return null;
}
/**
 * Return the root container of the content, search the whole layout tree. There are 4 types of root container: page, window, header, footer.
 */
function getContentRootContainerInfo(appConfig, id, type, sizeMode, withPending = false) {
    let layoutInfo = getLayoutInfoHoldContent(appConfig, id, type, sizeMode, withPending);
    let useSizeMode = sizeMode;
    if (!layoutInfo) {
        // try to find from main size mode, since sizeMode layout may be tranformed automatically from main size mode
        layoutInfo = getLayoutInfoHoldContent(appConfig, id, type, appConfig.mainSizeMode, withPending);
        useSizeMode = appConfig.mainSizeMode;
    }
    if (layoutInfo) {
        return getRootContainerInfoOfLayout(appConfig, layoutInfo.layoutId, useSizeMode);
    }
}
function getRootContainerInfoOfLayout(appConfig, layoutId, sizeMode) {
    var _a;
    let layoutJson = appConfig.layouts[layoutId];
    while ((layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) && [jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Screen, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget].includes(layoutJson.parent.type)) {
        const layoutInfo = findParentLayoutInfo({ layoutId }, appConfig, sizeMode);
        layoutId = layoutInfo === null || layoutInfo === void 0 ? void 0 : layoutInfo.layoutId;
        layoutJson = appConfig.layouts[layoutId];
    }
    switch ((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) === null || _a === void 0 ? void 0 : _a.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Dialog:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog, id: layoutJson.parent.id };
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Page:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: layoutJson.parent.id };
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Header:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' };
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Footer:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' };
    }
}
/**
 * Get the contents in a container. Do not search the nested container.
 */
function getContentsInContainer(appConfig, containerInfo, type, browserSizeMode, withPending = false) {
    var _a, _b, _c, _d, _e, _f;
    let layoutId;
    switch (containerInfo.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page:
            layoutId = findLayoutId((_b = (_a = appConfig.pages) === null || _a === void 0 ? void 0 : _a[containerInfo.id]) === null || _b === void 0 ? void 0 : _b.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header:
            layoutId = findLayoutId((_c = appConfig.header) === null || _c === void 0 ? void 0 : _c.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer:
            layoutId = findLayoutId((_d = appConfig.footer) === null || _d === void 0 ? void 0 : _d.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.View:
            layoutId = findLayoutId((_f = (_e = appConfig.views) === null || _e === void 0 ? void 0 : _e[containerInfo.id]) === null || _f === void 0 ? void 0 : _f.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog:
            layoutId = findLayoutId(appConfig.dialogs[containerInfo.id].layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenMain:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenPanel:
            if (!appConfig.screens || !appConfig.screens[containerInfo.id]) {
                return [];
            }
            const mainLayoutId = findLayoutId(appConfig.screens[containerInfo.id].main.layout, browserSizeMode, appConfig.mainSizeMode);
            if (!mainLayoutId) {
                return [];
            }
            const mainContents = getContentsInLayoutWithRecrusiveLayouts(appConfig, mainLayoutId, type, browserSizeMode, withPending);
            if (appConfig.screens[containerInfo.id].panel) {
                const panelLayoutId = findLayoutId(appConfig.screens[containerInfo.id].panel.layout, browserSizeMode, appConfig.mainSizeMode);
                const panelContents = getContentsInLayoutWithRecrusiveLayouts(appConfig, panelLayoutId, type, browserSizeMode, withPending);
                return mainContents.concat(panelContents);
            }
            return mainContents;
    }
}
/**
 * Get the contents in a container. Search the whole layout tree.
 */
function getContentsInContainerRecursive(appConfig, containerInfo, type, browserSizeMode, withPending = false) {
    var _a, _b, _c, _d, _e, _f;
    let layoutId;
    switch (containerInfo.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page:
            layoutId = findLayoutId((_b = (_a = appConfig.pages) === null || _a === void 0 ? void 0 : _a[containerInfo.id]) === null || _b === void 0 ? void 0 : _b.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header:
            layoutId = findLayoutId((_c = appConfig.header) === null || _c === void 0 ? void 0 : _c.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer:
            layoutId = findLayoutId((_d = appConfig.footer) === null || _d === void 0 ? void 0 : _d.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.View:
            layoutId = findLayoutId((_f = (_e = appConfig.views) === null || _e === void 0 ? void 0 : _e[containerInfo.id]) === null || _f === void 0 ? void 0 : _f.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog:
            layoutId = findLayoutId(appConfig.dialogs[containerInfo.id].layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenMain:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenPanel:
            if (!appConfig.screens || !appConfig.screens[containerInfo.id]) {
                return [];
            }
            const mainLayoutId = findLayoutId(appConfig.screens[containerInfo.id].main.layout, browserSizeMode, appConfig.mainSizeMode);
            if (!mainLayoutId) {
                return [];
            }
            const mainContents = getContentsInLayoutRecursive(appConfig, mainLayoutId, type, browserSizeMode);
            if (appConfig.screens[containerInfo.id].panel) {
                const panelLayoutId = findLayoutId(appConfig.screens[containerInfo.id].panel.layout, browserSizeMode, appConfig.mainSizeMode);
                const panelContents = getContentsInLayoutRecursive(appConfig, panelLayoutId, type, browserSizeMode);
                return mainContents.concat(panelContents);
            }
            return mainContents;
    }
}
/**
 * Get the contents in a container with more options, search the whole layout tree.
 *
 * header, footer and the current page body are considered as one container.
 *
 * @param options
 *    the currentPageId will be used if the container is header/footer.
 */
function getContentsInContainerRecursiveAdv(appConfig, containerInfo, type, browserSizeMode, options) {
    const getContentsInOneContainer = (_containerInfo) => {
        let ids = [];
        if (options.includeOtherSizeMode) {
            ids = ids.concat(getContentsInContainerRecursive(appConfig, _containerInfo, type, jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large, options.includePending), getContentsInContainerRecursive(appConfig, _containerInfo, type, jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium, options.includePending), getContentsInContainerRecursive(appConfig, _containerInfo, type, jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small, options.includePending));
        }
        else {
            ids = getContentsInContainerRecursive(appConfig, _containerInfo, type, browserSizeMode, options.includePending);
        }
        ids = Array.from(new Set(ids));
        return ids;
    };
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog) {
        return getContentsInOneContainer(containerInfo);
    }
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page) {
        const pageJson = appConfig.pages[containerInfo.id];
        let ids = getContentsInOneContainer(containerInfo);
        if (pageJson.header) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' }));
        }
        if (pageJson.footer) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' }));
        }
        ids = Array.from(new Set(ids));
        return ids;
    }
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header) {
        const pageJson = appConfig.pages[options.currentPageId];
        let ids = getContentsInOneContainer(containerInfo).concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: options.currentPageId }));
        if (pageJson === null || pageJson === void 0 ? void 0 : pageJson.footer) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' }));
        }
        ids = Array.from(new Set(ids));
        return ids;
    }
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer) {
        const pageJson = appConfig.pages[options.currentPageId];
        let ids = getContentsInOneContainer(containerInfo).concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: options.currentPageId }));
        if (pageJson === null || pageJson === void 0 ? void 0 : pageJson.header) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' }));
        }
        ids = Array.from(new Set(ids));
        return ids;
    }
}
/**
 * Return the layoutId for specific sizeMode. If the sizeMode does not exist, return the main sizeMode layoutId.
 * @param layouts
 * @param browserSizeMode
 * @param mainSizeMode
 */
function findLayoutId(layouts, browserSizeMode, mainSizeMode) {
    if (!layouts) {
        return null;
    }
    return layouts[browserSizeMode] || layouts[mainSizeMode];
}
/**
 * If the content has only one parent, return it directly.
 * If the content has multiple parents, these parents must be contained in a widget's layout, return the widget's parent.
 * @param appConfig
 * @param id
 * @param type
 * @param sizeMode
 * @param withPending
 * @returns
 */
function getLayoutInfoHoldContent(appConfig, id, type, sizeMode, withPending = true) {
    var _a, _b, _c, _d, _e;
    switch (type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            {
                const sg = appConfig.screenGroups[id];
                const layoutInfo = (_a = sg.parent) === null || _a === void 0 ? void 0 : _a[sizeMode];
                const layoutItem = findLayoutItem(appConfig, layoutInfo);
                return withPending || !(layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.isPending) ? layoutInfo : null;
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            {
                let content;
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                    content = appConfig.widgets[id];
                }
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
                    content = appConfig.sections[id];
                }
                if (((_c = (_b = content === null || content === void 0 ? void 0 : content.parent) === null || _b === void 0 ? void 0 : _b[sizeMode]) === null || _c === void 0 ? void 0 : _c.length) === 1) {
                    const layoutInfo = content.parent[sizeMode][0];
                    const layoutItem = findLayoutItem(appConfig, layoutInfo);
                    return withPending || !(layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.isPending) ? layoutInfo : null;
                }
                if (((_e = (_d = content === null || content === void 0 ? void 0 : content.parent) === null || _d === void 0 ? void 0 : _d[sizeMode]) === null || _e === void 0 ? void 0 : _e.length) > 1) {
                    // find grand parnet
                    const layoutInfo = content.parent[sizeMode][0];
                    const parentLayoutJson = appConfig.layouts[layoutInfo.layoutId];
                    if (parentLayoutJson === null || parentLayoutJson === void 0 ? void 0 : parentLayoutJson.parent) {
                        return getLayoutInfoHoldContent(appConfig, parentLayoutJson.parent.id, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode, withPending);
                    }
                }
            }
    }
    return null;
}
/**
 * In one layout, one widget/section is NOT allowed be put in more than one layout item.
 * However, in widget that has layouts, one widget/section may be put in multiple layouts.
 *
 * if `sizeMode` is passed in, return the items in the size mode only, else return all items
 * @param appConfig
 * @param type
 * @param id
 * @param sizeMode
 */
function getLayoutInfosHoldcontent(appConfig, type, id, sizeMode) {
    switch (type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            {
                const sg = appConfig.screenGroups[id];
                if (sg.parent) {
                    if (sizeMode) {
                        return [sg.parent[sizeMode]];
                    }
                    return Object.values(sg.parent);
                }
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            {
                let content;
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                    content = appConfig.widgets[id];
                }
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
                    content = appConfig.sections[id];
                }
                if (content === null || content === void 0 ? void 0 : content.parent) { // placeholder has no content
                    if (sizeMode) {
                        return content.parent[sizeMode];
                    }
                    const result = [];
                    Object.values(content.parent).forEach((layoutInfos) => {
                        result.push(...layoutInfos);
                    });
                    return result;
                }
            }
    }
    return [];
}
/**
 * Find a widget id (parent widget id) that the widget layout contains the widgetId/sectionId.
 * Return the direct parent only.
 * @param appConfig
 * @param id the widget/section id
 * @param type
 * @param sizeMode
 */
function getParentWidgetIdOfContent(appConfig, id, type, sizeMode) {
    var _a, _b, _c, _d, _e, _f, _g;
    let parentLayoutId;
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widgetJson = appConfig.widgets[id];
        parentLayoutId = (_c = (_b = (_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.parent) === null || _a === void 0 ? void 0 : _a[sizeMode]) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.layoutId;
    }
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        const sectionJson = appConfig.sections[id];
        parentLayoutId = (_f = (_e = (_d = sectionJson === null || sectionJson === void 0 ? void 0 : sectionJson.parent) === null || _d === void 0 ? void 0 : _d[sizeMode]) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.layoutId;
    }
    if (parentLayoutId) {
        const layoutJson = appConfig.layouts[parentLayoutId];
        if (((_g = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) === null || _g === void 0 ? void 0 : _g.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget) {
            return layoutJson.parent.id;
        }
    }
    return null;
}
/**
 * Get children widgets/sections in a widget, find one level only. Includes all size mode
 * @param appConfig
 * @param parentWidgetId
 * @param type
 */
function getChildrenContents(appConfig, parentWidgetId, type, withPending) {
    const parentWidgetJson = appConfig.widgets[parentWidgetId];
    if (!parentWidgetJson.layouts) {
        return [];
    }
    let ret = [];
    Object.keys(parentWidgetJson.layouts).forEach(layoutName => {
        Object.keys(parentWidgetJson.layouts[layoutName]).forEach(sizeMode => {
            const layoutJson = appConfig.layouts[parentWidgetJson.layouts[layoutName][sizeMode]];
            ret = ret.concat(getContentsInLayout(layoutJson, type, withPending));
        });
    });
    // remove duplicates
    return Array.from(new Set(ret));
}
/**
 * Return the layoutInfo for the widget/section, there may be multiple layoutInfos for the widget/section.
 *
 * One widget/section is allowed to be put in one layout only one time, but it's allowed be put in multiple layouts.
 * There are 2 cases for multiple layouts:
 *    * One widget/section is allowed to be put in multiple size mode (this function is for one size mode only, so we don't consider this case)
 *    * In one size mode, one widget (i.e. List widget) may have multiple state layouts to hold the same widget.
 * @param appConfig
 * @param contentId
 * @param type
 */
function getContentLayoutInfosInOneSizeMode(appConfig, contentId, type, sizeMode) {
    var _a, _b, _c;
    switch (type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            {
                const sg = appConfig.screenGroups[contentId];
                if ((_a = sg.parent) === null || _a === void 0 ? void 0 : _a[sizeMode]) {
                    return [sg.parent[sizeMode]];
                }
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            {
                let content;
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                    content = appConfig.widgets[contentId];
                }
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
                    content = appConfig.sections[contentId];
                }
                if (((_c = (_b = content === null || content === void 0 ? void 0 : content.parent) === null || _b === void 0 ? void 0 : _b[sizeMode]) === null || _c === void 0 ? void 0 : _c.length) > 0) {
                    return content.parent[sizeMode];
                }
            }
    }
    return [];
}
/**
 * Return the size mode of the layout. Because under one size mode, only widget may have multiple layouts,
 * and this function is used only for widgets that have layouts, so pass widget id to make the search easy.
 * @param appConfig
 * @param layoutId
 * @param widgetId
 */
function getBrowserSizeModeByLayoutIdAndWidgetId(appConfig, layoutId, widgetId) {
    const widgetJson = appConfig.widgets[widgetId];
    if (!widgetJson)
        return undefined;
    let sizeMode;
    // eslint-disable-next-line
    Object.keys(widgetJson.layouts).find(name => {
        // eslint-disable-next-line
        const res = Object.keys(widgetJson.layouts[name]).find(device => {
            if (widgetJson.layouts[name][device] === layoutId) {
                sizeMode = device;
                return true;
            }
        });
        if (res) {
            return true;
        }
    });
    return sizeMode;
}
/**
 * Get the size mode that the layout belongs to
 */
function getBrowserSizeModeByLayoutId(appConfig, layoutId) {
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils.getSizeModeOfALayout(appConfig, layoutId);
}
/**
 * Find all layoutInfos that the content id, section or widget, is equal to each other in the widget on the browserSizeMode
 *
 * @param appConfig
 * @param layoutInfo
 * @param parentWidgetId
 * @param sizeMode
 */
function getRelatedLayoutInfosInWidgetByLayoutInfo(appConfig, layoutInfo, parentWidgetId, sizeMode) {
    const parentWidget = appConfig.widgets[parentWidgetId];
    if (!parentWidget)
        return [];
    const layoutItem = appConfig.layouts[layoutInfo.layoutId] &&
        appConfig.layouts[layoutInfo.layoutId].content &&
        appConfig.layouts[layoutInfo.layoutId].content[layoutInfo.layoutItemId];
    if (!layoutItem)
        return [];
    const contentType = layoutItem.type;
    let contentId;
    // No need to deal with screen group as it cannot be placed in a layout widget
    if (contentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        contentId = layoutItem.sectionId;
    }
    else if (contentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        contentId = layoutItem.widgetId;
    }
    // widgetId may be undefined for placeholder
    if (!contentId) {
        if (checkIsLayoutInfoInWidget(appConfig, parentWidgetId, layoutInfo)) {
            return [layoutInfo];
        }
        else {
            return [];
        }
    }
    return getContentLayoutInfosInWidget(appConfig, contentId, contentType, parentWidgetId, sizeMode);
}
/**
 * Same as `getRelatedLayoutInfosInWidgetByLayoutInfo`, but return the layout items
 * @param appConfig
 * @param layoutInfo
 * @param parentWId
 * @param browserSizeMode
 */
function getRelatedLayoutItemsInWidgetByLayoutInfo(appConfig, layoutInfo, parentWId, browserSizeMode) {
    return getRelatedLayoutInfosInWidgetByLayoutInfo(appConfig, layoutInfo, parentWId, browserSizeMode).map(layoutInfo => appConfig.layouts[layoutInfo.layoutId][layoutInfo.layoutItemId]);
}
/**
 * Find layout infos in a widget that holds the specific widget or section.
 * @param appConfig
 * @param id The widget or section id to be searched
 * @param type
 * @param parentWidgetId The container widget
 * @param browserSizeMode
 */
function getContentLayoutInfosInWidget(appConfig, id, type, parentWidgetId, browserSizeMode) {
    const parentWidget = appConfig.widgets[parentWidgetId];
    if (!parentWidget || !id)
        return [];
    const items = [];
    parentWidget.layouts &&
        Object.keys(parentWidget.layouts).forEach(s => {
            const layoutId = parentWidget.layouts[s][browserSizeMode];
            const layoutJson = appConfig.layouts[layoutId];
            layoutJson &&
                layoutJson.content &&
                Object.keys(layoutJson.content).forEach(key => {
                    const layoutEle = layoutJson.content[key];
                    if (layoutEle.type === type && (layoutEle.widgetId === id || layoutEle.sectionId === id || layoutEle.screenGroupId === id)) {
                        items.push({
                            layoutId: layoutJson.id,
                            layoutItemId: layoutEle.id
                        });
                    }
                    else if (layoutEle.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                        const wJson = appConfig.widgets[layoutEle.widgetId];
                        if (wJson && wJson.manifest.widgetType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout) {
                            items.push(...getContentLayoutInfosInWidget(appConfig, id, type, wJson.id, browserSizeMode));
                        }
                    }
                });
        });
    return items;
}
function checkIsLayoutInfoInWidget(appConfig, parentWId, layoutInfo) {
    const parentWidget = appConfig.widgets[parentWId];
    if (!parentWidget)
        return false;
    let find = false;
    parentWidget.layouts &&
        Object.keys(parentWidget.layouts).some(layoutName => {
            return Object.keys(parentWidget.layouts[layoutName]).some(sizeMode => {
                const layoutId = parentWidget.layouts[layoutName][sizeMode];
                const layoutItemIds = getLayoutItemIds(appConfig, layoutId, true);
                return layoutItemIds.some(itemId => {
                    if (layoutInfo.layoutId === layoutId && layoutInfo.layoutItemId === itemId) {
                        find = true;
                        return true;
                    }
                    return false;
                });
            });
        });
    return find;
}
/**
 * Return the widget/section ids that in the same container with the widget
 * @param appConfig
 * @param widgetId
 */
function getContentsInTheSameContainer(appConfig, id, type, retType, sizeMode, withPending = false) {
    const containerInfo = getContentContainerInfo(appConfig, id, type, sizeMode, withPending);
    if (!containerInfo) {
        return [];
    }
    return getContentsInContainer(appConfig, containerInfo, retType, sizeMode, withPending);
}
/**
 * Return the widget/section ids that in the same root container with the widget
 * @param appConfig
 * @param widgetId
 */
function getContentsInTheSameRootContainer(appConfig, id, type, retType, sizeMode, withPending = false) {
    const containerInfo = getContentRootContainerInfo(appConfig, id, type, sizeMode, withPending);
    if (!containerInfo) {
        return [];
    }
    return getContentsInContainerRecursive(appConfig, containerInfo, retType, sizeMode, withPending);
}
function getBlockAnchorPointsInPage(appConfig, pageId, sizeMode) {
    var _a, _b;
    const pageJson = appConfig.pages[pageId];
    const layoutId = (_a = pageJson === null || pageJson === void 0 ? void 0 : pageJson.layout) === null || _a === void 0 ? void 0 : _a[sizeMode];
    const layoutJson = appConfig.layouts[layoutId];
    const blocks = [];
    if ((layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
        Object.keys((_b = layoutJson.content) !== null && _b !== void 0 ? _b : {}).sort().forEach(layoutItemId => {
            var _a;
            const layoutItem = layoutJson.content[layoutItemId];
            if (layoutItem.isPending || ((_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.isFloating)) {
                return;
            }
            if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                const anchor = generateBlockAnchorPoint(appConfig, { layoutId, layoutItemId });
                if (anchor) {
                    blocks.push(anchor);
                }
            }
        });
    }
    return blocks;
}
function getScreenAnchorPointsInPage(appConfig, pageId, sizeMode) {
    var _a, _b;
    const pageJson = appConfig.pages[pageId];
    const layoutId = (_a = pageJson === null || pageJson === void 0 ? void 0 : pageJson.layout) === null || _a === void 0 ? void 0 : _a[sizeMode];
    const layoutJson = appConfig.layouts[layoutId];
    const screenGroups = [];
    if ((layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
        Object.keys((_b = layoutJson.content) !== null && _b !== void 0 ? _b : {}).sort().forEach(layoutItemId => {
            var _a;
            const layoutItem = layoutJson.content[layoutItemId];
            if (layoutItem.isPending || ((_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.isFloating)) {
                return;
            }
            if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
                const screenGroup = appConfig.screenGroups[layoutItem.screenGroupId];
                const screens = [];
                screenGroup === null || screenGroup === void 0 ? void 0 : screenGroup.screens.forEach(screenId => {
                    const anchor = generateScreenAnchorPoint(appConfig, layoutId, screenId);
                    if (anchor) {
                        screens.push(anchor);
                    }
                });
                screenGroups.push({ id: screenGroup.id, label: screenGroup.label, screens });
            }
        });
    }
    return screenGroups;
}
function generateBlockAnchorPoint(appConfig, layoutInfo) {
    const { layoutId, layoutItemId } = layoutInfo;
    const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
    const widgetJson = appConfig.widgets[layoutItem.widgetId];
    if (widgetJson) {
        return { label: widgetJson.label, id: `${layoutId}_block_${layoutItemId}` };
    }
    return null;
}
function generateScreenAnchorPoint(appConfig, layoutId, screenId) {
    const screenJson = appConfig.screens[screenId];
    if (screenJson) {
        return { label: screenJson.label, id: `${layoutId}_screen_${screenId}` };
    }
    return null;
}
/**
 *
 * @param appConfig
 * @param currentContainerType Dialog or Page
 * @param currentId dialog or page id
 */
function getMapWidgets(appConfig, sizeMode, currentContainerType, currentId) {
    const flatContainerMaps = [];
    // if map is in header/footer, put them in the first current page only
    const currentItem = {
        id: currentId,
        type: currentContainerType,
        maps: getContentsInContainerRecursiveAdv(appConfig, { type: currentContainerType, id: currentId }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode, { includePending: false, includeOtherSizeMode: false })
            .filter(widgetId => appConfig.widgets[widgetId].manifest.properties.canCreateMapView)
    };
    flatContainerMaps.push(currentItem);
    Object.keys(appConfig.pages).forEach(pageId => {
        if (pageId === currentId) {
            return;
        }
        const item = {
            id: pageId,
            type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page,
            maps: getContentsInContainerRecursive(appConfig, { id: pageId, type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode)
                .filter(widgetId => appConfig.widgets[widgetId].manifest.properties.canCreateMapView)
        };
        flatContainerMaps.push(item);
    });
    Object.keys(appConfig.dialogs || {}).forEach(dlgId => {
        if (dlgId === currentId) {
            return;
        }
        const item = {
            id: dlgId,
            type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog,
            maps: getContentsInContainerRecursive(appConfig, { id: dlgId, type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode)
                .filter(widgetId => appConfig.widgets[widgetId].manifest.properties.canCreateMapView)
        };
        flatContainerMaps.push(item);
    });
    return flatContainerMaps;
}


/***/ }),

/***/ "./jimu-layouts/lib/search/index.ts":
/*!******************************************!*\
  !*** ./jimu-layouts/lib/search/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   findLayoutId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.findLayoutId),
/* harmony export */   findLayoutItem: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.findLayoutItem),
/* harmony export */   findParentLayoutInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.findParentLayoutInfo),
/* harmony export */   getBlockAnchorPointsInPage: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getBlockAnchorPointsInPage),
/* harmony export */   getBrowserSizeModeByLayoutId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getBrowserSizeModeByLayoutId),
/* harmony export */   getBrowserSizeModeByLayoutIdAndWidgetId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getBrowserSizeModeByLayoutIdAndWidgetId),
/* harmony export */   getChildrenContents: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getChildrenContents),
/* harmony export */   getContentContainerInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentContainerInfo),
/* harmony export */   getContentIdInLayoutItem: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentIdInLayoutItem),
/* harmony export */   getContentLayoutInfosInOneSizeMode: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentLayoutInfosInOneSizeMode),
/* harmony export */   getContentLayoutItem: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentLayoutItem),
/* harmony export */   getContentRootContainerInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentRootContainerInfo),
/* harmony export */   getContentsInContainer: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInContainer),
/* harmony export */   getContentsInContainerRecursive: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInContainerRecursive),
/* harmony export */   getContentsInContainerRecursiveAdv: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInContainerRecursiveAdv),
/* harmony export */   getContentsInLayout: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInLayout),
/* harmony export */   getContentsInLayoutRecursive: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInLayoutRecursive),
/* harmony export */   getContentsInLayoutWithRecrusiveLayouts: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInLayoutWithRecrusiveLayouts),
/* harmony export */   getContentsInTheSameContainer: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInTheSameContainer),
/* harmony export */   getContentsInTheSameRootContainer: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInTheSameRootContainer),
/* harmony export */   getLayoutInfosByType: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getLayoutInfosByType),
/* harmony export */   getLayoutInfosHoldcontent: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getLayoutInfosHoldcontent),
/* harmony export */   getLayoutItemIds: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemIds),
/* harmony export */   getMapWidgets: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getMapWidgets),
/* harmony export */   getParentWidgetIdOfContent: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getParentWidgetIdOfContent),
/* harmony export */   getPendingLayoutItemsFromOtherSizeMode: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsFromOtherSizeMode),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInDialog: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsFromOtherSizeModeInDialog),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInPage: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsFromOtherSizeModeInPage),
/* harmony export */   getPendingLayoutItemsInDialog: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsInDialog),
/* harmony export */   getPendingLayoutItemsInLayoutWithDeep: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsInLayoutWithDeep),
/* harmony export */   getPendingLayoutItemsInPage: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsInPage),
/* harmony export */   getRelatedLayoutInfosInWidgetByLayoutInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getRelatedLayoutInfosInWidgetByLayoutInfo),
/* harmony export */   getRelatedLayoutItemsInWidgetByLayoutInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getRelatedLayoutItemsInWidgetByLayoutInfo),
/* harmony export */   getScreenAnchorPointsInPage: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getScreenAnchorPointsInPage),
/* harmony export */   getSectionInfo: () => (/* reexport safe */ _section__WEBPACK_IMPORTED_MODULE_1__.getSectionInfo),
/* harmony export */   getWidgetIdThatUseTheLayoutId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getWidgetIdThatUseTheLayoutId)
/* harmony export */ });
/* harmony import */ var _contents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./contents */ "./jimu-layouts/lib/search/contents.ts");
/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./section */ "./jimu-layouts/lib/search/section.ts");
/* harmony import */ var _pending__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pending */ "./jimu-layouts/lib/search/pending.ts");





/***/ }),

/***/ "./jimu-layouts/lib/search/pending.ts":
/*!********************************************!*\
  !*** ./jimu-layouts/lib/search/pending.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPendingLayoutItemsFromOtherSizeMode: () => (/* binding */ getPendingLayoutItemsFromOtherSizeMode),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInDialog: () => (/* binding */ getPendingLayoutItemsFromOtherSizeModeInDialog),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInPage: () => (/* binding */ getPendingLayoutItemsFromOtherSizeModeInPage),
/* harmony export */   getPendingLayoutItemsInDialog: () => (/* binding */ getPendingLayoutItemsInDialog),
/* harmony export */   getPendingLayoutItemsInLayoutWithDeep: () => (/* binding */ getPendingLayoutItemsInLayoutWithDeep),
/* harmony export */   getPendingLayoutItemsInPage: () => (/* binding */ getPendingLayoutItemsInPage)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _contents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contents */ "./jimu-layouts/lib/search/contents.ts");


/**
 * Return the pending widgets/sections in the current size mode.
 * @param appConfig
 * @param pageId
 * @param sizeMode
 * @param pagePart
 */
function getPendingLayoutItemsInPage(appConfig, pageId, sizeMode, pagePart) {
    const pageJson = appConfig.pages[pageId];
    if (!pageJson) {
        return [];
    }
    if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header) {
        if (!pageJson.header || !appConfig.header) {
            return [];
        }
        return getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.header.layout[sizeMode], sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer) {
        if (!pageJson.footer || !appConfig.footer) {
            return [];
        }
        return getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.footer.layout[sizeMode], sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body) {
        return getPendingLayoutItemsInLayoutWithDeep(appConfig, pageJson.layout[sizeMode], sizeMode);
    }
    return [];
}
/**
 * Return the pending widgets/sections from other size mode.
 * The pending means: the widgets/sections are in page's other mode but are not in the current mode (passed in)
 * @param appConfig
 * @param pageId
 * @param type
 * @param sizeMode
 */
function getPendingLayoutItemsFromOtherSizeModeInPage(appConfig, pageId, sizeMode, pagePart) {
    const pageJson = appConfig.pages[pageId];
    if (!pageJson) {
        return [];
    }
    if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header) {
        if (!pageJson.header || !appConfig.header) {
            return [];
        }
        return getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.header.layout, sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer) {
        if (!pageJson.footer || !appConfig.footer) {
            return [];
        }
        return getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.footer.layout, sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body) {
        return getPendingLayoutItemsFromOtherSizeMode(appConfig, pageJson.layout, sizeMode);
    }
    return [];
}
/**
 * Return the pending widgets/sections in the current size mode.
 * @param appConfig
 * @param dialogId
 * @param sizeMode
 */
function getPendingLayoutItemsInDialog(appConfig, dialogId, sizeMode) {
    const dialogJson = appConfig.dialogs[dialogId];
    if (!dialogJson) {
        return [];
    }
    return getPendingLayoutItemsInLayoutWithDeep(appConfig, dialogJson.layout[sizeMode], sizeMode);
}
/**
 * Return the pending widgets/sections from other size mode.
 * The pending means: the widgets/sections are in dialog's other mode but are not in the current mode (passed in)
 * @param appConfig
 * @param dialogId
 * @param sizeMode
 */
function getPendingLayoutItemsFromOtherSizeModeInDialog(appConfig, dialogId, sizeMode) {
    const dialogJson = appConfig.dialogs[dialogId];
    if (!dialogJson) {
        return [];
    }
    return getPendingLayoutItemsFromOtherSizeMode(appConfig, dialogJson.layout, sizeMode);
}
/**
 * Return the pending widgets/sections in the current size mode.
 * @param appConfig
 * @param layoutId
 * @param sizeMode the current size mode
 */
function getPendingLayoutItemsInLayoutWithDeep(appConfig, layoutId, sizeMode) {
    let retItems = [];
    const widgetItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, true);
    widgetItems.forEach(widgetItem => {
        const item = appConfig.layouts[widgetItem.layoutId].content[widgetItem.layoutItemId];
        if (item.isPending) {
            retItems.push(widgetItem);
        }
        else {
            if (appConfig.widgets[item.widgetId].layouts) {
                Object.keys(appConfig.widgets[item.widgetId].layouts).forEach(layoutName => {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.widgets[item.widgetId].layouts[layoutName][sizeMode], sizeMode));
                });
            }
        }
    });
    const sectionItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, true);
    sectionItems.forEach(sectionItem => {
        const item = appConfig.layouts[sectionItem.layoutId].content[sectionItem.layoutItemId];
        if (item.isPending) {
            retItems.push(sectionItem);
        }
        else {
            if (appConfig.sections[item.sectionId].views) {
                appConfig.sections[item.sectionId].views.forEach(viewId => {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.views[viewId].layout[sizeMode], sizeMode));
                });
            }
        }
    });
    const sgItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, true);
    sgItems.forEach(sgItem => {
        var _a, _b;
        const item = appConfig.layouts[sgItem.layoutId].content[sgItem.layoutItemId];
        if (item.isPending) {
            retItems.push(sgItem);
        }
        else {
            const sgId = item.screenGroupId;
            (_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[sgId].screens) === null || _b === void 0 ? void 0 : _b.forEach(screenId => {
                const screenJson = appConfig === null || appConfig === void 0 ? void 0 : appConfig.screens[screenId];
                if (screenJson.main) {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, screenJson.main.layout[sizeMode], sizeMode));
                }
                if (screenJson.panel) {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, screenJson.panel.layout[sizeMode], sizeMode));
                }
            });
        }
    });
    return retItems;
}
/**
 * Return the pending widgets/sections/screenGroups.
 * The pending means: the widgets/sections/screenGroups are in layout's other mode but are not in the current mode (passed in).
 * @param appConfig
 * @param pageId
 * @param type
 * @param sizeMode
 */
function getPendingLayoutItemsFromOtherSizeMode(appConfig, layout, sizeMode, thisWidgetIds = null, thisSectionIds = null, thisScreenGroupIds = null) {
    const retItems = [];
    if (!thisWidgetIds) {
        thisWidgetIds = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getContentsInLayoutRecursive)(appConfig, layout[sizeMode], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode, true);
    }
    if (!thisSectionIds) {
        thisSectionIds = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getContentsInLayoutRecursive)(appConfig, layout[sizeMode], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, sizeMode, true);
    }
    if (!thisScreenGroupIds) {
        thisScreenGroupIds = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getContentsInLayoutRecursive)(appConfig, layout[sizeMode], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, sizeMode, true);
    }
    const otherModes = Object.keys(jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode)
        .filter(mode => jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode[mode] !== sizeMode)
        .map(k => jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode[k]);
    otherModes.forEach(mode => {
        const widgetItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layout[mode]], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, true);
        widgetItems.forEach(widgetItem => {
            var _a;
            const item = appConfig.layouts[widgetItem.layoutId].content[widgetItem.layoutItemId];
            if (((_a = appConfig.widgets[item.widgetId].manifest) === null || _a === void 0 ? void 0 : _a.widgetType) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout &&
                thisWidgetIds.indexOf(item.widgetId) < 0) {
                !isContentExists(appConfig, retItems, widgetItem) && retItems.push(widgetItem);
            }
            else {
                if (appConfig.widgets[item.widgetId].layouts) {
                    Object.keys(appConfig.widgets[item.widgetId].layouts).forEach(layoutName => {
                        getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.widgets[item.widgetId].layouts[layoutName], sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(widgetItem => {
                            !isContentExists(appConfig, retItems, widgetItem) && retItems.push(widgetItem);
                        });
                    });
                }
            }
        });
        const sectionItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layout[mode]], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, true);
        sectionItems.forEach(sectionItem => {
            const item = appConfig.layouts[sectionItem.layoutId].content[sectionItem.layoutItemId];
            if (thisSectionIds.indexOf(item.sectionId) < 0) {
                !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
            }
            else {
                if (appConfig.sections[item.sectionId].views) {
                    appConfig.sections[item.sectionId].views.forEach(viewId => {
                        getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.views[viewId].layout, sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(sectionItem => {
                            !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
                        });
                    });
                }
            }
        });
        const sgItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layout[mode]], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, true);
        sgItems.forEach(sgItem => {
            var _a, _b;
            const item = appConfig.layouts[sgItem.layoutId].content[sgItem.layoutItemId];
            if (thisScreenGroupIds.indexOf(item.screenGroupId) < 0) {
                !isContentExists(appConfig, retItems, sgItem) && retItems.push(sgItem);
            }
            else {
                if ((_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[item.screenGroupId]) === null || _b === void 0 ? void 0 : _b.screens) {
                    appConfig.screenGroups[item.screenGroupId].screens.forEach(screenId => {
                        var _a;
                        const screenJson = (_a = appConfig.screens) === null || _a === void 0 ? void 0 : _a[screenId];
                        if (screenJson === null || screenJson === void 0 ? void 0 : screenJson.main) {
                            getPendingLayoutItemsFromOtherSizeMode(appConfig, screenJson.main.layout, sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(sectionItem => {
                                !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
                            });
                        }
                        if (screenJson === null || screenJson === void 0 ? void 0 : screenJson.panel) {
                            getPendingLayoutItemsFromOtherSizeMode(appConfig, screenJson.panel.layout, sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(sectionItem => {
                                !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
                            });
                        }
                    });
                }
            }
        });
    });
    return retItems;
}
function isContentExists(appConfig, layoutInfos, layoutInfo) {
    const layoutItem = appConfig.layouts[layoutInfo.layoutId].content[layoutInfo.layoutItemId];
    return !!layoutInfos.find(info => {
        const item = appConfig.layouts[info.layoutId].content[info.layoutItemId];
        return (item.type === layoutItem.type &&
            ((item.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && item.widgetId === layoutItem.widgetId) ||
                (item.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section && item.sectionId === layoutItem.sectionId)));
    });
}


/***/ }),

/***/ "./jimu-layouts/lib/search/section.ts":
/*!********************************************!*\
  !*** ./jimu-layouts/lib/search/section.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSectionInfo: () => (/* binding */ getSectionInfo)
/* harmony export */ });
function getSectionInfo(state, sectionId) {
    var _a;
    const section = state.appConfig.sections[sectionId];
    if (!section || !section.views) {
        return null;
    }
    const navInfo = (_a = state.appRuntimeInfo.sectionNavInfos) === null || _a === void 0 ? void 0 : _a[section.id];
    let activeView;
    if (!navInfo) {
        const activeViewId = section.views[0];
        activeView = state.appConfig.views[activeViewId];
    }
    return {
        sectionId,
        navInfo,
        activeView,
        views: section.views,
        sectionStyle: section.style,
        transition: section.transition,
        autoPlay: section.autoPlay,
        interval: section.interval,
        loop: section.loop,
        focusable: section.focusable
    };
}


/***/ }),

/***/ "./jimu-layouts/lib/translations/default.ts":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/translations/default.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    previousView: 'Previous view',
    nextView: 'Next view',
    originTL: 'Top left as origin',
    originTR: 'Top right as origin',
    originBL: 'Bottom left as origin',
    originBR: 'Bottom right as origin',
    alignLeft: 'Align left',
    alignRight: 'Align right',
    alignTop: 'Align top',
    alignCenter: 'Align center',
    alignHCenter: 'Horizontal center',
    alignVCenter: 'Vertical center',
    alignBottom: 'Align bottom',
    alignStretch: 'Align stretch',
    sendBackward: 'Send backward',
    bringForward: 'Bring forward',
    sendToBack: 'Send to back',
    bringToFront: 'Bring to front',
    zoomoutFixed: 'Zoom out fixed',
    order: 'Order',
    moveToLeft: 'Move to left',
    moveToRight: 'Move to right',
    moveToTop: 'Move to top',
    moveToBottom: 'Move to bottom',
    addView: 'New view',
    duplicateScreen: 'Duplicate screen',
    deleteScreen: 'Delete screen',
    applyToFirstPanel: 'Apply to the first panel',
    deleteView: 'Delete view',
    duplicateView: 'Duplicate view',
    insertABlock: 'Insert block',
    insertAScreenGroup: 'Insert screen group',
    moveup: 'Move up',
    movedown: 'Move down',
    chooseTemplate: 'Choose a {type} template',
    chooseHeaderTemplate: 'Choose a header template',
    chooseFooterTemplate: 'Choose a footer template',
    dropWidgetToAdd: 'Or drag a widget here',
    snapToLeft: 'Snap to left',
    snapToTop: 'Snap to top',
    snapToBottom: 'Snap to bottom',
    snapToRight: 'Snap to right',
    fullWidth: 'Full width',
    fullHeight: 'Full height',
    fullSize: 'Full size',
    restoreSize: 'Restore size',
    pendingTip: 'Move to the pending list',
    setting: 'Settings',
    dragToMove: 'Drag to move {label}',
    lockLayout: 'Lock position and size',
    unlockLayout: 'Unlock position and size',
    editHeader: 'Edit header',
    editFooter: 'Edit footer',
    transform: 'Transform',
    rotation: 'Rotation',
    angle: 'Angle',
    floating: 'Pin',
    sinking: 'Unpin',
    floatingArea: 'Floating area',
    changeToAuto: 'Change to auto',
    changeToCustom: 'Change to custom',
    positionType: 'Position type',
    sticky: 'Sticky',
    fixed: 'Fixed',
    flow: 'Flow',
    stack: 'Stack',
    fixedAtTop: 'Floating at the top when scrolling',
    actNormal: 'Act as normal widget',
    hideInDesignView: 'Hide in design view',
    showInDesignView: 'Show in design view',
    unlockGridItem: 'Unlock this widget to reorganize its internal widgets.',
    lockGridItem: 'Lock this widget.',
    splitHorizontally: 'Split horizontally',
    splitVertically: 'Split vertically'
});


/***/ }),

/***/ "./jimu-layouts/lib/types.ts":
/*!***********************************!*\
  !*** ./jimu-layouts/lib/types.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CLICK_TOLRERANCE: () => (/* binding */ CLICK_TOLRERANCE),
/* harmony export */   COLS_IN_ONE_ROW: () => (/* binding */ COLS_IN_ONE_ROW),
/* harmony export */   CONTEXT_MENU_ICON_SIZE: () => (/* binding */ CONTEXT_MENU_ICON_SIZE),
/* harmony export */   CONTEXT_MENU_ITEM_SIZE: () => (/* binding */ CONTEXT_MENU_ITEM_SIZE),
/* harmony export */   DEFAULT_AUTOPLAY_INTERVAL: () => (/* binding */ DEFAULT_AUTOPLAY_INTERVAL),
/* harmony export */   LayoutItemSizeModes: () => (/* binding */ LayoutItemSizeModes),
/* harmony export */   LayoutZIndex: () => (/* binding */ LayoutZIndex),
/* harmony export */   MIN_LAYOUT_ITEM_SIZE: () => (/* binding */ MIN_LAYOUT_ITEM_SIZE),
/* harmony export */   OrderAdjustType: () => (/* binding */ OrderAdjustType)
/* harmony export */ });
var OrderAdjustType;
(function (OrderAdjustType) {
    OrderAdjustType[OrderAdjustType["BringForward"] = 0] = "BringForward";
    OrderAdjustType[OrderAdjustType["SendBackward"] = 1] = "SendBackward";
    OrderAdjustType[OrderAdjustType["BringToFront"] = 2] = "BringToFront";
    OrderAdjustType[OrderAdjustType["SendToBack"] = 3] = "SendToBack";
})(OrderAdjustType || (OrderAdjustType = {}));
const COLS_IN_ONE_ROW = 12;
const CONTEXT_MENU_ITEM_SIZE = 28;
const CONTEXT_MENU_ICON_SIZE = 16;
const MIN_LAYOUT_ITEM_SIZE = 16;
const CLICK_TOLRERANCE = 5;
const DEFAULT_AUTOPLAY_INTERVAL = 3;
// 0 < zIndex < 10 is managed by component itself
var LayoutZIndex;
(function (LayoutZIndex) {
    LayoutZIndex["Auto"] = "auto";
    LayoutZIndex[LayoutZIndex["Normal"] = 0] = "Normal";
    LayoutZIndex[LayoutZIndex["BoundaryDropArea"] = 10] = "BoundaryDropArea";
    LayoutZIndex[LayoutZIndex["DragMoveTip"] = 20] = "DragMoveTip";
    LayoutZIndex[LayoutZIndex["HandlerTools"] = 30] = "HandlerTools";
    LayoutZIndex[LayoutZIndex["DraggingItem"] = 40] = "DraggingItem";
})(LayoutZIndex || (LayoutZIndex = {}));
var LayoutItemSizeModes;
(function (LayoutItemSizeModes) {
    LayoutItemSizeModes["Auto"] = "AUTO";
    LayoutItemSizeModes["Stretch"] = "STRETCH";
    LayoutItemSizeModes["Custom"] = "CUSTOM";
})(LayoutItemSizeModes || (LayoutItemSizeModes = {}));


/***/ }),

/***/ "./jimu-layouts/lib/use-viewport-intersection.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/use-viewport-intersection.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useViewportIntersection: () => (/* binding */ useViewportIntersection)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function buildThresholdList() {
    const step = 10;
    const result = [0];
    for (let i = 1; i <= step; i++) {
        result.push(i / step);
    }
    return result;
}
/**
 *
 * @param ref
 * @param rootElement
 * @param onIntersectionChange
 */
function useViewportIntersection(ref, watchViewportVisibility) {
    const observerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [isInViewport, setIsInViewport] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(true);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (observerRef.current) {
            observerRef.current.unobserve(ref);
            observerRef.current = null;
        }
        if (!watchViewportVisibility) {
            return;
        }
        const handleIntersectionChange = (entry) => {
            if (entry.target.classList.contains('playing-animation')) {
                return;
            }
            if (entry.boundingClientRect.width > 0 && entry.boundingClientRect.height > 0) {
                setIsInViewport(entry.isIntersecting);
            }
        };
        if (ref && typeof IntersectionObserver === 'function') {
            const handler = (entries) => {
                handleIntersectionChange(entries[0]);
            };
            const observer = new IntersectionObserver(handler, {
                threshold: buildThresholdList(),
                root: document,
                rootMargin: '20%'
            });
            observer.observe(ref);
            observerRef.current = observer;
            return () => {
                observerRef.current.unobserve(ref);
                observerRef.current = null;
            };
        }
    }, [ref, watchViewportVisibility]);
    return isInViewport;
}


/***/ }),

/***/ "./jimu-layouts/lib/utils.ts":
/*!***********************************!*\
  !*** ./jimu-layouts/lib/utils.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   autoBindHandlers: () => (/* binding */ autoBindHandlers),
/* harmony export */   calHeightOfLayoutItem: () => (/* binding */ calHeightOfLayoutItem),
/* harmony export */   contains: () => (/* binding */ contains),
/* harmony export */   emptyFunc: () => (/* binding */ emptyFunc),
/* harmony export */   expandStyleArray: () => (/* binding */ expandStyleArray),
/* harmony export */   fromRatio: () => (/* binding */ fromRatio),
/* harmony export */   gcd: () => (/* binding */ gcd),
/* harmony export */   getActivePagePart: () => (/* binding */ getActivePagePart),
/* harmony export */   getAppConfig: () => (/* binding */ getAppConfig),
/* harmony export */   getCurrentDialogId: () => (/* binding */ getCurrentDialogId),
/* harmony export */   getCurrentDialogRootLayoutId: () => (/* binding */ getCurrentDialogRootLayoutId),
/* harmony export */   getCurrentPageId: () => (/* binding */ getCurrentPageId),
/* harmony export */   getCurrentPageRootLayoutId: () => (/* binding */ getCurrentPageRootLayoutId),
/* harmony export */   getCurrentSizeMode: () => (/* binding */ getCurrentSizeMode),
/* harmony export */   getFooterRootLayoutId: () => (/* binding */ getFooterRootLayoutId),
/* harmony export */   getHeaderRootLayoutId: () => (/* binding */ getHeaderRootLayoutId),
/* harmony export */   getLayoutItemSizeMode: () => (/* binding */ getLayoutItemSizeMode),
/* harmony export */   getMaximumId: () => (/* binding */ getMaximumId),
/* harmony export */   getValueOfBBox: () => (/* binding */ getValueOfBBox),
/* harmony export */   handleOnebyOneAnimation: () => (/* binding */ handleOnebyOneAnimation),
/* harmony export */   intersects: () => (/* binding */ intersects),
/* harmony export */   isEmptyLayout: () => (/* binding */ isEmptyLayout),
/* harmony export */   isFunctionalWidget: () => (/* binding */ isFunctionalWidget),
/* harmony export */   isNumber: () => (/* binding */ isNumber),
/* harmony export */   isPercentage: () => (/* binding */ isPercentage),
/* harmony export */   isRTL: () => (/* binding */ isRTL),
/* harmony export */   isWidgetHasEmbeddedLayout: () => (/* binding */ isWidgetHasEmbeddedLayout),
/* harmony export */   isWidgetPlaceholder: () => (/* binding */ isWidgetPlaceholder),
/* harmony export */   mapStateToLayoutItemProps: () => (/* binding */ mapStateToLayoutItemProps),
/* harmony export */   mapStateToLayoutProps: () => (/* binding */ mapStateToLayoutProps),
/* harmony export */   mapStateToWidgetProps: () => (/* binding */ mapStateToWidgetProps),
/* harmony export */   normalizeLinearUnit: () => (/* binding */ normalizeLinearUnit),
/* harmony export */   parseAspectRatio: () => (/* binding */ parseAspectRatio),
/* harmony export */   relativeClientRect: () => (/* binding */ relativeClientRect),
/* harmony export */   replaceBoundingBox: () => (/* binding */ replaceBoundingBox),
/* harmony export */   shouldUseAspectRatio: () => (/* binding */ shouldUseAspectRatio),
/* harmony export */   toRatio: () => (/* binding */ toRatio),
/* harmony export */   updateBoundingBoxProp: () => (/* binding */ updateBoundingBoxProp)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _search_contents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search/contents */ "./jimu-layouts/lib/search/contents.ts");
/* eslint-disable prefer-const */




const emptyFunc = () => { };
function autoBindHandlers(el, fns) {
    fns.forEach(key => {
        if (el[key]) {
            el[key] = el[key].bind(el);
        }
    });
}
/**
 * Get the maximum id of the layout item which can be converted to a number.
 * @param layoutMap
 */
function getMaximumId(layoutMap) {
    let max = -1;
    if (layoutMap.content) {
        Object.keys(layoutMap.content).forEach(key => {
            const id = parseInt(key, 10);
            if (id > max) {
                max = id;
            }
        });
    }
    return max;
}
/**
 * Checks if `value` is classified as a percentage value
 * @param value
 */
function isPercentage(value) {
    return /^-?\d*(\.\d+)?%$/.test(value);
}
function isEmptyLayout(layout) {
    var _a;
    const itemIds = Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {});
    if (itemIds.length === 0) {
        return true;
    }
    const hasNonPending = itemIds.some(id => {
        const item = layout.content[id];
        return !item.isPending;
    });
    return !hasNonPending;
}
/**
 * Checks if `value` is classified as a finite number
 * @param value
 */
function isNumber(value) {
    const result = parseFloat(value);
    return !isNaN(result) && isFinite(result);
}
function getValueOfBBox(bbox, prop) {
    if ((bbox === null || bbox === void 0 ? void 0 : bbox[prop]) == null) {
        return null;
    }
    if (typeof bbox[prop] === 'string') {
        return bbox[prop];
    }
    if (isNumber(bbox[prop])) {
        return `${Math.round(parseFloat(bbox[prop]))}px`;
    }
    return null;
}
/**
 * Convert the value to percentage value in respect to the total
 * @param value
 * @param total
 */
function toRatio(value, total) {
    return `${((value * 100) / total).toFixed(1)}%`;
}
/**
 * Convert a percentage value to pixel in respect to the total
 * @param ratio
 * @param total
 */
function fromRatio(ratio, total) {
    return (parseFloat(`${ratio}`) * total) / 100;
}
const mapStateToLayoutProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state) => state.appConfig.mainSizeMode,
    (state) => state.browserSizeMode,
    (state, ownProps) => {
        var _a, _b, _c, _d, _e;
        let isCustomRoot;
        if (state.browserSizeMode === state.appConfig.mainSizeMode) {
            isCustomRoot = true;
        }
        else {
            // depend on the root layout item
            let useSizeMode;
            if ((_a = ownProps.layouts) === null || _a === void 0 ? void 0 : _a[state.browserSizeMode]) {
                useSizeMode = state.browserSizeMode;
            }
            else if ((_b = ownProps.layouts) === null || _b === void 0 ? void 0 : _b[state.appConfig.mainSizeMode]) {
                useSizeMode = state.appConfig.mainSizeMode;
            }
            const useLayoutId = (_c = ownProps.layouts) === null || _c === void 0 ? void 0 : _c[useSizeMode];
            const container = (0,_search_contents__WEBPACK_IMPORTED_MODULE_3__.getRootContainerInfoOfLayout)(state.appConfig, useLayoutId, useSizeMode);
            if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header) {
                isCustomRoot = state.appConfig.header.layout[state.browserSizeMode] != null;
            }
            else if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer) {
                isCustomRoot = state.appConfig.footer.layout[state.browserSizeMode] != null;
            }
            else if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog) {
                const dialogJson = state.appConfig.dialogs[container.id];
                isCustomRoot = dialogJson.layout[state.browserSizeMode] != null;
            }
            else if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page) {
                const pageJson = state.appConfig.pages[container.id];
                isCustomRoot = pageJson.layout[state.browserSizeMode] != null;
            }
        }
        if (isCustomRoot && ((_d = ownProps.layouts) === null || _d === void 0 ? void 0 : _d[state.browserSizeMode])) {
            const layoutId = ownProps.layouts[state.browserSizeMode];
            return state.appConfig.layouts[layoutId];
        }
        const layoutId = (_e = ownProps.layouts) === null || _e === void 0 ? void 0 : _e[state.appConfig.mainSizeMode];
        return state.appConfig.layouts[layoutId];
    }
], (mainSizeMode, browserSizeMode, layout) => ({ mainSizeMode, browserSizeMode, layout }));
const mapStateToLayoutItemProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        return (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
    },
    (state, ownProps) => {
        var _a, _b, _c, _d, _e, _f;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            const widget = state.appConfig.widgets[layoutItem.widgetId];
            return (_f = (_e = (_d = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _d === void 0 ? void 0 : _d.properties) === null || _e === void 0 ? void 0 : _e.watchViewportVisibility) !== null && _f !== void 0 ? _f : false;
        }
        return false;
    },
    (state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection; },
    (state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.animationPreview; },
    (state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.hoverPreview; },
    (_, ownProps) => ownProps.layoutId
], (layoutItem, watchViewportVisibility, selection, animationPreview, hoverPreview, layoutId) => {
    var _a;
    if (!layoutItem) {
        return {
            layoutItem: null,
            selected: false
        };
    }
    let selected = false;
    const isPending = (_a = layoutItem.isPending) !== null && _a !== void 0 ? _a : false;
    if (selection) {
        selected = selection.layoutId === layoutId && selection.layoutItemId === layoutItem.id;
    }
    const result = {
        selected,
        watchViewportVisibility,
        layoutItem: isPending ? null : layoutItem,
        autoScroll: selected ? selection.autoScroll : undefined
    };
    if (selected && (animationPreview === null || animationPreview === void 0 ? void 0 : animationPreview.layoutInfo)) {
        const { layoutId: animLayoutId, layoutItemId: animItemId } = animationPreview.layoutInfo;
        result.animationPreview = animLayoutId === layoutId && animItemId === layoutItem.id;
        result.playMode = result.animationPreview ? animationPreview.playMode : null;
        result.previewId = result.animationPreview ? animationPreview.id : null;
    }
    else if (selected && (hoverPreview === null || hoverPreview === void 0 ? void 0 : hoverPreview.layoutInfo)) {
        const { layoutId: hoverLayoutId, layoutItemId: hoverItemId } = hoverPreview.layoutInfo;
        result.hoverPreview = hoverLayoutId === layoutId && hoverItemId === layoutItem.id;
        result.previewId = result.hoverPreview ? hoverPreview.id : null;
    }
    return result;
});
const mapStateToWidgetProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            return state.appConfig.widgets[layoutItem.widgetId];
        }
    },
    (state, ownProps) => {
        var _a, _b, _c, _d;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && !layoutItem.widgetId) {
            return (_d = layoutItem.setting) === null || _d === void 0 ? void 0 : _d.placeholderStyle;
        }
    },
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            return state.widgetsRuntimeInfo[layoutItem.widgetId];
        }
    },
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && !layoutItem.widgetId) {
            return state.widgetsState[layoutItem.widgetId];
        }
    },
    (state, ownProps) => {
        var _a, _b;
        const { layoutId } = ownProps;
        const layoutJson = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId];
        if (((_b = layoutJson.parent) === null || _b === void 0 ? void 0 : _b.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget) {
            const parentWidgetId = layoutJson.parent.id;
            const widgetJson = state.appConfig.widgets[parentWidgetId];
            return /widgets\/common\/controller\/?/.test(widgetJson.uri);
        }
        return false;
    }
], (widget, placeholderStyle, widgetRuntimeInfo, widgetState, isInController) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;
    const supportInlineEditing = (_b = (_a = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.supportInlineEditing;
    return {
        hasEmbeddedLayout: ((_d = (_c = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _c === void 0 ? void 0 : _c.properties) === null || _d === void 0 ? void 0 : _d.hasEmbeddedLayout) && Object.keys((_e = widget.layouts) !== null && _e !== void 0 ? _e : {}).length > 0,
        supportInlineEditing,
        supportRepeat: (_g = (_f = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _f === void 0 ? void 0 : _f.properties) === null || _g === void 0 ? void 0 : _g.supportRepeat,
        isClassLoaded: (_h = widgetRuntimeInfo === null || widgetRuntimeInfo === void 0 ? void 0 : widgetRuntimeInfo.isClassLoaded) !== null && _h !== void 0 ? _h : false,
        isInlineEditing: supportInlineEditing && (widgetRuntimeInfo === null || widgetRuntimeInfo === void 0 ? void 0 : widgetRuntimeInfo.isInlineEditing),
        isInController,
        useDragHandler: (_l = (_k = (_j = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _j === void 0 ? void 0 : _j.properties) === null || _k === void 0 ? void 0 : _k.useDragHandler) !== null && _l !== void 0 ? _l : false,
        widgetStyle: widget != null ? widget.style : placeholderStyle,
        canCrossLayoutBoundary: (_o = (_m = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _m === void 0 ? void 0 : _m.properties) === null || _o === void 0 ? void 0 : _o.canCrossLayoutBoundary,
        hasExtension: ((_q = (_p = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _p === void 0 ? void 0 : _p.extensions) === null || _q === void 0 ? void 0 : _q.length) > 0,
        widgetJson: widget,
        widgetId: widget === null || widget === void 0 ? void 0 : widget.id,
        isFunctionalWidget: ((_r = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _r === void 0 ? void 0 : _r.widgetType) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout,
        widgetState
    };
});
function isWidgetHasEmbeddedLayout(widgetId, appConfig) {
    var _a, _b, _c, _d;
    const widget = (_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _a === void 0 ? void 0 : _a[widgetId];
    if ((_c = (_b = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _b === void 0 ? void 0 : _b.properties) === null || _c === void 0 ? void 0 : _c.hasEmbeddedLayout) {
        return Object.keys((_d = widget === null || widget === void 0 ? void 0 : widget.layouts) !== null && _d !== void 0 ? _d : {}).length > 0;
    }
    return false;
}
function isFunctionalWidget(widgetId, appConfig) {
    var _a, _b;
    const widget = (_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _a === void 0 ? void 0 : _a[widgetId];
    const type = (_b = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _b === void 0 ? void 0 : _b.widgetType;
    return type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout;
}
function isWidgetPlaceholder(appConfig, item) {
    var _a, _b;
    if (!item || item.itemType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        return false;
    }
    if (item.layoutInfo) {
        // Layout item without widgetId
        const { layoutId, layoutItemId } = item.layoutInfo;
        const layoutItem = (_b = (_a = appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId].content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        if (layoutItem && !layoutItem.widgetId) {
            return true;
        }
    }
    if (!item.layoutInfo && !item.uri) {
        // New widget without uri
        return true;
    }
    return false;
}
/**
 * Replace the values of bounding box b1 with values of b2, try to keep the unit of each property.
 * @param b1
 * @param b2
 * @param containerRect
 */
function replaceBoundingBox(b1, b2, containerRect) {
    if (!b1) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            left: isPercentage(b2.left) ? b2.left : `${Math.round(b2.left)}px`,
            right: isPercentage(b2.right) ? b2.right : `${Math.round(b2.right)}px`,
            top: isPercentage(b2.top) ? b2.top : `${Math.round(b2.top)}px`,
            bottom: isPercentage(b2.bottom) ? b2.bottom : `${Math.round(b2.bottom)}px`,
            width: isPercentage(b2.width) ? b2.width : `${Math.round(b2.width)}px`,
            height: isPercentage(b2.height) ? b2.height : `${Math.round(b2.height)}px`
        });
    }
    let result = b1;
    ['left', 'right', 'top', 'bottom', 'width', 'height'].forEach(key => {
        if (result[key] != null) {
            result = updateBoundingBoxProp(key, result, b2[key], containerRect);
        }
        else if (b2[key] != null) {
            result = result.set(key, `${Math.round(b2[key])}px`);
        }
    });
    return result;
}
/**
 * Update a property of the bounding box
 * @param prop
 * @param b
 * @param newValue
 * @param containerRect
 */
function updateBoundingBoxProp(prop, b, newValue, containerRect) {
    if (b[prop] == null || b[prop] === 'auto') {
        return b;
    }
    let updated = b;
    if (isPercentage(b[prop])) {
        if (prop === 'left' || prop === 'right' || prop === 'width') {
            if (isPercentage(newValue)) {
                updated = b.set(prop, newValue);
            }
            else {
                updated = b.set(prop, `${((+newValue * 100) / containerRect.width).toFixed(4)}%`);
            }
        }
        else {
            if (isPercentage(newValue)) {
                updated = b.set(prop, newValue);
            }
            else {
                updated = b.set(prop, `${((+newValue * 100) / containerRect.height).toFixed(4)}%`);
            }
        }
    }
    else {
        if (isPercentage(newValue)) {
            if (prop === 'left' || prop === 'right' || prop === 'width') {
                updated = b.set(prop, Math.round((parseFloat(`${newValue}`) * containerRect.width) / 100));
            }
            else {
                updated = b.set(prop, Math.round((parseFloat(`${newValue}`) * containerRect.height) / 100));
            }
        }
        else {
            if (isNaN(+newValue)) {
                updated = b.without(prop);
            }
            else {
                updated = b.set(prop, `${Math.round(+newValue)}px`);
            }
        }
    }
    return updated;
}
function relativeClientRect(r1, r2) {
    return {
        left: r1.left - r2.left,
        top: r1.top - r2.top,
        right: r1.right,
        bottom: r1.bottom,
        width: r1.width,
        height: r1.height,
        id: null
    };
}
function isRTL() {
    var _a, _b;
    return (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext) === null || _a === void 0 ? void 0 : _a.isRTL) !== null && _b !== void 0 ? _b : false;
}
function parseAspectRatio(ratio) {
    let width = 100;
    let height = 100;
    if (typeof ratio === 'number') {
        width = 100;
        height = Math.round(ratio * 100);
    }
    else if (typeof ratio === 'string') {
        const items = ratio.split(':');
        width = parseInt(items[0], 10);
        height = parseInt(items[1], 10);
    }
    return width / height;
}
function expandStyleArray(dataArray) {
    if (!dataArray || dataArray.length === 0) {
        return [0, 0, 0, 0];
    }
    else if (dataArray.length === 1) {
        return [dataArray[0], dataArray[0], dataArray[0], dataArray[0]];
    }
    else if (dataArray.length === 2) { // top/bottom, left/right
        return [dataArray[0], dataArray[1], dataArray[0], dataArray[1]];
    }
    else if (dataArray.length === 3) {
        return [dataArray[0], dataArray[1], dataArray[2], 0];
    }
    else {
        return [dataArray[0], dataArray[1], dataArray[2], dataArray[3]];
    }
}
function calHeightOfLayoutItem(containerHeight, layoutItem) {
    var _a, _b, _c, _d;
    const setting = (_a = layoutItem.setting) !== null && _a !== void 0 ? _a : {};
    const mode = getLayoutItemSizeMode('height', layoutItem.bbox, setting.autoProps);
    let result;
    if (setting.heightMode === 'ratio') {
        result = {
            setting: {
                heightMode: 'ratio',
                aspectRatio: (_b = setting.aspectRatio) !== null && _b !== void 0 ? _b : 1,
                autoProps: { height: _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom }
            }
        };
    }
    else if (mode !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
        return {
            height: mode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch ? containerHeight : null,
            setting: {
                autoProps: { height: mode }
            }
        };
    }
    else {
        // fit or fixed or no height mode
        let height = (_d = (_c = layoutItem.bbox) === null || _c === void 0 ? void 0 : _c.height) !== null && _d !== void 0 ? _d : containerHeight;
        if (isPercentage(height)) {
            height = fromRatio(height, containerHeight);
        }
        else {
            height = parseInt(height);
        }
        result = {
            height,
            setting: {
                heightMode: 'fixed',
                autoProps: { height: _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom }
            }
        };
    }
    return result;
}
function getAppConfig() {
    var _a;
    return window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
}
function getCurrentSizeMode() {
    var _a, _b;
    return ((_a = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _a === void 0 ? void 0 : _a.isBuilder)
        ? (_b = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _b === void 0 ? void 0 : _b.browserSizeMode
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode;
}
function getCurrentPageId() {
    var _a, _b, _c;
    return window.jimuConfig.isBuilder
        ? (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.currentPageId
        : (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.currentPageId;
}
function getCurrentDialogId() {
    var _a, _b, _c;
    return window.jimuConfig.isBuilder
        ? (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.currentDialogId
        : (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.currentDialogId;
}
function getActivePagePart() {
    var _a, _b, _c;
    return window.jimuConfig.isBuilder
        ? (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.activePagePart
        : (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.activePagePart;
}
function getCurrentDialogRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const dialogId = getCurrentDialogId();
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.dialogs[dialogId]) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
function getCurrentPageRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const pageId = getCurrentPageId();
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.pages[pageId]) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
function getHeaderRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.header) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
function getFooterRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.footer) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
/**
 * Check if rect1 contains rect2
 * @param rect1
 * @param rect2
 */
function contains(rect1, rect2) {
    return rect2.left >= rect1.left && rect2.left + rect2.width <= rect1.left + rect1.width &&
        rect2.top >= rect1.top && rect2.top + rect2.height <= rect1.top + rect1.height;
}
function intersects(r1, r2) {
    return !(r2.left > r1.left + r1.width ||
        r2.left + r2.width < r1.left ||
        r2.top > r1.top + r1.height ||
        r2.top + r2.height < r1.top);
}
function normalizeLinearUnit(value) {
    var _a, _b, _c, _d;
    let unit;
    let distance;
    if (value != null && typeof value === 'object') {
        unit = (_a = value.unit) !== null && _a !== void 0 ? _a : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PIXEL;
        distance = (_b = value.distance) !== null && _b !== void 0 ? _b : 0;
    }
    else {
        const ret = jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.getValueAndUnit(value);
        unit = (_c = ret === null || ret === void 0 ? void 0 : ret[1]) !== null && _c !== void 0 ? _c : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PIXEL;
        distance = (_d = ret === null || ret === void 0 ? void 0 : ret[0]) !== null && _d !== void 0 ? _d : 0;
    }
    // Keep one decimal in percentage and use integer in pixel
    distance = unit === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE ? Math.round(distance * 10) / 10 : Math.round(distance);
    return `${distance}${unit}`;
}
function getLayoutItemSizeMode(side, bbox, autoProps) {
    const mode = autoProps === null || autoProps === void 0 ? void 0 : autoProps[side];
    const first = side === 'width' ? 'left' : 'top';
    const last = side === 'width' ? 'right' : 'bottom';
    if (!mode) { // false or undefined
        if (bbox[side] != null) {
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom;
        }
        else if (bbox[first] != null && bbox[last] != null) {
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch;
        }
        return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto;
    }
    if (mode === true) { // width or height is auto
        if (bbox[first] != null && bbox[last] != null) {
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch;
        }
        return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto;
    }
    switch (mode) {
        case _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto:
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto;
        case _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch:
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch;
        default:
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom;
    }
}
function shouldUseAspectRatio(itemSetting) {
    return itemSetting.heightMode === 'ratio' && itemSetting.aspectRatio != null;
}
function gcd(x, y) {
    let m = Math.max(x, y);
    let n = Math.min(x, y);
    while (n !== 0) {
        const temp = n;
        n = m % n;
        m = temp;
    }
    return m;
}
function handleOnebyOneAnimation(props) {
    const { delay, isLastChild } = props;
    return { delay, isLastChild };
}


/***/ }),

/***/ "./jimu-ui/advanced/lib/assets/icon_animation_in_none.svg":
/*!****************************************************************!*\
  !*** ./jimu-ui/advanced/lib/assets/icon_animation_in_none.svg ***!
  \****************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iOTJweCIgaGVpZ2h0PSI3MnB4IiB2aWV3Qm94PSIwIDAgOTIgNzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbl9hbmltYXRpb25faW5fbm9uZTwvdGl0bGU+CiAgICA8ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTQxLjAwMDAwMCwgLTE5Mi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTE3LjAwMDAwMCwgNTIuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMDAwMDAsIDE0MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsLXJ1bGU9Im5vbnplcm8iIHg9IjAiIHk9IjAiIHdpZHRoPSI5MiIgaGVpZ2h0PSI3MiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGZpbGw9IiM2QTZBNkEiIHBvaW50cz0iNDYgNDggMzEuODkzMTUzOSA1NS40MTY0MDc5IDM0LjU4NzMyMTggMzkuNzA4MjAzOSAyMy4xNzQ2NDM2IDI4LjU4MzU5MjEgMzguOTQ2NTc3IDI2LjI5MTc5NjEgNDYgMTIgNTMuMDUzNDIzIDI2LjI5MTc5NjEgNjguODI1MzU2NCAyOC41ODM1OTIxIDU3LjQxMjY3ODIgMzkuNzA4MjAzOSA2MC4xMDY4NDYxIDU1LjQxNjQwNzkiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"

/***/ }),

/***/ "./jimu-ui/advanced/lib/assets/icon_animation_transition_fade.svg":
/*!************************************************************************!*\
  !*** ./jimu-ui/advanced/lib/assets/icon_animation_transition_fade.svg ***!
  \************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iOTJweCIgaGVpZ2h0PSI3MnB4IiB2aWV3Qm94PSIwIDAgOTIgNzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbl9hbmltYXRpb25fdHJhbnNpdGlvbl9mYWRlPC90aXRsZT4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDYxLjAwMDAwMCwgLTE1MC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTE3LjAwMDAwMCwgNTIuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDQuMDAwMDAwLCA5OC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBvcGFjaXR5PSIwLjEwMDAwMDAwMSIgZmlsbC1ydWxlPSJub256ZXJvIiB4PSIwIiB5PSIwIiB3aWR0aD0iOTIiIGhlaWdodD0iNzIiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI0OCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGwtb3BhY2l0eT0iMC41IiBmaWxsPSIjMzYzNjM2IiB4PSIwIiB5PSIwIiB3aWR0aD0iNjQiIGhlaWdodD0iNDgiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjQsMCBMNjQsNDggTDAsNDggTDAsMCBMNjQsMCBaIE02MywxIEwxLDEgTDEsNDcgTDYzLDQ3IEw2MywxIFoiIGZpbGw9IiM2QTZBNkEiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="

/***/ }),

/***/ "./jimu-ui/advanced/lib/assets/icon_animation_transition_push.svg":
/*!************************************************************************!*\
  !*** ./jimu-ui/advanced/lib/assets/icon_animation_transition_push.svg ***!
  \************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iOTJweCIgaGVpZ2h0PSI3MnB4IiB2aWV3Qm94PSIwIDAgOTIgNzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbl9hbmltYXRpb25fdHJhbnNpdGlvbl9wdXNoPC90aXRsZT4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05NDEuMDAwMDAwLCAtMjcwLjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQuMDAwMDAwLCAyMTguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkyLDAgTDkyLDcyIEwwLDcyIEwwLDAgTDkyLDAgWiBNOTEsMzcgTDEsMzcgTDEsNzEgTDkxLDcxIEw5MSwzNyBaIE00Niw0NCBMNTYsNTQgTDUwLjE2NjY2NjcsNTQgTDUwLjE2NjY2NjcsNjQgTDQxLjgzMzMzMzMsNjQgTDQxLjgzMzMzMzMsNTQgTDM2LDU0IEw0Niw0NCBaIiBmaWxsPSIjNkE2QTZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-core/dnd":
/*!********************************!*\
  !*** external "jimu-core/dnd" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core_dnd__;

/***/ }),

/***/ "jimu-for-builder":
/*!***********************************!*\
  !*** external "jimu-for-builder" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_for_builder__;

/***/ }),

/***/ "jimu-for-builder/templates":
/*!*********************************************!*\
  !*** external "jimu-for-builder/templates" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_for_builder_templates__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/advanced/setting-components":
/*!******************************************************!*\
  !*** external "jimu-ui/advanced/setting-components" ***!
  \******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__;

/***/ }),

/***/ "jimu-ui/advanced/style-setting-components":
/*!************************************************************!*\
  !*** external "jimu-ui/advanced/style-setting-components" ***!
  \************************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_style_setting_components__;

/***/ }),

/***/ "jimu-ui/basic/color-picker":
/*!*********************************************!*\
  !*** external "jimu-ui/basic/color-picker" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_color_picker__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*****************************************!*\
  !*** ./jimu-layouts/layout-builder.tsx ***!
  \*****************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CanvasPane: () => (/* reexport safe */ _lib_builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_21__.CanvasPane),
/* harmony export */   ColumnLayoutBuilder: () => (/* reexport safe */ _lib_column_layout_builder_layout__WEBPACK_IMPORTED_MODULE_1__["default"]),
/* harmony export */   ColumnLayoutItemSetting: () => (/* reexport safe */ _lib_column_layout_builder_column_item_setting__WEBPACK_IMPORTED_MODULE_6__["default"]),
/* harmony export */   ColumnLayoutService: () => (/* reexport safe */ _lib_column_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_32__.ColumnLayoutService),
/* harmony export */   CommonLayoutItemSetting: () => (/* reexport safe */ _lib_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_13__["default"]),
/* harmony export */   CommonTransformSetting: () => (/* reexport safe */ _lib_builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_14__["default"]),
/* harmony export */   DEFAULT_ROW_LAYOUT_SETTING: () => (/* reexport safe */ _lib_row_layout_default_setting__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_ROW_LAYOUT_SETTING),
/* harmony export */   DropArea: () => (/* reexport safe */ _lib_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_19__.DropArea),
/* harmony export */   FixedLayoutItemSetting: () => (/* reexport safe */ _lib_fixed_layout_builder_fixed_item_setting__WEBPACK_IMPORTED_MODULE_4__["default"]),
/* harmony export */   FixedLayoutService: () => (/* reexport safe */ _lib_fixed_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_33__.FixedLayoutService),
/* harmony export */   FlowLayoutItemSetting: () => (/* reexport safe */ _lib_flow_layout_builder_flow_item_setting__WEBPACK_IMPORTED_MODULE_5__["default"]),
/* harmony export */   FlowLayoutService: () => (/* reexport safe */ _lib_flow_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_34__.FlowLayoutService),
/* harmony export */   FlowLayoutSetting: () => (/* reexport safe */ _lib_flow_layout_layout_setting__WEBPACK_IMPORTED_MODULE_11__["default"]),
/* harmony export */   GLOBAL_DRAGGING_CLASS_NAME: () => (/* reexport safe */ _lib_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_22__.GLOBAL_DRAGGING_CLASS_NAME),
/* harmony export */   GLOBAL_H5_DRAGGING_CLASS_NAME: () => (/* reexport safe */ _lib_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_22__.GLOBAL_H5_DRAGGING_CLASS_NAME),
/* harmony export */   GLOBAL_RESIZING_CLASS_NAME: () => (/* reexport safe */ _lib_builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_23__.GLOBAL_RESIZING_CLASS_NAME),
/* harmony export */   GridLayoutBuilder: () => (/* reexport safe */ _lib_grid_layout_builder_layout__WEBPACK_IMPORTED_MODULE_3__["default"]),
/* harmony export */   GridLayoutItemSetting: () => (/* reexport safe */ _lib_grid_layout_builder_grid_item_setting__WEBPACK_IMPORTED_MODULE_8__["default"]),
/* harmony export */   GridLayoutService: () => (/* reexport safe */ _lib_grid_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_30__.GridLayoutService),
/* harmony export */   GridLayoutSetting: () => (/* reexport safe */ _lib_grid_layout_layout_setting__WEBPACK_IMPORTED_MODULE_12__["default"]),
/* harmony export */   LIMITED_BOUNDARY_CLASS_NAME: () => (/* reexport safe */ _lib_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_22__.LIMITED_BOUNDARY_CLASS_NAME),
/* harmony export */   LayoutBuilder: () => (/* reexport safe */ _lib_fixed_layout_builder_layout__WEBPACK_IMPORTED_MODULE_0__["default"]),
/* harmony export */   LayoutEntry: () => (/* reexport safe */ _lib_builder_layout_entry__WEBPACK_IMPORTED_MODULE_16__["default"]),
/* harmony export */   LayoutItemInBuilder: () => (/* reexport safe */ _lib_builder_layout_item__WEBPACK_IMPORTED_MODULE_17__["default"]),
/* harmony export */   PageRenderer: () => (/* reexport safe */ _lib_builder_page_renderer__WEBPACK_IMPORTED_MODULE_15__["default"]),
/* harmony export */   RowLayoutBuilder: () => (/* reexport safe */ _lib_row_layout_builder_layout__WEBPACK_IMPORTED_MODULE_2__["default"]),
/* harmony export */   RowLayoutItemSetting: () => (/* reexport safe */ _lib_row_layout_builder_row_item_setting__WEBPACK_IMPORTED_MODULE_7__["default"]),
/* harmony export */   RowLayoutService: () => (/* reexport safe */ _lib_row_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_31__.RowLayoutService),
/* harmony export */   SectionRendererInBuilder: () => (/* reexport safe */ _lib_builder_section_renderer__WEBPACK_IMPORTED_MODULE_27__.SectionRendererInBuilder),
/* harmony export */   ShapeL: () => (/* reexport safe */ _lib_builder_shape_l__WEBPACK_IMPORTED_MODULE_28__.ShapeL),
/* harmony export */   ShapeRect: () => (/* reexport safe */ _lib_builder_shape_rect__WEBPACK_IMPORTED_MODULE_29__.ShapeRect),
/* harmony export */   Toolbar: () => (/* reexport safe */ _lib_builder_toolbar__WEBPACK_IMPORTED_MODULE_25__.Toolbar),
/* harmony export */   WidgetRendererInBuilder: () => (/* reexport safe */ _lib_builder_widget_renderer__WEBPACK_IMPORTED_MODULE_26__.WidgetRendererInBuilder),
/* harmony export */   addItemToLayout: () => (/* reexport safe */ _lib_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_18__.addItemToLayout),
/* harmony export */   bindDragHandler: () => (/* reexport safe */ _lib_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_22__.bindDragHandler),
/* harmony export */   bindResizeHandler: () => (/* reexport safe */ _lib_builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_23__.bindResizeHandler),
/* harmony export */   getLabelOfGridTab: () => (/* reexport safe */ _lib_grid_layout_common_utils__WEBPACK_IMPORTED_MODULE_9__.getLabelOfGridTab),
/* harmony export */   getRootLayoutId: () => (/* reexport safe */ _lib_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_18__.getRootLayoutId),
/* harmony export */   sectionMenuItems: () => (/* reexport safe */ _lib_builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_24__.sectionMenuItems),
/* harmony export */   withRnd: () => (/* reexport safe */ _lib_builder_interactive_rnd_decorator__WEBPACK_IMPORTED_MODULE_20__.withRnd)
/* harmony export */ });
/* harmony import */ var _lib_fixed_layout_builder_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/fixed-layout/builder/layout */ "./jimu-layouts/lib/fixed-layout/builder/layout.tsx");
/* harmony import */ var _lib_column_layout_builder_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/column-layout/builder/layout */ "./jimu-layouts/lib/column-layout/builder/layout.tsx");
/* harmony import */ var _lib_row_layout_builder_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/row-layout/builder/layout */ "./jimu-layouts/lib/row-layout/builder/layout.tsx");
/* harmony import */ var _lib_grid_layout_builder_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/grid-layout/builder/layout */ "./jimu-layouts/lib/grid-layout/builder/layout.tsx");
/* harmony import */ var _lib_fixed_layout_builder_fixed_item_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/fixed-layout/builder/fixed-item-setting */ "./jimu-layouts/lib/fixed-layout/builder/fixed-item-setting.tsx");
/* harmony import */ var _lib_flow_layout_builder_flow_item_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/flow-layout/builder/flow-item-setting */ "./jimu-layouts/lib/flow-layout/builder/flow-item-setting.tsx");
/* harmony import */ var _lib_column_layout_builder_column_item_setting__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/column-layout/builder/column-item-setting */ "./jimu-layouts/lib/column-layout/builder/column-item-setting.tsx");
/* harmony import */ var _lib_row_layout_builder_row_item_setting__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/row-layout/builder/row-item-setting */ "./jimu-layouts/lib/row-layout/builder/row-item-setting.tsx");
/* harmony import */ var _lib_grid_layout_builder_grid_item_setting__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/grid-layout/builder/grid-item-setting */ "./jimu-layouts/lib/grid-layout/builder/grid-item-setting.tsx");
/* harmony import */ var _lib_grid_layout_common_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/grid-layout/common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/* harmony import */ var _lib_row_layout_default_setting__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/row-layout/default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/* harmony import */ var _lib_flow_layout_layout_setting__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/flow-layout/layout-setting */ "./jimu-layouts/lib/flow-layout/layout-setting.tsx");
/* harmony import */ var _lib_grid_layout_layout_setting__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/grid-layout/layout-setting */ "./jimu-layouts/lib/grid-layout/layout-setting.tsx");
/* harmony import */ var _lib_builder_common_layout_item_setting__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/builder/common-layout-item-setting */ "./jimu-layouts/lib/builder/common-layout-item-setting.tsx");
/* harmony import */ var _lib_builder_common_transform_setting__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./lib/builder/common-transform-setting */ "./jimu-layouts/lib/builder/common-transform-setting.tsx");
/* harmony import */ var _lib_builder_page_renderer__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/builder/page-renderer */ "./jimu-layouts/lib/builder/page-renderer.tsx");
/* harmony import */ var _lib_builder_layout_entry__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lib/builder/layout-entry */ "./jimu-layouts/lib/builder/layout-entry.tsx");
/* harmony import */ var _lib_builder_layout_item__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./lib/builder/layout-item */ "./jimu-layouts/lib/builder/layout-item.tsx");
/* harmony import */ var _lib_builder_common_layout_actions__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./lib/builder/common-layout-actions */ "./jimu-layouts/lib/builder/common-layout-actions.ts");
/* harmony import */ var _lib_builder_interactive_droparea_hook__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./lib/builder/interactive/droparea-hook */ "./jimu-layouts/lib/builder/interactive/droparea-hook.tsx");
/* harmony import */ var _lib_builder_interactive_rnd_decorator__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./lib/builder/interactive/rnd-decorator */ "./jimu-layouts/lib/builder/interactive/rnd-decorator.tsx");
/* harmony import */ var _lib_builder_interactive_canvas_pane__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./lib/builder/interactive/canvas-pane */ "./jimu-layouts/lib/builder/interactive/canvas-pane.ts");
/* harmony import */ var _lib_builder_interactive_drag_event_handler__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./lib/builder/interactive/drag-event-handler */ "./jimu-layouts/lib/builder/interactive/drag-event-handler.ts");
/* harmony import */ var _lib_builder_interactive_resize_event_handler__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./lib/builder/interactive/resize-event-handler */ "./jimu-layouts/lib/builder/interactive/resize-event-handler.ts");
/* harmony import */ var _lib_builder_menu_section_menu__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./lib/builder/menu/section-menu */ "./jimu-layouts/lib/builder/menu/section-menu.tsx");
/* harmony import */ var _lib_builder_toolbar__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./lib/builder/toolbar */ "./jimu-layouts/lib/builder/toolbar.tsx");
/* harmony import */ var _lib_builder_widget_renderer__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./lib/builder/widget-renderer */ "./jimu-layouts/lib/builder/widget-renderer.tsx");
/* harmony import */ var _lib_builder_section_renderer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./lib/builder/section-renderer */ "./jimu-layouts/lib/builder/section-renderer.tsx");
/* harmony import */ var _lib_builder_shape_l__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./lib/builder/shape-l */ "./jimu-layouts/lib/builder/shape-l.tsx");
/* harmony import */ var _lib_builder_shape_rect__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./lib/builder/shape-rect */ "./jimu-layouts/lib/builder/shape-rect.tsx");
/* harmony import */ var _lib_grid_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./lib/grid-layout/builder/layout-service */ "./jimu-layouts/lib/grid-layout/builder/layout-service.ts");
/* harmony import */ var _lib_row_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./lib/row-layout/builder/layout-service */ "./jimu-layouts/lib/row-layout/builder/layout-service.ts");
/* harmony import */ var _lib_column_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./lib/column-layout/builder/layout-service */ "./jimu-layouts/lib/column-layout/builder/layout-service.ts");
/* harmony import */ var _lib_fixed_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./lib/fixed-layout/builder/layout-service */ "./jimu-layouts/lib/fixed-layout/builder/layout-service.ts");
/* harmony import */ var _lib_flow_layout_builder_layout_service__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./lib/flow-layout/builder/layout-service */ "./jimu-layouts/lib/flow-layout/builder/layout-service.ts");
/* harmony import */ var _lib_builder_types__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./lib/builder/types */ "./jimu-layouts/lib/builder/types.ts");
// import LayoutBuilder from './lib/flow-layout/builder/layout';






































})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFO1FBQ2xILEdBQUcsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsY0FBYyxFQUFFO1FBQ2xHLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsY0FBYyxFQUFFO1FBQ25ILElBQUk7S0FDTCxDQUFDO0lBQ0Ysa0JBQWtCO0lBQ2xCLFNBQVMsQ0FBQyxJQUFJLENBQUM7UUFDYixFQUFFLEVBQUUsRUFBRTtRQUNOLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFO1FBQ2xHLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUU7UUFDOUgsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUU7UUFDaEgsR0FBRyxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxjQUFjLEVBQUU7UUFDaEcsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRTtRQUM5SCxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRTtRQUNqSCxJQUFJO0tBQ0wsQ0FBQztJQUVGLE9BQU8sU0FBUztBQUNsQixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNJLFNBQVMsWUFBWSxDQUMxQixhQUE2QixFQUM3QixjQUFzQixFQUN0QixlQUF1QixFQUN2QixRQUFjLEVBQ2QsZ0JBQW1DO0lBRW5DLElBQUksTUFBTSxHQUFHLEVBQUU7SUFDZixJQUFJLE1BQU0sR0FBRyxFQUFFO0lBQ2YsSUFBSSxhQUFhLElBQUksSUFBSSxJQUFJLGFBQWEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDeEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRTtJQUNyRCxDQUFDO0lBRUQsTUFBTSxnQkFBZ0IsR0FBRyxrQkFBa0IsQ0FDekMsZ0JBQWdCLGFBQWhCLGdCQUFnQix1QkFBaEIsZ0JBQWdCLENBQUUsSUFBSSxFQUN0QixRQUFRLEVBQ1IsY0FBYyxFQUNkLGVBQWUsQ0FDaEI7SUFFRCxNQUFNLFVBQVUsR0FBRyxhQUFhLENBQUMsUUFBUSxFQUFFO1FBQ3pDLEtBQUssRUFBRSxjQUFjO1FBQ3JCLE1BQU0sRUFBRSxlQUFlO0tBQ3hCLENBQUM7SUFFRixhQUFhLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO1FBQ25DLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUNwQixDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLEVBQUUsRUFBRSxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQ3JFLGVBQWUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUNqRSxDQUNGO1FBQ0QsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQ3BCLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsRUFBRSxFQUFFLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FDckUsZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQ2pFLENBQ0Y7SUFDSCxDQUFDLENBQUM7SUFFRixNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUUzQixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFO0FBQ3JELENBQUM7QUFFRDs7Ozs7R0FLRztBQUNJLFNBQVMsU0FBUyxDQUFFLEVBQVUsRUFBRSxFQUFVO0lBQy9DLElBQUksRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ2IsaUJBQWlCO1FBQ2pCLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUMxQixDQUFDO0lBQ0QsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3pCLENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FDdEIsYUFBbUIsRUFDbkIsS0FBZTtJQUVmLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNuQyxNQUFNLE1BQU0sR0FBRztZQUNiLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNWLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNWLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNWLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUNYO1FBQ0QsSUFBSSxhQUFhLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsT0FBTyxFQUFFLENBQUM7WUFDNUMsTUFBTSxDQUFDLENBQUMsR0FBRyxPQUFPLEdBQUcsYUFBYSxDQUFDLEtBQUs7WUFDeEMsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUNsQixxQkFBcUI7Z0JBQ3JCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN0QixDQUFDO1FBQ0gsQ0FBQztRQUNELElBQUksYUFBYSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsT0FBTyxHQUFHLGFBQWEsQ0FBQyxNQUFNO1lBQ3pDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDbEIsb0JBQW9CO2dCQUNwQixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEIsQ0FBQztRQUNILENBQUM7UUFDRCxPQUFPLE1BQU07SUFDZixDQUFDO0lBQ0QsT0FBTyxLQUFLO0FBQ2QsQ0FBQztBQUVNLFNBQVMsU0FBUyxDQUN2QixnQkFBa0MsRUFDbEMsYUFBbUIsRUFDbkIsYUFBbUIsRUFDbkIsS0FBZSxFQUNmLFFBQWlCLEVBQ2pCLGFBQTZCLEVBQzdCLFVBQXVCLEVBQ3ZCLEtBQXdCOztJQUV4QiwyRkFBMkY7SUFDM0YsTUFBTSxPQUFPLEdBQTJCLHNCQUFnQixhQUFoQixnQkFBZ0IsdUJBQWhCLGdCQUFnQixDQUFFLE9BQU8sbUNBQUksRUFBRTtJQUN2RSxNQUFNLElBQUksR0FBZ0Isc0JBQWdCLGFBQWhCLGdCQUFnQix1QkFBaEIsZ0JBQWdCLENBQUUsSUFBSSxtQ0FBSSxFQUFFO0lBQ3RELE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNqRCxJQUFJLFVBQVUsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUN4RyxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBQ0QsSUFBSSxZQUFZLEdBQUcsZUFBZSxDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUM7SUFDeEQsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUNiLDBDQUEwQztRQUMxQyxZQUFZLEdBQUcsZUFBZSxDQUFDLGFBQXdCLEVBQUUsWUFBWSxDQUFDO0lBQ3hFLENBQUM7SUFDRCxNQUFNLFVBQVUsR0FBRyx1QkFBdUIsQ0FDeEMsZ0JBQWdCLEVBQ2hCLGFBQWEsRUFDYixhQUFhLENBQUMsS0FBSyxFQUNuQixhQUFhLENBQUMsTUFBTSxFQUNwQixZQUFZLENBQ2I7SUFDRCxzQ0FBc0M7SUFDdEMsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxpRUFBYyxDQUM3QixVQUFVLEVBQ1YsYUFBYSxFQUNiLFlBQVksRUFDWixhQUFhLENBQUMsS0FBSyxFQUNuQixhQUFhLENBQUMsTUFBTSxFQUNwQixVQUFVLEVBQ1YsS0FBSyxDQUNOO0lBQ0Qsa0NBQWtDO0lBQ2xDLE1BQU0sY0FBYyxHQUFHLDREQUFVLENBQy9CLFVBQVUsRUFDVixhQUFhLEVBQ2IsWUFBWSxFQUNaLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLFVBQVUsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUMxQyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFDMUMsVUFBVSxFQUNWLEtBQUssQ0FDTjtJQUNELEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxFQUFFO0lBQ3RDLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxFQUFFO0lBRXRDLElBQUksWUFBWSxHQUFHLFlBQVk7SUFDL0IsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN6QixZQUFZLEdBQUcsV0FBVyxDQUFDLFlBQVksRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2xELENBQUM7SUFDRCxPQUFPLFlBQVk7QUFDckIsQ0FBQztBQUVNLFNBQVMsV0FBVyxDQUN6QixLQUFlLEVBQ2YsRUFBVSxFQUNWLEVBQVU7SUFFVixJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsS0FBSztJQUUxQixJQUFJLE1BQWtCO0lBQ3RCLElBQUksTUFBa0I7SUFDdEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDWixNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUk7SUFDMUIsQ0FBQztTQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ25CLE1BQU0sR0FBRyxVQUFVLENBQUMsS0FBSztJQUMzQixDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sR0FBRyxVQUFVLENBQUMsR0FBRztJQUN6QixDQUFDO0lBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDWixNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUk7SUFDMUIsQ0FBQztTQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ25CLE1BQU0sR0FBRyxVQUFVLENBQUMsS0FBSztJQUMzQixDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sR0FBRyxVQUFVLENBQUMsR0FBRztJQUN6QixDQUFDO0lBQ0QsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDYixJQUFJLE1BQU0sS0FBSyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDL0IsV0FBVztZQUNYLENBQUMsSUFBSSxFQUFFO1FBQ1QsQ0FBQzthQUFNLElBQUksTUFBTSxLQUFLLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUNyQyx3QkFBd0I7WUFDeEIsQ0FBQyxJQUFJLEVBQUU7WUFDUCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ1YsQ0FBQzthQUFNLENBQUM7WUFDTix5QkFBeUI7WUFDekIsQ0FBQyxJQUFJLEVBQUU7UUFDVCxDQUFDO0lBQ0gsQ0FBQztJQUNELElBQUksRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ2IsSUFBSSxNQUFNLEtBQUssVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQy9CLFdBQVc7WUFDWCxDQUFDLElBQUksRUFBRTtRQUNULENBQUM7YUFBTSxJQUFJLE1BQU0sS0FBSyxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDckMsdUJBQXVCO1lBQ3ZCLENBQUMsSUFBSSxFQUFFO1lBQ1AsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNWLENBQUM7YUFBTSxDQUFDO1lBQ04sMEJBQTBCO1lBQzFCLENBQUMsSUFBSSxFQUFFO1FBQ1QsQ0FBQztJQUNILENBQUM7SUFDRCxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ3ZCLENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FBRSxhQUFzQixFQUFFLEtBQWU7SUFDL0QsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ25DLE9BQU8sS0FBSztJQUNkLENBQUM7SUFFRCxNQUFNLEtBQUssR0FBRyxhQUFhLENBQUMsTUFBTSxHQUFHLGFBQWEsQ0FBQyxLQUFLO0lBQ3hELElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQ2YsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDZixJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztJQUNmLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBRWYsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDdEMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztJQUMzQixDQUFDO1NBQU0sQ0FBQztRQUNOLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDM0IsQ0FBQztJQUNELElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ1osQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNSLENBQUM7SUFDRCxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNaLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDUixDQUFDO0lBQ0QsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUN2QixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4L0I4RTtBQUM1QjtBQU92QjtBQUU1Qjs7Ozs7Ozs7O0dBU0c7QUFDSSxTQUFTLG1CQUFtQixDQUNqQyxNQUFvQixFQUNwQixNQUFvQjs7SUFFcEIsSUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU07UUFDcEMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQ3BDLENBQUM7UUFDRCxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBQ0QsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyw4REFBYyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDMUQsSUFBSSxhQUFNLENBQUMsS0FBSywwQ0FBRSxLQUFLLEtBQUksSUFBSSxJQUFJLGFBQU0sQ0FBQyxJQUFJLDBDQUFFLEtBQUssS0FBSSxJQUFJLEVBQUUsQ0FBQztZQUM5RCxNQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsYUFBYTtZQUN0RCxNQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYTtZQUNyRCxJQUFJLG1CQUFtQixLQUFLLG1CQUFtQixFQUFFLENBQUM7Z0JBQ2hELE9BQU8sbUJBQW1CLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNO1lBQzFFLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsOERBQWMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFELElBQUksYUFBTSxDQUFDLEtBQUssMENBQUUsS0FBSyxLQUFJLElBQUksSUFBSSxhQUFNLENBQUMsSUFBSSwwQ0FBRSxLQUFLLEtBQUksSUFBSSxFQUFFLENBQUM7WUFDOUQsTUFBTSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWE7WUFDckQsTUFBTSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLGFBQWE7WUFDdEQsSUFBSSxtQkFBbUIsS0FBSyxtQkFBbUIsRUFBRSxDQUFDO2dCQUNoRCxPQUFPLG1CQUFtQixJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTTtZQUMxRSxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxPQUFPLEtBQUs7QUFDZCxDQUFDO0FBRU0sU0FBUyxpQkFBaUIsQ0FDL0IsTUFBb0IsRUFDcEIsTUFBb0I7O0lBRXBCLElBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLO1FBQ3BDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUNwQyxDQUFDO1FBQ0QsT0FBTyxLQUFLO0lBQ2QsQ0FBQztJQUNELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsOERBQWMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzFELElBQUksYUFBTSxDQUFDLE1BQU0sMENBQUUsS0FBSyxLQUFJLElBQUksSUFBSSxhQUFNLENBQUMsR0FBRywwQ0FBRSxLQUFLLEtBQUksSUFBSSxFQUFFLENBQUM7WUFDOUQsTUFBTSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWE7WUFDdkQsTUFBTSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWE7WUFDcEQsSUFBSSxtQkFBbUIsS0FBSyxtQkFBbUIsRUFBRSxDQUFDO2dCQUNoRCxPQUFPLG1CQUFtQixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTTtZQUMxRSxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLDhEQUFjLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMxRCxJQUFJLGFBQU0sQ0FBQyxNQUFNLDBDQUFFLEtBQUssS0FBSSxJQUFJLElBQUksYUFBTSxDQUFDLEdBQUcsMENBQUUsS0FBSyxLQUFJLElBQUksRUFBRSxDQUFDO1lBQzlELE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhO1lBQ3BELE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhO1lBQ3ZELElBQUksbUJBQW1CLEtBQUssbUJBQW1CLEVBQUUsQ0FBQztnQkFDaEQsT0FBTyxtQkFBbUIsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sS0FBSyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU07WUFDMUUsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0lBRUQsT0FBTyxLQUFLO0FBQ2QsQ0FBQztBQUVNLFNBQVMsK0JBQStCLENBQzdDLFVBQXdCLEVBQ3hCLFNBQXlCO0lBRXpCLElBQUksTUFBd0I7SUFDNUIsTUFBTSxZQUFZLEdBQUcsU0FBUztTQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsZUFBQyxrQkFBSSxDQUFDLEtBQUssMENBQUUsVUFBVSxLQUFHLGdCQUFVLENBQUMsSUFBSSwwQ0FBRSxVQUFVLEtBQUM7U0FDcEUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBQyw2QkFBNkI7SUFFeEYsMkJBQTJCO0lBQzNCLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDdkIsTUFBTSxTQUFTLEdBQUcsbUJBQW1CLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQztRQUN2RCxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBQ2QsTUFBTSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtZQUN4QixPQUFPLElBQUk7UUFDYixDQUFDO0lBQ0gsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxNQUFNLElBQUksSUFBSSxFQUFFLENBQUM7UUFDbkIsTUFBTSxDQUFDLElBQUksR0FBRywrQkFBK0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQztJQUN4RSxDQUFDO0lBRUQsT0FBTyxNQUFNO0FBQ2YsQ0FBQztBQUVNLFNBQVMsV0FBVyxDQUFFLFlBQThCLEVBQUUsYUFBc0I7SUFDakYsTUFBTSxJQUFJLEdBQUc7UUFDWCxFQUFFLEVBQUUsRUFBRTtRQUNOLEtBQUssRUFBRTtZQUNMLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSztZQUNuQyxVQUFVLEVBQUUsQ0FBQztZQUNiLGFBQWE7WUFDYixNQUFNLEVBQUUsQ0FBQztZQUNULElBQUksRUFBRSxNQUFNLENBQUMsaUJBQWlCO1lBQzlCLEVBQUUsRUFBRSxNQUFNLENBQUMsaUJBQWlCO1NBQzdCO1FBQ0QsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsaUJBQWlCLEVBQUU7S0FDNUc7SUFDRCxJQUFJLFlBQVksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN6QixPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtJQUN4QixDQUFDO0lBQ0QsSUFBSSxXQUFXLEdBQUcsWUFBWTtJQUM5QixxQkFBcUI7SUFDckIsT0FBTyxXQUFXLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2hDLFdBQVcsR0FBRyxXQUFXLENBQUMsSUFBSTtJQUNoQyxDQUFDO0lBQ0QsV0FBVyxDQUFDLElBQUksR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7SUFDbEMsT0FBTyxZQUFZO0FBQ3JCLENBQUM7QUFFTSxTQUFTLDJCQUEyQixDQUN6QyxVQUF3QixFQUN4QixTQUF5QjtJQUV6QixJQUFJLE1BQXdCO0lBQzVCLE1BQU0sWUFBWSxHQUFHLFNBQVM7U0FDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLGVBQUMsa0JBQUksQ0FBQyxJQUFJLDBDQUFFLFVBQVUsS0FBRyxnQkFBVSxDQUFDLEtBQUssMENBQUUsVUFBVSxLQUFDO1NBQ3BFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3hELDJCQUEyQjtJQUMzQixZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3ZCLE1BQU0sU0FBUyxHQUFHLG1CQUFtQixDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUM7UUFDdkQsSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUNkLE1BQU0sR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7WUFDeEIsT0FBTyxJQUFJO1FBQ2IsQ0FBQztJQUNILENBQUMsQ0FBQztJQUNGLElBQUksTUFBTSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ25CLE1BQU0sQ0FBQyxJQUFJLEdBQUcsMkJBQTJCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUM7SUFDcEUsQ0FBQztJQUVELE9BQU8sTUFBTTtBQUNmLENBQUM7QUFFTSxTQUFTLFlBQVksQ0FBRSxZQUE4QixFQUFFLGFBQXNCLEVBQUUsY0FBc0I7SUFDMUcsTUFBTSxLQUFLLEdBQUc7UUFDWixFQUFFLEVBQUUsRUFBRTtRQUNOLElBQUksRUFBRTtZQUNKLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSztZQUNuQyxVQUFVLEVBQUUsY0FBYztZQUMxQixhQUFhO1lBQ2IsTUFBTSxFQUFFLENBQUM7WUFDVCxJQUFJLEVBQUUsTUFBTSxDQUFDLGlCQUFpQjtZQUM5QixFQUFFLEVBQUUsTUFBTSxDQUFDLGlCQUFpQjtTQUM3QjtRQUNELElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsY0FBYyxHQUFHLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsaUJBQWlCLEVBQUU7S0FDekk7SUFDRCxJQUFJLFlBQVksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN6QixPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRTtJQUN6QixDQUFDO0lBQ0QsSUFBSSxXQUFXLEdBQUcsWUFBWTtJQUM5QixxQkFBcUI7SUFDckIsT0FBTyxXQUFXLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2hDLFdBQVcsR0FBRyxXQUFXLENBQUMsSUFBSTtJQUNoQyxDQUFDO0lBQ0QsV0FBVyxDQUFDLElBQUksR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7SUFDbkMsT0FBTyxZQUFZO0FBQ3JCLENBQUM7QUFFTSxTQUFTLDZCQUE2QixDQUMzQyxVQUF3QixFQUN4QixTQUF5QjtJQUV6QixJQUFJLE1BQXdCO0lBQzVCLE1BQU0sWUFBWSxHQUFHLFNBQVM7U0FDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLGVBQUMsa0JBQUksQ0FBQyxNQUFNLDBDQUFFLFVBQVUsS0FBRyxnQkFBVSxDQUFDLEdBQUcsMENBQUUsVUFBVSxLQUFDO1NBQ3BFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUMsb0JBQW9CO0lBRWpGLDJCQUEyQjtJQUMzQixZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3ZCLE1BQU0sU0FBUyxHQUFHLGlCQUFpQixDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUM7UUFDckQsSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUNkLE1BQU0sR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7WUFDeEIsT0FBTyxJQUFJO1FBQ2IsQ0FBQztJQUNILENBQUMsQ0FBQztJQUNGLElBQUksTUFBTSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ25CLE1BQU0sQ0FBQyxJQUFJLEdBQUcsNkJBQTZCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUM7SUFDdEUsQ0FBQztJQUVELE9BQU8sTUFBTTtBQUNmLENBQUM7QUFFTSxTQUFTLFVBQVUsQ0FBRSxZQUE4QixFQUFFLGFBQXNCO0lBQ2hGLE1BQU0sR0FBRyxHQUFHO1FBQ1YsRUFBRSxFQUFFLEVBQUU7UUFDTixNQUFNLEVBQUU7WUFDTixLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUs7WUFDbkMsVUFBVSxFQUFFLENBQUM7WUFDYixhQUFhO1lBQ2IsTUFBTSxFQUFFLENBQUM7WUFDVCxJQUFJLEVBQUUsTUFBTSxDQUFDLGlCQUFpQjtZQUM5QixFQUFFLEVBQUUsTUFBTSxDQUFDLGlCQUFpQjtTQUM3QjtRQUNELElBQUksRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLGlCQUFpQixFQUFFO0tBQzdHO0lBQ0QsSUFBSSxZQUFZLElBQUksSUFBSSxFQUFFLENBQUM7UUFDekIsT0FBTyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUU7SUFDdkIsQ0FBQztJQUNELElBQUksV0FBVyxHQUFHLFlBQVk7SUFDOUIscUJBQXFCO0lBQ3JCLE9BQU8sV0FBVyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNoQyxXQUFXLEdBQUcsV0FBVyxDQUFDLElBQUk7SUFDaEMsQ0FBQztJQUNELFdBQVcsQ0FBQyxJQUFJLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFO0lBQ2pDLE9BQU8sWUFBWTtBQUNyQixDQUFDO0FBRU0sU0FBUyx5QkFBeUIsQ0FDdkMsVUFBd0IsRUFDeEIsU0FBeUI7SUFFekIsSUFBSSxNQUF3QjtJQUM1QixNQUFNLFlBQVksR0FBRyxTQUFTO1NBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxlQUFDLGtCQUFJLENBQUMsR0FBRywwQ0FBRSxVQUFVLEtBQUcsZ0JBQVUsQ0FBQyxNQUFNLDBDQUFFLFVBQVUsS0FBQztTQUNwRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQztJQUV0RCwyQkFBMkI7SUFDM0IsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUN2QixNQUFNLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDO1FBQ3JELElBQUksU0FBUyxFQUFFLENBQUM7WUFDZCxNQUFNLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO1lBQ3hCLE9BQU8sSUFBSTtRQUNiLENBQUM7SUFDSCxDQUFDLENBQUM7SUFDRixJQUFJLE1BQU0sSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNuQixNQUFNLENBQUMsSUFBSSxHQUFHLHlCQUF5QixDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDO0lBQ2xFLENBQUM7SUFFRCxPQUFPLE1BQU07QUFDZixDQUFDO0FBRU0sU0FBUyxhQUFhLENBQUUsWUFBOEIsRUFBRSxhQUFzQixFQUFFLGVBQXVCO0lBQzVHLE1BQU0sTUFBTSxHQUFHO1FBQ2IsRUFBRSxFQUFFLEVBQUU7UUFDTixHQUFHLEVBQUU7WUFDSCxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUs7WUFDbkMsVUFBVSxFQUFFLGVBQWU7WUFDM0IsYUFBYTtZQUNiLE1BQU0sRUFBRSxDQUFDO1lBQ1QsSUFBSSxFQUFFLE1BQU0sQ0FBQyxpQkFBaUI7WUFDOUIsRUFBRSxFQUFFLE1BQU0sQ0FBQyxpQkFBaUI7U0FDN0I7UUFDRCxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLGVBQWUsR0FBRyxHQUFHLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLGlCQUFpQixFQUFFO0tBQzVJO0lBQ0QsSUFBSSxZQUFZLElBQUksSUFBSSxFQUFFLENBQUM7UUFDekIsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUU7SUFDMUIsQ0FBQztJQUNELElBQUksV0FBVyxHQUFHLFlBQVk7SUFDOUIscUJBQXFCO0lBQ3JCLE9BQU8sV0FBVyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNoQyxXQUFXLEdBQUcsV0FBVyxDQUFDLElBQUk7SUFDaEMsQ0FBQztJQUNELFdBQVcsQ0FBQyxJQUFJLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO0lBQ3BDLE9BQU8sWUFBWTtBQUNyQixDQUFDO0FBRU0sU0FBUyxzQkFBc0IsQ0FDcEMsVUFBd0IsRUFDeEIsWUFBd0QsRUFDeEQsUUFBb0QsRUFDcEQsVUFBdUIsRUFDdkIsY0FBdUIsRUFDdkIsS0FBd0I7SUFFeEIsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLE1BQU0sQ0FBQyxpQkFBaUIsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssTUFBTSxDQUFDLGlCQUFpQjtJQUN6SSxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxVQUFVLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3RFLE9BQU8sQ0FBQztJQUNWLENBQUM7SUFDRCxNQUFNLGNBQWMsR0FDbEIsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVTtJQUNyRSxNQUFNLGFBQWEsR0FDakIsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsVUFBVTtJQUNqRSxNQUFNLFNBQVMsR0FDYixZQUFZLENBQUMsS0FBSyxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLDhEQUFjLENBQUMsQ0FBQyxDQUFDLDhEQUFjLEdBQUcsQ0FBQztJQUU1RSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLGNBQWMsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDO1FBQ3pELElBQUksS0FBYTtRQUNqQixJQUFJLFFBQWdCO1FBQ3BCLElBQUksWUFBWSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDekMsV0FBVztZQUNYLEtBQUssR0FBRyxhQUFhLEdBQUcsY0FBYztRQUN4QyxDQUFDO2FBQU0sQ0FBQztZQUNOLFdBQVc7WUFDWCxLQUFLLEdBQUcsQ0FBQyxhQUFhLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQztRQUM5QyxDQUFDO1FBQ0QsSUFBSSxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdkIsUUFBUSxHQUFHLGNBQWM7UUFDM0IsQ0FBQzthQUFNLElBQUksUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQzFCLFFBQVEsR0FBRyxhQUFhO1FBQzFCLENBQUM7YUFBTSxDQUFDO1lBQ04sUUFBUSxHQUFHLGNBQWMsR0FBRyxLQUFLO1FBQ25DLENBQUM7UUFDRCxpQkFBaUIsQ0FDZixZQUFZLENBQUMsUUFBUSxFQUNyQixVQUFVLEVBQ1YsUUFBUSxFQUNSLEtBQUssRUFDTCxLQUFLLEVBQ0wsVUFBVSxFQUNWLGNBQWMsRUFDZCxLQUFLLENBQ047UUFDRCxpQkFBaUIsQ0FDZixVQUFVLEVBQ1YsUUFBUSxDQUFDLFFBQVEsRUFDakIsUUFBUSxFQUNSLEtBQUssRUFDTCxJQUFJLEVBQ0osVUFBVSxFQUNWLGNBQWMsRUFDZCxLQUFLLENBQ047UUFDRCxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBRUQsT0FBTyxDQUFDO0FBQ1YsQ0FBQztBQUVNLFNBQVMsb0JBQW9CLENBQ2xDLFVBQXdCLEVBQ3hCLFlBQXdELEVBQ3hELFFBQW9ELEVBQ3BELFVBQXVCLEVBQ3ZCLGVBQXdCLEVBQ3hCLEtBQXdCO0lBRXhCLE1BQU0sVUFBVSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLENBQUMsaUJBQWlCLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQyxpQkFBaUI7SUFDM0ksSUFBSSxVQUFVLElBQUksVUFBVSxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksVUFBVSxDQUFDLE1BQU0sSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN0RSxPQUFPLENBQUM7SUFDVixDQUFDO0lBQ0QsTUFBTSxjQUFjLEdBQ2xCLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVU7SUFDckUsTUFBTSxhQUFhLEdBQ2pCLFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVU7SUFDakUsTUFBTSxTQUFTLEdBQ2IsWUFBWSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyw4REFBYyxDQUFDLENBQUMsQ0FBQyw4REFBYyxHQUFHLENBQUM7SUFFNUUsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxjQUFjLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQztRQUN6RCxJQUFJLEtBQWE7UUFDakIsSUFBSSxRQUFnQjtRQUNwQixJQUFJLFlBQVksQ0FBQyxLQUFLLElBQUksUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3pDLFdBQVc7WUFDWCxLQUFLLEdBQUcsYUFBYSxHQUFHLGNBQWM7UUFDeEMsQ0FBQzthQUFNLENBQUM7WUFDTixXQUFXO1lBQ1gsS0FBSyxHQUFHLENBQUMsYUFBYSxHQUFHLGNBQWMsQ0FBQyxHQUFHLENBQUM7UUFDOUMsQ0FBQztRQUNELElBQUksWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3ZCLFFBQVEsR0FBRyxjQUFjO1FBQzNCLENBQUM7YUFBTSxJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUMxQixRQUFRLEdBQUcsYUFBYTtRQUMxQixDQUFDO2FBQU0sQ0FBQztZQUNOLFFBQVEsR0FBRyxjQUFjLEdBQUcsS0FBSztRQUNuQyxDQUFDO1FBRUQsZUFBZSxDQUNiLFlBQVksQ0FBQyxRQUFRLEVBQ3JCLFVBQVUsRUFDVixRQUFRLEVBQ1IsS0FBSyxFQUNMLEtBQUssRUFDTCxVQUFVLEVBQ1YsZUFBZSxFQUNmLEtBQUssQ0FDTjtRQUNELGVBQWUsQ0FDYixVQUFVLEVBQ1YsUUFBUSxDQUFDLFFBQVEsRUFDakIsUUFBUSxFQUNSLEtBQUssRUFDTCxJQUFJLEVBQ0osVUFBVSxFQUNWLGVBQWUsRUFDZixLQUFLLENBQ047UUFFRCxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBRUQsT0FBTyxDQUFDO0FBQ1YsQ0FBQztBQUVNLFNBQVMsd0JBQXdCLENBQ3RDLFVBQXdCLEVBQ3hCLFlBQThCLEVBQzlCLFVBQXVCLEVBQ3ZCLGNBQXVCLEVBQ3ZCLEtBQXdCO0lBRXhCLElBQUksYUFBWSxhQUFaLFlBQVksdUJBQVosWUFBWSxDQUFFLElBQUksS0FBSSxJQUFJLEVBQUUsQ0FBQztRQUMvQixPQUFPLENBQUM7SUFDVixDQUFDO0lBQ0QsTUFBTSxZQUFZLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSztJQUN6RSxJQUFJLFdBQVcsR0FBRyxZQUFZO0lBQzlCLElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDO0lBRXpCLE9BQU8sV0FBVyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNoQyxNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsSUFBSTtRQUNqQyxNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSztRQUN4RSxJQUFJLGdCQUFnQixLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDNUIsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxZQUFZLENBQUMsSUFBSSw4REFBYyxFQUFFLENBQUM7Z0JBQ3hELGdCQUFnQixHQUFHLFFBQVE7Z0JBQzNCLGlCQUFpQixDQUNmLFFBQVEsQ0FBQyxLQUFLLEVBQ2QsV0FBVyxDQUFDLEtBQUssRUFDakIsZ0JBQWdCLEVBQ2hCLElBQUksRUFDSixLQUFLLEVBQ0wsVUFBVSxFQUNWLGNBQWMsRUFDZCxLQUFLLENBQ047WUFDSCxDQUFDO1FBQ0gsQ0FBQzthQUFNLElBQUksUUFBUSxLQUFLLGdCQUFnQixFQUFFLENBQUM7WUFDekMsNEJBQTRCO1lBQzVCLGlCQUFpQixDQUNmLFFBQVEsQ0FBQyxLQUFLLEVBQ2QsV0FBVyxDQUFDLEtBQUssRUFDakIsZ0JBQWdCLEVBQ2hCLElBQUksRUFDSixLQUFLLEVBQ0wsVUFBVSxFQUNWLGNBQWMsRUFDZCxLQUFLLENBQ047UUFDSCxDQUFDO1FBQ0QsV0FBVyxHQUFHLFFBQVE7SUFDeEIsQ0FBQztJQUVELElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDekIsTUFBTSxLQUFLLEdBQUcsZ0JBQWdCLEdBQUcsWUFBWTtRQUM3QyxpQkFBaUIsQ0FDZixZQUFZLENBQUMsS0FBSyxFQUNsQixVQUFVLEVBQ1YsZ0JBQWdCLEVBQ2hCLEtBQUssRUFDTCxLQUFLLEVBQ0wsVUFBVSxFQUNWLGNBQWMsRUFDZCxLQUFLLENBQ047UUFDRCxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBQ0QsT0FBTyxDQUFDO0FBQ1YsQ0FBQztBQUVNLFNBQVMsb0JBQW9CLENBQ2xDLFVBQXdCLEVBQ3hCLElBQXNCLEVBQ3RCLFVBQXVCLEVBQ3ZCLGNBQXVCLEVBQ3ZCLEtBQXdCO0lBRXhCLElBQUksS0FBSSxhQUFKLElBQUksdUJBQUosSUFBSSxDQUFFLElBQUksS0FBSSxJQUFJLEVBQUUsQ0FBQztRQUN2QixPQUFPLENBQUM7SUFDVixDQUFDO0lBQ0QsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSztJQUNqRSxJQUFJLFdBQVcsR0FBRyxJQUFJO0lBQ3RCLElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDO0lBRXpCLE9BQU8sV0FBVyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNoQyxNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsSUFBSTtRQUNqQyxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSztRQUN4RSxJQUFJLGdCQUFnQixLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDNUIsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxZQUFZLENBQUMsSUFBSSw4REFBYyxFQUFFLENBQUM7Z0JBQ3hELGdCQUFnQixHQUFHLFFBQVE7Z0JBQzNCLGlCQUFpQixDQUNmLFdBQVcsQ0FBQyxLQUFLLEVBQ2pCLFFBQVEsQ0FBQyxLQUFLLEVBQ2QsZ0JBQWdCLEVBQ2hCLElBQUksRUFDSixJQUFJLEVBQ0osVUFBVSxFQUNWLGNBQWMsRUFDZCxLQUFLLENBQ047WUFDSCxDQUFDO1FBQ0gsQ0FBQzthQUFNLElBQUksUUFBUSxLQUFLLGdCQUFnQixFQUFFLENBQUM7WUFDekMsNEJBQTRCO1lBQzVCLGlCQUFpQixDQUNmLFdBQVcsQ0FBQyxLQUFLLEVBQ2pCLFFBQVEsQ0FBQyxLQUFLLEVBQ2QsZ0JBQWdCLEVBQ2hCLElBQUksRUFDSixJQUFJLEVBQ0osVUFBVSxFQUNWLGNBQWMsRUFDZCxLQUFLLENBQ047UUFDSCxDQUFDO1FBQ0QsV0FBVyxHQUFHLFFBQVE7SUFDeEIsQ0FBQztJQUVELElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDekIsTUFBTSxLQUFLLEdBQUcsWUFBWSxHQUFHLGdCQUFnQjtRQUM3QyxpQkFBaUIsQ0FDZixVQUFVLEVBQ1YsSUFBSSxDQUFDLEtBQUssRUFDVixnQkFBZ0IsRUFDaEIsS0FBSyxFQUNMLElBQUksRUFDSixVQUFVLEVBQ1YsY0FBYyxFQUNkLEtBQUssQ0FDTjtRQUNELE9BQU8sS0FBSztJQUNkLENBQUM7SUFDRCxPQUFPLENBQUM7QUFDVixDQUFDO0FBRU0sU0FBUyxzQkFBc0IsQ0FDcEMsVUFBd0IsRUFDeEIsWUFBOEIsRUFDOUIsVUFBdUIsRUFDdkIsZUFBd0IsRUFDeEIsS0FBd0I7SUFFeEIsSUFBSSxhQUFZLGFBQVosWUFBWSx1QkFBWixZQUFZLENBQUUsSUFBSSxLQUFJLElBQUksRUFBRSxDQUFDO1FBQy9CLE9BQU8sQ0FBQztJQUNWLENBQUM7SUFDRCxNQUFNLFlBQVksR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNO0lBQ3pFLElBQUksV0FBVyxHQUFHLFlBQVk7SUFDOUIsSUFBSSxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7SUFFekIsT0FBTyxXQUFXLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2hDLE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxJQUFJO1FBQ2pDLE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNO1FBQ3hFLElBQUksZ0JBQWdCLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM1QixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLFlBQVksQ0FBQyxJQUFJLDhEQUFjLEVBQUUsQ0FBQztnQkFDeEQsZ0JBQWdCLEdBQUcsUUFBUTtnQkFDM0IsZUFBZSxDQUNiLFFBQVEsQ0FBQyxLQUFLLEVBQ2QsV0FBVyxDQUFDLEtBQUssRUFDakIsZ0JBQWdCLEVBQ2hCLElBQUksRUFDSixLQUFLLEVBQ0wsVUFBVSxFQUNWLGVBQWUsRUFDZixLQUFLLENBQ047WUFDSCxDQUFDO1FBQ0gsQ0FBQzthQUFNLElBQUksUUFBUSxLQUFLLGdCQUFnQixFQUFFLENBQUM7WUFDekMsNEJBQTRCO1lBQzVCLGVBQWUsQ0FDYixRQUFRLENBQUMsS0FBSyxFQUNkLFdBQVcsQ0FBQyxLQUFLLEVBQ2pCLGdCQUFnQixFQUNoQixJQUFJLEVBQ0osS0FBSyxFQUNMLFVBQVUsRUFDVixlQUFlLEVBQ2YsS0FBSyxDQUNOO1FBQ0gsQ0FBQztRQUNELFdBQVcsR0FBRyxRQUFRO0lBQ3hCLENBQUM7SUFFRCxJQUFJLGdCQUFnQixHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ3pCLE1BQU0sS0FBSyxHQUFHLGdCQUFnQixHQUFHLFlBQVk7UUFDN0MsZUFBZSxDQUNiLFlBQVksQ0FBQyxLQUFLLEVBQ2xCLFVBQVUsRUFDVixnQkFBZ0IsRUFDaEIsS0FBSyxFQUNMLEtBQUssRUFDTCxVQUFVLEVBQ1YsZUFBZSxFQUNmLEtBQUssQ0FDTjtRQUNELE9BQU8sS0FBSztJQUNkLENBQUM7SUFDRCxPQUFPLENBQUM7QUFDVixDQUFDO0FBRU0sU0FBUyxrQkFBa0IsQ0FDaEMsVUFBd0IsRUFDeEIsSUFBc0IsRUFDdEIsVUFBdUIsRUFDdkIsZUFBd0IsRUFDeEIsS0FBd0I7SUFFeEIsSUFBSSxLQUFJLGFBQUosSUFBSSx1QkFBSixJQUFJLENBQUUsSUFBSSxLQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZCLE9BQU8sQ0FBQztJQUNWLENBQUM7SUFDRCxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNO0lBQ2pFLElBQUksV0FBVyxHQUFHLElBQUk7SUFDdEIsSUFBSSxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7SUFFekIsT0FBTyxXQUFXLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2hDLE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxJQUFJO1FBQ2pDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNO1FBQ3hFLElBQUksZ0JBQWdCLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM1QixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLFlBQVksQ0FBQyxJQUFJLDhEQUFjLEVBQUUsQ0FBQztnQkFDeEQsZ0JBQWdCLEdBQUcsUUFBUTtnQkFDM0IsZUFBZSxDQUNiLFdBQVcsQ0FBQyxLQUFLLEVBQ2pCLFFBQVEsQ0FBQyxLQUFLLEVBQ2QsZ0JBQWdCLEVBQ2hCLElBQUksRUFDSixJQUFJLEVBQ0osVUFBVSxFQUNWLGVBQWUsRUFDZixLQUFLLENBQ047WUFDSCxDQUFDO1FBQ0gsQ0FBQzthQUFNLElBQUksUUFBUSxLQUFLLGdCQUFnQixFQUFFLENBQUM7WUFDekMsNEJBQTRCO1lBQzVCLGVBQWUsQ0FDYixXQUFXLENBQUMsS0FBSyxFQUNqQixRQUFRLENBQUMsS0FBSyxFQUNkLGdCQUFnQixFQUNoQixJQUFJLEVBQ0osSUFBSSxFQUNKLFVBQVUsRUFDVixlQUFlLEVBQ2YsS0FBSyxDQUNOO1FBQ0gsQ0FBQztRQUNELFdBQVcsR0FBRyxRQUFRO0lBQ3hCLENBQUM7SUFFRCxJQUFJLGdCQUFnQixHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ3pCLE1BQU0sS0FBSyxHQUFHLFlBQVksR0FBRyxnQkFBZ0I7UUFDN0MsZUFBZSxDQUNiLFVBQVUsRUFDVixJQUFJLENBQUMsS0FBSyxFQUNWLGdCQUFnQixFQUNoQixLQUFLLEVBQ0wsSUFBSSxFQUNKLFVBQVUsRUFDVixlQUFlLEVBQ2YsS0FBSyxDQUNOO1FBQ0QsT0FBTyxLQUFLO0lBQ2QsQ0FBQztJQUNELE9BQU8sQ0FBQztBQUNWLENBQUM7QUFFRDs7Ozs7Ozs7R0FRRztBQUNJLFNBQVMsaUJBQWlCLENBQy9CLFlBQTBCLEVBQzFCLFFBQXNCLEVBQ3RCLFFBQWdCLEVBQ2hCLFNBQWtCLEVBQ2xCLE9BQWdCLEVBQ2hCLFVBQXNCLEVBQ3RCLGNBQXNCLEVBQ3RCLEtBQXVCO0lBRXZCLElBQUksVUFBVSxJQUFJLElBQUksSUFBSSxLQUFLLElBQUksSUFBSSxFQUFFLENBQUM7UUFDeEMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUMvRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBRXJFLFVBQVUsQ0FBQyxRQUFRLENBQUMsK0NBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3pFLE1BQU0sSUFBSSxHQUF3QjtZQUNoQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSztZQUN2RSxHQUFHLEVBQUUsSUFBSTtZQUNULEtBQUssRUFBRSxRQUFRO1lBQ2YsTUFBTSxFQUFFLElBQUksR0FBRyxJQUFJO1NBQ3BCO1FBQ0QsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7UUFFekIsSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUNkLE1BQU0sTUFBTSxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7WUFDaEMsTUFBTSxhQUFhLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxhQUFhO1lBQ3RELE1BQU0sS0FBSyxHQUFHLGFBQWE7Z0JBQ3pCLENBQUMsQ0FBQyw0Q0FBUyxDQUFDLHNCQUFzQixDQUFDLDhEQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxjQUFjLENBQUMsQ0FBQztnQkFDM0UsQ0FBQyxDQUFDLDRDQUFTLENBQUMsaUJBQWlCLENBQUMsR0FBRyxRQUFRLElBQUksQ0FBQztZQUNoRCxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN0RCxVQUFVLENBQUMsUUFBUSxDQUNqQixPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQ2pFLE1BQU0sRUFDTixPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxRQUFRLEVBQ2pFLE1BQU0sRUFDTixLQUFLLEVBQ0wsS0FBSyxDQUNOO1FBQ0gsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDO0FBRU0sU0FBUyxzQkFBc0IsQ0FDcEMsVUFBd0IsRUFDeEIsWUFBd0QsRUFDeEQsUUFBb0QsRUFDcEQsVUFBbUIsRUFDbkIsRUFBVSxFQUNWLFVBQXNCLEVBQ3RCLGNBQXNCLEVBQ3RCLEtBQXVCOztJQUV2QixJQUFJLFVBQVUsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3hDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RELElBQUksTUFBTSxHQUFHLG1CQUFZLENBQUMsUUFBUSwwQ0FBRSxJQUFJLENBQUMsR0FBRyxNQUFLLE1BQU0sQ0FBQyxpQkFBaUI7UUFDekUsTUFBTSxZQUFZLEdBQXdCLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSTtRQUNwRSxxREFBcUQ7UUFDckQsSUFBSSxZQUFZLElBQUksSUFBSSxJQUFJLFVBQVUsQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3hHLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsWUFBWSxDQUFDLEdBQUcsQ0FBQztZQUM1RCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUNuQixVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFDdEIsWUFBWSxDQUFDLE1BQU0sQ0FDcEI7WUFFRCxNQUFNLE1BQU0sR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQ2hDLE1BQU0sYUFBYSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsYUFBYTtZQUNuRCxJQUFJLFFBQVEsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxZQUFZLENBQUMsS0FBSztZQUN4RCxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUN4QixRQUFRLElBQUksRUFBRTtZQUNoQixDQUFDO1lBQ0QsTUFBTSxLQUFLLEdBQUcsYUFBYTtnQkFDekIsQ0FBQyxDQUFDLDRDQUFTLENBQUMsc0JBQXNCLENBQUMsOERBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLGNBQWMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLENBQUMsNENBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLFFBQVEsSUFBSSxDQUFDO1lBQ2hELFVBQVUsQ0FBQyxRQUFRLENBQ2pCLFlBQVksQ0FBQyxLQUFLLEVBQ2xCLE1BQU0sRUFDTixZQUFZLENBQUMsS0FBSyxHQUFHLFFBQVEsRUFDN0IsTUFBTSxFQUNOLEtBQUssRUFDTCxLQUFLLENBQ047UUFDSCxDQUFDO1FBRUQsTUFBTSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxNQUFNLENBQUMsaUJBQWlCO1FBQ2hFLE1BQU0sUUFBUSxHQUF3QixRQUFRLENBQUMsUUFBUSxDQUFDLElBQUk7UUFDNUQsSUFBSSxRQUFRLElBQUksSUFBSSxJQUFJLFVBQVUsQ0FBQyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ2pHLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQztZQUN4RCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUNuQixVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFDdEIsUUFBUSxDQUFDLE1BQU0sQ0FDaEI7WUFFRCxNQUFNLE1BQU0sR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQ2hDLE1BQU0sYUFBYSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsYUFBYTtZQUNwRCxJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSztZQUNwRCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNwQixRQUFRLElBQUksRUFBRTtZQUNoQixDQUFDO1lBQ0QsTUFBTSxLQUFLLEdBQUcsYUFBYTtnQkFDekIsQ0FBQyxDQUFDLDRDQUFTLENBQUMsc0JBQXNCLENBQUMsOERBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLGNBQWMsQ0FBQyxDQUFDO2dCQUMzRSxDQUFDLENBQUMsNENBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLFFBQVEsSUFBSSxDQUFDO1lBQ2hELFVBQVUsQ0FBQyxRQUFRLENBQ2pCLFFBQVEsQ0FBQyxJQUFJLEVBQ2IsTUFBTSxFQUNOLFFBQVEsQ0FBQyxJQUFJLEdBQUcsUUFBUSxFQUN4QixNQUFNLEVBQ04sS0FBSyxFQUNMLEtBQUssQ0FDTjtRQUNILENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQztBQUVNLFNBQVMsZUFBZSxDQUM3QixZQUEwQixFQUMxQixRQUFzQixFQUN0QixRQUFnQixFQUNoQixTQUFrQixFQUNsQixPQUFnQixFQUNoQixVQUFzQixFQUN0QixlQUF1QixFQUN2QixLQUF1QjtJQUV2QixJQUFJLFVBQVUsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3hDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDakUsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUVuRSxVQUFVLENBQUMsUUFBUSxDQUFDLCtDQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN6RSxNQUFNLElBQUksR0FBd0I7WUFDaEMsSUFBSSxFQUFFLElBQUk7WUFDVixHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTTtZQUN0RSxLQUFLLEVBQUUsSUFBSSxHQUFHLElBQUk7WUFDbEIsTUFBTSxFQUFFLFFBQVE7U0FDakI7UUFDRCxVQUFVLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUV6QixJQUFJLFNBQVMsRUFBRSxDQUFDO1lBQ2QsTUFBTSxNQUFNLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztZQUNoQyxNQUFNLGFBQWEsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLGFBQWE7WUFDdkQsTUFBTSxLQUFLLEdBQUcsYUFBYTtnQkFDekIsQ0FBQyxDQUFDLDRDQUFTLENBQUMsc0JBQXNCLENBQUMsOERBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLGVBQWUsQ0FBQyxDQUFDO2dCQUM1RSxDQUFDLENBQUMsNENBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLFFBQVEsSUFBSSxDQUFDO1lBQ2hELFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3RELFVBQVUsQ0FBQyxRQUFRLENBQ2pCLE1BQU0sRUFDTixPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQ2pFLE1BQU0sRUFDTixPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLEVBQ2pFLEtBQUssRUFDTCxLQUFLLENBQ047UUFDSCxDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFFTSxTQUFTLG9CQUFvQixDQUNsQyxVQUF3QixFQUN4QixZQUF3RCxFQUN4RCxRQUFvRCxFQUNwRCxVQUFtQixFQUNuQixFQUFVLEVBQ1YsVUFBc0IsRUFDdEIsZUFBdUIsRUFDdkIsS0FBdUI7SUFFdkIsSUFBSSxVQUFVLElBQUksSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN4QyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0RCxJQUFJLE1BQU0sR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLGlCQUFpQjtRQUN6RSxNQUFNLFlBQVksR0FBd0IsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJO1FBQ3BFLElBQUksWUFBWSxJQUFJLElBQUksSUFBSSxVQUFVLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN2RyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxJQUFJLENBQUM7WUFDOUQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxZQUFZLENBQUMsS0FBSyxDQUFDO1lBRWhFLE1BQU0sTUFBTSxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7WUFDaEMsTUFBTSxhQUFhLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxhQUFhO1lBQ2xELElBQUksUUFBUSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLFlBQVksQ0FBQyxNQUFNO1lBQ3hELElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ3hCLFFBQVEsSUFBSSxFQUFFO1lBQ2hCLENBQUM7WUFDRCxNQUFNLEtBQUssR0FBRyxhQUFhO2dCQUN6QixDQUFDLENBQUMsNENBQVMsQ0FBQyxzQkFBc0IsQ0FBQyw4REFBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsZUFBZSxDQUFDLENBQUM7Z0JBQzVFLENBQUMsQ0FBQyw0Q0FBUyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsUUFBUSxJQUFJLENBQUM7WUFDaEQsVUFBVSxDQUFDLFFBQVEsQ0FDakIsTUFBTSxFQUNOLFlBQVksQ0FBQyxNQUFNLEVBQ25CLE1BQU0sRUFDTixZQUFZLENBQUMsTUFBTSxHQUFHLFFBQVEsRUFDOUIsS0FBSyxFQUNMLEtBQUssQ0FDTjtRQUNILENBQUM7UUFFRCxNQUFNLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQyxpQkFBaUI7UUFDakUsTUFBTSxRQUFRLEdBQXdCLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSTtRQUM1RCxJQUFJLFFBQVEsSUFBSSxJQUFJLElBQUksVUFBVSxDQUFDLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDbEcsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDO1lBQzFELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQztZQUU1RCxNQUFNLE1BQU0sR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQ2hDLE1BQU0sYUFBYSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsYUFBYTtZQUNyRCxJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsR0FBRyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTTtZQUNwRCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNwQixRQUFRLElBQUksRUFBRTtZQUNoQixDQUFDO1lBQ0QsTUFBTSxLQUFLLEdBQUcsYUFBYTtnQkFDekIsQ0FBQyxDQUFDLDRDQUFTLENBQUMsc0JBQXNCLENBQUMsOERBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLGVBQWUsQ0FBQyxDQUFDO2dCQUM1RSxDQUFDLENBQUMsNENBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLFFBQVEsSUFBSSxDQUFDO1lBQ2hELFVBQVUsQ0FBQyxRQUFRLENBQ2pCLE1BQU0sRUFDTixRQUFRLENBQUMsR0FBRyxFQUNaLE1BQU0sRUFDTixRQUFRLENBQUMsR0FBRyxHQUFHLFFBQVEsRUFDdkIsS0FBSyxFQUNMLEtBQUssQ0FDTjtRQUNILENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQztBQUVNLFNBQVMsY0FBYyxDQUM1QixVQUF3QixFQUN4QixhQUE2QixFQUM3QixLQUFlLEVBQ2YsY0FBc0IsRUFDdEIsZUFBdUIsRUFDdkIsVUFBdUIsRUFDdkIsS0FBd0I7O0lBRXhCLElBQUksRUFBRSxHQUFHLENBQUM7SUFDVixJQUFJLEVBQUUsR0FBRyxDQUFDO0lBQ1YsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBRWpELElBQUksQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNqQyxnQkFBZ0I7UUFDaEIsSUFBSSxhQUFhLEdBQUcsK0JBQStCLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQztRQUM5RSxhQUFhLEdBQUcsV0FBVyxDQUFDLGFBQWEsRUFBRSxpQkFBVSxDQUFDLElBQUksMENBQUUsS0FBSyxLQUFJLElBQUksS0FBSSxnQkFBVSxDQUFDLElBQUksMENBQUUsYUFBYSxFQUFDO1FBQzVHLElBQUksU0FBUyxHQUFHLDJCQUEyQixDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUM7UUFDdEUsU0FBUyxHQUFHLFlBQVksQ0FBQyxTQUFTLEVBQUUsaUJBQVUsQ0FBQyxLQUFLLDBDQUFFLEtBQUssS0FBSSxJQUFJLElBQUksVUFBVSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsY0FBYyxDQUFDO1FBQ3RILCtCQUErQjtRQUMvQixFQUFFLEdBQUcsc0JBQXNCLENBQ3pCLFVBQVUsRUFDVixFQUFFLFFBQVEsRUFBRSxhQUFhLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUN4RSxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUNwRSxVQUFVLEVBQ1YsY0FBYyxFQUNkLEtBQUssQ0FDTjtRQUNELDZCQUE2QjtRQUM3QixJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDakQsRUFBRSxHQUFHLHdCQUF3QixDQUFDLFVBQVUsRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxLQUFLLENBQUM7UUFDN0YsQ0FBQztRQUNELHlCQUF5QjtRQUN6QixJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDakQsRUFBRSxHQUFHLG9CQUFvQixDQUFDLFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxLQUFLLENBQUM7UUFDckYsQ0FBQztRQUNELHNCQUFzQixDQUNwQixVQUFVLEVBQ1YsRUFBRSxRQUFRLEVBQUUsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFDeEUsRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFDcEUsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQ2IsRUFBRSxFQUNGLFVBQVUsRUFDVixjQUFjLEVBQ2QsS0FBSyxDQUNOO0lBQ0gsQ0FBQztJQUVELElBQUksQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNqQyxjQUFjO1FBQ2QsSUFBSSxhQUFhLEdBQUcsNkJBQTZCLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQztRQUM1RSxhQUFhLEdBQUcsVUFBVSxDQUFDLGFBQWEsRUFBRSxpQkFBVSxDQUFDLEdBQUcsMENBQUUsS0FBSyxLQUFJLElBQUksSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztRQUN4RyxJQUFJLFNBQVMsR0FBRyx5QkFBeUIsQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDO1FBQ3BFLFNBQVMsR0FBRyxhQUFhLENBQUMsU0FBUyxFQUFFLGlCQUFVLENBQUMsTUFBTSwwQ0FBRSxLQUFLLEtBQUksSUFBSSxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLGVBQWUsQ0FBQztRQUMxSCwrQkFBK0I7UUFDL0IsRUFBRSxHQUFHLG9CQUFvQixDQUN2QixVQUFVLEVBQ1YsRUFBRSxRQUFRLEVBQUUsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFDeEUsRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFDcEUsVUFBVSxFQUNWLGVBQWUsRUFDZixLQUFLLENBQ047UUFFRCw2QkFBNkI7UUFDN0IsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ2pELEVBQUUsR0FBRyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsYUFBYSxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUUsS0FBSyxDQUFDO1FBQzVGLENBQUM7UUFDRCx5QkFBeUI7UUFDekIsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ2pELEVBQUUsR0FBRyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUUsS0FBSyxDQUFDO1FBQ3BGLENBQUM7UUFDRCxvQkFBb0IsQ0FDbEIsVUFBVSxFQUNWLEVBQUUsUUFBUSxFQUFFLGFBQWEsYUFBYixhQUFhLHVCQUFiLGFBQWEsQ0FBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQ3pFLEVBQUUsUUFBUSxFQUFFLFNBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQ3JFLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUNiLEVBQUUsRUFDRixVQUFVLEVBQ1YsZUFBZSxFQUNmLEtBQUssQ0FDTjtJQUNILENBQUM7SUFFRCxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtBQUNuQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaDlCdUU7QUFDbEI7QUFFbkI7QUFFNUIsU0FBUyxlQUFlLENBQUUsTUFBb0IsRUFBRSxjQUF1QixFQUFFLGVBQXdCOztJQUN0RyxNQUFNLFNBQVMsR0FBb0MsRUFBRTtJQUNyRCxJQUFJLEtBQUssR0FBRyxjQUFjO0lBQzFCLElBQUksTUFBTSxHQUFHLGVBQWU7SUFDNUIsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3RCLElBQUksT0FBTztRQUNYLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNoQyxNQUFNLFFBQVEsR0FBcUIsUUFBUSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsZ0VBQXlCLElBQUksQ0FBQztZQUN4RyxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUNiLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxlQUFlLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRO2dCQUMvRSxPQUFPLEdBQUcsV0FBVyxDQUFDLGFBQWEsQ0FBQyxrQ0FBa0MsTUFBTSxDQUFDLEVBQUUsR0FBRyxDQUFDO1lBQ3JGLENBQUM7UUFDSCxDQUFDO2FBQU0sQ0FBQztZQUNOLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGtDQUFrQyxNQUFNLENBQUMsRUFBRSxHQUFHLENBQUM7UUFDbEYsQ0FBQztRQUNELElBQUksT0FBTyxFQUFFLENBQUM7WUFDWixLQUFLLEdBQUcsT0FBTyxDQUFDLFdBQVc7WUFDM0IsTUFBTSxHQUFHLE9BQU8sQ0FBQyxZQUFZO1FBQy9CLENBQUM7YUFBTSxDQUFDO1lBQ04sS0FBSyxHQUFHLEdBQUc7WUFDWCxNQUFNLEdBQUcsR0FBRztRQUNkLENBQUM7SUFDSCxDQUFDO0lBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFNLENBQUMsT0FBTyxtQ0FBSSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDN0MsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDckMsTUFBTSxRQUFRLEdBQUcsb0VBQXVCLENBQ3RDLFVBQVUsRUFDVixLQUFLLEVBQ0wsTUFBTSxDQUNQO1FBQ0QsU0FBUyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVE7SUFDMUIsQ0FBQyxDQUFDO0lBRUYsTUFBTSxLQUFLLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDL0IsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNsQixNQUFNLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUM1QixNQUFNLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUU1QixJQUFJLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQztRQUNWLENBQUM7UUFDRCxJQUFJLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUVELE1BQU0sS0FBSyxHQUFHLDZDQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUk7UUFDMUMsTUFBTSxLQUFLLEdBQUcsNkNBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSTtRQUUxQyxJQUFJLEtBQUssR0FBRyxLQUFLLEVBQUUsQ0FBQztZQUNsQixPQUFPLENBQUM7UUFDVixDQUFDO1FBQ0QsSUFBSSxLQUFLLEdBQUcsS0FBSyxFQUFFLENBQUM7WUFDbEIsT0FBTyxDQUFDLENBQUM7UUFDWCxDQUFDO1FBRUQsSUFBSSxFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDakQsT0FBTyxDQUFDO1FBQ1YsQ0FBQztRQUNELElBQUksRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2pELE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUNELE9BQU8sQ0FBQztJQUNWLENBQUMsQ0FBQztJQUVGLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDO0FBQ25DLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RFcUQ7QUFDVjtBQUVyQyxTQUFTLGdCQUFnQixDQUFFLFdBQVc7SUFDM0MsT0FBTztRQUNMLDhDQUFHOztjQUVPLHNEQUFjLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQztlQUNsQyxzREFBYyxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUM7YUFDdEMsc0RBQWMsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDO2dCQUMvQixzREFBYyxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUM7ZUFDdEMsc0RBQWMsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDO2dCQUNuQyxzREFBYyxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUM7S0FDaEQ7UUFDRCxXQUFXLENBQUMsU0FBUztLQUN0QjtBQUNILENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNmaUM7QUFDcUM7QUFFaEUsTUFBTSwwQkFBMEIsR0FBdUIsNkNBQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO0lBQzlFLFFBQVEsRUFBRSxDQUFDO0NBQ1osQ0FBQztBQUVLLE1BQU0sK0JBQStCLEdBQTJCLDZDQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxnRkFBMkIsRUFBRTtJQUNwSCxVQUFVLEVBQUUsS0FBSztJQUNqQixVQUFVLEVBQUUsS0FBSztJQUNqQixTQUFTLEVBQUUsRUFBRTtDQUNkLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNaRixpQ0FBaUM7QUFDOEU7QUFVN0Y7QUFDeUQ7QUFjcEUsU0FBUyxlQUFlLENBQUUsTUFBb0I7SUFDbkQsSUFBSSxNQUFNLENBQUMsT0FBTyxJQUFJLElBQUksSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDdkUsT0FBTyxFQUFFO0lBQ1gsQ0FBQztJQUNELE1BQU0sV0FBVyxHQUFHLElBQUk7SUFFeEIsTUFBTSxVQUFVLEdBQUcsQ0FBQyxLQUFLLEVBQVUsRUFBRTtRQUNuQyxPQUFPLG9EQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLO0lBQy9FLENBQUM7SUFFRCxNQUFNLFFBQVEsR0FBRyxDQUFDLEtBQXVCLEVBQUUsS0FBdUIsRUFBVSxFQUFFO1FBQzVFLGNBQWM7UUFDZCxNQUFNLElBQUksR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDdkMsTUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQ3ZDLElBQUksSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDO1lBQ2hCLE9BQU8sQ0FBQztRQUNWLENBQUM7UUFDRCxJQUFJLElBQUksR0FBRyxJQUFJLEVBQUUsQ0FBQztZQUNoQixPQUFPLENBQUMsQ0FBQztRQUNYLENBQUM7UUFDRCxlQUFlO1FBQ2YsTUFBTSxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3pDLE1BQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztRQUN6QyxJQUFJLEtBQUssR0FBRyxLQUFLLEVBQUUsQ0FBQztZQUNsQixPQUFPLENBQUM7UUFDVixDQUFDO1FBQ0QsSUFBSSxLQUFLLEdBQUcsS0FBSyxFQUFFLENBQUM7WUFDbEIsT0FBTyxDQUFDLENBQUM7UUFDWCxDQUFDO1FBQ0QsT0FBTyxDQUFDO0lBQ1YsQ0FBQztJQUVELE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1NBQy9CLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDL0IsSUFBSSxDQUFDLFFBQVEsQ0FBQztTQUNkLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUM7QUFDckMsQ0FBQztBQUVNLFNBQVMsb0JBQW9CLENBQ2xDLE1BQW9CLEVBQ3BCLFlBQTZCLEVBQzdCLFVBQTJCO0lBRTNCLE1BQU0saUJBQWlCLEdBQUcsNENBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUM7SUFDbEUsTUFBTSxlQUFlLEdBQUcsNENBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUM7SUFDOUQsSUFBSSxpQkFBaUIsR0FBRyxlQUFlLEVBQUUsQ0FBQztRQUN4QyxPQUFPLE1BQU07SUFDZixDQUFDO0lBRUQsT0FBTyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUUsZUFBZSxDQUFDO0FBQ3RELENBQUM7QUFFRDs7Ozs7Ozs7O0dBU0c7QUFDSSxTQUFTLG9CQUFvQixDQUFFLE1BQW9CLEVBQUUsV0FBbUI7SUFDN0UsTUFBTSxZQUFZLEdBQUcsV0FBVztJQUNoQyxNQUFNLGFBQWEsR0FBRyxHQUFHO0lBRXpCLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLO0lBQzVCLElBQUksT0FBTyxJQUFJLElBQUksSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQzVDLE9BQU8sTUFBTTtJQUNmLENBQUM7SUFFRCxJQUFJLGFBQWEsR0FBaUIsb0RBQVMsQ0FBQyxNQUFNLENBQUM7SUFDbkQsTUFBTSxNQUFNLEdBQWUsRUFBRTtJQUM3QixPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3ZCLE1BQU0sQ0FBQyxJQUFJLGlCQUNULEVBQUUsRUFBRSxNQUFNLElBQ1AsY0FBYyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsRUFDM0U7SUFDSixDQUFDLENBQUM7SUFDRixNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUNwQixnREFBZ0Q7SUFDaEQsTUFBTSxhQUFhLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUN2QyxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLDJCQUEyQjtRQUMzQixNQUFNLE9BQU8sR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3JDLElBQUksUUFBUSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUN0Qix3REFBd0Q7Z0JBQ3hELElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztvQkFDdEIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxFQUFFO2dCQUNoQixDQUFDO2dCQUNELENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxtQkFDVCxJQUFJLEVBQ1A7Z0JBQ0YsT0FBTyxJQUFJO1lBQ2IsQ0FBQztRQUNILENBQUMsQ0FBQztRQUNGLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNiLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzFCLENBQUM7SUFDSCxDQUFDO0lBRUQsb0RBQW9EO0lBQ3BELElBQUksT0FBTyxHQUFHLENBQUM7SUFDZixJQUFJLGNBQWMsR0FBRyxFQUFFO0lBQ3ZCLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDeEIsSUFBSSxNQUFNLEdBQUcsQ0FBQztRQUNkLFdBQVcsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDO1FBQzVCLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQztZQUNsQixNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTztRQUNmLENBQUM7UUFDRCxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQixhQUFhLEdBQUcsYUFBYTthQUMxQixLQUFLLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsRUFBRTtZQUNoQyxJQUFJLEVBQUUsK0NBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQztZQUNoQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJO1lBQ2YsS0FBSyxFQUFFLCtDQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUM7WUFDakMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSTtTQUNuQixDQUFDO2FBQ0QsS0FBSyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUMsRUFBRSx1REFBbUIsQ0FBQyxNQUFNLENBQUM7UUFDeEYsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUN0QixDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFDMUIsV0FBVyxDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUM7Z0JBQ2xDLElBQUksTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUNmLE9BQU8sQ0FBQyxDQUFDLElBQUksTUFBTTtnQkFDckIsQ0FBQztnQkFDRCxhQUFhLEdBQUcsYUFBYTtxQkFDMUIsS0FBSyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLEVBQUU7b0JBQ2hDLElBQUksRUFBRSwrQ0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDO29CQUNoQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJO29CQUNmLEtBQUssRUFBRSwrQ0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDO29CQUNqQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJO2lCQUNuQixDQUFDO3FCQUNELEtBQUssQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsT0FBTyxDQUFDLEVBQUUsdURBQW1CLENBQUMsTUFBTSxDQUFDO2dCQUN4RixjQUFjLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDakMsQ0FBQyxDQUFDO1FBQ0osQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLGFBQWEsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxjQUFjLENBQUM7SUFDMUQsT0FBTyxhQUFhO0FBQ3RCLENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBRSxDQUFNLEVBQUUsUUFBZ0IsRUFBRSxTQUFtQjtJQUNqRSxvREFBb0Q7SUFDcEQsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNmLGdCQUFnQjtZQUNoQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFDUCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ1osQ0FBQzthQUFNLENBQUM7WUFDTixZQUFZO1lBQ1osQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEIsQ0FBQztJQUNILENBQUM7SUFDRCxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDWixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFDVCxDQUFDO0lBQ0QsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxFQUFFLENBQUM7UUFDekIsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDO1lBQ25CLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLENBQUM7YUFBTSxDQUFDO1lBQ04sQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRO1lBQ2QsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ1QsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDO0FBRUQsU0FBUyxPQUFPLENBQUUsRUFBTyxFQUFFLEVBQU87SUFDaEMsK0JBQStCO0lBQy9CLElBQUksRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDbEIsT0FBTyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7U0FBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3pCLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBQ0QsT0FBTyxDQUFDO0FBQ1YsQ0FBQztBQUVNLFNBQVMsVUFBVSxDQUFFLEVBQU8sRUFBRSxFQUFPO0lBQzFDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM3QyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFN0MsT0FBTyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFO0FBQzNCLENBQUM7QUFFTSxTQUFTLFFBQVEsQ0FBRSxFQUFPLEVBQUUsRUFBTztJQUN4QyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUMvRixDQUFDO0FBRU0sU0FBUyxRQUFRLENBQUUsRUFBTyxFQUFFLEVBQU87SUFDeEMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDakMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDaEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2hELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNqRCxPQUFPO1FBQ0wsQ0FBQyxFQUFFLElBQUk7UUFDUCxDQUFDLEVBQUUsR0FBRztRQUNOLENBQUMsRUFBRSxLQUFLLEdBQUcsSUFBSTtRQUNmLENBQUMsRUFBRSxNQUFNLEdBQUcsR0FBRztLQUNoQjtBQUNILENBQUM7QUFFTSxTQUFTLGNBQWMsQ0FBRSxDQUFjLEVBQUUsY0FBc0IsRUFBRSxlQUF1Qjs7SUFDN0YsTUFBTSxNQUFNLEdBQVEsRUFBRTtJQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ1QsSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNULElBQUksQ0FBQyxHQUFHLGNBQWM7SUFDdEIsSUFBSSxDQUFDLEdBQUcsZUFBZSxHQUFHLEdBQUcsRUFBQyxvQ0FBb0M7SUFDbEUsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7UUFDZCxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ25FLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLFNBQVMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssTUFBTSxFQUFFLENBQUM7Z0JBQ2hELE1BQU0sSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsZUFBZTtnQkFDekYsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLG9EQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGlEQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3ZGLENBQUM7UUFDSCxDQUFDLENBQUM7UUFDRixJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDOUIsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJO1FBQ2pCLENBQUM7UUFFRCxJQUFJLE1BQU0sQ0FBQyxLQUFLLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDL0IsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLO1lBQ2hCLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxTQUFTLElBQUksTUFBTSxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUUsQ0FBQztnQkFDNUQsQ0FBQyxHQUFHLGNBQWMsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUM7WUFDdkMsQ0FBQztRQUNILENBQUM7YUFBTSxDQUFDO1lBQ04sQ0FBQyxHQUFHLGNBQWMsR0FBRyxDQUFDLFlBQU0sQ0FBQyxJQUFJLG1DQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBTSxDQUFDLEtBQUssbUNBQUksQ0FBQyxDQUFDO1FBQy9ELENBQUM7UUFFRCxJQUFJLE1BQU0sQ0FBQyxHQUFHLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDN0IsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHO1FBQ2hCLENBQUM7UUFFRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDaEMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNO1lBQ2pCLElBQUksTUFBTSxDQUFDLEdBQUcsS0FBSyxTQUFTLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxTQUFTLEVBQUUsQ0FBQztnQkFDNUQsQ0FBQyxHQUFHLGVBQWUsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7WUFDekMsQ0FBQztRQUNILENBQUM7YUFBTSxJQUFJLE1BQU0sQ0FBQyxHQUFHLEtBQUssU0FBUyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDbkUsQ0FBQyxHQUFHLGVBQWUsR0FBRyxNQUFNLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNO1FBQ2xELENBQUM7SUFDSCxDQUFDO0lBQ0QsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUN2QixDQUFDO0FBRU0sU0FBUyx5QkFBeUIsQ0FDdkMsUUFBaUIsRUFDakIsYUFBc0IsRUFDdEIsS0FBeUQsRUFDekQsUUFBUSxHQUFHLEtBQUs7SUFFaEIsTUFBTSxNQUFNLEdBQVEsRUFBRTtJQUV0QixNQUFNLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLEVBQUU7SUFDdEMsTUFBTSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxFQUFFO0lBQ3hDLE1BQU0sS0FBSyxHQUFHLGFBQWEsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUs7SUFDbEQsSUFBSSxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ25CLE9BQU87UUFDUCxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssR0FBRyxLQUFLLENBQUMsRUFBRTtJQUNqQyxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQzFCLGtCQUFrQjtRQUNsQixJQUFJLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDakIsS0FBSyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ3RDLENBQUM7UUFDRCxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssR0FBRyxLQUFLLENBQUMsRUFBRTtRQUMvQixNQUFNLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEVBQUU7SUFDMUMsQ0FBQztTQUFNLENBQUM7UUFDTixNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUs7UUFDcEIsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ2pCLEtBQUssQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUM3QyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDcEIsTUFBTSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxFQUFFO1lBQ3RDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsRUFBRTtRQUMxQyxDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsRUFBRTtJQUNwQyxNQUFNLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLEVBQUU7SUFDMUMsTUFBTSxNQUFNLEdBQUcsYUFBYSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTTtJQUNyRCxJQUFJLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDbkIsT0FBTztRQUNQLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQyxFQUFFO0lBQ25DLENBQUM7U0FBTSxJQUFJLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDMUIsbUJBQW1CO1FBQ25CLElBQUksS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNqQixLQUFLLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDdkMsQ0FBQztRQUNELE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQyxFQUFFO1FBQ2pDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsRUFBRTtJQUM1QyxDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTTtRQUN0QixJQUFJLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDakIsS0FBSyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQzVDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNwQixNQUFNLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLEVBQUU7WUFDcEMsTUFBTSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxFQUFFO1FBQzVDLENBQUM7SUFDSCxDQUFDO0lBRUQsSUFBSSxRQUFRLElBQUksNkNBQUssRUFBRSxFQUFFLENBQUM7UUFDeEIsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFRO0lBQ2hDLENBQUM7SUFDRCxPQUFPLE1BQU07QUFDZixDQUFDO0FBRU0sU0FBUyxpQkFBaUIsQ0FBRSxJQUFtQixFQUFFLE9BQStCOztJQUNyRixNQUFNLE1BQU0sR0FBUSxFQUFFO0lBQ3RCLElBQUksU0FBUyxHQUFHLGFBQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxTQUFTLG1DQUFJLEVBQUU7SUFDeEMsSUFBSSxHQUFHLEdBQUcsSUFBSTtJQUNkLE1BQU0sVUFBVSxHQUFHLDZEQUFxQixDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDO0lBQ25FLE1BQU0sU0FBUyxHQUFHLDZEQUFxQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDO0lBRWpFLElBQUksVUFBVSxLQUFLLHVEQUFtQixDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUc7UUFDcEIsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTTtJQUM1QixDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sT0FBTyxHQUFHLGVBQVMsQ0FBQyxHQUFHLG1DQUFJLEtBQUs7UUFDdEMsTUFBTSxVQUFVLEdBQUcsZUFBUyxDQUFDLE1BQU0sbUNBQUksS0FBSztRQUM1QyxJQUFJLFVBQVUsS0FBSyx1REFBbUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUM5QyxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNO1FBQzVCLENBQUM7UUFDRCxvREFBb0Q7UUFDcEQsSUFBSSxDQUFDLE9BQU8sS0FBSyxVQUFVLElBQUksVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUMvRCxNQUFNLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHO1FBQ3RCLENBQUM7YUFBTSxDQUFDO1lBQ04sTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTTtRQUM1QixDQUFDO1FBRUQsZUFBZTtRQUNmLElBQUksT0FBTyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsR0FBRyxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsS0FBSztRQUNwQixDQUFDO0lBQ0gsQ0FBQztJQUVELElBQUksU0FBUyxLQUFLLHVEQUFtQixDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzlDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUk7UUFDdEIsTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSztJQUMxQixDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sUUFBUSxHQUFHLGVBQVMsQ0FBQyxJQUFJLG1DQUFJLEtBQUs7UUFDeEMsTUFBTSxTQUFTLEdBQUcsZUFBUyxDQUFDLEtBQUssbUNBQUksS0FBSztRQUMxQyxJQUFJLFNBQVMsS0FBSyx1REFBbUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUM3QyxNQUFNLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLO1FBQzFCLENBQUM7UUFDRCxvREFBb0Q7UUFDcEQsSUFBSSxRQUFRLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDM0IsSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDO2dCQUNyQixNQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJO1lBQ3hCLENBQUM7aUJBQU0sQ0FBQztnQkFDTixNQUFNLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLO1lBQzFCLENBQUM7UUFDSCxDQUFDO2FBQU0sSUFBSSxRQUFRLElBQUksR0FBRyxDQUFDLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUN6QyxNQUFNLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLO1FBQzFCLENBQUM7YUFBTSxDQUFDO1lBQ04sTUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSTtRQUN4QixDQUFDO1FBRUQsZUFBZTtRQUNmLElBQUksT0FBTyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsS0FBSztRQUNyQixDQUFDO0lBQ0gsQ0FBQztJQUNELE9BQU8sTUFBTTtBQUNmLENBQUM7QUFFTSxTQUFTLGFBQWEsQ0FBRSxTQUE4QztJQUMzRSxNQUFNLE1BQU0sR0FBRyxvREFBUyxDQUFDLFNBQVMsQ0FBQztJQUNuQyxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsSUFBSTtJQUMzQixPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztBQUMvRCxDQUFDO0FBRU0sU0FBUyxRQUFRLENBQUUsSUFBaUI7SUFDekMsTUFBTSxNQUFNLEdBQUcsb0RBQVMsQ0FBQyxJQUFJLENBQUM7SUFDOUIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUk7SUFDdEIsT0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUM7QUFDMUQsQ0FBQztBQUVNLFNBQVMsb0JBQW9CLENBQUUsSUFBbUIsRUFBRSxXQUFtQyxFQUFFLGFBQXNCLEtBQUs7SUFDekgsTUFBTSxVQUFVLEdBQVEsRUFBRTtJQUMxQixNQUFNLE9BQU8sR0FBRyxXQUFXLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssS0FBSztJQUMxRCxNQUFNLE9BQU8sR0FBRyxXQUFXLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssS0FBSztJQUN6RCxNQUFNLElBQUksR0FBRyw2Q0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLElBQUksT0FBTyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQ3ZCLFVBQVUsQ0FBQyxLQUFLLEdBQUcsTUFBTTtRQUN6QixVQUFVLENBQUMsTUFBTSxHQUFHLE1BQU07UUFDMUIsVUFBVSxDQUFDLFNBQVMsR0FBRyxhQUFhLElBQUksR0FBRyxDQUFDLEVBQUUsVUFBVTtJQUMxRCxDQUFDO1NBQU0sSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNuQixVQUFVLENBQUMsS0FBSyxHQUFHLE1BQU07UUFDekIsVUFBVSxDQUFDLFNBQVMsR0FBRyxjQUFjLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSTtJQUNyRCxDQUFDO1NBQU0sSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNuQixVQUFVLENBQUMsTUFBTSxHQUFHLE1BQU07UUFDMUIsVUFBVSxDQUFDLFNBQVMsR0FBRyxrQkFBa0I7SUFDM0MsQ0FBQztJQUNELElBQUksQ0FBQyxVQUFVLElBQUksNERBQW9CLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQztRQUNyRCxVQUFVLENBQUMsTUFBTSxHQUFHLE1BQU07SUFDNUIsQ0FBQztJQUNELE9BQU8sVUFBVTtBQUNuQixDQUFDO0FBRUQ7O0dBRUc7QUFDSSxTQUFTLGVBQWUsQ0FBRSxJQUFtQixFQUFFLE9BQU8sRUFBRSxhQUF5QixFQUFFLFFBQW9COztJQUM1RyxJQUFJLFNBQVMsR0FBRyxJQUFJO0lBQ3BCLElBQUksVUFBVSxHQUFHLG9EQUFTLENBQUMsT0FBTyxhQUFQLE9BQU8sY0FBUCxPQUFPLEdBQUksRUFBRSxDQUFDO0lBQ3pDLElBQUksY0FBTyxhQUFQLE9BQU8sdUJBQVAsT0FBTyxDQUFFLFNBQVMsMENBQUUsS0FBSyxNQUFLLHVEQUFtQixDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzlELElBQUksUUFBUSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDbkMsSUFBSSw2Q0FBSyxFQUFFLEVBQUUsQ0FBQztnQkFDWixVQUFVLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDO1lBQ2pHLENBQUM7aUJBQU0sQ0FBQztnQkFDTixVQUFVLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDO1lBQ2pHLENBQUM7UUFDSCxDQUFDO2FBQU0sQ0FBQztZQUNOLElBQUksNkNBQUssRUFBRSxFQUFFLENBQUM7Z0JBQ1osVUFBVSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQztZQUNqRyxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sVUFBVSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxFQUFFLElBQUksQ0FBQztZQUNqRyxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFDRCxJQUFJLGNBQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxTQUFTLDBDQUFFLE1BQU0sTUFBSyx1REFBbUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUMvRCxJQUFJLFFBQVEsQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ25DLFVBQVUsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUM7UUFDakcsQ0FBQzthQUFNLENBQUM7WUFDTixVQUFVLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLEVBQUUsS0FBSyxDQUFDO1FBQ2pHLENBQUM7SUFDSCxDQUFDO0lBQ0QsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNuRSxNQUFNLElBQUksR0FBRyxJQUFJLEtBQUssTUFBTSxJQUFJLElBQUksS0FBSyxPQUFPLElBQUksSUFBSSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLE1BQU07UUFDakgsSUFBSSxhQUFhLEdBQUcsb0RBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUMsSUFBSSw2Q0FBSyxFQUFFLEVBQUUsQ0FBQztZQUNaLElBQUksSUFBSSxLQUFLLE1BQU0sRUFBRSxDQUFDO2dCQUNwQixhQUFhLEdBQUcsb0RBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQzFDLENBQUM7aUJBQU0sSUFBSSxJQUFJLEtBQUssT0FBTyxFQUFFLENBQUM7Z0JBQzVCLGFBQWEsR0FBRyxvREFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDekMsQ0FBQztRQUNILENBQUM7UUFDRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksYUFBYSxFQUFFLENBQUM7WUFDeEMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLCtDQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2hFLENBQUM7YUFBTSxDQUFDO1lBQ04sU0FBUyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ3BFLENBQUM7SUFDSCxDQUFDLENBQUM7SUFDRixPQUFPLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFO0FBQ2pELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4ZEQsZUFBZTtBQUNtSDtBQUNsRztBQUNzQztBQUNyQjtBQUNpRTtBQUVuRDtBQUNhO0FBQ0Q7QUFDaEI7QUFFM0QsTUFBTSxXQUFXLEdBQUcsOENBQUc7O0NBRXRCO0FBRUQsU0FBUyxRQUFRLENBQUUsWUFBOEI7SUFDL0MsT0FBTyw4Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBaUJRLFlBQVksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7O3NCQUVwQyxZQUFZLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDOzs7Ozs7Ozs7OzBCQVVsQyxZQUFZLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDOztHQUU1RDtBQUNILENBQUM7QUFFRCxTQUFTLGlCQUFpQixDQUFFLGVBQWdDO0lBQzFELE9BQU8sZUFBZSxLQUFLLHNEQUFlLENBQUMsS0FBSztBQUNsRCxDQUFDO0FBV00sU0FBUyxXQUFXLENBQUUsS0FBdUI7SUFDbEQsTUFBTSxFQUNKLFdBQVcsRUFDWCxlQUFlLEVBQ2Ysc0JBQXNCLEVBQ3RCLHVCQUF1QixFQUN2Qix3QkFBd0IsRUFDeEIsU0FBUyxFQUNWLEdBQUcsS0FBSztJQUNULE1BQU0sRUFBRSxZQUFZLEVBQUUsYUFBYSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsR0FBRyxXQUFXO0lBQ3ZFLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxxQkFBcUIsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztJQUN6RSxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO0lBQ25FLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztJQUNyRSxNQUFNLFFBQVEsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBb0IsSUFBSSxDQUFDO0lBQ3RELE1BQU0sU0FBUyxHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFvQixJQUFJLENBQUM7SUFDdkQsTUFBTSxXQUFXLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQW9CLElBQUksQ0FBQztJQUN6RCxNQUFNLElBQUksR0FBRyxpREFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQWMsRUFBRSxFQUFFOztRQUNyRCxNQUFNLFVBQVUsR0FBRyx1QkFBSyxDQUFDLFNBQVMsMENBQUUsb0JBQW9CLDBDQUFFLFVBQVUsbUNBQUksS0FBSztRQUM3RSxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDLE9BQU8sS0FBSyw4Q0FBTyxDQUFDLE1BQU07UUFDcEUsT0FBTyxZQUFZLElBQUksQ0FBQyxVQUFVO0lBQ3BDLENBQUMsQ0FBQztJQUVGLE1BQU0sVUFBVSxHQUFHLENBQUMsUUFBUSxJQUFJLENBQUMsUUFBUTtJQUN6QyxJQUFJLGVBQWU7SUFDbkIsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUNiLGVBQWUsR0FBRyxhQUFhLENBQUMsc0JBQXNCLENBQUM7SUFDekQsQ0FBQztTQUFNLElBQUksUUFBUSxFQUFFLENBQUM7UUFDcEIsZUFBZSxHQUFHLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQztJQUN6RCxDQUFDO1NBQU0sQ0FBQztRQUNOLGVBQWUsR0FBRyxhQUFhLENBQUMsZ0JBQWdCLEVBQUU7WUFDaEQsSUFBSSxFQUFFLFdBQVcsQ0FBQyxRQUFRO2dCQUN4QixDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLGlCQUFpQixFQUFFO2dCQUM3QyxDQUFDLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGlCQUFpQixFQUFFO1NBQzlDLENBQUM7SUFDSixDQUFDO0lBRUQsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQzlCLENBQUMsQ0FBQyxlQUFlLEVBQUU7UUFDbkIsSUFBSSxlQUFlLEtBQUssc0RBQWUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUM5Qyw0REFBYyxDQUFDLHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxjQUFjLEVBQUUsbUJBQW1CLEVBQUUsUUFBUSxFQUFFLHVCQUF1QixFQUFFLENBQUM7WUFDdkksT0FBTTtRQUNSLENBQUM7UUFDRCxrQkFBa0IsQ0FBQyxDQUFDLGVBQWUsQ0FBQztJQUN0QyxDQUFDO0lBRUQsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQy9CLENBQUMsQ0FBQyxlQUFlLEVBQUU7UUFDbkIsbUJBQW1CLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztJQUN4QyxDQUFDO0lBRUQsTUFBTSxvQkFBb0IsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQ2pDLENBQUMsQ0FBQyxlQUFlLEVBQUU7UUFDbkIsSUFBSSxlQUFlLEtBQUssc0RBQWUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUM5Qyw0REFBYyxDQUFDLHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxjQUFjLEVBQUUsMkJBQTJCLEVBQUUsUUFBUSxFQUFFLHNCQUFzQixFQUFFLENBQUM7WUFDekksT0FBTTtRQUNSLENBQUM7UUFDRCxxQkFBcUIsQ0FBQyxDQUFDLGtCQUFrQixDQUFDO0lBQzVDLENBQUM7SUFFRCxNQUFNLGdCQUFnQixHQUFHLEdBQUcsRUFBRTtRQUM1QixrQkFBa0IsQ0FBQyxLQUFLLENBQUM7SUFDM0IsQ0FBQztJQUVELE1BQU0saUJBQWlCLEdBQUcsR0FBRyxFQUFFO1FBQzdCLG1CQUFtQixDQUFDLEtBQUssQ0FBQztJQUM1QixDQUFDO0lBRUQsTUFBTSxvQkFBb0IsR0FBRyxHQUFHLEVBQUU7UUFDaEMscUJBQXFCLENBQUMsS0FBSyxDQUFDO0lBQzlCLENBQUM7SUFFRCxNQUFNLGVBQWUsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFO1FBQ25DLGtCQUFrQixDQUFDLEtBQUssQ0FBQztRQUN6Qix1QkFBdUIsQ0FBQyxRQUFRLENBQUM7SUFDbkMsQ0FBQztJQUVELE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRTtRQUNwQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUM7UUFDMUIsd0JBQXdCLENBQUMsUUFBUSxDQUFDO0lBQ3BDLENBQUM7SUFFRCxNQUFNLGtCQUFrQixHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUU7UUFDdEMscUJBQXFCLENBQUMsS0FBSyxDQUFDO1FBQzVCLHNCQUFzQixDQUFDLFFBQVEsQ0FBQztJQUNsQyxDQUFDO0lBRUQsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ1YsT0FBTyxJQUFJO0lBQ2IsQ0FBQztJQUVELE9BQU8sQ0FDTCx3REFBSyxTQUFTLEVBQUMsNkRBQTZELEVBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxZQUFZLENBQUM7UUFDdEcsd0RBQUssU0FBUyxFQUFDLFFBQVE7WUFDcEIsVUFBVSxJQUFJLENBQ2IsK0NBQUMsNENBQUssQ0FBQyxRQUFRO2dCQUNiLCtDQUFDLGlFQUFhLElBQUMsU0FBUyxFQUFDLFFBQVEsRUFBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLGNBQWMsQ0FBQztvQkFDcEUsd0RBQUssU0FBUyxFQUFDLGFBQWE7d0JBQzFCLCtDQUFDLDJDQUFNLElBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLFFBQUMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFDLGdCQUFnQjs0QkFDbEcsK0NBQUMsMEVBQWEsSUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLEtBQUssRUFBRSxZQUFZLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUksQ0FDakUsQ0FDTCxDQUNRO2dCQUNmLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQ3JDLCtDQUFDLGlFQUFhLElBQUMsU0FBUyxFQUFDLFFBQVEsRUFBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLG9CQUFvQixDQUFDO29CQUMxRSx3REFBSyxTQUFTLEVBQUMsa0JBQWtCO3dCQUMvQiwrQ0FBQywyQ0FBTSxJQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxRQUFDLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBQyxnQkFBZ0I7NEJBQ3BHLCtDQUFDLHVGQUFtQixJQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLFlBQVksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBSSxDQUN4RSxDQUNMLENBQ1EsQ0FDakIsQ0FDYyxDQUNsQjtZQUNBLENBQUMsU0FBUyxJQUFJLENBQ2IsK0NBQUMsaUVBQWEsSUFBQyxTQUFTLEVBQUMsUUFBUSxFQUFDLEtBQUssRUFBRSxlQUFlO2dCQUN0RCx3REFBSyxTQUFTLEVBQUUscURBQVUsQ0FBQyxhQUFhLEVBQUUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLENBQUM7b0JBQy9ELCtDQUFDLDJDQUFNLElBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRSxJQUFJLFFBQUMsT0FBTyxFQUFFLG9CQUFvQixFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFDLGdCQUFnQjt3QkFDeEcsK0NBQUMsc0ZBQWdCLElBQUMsUUFBUSxRQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLFlBQVksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBSSxDQUM5RSxDQUNMLENBQ1EsQ0FDakIsQ0FDRztRQUNOLHdEQUFLLFNBQVMsRUFBQyxzQkFBc0IsR0FBRztRQUN4QztZQUNFLHVEQUFJLFNBQVMsRUFBQyxlQUFlLElBQUUsYUFBYSxDQUFDLGlCQUFpQixDQUFDLENBQU0sQ0FDakU7UUFDTCxVQUFVLElBQUksZUFBZSxJQUFJLENBQ2hDLCtDQUFDLGlGQUFnQixJQUNmLFNBQVMsRUFBRSw2RUFBaUIsRUFBRSxFQUM5QixnQkFBZ0IsRUFBRSxRQUFRLENBQUMsT0FBTyxFQUNsQyxZQUFZLEVBQUUsZUFBZSxFQUM3QixPQUFPLEVBQUUsZ0JBQWdCLEdBQ3pCLENBQ0g7UUFDQSxVQUFVLElBQUksZ0JBQWdCLElBQUksaUJBQWlCLENBQUMsZUFBZSxDQUFDLElBQUksQ0FDdkUsK0NBQUMsaUZBQWdCLElBQ2YsU0FBUyxFQUFFLG1GQUF1QixFQUFFLEVBQ3BDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxPQUFPLEVBQ25DLFlBQVksRUFBRSxnQkFBZ0IsRUFDOUIsT0FBTyxFQUFFLGlCQUFpQixHQUMxQixDQUNIO1FBQ0EsQ0FBQyxTQUFTLElBQUksa0JBQWtCLElBQUksQ0FDbkMsK0NBQUMsaUZBQWdCLElBQ2YsU0FBUyxFQUFFLHFGQUF5QixDQUFDLEtBQUssQ0FBQyxFQUMzQyxnQkFBZ0IsRUFBRSxXQUFXLENBQUMsT0FBTyxFQUNyQyxZQUFZLEVBQUUsa0JBQWtCLEVBQ2hDLE9BQU8sRUFBRSxvQkFBb0IsR0FDN0IsQ0FDSCxDQUNHLENBQ1A7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3pOTSxNQUFNLGlCQUFpQixHQUFHLEVBQUU7QUFFNUIsU0FBUywwQkFBMEIsQ0FDeEMsWUFBd0IsRUFDeEIsT0FBZSxFQUNmLFVBQThDLEVBQzlDLGFBQXFCO0lBRXJCLHNEQUFzRDtJQUN0RCxJQUFJLE1BQU07SUFDVixJQUFJLEtBQUs7SUFDVCxJQUFJLEtBQUssR0FBRyxLQUFLO0lBQ2pCLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDMUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUM7UUFDeEMsSUFBSSxLQUFLLEdBQUcsT0FBTyxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQ1osK0JBQStCO2dCQUMvQixNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLGlCQUFpQixHQUFHLENBQUMsQ0FBQztZQUNuRSxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sdUNBQXVDO2dCQUN2QyxNQUFNLFlBQVksR0FBRyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUMsR0FBRyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1lBQ2xFLENBQUM7WUFDRCxLQUFLLEdBQUcsSUFBSTtZQUNaLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRTtRQUNqQixDQUFDO1FBQ0QsT0FBTyxLQUFLO0lBQ2QsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ1gsNEJBQTRCO1FBQzVCLE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNsRCxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FDZixRQUFRLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEdBQUcsaUJBQWlCLEdBQUcsQ0FBQyxFQUN0RCxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUMzRDtJQUNILENBQUM7SUFDRCxPQUFPO1FBQ0wsS0FBSztRQUNMLE9BQU8sRUFBRSxNQUFNO0tBQ2hCO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDeENELGVBQWU7QUFTRztBQUMyRTtBQUUvQjtBQUlsQjtBQUNrQztBQUNMO0FBQ0g7QUFDZjtBQUV2RCw0REFBNEQ7QUFDNUQsTUFBTSxVQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBRWxCLE1BQU0sbUJBQW9CLFNBQVEsNENBQUssQ0FBQyxhQUFxQztJQUE1Rjs7UUFHRSxnQkFBVyxHQUFHLENBQUMsS0FBaUIsRUFBRSxFQUFFO1lBQ2xDLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE9BQU8sSUFBSSxvREFBUyxDQUFDLEVBQUUsQ0FBQztZQUM1RCxPQUFPLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsMENBQU8sQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNqRSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FDeEI7Z0JBQ0UsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUTtnQkFDN0IsWUFBWSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUU7YUFDdkMsRUFDRCxPQUFPLENBQ1I7UUFDSCxDQUFDO1FBRUQsb0JBQWUsR0FBRyxDQUFDLEtBQWlCLEVBQUUsRUFBRTtZQUN0QyxJQUFJLElBQUksR0FBRyxvREFBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7WUFDdEQsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLDBDQUFPLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDM0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQ3BCO2dCQUNFLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVE7Z0JBQzdCLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFO2FBQ3ZDLEVBQ0QsSUFBSSxDQUNMO1FBQ0gsQ0FBQztRQUVELGlCQUFZLEdBQUcsQ0FBQyxLQUFpQixFQUFFLEVBQUU7WUFDbkMsSUFBSSxJQUFJLEdBQUcsb0RBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDO1lBQ3RELElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSwwQ0FBTyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVELElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUNwQjtnQkFDRSxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRO2dCQUM3QixZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRTthQUN2QyxFQUNELElBQUksQ0FDTDtRQUNILENBQUM7UUFFRCxrQkFBYSxHQUFHLENBQUMsS0FBYSxFQUFFLEVBQUU7WUFDaEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLG9EQUFTLENBQUMsRUFBRSxDQUFDO1lBQzlELElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUN4QjtnQkFDRSxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRO2dCQUM3QixZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRTthQUN2QyxFQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUM5QjtRQUNILENBQUM7UUFFRCxrQkFBYSxHQUFHLENBQUMsS0FBYSxFQUFFLEVBQUU7WUFDaEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLG9EQUFTLENBQUMsRUFBRSxDQUFDO1lBQzlELElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUN4QjtnQkFDRSxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRO2dCQUM3QixZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRTthQUN2QyxFQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUM5QjtRQUNILENBQUM7UUFFRCxxQkFBZ0IsR0FBRyxDQUFDLElBQXlCLEVBQUUsRUFBRTtZQUMvQyxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxPQUFPLElBQUksb0RBQVMsQ0FBQyxFQUFFLENBQUM7WUFDNUQsT0FBTyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLElBQUksS0FBSyw0RUFBbUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1lBQzNGLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUN4QjtnQkFDRSxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRO2dCQUM3QixZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRTthQUN2QyxFQUNELE9BQU8sQ0FDUjtRQUNILENBQUM7SUFnTEgsQ0FBQztJQTlLQyxrQkFBa0IsQ0FBRSxLQUFhO1FBQy9CLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE9BQU8sSUFBSSxvREFBUyxDQUFDLEVBQUUsQ0FBQztRQUM5RCxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FDeEI7WUFDRSxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRO1lBQzdCLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFO1NBQ3ZDLEVBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDLENBQ25DO0lBQ0gsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPLDhDQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0E2Q1Q7SUFDSCxDQUFDO0lBRUQsTUFBTTtRQUNKLE1BQU0sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztRQUN4RSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDaEIsT0FBTyxJQUFJO1FBQ2IsQ0FBQztRQUNELElBQUksVUFBVSxDQUFDLElBQUksS0FBSyxxREFBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ25ELE9BQU8sK0NBQUMsNkRBQWtCLG9CQUFLLElBQUksQ0FBQyxLQUFLLEVBQUk7UUFDL0MsQ0FBQztRQUVELElBQUksQ0FBQyxXQUFXLEdBQUcsNkNBQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLHVFQUF5QixFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUM7UUFDbkYsTUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLElBQUk7UUFDNUIsT0FBTyxDQUNMLHdEQUFLLFNBQVMsRUFBQyxtQkFBbUIsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNwRCxDQUFDLFlBQVksSUFBSSwrQ0FBQyw0Q0FBSyxDQUFDLFFBQVE7Z0JBQy9CLCtDQUFDLCtFQUFjLElBQUMsS0FBSyxFQUFFLEdBQUcsYUFBYSxDQUFDLFVBQVUsQ0FBQyxNQUFNLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRTtvQkFDOUUsd0RBQUssU0FBUyxFQUFDLDBCQUEwQjt3QkFDdkMsd0RBQUssU0FBUyxFQUFDLHVCQUF1Qjs0QkFDcEMsd0RBQUssU0FBUyxFQUFDLFNBQVM7Z0NBQ3RCLHdEQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLFVBQVUsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUNwRixPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQzlDO2dDQUNGLHdEQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLFlBQVksRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUN0RixPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQzlDO2dDQUNGLHdEQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLFdBQVcsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUNyRixPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQzlDO2dDQUNGLHdEQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLGFBQWEsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUN2RixPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQzlDO2dDQUNGLHdEQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLGVBQWUsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUN6RixPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQzlDO2dDQUNGLHdEQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLGNBQWMsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUN4RixPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQzlDO2dDQUNGLHdEQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLGFBQWEsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUN2RixPQUFP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Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTkEsZ0VBQWdFO0FBQ0g7QUFDTztBQUNOO0FBQ0U7QUFDa0I7QUFDSDtBQUNNO0FBQ1Q7QUFDRztBQUNiO0FBQ1c7QUFDYjtBQUNBO0FBQ2M7QUFDSDtBQUNyQjtBQUNGO0FBQ087QUFJZjtBQUNzQjtBQUlEO0FBQ0M7QUFDb0c7QUFDeEQ7QUFDNUM7QUFDbkI7QUFDd0I7QUFDRTtBQUMzQjtBQUNNO0FBQ3dCO0FBQ0Y7QUFDTTtBQUNGO0FBQ0Y7QUF3QjNFO0FBRWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9ob2lzdC1ub24tcmVhY3Qtc3RhdGljcy9kaXN0L2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzLmNqcy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL2ludmFyaWFudC9pbnZhcmlhbnQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9yZWFjdC1pcy9janMvcmVhY3QtaXMuZGV2ZWxvcG1lbnQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9yZWFjdC1pcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vZ3JpZC10ZW1wbGF0ZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL2ludmlzaWJsZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21heGdyaWQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9zZXR0aW5nLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vdGVtcGxhdGUuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi92aXNpYmxlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYnJhbmQvYmxvY2suc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9icmFuZC9zY3JlZW4tZ3JvdXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kYXRhL3Jvdy5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2FsaWduLWxlZnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1zdHJldGNoZWQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9icmluZy1iYWNrLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYnJpbmctZnJvbnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvbWF4LWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL21heC1oZWlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9tYXgtd2lkdGguc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3NlbmQtYmFja3dhcmQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zZW5kLWZvcndhcmQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zbmFwLWJvdHRvbS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3NuYXAtaG9yaXpvbnRhbC1taWRkbGUuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zbmFwLWxlZnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zbmFwLXJpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvc25hcC10b3Auc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zbmFwLXZlcnRpY2FsLW1pZGRsZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3VwLWRvdWJsZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3VwLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2R1cGxpY2F0ZS1wYWdlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2R1cGxpY2F0ZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9lZGl0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Zsb2F0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2xvY2suc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvbW92ZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9wZW5kaW5nLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3BsdXMuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc3BsaXQtaG9yaXpvbnRhbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9zcGxpdC12ZXJ0aWNhbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci91bmZsb2F0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3VubG9jay5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2dpcy9kYXRhLWxheWVyLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2FwcGxpY2F0aW9uL2dyaWQtdGVtcGxhdGUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2FwcGxpY2F0aW9uL2ludmlzaWJsZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvYXBwbGljYXRpb24vbWF4Z3JpZC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9hcHBsaWNhdGlvbi90ZW1wbGF0ZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvYXBwbGljYXRpb24vdmlzaWJsZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvYnJhbmQvYmxvY2sudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2JyYW5kL3NjcmVlbi1ncm91cC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctc3RyZXRjaGVkLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAtZG91YmxlLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvY2xvc2UudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci9lZGl0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvbG9jay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3BsdXMudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci91bmxvY2sudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2FuaW1hdGlvbi1zZXR0aW5nLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtYWN0aW9ucy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtaXRlbS1zZXR0aW5nLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2NvbW1vbi10cmFuc2Zvcm0tc2V0dGluZy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9jb250ZXh0LW1lbnUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvaW50ZXJhY3RpdmUvY2FudmFzLXBhbmUudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9pbnRlcmFjdGl2ZS9kcmFnLWV2ZW50LWhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1jb21tb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1lZmZlY3QtaDUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJvcGFyZWEtZWZmZWN0LWludGVyYWN0anMudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJvcGFyZWEtaG9vay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9pbnRlcmFjdGl2ZS9yZXNpemUtZXZlbnQtaGFuZGxlci50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2ludGVyYWN0aXZlL3JuZC1kZWNvcmF0b3IudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvbGF5b3V0LWVudHJ5LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2xheW91dC1pdGVtLWRuZC1ob29rLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2xheW91dC1pdGVtLWhvb2svdXNlLWFzb25lLXBsYXlpZC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2xheW91dC1pdGVtLWhvb2svdXNlLWxpdmV2aWV3LXBsYXlpZC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2xheW91dC1pdGVtLWhvb2svdXNlLW9uZWJ5b25lLXBsYXlpZC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL2xheW91dC1pdGVtLWhvb2svdXNlLXByZXZpZXctcGxheWlkLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvbGF5b3V0LWl0ZW0tdG9vbGJhci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9sYXlvdXQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9tZW51L2NvbW1vbi1tZW51LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL21lbnUvZmxvYXRpbmctYXJlYS1jaG9vc2VyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL21lbnUvc2NyZWVuLW1lbnUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvbWVudS9zZWN0aW9uLW1lbnUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvcGFnZS1ib2R5LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL3BhZ2UtY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9wYWdlLWZvb3Rlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9wYWdlLWhlYWRlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9wYWdlLXJlbmRlcmVyLWNvbW1vbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL3BhZ2UtcmVuZGVyZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvcmVzaXplLWN1cnNvci11dGlsLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvcmVzaXplLWhhbmRsZXJzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL3NlY3Rpb24tcmVuZGVyZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvc2VsZWN0LXdyYXBwZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvc2hhcGUtbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9zaGFwZS1yZWN0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL3RoZW1lLXRvb2x0aXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvdG9vbGJhci1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL3Rvb2xiYXItZ3JvdXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvdG9vbGJhci1pdGVtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL3Rvb2xiYXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci91dGlsLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvd2lkZ2V0LXBsYWNlaG9sZGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9idWlsZGVyL3dpZGdldC1yZW5kZXJlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29sdW1uLWxheW91dC9idWlsZGVyL2NvbHVtbi1pdGVtLXNldHRpbmcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbHVtbi1sYXlvdXQvYnVpbGRlci9kbmQtaGVscGVyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbHVtbi1sYXlvdXQvYnVpbGRlci9sYXlvdXQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29sdW1uLWxheW91dC9idWlsZGVyL2xheW91dC1zZXJ2aWNlLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbHVtbi1sYXlvdXQvYnVpbGRlci9sYXlvdXQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbHVtbi1sYXlvdXQvY29tbW9uL3N0eWxlLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbHVtbi1sYXlvdXQvY29tbW9uL3V0aWwudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29sdW1uLWxheW91dC9kZWZhdWx0LXNldHRpbmcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29tbW9uL3BhZ2UtdXRpbC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9jb250cm9sbGVyLXBhbmVsL2J1aWxkZXIvZ3JvdXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbnRyb2xsZXItcGFuZWwvYnVpbGRlci9sYXlvdXQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbnRyb2xsZXItcGFuZWwvYnVpbGRlci9wYW5lbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29udHJvbGxlci1wYW5lbC9idWlsZGVyL3VzZS1hbmltYXRpb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbnRyb2xsZXItcGFuZWwvdXRpbC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9kZWZhdWx0LWNvbW1vbi1zZXR0aW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2ZpeGVkLWxheW91dC9idWlsZGVyL2FjdGlvbi1ibG9jay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2J1aWxkZXIvZml4ZWQtaXRlbS1tZW51LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9maXhlZC1sYXlvdXQvYnVpbGRlci9maXhlZC1pdGVtLXNldHRpbmcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2ZpeGVkLWxheW91dC9idWlsZGVyL2l0ZW0tcG9zaXRpb24tc2V0dGluZy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2J1aWxkZXIvbGF5b3V0LWFjdGlvbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9maXhlZC1sYXlvdXQvYnVpbGRlci9sYXlvdXQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2J1aWxkZXIvbGF5b3V0LXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2J1aWxkZXIvbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9maXhlZC1sYXlvdXQvYnVpbGRlci9tb3ZlLWVkZ2UtZ3VpZGUudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2J1aWxkZXIvbW92ZS1ndWlkZS1jb21tb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2J1aWxkZXIvbW92ZS1ndWlkZS50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9maXhlZC1sYXlvdXQvYnVpbGRlci9tb3ZlLXNwYWNlLWd1aWRlLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2ZpeGVkLWxheW91dC9idWlsZGVyL3V0aWwudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2NvbW1vbi91dGlsLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2ZpeGVkLWxheW91dC9kZWZhdWx0LXNldHRpbmcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L2ZpeGVkLWxheW91dC11dGlsLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvYWN0aW9uLWJsb2NrLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9idWlsZGVyL2RuZC1oZWxwZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvYnVpbGRlci9mbG9hdGluZy1pdGVtLXNldHRpbmcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvZmxvYXRpbmctbGF5b3V0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvZmxvdy1jb250ZXh0LW1lbnUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvZmxvdy1pdGVtLXNldHRpbmcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvbGF5b3V0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvbGF5b3V0LXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvYnVpbGRlci9sYXlvdXQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvc2NyZWVuLWNvbnRleHQtbWVudS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvYnVpbGRlci9zY3JlZW4tZ3JvdXAtc2V0dGluZy1wb3BwZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvc2NyZWVuLWdyb3VwLXNldHRpbmcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2J1aWxkZXIvc2NyZWVuLWdyb3VwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9idWlsZGVyL3NjcmVlbi1tZW51LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9idWlsZGVyL3NjcmVlbi1zaWRlLWFjdGlvbi1ibG9jay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvYnVpbGRlci9zY3JlZW4tc2lkZS1wYW5lbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvYnVpbGRlci91dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9jb21tb24vaW5kZXgudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2NvbW1vbi9zY3JlZW4tbWFpbi1wYW5lbC1saXN0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9jb21tb24vc2NyZWVuLW1haW4tcGFuZWwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2NvbW1vbi9zY3JlZW4tc2lkZS1wYW5lbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvY29tbW9uL3R5cGUudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvY29tbW9uL3V0aWwudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvZGVmYXVsdC1zZXR0aW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2xheW91dC1zZXR0aW5nLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9sYXlvdXQtdHJhbnNmb3JtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2xheW91dC11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC91c2UtaW50ZXJzZWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2FjdGlvbi1ibG9jay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZ3JpZC1sYXlvdXQvYnVpbGRlci9kcmFnZ2FibGUtdGFiLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2dyaWQtaXRlbS1tZW51LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2dyaWQtaXRlbS1zZXR0aW5nLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2dyaWQtaXRlbS10b29sYmFyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2dyaWQtaXRlbS11dGlsLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2dyaWQtbGF5b3V0L2J1aWxkZXIvZ3JpZC1pdGVtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2xheW91dC1pdGVtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2xheW91dC1zZXJ2aWNlLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2dyaWQtbGF5b3V0L2J1aWxkZXIvbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL3R5cGVzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2dyaWQtbGF5b3V0L2J1aWxkZXIvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZ3JpZC1sYXlvdXQvY29tbW9uL3NwbGl0dGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9jb21tb24vdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZ3JpZC1sYXlvdXQvbGF5b3V0LXNldHRpbmcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2dyaWQtbGF5b3V0L2xheW91dC10cmFuc2Zvcm0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9idWlsZGVyL2NvbHVtbi1oaW50LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9yb3ctbGF5b3V0L2J1aWxkZXIvbGF5b3V0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3Jvdy1sYXlvdXQvYnVpbGRlci9sYXlvdXQtc2VydmljZS50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9yb3ctbGF5b3V0L2J1aWxkZXIvbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9yb3ctbGF5b3V0L2J1aWxkZXIvcm93LWl0ZW0tc2V0dGluZy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9idWlsZGVyL3Jvdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9idWlsZGVyL3V0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3Jvdy1sYXlvdXQvY29tbW9uL3V0aWwudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9kZWZhdWx0LXNldHRpbmcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9sYXlvdXQtdHJhbnNmb3JtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3Jvdy1sYXlvdXQvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC91dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL3NlY3Rpb24tYXV0by1wbGF5LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL3NlY3Rpb24tY29udGVudC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcnVudGltZS9zZWN0aW9uLW5hdi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcnVudGltZS9zZWN0aW9uLXJlbmRlcmVyLWJhc2UudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3J1bnRpbWUvdmlldy1jb250ZW50LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9zZWFyY2gvY29udGVudHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvc2VhcmNoL2luZGV4LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3NlYXJjaC9wZW5kaW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3NlYXJjaC9zZWN0aW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3RyYW5zbGF0aW9ucy9kZWZhdWx0LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3R5cGVzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3VzZS12aWV3cG9ydC1pbnRlcnNlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtdWkvYWR2YW5jZWQvbGliL2Fzc2V0cy9pY29uX2FuaW1hdGlvbl9pbl9ub25lLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS11aS9hZHZhbmNlZC9saWIvYXNzZXRzL2ljb25fYW5pbWF0aW9uX3RyYW5zaXRpb25fZmFkZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtdWkvYWR2YW5jZWQvbGliL2Fzc2V0cy9pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX3B1c2guc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmUvZG5kXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWZvci1idWlsZGVyXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWZvci1idWlsZGVyL3RlbXBsYXRlc1wiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXRoZW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50c1wiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aS9hZHZhbmNlZC9zdHlsZS1zZXR0aW5nLWNvbXBvbmVudHNcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWkvYmFzaWMvY29sb3ItcGlja2VyXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9sYXlvdXQtYnVpbGRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmVhY3RJcyA9IHJlcXVpcmUoJ3JlYWN0LWlzJyk7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIFlhaG9vISBJbmMuXG4gKiBDb3B5cmlnaHRzIGxpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIExpY2Vuc2UuIFNlZSB0aGUgYWNjb21wYW55aW5nIExJQ0VOU0UgZmlsZSBmb3IgdGVybXMuXG4gKi9cbnZhciBSRUFDVF9TVEFUSUNTID0ge1xuICBjaGlsZENvbnRleHRUeXBlczogdHJ1ZSxcbiAgY29udGV4dFR5cGU6IHRydWUsXG4gIGNvbnRleHRUeXBlczogdHJ1ZSxcbiAgZGVmYXVsdFByb3BzOiB0cnVlLFxuICBkaXNwbGF5TmFtZTogdHJ1ZSxcbiAgZ2V0RGVmYXVsdFByb3BzOiB0cnVlLFxuICBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I6IHRydWUsXG4gIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczogdHJ1ZSxcbiAgbWl4aW5zOiB0cnVlLFxuICBwcm9wVHlwZXM6IHRydWUsXG4gIHR5cGU6IHRydWVcbn07XG52YXIgS05PV05fU1RBVElDUyA9IHtcbiAgbmFtZTogdHJ1ZSxcbiAgbGVuZ3RoOiB0cnVlLFxuICBwcm90b3R5cGU6IHRydWUsXG4gIGNhbGxlcjogdHJ1ZSxcbiAgY2FsbGVlOiB0cnVlLFxuICBhcmd1bWVudHM6IHRydWUsXG4gIGFyaXR5OiB0cnVlXG59O1xudmFyIEZPUldBUkRfUkVGX1NUQVRJQ1MgPSB7XG4gICckJHR5cGVvZic6IHRydWUsXG4gIHJlbmRlcjogdHJ1ZSxcbiAgZGVmYXVsdFByb3BzOiB0cnVlLFxuICBkaXNwbGF5TmFtZTogdHJ1ZSxcbiAgcHJvcFR5cGVzOiB0cnVlXG59O1xudmFyIE1FTU9fU1RBVElDUyA9IHtcbiAgJyQkdHlwZW9mJzogdHJ1ZSxcbiAgY29tcGFyZTogdHJ1ZSxcbiAgZGVmYXVsdFByb3BzOiB0cnVlLFxuICBkaXNwbGF5TmFtZTogdHJ1ZSxcbiAgcHJvcFR5cGVzOiB0cnVlLFxuICB0eXBlOiB0cnVlXG59O1xudmFyIFRZUEVfU1RBVElDUyA9IHt9O1xuVFlQRV9TVEFUSUNTW3JlYWN0SXMuRm9yd2FyZFJlZl0gPSBGT1JXQVJEX1JFRl9TVEFUSUNTO1xuVFlQRV9TVEFUSUNTW3JlYWN0SXMuTWVtb10gPSBNRU1PX1NUQVRJQ1M7XG5cbmZ1bmN0aW9uIGdldFN0YXRpY3MoY29tcG9uZW50KSB7XG4gIC8vIFJlYWN0IHYxNi4xMSBhbmQgYmVsb3dcbiAgaWYgKHJlYWN0SXMuaXNNZW1vKGNvbXBvbmVudCkpIHtcbiAgICByZXR1cm4gTUVNT19TVEFUSUNTO1xuICB9IC8vIFJlYWN0IHYxNi4xMiBhbmQgYWJvdmVcblxuXG4gIHJldHVybiBUWVBFX1NUQVRJQ1NbY29tcG9uZW50WyckJHR5cGVvZiddXSB8fCBSRUFDVF9TVEFUSUNTO1xufVxuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBvYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xuZnVuY3Rpb24gaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBzb3VyY2VDb21wb25lbnQsIGJsYWNrbGlzdCkge1xuICBpZiAodHlwZW9mIHNvdXJjZUNvbXBvbmVudCAhPT0gJ3N0cmluZycpIHtcbiAgICAvLyBkb24ndCBob2lzdCBvdmVyIHN0cmluZyAoaHRtbCkgY29tcG9uZW50c1xuICAgIGlmIChvYmplY3RQcm90b3R5cGUpIHtcbiAgICAgIHZhciBpbmhlcml0ZWRDb21wb25lbnQgPSBnZXRQcm90b3R5cGVPZihzb3VyY2VDb21wb25lbnQpO1xuXG4gICAgICBpZiAoaW5oZXJpdGVkQ29tcG9uZW50ICYmIGluaGVyaXRlZENvbXBvbmVudCAhPT0gb2JqZWN0UHJvdG90eXBlKSB7XG4gICAgICAgIGhvaXN0Tm9uUmVhY3RTdGF0aWNzKHRhcmdldENvbXBvbmVudCwgaW5oZXJpdGVkQ29tcG9uZW50LCBibGFja2xpc3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBrZXlzID0gZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2VDb21wb25lbnQpO1xuXG4gICAgaWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAga2V5cyA9IGtleXMuY29uY2F0KGdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2VDb21wb25lbnQpKTtcbiAgICB9XG5cbiAgICB2YXIgdGFyZ2V0U3RhdGljcyA9IGdldFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50KTtcbiAgICB2YXIgc291cmNlU3RhdGljcyA9IGdldFN0YXRpY3Moc291cmNlQ29tcG9uZW50KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICAgIGlmICghS05PV05fU1RBVElDU1trZXldICYmICEoYmxhY2tsaXN0ICYmIGJsYWNrbGlzdFtrZXldKSAmJiAhKHNvdXJjZVN0YXRpY3MgJiYgc291cmNlU3RhdGljc1trZXldKSAmJiAhKHRhcmdldFN0YXRpY3MgJiYgdGFyZ2V0U3RhdGljc1trZXldKSkge1xuICAgICAgICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2VDb21wb25lbnQsIGtleSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBBdm9pZCBmYWlsdXJlcyBmcm9tIHJlYWQtb25seSBwcm9wZXJ0aWVzXG4gICAgICAgICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0Q29tcG9uZW50LCBrZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaG9pc3ROb25SZWFjdFN0YXRpY3M7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxudmFyIE5PREVfRU5WID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG5cbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAoTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107IH0pXG4gICAgICApO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuIiwiLyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xMy4xXG4gKiByZWFjdC1pcy5kZXZlbG9wbWVudC5qc1xuICpcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQtbGlrZSB0eXBlcy4gSWYgdGhlcmUgaXMgbm8gbmF0aXZlIFN5bWJvbFxuLy8gbm9yIHBvbHlmaWxsLCB0aGVuIGEgcGxhaW4gbnVtYmVyIGlzIHVzZWQgZm9yIHBlcmZvcm1hbmNlLlxudmFyIGhhc1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmZvcjtcbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykgOiAweGVhYzc7XG52YXIgUkVBQ1RfUE9SVEFMX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5wb3J0YWwnKSA6IDB4ZWFjYTtcbnZhciBSRUFDVF9GUkFHTUVOVF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3QuZnJhZ21lbnQnKSA6IDB4ZWFjYjtcbnZhciBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3Quc3RyaWN0X21vZGUnKSA6IDB4ZWFjYztcbnZhciBSRUFDVF9QUk9GSUxFUl9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3QucHJvZmlsZXInKSA6IDB4ZWFkMjtcbnZhciBSRUFDVF9QUk9WSURFUl9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3QucHJvdmlkZXInKSA6IDB4ZWFjZDtcbnZhciBSRUFDVF9DT05URVhUX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5jb250ZXh0JykgOiAweGVhY2U7IC8vIFRPRE86IFdlIGRvbid0IHVzZSBBc3luY01vZGUgb3IgQ29uY3VycmVudE1vZGUgYW55bW9yZS4gVGhleSB3ZXJlIHRlbXBvcmFyeVxuLy8gKHVuc3RhYmxlKSBBUElzIHRoYXQgaGF2ZSBiZWVuIHJlbW92ZWQuIENhbiB3ZSByZW1vdmUgdGhlIHN5bWJvbHM/XG5cbnZhciBSRUFDVF9BU1lOQ19NT0RFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5hc3luY19tb2RlJykgOiAweGVhY2Y7XG52YXIgUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5jb25jdXJyZW50X21vZGUnKSA6IDB4ZWFjZjtcbnZhciBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3QuZm9yd2FyZF9yZWYnKSA6IDB4ZWFkMDtcbnZhciBSRUFDVF9TVVNQRU5TRV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3Quc3VzcGVuc2UnKSA6IDB4ZWFkMTtcbnZhciBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5zdXNwZW5zZV9saXN0JykgOiAweGVhZDg7XG52YXIgUkVBQ1RfTUVNT19UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3QubWVtbycpIDogMHhlYWQzO1xudmFyIFJFQUNUX0xBWllfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbC5mb3IoJ3JlYWN0LmxhenknKSA6IDB4ZWFkNDtcbnZhciBSRUFDVF9CTE9DS19UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3QuYmxvY2snKSA6IDB4ZWFkOTtcbnZhciBSRUFDVF9GVU5EQU1FTlRBTF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sLmZvcigncmVhY3QuZnVuZGFtZW50YWwnKSA6IDB4ZWFkNTtcbnZhciBSRUFDVF9SRVNQT05ERVJfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbC5mb3IoJ3JlYWN0LnJlc3BvbmRlcicpIDogMHhlYWQ2O1xudmFyIFJFQUNUX1NDT1BFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5zY29wZScpIDogMHhlYWQ3O1xuXG5mdW5jdGlvbiBpc1ZhbGlkRWxlbWVudFR5cGUodHlwZSkge1xuICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IC8vIE5vdGU6IGl0cyB0eXBlb2YgbWlnaHQgYmUgb3RoZXIgdGhhbiAnc3ltYm9sJyBvciAnbnVtYmVyJyBpZiBpdCdzIGEgcG9seWZpbGwuXG4gIHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfUFJPRklMRVJfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NVU1BFTlNFX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFIHx8IHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsICYmICh0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9MQVpZX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTUVNT19UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX1BST1ZJREVSX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRlVOREFNRU5UQUxfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9SRVNQT05ERVJfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9TQ09QRV9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0JMT0NLX1RZUEUpO1xufVxuXG5mdW5jdGlvbiB0eXBlT2Yob2JqZWN0KSB7XG4gIGlmICh0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QgIT09IG51bGwpIHtcbiAgICB2YXIgJCR0eXBlb2YgPSBvYmplY3QuJCR0eXBlb2Y7XG5cbiAgICBzd2l0Y2ggKCQkdHlwZW9mKSB7XG4gICAgICBjYXNlIFJFQUNUX0VMRU1FTlRfVFlQRTpcbiAgICAgICAgdmFyIHR5cGUgPSBvYmplY3QudHlwZTtcblxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlIFJFQUNUX0FTWU5DX01PREVfVFlQRTpcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFOlxuICAgICAgICAgIGNhc2UgUkVBQ1RfRlJBR01FTlRfVFlQRTpcbiAgICAgICAgICBjYXNlIFJFQUNUX1BST0ZJTEVSX1RZUEU6XG4gICAgICAgICAgY2FzZSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOlxuICAgICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciAkJHR5cGVvZlR5cGUgPSB0eXBlICYmIHR5cGUuJCR0eXBlb2Y7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoJCR0eXBlb2ZUeXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOlxuICAgICAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOlxuICAgICAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRTpcbiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9QUk9WSURFUl9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiAkJHR5cGVvZlR5cGU7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJCR0eXBlb2Y7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgICByZXR1cm4gJCR0eXBlb2Y7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn0gLy8gQXN5bmNNb2RlIGlzIGRlcHJlY2F0ZWQgYWxvbmcgd2l0aCBpc0FzeW5jTW9kZVxuXG52YXIgQXN5bmNNb2RlID0gUkVBQ1RfQVNZTkNfTU9ERV9UWVBFO1xudmFyIENvbmN1cnJlbnRNb2RlID0gUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEU7XG52YXIgQ29udGV4dENvbnN1bWVyID0gUkVBQ1RfQ09OVEVYVF9UWVBFO1xudmFyIENvbnRleHRQcm92aWRlciA9IFJFQUNUX1BST1ZJREVSX1RZUEU7XG52YXIgRWxlbWVudCA9IFJFQUNUX0VMRU1FTlRfVFlQRTtcbnZhciBGb3J3YXJkUmVmID0gUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTtcbnZhciBGcmFnbWVudCA9IFJFQUNUX0ZSQUdNRU5UX1RZUEU7XG52YXIgTGF6eSA9IFJFQUNUX0xBWllfVFlQRTtcbnZhciBNZW1vID0gUkVBQ1RfTUVNT19UWVBFO1xudmFyIFBvcnRhbCA9IFJFQUNUX1BPUlRBTF9UWVBFO1xudmFyIFByb2ZpbGVyID0gUkVBQ1RfUFJPRklMRVJfVFlQRTtcbnZhciBTdHJpY3RNb2RlID0gUkVBQ1RfU1RSSUNUX01PREVfVFlQRTtcbnZhciBTdXNwZW5zZSA9IFJFQUNUX1NVU1BFTlNFX1RZUEU7XG52YXIgaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGUgPSBmYWxzZTsgLy8gQXN5bmNNb2RlIHNob3VsZCBiZSBkZXByZWNhdGVkXG5cbmZ1bmN0aW9uIGlzQXN5bmNNb2RlKG9iamVjdCkge1xuICB7XG4gICAgaWYgKCFoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0FzeW5jTW9kZSkge1xuICAgICAgaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGUgPSB0cnVlOyAvLyBVc2luZyBjb25zb2xlWyd3YXJuJ10gdG8gZXZhZGUgQmFiZWwgYW5kIEVTTGludFxuXG4gICAgICBjb25zb2xlWyd3YXJuJ10oJ1RoZSBSZWFjdElzLmlzQXN5bmNNb2RlKCkgYWxpYXMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgJyArICdhbmQgd2lsbCBiZSByZW1vdmVkIGluIFJlYWN0IDE3Ky4gVXBkYXRlIHlvdXIgY29kZSB0byB1c2UgJyArICdSZWFjdElzLmlzQ29uY3VycmVudE1vZGUoKSBpbnN0ZWFkLiBJdCBoYXMgdGhlIGV4YWN0IHNhbWUgQVBJLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpc0NvbmN1cnJlbnRNb2RlKG9iamVjdCkgfHwgdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0FTWU5DX01PREVfVFlQRTtcbn1cbmZ1bmN0aW9uIGlzQ29uY3VycmVudE1vZGUob2JqZWN0KSB7XG4gIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEU7XG59XG5mdW5jdGlvbiBpc0NvbnRleHRDb25zdW1lcihvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9DT05URVhUX1RZUEU7XG59XG5mdW5jdGlvbiBpc0NvbnRleHRQcm92aWRlcihvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9QUk9WSURFUl9UWVBFO1xufVxuZnVuY3Rpb24gaXNFbGVtZW50KG9iamVjdCkge1xuICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFO1xufVxuZnVuY3Rpb24gaXNGb3J3YXJkUmVmKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU7XG59XG5mdW5jdGlvbiBpc0ZyYWdtZW50KG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEU7XG59XG5mdW5jdGlvbiBpc0xhenkob2JqZWN0KSB7XG4gIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfTEFaWV9UWVBFO1xufVxuZnVuY3Rpb24gaXNNZW1vKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX01FTU9fVFlQRTtcbn1cbmZ1bmN0aW9uIGlzUG9ydGFsKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1BPUlRBTF9UWVBFO1xufVxuZnVuY3Rpb24gaXNQcm9maWxlcihvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9QUk9GSUxFUl9UWVBFO1xufVxuZnVuY3Rpb24gaXNTdHJpY3RNb2RlKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1NUUklDVF9NT0RFX1RZUEU7XG59XG5mdW5jdGlvbiBpc1N1c3BlbnNlKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1NVU1BFTlNFX1RZUEU7XG59XG5cbmV4cG9ydHMuQXN5bmNNb2RlID0gQXN5bmNNb2RlO1xuZXhwb3J0cy5Db25jdXJyZW50TW9kZSA9IENvbmN1cnJlbnRNb2RlO1xuZXhwb3J0cy5Db250ZXh0Q29uc3VtZXIgPSBDb250ZXh0Q29uc3VtZXI7XG5leHBvcnRzLkNvbnRleHRQcm92aWRlciA9IENvbnRleHRQcm92aWRlcjtcbmV4cG9ydHMuRWxlbWVudCA9IEVsZW1lbnQ7XG5leHBvcnRzLkZvcndhcmRSZWYgPSBGb3J3YXJkUmVmO1xuZXhwb3J0cy5GcmFnbWVudCA9IEZyYWdtZW50O1xuZXhwb3J0cy5MYXp5ID0gTGF6eTtcbmV4cG9ydHMuTWVtbyA9IE1lbW87XG5leHBvcnRzLlBvcnRhbCA9IFBvcnRhbDtcbmV4cG9ydHMuUHJvZmlsZXIgPSBQcm9maWxlcjtcbmV4cG9ydHMuU3RyaWN0TW9kZSA9IFN0cmljdE1vZGU7XG5leHBvcnRzLlN1c3BlbnNlID0gU3VzcGVuc2U7XG5leHBvcnRzLmlzQXN5bmNNb2RlID0gaXNBc3luY01vZGU7XG5leHBvcnRzLmlzQ29uY3VycmVudE1vZGUgPSBpc0NvbmN1cnJlbnRNb2RlO1xuZXhwb3J0cy5pc0NvbnRleHRDb25zdW1lciA9IGlzQ29udGV4dENvbnN1bWVyO1xuZXhwb3J0cy5pc0NvbnRleHRQcm92aWRlciA9IGlzQ29udGV4dFByb3ZpZGVyO1xuZXhwb3J0cy5pc0VsZW1lbnQgPSBpc0VsZW1lbnQ7XG5leHBvcnRzLmlzRm9yd2FyZFJlZiA9IGlzRm9yd2FyZFJlZjtcbmV4cG9ydHMuaXNGcmFnbWVudCA9IGlzRnJhZ21lbnQ7XG5leHBvcnRzLmlzTGF6eSA9IGlzTGF6eTtcbmV4cG9ydHMuaXNNZW1vID0gaXNNZW1vO1xuZXhwb3J0cy5pc1BvcnRhbCA9IGlzUG9ydGFsO1xuZXhwb3J0cy5pc1Byb2ZpbGVyID0gaXNQcm9maWxlcjtcbmV4cG9ydHMuaXNTdHJpY3RNb2RlID0gaXNTdHJpY3RNb2RlO1xuZXhwb3J0cy5pc1N1c3BlbnNlID0gaXNTdXNwZW5zZTtcbmV4cG9ydHMuaXNWYWxpZEVsZW1lbnRUeXBlID0gaXNWYWxpZEVsZW1lbnRUeXBlO1xuZXhwb3J0cy50eXBlT2YgPSB0eXBlT2Y7XG4gIH0pKCk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtaXMucHJvZHVjdGlvbi5taW4uanMnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtaXMuZGV2ZWxvcG1lbnQuanMnKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE4IDE4XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xLjUgMS41aDV2NWgtNXpNLjI1IDcuNzVWLjI1aDcuNXY3LjV6TTEuNSAxMS41aDV2NWgtNXpNLjI1IDE3Ljc1di03LjVoNy41djcuNXpNMTYuNSAxLjVoLTV2NWg1ek0xMC4yNS4yNXY3LjVoNy41Vi4yNXptMy4xMjUgMTcuNXYtMy4xMjVIMTAuMjV2LTEuMjVoMy4xMjVWMTAuMjVoMS4yNXYzLjEyNWgzLjEyNXYxLjI1aC0zLjEyNXYzLjEyNXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTMuMTU0IDMuMTU0YS41MjcuNTI3IDAgMCAxIC43NDYgMGwxLjMxNyAxLjMxN0E4LjYxOCA4LjYxOCAwIDAgMSA4IDRjMi42NjcgMCA1LjY2NyAxLjMzMyA3IDQtLjY5NiAxLjM5My0xLjg0NyAyLjQyMi0zLjE2OCAzLjA4N2wxLjAxNCAxLjAxM2EuNTI3LjUyNyAwIDEgMS0uNzQ2Ljc0NmwtMS4zMTctMS4zMTdBOC42MTcgOC42MTcgMCAwIDEgOCAxMmMtMi42NjcgMC01LjY2Ny0xLjMzMy03LTQgLjY5Ni0xLjM5MyAxLjg0Ny0yLjQyMiAzLjE2OC0zLjA4N0wzLjE1NCAzLjlhLjUyNy41MjcgMCAwIDEgMC0uNzQ2bTEuNjk4IDIuNDQzQzMuNzI2IDYuMDg3IDIuNzgyIDYuODgyIDIgOGMxLjQyMiAyLjAzMyAzLjM4MiAzIDYgM2E4LjY2IDguNjYgMCAwIDAgMi4wMy0uMjI1bC0uNjc1LS42NzRBMi41IDIuNSAwIDAgMSA1LjkgNi42NDR6bTYuMjk2IDQuODA1QzEyLjI3NSA5LjkxMyAxMy4yMTggOS4xMTkgMTQgOGMtMS40MjItMi4wMzMtMy4zODItMy02LTMtLjcyNiAwLTEuNDAyLjA3NC0yLjAzLjIyNWwuNjc1LjY3NGEyLjUgMi41IDAgMCAxIDMuNDU3IDMuNDU2ek02LjUgOGMwLS4yMjEuMDQ4LS40MzEuMTM0LS42MmwxLjk4NyAxLjk4NkExLjUgMS41IDAgMCAxIDYuNSA4bS44OC0xLjM2NiAxLjk4NiAxLjk4N2ExLjUgMS41IDAgMCAwLTEuOTg3LTEuOTg3XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDEyIDEyXFxcIj48cGF0aCBmaWxsPVxcXCIjZmZmXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMiAwSDd2MWg0djRoMVYxek0wIDEyaDV2LTFIMVY3SDB2NHpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk05LjQzOC45OTRjLjIxMyAwIC4zOTcuMTQ2LjQ0LjM1LjE1MS43MjIuMjU3IDEuMzQuMzE2IDEuODUyLjM3NC4xNi43MjUuMzYyIDEuMDQ4LjU5OWwxLjcyOC0uNjc2YS40NTUuNDU1IDAgMCAxIC41NTYuMTg4bDEuNDIgMi4zOTRhLjQzLjQzIDAgMCAxLS4wOTEuNTQ3IDIxLjk4IDIxLjk4IDAgMCAxLTEuNDkgMS4xOTQgNS4xNyA1LjE3IDAgMCAxLS4wMDcgMS4xODNsMS40NjQgMS4xMTlhLjQzLjQzIDAgMCAxIC4xMTEuNTYzbC0xLjQyIDIuMzk0YS40NTQuNDU0IDAgMCAxLS41My4xOTcgMjIuNDQ1IDIyLjQ0NSAwIDAgMS0xLjgwNy0uNjZjLS4zMjUuMjMzLS42NzkuNDMtMS4wNTUuNTg2bC0uMjYzIDEuNzk0YS40NDYuNDQ2IDAgMCAxLS40NDUuMzc2SDYuNTc0YS40NDYuNDQ2IDAgMCAxLS40NC0uMzUgMjEuMDE5IDIxLjAxOSAwIDAgMS0uMzE3LTEuODUzIDUuMzQgNS4zNCAwIDAgMS0xLjA0Ny0uNTk4bC0xLjcyOC42NzVhLjQ1NS40NTUgMCAwIDEtLjU1Ni0uMTg3bC0xLjQyLTIuMzk1YS40My40MyAwIDAgMSAuMDkxLS41NDZjLjU2Ny0uNDkgMS4wNjMtLjg4OCAxLjQ5LTEuMTk0YTUuMTY3IDUuMTY3IDAgMCAxIC4wMDgtMS4xODNMMS4xOSA2LjI0M2EuNDMuNDMgMCAwIDEtLjExMi0uNTYybDEuNDItMi4zOTVhLjQ1NS40NTUgMCAwIDEgLjUzMS0uMTk2Yy43MTkuMjMzIDEuMzIxLjQ1MyAxLjgwNy42Ni4zMjQtLjIzMy42NzktLjQzIDEuMDU2LS41ODdsLjI2Mi0xLjc5NEEuNDQ2LjQ0NiAwIDAgMSA2LjYuOTk0em0tLjM2NSAxSDYuOTg1bC0uMjggMS44NjYtLjQ2Ny4xOWMtLjIzNS4wOTUtLjQ2LjIxLS42NzIuMzRsLS4yMDcuMTM2LS40Mi4yOTMtLjQ3Ni0uMTk3Yy0uMzI4LS4xMzctLjcxOC0uMjgxLTEuMTY5LS40MzNsLS4yMjEtLjA3NC0xLjA0NSAxLjcxOUwzLjU5IDYuOTk5bC0uMDYuNDc5YTQuMTI3IDQuMTI3IDAgMCAwLS4wMjEuODE2bC4wMTQuMTQ0LjA1OC40OTItLjQxOS4yOTRjLS4yODguMjAzLS42MTUuNDUxLS45NzkuNzQ2bC0uMTc3LjE0NSAxLjA0MyAxLjcyIDEuODQ1LS43MDMuNDA2LjI5Yy4yMDQuMTQ2LjQyLjI3NC42NDUuMzg0bC4yMjguMTAzLjQ3NC4xOTkuMDU5LjQ5Yy4wNC4zMzguMTAzLjczMS4xOSAxLjE3N2wuMDQzLjIxOWgyLjA4OGwuMjgyLTEuODY3LjQ2Ni0uMTljLjIzNi0uMDk1LjQ2LS4yMS42NzItLjM0bC4yMDctLjEzNi40MTktLjI5My40NzYuMTk4Yy4zMy4xMzYuNzIuMjggMS4xNy40MzNsLjIyLjA3MiAxLjA0NC0xLjcxOC0xLjU2LTEuMTY1LjA2LS40NzlhNC4xMzEgNC4xMzEgMCAwIDAgLjAyLS44MTVsLS4wMTMtLjE0NC0uMDYtLjQ5Mi40Mi0uMjk1YTE4LjEgMTguMSAwIDAgMCAuOTgtLjc0NmwuMTc2LS4xNDYtMS4wNDMtMS43Mi0xLjg0NC43MDUtLjQwNi0uMjlhNC40OTYgNC40OTYgMCAwIDAtLjY0Ni0uMzg1bC0uMjI4LS4xMDMtLjQ3NC0uMTk5LS4wNTgtLjQ5Yy0uMDMyLS4yNy0uMDgtLjU3Ni0uMTQtLjkxNnptLTEuMDY3IDNhMyAzIDAgMSAxIDAgNiAzIDMgMCAwIDEgMC02bTAgMWEyIDIgMCAxIDAgMCA0IDIgMiAwIDAgMCAwLTRcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTE0IDJIMnYyaDEyek0yIDFIMXY0aDE0VjFoLTF6bTIgN0gydjZoMnpNMiA3SDF2OGg0VjdINHptNiAxaDZ2Nkg4ek03IDdoOHY4SDdWOHpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTJjLTIuNjY3IDAtNS42NjctMS4zMzMtNy00IDEuMzMzLTIuNjY3IDQuMzMzLTQgNy00czUuNjY3IDEuMzMzIDcgNGMtMS4zMzMgMi42NjctNC4zMzMgNC03IDRtMC03Yy0yLjYxOCAwLTQuNTc4Ljk2Ny02IDMgMS40MjIgMi4wMzMgMy4zODIgMyA2IDNzNC41NzgtLjk2NyA2LTNjLTEuNDIyLTIuMDMzLTMuMzgyLTMtNi0zbTAgNS41YTIuNSAyLjUgMCAxIDEgMC01IDIuNSAyLjUgMCAwIDEgMCA1bTAtMWExLjUgMS41IDAgMSAwIDAtMyAxLjUgMS41IDAgMCAwIDAgM1xcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNiA1SDJ2Nmg0ek0xIDR2OGg2VjR6TTE0IDVoLTR2Nmg0ek05IDR2OGg2VjR6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0yIDJoMTJ2NEgyek0xIDdWMWgxNHY2em0xIDNoMTJ2NEgyem0tMSA1VjloMTR2NnpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgMnYxMmgzVjJ6bTQgMHYxMmg0VjJ6bTggMTJoLTNWMmgzek0xIDE0YTEgMSAwIDAgMCAxIDFoMTJhMSAxIDAgMCAwIDEtMVYyYTEgMSAwIDAgMC0xLTFIMmExIDEgMCAwIDAtMSAxelxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMSAxLjVhLjUuNSAwIDAgMSAxIDB2MTNhLjUuNSAwIDAgMS0xIDB6TTE0IDlINGExIDEgMCAwIDAtMSAxdjJhMSAxIDAgMCAwIDEgMWgxMGExIDEgMCAwIDAgMS0xdi0yYTEgMSAwIDAgMC0xLTFNNCAxMnYtMmgxMHYyem0wLTloNmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMUg0YTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xbTAgMXYyaDZWNHpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwibTEgNy41IDMtMlY3aDJ2MUg0djEuNXptMTQgMC0zIDJWOGgtMlY3aDJWNS41ek03IDdoMnYxSDd6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xNC41IDE1YS41LjUgMCAwIDAgMC0xSDcuNDZsMi4zNDgtMi4xMzhhLjUwOC41MDggMCAxIDAtLjY4NC0uNzUyTDggMTIuMTMzVjJoNi41YS41LjUgMCAwIDAgMC0xSC41YS41LjUgMCAwIDAgMCAxSDd2MTAuMjA3bC0xLjEyNC0xLjAyNGEuNTA4LjUwOCAwIDEgMC0uNjg0Ljc1Mkw3LjQ2IDE0SC41YS41LjUgMCAwIDAgMCAxek0xNCA2LjVhLjUuNSAwIDAgMS0uNS41SDEwVjZoMy41YS41LjUgMCAwIDEgLjUuNW0tMTMgMGEuNS41IDAgMCAwIC41LjVINVY2SDEuNWEuNS41IDAgMCAwLS41LjVcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTS41IDFhLjUuNSAwIDAgMCAwIDFoNy4wNEw1LjE5MiA0LjEzOGEuNTA4LjUwOCAwIDEgMCAuNjg0Ljc1Mkw3IDMuODY3VjE0SC41YS41LjUgMCAwIDAgMCAxaDE0YS41LjUgMCAwIDAgMC0xSDhWMy43OTNsMS4xMjQgMS4wMjRhLjUwOC41MDggMCAwIDAgLjY4NC0uNzUyTDcuNTQgMmg2Ljk2YS41LjUgMCAwIDAgMC0xek0xIDkuNWEuNS41IDAgMCAxIC41LS41SDV2MUgxLjVhLjUuNSAwIDAgMS0uNS0uNW0xMyAwYS41LjUgMCAwIDAtLjUtLjVIMTB2MWgzLjVhLjUuNSAwIDAgMCAuNS0uNVxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTEuMzQ3IDIuMTQ2YS40ODUuNDg1IDAgMCAxIDAgLjcwOEw1Ljc2IDhsNS41ODcgNS4xNDZhLjQ4Ni40ODYgMCAwIDEgMCAuNzA4LjUzOC41MzggMCAwIDEtLjczOCAwbC01Ljk1Ni01LjVhLjQ4NS40ODUgMCAwIDEgMC0uNzA4bDUuOTU2LTUuNWEuNTM4LjUzOCAwIDAgMSAuNzM4IDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgMi43MDd2MS40NWEuNS41IDAgMCAxLTEgMFYxaDMuMDVhLjUuNSAwIDEgMSAwIDFIMi43MDdMOCA3LjI5IDEzLjI5MyAySDExLjk1YS41LjUgMCAxIDEgMC0xSDE1djMuMTU2YS41LjUgMCAwIDEtMSAwdi0xLjQ1TDguNzA3IDcuOTk5bDUuMjkgNS4yODl2LTEuNTVhLjUuNSAwIDEgMSAxIDBWMTVIMTEuODRhLjUuNSAwIDEgMSAwLTFoMS40NTZMOCA4LjcwNSAyLjcwNCAxNGgxLjQ1M2EuNS41IDAgMSAxIDAgMUgxdi0zLjI2M2EuNS41IDAgMCAxIDEgMHYxLjU1M2w1LjI5My01LjI5MnpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTcuNTQgMUgxNHYxM0g3LjQ2bDIuMzQ4LTIuMTM4YS41MDguNTA4IDAgMSAwLS42ODQtLjc1Mkw4IDEyLjEzNFY5SDd2My4yMDZsLTEuMTI0LTEuMDIyYS41MDguNTA4IDAgMSAwLS42ODUuNzUxTDcuNDYgMTRIMVYxem0wIDBMNS4xOTIgMy4xMzhhLjUwOC41MDggMCAxIDAgLjY4NC43NTJMNyAyLjg2N1Y2aDFWMi43OTRsMS4xMjQgMS4wMjNhLjUwOC41MDggMCAwIDAgLjY4NC0uNzUyek0wIDFhMSAxIDAgMCAxIDEtMWgxM2ExIDEgMCAwIDEgMSAxdjEzYTEgMSAwIDAgMS0xIDFIMWExIDEgMCAwIDEtMS0xelxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTQgMXYxM0gxVjcuNDZsMi4xMzggMi4zNDhhLjUwOC41MDggMCAwIDAgLjc1Mi0uNjg0TDIuODY3IDhINlY3SDIuNzk0bDEuMDIzLTEuMTI0YS41MDguNTA4IDAgMCAwLS43NTItLjY4NUwxIDcuNDZWMXptMC0xYTEgMSAwIDAgMSAxIDF2MTNhMSAxIDAgMCAxLTEgMUgxYTEgMSAwIDAgMS0xLTFWMWExIDEgMCAwIDEgMS0xem0tMS44NjcgN0wxMS4xMSA1Ljg3NmEuNTA4LjUwOCAwIDEgMSAuNzUyLS42ODRMMTQgNy41NGwtMi4wNjUgMi4yNjhhLjUwOC41MDggMCAwIDEtLjc1MS0uNjg0TDEyLjIwNiA4SDlWN3pcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTQuNjUzIDEzLjg1NGEuNDg1LjQ4NSAwIDAgMSAwLS43MDhMMTAuMjQgOCA0LjY1MyAyLjg1NGEuNDg1LjQ4NSAwIDAgMSAwLS43MDguNTM4LjUzOCAwIDAgMSAuNzM4IDBsNS45NTYgNS41YS40ODUuNDg1IDAgMCAxIDAgLjcwOGwtNS45NTYgNS41YS41MzguNTM4IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOS4xMjQgMTIuMTEgOCAxMy4xMzNWMmg2LjVhLjUuNSAwIDAgMCAwLTFILjVhLjUuNSAwIDAgMCAwIDFIN3YxMS4yMDdsLTEuMTI0LTEuMDI0YS41MDguNTA4IDAgMSAwLS42ODQuNzUyTDcuNDYgMTVsMi4zNDgtMi4xMzhhLjUwOC41MDggMCAxIDAtLjY4NC0uNzUyTTEzLjUgN2EuNS41IDAgMCAwIDAtMUgxMHYxem0tMTIgMGEuNS41IDAgMCAxIDAtMUg1djF6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk01Ljg3NiAzLjg5IDcgMi44NjdWMTRILjVhLjUuNSAwIDAgMCAwIDFoMTRhLjUuNSAwIDAgMCAwLTFIOFYyLjc5NGwxLjEyNCAxLjAyM2EuNTA4LjUwOCAwIDAgMCAuNjg0LS43NTJMNy41NCAxIDUuMTkyIDMuMTM4YS41MDguNTA4IDAgMCAwIC42ODQuNzUyTTEuNSA5YS41LjUgMCAwIDAgMCAxSDVWOXptMTIgMGEuNS41IDAgMCAxIDAgMUgxMFY5elxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTMuNSAxNGEuNS41IDAgMCAwIDAtMWgtNmwzLjk1My0zLjQ1OWEuNS41IDAgMCAwLS42NTgtLjc1Mkw4IDExLjIzNFYxLjVhLjUuNSAwIDAgMC0xIDB2OS43MzRMNC4yMDYgOC43ODlhLjUuNSAwIDAgMC0uNjU5Ljc1Mkw3LjUgMTNoLTZhLjUuNSAwIDAgMCAwIDF6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk03LjUgMGEuNS41IDAgMCAwLS41LjV2MTRhLjUuNSAwIDAgMCAxIDBWLjVhLjUuNSAwIDAgMC0uNS0uNU0wIDcuNWMwIC4yOTEuMjMxLjUyNy41MTYuNTI3aDMuNTA4TDIuNTI3IDkuNmEuNTM1LjUzNSAwIDAgMCAwIC43NDYuNTA4LjUwOCAwIDAgMCAuNzMgMEw2IDcuNSAzLjI1NyA0LjY1NGEuNTA4LjUwOCAwIDAgMC0uNzMgMCAuNTM1LjUzNSAwIDAgMCAwIC43NDZsMS40OTcgMS41NzNILjUxNkEuNTIyLjUyMiAwIDAgMCAwIDcuNW0xNSAwYS41MjIuNTIyIDAgMCAxLS41MTYuNTI3aC0zLjUwOEwxMi40NzMgOS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MDguNTA4IDAgMCAxLS43MyAwTDkgNy41bDIuNzQzLTIuODQ2YS41MDguNTA4IDAgMCAxIC43MyAwIC41MzUuNTM1IDAgMCAxIDAgLjc0NmwtMS40OTcgMS41NzNoMy41MDhjLjI4NSAwIC41MTYuMjM2LjUxNi41MjdcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTEgMTMuNWEuNS41IDAgMCAwIDEgMHYtNmwzLjQ1OSAzLjk1M2EuNS41IDAgMCAwIC43NTItLjY1OEwzLjc2NiA4SDEzLjVhLjUuNSAwIDAgMCAwLTFIMy43NjZsMi40NDUtMi43OTRhLjUuNSAwIDEgMC0uNzUyLS42NTlMMiA3LjV2LTZhLjUuNSAwIDAgMC0xIDB6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xNCAxLjVhLjUuNSAwIDAgMC0xIDB2Nkw5LjU0MSAzLjU0N2EuNS41IDAgMSAwLS43NTIuNjU4TDExLjIzNCA3SDEuNWEuNS41IDAgMCAwIDAgMWg5LjczNGwtMi40NDUgMi43OTRhLjUuNSAwIDEgMCAuNzUyLjY1OUwxMyA3LjV2NmEuNS41IDAgMCAwIDEgMHpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTEuNSAxYS41LjUgMCAwIDAgMCAxaDZMMy41NDcgNS40NTlhLjUuNSAwIDEgMCAuNjU4Ljc1Mkw3IDMuNzY2VjEzLjVhLjUuNSAwIDAgMCAxIDBWMy43NjZsMi43OTQgMi40NDVhLjUuNSAwIDEgMCAuNjU5LS43NTJMNy41IDJoNmEuNS41IDAgMCAwIDAtMXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTE1IDcuNWEuNS41IDAgMCAwLS41LS41SC41YS41LjUgMCAwIDAgMCAxaDE0YS41LjUgMCAwIDAgLjUtLjVNNy41IDBhLjUyMi41MjIgMCAwIDAtLjUyNy41MTZ2My41MDhMNS40IDIuNTI3YS41MzUuNTM1IDAgMCAwLS43NDYgMCAuNTA4LjUwOCAwIDAgMCAwIC43M0w3LjUgNmwyLjg0Ni0yLjc0M2EuNTA4LjUwOCAwIDAgMCAwLS43My41MzUuNTM1IDAgMCAwLS43NDYgMEw4LjAyNyA0LjAyNFYuNTE2QS41MjIuNTIyIDAgMCAwIDcuNSAwbTAgMTVhLjUyMi41MjIgMCAwIDEtLjUyNy0uNTE2di0zLjUwOEw1LjQgMTIuNDczYS41MzUuNTM1IDAgMCAxLS43NDYgMCAuNTA4LjUwOCAwIDAgMSAwLS43M0w3LjUgOWwyLjg0NiAyLjc0M2EuNTA4LjUwOCAwIDAgMSAwIC43My41MzUuNTM1IDAgMCAxLS43NDYgMGwtMS41NzMtMS40OTd2My41MDhBLjUyMi41MjIgMCAwIDEgNy41IDE1XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMy4xNDYgMTMuODQ3YS40ODYuNDg2IDAgMCAwIC43MDggMCAuNTM4LjUzOCAwIDAgMCAwLS43MzhsLTUuNS01Ljk1NmEuNDg1LjQ4NSAwIDAgMC0uNzA4IDBsLTUuNSA1Ljk1NmEuNTM4LjUzOCAwIDAgMCAwIC43MzguNDg1LjQ4NSAwIDAgMCAuNzA4IDBMOCA4LjI2em0wLTVhLjQ4NS40ODUgMCAwIDAgLjcwOCAwIC41MzguNTM4IDAgMCAwIDAtLjczOGwtNS41LTUuOTU2YS40ODUuNDg1IDAgMCAwLS43MDggMGwtNS41IDUuOTU2YS41MzguNTM4IDAgMCAwIDAgLjczOC40ODUuNDg1IDAgMCAwIC43MDggMEw4IDMuMjZ6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMy44NTQgMTEuMzQ3YS40ODYuNDg2IDAgMCAxLS43MDggMEw4IDUuNzZsLTUuMTQ2IDUuNTg3YS40ODUuNDg1IDAgMCAxLS43MDggMCAuNTM4LjUzOCAwIDAgMSAwLS43MzhsNS41LTUuOTU2YS40ODUuNDg1IDAgMCAxIC43MDggMGw1LjUgNS45NTZhLjUzOC41MzggMCAwIDEgMCAuNzM4XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJtOC43NDUgOCA2LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDUuNzQ2TDggOC43NDZsLTYuMSA2LjFhLjUyNy41MjcgMCAxIDEtLjc0Ni0uNzQ2bDYuMS02LjEtNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2LS43NDZsNi4xIDYuMSA2LjEtNi4xYS41MjcuNTI3IDAgMCAxIC43NDYuNzQ2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTE0Ljk5NCAyLjI0M0ExLjM3NSAxLjM3NSAwIDAgMCAxMy42MjUgMWgtNy4yNWwtLjEzMi4wMDZBMS4zNzUgMS4zNzUgMCAwIDAgNSAyLjM3NXYxLjc1aC45MTd2LTEuNzVsLjAwNy0uMDgyYS40NTguNDU4IDAgMCAxIC40NTEtLjM3Nmg3LjI1bC4wODIuMDA3YS40NTguNDU4IDAgMCAxIC4zNzYuNDUxdjcuMjVsLS4wMDcuMDgyYS40NTguNDU4IDAgMCAxLS40NTEuMzc2aC0xLjczOFYxMWgxLjczOGwuMTMyLS4wMDZBMS4zNzUgMS4zNzUgMCAwIDAgMTUgOS42MjV2LTcuMjV6TTkuNjI1IDVoLTcuMjVDMS42MTUgNSAxIDUuNjE2IDEgNi4zNzV2Ny4yNUMxIDE0LjM4NSAxLjYxNiAxNSAyLjM3NSAxNWg3LjI1Yy43NiAwIDEuMzc1LS42MTYgMS4zNzUtMS4zNzV2LTcuMjVDMTEgNS42MTUgMTAuMzg0IDUgOS42MjUgNU0yLjQgNmg3LjJjLjIyIDAgLjQuMjAxLjQuNDV2Ny4xYzAgLjI0OC0uMTguNDUtLjQuNDVIMi40Yy0uMjIgMC0uNC0uMjAxLS40LS40NXYtNy4xYzAtLjI0OS4xOC0uNDUuNC0uNDVNNCA4aDR2MUg0em00IDNINHYxaDR6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xLjUgMTFhLjUuNSAwIDAgMCAuNS0uNVYyaDguNWEuNS41IDAgMCAwIDAtMUgyYTEgMSAwIDAgMC0xIDF2OC41YS41LjUgMCAwIDAgLjUuNU01IDRoOWExIDEgMCAwIDEgMSAxdjlhMSAxIDAgMCAxLTEgMUg1YTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xbTAgMXY5aDlWNXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExLjIyNyAxLjMxMmMtLjQwNC0uNDA0LTEuMDQ1LS40MTctMS40MzItLjAzTDIuNDkgOC41ODdsLS40OCAyLjY3NGEuNjM3LjYzNyAwIDAgMCAuNzMuNzNsMi42NzMtLjQ4IDcuMzA1LTcuMzA2Yy4zODctLjM4Ny4zNzQtMS4wMjgtLjAzLTEuNDMxem0tOC4xMTQgOS41NzUuMzItMS43ODEgNC45OTEtNC45OTIgMS40NjIgMS40NjItNC45OTIgNC45OTF6bTcuNDczLTYuMDEyIDEuNDAyLTEuNC0xLjQ2Mi0xLjQ2My0xLjQwMSAxLjQwMnpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xLjUgMTRhLjUuNSAwIDAgMCAwIDFoMTNhLjUuNSAwIDAgMCAwLTF6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTIgMGE0IDQgMCAwIDEgNCA0djhhNCA0IDAgMCAxLTQgNEg0YTQgNCAwIDAgMS00LTRWNGE0IDQgMCAwIDEgNC00em0wIDFINGEzIDMgMCAwIDAtMi45OTUgMi44MjRMMSA0djhhMyAzIDAgMCAwIDIuODI0IDIuOTk1TDQgMTVoOGEzIDMgMCAwIDAgMi45OTUtMi44MjRMMTUgMTJWNGEzIDMgMCAwIDAtMi44MjQtMi45OTV6TTggNGE0IDQgMCAxIDEgMCA4IDQgNCAwIDAgMSAwLThtMCAxYTMgMyAwIDEgMCAwIDYgMyAzIDAgMCAwIDAtNlxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNy41IDBBMy41IDMuNSAwIDAgMSAxMSAzLjVWNmgxYTEgMSAwIDAgMSAxIDF2OGExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY3YTEgMSAwIDAgMSAxLTFoMVYzLjVBMy41IDMuNSAwIDAgMSA3LjUgME01IDZoNVYzLjVhMi41IDIuNSAwIDAgMC0yLjMzNi0yLjQ5NUw3LjUgMWEyLjUgMi41IDAgMCAwLTIuNDk1IDIuMzM2TDUgMy41em02IDFIM3Y4aDlWN3ptLTMuNSA1YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk03LjUgMS45MTQgNi40NzUgMi45NGEuNS41IDAgMSAxLS43MDctLjcwN0w4IDBsMi4xNTcgMi4xNTdhLjUuNSAwIDAgMS0uNzA3LjcwN2wtLjk1LS45NVY3LjVoNS41ODZsLTEuMS0xLjFhLjUuNSAwIDEgMSAuNzA2LS43MDhMMTYgOGwtMi4yMzIgMi4yMzJhLjUuNSAwIDEgMS0uNzA3LS43MDdMMTQuMDg2IDguNUg4LjV2NS41ODZsMS4wMjUtMS4wMjVhLjUuNSAwIDEgMSAuNzA3LjcwN0w4IDE2bC0yLjMwOC0yLjMwOGEuNS41IDAgMSAxIC43MDctLjcwN2wxLjEwMSAxLjFWOC41SDEuOTE0bC45NS45NWEuNS41IDAgMCAxLS43MDcuNzA3TDAgOGwyLjIzMi0yLjIzMmEuNS41IDAgMSAxIC43MDcuNzA3TDEuOTE0IDcuNUg3LjV6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMiA4LjAwMmEuNS41IDAgMCAxLTEgMFYxSDF2MTIuMDAzaDMuNWEuNS41IDAgMSAxIDAgMUgxYTEgMSAwIDAgMS0xLTFWMUExIDEgMCAwIDEgLjA0NC43MDYuNDk4LjQ5OCAwIDAgMSAuNSAwSDExYTEgMSAwIDAgMSAxIDF6bTIuMjE4IDEuNDg2YS41LjUgMCAwIDAtLjcwOCAwbC01LjY1NyA1LjY1OGEuNS41IDAgMCAwIC43MDguNzA3bDUuNjU3LTUuNjU4YS41LjUgMCAwIDAgMC0uNzA3TTExIDkuOTI4Yy4zNzYgMCAuNzk0LjA0MSAxLjIzLjE0MWwtLjg3MS44NzFhNS4xNDcgNS4xNDcgMCAwIDAtLjM1OS0uMDEyYy0xIDAtMi43MzEuMjk3LTMuODMgMiAuMzEzLjQ4Ni42NzcuODU3IDEuMDYyIDEuMTRsLS42NzYuNjc2QTYuMDgxIDYuMDgxIDAgMCAxIDYgMTIuOTI4YzEuMzMzLTIuMzM0IDMuNS0zIDUtM20wIDVjLS4yMTkgMC0uNDcyLS4wMTQtLjc0Ni0uMDU0bC0uODI0LjgyNWE1LjYyIDUuNjIgMCAwIDAgMS41Ny4yM2MxLjUgMCAzLjY2Ny0uNjY3IDUtM2E2LjAxMiA2LjAxMiAwIDAgMC0xLjgwNC0xLjk5OGwtLjY4NC42ODRjLjQ3OC4yOTkuOTM2LjcyMSAxLjMxOSAxLjMxMy0xLjEgMS43MDQtMi44MzEgMi0zLjgzMSAyTTIuNSAzLjUwMkEuNS41IDAgMCAxIDMgM2g2YS41LjUgMCAwIDEgMCAxSDNhLjUuNSAwIDAgMS0uNS0uNU0zIDZhLjUuNSAwIDAgMCAwIDFoMmEuNS41IDAgMCAwIDAtMXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk03LjUgMGEuNS41IDAgMCAwLS41LjVWN0guNWEuNS41IDAgMCAwIDAgMUg3djYuNWEuNS41IDAgMCAwIDEgMFY4aDYuNWEuNS41IDAgMCAwIDAtMUg4Vi41YS41LjUgMCAwIDAtLjUtLjVcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE3IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNyAxNVYwaDF2MTV6TTAgMmg0djFIMXY5aDN2MUgwek0xMSAxM2g0VjJoLTR2MWgzdjloLTN6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNyAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMyAxdjNIMlYwaDExdjRoLTFWMXpNMiAxMWgxdjNoOXYtM2gxdjRIMnpNMTUgOEgwVjdoMTV6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNiA2LjVhLjUuNSAwIDAgMSAxIDB2NmEuNS41IDAgMCAxLTEgMHpNOS41IDZhLjUuNSAwIDAgMC0uNS41djZhLjUuNSAwIDAgMCAxIDB2LTZhLjUuNSAwIDAgMC0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExIDBINWExIDEgMCAwIDAtMSAxdjJILjVhLjUuNSAwIDAgMCAwIDFoMS42bC44MSAxMS4xYTEgMSAwIDAgMCAuOTk1LjloOC4xOWExIDEgMCAwIDAgLjk5NS0uOUwxMy45IDRoMS42YS41LjUgMCAwIDAgMC0xSDEyVjFhMSAxIDAgMCAwLTEtMW0wIDNWMUg1djJ6bTEuODk1IDFoLTkuNzlsLjggMTFoOC4xOXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTEyIDBhNCA0IDAgMCAxIDQgNHY4YTQgNCAwIDAgMS00IDRINGE0IDQgMCAwIDEtNC00VjRhNCA0IDAgMCAxIDQtNHptMCAxSDRhMyAzIDAgMCAwLTIuOTk1IDIuODI0TDEgNHY4YTMgMyAwIDAgMCAyLjgyNCAyLjk5NUw0IDE1aDhhMyAzIDAgMCAwIDIuOTk1LTIuODI0TDE1IDEyVjRhMyAzIDAgMCAwLTIuODI0LTIuOTk1ek04IDRhNCA0IDAgMSAwIDAgOCA0IDQgMCAwIDAgMC04XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xNiAzLjVhMy41IDMuNSAwIDEgMC03IDBWNkgzYTEgMSAwIDAgMC0xIDF2OGExIDEgMCAwIDAgMSAxaDlhMSAxIDAgMCAwIDEtMVY3YTEgMSAwIDAgMC0xLTFoLTJWMy41bC4wMDUtLjE2NEEyLjUgMi41IDAgMCAxIDEyLjUgMWwuMTY0LjAwNUEyLjUgMi41IDAgMCAxIDE1IDMuNWEuNS41IDAgMCAwIDEgME05IDdIM3Y4aDlWN2gtMXptLTEuNSA1YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIm04IDAgOCA2LTggNi04LTZ6TTEuODg3IDYgOCAxMC44MiAxNC4xMTMgNiA4IDEuMTh6TTAgOS44MS41NjMgOSA4IDE0Ljc3NSAxNS40MzcgOWwuNTYzLjgxTDggMTZ6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOCA1LjVhMSAxIDAgMSAwIDAtMiAxIDEgMCAwIDAgMCAyTTYuNSA3LjVBLjUuNSAwIDAgMSA3IDdoMS41djQuNWgxYS41LjUgMCAwIDEgMCAxaC0zYS41LjUgMCAwIDEgMC0xaDFWOEg3YS41LjUgMCAwIDEtLjUtLjVcXFwiPjwvcGF0aD48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDE2QTggOCAwIDEgMSA4IDBhOCA4IDAgMCAxIDAgMTZtMC0xQTcgNyAwIDEgMCA4IDFhNyA3IDAgMCAwIDAgMTRcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL2dyaWQtdGVtcGxhdGUuc3ZnJ1xuXG5leHBvcnQgY29uc3QgR3JpZFRlbXBsYXRlT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL2ludmlzaWJsZS5zdmcnXG5cbmV4cG9ydCBjb25zdCBJbnZpc2libGVPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbWF4Z3JpZC5zdmcnXG5cbmV4cG9ydCBjb25zdCBNYXhncmlkT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmcnXG5cbmV4cG9ydCBjb25zdCBNb3JlSG9yaXpvbnRhbE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi90ZW1wbGF0ZS5zdmcnXG5cbmV4cG9ydCBjb25zdCBUZW1wbGF0ZU91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi92aXNpYmxlLnN2ZydcblxuZXhwb3J0IGNvbnN0IFZpc2libGVPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvYnJhbmQvYmxvY2suc3ZnJ1xuXG5leHBvcnQgY29uc3QgQmxvY2tPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvYnJhbmQvc2NyZWVuLWdyb3VwLnN2ZydcblxuZXhwb3J0IGNvbnN0IFNjcmVlbkdyb3VwT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LXN0cmV0Y2hlZC5zdmcnXG5cbmV4cG9ydCBjb25zdCBBcnJvd1N0cmV0Y2hlZE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnN2ZydcblxuZXhwb3J0IGNvbnN0IExlZnRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xuXG5leHBvcnQgY29uc3QgUmlnaHRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAtZG91YmxlLnN2ZydcblxuZXhwb3J0IGNvbnN0IFVwRG91YmxlT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmcnXG5cbmV4cG9ydCBjb25zdCBDbG9zZU91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvZWRpdC5zdmcnXG5cbmV4cG9ydCBjb25zdCBFZGl0T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9sb2NrLnN2ZydcblxuZXhwb3J0IGNvbnN0IExvY2tPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL3BsdXMuc3ZnJ1xuXG5leHBvcnQgY29uc3QgUGx1c091dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdW5sb2NrLnN2ZydcblxuZXhwb3J0IGNvbnN0IFVubG9ja091dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby5zdmcnXG5cbmV4cG9ydCBjb25zdCBJbmZvT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgSW1tdXRhYmxlLFxuICB0eXBlIExheW91dEluZm8sXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVN0YXRlLFxuICBSZWFjdFJlZHV4LFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgV2lkZ2V0VHlwZSxcbiAgQW5pbWF0aW9uVHlwZSxcbiAgQW5pbWF0aW9uVHJpZ2dlclR5cGUsXG4gIEFuaW1hdGlvblBsYXlNb2RlLFxuICB0eXBlIEFuaW1hdGlvblNldHRpbmcsXG4gIEhvdmVyVHlwZSxcbiAgZ2V0QXBwU3RvcmUsXG4gIHR5cGUgU2VjdGlvbk5hdkluZm8sXG4gIFRyYW5zaXRpb25UeXBlLFxuICB0eXBlIFRyYW5zaXRpb25EaXJlY3Rpb24sXG4gIGdldE5leHRBbmltYXRpb25JZCxcbiAgY3JlYXRlU2VsZWN0b3Jcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQWR2YW5jZWRCdXR0b25Hcm91cCwgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFNldHRpbmdTZWN0aW9uLCBTZXR0aW5nUm93IH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBBbmltYXRpb25TZXR0aW5nQ29tcG9uZW50LCBUcmFuc2l0aW9uU2V0dGluZyB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc3R5bGUtc2V0dGluZy1jb21wb25lbnRzJ1xuaW1wb3J0IHsgYnVpbGRlckFwcFN5bmMsIGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQge1xuICB0eXBlIENvbW1vbkxheW91dEl0ZW1TZXR0aW5nLFxuICBzZWFyY2hVdGlsc1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBmaW5kQWN0aXZlVmlld0lkIH0gZnJvbSAnLi9tZW51L3NlY3Rpb24tbWVudSdcblxuaW50ZXJmYWNlIE93blByb3BzIHtcbiAgbGF5b3V0SWQ6IHN0cmluZ1xuICBsYXlvdXRJdGVtSWQ6IHN0cmluZ1xuICBvblNldHRpbmdDaGFuZ2U/OiAobGF5b3V0SW5mbzogTGF5b3V0SW5mbywgc2V0dGluZykgPT4gdm9pZFxuICBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nXG59XG5cbmludGVyZmFjZSBTdGF0ZVByb3BzIHtcbiAgc2V0dGluZzogSW1tdXRhYmxlT2JqZWN0PENvbW1vbkxheW91dEl0ZW1TZXR0aW5nPlxuICBpc1dpZGdldDogYm9vbGVhblxuICBpc0xheW91dFdpZGdldDogYm9vbGVhblxuICBpc1NlY3Rpb246IGJvb2xlYW5cbiAgdHJhbnNpdGlvblR5cGU/OiBUcmFuc2l0aW9uVHlwZVxuICB0cmFuc2l0aW9uRGlyZWN0aW9uPzogVHJhbnNpdGlvbkRpcmVjdGlvblxuICBzZWN0aW9uSWQ/OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgYW5pbWF0aW9uVHlwZTogJ2luJyB8ICd0cmFuc2l0aW9uJyB8ICdob3Zlcidcbn1cblxuY2xhc3MgTGF5b3V0SXRlbUFuaW1hdGlvblNldHRpbmcgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PE93blByb3BzICYgU3RhdGVQcm9wcywgU3RhdGU+IHtcbiAgbW9kYWxTdHlsZTogYW55ID0ge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogJzAnLFxuICAgIGJvdHRvbTogJzAnLFxuICAgIHdpZHRoOiAnMTAwJScsXG4gICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgcGFkZGluZ0JvdHRvbTogJzFweCdcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBhbmltYXRpb25UeXBlOiAnaW4nXG4gICAgfVxuICB9XG5cbiAgaGFzQW5pbWF0aW9uRWZmZWN0ICgpIHtcbiAgICBjb25zdCB7IHNldHRpbmcgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBlZmZlY3QgPSBzZXR0aW5nPy5lZmZlY3Q/LltBbmltYXRpb25UcmlnZ2VyVHlwZS5TY3JvbGxJbnRvVmlld11cbiAgICBjb25zdCBvbmVCeU9uZUVmZmVjdCA9IHNldHRpbmc/Lm9uZUJ5T25lRWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddXG4gICAgcmV0dXJuIChlZmZlY3QgJiYgZWZmZWN0LnR5cGUgIT09IEFuaW1hdGlvblR5cGUuTm9uZSkgfHwgKG9uZUJ5T25lRWZmZWN0ICYmIG9uZUJ5T25lRWZmZWN0LnR5cGUgIT09IEFuaW1hdGlvblR5cGUuTm9uZSlcbiAgfVxuXG4gIGhhc0hvdmVyRWZmZWN0ICgpIHtcbiAgICBjb25zdCB7IHNldHRpbmcgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBlZmZlY3QgPSBzZXR0aW5nPy5ob3ZlckVmZmVjdFxuICAgIHJldHVybiBlZmZlY3QgJiYgZWZmZWN0LnR5cGUgIT09IEhvdmVyVHlwZS5Ob25lXG4gIH1cblxuICBvblRyYW5zaXRpb25TZXR0aW5nQ2hhbmdlID0gKHNldHRpbmcpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0U2VjdGlvblByb3BlcnR5KGxheW91dEl0ZW0uc2VjdGlvbklkLCAndHJhbnNpdGlvbicsIHNldHRpbmcpLmV4ZWMoKVxuXG4gICAgaWYgKHNldHRpbmc/LnR5cGUgIT09IFRyYW5zaXRpb25UeXBlLk5vbmUpIHtcbiAgICAgIHRoaXMucHJldmlld1RyYW5zaXRpb24oKVxuICAgIH1cbiAgfVxuXG4gIG9uSG92ZXJFZmZlY3RDaGFuZ2UgPSAoZWZmZWN0KSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICBjb25zdCBhcHBDb25maWcgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICBjb25zdCBzZXR0aW5nID0gbGF5b3V0SXRlbS5zZXR0aW5nID8/IEltbXV0YWJsZSh7fSlcblxuICAgIGlmIChzZXR0aW5nLmhvdmVyRWZmZWN0Py50eXBlICE9PSBlZmZlY3QudHlwZSkge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICAgIHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9LFxuICAgICAgICAnc2V0dGluZy5ob3ZlckVmZmVjdCcsXG4gICAgICAgIGVmZmVjdFxuICAgICAgKS5leGVjKClcbiAgICB9XG5cbiAgICBpZiAoZWZmZWN0LnR5cGUgIT09IEhvdmVyVHlwZS5Ob25lKSB7XG4gICAgICBidWlsZGVyQXBwU3luYy5wdWJsaXNoSG92ZXJQcmV2aWV3VG9BcHAoe1xuICAgICAgICBsYXlvdXRJbmZvOiB7XG4gICAgICAgICAgbGF5b3V0SWQ6IGxheW91dElkLFxuICAgICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbUlkXG4gICAgICAgIH0sXG4gICAgICAgIGlkOiBnZXROZXh0QW5pbWF0aW9uSWQoKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBvbkVmZmVjdFNldHRpbmdDaGFuZ2UgPSAobW9kZTogQW5pbWF0aW9uUGxheU1vZGUsIGVmZmZlY3RTZXR0aW5nOiBBbmltYXRpb25TZXR0aW5nKSA9PiB7XG4gICAgY29uc3QgdHJpZ2dlciA9IEFuaW1hdGlvblRyaWdnZXJUeXBlLlNjcm9sbEludG9WaWV3XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBzZXR0aW5nIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3Qgb2xkU2V0dGluZyA9IHNldHRpbmcgfHwgSW1tdXRhYmxlKHt9KSBhcyBJbW11dGFibGVPYmplY3Q8Q29tbW9uTGF5b3V0SXRlbVNldHRpbmc+XG4gICAgY29uc3QgcHJvcE5hbWUgPSBtb2RlID09PSBBbmltYXRpb25QbGF5TW9kZS5PbmVCeU9uZSA/ICdvbmVCeU9uZUVmZmVjdCcgOiAnZWZmZWN0J1xuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkXG4gICAgICB9LFxuICAgICAgb2xkU2V0dGluZy5zZXRJbihcbiAgICAgICAgW3Byb3BOYW1lLCB0cmlnZ2VyXSxcbiAgICAgICAgZWZmZmVjdFNldHRpbmdcbiAgICAgIClcbiAgICApXG4gICAgaWYgKGVmZmZlY3RTZXR0aW5nPy50eXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmUpIHtcbiAgICAgIGJ1aWxkZXJBcHBTeW5jLnB1Ymxpc2hBbmltYXRpb25QcmV2aWV3VG9BcHAoe1xuICAgICAgICBsYXlvdXRJbmZvOiB7XG4gICAgICAgICAgbGF5b3V0SWQ6IGxheW91dElkLFxuICAgICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbUlkXG4gICAgICAgIH0sXG4gICAgICAgIHBsYXlNb2RlOiBtb2RlLFxuICAgICAgICBpZDogZ2V0TmV4dEFuaW1hdGlvbklkKClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25TZWN0aW9uT25lQnlPbmVFZmZlY3RTZXR0aW5nQ2hhbmdlID0gKGVmZmZlY3RTZXR0aW5nOiBBbmltYXRpb25TZXR0aW5nKSA9PiB7XG4gICAgdGhpcy5vbkVmZmVjdFNldHRpbmdDaGFuZ2UoQW5pbWF0aW9uUGxheU1vZGUuT25lQnlPbmUsIGVmZmZlY3RTZXR0aW5nKVxuICB9XG5cbiAgcHJldmlld0FuaW1hdGlvbiA9IChtb2RlOiBBbmltYXRpb25QbGF5TW9kZSkgPT4ge1xuICAgIGlmICh0aGlzLmhhc0FuaW1hdGlvbkVmZmVjdCgpKSB7XG4gICAgICBidWlsZGVyQXBwU3luYy5wdWJsaXNoQW5pbWF0aW9uUHJldmlld1RvQXBwKHtcbiAgICAgICAgbGF5b3V0SW5mbzoge1xuICAgICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtSWRcbiAgICAgICAgfSxcbiAgICAgICAgcGxheU1vZGU6IG1vZGUsXG4gICAgICAgIGlkOiBnZXROZXh0QW5pbWF0aW9uSWQoKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBwcmV2aWV3VHJhbnNpdGlvbiA9ICh3aXRoT25lQnlPbmUgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHsgc2VjdGlvbklkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3Qgc2VjdGlvblByb3BzID0gc2VhcmNoVXRpbHMuZ2V0U2VjdGlvbkluZm8oZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyLCBzZWN0aW9uSWQpXG5cbiAgICBjb25zdCB7IHZpZXdzIH0gPSBzZWN0aW9uUHJvcHNcbiAgICBpZiAodmlld3M/Lmxlbmd0aCA+IDEpIHtcbiAgICAgIGxldCBuYXZJbmZvOiBJbW11dGFibGVPYmplY3Q8U2VjdGlvbk5hdkluZm8+ID1cbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBSdW50aW1lSW5mbz8uc2VjdGlvbk5hdkluZm9zPy5bc2VjdGlvbklkXVxuICAgICAgaWYgKCFuYXZJbmZvKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXdJZCA9IGZpbmRBY3RpdmVWaWV3SWQoc2VjdGlvblByb3BzKVxuICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXdJZClcbiAgICAgICAgY29uc3QgcHJldmlvdXNJbmRleCA9IGN1cnJlbnRJbmRleCA+IDAgPyBjdXJyZW50SW5kZXggLSAxIDogY3VycmVudEluZGV4ICsgMVxuICAgICAgICBuYXZJbmZvID0gSW1tdXRhYmxlKHtcbiAgICAgICAgICBjdXJyZW50Vmlld0lkOiBhY3RpdmVWaWV3SWQsXG4gICAgICAgICAgcHJldmlvdXNWaWV3SWQ6IHZpZXdzW3ByZXZpb3VzSW5kZXhdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBidWlsZGVyQXBwU3luYy5wdWJsaXNoU2VjdGlvbk5hdkluZm9Ub0FwcChzZWN0aW9uSWQsIChuYXZJbmZvIGFzIGFueSlcbiAgICAgICAgLnNldCgncGxheUlkJywgZ2V0TmV4dEFuaW1hdGlvbklkKCkpXG4gICAgICAgIC5zZXQoJ3dpdGhPbmVCeU9uZScsIHdpdGhPbmVCeU9uZSkuYXNNdXRhYmxlKCkgYXMgU2VjdGlvbk5hdkluZm8pXG4gICAgfVxuICB9XG5cbiAgcHJldmlld1RyYW5zaXRpb25BbmRPbmVieU9uZSA9ICgpID0+IHtcbiAgICB0aGlzLnByZXZpZXdUcmFuc2l0aW9uKHRydWUpXG4gIH1cblxuICBwcmV2aWV3T25lQnlPbmVJblNlY3Rpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5wcmV2aWV3QW5pbWF0aW9uKEFuaW1hdGlvblBsYXlNb2RlLk9uZUJ5T25lKVxuICB9XG5cbiAgcHJldmlld0hvdmVyID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmhhc0hvdmVyRWZmZWN0KCkpIHtcbiAgICAgIGJ1aWxkZXJBcHBTeW5jLnB1Ymxpc2hIb3ZlclByZXZpZXdUb0FwcCh7XG4gICAgICAgIGxheW91dEluZm86IHtcbiAgICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbUlkXG4gICAgICAgIH0sXG4gICAgICAgIGlkOiBnZXROZXh0QW5pbWF0aW9uSWQoKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBvblBsYXlNb2RlQ2hhbmdlID0gKG1vZGU6IEFuaW1hdGlvblBsYXlNb2RlKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSB0aGlzLnByb3BzXG5cbiAgICBnZXRBcHBDb25maWdBY3Rpb24oKS5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9LCAnc2V0dGluZy5lZmZlY3RQbGF5TW9kZScsIG1vZGUpLmV4ZWMoKVxuICB9XG5cbiAgc3dpdGNoVG9JbiA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGFuaW1hdGlvblR5cGU6ICdpbidcbiAgICB9KVxuICB9XG5cbiAgc3dpdGNoVG9UcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYW5pbWF0aW9uVHlwZTogJ3RyYW5zaXRpb24nXG4gICAgfSlcbiAgfVxuXG4gIHN3aXRjaFRvSG92ZXIgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBhbmltYXRpb25UeXBlOiAnaG92ZXInXG4gICAgfSlcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBmb3JtYXRNZXNzYWdlLCBpc0xheW91dFdpZGdldCwgaXNTZWN0aW9uLCB0cmFuc2l0aW9uVHlwZSwgdHJhbnNpdGlvbkRpcmVjdGlvbiwgc2V0dGluZyB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgYW5pbWF0aW9uVHlwZSB9ID0gdGhpcy5zdGF0ZVxuXG4gICAgY29uc3QgYXNvbmVFZmZlY3QgPSBzZXR0aW5nPy5lZmZlY3Q/LltBbmltYXRpb25UcmlnZ2VyVHlwZS5TY3JvbGxJbnRvVmlld11cbiAgICBjb25zdCBvbmVCeU9uZUVmZmVjdCA9IHNldHRpbmc/Lm9uZUJ5T25lRWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddXG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNldHRpbmdTZWN0aW9uIHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCdhbmltYXRpb24nKX0gdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ2FuaW1hdGlvbicpfT5cbiAgICAgICAge2lzU2VjdGlvbiAmJiAoXG4gICAgICAgICAgPFNldHRpbmdSb3c+XG4gICAgICAgICAgICA8QWR2YW5jZWRCdXR0b25Hcm91cFxuICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctMTAwJyBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXByaW1hcnktNTAwKTtcbiAgICAgICAgICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogNTAlO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweCAycHggMCAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8QnV0dG9uIGFjdGl2ZT17YW5pbWF0aW9uVHlwZSA9PT0gJ2luJ30gb25DbGljaz17dGhpcy5zd2l0Y2hUb0lufT5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0TWVzc2FnZSgnaW4nKX1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC0xJyBhY3RpdmU9e2FuaW1hdGlvblR5cGUgPT09ICd0cmFuc2l0aW9uJ30gb25DbGljaz17dGhpcy5zd2l0Y2hUb1RyYW5zaXRpb259PlxuICAgICAgICAgICAgICAgIHtmb3JtYXRNZXNzYWdlKCd0cmFuc2l0aW9uJyl9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9BZHZhbmNlZEJ1dHRvbkdyb3VwPlxuICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgKX1cbiAgICAgICAge2FuaW1hdGlvblR5cGUgPT09ICdpbicgJiYgPFNldHRpbmdSb3c+XG4gICAgICAgICAgPEFuaW1hdGlvblNldHRpbmdDb21wb25lbnRcbiAgICAgICAgICAgIGVmZmVjdFNldHRpbmc9e2Fzb25lRWZmZWN0fVxuICAgICAgICAgICAgb25lQnlPbmVTZXR0aW5nPXtvbmVCeU9uZUVmZmVjdH1cbiAgICAgICAgICAgIG9uU2V0dGluZ0NoYW5nZT17dGhpcy5vbkVmZmVjdFNldHRpbmdDaGFuZ2V9XG4gICAgICAgICAgICBwcmV2aWV3RW5hYmxlZFxuICAgICAgICAgICAgc3VwcG9ydEFzT25lXG4gICAgICAgICAgICBzdXBwb3J0T25lQnlPbmU9e2lzTGF5b3V0V2lkZ2V0fVxuICAgICAgICAgICAgb25QcmV2aWV3Q2xpY2tlZD17dGhpcy5wcmV2aWV3QW5pbWF0aW9ufVxuICAgICAgICAgICAgZm9ybWF0TWVzc2FnZT17Zm9ybWF0TWVzc2FnZX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1NldHRpbmdSb3c+fVxuICAgICAgICB7YW5pbWF0aW9uVHlwZSA9PT0gJ3RyYW5zaXRpb24nICYmIDxTZXR0aW5nUm93IGZsb3c9J3dyYXAnPlxuICAgICAgICAgIDxUcmFuc2l0aW9uU2V0dGluZ1xuICAgICAgICAgICAgdHJhbnNpdGlvbj17eyB0eXBlOiB0cmFuc2l0aW9uVHlwZSwgZGlyZWN0aW9uOiB0cmFuc2l0aW9uRGlyZWN0aW9uIH19XG4gICAgICAgICAgICB0cmFuc2l0aW9uTGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ3ZpZXcnKX1cbiAgICAgICAgICAgIG9uZUJ5T25lRWZmZWN0PXtvbmVCeU9uZUVmZmVjdH1cbiAgICAgICAgICAgIG9uT25lQnlPbmVDaGFuZ2U9e3RoaXMub25TZWN0aW9uT25lQnlPbmVFZmZlY3RTZXR0aW5nQ2hhbmdlfVxuICAgICAgICAgICAgb25UcmFuc2l0aW9uQ2hhbmdlPXt0aGlzLm9uVHJhbnNpdGlvblNldHRpbmdDaGFuZ2V9XG4gICAgICAgICAgICBvblByZXZpZXdUcmFuc2l0aW9uQ2xpY2tlZD17dGhpcy5wcmV2aWV3VHJhbnNpdGlvbn1cbiAgICAgICAgICAgIG9uUHJldmlld09uZUJ5T25lQ2xpY2tlZD17dGhpcy5wcmV2aWV3T25lQnlPbmVJblNlY3Rpb259XG4gICAgICAgICAgICBvblByZXZpZXdBc0FXaG9uZUNsaWNrZWQ9e3RoaXMucHJldmlld1RyYW5zaXRpb25BbmRPbmVieU9uZX1cbiAgICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e2Zvcm1hdE1lc3NhZ2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TZXR0aW5nUm93Pn1cbiAgICAgIDwvU2V0dGluZ1NlY3Rpb24+XG4gICAgKVxuICB9XG59XG5cbmNvbnN0IG1hcEZ1bmN0aW9uOiAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBPd25Qcm9wcykgPT4gU3RhdGVQcm9wcyA9IGNyZWF0ZVNlbGVjdG9yKFtcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogT3duUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBDb25maWc/LmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIHJldHVybiBsYXlvdXRJdGVtPy5zZXR0aW5nXG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IE93blByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBvd25Qcm9wc1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnPy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICByZXR1cm4gbGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0XG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IE93blByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBvd25Qcm9wc1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnPy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICBjb25zdCB3aWRnZXQgPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgICAgIHJldHVybiB3aWRnZXQ/Lm1hbmlmZXN0Py53aWRnZXRUeXBlID09PSBXaWRnZXRUeXBlLkxheW91dFxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogT3duUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBDb25maWc/LmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICByZXR1cm4gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcENvbmZpZy5zZWN0aW9uc1tsYXlvdXRJdGVtLnNlY3Rpb25JZF1cbiAgICB9XG4gIH1cbl0sIChzZXR0aW5nLCBpc1dpZGdldCwgaXNMYXlvdXRXaWRnZXQsIHNlY3Rpb24pID0+ICh7XG4gIHNldHRpbmcsXG4gIGlzV2lkZ2V0LFxuICBpc0xheW91dFdpZGdldCxcbiAgaXNTZWN0aW9uOiBzZWN0aW9uICE9IG51bGwsXG4gIHRyYW5zaXRpb25UeXBlOiBzZWN0aW9uPy50cmFuc2l0aW9uPy50eXBlIGFzIFRyYW5zaXRpb25UeXBlLFxuICB0cmFuc2l0aW9uRGlyZWN0aW9uOiBzZWN0aW9uPy50cmFuc2l0aW9uPy5kaXJlY3Rpb24gYXMgVHJhbnNpdGlvbkRpcmVjdGlvbixcbiAgc2VjdGlvbklkOiBzZWN0aW9uPy5pZFxufSkpXG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxTdGF0ZVByb3BzLCB1bmtub3duLCBPd25Qcm9wcz4obWFwRnVuY3Rpb24pKExheW91dEl0ZW1BbmltYXRpb25TZXR0aW5nKVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgYXBwQ29uZmlnVXRpbHMsXG4gIHR5cGUgV2lkZ2V0SnNvbixcbiAgdHlwZSBJTUFwcENvbmZpZyxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIFdpZGdldFR5cGUsXG4gIHR5cGUgSU1XaWRnZXRKc29uLFxuICBQYWdlUGFydCxcbiAgTGF5b3V0VHlwZSxcbiAgaTE4bixcbiAgdHlwZSBDbGlwYm9hcmRJdGVtLFxuICB1dGlscyBhcyBjb3JlVXRpbHMsXG4gIExheW91dFBhcmVudFR5cGUsXG4gIEFQUF9GUkFNRV9OQU1FX0lOX0JVSUxERVIsXG4gIEdyaWRJdGVtVHlwZSxcbiAgdHlwZSBJTUdyaWRMYXlvdXRJdGVtSnNvblxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24sIGFwcEJ1aWxkZXJTeW5jLCBidWlsZGVyQXBwU3luYywgTGF5b3V0U2VydmljZVByb3ZpZGVyIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7XG4gIHV0aWxzLFxuICBzZWFyY2hVdGlsc1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBnZXRDdXJyZW50U2l6ZU1vZGUgfSBmcm9tICcuLi91dGlscydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvb3RMYXlvdXRJZCAoKTogc3RyaW5nIHtcbiAgaWYgKHV0aWxzLmdldEN1cnJlbnREaWFsb2dJZCgpKSB7XG4gICAgcmV0dXJuIHV0aWxzLmdldEN1cnJlbnREaWFsb2dSb290TGF5b3V0SWQoKVxuICB9XG4gIHN3aXRjaCAodXRpbHMuZ2V0QWN0aXZlUGFnZVBhcnQoKSkge1xuICAgIGNhc2UgUGFnZVBhcnQuSGVhZGVyOlxuICAgICAgcmV0dXJuIHV0aWxzLmdldEhlYWRlclJvb3RMYXlvdXRJZCgpXG4gICAgY2FzZSBQYWdlUGFydC5Gb290ZXI6XG4gICAgICByZXR1cm4gdXRpbHMuZ2V0Rm9vdGVyUm9vdExheW91dElkKClcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHV0aWxzLmdldEN1cnJlbnRQYWdlUm9vdExheW91dElkKClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGF5b3V0QW5kU2VsZWN0aW9uIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBzZWxlY3Rpb246IExheW91dEluZm8pIHtcbiAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuICAgIGJ1aWxkZXJBcHBTeW5jLnB1Ymxpc2hDaGFuZ2VTZWxlY3Rpb25Ub0FwcChzZWxlY3Rpb24pXG4gIH0gZWxzZSB7XG4gICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnLCBzZWxlY3Rpb24pKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwZW5kTGF5b3V0SXRlbSAobGF5b3V0SW5mbzogTGF5b3V0SW5mbykge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBhcHBDb25maWdBY3Rpb24uc2V0TGF5b3V0SXRlbVRvUGVuZGluZyhsYXlvdXRJbmZvLCB0cnVlKVxuXG4gIHVwZGF0ZUxheW91dEFuZFNlbGVjdGlvbihhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCBudWxsKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZHVwbGljYXRlTGF5b3V0SXRlbSAobGF5b3V0SW5mbzogTGF5b3V0SW5mbykge1xuICBjb25zdCB7IGxheW91dElkIH0gPSBsYXlvdXRJbmZvXG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IG5ld0l0ZW1JZCA9IGFwcENvbmZpZ0FjdGlvbi5kdXBsaWNhdGVMYXlvdXRJdGVtSW5TYW1lTGF5b3V0KGxheW91dEluZm8pXG4gIGNvbnN0IG5ld0xheW91dEluZm8gPSB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IG5ld0l0ZW1JZCB9XG5cbiAgdXBkYXRlTGF5b3V0QW5kU2VsZWN0aW9uKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIG5ld0xheW91dEluZm8pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZUxheW91dEl0ZW0gKGNsaXBib2FyZEl0ZW06IENsaXBib2FyZEl0ZW0sIHRhcmdldExheW91dElkOiBzdHJpbmcpIHtcbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBjbGlwYm9hcmRJdGVtXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICBpZiAoIWxheW91dEl0ZW0pIHtcbiAgICByZXR1cm5cbiAgfVxuICAvLyBUT0RPIG1vdmUgaXQgdG8gdGhlIGxheW91dCBzZXJ2aWNlXG4gIGNvbnN0IGxheW91dFR5cGUgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbdGFyZ2V0TGF5b3V0SWRdLnR5cGVcbiAgaWYgKGxheW91dFR5cGUgPT09IExheW91dFR5cGUuRmxvd0xheW91dCkge1xuICAgIHBhc3RlVG9GbG93TGF5b3V0KGNsaXBib2FyZEl0ZW0sIHRhcmdldExheW91dElkKVxuICB9IGVsc2UgaWYgKGxheW91dFR5cGUgPT09IExheW91dFR5cGUuRml4ZWRMYXlvdXQpIHtcbiAgICBwYXN0ZVRvRml4ZWRMYXlvdXQoY2xpcGJvYXJkSXRlbSwgdGFyZ2V0TGF5b3V0SWQpXG4gIH0gZWxzZSBpZiAobGF5b3V0VHlwZSA9PT0gTGF5b3V0VHlwZS5HcmlkTGF5b3V0KSB7XG4gICAgY29uc3QgW2FwcENvbmZpZywgbGF5b3V0SW5mb10gPSBwYXN0ZVRvR3JpZExheW91dChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCBjbGlwYm9hcmRJdGVtLCB0YXJnZXRMYXlvdXRJZClcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMubGF5b3V0Q2hhbmdlZChhcHBDb25maWcsIGxheW91dEluZm8pKVxuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoYHVua25vd24gbGF5b3V0IHR5cGU6ICR7bGF5b3V0VHlwZX1gKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZVRvRml4ZWRMYXlvdXQgKGNsaXBib2FyZEl0ZW06IENsaXBib2FyZEl0ZW0sIHRhcmdldExheW91dElkOiBzdHJpbmcsIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QgPSBudWxsKSB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgd2lkdGgsIGhlaWdodCB9ID0gY2xpcGJvYXJkSXRlbVxuICBjb25zdCBvcmlnaW5hbExheW91dEl0ZW0gPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICBjb25zdCBvcmlnaW5hbEJCb3ggPSBvcmlnaW5hbExheW91dEl0ZW0uYmJveFxuXG4gIGNvbnN0IG5ld0l0ZW1JZCA9IGFwcENvbmZpZ0FjdGlvbi5kdXBsaWNhdGVMYXlvdXRJdGVtVG9PdGhlckxheW91dCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSwgdGFyZ2V0TGF5b3V0SWQpXG5cbiAgY29uc3QgbGF5b3V0SW5mbyA9IHsgbGF5b3V0SWQ6IHRhcmdldExheW91dElkLCBsYXlvdXRJdGVtSWQ6IG5ld0l0ZW1JZCB9XG4gIGNvbnN0IHpvb21TY2FsZSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBSdW50aW1lSW5mbz8uem9vbVNjYWxlID8/IDFcblxuICBpZiAoIWNvbnRhaW5lclJlY3QpIHtcbiAgICBjb250YWluZXJSZWN0ID0gZ2V0VmlzaWJsZVdvcmtBcmVhKHRhcmdldExheW91dElkKVxuICB9XG4gIGlmIChjb250YWluZXJSZWN0KSB7XG4gICAgY29uc3QgY29udGFpbmVyV2lkdGggPSBjb250YWluZXJSZWN0LndpZHRoIC8gem9vbVNjYWxlXG4gICAgY29uc3QgY29udGFpbmVySGVpZ2h0ID0gY29udGFpbmVyUmVjdC5oZWlnaHQgLyB6b29tU2NhbGVcbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgIGxheW91dEluZm8sXG4gICAgICAnYmJveCcsXG4gICAgICB1dGlscy5yZXBsYWNlQm91bmRpbmdCb3gob3JpZ2luYWxCQm94LCB7XG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgd2lkdGg6IE1hdGgucm91bmQod2lkdGgpLFxuICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQoaGVpZ2h0KVxuICAgICAgfSBhcyBET01SZWN0LCB7XG4gICAgICAgIHdpZHRoOiBjb250YWluZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBjb250YWluZXJIZWlnaHRcbiAgICAgIH0gYXMgRE9NUmVjdClcbiAgICApXG4gIH1cbiAgYXBwQ29uZmlnQWN0aW9uXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobGF5b3V0SW5mbywgJ3NldHRpbmcudkNlbnRlcicsIHRydWUpXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobGF5b3V0SW5mbywgJ3NldHRpbmcuaENlbnRlcicsIHRydWUpXG4gIGNvbnN0IGJib3ggPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF0uY29udGVudFtsYXlvdXRJbmZvLmxheW91dEl0ZW1JZF0uYmJveFxuICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICBsYXlvdXRJbmZvLFxuICAgICdiYm94JyxcbiAgICBiYm94LnNldCgnbGVmdCcsICc1MCUnKS5zZXQoJ3RvcCcsICc1MCUnKVxuICApXG4gIGFwcENvbmZpZ0FjdGlvbi5hZGp1c3RPcmRlck9mSXRlbShsYXlvdXRJbmZvLCAtMSlcbiAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgbGF5b3V0SW5mbykpXG59XG5cbi8vIFNwbGl0IHRoZSBncmlkIGxheW91dCBhbmQgcGFzdGUgdGhlIGl0ZW0gYXMgdGhlIGxhc3Qgb25lXG5leHBvcnQgZnVuY3Rpb24gcGFzdGVUb0dyaWRMYXlvdXQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGNsaXBib2FyZEl0ZW06IENsaXBib2FyZEl0ZW0sIHRhcmdldExheW91dElkOiBzdHJpbmcpOiBbSU1BcHBDb25maWcsIExheW91dEluZm9dIHtcbiAgbGV0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gY2xpcGJvYXJkSXRlbVxuXG4gIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzW3RhcmdldExheW91dElkXVxuICBjb25zdCByb290SXRlbUlkID0gbGF5b3V0LmNvbnRlbnQ/LltsYXlvdXQuc2V0dGluZz8ucm9vdEl0ZW1dID8gbGF5b3V0LnNldHRpbmcucm9vdEl0ZW0gOiBudWxsXG5cbiAgY29uc3QgbmV3SXRlbUlkID0gYXBwQ29uZmlnQWN0aW9uLmR1cGxpY2F0ZUxheW91dEl0ZW1Ub090aGVyTGF5b3V0KHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9LCB0YXJnZXRMYXlvdXRJZClcbiAgY29uc3QgbmV3TGF5b3V0SW5mbyA9IHsgbGF5b3V0SWQ6IHRhcmdldExheW91dElkLCBsYXlvdXRJdGVtSWQ6IG5ld0l0ZW1JZCB9XG5cbiAgaWYgKCFyb290SXRlbUlkKSB7XG4gICAgYXBwQ29uZmlnQWN0aW9uXG4gICAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShuZXdMYXlvdXRJbmZvLCAnZ3JpZFR5cGUnLCBHcmlkSXRlbVR5cGUuUGxhaW4pXG4gICAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShuZXdMYXlvdXRJbmZvLCAnYmJveC53aWR0aCcsIDEwMClcbiAgICAgIC5lZGl0TGF5b3V0UHJvcGVydHkodGFyZ2V0TGF5b3V0SWQsICdzZXR0aW5nLnJvb3RJdGVtJywgbmV3SXRlbUlkKVxuICAgIHJldHVybiBbYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgbmV3TGF5b3V0SW5mb11cbiAgfVxuXG4gIGNvbnN0IHJvb3RMYXlvdXRJbmZvID0geyBsYXlvdXRJZDogdGFyZ2V0TGF5b3V0SWQsIGxheW91dEl0ZW1JZDogcm9vdEl0ZW1JZCB9XG4gIGNvbnN0IHJvb3RMYXlvdXRJdGVtID0gc2VhcmNoVXRpbHMuZmluZExheW91dEl0ZW0oYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgcm9vdExheW91dEluZm8pIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gIGNvbnN0IHJvb3RUeXBlID0gcm9vdExheW91dEl0ZW0uZ3JpZFR5cGVcblxuICAvLyBjcmVhdGUgYSBuZXcgZ3JpZCByb3dcbiAgY29uc3Qgc2VydmljZSA9IExheW91dFNlcnZpY2VQcm92aWRlci5nZXRTZXJ2aWNlKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIHRhcmdldExheW91dElkKVxuICBjb25zdCByZXN1bHQgPSBzZXJ2aWNlLmNyZWF0ZUJsYW5rSXRlbShhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCB0YXJnZXRMYXlvdXRJZClcbiAgYXBwQ29uZmlnID0gcmVzdWx0WzBdXG4gIGNvbnN0IHJvd0l0ZW1JZCA9IHJlc3VsdFsxXVxuICBjb25zdCByb3dMYXlvdXRJbmZvID0geyBsYXlvdXRJZDogdGFyZ2V0TGF5b3V0SWQsIGxheW91dEl0ZW1JZDogcm93SXRlbUlkIH1cblxuICBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuXG4gIGFwcENvbmZpZ0FjdGlvblxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHJvd0xheW91dEluZm8sICdncmlkVHlwZScsIHJvb3RUeXBlICE9PSBHcmlkSXRlbVR5cGUuUm93ID8gR3JpZEl0ZW1UeXBlLlJvdyA6IEdyaWRJdGVtVHlwZS5Db2x1bW4pXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkocm93TGF5b3V0SW5mbywgJ2NoaWxkcmVuJywgW3Jvb3RJdGVtSWQsIG5ld0l0ZW1JZF0pXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkocm93TGF5b3V0SW5mbywgJ2Jib3gud2lkdGgnLCAxMDApXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkocm9vdExheW91dEluZm8sICdiYm94LndpZHRoJywgNTApXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkocm9vdExheW91dEluZm8sICdwYXJlbnQnLCByb3dJdGVtSWQpXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobmV3TGF5b3V0SW5mbywgJ2Jib3gud2lkdGgnLCA1MClcbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShuZXdMYXlvdXRJbmZvLCAncGFyZW50Jywgcm93SXRlbUlkKVxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KG5ld0xheW91dEluZm8sICdncmlkVHlwZScsIEdyaWRJdGVtVHlwZS5QbGFpbilcbiAgICAuZWRpdExheW91dFByb3BlcnR5KHRhcmdldExheW91dElkLCAnc2V0dGluZy5yb290SXRlbScsIHJvd0l0ZW1JZClcblxuICByZXR1cm4gW2FwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIG5ld0xheW91dEluZm9dXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXN0ZVRvRmxvd0xheW91dCAoY2xpcGJvYXJkSXRlbTogQ2xpcGJvYXJkSXRlbSwgdGFyZ2V0TGF5b3V0SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuXG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgd2lkdGgsIGhlaWdodCB9ID0gY2xpcGJvYXJkSXRlbVxuXG4gIGNvbnN0IG5ld0l0ZW1JZCA9IGFwcENvbmZpZ0FjdGlvbi5kdXBsaWNhdGVMYXlvdXRJdGVtVG9PdGhlckxheW91dCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSwgdGFyZ2V0TGF5b3V0SWQpXG4gIGNvbnN0IGxheW91dEluZm8gPSB7IGxheW91dElkOiB0YXJnZXRMYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBuZXdJdGVtSWQgfVxuICBjb25zdCB6b29tU2NhbGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwUnVudGltZUluZm8/Lnpvb21TY2FsZSA/PyAxXG4gIGFwcENvbmZpZ0FjdGlvbi5hZGp1c3RPcmRlck9mSXRlbShsYXlvdXRJbmZvLCAtMSlcblxuICBjb25zdCB2aXNpYmxlSW5mbyA9IGdldEZpcnN0VmlzaWJsZUJsb2NrKHRhcmdldExheW91dElkLCB3aWR0aCwgem9vbVNjYWxlKVxuICBpZiAodmlzaWJsZUluZm8uaW5zZXJ0SW5kZXggPT09IC0xKSB7XG4gICAgdmlzaWJsZUluZm8uaW5zZXJ0SW5kZXggPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbdGFyZ2V0TGF5b3V0SWRdLm9yZGVyPy5sZW5ndGggfHwgMFxuICB9XG4gIC8vIERvIG5vdCBjcmVhdGUgZXh0cmEgYmxvY2sgaWYgdGhlIGRyYWdnaW5nSXRlbSBpcyBmcm9tIGEgc2Nyb2xsaW5nIHBhZ2VcbiAgY29uc3QgZnJvbUxheW91dFR5cGUgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLnR5cGVcbiAgaWYgKGZyb21MYXlvdXRUeXBlID09PSBMYXlvdXRUeXBlLkZsb3dMYXlvdXQpIHtcbiAgICB1cGRhdGVMYXlvdXRBbmRTZWxlY3Rpb24oYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgbGF5b3V0SW5mbylcbiAgfSBlbHNlIHtcbiAgICBhZGRCbG9ja1RvRmxvd0xheW91dChcbiAgICAgIHsgbGF5b3V0SW5mbyB9IGFzIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgICAgdGFyZ2V0TGF5b3V0SWQsXG4gICAgICB7IGxlZnQ6IDAsIHRvcDogMCwgd2lkdGgsIGhlaWdodCB9IGFzIENsaWVudFJlY3QsXG4gICAgICB7IGxlZnQ6IDAsIHRvcDogMCwgd2lkdGgsIGhlaWdodCB9IGFzIENsaWVudFJlY3QsXG4gICAgICB2aXNpYmxlSW5mby5jb2xTcGFuLFxuICAgICAgdmlzaWJsZUluZm8uaW5zZXJ0SW5kZXgsXG4gICAgICBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gICAgKS5jYXRjaChlcnIgPT4geyBjb25zb2xlLmVycm9yKGVycikgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRWaXNpYmxlV29ya0FyZWEgKGxheW91dElkPzogc3RyaW5nKTogQ2xpZW50UmVjdCB7XG4gIGNvbnN0IHdvcmthcmVhID0gd2luZG93LnBhcmVudC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbZGF0YS1sYXlvdXRpZD1cInJpZ2h0LXNpZGViYXItbGVmdC1sYXlvdXRcIl0nKVxuICBjb25zdCBkZXZpY2VGcmFtZTogSFRNTEZyYW1lRWxlbWVudCA9IHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW25hbWU9XCJfYXBwV2luZG93XCJdJylcbiAgbGV0IGxheW91dERpdlxuICBsZXQgbGVmdFxuICBsZXQgdG9wXG4gIGxldCB3aWR0aFxuICBsZXQgaGVpZ2h0XG5cbiAgaWYgKHdvcmthcmVhICYmIGRldmljZUZyYW1lKSB7XG4gICAgY29uc3Qgd29ya2FyZWFSZWN0ID0gd29ya2FyZWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCBmcmFtZVJlY3QgPSBkZXZpY2VGcmFtZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGxlZnQgPSBmcmFtZVJlY3QubGVmdFxuICAgIHRvcCA9IGZyYW1lUmVjdC50b3BcbiAgICB3aWR0aCA9IGZyYW1lUmVjdC53aWR0aFxuICAgIGhlaWdodCA9IGZyYW1lUmVjdC5oZWlnaHRcbiAgICBpZiAobGF5b3V0SWQpIHtcbiAgICAgIGNvbnN0IGZyYW1lRG9jID0gZGV2aWNlRnJhbWUuY29udGVudERvY3VtZW50IHx8IGRldmljZUZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnRcbiAgICAgIGxheW91dERpdiA9IGZyYW1lRG9jLnF1ZXJ5U2VsZWN0b3IoYGRpdi5sYXlvdXRbZGF0YS1sYXlvdXRpZD1cIiR7bGF5b3V0SWR9XCJdYClcbiAgICAgIGlmIChsYXlvdXREaXYpIHtcbiAgICAgICAgY29uc3QgbGF5b3V0UmVjdCA9IGxheW91dERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBsZWZ0ICs9IGxheW91dFJlY3QubGVmdFxuICAgICAgICB0b3AgKz0gbGF5b3V0UmVjdC50b3BcbiAgICAgICAgd2lkdGggPSBsYXlvdXRSZWN0LndpZHRoXG4gICAgICAgIGhlaWdodCA9IGxheW91dFJlY3QuaGVpZ2h0XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmwgPSBsZWZ0ID49IHdvcmthcmVhUmVjdC5sZWZ0ID8gMCA6IHdvcmthcmVhUmVjdC5sZWZ0IC0gbGVmdFxuICAgIGNvbnN0IHZ0ID0gdG9wID49IHdvcmthcmVhUmVjdC50b3AgPyAwIDogd29ya2FyZWFSZWN0LnRvcCAtIHRvcFxuICAgIC8vIGNvbnN0IHZ3ID0gd29ya2FyZWFSZWN0LmxlZnQgKyB3b3JrYXJlYVJlY3Qud2lkdGggPj0gbGVmdCArIHdpZHRoID9cbiAgICAvLyAgIE1hdGgubWluKHdpZHRoLCBsZWZ0ICsgd2lkdGggLSB3b3JrYXJlYVJlY3QubGVmdCkgOlxuICAgIC8vICAgTWF0aC5taW4od29ya2FyZWFSZWN0LndpZHRoLCB3b3JrYXJlYVJlY3QubGVmdCArIHdvcmthcmVhUmVjdC53aWR0aCAtIGxlZnQpO1xuICAgIC8vIGNvbnN0IHZoID0gd29ya2FyZWFSZWN0LnRvcCArIHdvcmthcmVhUmVjdC5oZWlnaHQgPj0gdG9wICsgaGVpZ2h0ID9cbiAgICAvLyAgIE1hdGgubWluKGhlaWdodCwgdG9wICsgaGVpZ2h0IC0gd29ya2FyZWFSZWN0LnRvcCkgOlxuICAgIC8vICAgTWF0aC5taW4od29ya2FyZWFSZWN0LmhlaWdodCwgd29ya2FyZWFSZWN0LnRvcCArIHdvcmthcmVhUmVjdC5oZWlnaHQgLSB0b3ApO1xuXG4gICAgcmV0dXJuIHsgbGVmdDogdmwsIHRvcDogdnQsIHdpZHRoLCBoZWlnaHQgfSBhcyBDbGllbnRSZWN0XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuZnVuY3Rpb24gZ2V0Rmlyc3RWaXNpYmxlQmxvY2sgKGxheW91dElkOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIHpvb21TY2FsZTogbnVtYmVyKTogeyBpbnNlcnRJbmRleDogbnVtYmVyLCBjb2xTcGFuOiBudW1iZXIgfSB7XG4gIGNvbnN0IGRldmljZUZyYW1lID0gd2luZG93LnBhcmVudC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbbmFtZT1cIl9hcHBXaW5kb3dcIl0nKVxuICBjb25zdCBjaGlsZE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgZGl2LmZsb3ctbGF5b3V0W2RhdGEtbGF5b3V0aWQ9XCIke2xheW91dElkfVwiXSA+IGRpdi50cmFpbC1jb250YWluZXIgPiBkaXYuYnVpbGRlci1sYXlvdXQtaXRlbWApXG4gIGxldCBpbmRleCA9IC0xXG4gIGxldCBjb2xTcGFuID0gMlxuXG4gIGlmIChkZXZpY2VGcmFtZSAmJiBjaGlsZE5vZGVzKSB7XG4gICAgY29uc3QgZnJhbWVSZWN0ID0gZGV2aWNlRnJhbWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjaGlsZE5vZGVzLmZvckVhY2goKG5vZGUsIGkpID0+IHtcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgY29uc3QgaXRlbVJlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIGlmIChpdGVtUmVjdC50b3AgKyBmcmFtZVJlY3QudG9wID49IDAgfHwgaXRlbVJlY3QudG9wICsgaXRlbVJlY3QuaGVpZ2h0ICsgZnJhbWVSZWN0LnRvcCA+PSAwKSB7XG4gICAgICAgICAgaW5kZXggPSBpICsgMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBjb2xTcGFuID0gTWF0aC5yb3VuZCh3aWR0aCAqIDEyICogem9vbVNjYWxlIC8gZnJhbWVSZWN0LndpZHRoKVxuICB9XG4gIHJldHVybiB7XG4gICAgY29sU3BhbixcbiAgICBpbnNlcnRJbmRleDogaW5kZXhcbiAgfVxufVxuXG4vKipcbiAqIEFkZCB3aWRnZXQgb3Igc2VjdGlvbiB0byBhIGxheW91dCwgZWl0aGVyIGRyYWdnaW5nIGZyb20gdGhlIHdpZGdldCBsaXN0IG9yIGRyYWdnaW5nIGFuIGV4aXN0aW5nIG9uZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEl0ZW1Ub0xheW91dCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGl0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICB0YXJnZXRMYXlvdXRJZDogc3RyaW5nXG4pOiBQcm9taXNlPHsgbGF5b3V0SW5mbzogTGF5b3V0SW5mbywgdXBkYXRlZEFwcENvbmZpZzogSU1BcHBDb25maWcgfT4ge1xuICBjb25zdCBsYXlvdXRJbmZvID0gaXRlbS5sYXlvdXRJbmZvXG5cbiAgaWYgKGl0ZW0uaWQpIHtcbiAgICAvLyBpdCBtdXN0IGJlIGEgcGVuZGluZyBpdGVtXG4gICAgcmV0dXJuIGF3YWl0IGFkZFBlbmRpbmdJdGVtVG9MYXlvdXQoYXBwQ29uZmlnLCBpdGVtLCB0YXJnZXRMYXlvdXRJZClcbiAgfVxuXG4gIC8vIGRyYWcgYW5kIGRyb3AgYW4gZXhpc3RpbmcgbGF5b3V0IGl0ZW0gaW4gdGhlIHNhbWUgcGFnZVxuICBpZiAobGF5b3V0SW5mbyAmJiBsYXlvdXRJbmZvLmxheW91dElkICYmIGxheW91dEluZm8ubGF5b3V0SXRlbUlkKSB7XG4gICAgcmV0dXJuIGF3YWl0IG1vdmVMYXlvdXRJdGVtKGFwcENvbmZpZywgaXRlbSwgdGFyZ2V0TGF5b3V0SWQpXG4gIH1cblxuICBpZiAoaXRlbS5pdGVtVHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbikge1xuICAgIHJldHVybiBhd2FpdCBhZGROZXdTZWN0aW9uVG9MYXlvdXQoYXBwQ29uZmlnLCB0YXJnZXRMYXlvdXRJZClcbiAgfVxuXG4gIGlmIChpdGVtLnVyaSB8fCBpdGVtLml0ZW1JZCkge1xuICAgIHJldHVybiBhd2FpdCBhZGROZXdXaWRnZXRUb0xheW91dChhcHBDb25maWcsIGl0ZW0sIHRhcmdldExheW91dElkKVxuICB9XG5cbiAgLy8gd2lkZ2V0IHBsYWNlaG9sZGVyXG4gIHJldHVybiBhd2FpdCBhZGRQbGFjZWhvbGRlclRvTGF5b3V0KGFwcENvbmZpZywgdGFyZ2V0TGF5b3V0SWQpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFBlbmRpbmdJdGVtVG9MYXlvdXQgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgdGFyZ2V0TGF5b3V0SWQ6IHN0cmluZ1xuKTogUHJvbWlzZTx7IGxheW91dEluZm86IExheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWc6IElNQXBwQ29uZmlnIH0+IHtcbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKGFwcENvbmZpZylcbiAgbGV0IGZyb21TaXplTW9kZVxuICBjb25zdCBjdXJyZW50U2l6ZU1vZGUgPSB1dGlscy5nZXRDdXJyZW50U2l6ZU1vZGUoKVxuICBpZiAoaXRlbS5pc0Zyb21DdXJyZW50U2l6ZU1vZGUpIHtcbiAgICBmcm9tU2l6ZU1vZGUgPSBjdXJyZW50U2l6ZU1vZGVcbiAgfSBlbHNlIHtcbiAgICBmcm9tU2l6ZU1vZGUgPSBzZWFyY2hVdGlscy5nZXRCcm93c2VyU2l6ZU1vZGVCeUxheW91dElkKGFwcENvbmZpZywgaXRlbS5sYXlvdXRJbmZvLmxheW91dElkKVxuICB9XG5cbiAgY29uc3Qgb3JpZ2luTGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIGl0ZW0ubGF5b3V0SW5mbylcbiAgY29uc3QgbmV3TGF5b3V0SW5mbyA9IGFwcENvbmZpZ0FjdGlvbi5tb3ZlTGF5b3V0SXRlbShpdGVtLmxheW91dEluZm8sIHRhcmdldExheW91dElkLCBmcm9tU2l6ZU1vZGUsIGN1cnJlbnRTaXplTW9kZSlcbiAgaWYgKG9yaWdpbkxheW91dEl0ZW0uc2V0dGluZz8ubG9ja1BhcmVudCkge1xuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KG5ld0xheW91dEluZm8sICdzZXR0aW5nLmxvY2tQYXJlbnQnLCB0cnVlKVxuICB9XG5cbiAgcmV0dXJuIGF3YWl0IFByb21pc2UucmVzb2x2ZSh7XG4gICAgbGF5b3V0SW5mbzogbmV3TGF5b3V0SW5mbyxcbiAgICB1cGRhdGVkQXBwQ29uZmlnOiBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIG1vdmVMYXlvdXRJdGVtIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgaXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIHRhcmdldExheW91dElkOiBzdHJpbmdcbik6IFByb21pc2U8eyBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCB1cGRhdGVkQXBwQ29uZmlnOiBJTUFwcENvbmZpZyB9PiB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG5cbiAgY29uc3QgY3VycmVudFNpemVNb2RlID0gdXRpbHMuZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgY29uc3QgbmV3TGF5b3V0SW5mbyA9IGFwcENvbmZpZ0FjdGlvbi5tb3ZlTGF5b3V0SXRlbShpdGVtLmxheW91dEluZm8sIHRhcmdldExheW91dElkLCBjdXJyZW50U2l6ZU1vZGUsIGN1cnJlbnRTaXplTW9kZSlcblxuICBjb25zdCBwV2lkZ2V0SWQgPSBzZWFyY2hVdGlscy5nZXRXaWRnZXRJZFRoYXRVc2VUaGVMYXlvdXRJZChhcHBDb25maWcsIHRhcmdldExheW91dElkKVxuICBpZiAocFdpZGdldElkICYmIHNob3VsZExvY2tQYXJlbnQoYXBwQ29uZmlnLndpZGdldHNbcFdpZGdldElkXSkpIHtcbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShuZXdMYXlvdXRJbmZvLCAnc2V0dGluZy5sb2NrUGFyZW50JywgdHJ1ZSlcbiAgfVxuXG4gIHJldHVybiB7IGxheW91dEluZm86IG5ld0xheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWc6IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGROZXdTZWN0aW9uVG9MYXlvdXQgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICB0YXJnZXRMYXlvdXRJZDogc3RyaW5nXG4pOiBQcm9taXNlPHsgbGF5b3V0SW5mbzogTGF5b3V0SW5mbywgdXBkYXRlZEFwcENvbmZpZzogSU1BcHBDb25maWcgfT4ge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuXG4gIGNvbnN0IG5ld0l0ZW1JZCA9IGFwcENvbmZpZ0FjdGlvbi5hZGROZXdTZWN0aW9uVG9MYXlvdXQodGFyZ2V0TGF5b3V0SWQpXG4gIGNvbnN0IG5ld0xheW91dEluZm8gPSB7IGxheW91dElkOiB0YXJnZXRMYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBuZXdJdGVtSWQgfVxuXG4gIHJldHVybiB7IGxheW91dEluZm86IG5ld0xheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWc6IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGROZXdXaWRnZXRUb0xheW91dCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGl0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICB0YXJnZXRMYXlvdXRJZDogc3RyaW5nXG4pOiBQcm9taXNlPHsgbGF5b3V0SW5mbzogTGF5b3V0SW5mbywgdXBkYXRlZEFwcENvbmZpZzogSU1BcHBDb25maWcgfT4ge1xuICBhcHBCdWlsZGVyU3luYy5wdWJsaXNoSXNCdXN5VG9CdWlsZGVyKHRydWUpXG5cbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKGFwcENvbmZpZylcbiAgY29uc3QgbmV3SXRlbUlkID0gYXdhaXQgYXBwQ29uZmlnQWN0aW9uLmFkZE5ld1dpZGdldFRvTGF5b3V0KHRhcmdldExheW91dElkLCB7XG4gICAgdXJpOiBpdGVtLnVyaSxcbiAgICBpdGVtSWQ6IGl0ZW0uaXRlbUlkXG4gIH0pXG4gIGNvbnN0IG5ld0xheW91dEluZm8gPSB7IGxheW91dElkOiB0YXJnZXRMYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBuZXdJdGVtSWQgfVxuXG4gIGNvbnN0IHBXaWRnZXRJZCA9IHNlYXJjaFV0aWxzLmdldFdpZGdldElkVGhhdFVzZVRoZUxheW91dElkKGFwcENvbmZpZywgdGFyZ2V0TGF5b3V0SWQpXG4gIGlmIChwV2lkZ2V0SWQgJiYgc2hvdWxkTG9ja1BhcmVudChhcHBDb25maWcud2lkZ2V0c1twV2lkZ2V0SWRdKSkge1xuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KG5ld0xheW91dEluZm8sICdzZXR0aW5nLmxvY2tQYXJlbnQnLCB0cnVlKVxuICB9XG4gIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hJc0J1c3lUb0J1aWxkZXIoZmFsc2UpXG4gIHJldHVybiB7XG4gICAgbGF5b3V0SW5mbzogbmV3TGF5b3V0SW5mbyxcbiAgICB1cGRhdGVkQXBwQ29uZmlnOiBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkUGxhY2Vob2xkZXJUb0xheW91dCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIHRhcmdldExheW91dElkOiBzdHJpbmdcbik6IFByb21pc2U8eyBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCB1cGRhdGVkQXBwQ29uZmlnOiBJTUFwcENvbmZpZyB9PiB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gIGNvbnN0IG5ld0l0ZW1JZCA9IGFwcENvbmZpZ0FjdGlvbi5hZGRQbGFjZWhvbGRlclRvTGF5b3V0KHRhcmdldExheW91dElkKVxuICBjb25zdCBuZXdMYXlvdXRJbmZvID0geyBsYXlvdXRJZDogdGFyZ2V0TGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbmV3SXRlbUlkIH1cblxuICBjb25zdCBwV2lkZ2V0SWQgPSBzZWFyY2hVdGlscy5nZXRXaWRnZXRJZFRoYXRVc2VUaGVMYXlvdXRJZChhcHBDb25maWcsIHRhcmdldExheW91dElkKVxuICBpZiAocFdpZGdldElkICYmIHNob3VsZExvY2tQYXJlbnQoYXBwQ29uZmlnLndpZGdldHNbcFdpZGdldElkXSkpIHtcbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShuZXdMYXlvdXRJbmZvLCAnc2V0dGluZy5sb2NrUGFyZW50JywgdHJ1ZSlcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGF5b3V0SW5mbzogbmV3TGF5b3V0SW5mbyxcbiAgICB1cGRhdGVkQXBwQ29uZmlnOiBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvdWxkTG9ja1BhcmVudCAod2lkZ2V0SnNvbjogSU1XaWRnZXRKc29uKTogYm9vbGVhbiB7XG4gIGNvbnN0IHR5cGUgPSB3aWRnZXRKc29uPy5tYW5pZmVzdD8ud2lkZ2V0VHlwZVxuICBjb25zdCBoYXNFbWJlZGRlZExheW91dCA9IHdpZGdldEpzb24/Lm1hbmlmZXN0Py5wcm9wZXJ0aWVzPy5oYXNFbWJlZGRlZExheW91dCA/PyBmYWxzZVxuICBjb25zdCBsb2NrQ2hpbGRyZW4gPSB3aWRnZXRKc29uPy5tYW5pZmVzdD8ucHJvcGVydGllcz8ubG9ja0NoaWxkcmVuID8/IGZhbHNlXG4gIHJldHVybiB0eXBlICE9PSBXaWRnZXRUeXBlLkxheW91dCAmJiBoYXNFbWJlZGRlZExheW91dCAmJiBsb2NrQ2hpbGRyZW5cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1lcmdlV2lkZ2V0c0ludG9Db2x1bW4gKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LFxuICBpdGVtUmVjdDogQ2xpZW50UmVjdCxcbiAgcmVmTGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgc2lkZTogJ3RvcCcgfCAnYm90dG9tJ1xuKTogUHJvbWlzZTx7IGxheW91dEluZm86IExheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWc6IElNQXBwQ29uZmlnIH0+IHtcbiAgbGV0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tyZWZMYXlvdXRJbmZvLmxheW91dElkXS5jb250ZW50W3JlZkxheW91dEluZm8ubGF5b3V0SXRlbUlkXVxuICBjb25zdCBzaXplTW9kZSA9IGdldEN1cnJlbnRTaXplTW9kZSgpXG4gIGNvbnN0IGNsZWFuUmVmTGF5b3V0SXRlbSA9IGxheW91dEl0ZW1cbiAgICAud2l0aG91dCgnaWQnKVxuICAgIC53aXRob3V0KCd0eXBlJylcbiAgICAud2l0aG91dCgnd2lkZ2V0SWQnKVxuICAgIC53aXRob3V0KCdzZWN0aW9uSWQnKVxuICAgIC53aXRob3V0KCdzY3JlZW5Hcm91cElkJylcblxuICAvLyAxLiBjcmVhdGUgYSBjb2x1bW4gd2lkZ2V0XG4gIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hJc0J1c3lUb0J1aWxkZXIodHJ1ZSlcbiAgY29uc3QgY29sdW1uSnNvbiA9IGF3YWl0IGFwcENvbmZpZ0FjdGlvbi5jcmVhdGVXaWRnZXQoeyB1cmk6ICd3aWRnZXRzL2xheW91dC9jb2x1bW4vJyB9IGFzIFdpZGdldEpzb24pXG4gIGNvbnN0IHJvd0xheW91dFNlcnZpY2UgPSBMYXlvdXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW5zdGFuY2UoKS5nZXRTZXJ2aWNlQnlUeXBlKExheW91dFR5cGUuUm93TGF5b3V0KVxuICAvLyBhIGJsYW5rIGxheW91dCBpdGVtIHRvIHByZXZlbnQgdGhlIGJsb2NrIHRvIGJlIGRlc3Ryb3llZFxuICBjb25zdCByZXN1bHQgPSByb3dMYXlvdXRTZXJ2aWNlLmNyZWF0ZUJsYW5rSXRlbShhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCByZWZMYXlvdXRJbmZvLmxheW91dElkKVxuICBsZXQgdXBkYXRlZEFwcENvbmZpZyA9IHJlc3VsdFswXVxuICBjb25zdCBibGFua0l0ZW1JZCA9IHJlc3VsdFsxXVxuICBjb25zdCBvcmlnaW5PcmRlciA9IHVwZGF0ZWRBcHBDb25maWcubGF5b3V0c1tyZWZMYXlvdXRJbmZvLmxheW91dElkXS5vcmRlclxuICBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24odXBkYXRlZEFwcENvbmZpZylcbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShyZWZMYXlvdXRJbmZvLmxheW91dElkLCAnb3JkZXInLCBbXS5jb25jYXQob3JpZ2luT3JkZXIsIGJsYW5rSXRlbUlkKSlcblxuICAvLyAyLiBNb3ZlIHRoZSB0b3cgd2lkZ2V0cyB0byB0aGUgbGF5b3V0IG9mIGNvbHVtblxuICBjb25zdCBsYXlvdXROYW1lID0gT2JqZWN0LmtleXMoY29sdW1uSnNvbi5sYXlvdXRzKVswXVxuICBjb25zdCBzaXplbW9kZUxheW91dHMgPSBjb2x1bW5Kc29uLmxheW91dHNbbGF5b3V0TmFtZV1cbiAgY29uc3QgZW1iZWRMYXlvdXRJZCA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJZChcbiAgICBzaXplbW9kZUxheW91dHMsXG4gICAgc2l6ZU1vZGUsXG4gICAgYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZy5tYWluU2l6ZU1vZGVcbiAgKVxuICBjb25zdCBsYXlvdXRTZXJ2aWNlID0gTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkuZ2V0U2VydmljZUJ5VHlwZShMYXlvdXRUeXBlLkNvbHVtbkxheW91dClcbiAgY29uc3QgcmVmTGF5b3V0SW5mbzIgPSBhcHBDb25maWdBY3Rpb24ubW92ZUxheW91dEl0ZW0ocmVmTGF5b3V0SW5mbywgZW1iZWRMYXlvdXRJZCwgc2l6ZU1vZGUsIHNpemVNb2RlKVxuICB1cGRhdGVkQXBwQ29uZmlnID0gbGF5b3V0U2VydmljZS5wcm9jZXNzQWZ0ZXJJdGVtQWRkZWQoXG4gICAgYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZyxcbiAgICBkcmFnZ2luZ0l0ZW0sXG4gICAgcmVmTGF5b3V0SW5mbzIsXG4gICAgbnVsbCxcbiAgICBjb250YWluZXJSZWN0LFxuICAgIGl0ZW1SZWN0LFxuICAgIDBcbiAgKVxuICBjb25zdCBhZGRSZXN1bHQgPSBhd2FpdCBhZGRJdGVtVG9MYXlvdXQodXBkYXRlZEFwcENvbmZpZywgZHJhZ2dpbmdJdGVtLCBlbWJlZExheW91dElkKVxuICB1cGRhdGVkQXBwQ29uZmlnID0gbGF5b3V0U2VydmljZS5wcm9jZXNzQWZ0ZXJJdGVtQWRkZWQoXG4gICAgYWRkUmVzdWx0LnVwZGF0ZWRBcHBDb25maWcsXG4gICAgZHJhZ2dpbmdJdGVtLFxuICAgIGFkZFJlc3VsdC5sYXlvdXRJbmZvLFxuICAgIG51bGwsXG4gICAgY29udGFpbmVyUmVjdCxcbiAgICBpdGVtUmVjdCxcbiAgICBzaWRlID09PSAndG9wJyA/IDAgOiAxXG4gIClcblxuICAvLyAzLiB1cGRhdGUgdGhlIGNvbHVtbiBsYXlvdXQgaXRlbVxuICBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24odXBkYXRlZEFwcENvbmZpZylcbiAgYXBwQ29uZmlnQWN0aW9uXG4gICAgLmVkaXRMYXlvdXRQcm9wZXJ0eShyZWZMYXlvdXRJbmZvLmxheW91dElkLCBgY29udGVudC4ke3JlZkxheW91dEluZm8ubGF5b3V0SXRlbUlkfWAsIGNsZWFuUmVmTGF5b3V0SXRlbSlcbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShyZWZMYXlvdXRJbmZvLCAnaWQnLCByZWZMYXlvdXRJbmZvLmxheW91dEl0ZW1JZClcbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShyZWZMYXlvdXRJbmZvLCAndHlwZScsIExheW91dEl0ZW1UeXBlLldpZGdldClcbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShyZWZMYXlvdXRJbmZvLCAnd2lkZ2V0SWQnLCBjb2x1bW5Kc29uLmlkKVxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHJlZkxheW91dEluZm8yLCAnYmJveC5oZWlnaHQnLCBjbGVhblJlZkxheW91dEl0ZW0uYmJveC5oZWlnaHQpXG4gICAgLmVkaXRXaWRnZXRQcm9wZXJ0eShjb2x1bW5Kc29uLmlkLCBgcGFyZW50LiR7c2l6ZU1vZGV9YCwgW3JlZkxheW91dEluZm9dKVxuXG4gIC8vIDQuIGVubGFyZ2UgdGhlIGhlaWdodCB0byBob2xkIG5ldyB3aWRnZXRcbiAgbGV0IGJib3ggPSBjbGVhblJlZkxheW91dEl0ZW0uYmJveFxuICAvLyAyMCBpcyB0aGUgZXh0cmEgc2l6ZSBmb3IgZ2FwIGFuZCBwYWRkaW5nXG4gIGNvbnN0IHVwZGF0ZWRIZWlnaHQgPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoYmJveC5oZWlnaHQpICsgaXRlbVJlY3QuaGVpZ2h0ICsgMjApXG4gIGJib3ggPSBiYm94LnNldCgnaGVpZ2h0JywgYCR7dXBkYXRlZEhlaWdodH1weGApXG4gIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHJlZkxheW91dEluZm8sICdiYm94JywgYmJveClcblxuICAvLyA1LiByZW1vdmUgdGhlIHRlbXAgbGF5b3V0IGl0ZW1cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShcbiAgICByZWZMYXlvdXRJbmZvLmxheW91dElkLFxuICAgICdjb250ZW50JyxcbiAgICBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbcmVmTGF5b3V0SW5mby5sYXlvdXRJZF0uY29udGVudC53aXRob3V0KGJsYW5rSXRlbUlkKVxuICApXG4gIGlmIChkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbz8ubGF5b3V0SWQgPT09IHJlZkxheW91dEluZm8ubGF5b3V0SWQpIHtcbiAgICAvLyBleGNsdWRlIHRoZSBkcmFnZ2luZyBpdGVtXG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShcbiAgICAgIHJlZkxheW91dEluZm8ubGF5b3V0SWQsICdvcmRlcicsXG4gICAgICBvcmlnaW5PcmRlci5maWx0ZXIoaXRlbUlkID0+IGl0ZW1JZCAhPT0gZHJhZ2dpbmdJdGVtLmxheW91dEluZm8ubGF5b3V0SXRlbUlkKVxuICAgIClcbiAgfSBlbHNlIHtcbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dFByb3BlcnR5KHJlZkxheW91dEluZm8ubGF5b3V0SWQsICdvcmRlcicsIG9yaWdpbk9yZGVyKVxuICB9XG5cbiAgYXBwQnVpbGRlclN5bmMucHVibGlzaElzQnVzeVRvQnVpbGRlcihmYWxzZSlcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGVkQXBwQ29uZmlnOiBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLFxuICAgIGxheW91dEluZm86IHJlZkxheW91dEluZm9cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydEZsb2F0aW5nIChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBDb25maWdBY3Rpb24oKS5hcHBDb25maWdcbiAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZz8ubGF5b3V0cz8uW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgaWYgKCFsYXlvdXRJdGVtIHx8IGxheW91dEl0ZW0uc2V0dGluZz8uaXNGbG9hdGluZykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGNvbnN0IHBhZ2VQYXJ0ID0gdXRpbHMuZ2V0QWN0aXZlUGFnZVBhcnQoKVxuICBpZiAocGFnZVBhcnQgIT09IFBhZ2VQYXJ0LkhlYWRlciAmJiBwYWdlUGFydCAhPT0gUGFnZVBhcnQuRm9vdGVyKSB7XG4gICAgY29uc3Qgcm9vdExheW91dElkID0gdXRpbHMuZ2V0Q3VycmVudFBhZ2VSb290TGF5b3V0SWQoKVxuICAgIGNvbnN0IGxheW91dFR5cGUgPSBhcHBDb25maWcubGF5b3V0c1tyb290TGF5b3V0SWRdPy50eXBlXG4gICAgcmV0dXJuIGxheW91dFR5cGUgPT09IExheW91dFR5cGUuRmxvd0xheW91dCAmJiBsYXlvdXRJZCAhPT0gcm9vdExheW91dElkXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdXBwb3J0U2lua2luZyAobGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IGJvb2xlYW4ge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwQ29uZmlnQWN0aW9uKCkuYXBwQ29uZmlnXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWc/LmxheW91dHM/LltsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gIHJldHVybiBsYXlvdXRJdGVtPy5zZXR0aW5nPy5pc0Zsb2F0aW5nID8/IGZhbHNlXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmbG9hdGluZ0xheW91dEl0ZW0gKGxheW91dEluZm86IExheW91dEluZm8sIGNsaWVudFJlY3Q6IENsaWVudFJlY3QsIGFyZWE6IG51bWJlcikge1xuICBjb25zdCByb290TGF5b3V0SWQgPSB1dGlscy5nZXRDdXJyZW50UGFnZVJvb3RMYXlvdXRJZCgpXG4gIGxldCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGRJdGVtVG9MYXlvdXQoXG4gICAgYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZyxcbiAgICB7IGxheW91dEluZm8gfSBhcyBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICByb290TGF5b3V0SWRcbiAgKVxuICBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24ocmVzdWx0LnVwZGF0ZWRBcHBDb25maWcpXG4gIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHJlc3VsdC5sYXlvdXRJbmZvLCAnYmJveCcsIHtcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICB3aWR0aDogYCR7Y2xpZW50UmVjdC53aWR0aH1weGAsXG4gICAgaGVpZ2h0OiBgJHtjbGllbnRSZWN0LmhlaWdodH1weGBcbiAgfSkuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShyZXN1bHQubGF5b3V0SW5mbywgJ3NldHRpbmcuaXNGbG9hdGluZycsIHRydWUpXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkocmVzdWx0LmxheW91dEluZm8sICdzZXR0aW5nLmxvY2tQYXJlbnQnLCB0cnVlKVxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHJlc3VsdC5sYXlvdXRJbmZvLCAnc2V0dGluZy5mbG9hdGluZ0FyZWEnLCBhcmVhKVxuICAgIC5hZGp1c3RPcmRlck9mSXRlbShyZXN1bHQubGF5b3V0SW5mbywgbnVsbCkgLy8gYWRkIHRvIGxhc3Qgb2YgdGhlIG9yZGVyXG5cbiAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgIGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnKS5leGVjKClcbiAgICBidWlsZGVyQXBwU3luYy5wdWJsaXNoQ2hhbmdlU2VsZWN0aW9uVG9BcHAocmVzdWx0LmxheW91dEluZm8pXG4gIH0gZWxzZSB7XG4gICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgcmVzdWx0LmxheW91dEluZm8pKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaW5raW5nTGF5b3V0SXRlbSAobGF5b3V0SW5mbzogTGF5b3V0SW5mbywgY2xpZW50UmVjdDogQ2xpZW50UmVjdCkge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgbGV0IGluc2VydEluZGV4ID0gLTFcbiAgbGV0IHdpZHRoID0gMlxuICBsZXQgY29udGFpbmVyUmVjdFxuICBsZXQgYXBwRG9jOiBEb2N1bWVudFxuICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgY29uc3QgYXBwRnJhbWU6IEhUTUxGcmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBpZnJhbWVbbmFtZT1cIiR7QVBQX0ZSQU1FX05BTUVfSU5fQlVJTERFUn1cIl1gKVxuICAgIGFwcERvYyA9IGFwcEZyYW1lPy5jb250ZW50RG9jdW1lbnQgfHwgYXBwRnJhbWU/LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnRcbiAgfSBlbHNlIHtcbiAgICBhcHBEb2MgPSBkb2N1bWVudFxuICB9XG5cbiAgaWYgKGNsaWVudFJlY3QgPT0gbnVsbCkge1xuICAgIGNvbnN0IGxheW91dEVsZW0gPSBhcHBEb2MucXVlcnlTZWxlY3RvcihcbiAgICAgIGBkaXYuZXhiLXJuZFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW1JZH1cIl1gKVxuICAgIGlmIChsYXlvdXRFbGVtKSB7XG4gICAgICBjbGllbnRSZWN0ID0gbGF5b3V0RWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjbGllbnRSZWN0ID0geyB3aWR0aDogMTAwLCBoZWlnaHQ6IDEwMCB9IGFzIENsaWVudFJlY3RcbiAgICB9XG4gIH1cblxuICBjb25zdCBjaGlsZE5vZGVzID0gYXBwRG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYGRpdi5mbG93LWxheW91dFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl0gPiBkaXYudHJhaWwtY29udGFpbmVyID4gZGl2LmJ1aWxkZXItbGF5b3V0LWl0ZW06bm90KC5mbG9hdGluZylgKVxuICBpZiAoY2hpbGROb2Rlcz8ubGVuZ3RoID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IGNoaWxkTm9kZXNbaV1cbiAgICAgIGlmIChpbnNlcnRJbmRleCA9PT0gLTEgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGF5b3V0aXRlbWlkJykgIT09IGxheW91dEl0ZW1JZCkge1xuICAgICAgICBjb25zdCBpdGVtUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKGNsaWVudFJlY3Qud2lkdGggKiAxMiAvIGl0ZW1SZWN0LndpZHRoKVxuICAgICAgICBpZiAodXRpbHMuY29udGFpbnMoaXRlbVJlY3QsIGNsaWVudFJlY3QpKSB7XG4gICAgICAgICAgaW5zZXJ0SW5kZXggPSBpXG4gICAgICAgICAgY29udGFpbmVyUmVjdCA9IGl0ZW1SZWN0XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pbnRlcnNlY3RzKGl0ZW1SZWN0LCBjbGllbnRSZWN0KSkge1xuICAgICAgICAgIGluc2VydEluZGV4ID0gaSArIDFcbiAgICAgICAgICBjb250YWluZXJSZWN0ID0gaXRlbVJlY3RcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIHRoZSBpdGVtIGlzIHRoZSBzb2xlIGNoaWxkIG9mIHRoZSBjb250YWluZXIsIHVzZSBjdXJyZW50IHZpZXdwb3J0IGFzIHRoZSBjb250YWluZXIgcmVjdFxuICAgIGNvbnN0IHZpZXdwb3J0U2l6ZSA9IGNvcmVVdGlscy5maW5kVmlld3BvcnRTaXplKHV0aWxzLmdldEFwcENvbmZpZygpLCB1dGlscy5nZXRDdXJyZW50U2l6ZU1vZGUoKSlcbiAgICBjb250YWluZXJSZWN0ID0ge1xuICAgICAgbGVmdDogMCxcbiAgICAgIHRvcDogMCxcbiAgICAgIHdpZHRoOiB2aWV3cG9ydFNpemUud2lkdGgsXG4gICAgICBoZWlnaHQ6IHZpZXdwb3J0U2l6ZS5oZWlnaHRcbiAgICB9XG4gICAgd2lkdGggPSBNYXRoLnJvdW5kKGNsaWVudFJlY3Qud2lkdGggKiAxMiAvIHZpZXdwb3J0U2l6ZS53aWR0aClcbiAgfVxuICBpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSB7XG4gICAgaW5zZXJ0SW5kZXggPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLm9yZGVyPy5sZW5ndGggfHwgMFxuICB9XG4gIGFkZEJsb2NrVG9GbG93TGF5b3V0KFxuICAgIHsgbGF5b3V0SW5mbyB9IGFzIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGxheW91dElkLFxuICAgIGNvbnRhaW5lclJlY3QgfHwgY2xpZW50UmVjdCxcbiAgICBjbGllbnRSZWN0LFxuICAgIHdpZHRoLFxuICAgIGluc2VydEluZGV4XG4gIClcbn1cblxuLyoqXG4gKiBBZGQgYSBibG9jayBpbnRvIGZsb3cgbGF5b3V0IHdoaWNoIGNvbnRhaW5zIHRoZSBkcmFnZ2luZ0l0ZW1cbiAqIEBwYXJhbSBkcmFnZ2luZ0l0ZW1cbiAqIEBwYXJhbSB0YXJnZXRMYXlvdXRJZFxuICogQHBhcmFtIGNvbnRhaW5lclJlY3RcbiAqIEBwYXJhbSBpdGVtUmVjdFxuICogQHBhcmFtIHdpZHRoXG4gKiBAcGFyYW0gaW5zZXJ0SW5kZXhcbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEJsb2NrVG9GbG93TGF5b3V0IChcbiAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgdGFyZ2V0TGF5b3V0SWQ6IHN0cmluZyxcbiAgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdCxcbiAgaXRlbVJlY3Q6IENsaWVudFJlY3QsXG4gIHdpZHRoOiBudW1iZXIsXG4gIGluc2VydEluZGV4OiBudW1iZXIsXG4gIGFwcENvbmZpZz86IElNQXBwQ29uZmlnXG4pIHtcbiAgbGV0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gIGNvbnN0IHJvd1dpZGdldEluZm8gPSB7XG4gICAgbmFtZTogJ3JvdycsXG4gICAgbGFiZWw6ICdyb3cnLFxuICAgIHVyaTogJ3dpZGdldHMvbGF5b3V0L3Jvdy8nLFxuICAgIGljb246IG51bGwsXG4gICAgaXRlbVR5cGU6IExheW91dEl0ZW1UeXBlLldpZGdldCxcbiAgICBtYW5pZmVzdDoge1xuICAgICAgd2lkZ2V0VHlwZTogV2lkZ2V0VHlwZS5MYXlvdXQsXG4gICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgIH1cbiAgfVxuICBjb25zdCBkZWZhdWx0UGFkZGluZyA9IDEwXG5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRkSXRlbVRvTGF5b3V0KFxuICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsXG4gICAgcm93V2lkZ2V0SW5mbyBhcyBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICB0YXJnZXRMYXlvdXRJZFxuICApXG4gIGNvbnN0IHsgdXBkYXRlZEFwcENvbmZpZywgbGF5b3V0SW5mbyB9ID0gcmVzdWx0XG4gIGNvbnN0IGJib3ggPSB1dGlscy5yZXBsYWNlQm91bmRpbmdCb3gobnVsbCwgaXRlbVJlY3QsIGNvbnRhaW5lclJlY3QpXG4gIGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbih1cGRhdGVkQXBwQ29uZmlnKVxuICBhcHBDb25maWdBY3Rpb25cbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvLCAnYmJveCcsIGJib3gpXG4gICAgLmFkanVzdE9yZGVyT2ZJdGVtKGxheW91dEluZm8sIGluc2VydEluZGV4KVxuICBjb25zdCBsYXlvdXRJdGVtID0gc2VhcmNoVXRpbHMuZmluZExheW91dEl0ZW0odXBkYXRlZEFwcENvbmZpZywgcmVzdWx0LmxheW91dEluZm8pXG4gIGNvbnN0IHdpZGdldEpzb24gPSB1cGRhdGVkQXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgY29uc3QgbGF5b3V0TmFtZSA9IE9iamVjdC5rZXlzKHdpZGdldEpzb24ubGF5b3V0cylbMF1cbiAgY29uc3Qgcm93TGF5b3V0cyA9IHdpZGdldEpzb24ubGF5b3V0c1tsYXlvdXROYW1lXVxuICBjb25zdCBsYXlvdXRJZCA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJZChcbiAgICByb3dMYXlvdXRzLFxuICAgIGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5icm93c2VyU2l6ZU1vZGUsXG4gICAgdXBkYXRlZEFwcENvbmZpZy5tYWluU2l6ZU1vZGVcbiAgKVxuICAvLyB1cGRhdGUgd2lkZ2V0IGxhYmVsIHRvIGJsb2NrXG4gIGNvbnN0IGJsb2NrTGFiZWwgPSBpMThuLmdldEludGwoKS5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdibG9jaycgfSlcbiAgY29uc3Qgd2lkZ2V0TGFiZWwgPSBhcHBDb25maWdVdGlscy5nZXRVbmlxdWVMYWJlbCh1cGRhdGVkQXBwQ29uZmlnLCAnd2lkZ2V0JywgYmxvY2tMYWJlbClcblxuICBhcHBDb25maWdBY3Rpb25cbiAgICAuZWRpdFdpZGdldFByb3BlcnR5KHdpZGdldEpzb24uaWQsICdsYWJlbCcsIHdpZGdldExhYmVsKVxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdzZXR0aW5nLmhlaWdodE1vZGUnLCAnZml4ZWQnKVxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdiYm94LmhlaWdodCcsIGl0ZW1SZWN0LmhlaWdodCArIGRlZmF1bHRQYWRkaW5nICogMilcbiAgICAuZWRpdExheW91dFByb3BlcnR5KGxheW91dElkLCAncGFyZW50JywgeyBpZDogd2lkZ2V0SnNvbi5pZCwgdHlwZTogTGF5b3V0UGFyZW50VHlwZS5XaWRnZXQgfSlcblxuICBjb25zdCByZXN1bHQxID0gYXdhaXQgYWRkSXRlbVRvTGF5b3V0KFxuICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsXG4gICAgZHJhZ2dpbmdJdGVtLFxuICAgIGxheW91dElkXG4gIClcbiAgY29uc3QgeyBsYXlvdXRJbmZvOiBsYXlvdXRJbmZvMSwgdXBkYXRlZEFwcENvbmZpZzogdXBkYXRlZEFwcENvbmZpZzEgfSA9IHJlc3VsdDFcbiAgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKHVwZGF0ZWRBcHBDb25maWcxKVxuICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvMSwgJ3NldHRpbmcuaGVpZ2h0TW9kZScsICdmaXQnKVxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8xLCAnYmJveC5sZWZ0JywgMClcbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvMSwgJ2Jib3gud2lkdGgnLCB3aWR0aClcbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvMSwgJ2Jib3guaGVpZ2h0JywgTWF0aC5yb3VuZChNYXRoLm1pbihpdGVtUmVjdC5oZWlnaHQsIGNvbnRhaW5lclJlY3QuaGVpZ2h0KSkpXG4gICAgLmFkanVzdE9yZGVyT2ZJdGVtKGxheW91dEluZm8xLCAwKVxuICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgZ2V0QXBwQ29uZmlnQWN0aW9uKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcpLmV4ZWMoKVxuICAgIGJ1aWxkZXJBcHBTeW5jLnB1Ymxpc2hDaGFuZ2VTZWxlY3Rpb25Ub0FwcChsYXlvdXRJbmZvMSlcbiAgfSBlbHNlIHtcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMubGF5b3V0Q2hhbmdlZChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCBsYXlvdXRJbmZvMSkpXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICBqc3gsXG4gIExheW91dEl0ZW1UeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQge1xuICBUaGVtZUJhY2tncm91bmRTZWN0aW9uLFxuICBUaGVtZUJvcmRlclNlY3Rpb24sXG4gIFRoZW1lQm94U2hhZG93U2VjdGlvblxufSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3N0eWxlLXNldHRpbmctY29tcG9uZW50cydcbmltcG9ydCBBbmltYXRpb25TZXR0aW5nIGZyb20gJy4vYW5pbWF0aW9uLXNldHRpbmcnXG5cbmludGVyZmFjZSBFeHRyYVByb3BzIHtcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21tb25MYXlvdXRJdGVtU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8e1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIGlzU2VjdGlvbjogYm9vbGVhblxuICBvblN0eWxlQ2hhbmdlOiAobGF5b3V0SW5mbzogTGF5b3V0SW5mbywgc3R5bGUpID0+IHZvaWRcbiAgb25TZXR0aW5nQ2hhbmdlPzogKGxheW91dEluZm86IExheW91dEluZm8sIHNldHRpbmcpID0+IHZvaWRcbiAgc3R5bGU6IGFueVxuICBzZXR0aW5nPzogYW55XG59ICYgRXh0cmFQcm9wcz4ge1xuICB1cGRhdGVTdHlsZSAoa2V5LCB2YWx1ZSkge1xuICAgIGNvbnN0IHN0eWxlID0gSW1tdXRhYmxlKHRoaXMucHJvcHMuc3R5bGUgPz8ge30pXG4gICAgdGhpcy5wcm9wcy5vblN0eWxlQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW1JZFxuICAgICAgfSxcbiAgICAgIHN0eWxlLnNldChrZXksIHZhbHVlKVxuICAgIClcbiAgfVxuXG4gIG9uQmFja2dyb3VuZFN0eWxlQ2hhbmdlID0gKGNvbmZpZykgPT4ge1xuICAgIHRoaXMudXBkYXRlU3R5bGUoJ2JhY2tncm91bmQnLCBjb25maWcpXG4gIH1cblxuICB1cGRhdGVCb3JkZXIgPSAoYmQpID0+IHtcbiAgICB0aGlzLnVwZGF0ZVN0eWxlKCdib3JkZXInLCBiZClcbiAgfVxuXG4gIHVwZGF0ZVJhZGl1cyA9ICh2YWx1ZSkgPT4ge1xuICAgIHRoaXMudXBkYXRlU3R5bGUoJ2JvcmRlclJhZGl1cycsIHZhbHVlKVxuICB9XG5cbiAgdXBkYXRlU2hhZG93ID0gKHZhbHVlKSA9PiB7XG4gICAgdGhpcy51cGRhdGVTdHlsZSgnYm94U2hhZG93JywgdmFsdWUpXG4gIH1cblxuICBmb3JtYXRNZXNzYWdlID0gKGlkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKGlkKVxuICB9XG5cbiAgYWxsb3dDb3ZlckJhY2tncm91bmQgKCkge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcENvbmZpZ0FjdGlvbigpLmFwcENvbmZpZ1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICBjb25zdCB3aWRnZXRJZCA9IGxheW91dEl0ZW0ud2lkZ2V0SWRcbiAgICAgIHJldHVybiBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0/Lm1hbmlmZXN0Py5wcm9wZXJ0aWVzPy5jb3ZlckxheW91dEJhY2tncm91bmRcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5wcm9wcy5zdHlsZSB8fCB7fVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb21tb24tbGF5b3V0LWl0ZW0tc2V0dGluZyc+XG4gICAgICAgIDxBbmltYXRpb25TZXR0aW5nXG4gICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgIGxheW91dEl0ZW1JZD17bGF5b3V0SXRlbUlkfVxuICAgICAgICAgIG9uU2V0dGluZ0NoYW5nZT17dGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2V9XG4gICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlfVxuICAgICAgICAvPlxuICAgICAgICB7IXRoaXMucHJvcHMuaXNTZWN0aW9uICYmICF0aGlzLmFsbG93Q292ZXJCYWNrZ3JvdW5kKCkgJiYgKFxuICAgICAgICAgIDxUaGVtZUJhY2tncm91bmRTZWN0aW9uXG4gICAgICAgICAgICBiYWNrZ3JvdW5kPXtzdHlsZS5iYWNrZ3JvdW5kfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25CYWNrZ3JvdW5kU3R5bGVDaGFuZ2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPFRoZW1lQm9yZGVyU2VjdGlvblxuICAgICAgICAgIGJvcmRlcj17c3R5bGUuYm9yZGVyfVxuICAgICAgICAgIGJvcmRlclJhZGl1cz17c3R5bGUuYm9yZGVyUmFkaXVzfVxuICAgICAgICAgIG9uQm9yZGVyQ2hhbmdlPXt0aGlzLnVwZGF0ZUJvcmRlcn1cbiAgICAgICAgICBvbkJvcmRlclJhc2l1c0NoYW5nZT17dGhpcy51cGRhdGVSYWRpdXN9XG4gICAgICAgIC8+XG4gICAgICAgIDxUaGVtZUJveFNoYWRvd1NlY3Rpb24gdmFsdWU9e3N0eWxlLmJveFNoYWRvd30gb25DaGFuZ2U9e3RoaXMudXBkYXRlU2hhZG93fSAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBJbW11dGFibGUsXG4gIHR5cGUgTGF5b3V0SW5mbyxcbiAganN4LFxuICBjc3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgU2V0dGluZ1Jvd1xufSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IE51bWVyaWNJbnB1dCB9IGZyb20gJ2ppbXUtdWknXG5cbmludGVyZmFjZSBFeHRyYVByb3BzIHtcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21tb25MYXlvdXRJdGVtU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8e1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIG9uU2V0dGluZ0NoYW5nZT86IChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCBzZXR0aW5nKSA9PiB2b2lkXG4gIHNldHRpbmc6IGFueVxufSAmIEV4dHJhUHJvcHM+IHtcbiAgdXBkYXRlUm90YXRpb24gPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBzZXR0aW5nID0gSW1tdXRhYmxlKHRoaXMucHJvcHMuc2V0dGluZyA/PyB7fSlcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtSWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldEluKFsnc3R5bGUnLCAndHJhbnNmb3JtJywgJ3JvdGF0ZSddLCB2YWx1ZSlcbiAgICApXG4gIH1cblxuICBmb3JtYXRNZXNzYWdlID0gKGlkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKGlkKVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5wcm9wcy5zZXR0aW5nIHx8IHt9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgncm90YXRpb24nKX0gY2xhc3NOYW1lPSdyb3RhdGlvbi1zZXR0aW5nJz5cbiAgICAgICAgPE51bWVyaWNJbnB1dFxuICAgICAgICAgIGFyaWEtbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgncm90YXRpb24nKX1cbiAgICAgICAgICB2YWx1ZT17c2V0dGluZy5zdHlsZT8udHJhbnNmb3JtPy5yb3RhdGUgPz8gMH0gbWluPXstMzYwfSBtYXg9ezM2MH1cbiAgICAgICAgICBwcmVjaXNpb249ezJ9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlUm90YXRpb259XG4gICAgICAgICAgZm9ybWF0dGVyPXt2YWx1ZSA9PiBgJHt2YWx1ZX3CsGB9XG4gICAgICAgICAgcGFyc2VyPXt2YWx1ZSA9PiB2YWx1ZS5yZXBsYWNlKCfCsCcsICcnKX1cbiAgICAgICAgICBjc3M9e2Nzc2B3aWR0aDogNzJweDtgfVxuICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAvPlxuICAgICAgPC9TZXR0aW5nUm93PlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBpbmplY3RJbnRsLFxuICB0eXBlIEludGxTaGFwZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBNb3JlSG9yaXpvbnRhbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwnXG5pbXBvcnQgeyB0eXBlIFRvb2xiYXJDb25maWcsIExheW91dFpJbmRleCB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFRvb2xiYXIgfSBmcm9tICcuL3Rvb2xiYXInXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4uL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRleHRNZW51UHJvcHMge1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbiAgYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4gIHBvc2l0aW9uVHlwZTogJ2xlZnQnIHwgJ2NlbnRlcicgfCAncmlnaHQnXG4gIHNpemU6IG51bWJlclxuICBpY29uU2l6ZTogbnVtYmVyXG4gIGNsYXNzTmFtZTogc3RyaW5nXG4gIG1lbnVJdGVtczogVG9vbGJhckNvbmZpZ1xuICByb3RhdGU/OiBudW1iZXJcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGVcbiAgb25Nb3VzZUVudGVyPzogKCkgPT4gdm9pZFxuICBvbk1vdXNlTGVhdmU/OiAoKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBJbnRsUHJvcHMge1xuICBpbnRsOiBJbnRsU2hhcGVcbn1cblxuY2xhc3MgQ29udGV4dE1lbnUgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PENvbnRleHRNZW51UHJvcHMgJiBJbnRsUHJvcHM+IHtcbiAgcmVmOiBIVE1MRGl2RWxlbWVudFxuXG4gIGdldFBvc2l0aW9uU3R5bGUgKCkge1xuICAgIGNvbnN0IHsgcG9zaXRpb25UeXBlIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKHBvc2l0aW9uVHlwZSA9PT0gJ2xlZnQnKSB7XG4gICAgICByZXR1cm4gY3NzYFxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgIGBcbiAgICB9XG4gICAgaWYgKHBvc2l0aW9uVHlwZSA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHJldHVybiBjc3NgXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgICAgIGBcbiAgICB9XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgIGBcbiAgfVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICBjb25zdCB7IHNpemUsIGJ1aWxkZXJUaGVtZSwgcm90YXRlIH0gPSB0aGlzLnByb3BzXG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGJvZHk6bm90KC5kZXNpZ24tbW9kZSkgJiB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAwO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIHRyYW5zZm9ybTogJHtyb3RhdGUgPiAwIHx8IHJvdGF0ZSA8IDAgPyBgcm90YXRlWigke3JvdGF0ZX1kZWcpYCA6ICcnfSA7XG5cbiAgICAgIC5jb250ZW50IHtcbiAgICAgICAgJHt0aGlzLmdldFBvc2l0aW9uU3R5bGUoKX07XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMTAwbXM7XG4gICAgICAgIHotaW5kZXg6ICR7TGF5b3V0WkluZGV4LkhhbmRsZXJUb29sc307XG5cbiAgICAgICAgLm1lbnUtaGludCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbMzAwXX07XG4gICAgICAgICAgd2lkdGg6ICR7c2l6ZX1weDtcbiAgICAgICAgICBoZWlnaHQ6IDEwcHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5tZW51LWNvbnRlbnQge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgaGVpZ2h0OiAke3NpemV9cHg7XG4gICAgICAgICAgdHJhbnNmb3JtOiAke3JvdGF0ZSA+IDAgfHwgcm90YXRlIDwgMCA/IGByb3RhdGVaKCR7LXJvdGF0ZX1kZWcpYCA6ICcnfSA7XG5cbiAgICAgICAgICAudG9vbC1kcmFnLWhhbmRsZXIge1xuICAgICAgICAgICAgY3Vyc29yOiBtb3ZlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5sYXlvdXQtaXRlbS10b29sYmFyIHtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAvKiBoZWlnaHQ6ICR7c2l6ZX1weDsgKi9cbiAgICAgICAgICAvKiB3aWR0aDogYXV0bzsgKi9cblxuICAgICAgICAgIC5tZW51LWhpbnQge1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAubWVudS1jb250ZW50IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICBgXG4gIH1cblxuICBmb3JtYXRNZXNzYWdlID0gKGlkOiBzdHJpbmcsIHZhbHVlcz86IGFueSkgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLmludGwpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzW2lkXSB9LCB2YWx1ZXMpXG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0TWVzc2FnZXNbaWRdXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgYnVpbGRlclRoZW1lLCBtZW51SXRlbXMsIGxheW91dElkLCBsYXlvdXRJdGVtLCBjbGFzc05hbWUsIG9uTW91c2VFbnRlciwgb25Nb3VzZUxlYXZlIH0gPSB0aGlzLnByb3BzXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgd2lkZ2V0LWNvbnRleHQtbWVudSAke2NsYXNzTmFtZX1gfSBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0+XG4gICAgICAgIDxkaXYgcmVmPXtlbCA9PiAodGhpcy5yZWYgPSBlbCl9IGNsYXNzTmFtZT0nY29udGVudCc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lbnUtaGludCc+XG4gICAgICAgICAgICA8TW9yZUhvcml6b250YWxPdXRsaW5lZCBjb2xvcj17YnVpbGRlclRoZW1lLmNvbG9ycy5ibGFja30gc2l6ZT0nbScgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudS1jb250ZW50JyBvbk1vdXNlTGVhdmU9e29uTW91c2VMZWF2ZX0gb25Nb3VzZUVudGVyPXtvbk1vdXNlRW50ZXJ9PlxuICAgICAgICAgICAgPFRvb2xiYXJcbiAgICAgICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgICAgICBsYXlvdXRJdGVtPXtsYXlvdXRJdGVtfVxuICAgICAgICAgICAgICB0aGVtZT17YnVpbGRlclRoZW1lfVxuICAgICAgICAgICAgICBwYXJlbnRSZWY9e3RoaXMucmVmfVxuICAgICAgICAgICAgICB0b29scz17bWVudUl0ZW1zfVxuICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0aGlzLmZvcm1hdE1lc3NhZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKENvbnRleHRNZW51KVxuIiwiaW1wb3J0IHsgdHlwZSBJTVRoZW1lVmFyaWFibGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5jb25zdCBUT0xFUkFOQ0UgPSA1XG5cbi8qKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc19BUEkvVHV0b3JpYWwvQXBwbHlpbmdfc3R5bGVzX2FuZF9jb2xvcnNcbiAqL1xuZXhwb3J0IGNsYXNzIENhbnZhc1BhbmUge1xuICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50XG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG5cbiAgY29uc3RydWN0b3IgKGVsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50LCB0aGVtZT86IElNVGhlbWVWYXJpYWJsZXMpIHtcbiAgICB0aGlzLmNhbnZhcyA9IGVsZW1lbnRcbiAgICB0aGlzLmN0eCA9IGVsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKVxuICAgIHRoaXMuY3R4LmZvbnQgPSAnMXJlbSdcbiAgICB0aGlzLnRoZW1lID0gdGhlbWVcbiAgfVxuXG4gIHNldFNpemUgKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCByYXRpbyA9IDEpOiB2b2lkIHtcbiAgICBjb25zdCBzY2FsZUhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0ICogcmF0aW8pXG4gICAgY29uc3Qgc2NhbGVXaWR0aCA9IE1hdGgucm91bmQod2lkdGggKiByYXRpbylcbiAgICBpZiAocmF0aW8gPCAxKSB7XG4gICAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YFxuICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YFxuICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aFxuICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0XG4gICAgICB0aGlzLmN0eC5zY2FsZSgxLCAxKVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCAhPT0gc2NhbGVXaWR0aCB8fFxuICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ICE9PSBzY2FsZUhlaWdodFxuICAgICkge1xuICAgICAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGBcbiAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGBcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gc2NhbGVXaWR0aFxuICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gc2NhbGVIZWlnaHRcbiAgICAgIHRoaXMuY3R4LnNjYWxlKHJhdGlvLCByYXRpbylcbiAgICB9XG4gIH1cblxuICBzZXRDb2xvciAoY29sb3I6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGNvbG9yXG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBjb2xvclxuICB9XG5cbiAgZHJhd1JlY3QgKHJlY3Q6IFBhcnRpYWw8Q2xpZW50UmVjdD4pOiB2b2lkIHtcbiAgICB0aGlzLmN0eC5maWxsUmVjdChyZWN0LmxlZnQsIHJlY3QudG9wLCByZWN0LndpZHRoLCByZWN0LmhlaWdodClcbiAgfVxuXG4gIGRyYXdMaW5lIChcbiAgICB4MTogbnVtYmVyLFxuICAgIHkxOiBudW1iZXIsXG4gICAgeDI6IG51bWJlcixcbiAgICB5MjogbnVtYmVyLFxuICAgIGRhc2hlZCA9IGZhbHNlLFxuICAgIGxhYmVsPzogc3RyaW5nXG4gICk6IHZvaWQge1xuICAgIGlmIChkYXNoZWQpIHtcbiAgICAgIHRoaXMuY3R4LnNldExpbmVEYXNoKFs1LCAzXSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdHguc2V0TGluZURhc2goW10pXG4gICAgfVxuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpXG5cbiAgICBpZiAoeDEgPT09IHgyKSB7XG4gICAgICBsZXQgZGVsdGEgPSB4MSA8IHRoaXMuY2FudmFzLndpZHRoIC8gMiA/IDAuNSA6IC0wLjVcbiAgICAgIGRlbHRhID0gTnVtYmVyLmlzSW50ZWdlcih4MSkgPyBkZWx0YSA6IDBcbiAgICAgIHRoaXMuY3R4Lm1vdmVUbyh4MSArIGRlbHRhLCB5MSlcbiAgICAgIHRoaXMuY3R4LmxpbmVUbyh4MiArIGRlbHRhLCB5MilcbiAgICB9XG4gICAgaWYgKHkxID09PSB5Mikge1xuICAgICAgbGV0IGRlbHRhID0geTEgPCB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyID8gMC41IDogLTAuNVxuICAgICAgZGVsdGEgPSBOdW1iZXIuaXNJbnRlZ2VyKHkxKSA/IGRlbHRhIDogMFxuICAgICAgdGhpcy5jdHgubW92ZVRvKHgxLCB5MSArIGRlbHRhKVxuICAgICAgdGhpcy5jdHgubGluZVRvKHgyLCB5MiArIGRlbHRhKVxuICAgIH1cblxuICAgIHRoaXMuY3R4LnN0cm9rZSgpXG5cbiAgICBpZiAobGFiZWwgIT0gbnVsbCkge1xuICAgICAgY29uc3QgY2VudGVyWCA9ICh4MSArIHgyKSAvIDJcbiAgICAgIGNvbnN0IGNlbnRlclkgPSAoeTEgKyB5MikgLyAyXG4gICAgICB0aGlzLmRyYXdMYWJlbChjZW50ZXJYLCBjZW50ZXJZLCBsYWJlbCwgeTEgPT09IHkyKVxuICAgIH1cbiAgfVxuXG4gIGRyYXdUYWlsZWRMaW5lIChcbiAgICB4MTogbnVtYmVyLFxuICAgIHkxOiBudW1iZXIsXG4gICAgeDI6IG51bWJlcixcbiAgICB5MjogbnVtYmVyLFxuICAgIGRhc2hlZCA9IGZhbHNlLFxuICAgIGxhYmVsPzogc3RyaW5nXG4gICk6IHZvaWQge1xuICAgIGlmIChkYXNoZWQpIHtcbiAgICAgIHRoaXMuY3R4LnNldExpbmVEYXNoKFs1LCAzXSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdHguc2V0TGluZURhc2goW10pXG4gICAgfVxuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpXG5cbiAgICBpZiAoeDEgPT09IHgyKSB7XG4gICAgICBsZXQgZGVsdGEgPSB4MSA8IHRoaXMuY2FudmFzLndpZHRoIC8gMiA/IDAuNSA6IC0wLjVcbiAgICAgIGRlbHRhID0gTnVtYmVyLmlzSW50ZWdlcih4MSkgPyBkZWx0YSA6IDBcbiAgICAgIGNvbnN0IGZyb20gPSBNYXRoLm1pbih5MSwgeTIpXG4gICAgICBsZXQgZnJvbURlbHRhID0gZnJvbSA8IHRoaXMuY2FudmFzLmhlaWdodCAvIDIgPyAwLjUgOiAtMC41XG4gICAgICBmcm9tRGVsdGEgPSBOdW1iZXIuaXNJbnRlZ2VyKGZyb20pID8gZnJvbURlbHRhIDogMFxuICAgICAgY29uc3QgdG8gPSBNYXRoLm1heCh5MSwgeTIpXG4gICAgICBsZXQgdG9EZWx0YSA9IHRvIDwgdGhpcy5jYW52YXMuaGVpZ2h0IC8gMiA/IDAuNSA6IC0wLjVcbiAgICAgIHRvRGVsdGEgPSBOdW1iZXIuaXNJbnRlZ2VyKHRvKSA/IHRvRGVsdGEgOiAwXG4gICAgICB0aGlzLmN0eC5tb3ZlVG8oeDEgKyBkZWx0YSwgeTEpXG4gICAgICB0aGlzLmN0eC5saW5lVG8oeDIgKyBkZWx0YSwgeTIpXG4gICAgICB0aGlzLmN0eC5tb3ZlVG8oeDEgLSBUT0xFUkFOQ0UsIGZyb20gKyBmcm9tRGVsdGEpXG4gICAgICB0aGlzLmN0eC5saW5lVG8oeDEgKyBUT0xFUkFOQ0UsIGZyb20gKyBmcm9tRGVsdGEpXG4gICAgICB0aGlzLmN0eC5tb3ZlVG8oeDIgLSBUT0xFUkFOQ0UsIHRvICsgdG9EZWx0YSlcbiAgICAgIHRoaXMuY3R4LmxpbmVUbyh4MiArIFRPTEVSQU5DRSwgdG8gKyB0b0RlbHRhKVxuICAgIH1cbiAgICBpZiAoeTEgPT09IHkyKSB7XG4gICAgICBsZXQgZGVsdGEgPSB5MSA8IHRoaXMuY2FudmFzLmhlaWdodCAvIDIgPyAwLjUgOiAtMC41XG4gICAgICBkZWx0YSA9IE51bWJlci5pc0ludGVnZXIoeTEpID8gZGVsdGEgOiAwXG4gICAgICBjb25zdCBmcm9tID0gTWF0aC5taW4oeDEsIHgyKVxuICAgICAgbGV0IGZyb21EZWx0YSA9IGZyb20gPCB0aGlzLmNhbnZhcy53aWR0aCAvIDIgPyAwLjUgOiAtMC41XG4gICAgICBmcm9tRGVsdGEgPSBOdW1iZXIuaXNJbnRlZ2VyKGZyb20pID8gZnJvbURlbHRhIDogMFxuICAgICAgY29uc3QgdG8gPSBNYXRoLm1heCh4MSwgeDIpXG4gICAgICBsZXQgdG9EZWx0YSA9IHRvIDwgdGhpcy5jYW52YXMud2lkdGggLyAyID8gMC41IDogLTAuNVxuICAgICAgdG9EZWx0YSA9IE51bWJlci5pc0ludGVnZXIodG8pID8gdG9EZWx0YSA6IDBcbiAgICAgIHRoaXMuY3R4Lm1vdmVUbyh4MSwgeTEgKyBkZWx0YSlcbiAgICAgIHRoaXMuY3R4LmxpbmVUbyh4MiwgeTIgKyBkZWx0YSlcbiAgICAgIHRoaXMuY3R4Lm1vdmVUbyhmcm9tICsgZnJvbURlbHRhLCB5MSAtIFRPTEVSQU5DRSlcbiAgICAgIHRoaXMuY3R4LmxpbmVUbyhmcm9tICsgZnJvbURlbHRhLCB5MSArIFRPTEVSQU5DRSlcbiAgICAgIHRoaXMuY3R4Lm1vdmVUbyh0byArIHRvRGVsdGEsIHkyIC0gVE9MRVJBTkNFKVxuICAgICAgdGhpcy5jdHgubGluZVRvKHRvICsgdG9EZWx0YSwgeTIgKyBUT0xFUkFOQ0UpXG4gICAgfVxuICAgIHRoaXMuY3R4LnN0cm9rZSgpXG5cbiAgICBpZiAobGFiZWwgIT0gbnVsbCkge1xuICAgICAgY29uc3QgY2VudGVyWCA9ICh4MSArIHgyKSAvIDJcbiAgICAgIGNvbnN0IGNlbnRlclkgPSAoeTEgKyB5MikgLyAyXG4gICAgICB0aGlzLmRyYXdMYWJlbChjZW50ZXJYLCBjZW50ZXJZLCBsYWJlbCwgeTEgPT09IHkyKVxuICAgIH1cbiAgfVxuXG4gIGRyYXdMYWJlbCAoeDogbnVtYmVyLCB5OiBudW1iZXIsIGxhYmVsOiBzdHJpbmcsIGlzSG9yaXpvbnRhbCA9IHRydWUpOiB2b2lkIHtcbiAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5jdHgubWVhc3VyZVRleHQobGFiZWwpXG4gICAgY29uc3Qgb2Zmc2V0ID0gOFxuICAgIGNvbnN0IGxpbmVXaWR0aCA9IG1ldHJpY3Mud2lkdGhcbiAgICBjb25zdCBsaW5lSGVpZ2h0ID0gbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCArIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50XG4gICAgY29uc3Qgd2lkdGggPSBsaW5lV2lkdGggKyBvZmZzZXRcbiAgICBjb25zdCBoZWlnaHQgPSBsaW5lSGVpZ2h0ICsgb2Zmc2V0XG4gICAgY29uc3Qgc2lnbmFsID0gdXRpbHMuaXNSVEwoKSA/IC0xIDogMVxuXG4gICAgdGhpcy5jdHguc2F2ZSgpXG4gICAgaWYgKHRoaXMudGhlbWUpIHtcbiAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMudGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs1MDBdXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICd2YXIoLS1wcmltYXJ5LTUwMCknXG4gICAgfVxuICAgIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgIHRoaXMuZHJhd1JvdW5kUmVjdCh4IC0gd2lkdGggLyAyLCB5IC0gaGVpZ2h0IC0gb2Zmc2V0LCB3aWR0aCwgaGVpZ2h0KVxuICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJyNGRkZGRkYnXG4gICAgICB0aGlzLmN0eC5maWxsVGV4dChsYWJlbCwgeCAtIGxpbmVXaWR0aCAqIHNpZ25hbCAvIDIsIHkgLSBvZmZzZXQgKiAxLjUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZHJhd1JvdW5kUmVjdCh4ICsgb2Zmc2V0LCB5IC0gaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodClcbiAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJ1xuICAgICAgaWYgKHNpZ25hbCA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQobGFiZWwsIHggKyBsaW5lV2lkdGggKyBvZmZzZXQgKiAxLjUsIHkgKyBsaW5lSGVpZ2h0IC8gMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KGxhYmVsLCB4ICsgb2Zmc2V0ICogMS41LCB5ICsgbGluZUhlaWdodCAvIDIpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY3R4LnJlc3RvcmUoKVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGEgcm91bmRlZCByZWN0YW5nbGUgdXNpbmcgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNhbnZhcy5cbiAgICogSWYgeW91IG9taXQgdGhlIGxhc3QgdGhyZWUgcGFyYW1zLCBpdCB3aWxsIGRyYXcgYSByZWN0YW5nbGVcbiAgICogb3V0bGluZSB3aXRoIGEgNSBwaXhlbCBib3JkZXIgcmFkaXVzXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHRvcCBsZWZ0IHggY29vcmRpbmF0ZVxuICAgKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdG9wIGxlZnQgeSBjb29yZGluYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlY3RhbmdsZVxuICAgKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZVxuICAgKiBAcGFyYW0ge051bWJlcn0gW3JhZGl1cyA9IDJdXG4gICAqL1xuICBkcmF3Um91bmRSZWN0ICh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJhZGl1czogbnVtYmVyID0gMik6IHZvaWQge1xuICAgIGNvbnN0IHRsID0gcmFkaXVzXG4gICAgY29uc3QgdHIgPSByYWRpdXNcbiAgICBjb25zdCBibCA9IHJhZGl1c1xuICAgIGNvbnN0IGJyID0gcmFkaXVzXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKClcbiAgICB0aGlzLmN0eC5tb3ZlVG8oeCArIHRsLCB5KVxuICAgIHRoaXMuY3R4LmxpbmVUbyh4ICsgd2lkdGggLSB0ciwgeSlcbiAgICB0aGlzLmN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSwgeCArIHdpZHRoLCB5ICsgdHIpXG4gICAgdGhpcy5jdHgubGluZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCAtIGJyKVxuICAgIHRoaXMuY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0LCB4ICsgd2lkdGggLSBiciwgeSArIGhlaWdodClcbiAgICB0aGlzLmN0eC5saW5lVG8oeCArIGJsLCB5ICsgaGVpZ2h0KVxuICAgIHRoaXMuY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCwgeCwgeSArIGhlaWdodCAtIGJsKVxuICAgIHRoaXMuY3R4LmxpbmVUbyh4LCB5ICsgdGwpXG4gICAgdGhpcy5jdHgucXVhZHJhdGljQ3VydmVUbyh4LCB5LCB4ICsgdGwsIHkpXG4gICAgdGhpcy5jdHguY2xvc2VQYXRoKClcbiAgICB0aGlzLmN0eC5maWxsKClcbiAgfVxuXG4gIGNsZWFyICgpOiB2b2lkIHtcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodClcbiAgfVxufVxuIiwiaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtVHlwZSwgcG9saXNoZWQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBnZXRUaGVtZTIgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IHsgdXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBpc0xvY2tMYXlvdXQsIGlzRGVzaWduTW9kZSB9IGZyb20gJy4uL21lbnUvY29tbW9uLW1lbnUnXG5cbmV4cG9ydCBjb25zdCBHTE9CQUxfRFJBR0dJTkdfQ0xBU1NfTkFNRSA9ICdpbnRlcmFjdGpzLWRyYWdnaW5nJ1xuZXhwb3J0IGNvbnN0IEdMT0JBTF9INV9EUkFHR0lOR19DTEFTU19OQU1FID0gJ2V4Yi1oNS1kcmFnZ2luZydcbmV4cG9ydCBjb25zdCBMSU1JVEVEX0JPVU5EQVJZX0NMQVNTX05BTUUgPSAnbGltaXRlZC1kcmFnLWJvdW5kYXJ5J1xuXG5sZXQgaXNJdGVtRHJhZ2dpbmcgPSBmYWxzZVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYWdIYW5kbGVyUHJvcHMge1xuICByb290TGF5b3V0SWQ6ICgpID0+IHN0cmluZ1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIGl0ZW1UeXBlOiBMYXlvdXRJdGVtVHlwZVxuICB1c2VEcmFnSGFuZGxlcjogYm9vbGVhblxuICBkcmFnZ2FibGVBdFJ1bnRpbWU/OiBib29sZWFuXG4gIHJlc3RyaWN0OiAoKSA9PiBib29sZWFuXG4gIG9uRHJhZ1N0YXJ0PzogKGlkOiBzdHJpbmcpID0+IHZvaWRcbiAgb25EcmFnZ2luZz86IChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkXG4gIG9uRHJhZ0VuZD86IChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcmFnZ2luZ1BsYWNlaG9sZGVyIChyZWN0OiBDbGllbnRSZWN0KTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBidWlsZGVyVGhlbWUgPSBnZXRUaGVtZTIoKVxuICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgZWxlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2ludGVyYWN0X2RyYWdnaW5nX3BsYWNlaG9sZGVyJylcbiAgZWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCdcbiAgZWxlbS5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YFxuICBlbGVtLnN0eWxlLnRvcCA9IGAke3JlY3QudG9wfXB4YFxuICBlbGVtLnN0eWxlLndpZHRoID0gYCR7cmVjdC53aWR0aH1weGBcbiAgZWxlbS5zdHlsZS5oZWlnaHQgPSBgJHtyZWN0LmhlaWdodH1weGBcbiAgZWxlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwb2xpc2hlZC5yZ2JhKGJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzcwMF0sIDAuMilcbiAgZWxlbS5zdHlsZS56SW5kZXggPSAnMTEwMCdcbiAgcmV0dXJuIGVsZW1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmREcmFnSGFuZGxlciAoXG4gIGludGVyYWN0YWJsZTogSW50ZXJhY3QuSW50ZXJhY3RhYmxlICYgeyBzdHlsZUN1cnNvcjogKGJvb2xlYW4pID0+IEludGVyYWN0LkludGVyYWN0YWJsZSB9LFxuICBkcmFnSGFuZGxlclByb3BzOiBEcmFnSGFuZGxlclByb3BzXG4pOiBJbnRlcmFjdC5JbnRlcmFjdGFibGUge1xuICBpZiAoIWludGVyYWN0YWJsZSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgbGV0IGR4XG4gIGxldCBkeVxuICBsZXQgdGFyZ2V0UmVjdFxuICBsZXQgcGFyZW50UmVjdFxuICBsZXQgb3JpZ2luVHJhbnNmb3JtXG4gIGxldCBwbGFjZWhvbGRlckVsZW1lbnRcblxuICBjb25zdCB7XG4gICAgLy8gcm9vdExheW91dElkLFxuICAgIGxheW91dEl0ZW1JZCxcbiAgICB1c2VEcmFnSGFuZGxlcixcbiAgICBvbkRyYWdTdGFydCxcbiAgICBvbkRyYWdnaW5nLFxuICAgIG9uRHJhZ0VuZCxcbiAgICBkcmFnZ2FibGVBdFJ1bnRpbWUgPSBmYWxzZVxuICB9ID0gZHJhZ0hhbmRsZXJQcm9wc1xuXG4gIHJldHVybiBpbnRlcmFjdGFibGVcbiAgICAuc3R5bGVDdXJzb3IoZmFsc2UpXG4gICAgLmRyYWdnYWJsZSh7XG4gICAgICBpbmVydGlhOiBmYWxzZSxcbiAgICAgIGF1dG9TY3JvbGw6IGZhbHNlLFxuICAgICAgYWxsb3dGcm9tOiB1c2VEcmFnSGFuZGxlciA/ICcudG9vbC1kcmFnLWhhbmRsZXInIDogdW5kZWZpbmVkLFxuICAgICAgaWdub3JlRnJvbTogJy5uby1kcmFnLWFjdGlvbicsXG4gICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgc3RhcnQ6IChldmVudDogSW50ZXJhY3QuRHJhZ0V2ZW50KSA9PiB7XG4gICAgICAgICAgaWYgKGlzTG9ja0xheW91dCgpIHx8ICghZHJhZ2dhYmxlQXRSdW50aW1lICYmICFpc0Rlc2lnbk1vZGUoKSkpIHtcbiAgICAgICAgICAgIGV2ZW50LmludGVyYWN0aW9uLnN0b3AoKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCduby1kcmFnLWFjdGlvbicpKSB7XG4gICAgICAgICAgICAoZXZlbnQudGFyZ2V0IGFzIGFueSkuX2NhbkRyYWcgPSBmYWxzZVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIChldmVudC50YXJnZXQgYXMgYW55KS5fY2FuRHJhZyA9IHRydWVcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICAgICAgLy8gdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1yb290bGF5b3V0aWQnLCByb290TGF5b3V0SWQoKSk7XG4gICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2lzLWRyYWdnaW5nJylcblxuICAgICAgICAgIG9yaWdpblRyYW5zZm9ybSA9IHRhcmdldC5zdHlsZS50cmFuc2Zvcm1cbiAgICAgICAgICB0YXJnZXRSZWN0ID0gZXZlbnQucmVjdFxuICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50XG4gICAgICAgICAgcGFyZW50UmVjdCA9IHBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChHTE9CQUxfRFJBR0dJTkdfQ0xBU1NfTkFNRSlcblxuICAgICAgICAgIC8vIHRyYW5zZm9ybSBtYXkgYmUgc2V0IGluIGNzcyBjbGFzc2VzXG4gICAgICAgICAgY29uc3QgY29tcHV0ZWRUcmFuc2Zvcm0gPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNmb3JtJylcbiAgICAgICAgICBjb25zdCBbdHgsIHR5XSA9IHBhcnNlVHJhbnNmb3JtKGNvbXB1dGVkVHJhbnNmb3JtKVxuICAgICAgICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UodHgpKSB7XG4gICAgICAgICAgICBkeCA9IHV0aWxzLmZyb21SYXRpbyh0eCwgdGFyZ2V0UmVjdC53aWR0aClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHggPSBwYXJzZUZsb2F0KHR4KVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodXRpbHMuaXNQZXJjZW50YWdlKHR5KSkge1xuICAgICAgICAgICAgZHkgPSB1dGlscy5mcm9tUmF0aW8odHksIHRhcmdldFJlY3QuaGVpZ2h0KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkeSA9IHBhcnNlRmxvYXQodHkpXG4gICAgICAgICAgfVxuICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRleCcsIGR4KVxuICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRleScsIGR5KVxuXG4gICAgICAgICAgaWYgKG9uRHJhZ1N0YXJ0KSB7XG4gICAgICAgICAgICBvbkRyYWdTdGFydChsYXlvdXRJdGVtSWQpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtb3ZlOiAoZXZlbnQ6IEludGVyYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICAgICAgICBkeCArPSBldmVudC5keFxuICAgICAgICAgIGR5ICs9IGV2ZW50LmR5XG5cbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgICBpZiAoIXRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZC1ub25lJykpIHsgLy8gcHJldmVudCBwbGFjZWhvZGVyIGZvciBkcmFnZ2luZyB0YWIgaXRlbSBpbiBncmlkIGxheW91dFxuICAgICAgICAgICAgY29uc3QgeCA9IGV2ZW50LmNsaWVudC54XG4gICAgICAgICAgICBjb25zdCB5ID0gZXZlbnQuY2xpZW50LnlcbiAgICAgICAgICAgIGNvbnN0IG91dE9mQm91bmRhcnkgPSAhKHggPj0gMCAmJiB4IDw9IHBhcmVudFJlY3Qud2lkdGgpIHx8ICEoeSA+PSAwICYmIHkgPD0gcGFyZW50UmVjdC5oZWlnaHQpXG5cbiAgICAgICAgICAgIGlmIChvdXRPZkJvdW5kYXJ5ICYmICFwbGFjZWhvbGRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXJFbGVtZW50ID0gY3JlYXRlRHJhZ2dpbmdQbGFjZWhvbGRlcih0YXJnZXRSZWN0KVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlckVsZW1lbnQgPSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBsYWNlaG9sZGVyRWxlbWVudClcbiAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IG9yaWdpblRyYW5zZm9ybVxuICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZHJhZ2dpbmdFbGVtZW50ID0gcGxhY2Vob2xkZXJFbGVtZW50IHx8IHRhcmdldFxuICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9XG4gICAgICAgICAgICAgIGRyYWdnaW5nRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7TWF0aC5yb3VuZChkeCl9cHgsICR7TWF0aC5yb3VuZChkeSl9cHgpIHRyYW5zbGF0ZVooMClgXG4gICAgICAgICAgICBkcmFnZ2luZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRyYW5zbGF0ZXgnLCBNYXRoLnJvdW5kKGR4KSlcbiAgICAgICAgICAgIGRyYWdnaW5nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRleScsIE1hdGgucm91bmQoZHkpKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob25EcmFnZ2luZykge1xuICAgICAgICAgICAgb25EcmFnZ2luZyhsYXlvdXRJdGVtSWQsIGR4LCBkeSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVuZDogKGV2ZW50OiBJbnRlcmFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdnaW5nJylcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoR0xPQkFMX0RSQUdHSU5HX0NMQVNTX05BTUUpXG4gICAgICAgICAgaWYgKHBsYWNlaG9sZGVyRWxlbWVudCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwbGFjZWhvbGRlckVsZW1lbnQpXG4gICAgICAgICAgICBwbGFjZWhvbGRlckVsZW1lbnQgPSBudWxsXG4gICAgICAgICAgfVxuICAgICAgICAgIHRhcmdldC5zdHlsZS52aXNpYmlsaXR5ID0gbnVsbFxuICAgICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSBvcmlnaW5UcmFuc2Zvcm1cbiAgICAgICAgICBpZiAob25EcmFnRW5kKSB7XG4gICAgICAgICAgICBvbkRyYWdFbmQobGF5b3V0SXRlbUlkLCBkeCwgZHkpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldElzRHJhZ2dpbmcgKHZhbHVlOiBib29sZWFuKSB7XG4gIGlzSXRlbURyYWdnaW5nID0gdmFsdWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRHJhZ2dpbmcgKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNJdGVtRHJhZ2dpbmdcbn1cblxuZnVuY3Rpb24gcGFyc2VUcmFuc2Zvcm0gKHRyYW5zZm9ybTogc3RyaW5nID0gJycpOiBbc3RyaW5nLCBzdHJpbmddIHtcbiAgbGV0IGR4ID0gJzAnXG4gIGxldCBkeSA9ICcwJ1xuICBpZiAodHJhbnNmb3JtLmluY2x1ZGVzKCdtYXRyaXgoJykpIHtcbiAgICAvLyBtYXRyaXgoYSxiLGMsZCxlLGYpLCBlIGlzIHRyYW5zbGF0ZVgsIGYgaXMgdHJhbnNsYXRlWVxuICAgIGNvbnN0IHZhbHVlcyA9IHRyYW5zZm9ybS5zdWJzdHJpbmcodHJhbnNmb3JtLmluZGV4T2YoJygnKSArIDEsIHRyYW5zZm9ybS5pbmRleE9mKCcpJykpLnNwbGl0KCcsJylcbiAgICBkeCA9IGAke3BhcnNlSW50KHZhbHVlc1s0XSwgMTApfXB4YFxuICAgIGR5ID0gYCR7cGFyc2VJbnQodmFsdWVzWzVdLCAxMCl9cHhgXG4gICAgcmV0dXJuIFtkeCwgZHldXG4gIH1cbiAgaWYgKHRyYW5zZm9ybS5pbmNsdWRlcygndHJhbnNsYXRlKCcpKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0cmFuc2Zvcm0ubWF0Y2goL3RyYW5zbGF0ZVxcKCguKilcXHMqLFxccyooLiopXFwpLylcbiAgICBpZiAobWF0Y2gubGVuZ3RoID09PSAzKSB7XG4gICAgICBkeCA9IG1hdGNoWzFdXG4gICAgICBkeSA9IG1hdGNoWzJdXG4gICAgfVxuICAgIHJldHVybiBbZHgsIGR5XVxuICB9XG4gIGlmICh0cmFuc2Zvcm0uaW5jbHVkZXMoJ3RyYW5zbGF0ZVgoJykpIHtcbiAgICBjb25zdCBtYXRjaCA9IHRyYW5zZm9ybS5tYXRjaCgvdHJhbnNsYXRlWFxcKCguKilcXCkvKVxuICAgIGlmIChtYXRjaC5sZW5ndGggPT09IDIpIHtcbiAgICAgIGR4ID0gbWF0Y2hbMV1cbiAgICB9XG4gIH1cbiAgaWYgKHRyYW5zZm9ybS5pbmNsdWRlcygndHJhbnNsYXRlWSgnKSkge1xuICAgIGNvbnN0IG1hdGNoID0gdHJhbnNmb3JtLm1hdGNoKC90cmFuc2xhdGVZXFwoKC4qKVxcKS8pXG4gICAgaWYgKG1hdGNoLmxlbmd0aCA9PT0gMikge1xuICAgICAgZHkgPSBtYXRjaFsxXVxuICAgIH1cbiAgfVxuICByZXR1cm4gW2R4LCBkeV1cbn1cbiIsImltcG9ydCB7XG4gIGdldEFwcFN0b3JlLFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgSU1TaXplTW9kZUxheW91dEpzb24sXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIHR5cGUgSU1XaWRnZXRNYW5pZmVzdCxcbiAgTGF5b3V0VHlwZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIExheW91dENvbnRleHRQcm9wcywgdHlwZSBQYWdlQ29udGV4dFByb3BzLCB1dGlscyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcblxuZXhwb3J0IGludGVyZmFjZSBEcm9wQXJlYUNvbnRleHQge1xuICBwcm9wczogRHJvcEFyZWFQcm9wc1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFByb3BzXG4gIGxheW91dENvbnRleHQ6IExheW91dENvbnRleHRQcm9wc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyb3BBcmVhUHJvcHMge1xuICBsYXlvdXRzOiBJTVNpemVNb2RlTGF5b3V0SnNvblxuICBpc1BsYWNlaG9sZGVyPzogYm9vbGVhblxuICBoaWdobGlnaHREcmFnb3Zlcj86IGJvb2xlYW5cbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIHN0eWxlPzogYW55XG4gIGlzUmVwZWF0PzogYm9vbGVhblxuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxuICBvblRvZ2dsZURyYWdvdmVyRWZmZWN0PzogKGlzRHJhZ292ZXI6IGJvb2xlYW4sIGRyYWdnaW5nSXRlbT86IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKSA9PiB2b2lkXG4gIG9uRHJhZ0VudGVyPzogKGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMpID0+IHZvaWRcbiAgb25EcmFnT3Zlcj86IChcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGRyYWdnaW5nRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgY29udGFpbmVyUmVjdDogRE9NUmVjdCxcbiAgICBpdGVtUmVjdDogRE9NUmVjdCxcbiAgICBjbGllbnRYOiBudW1iZXIsXG4gICAgY2xpZW50WTogbnVtYmVyLFxuICAgIHNwZWVkPzogbnVtYmVyXG4gICkgPT4gdm9pZFxuICBvbkRyYWdMZWF2ZT86IChkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKSA9PiB2b2lkXG4gIG9uRHJvcD86IChcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGNvbnRhaW5lclJlY3Q6IERPTVJlY3QsXG4gICAgaXRlbVJlY3Q6IERPTVJlY3QsXG4gICAgY2xpZW50WDogbnVtYmVyLFxuICAgIGNsaWVudFk6IG51bWJlclxuICApID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUl0ZW1Gcm9tSW50ZXJhY3RFdmVudCAoZHJhZ0VsZW1lbnQ6IEhUTUxFbGVtZW50KTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMge1xuICBpZiAoZHJhZ0VsZW1lbnQgJiYgdHlwZW9mIGRyYWdFbGVtZW50LmdldEF0dHJpYnV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnN0IGxheW91dElkID0gZHJhZ0VsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxheW91dGlkJylcbiAgICBjb25zdCBsYXlvdXRJdGVtSWQgPSBkcmFnRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGF5b3V0aXRlbWlkJylcbiAgICBpZiAobGF5b3V0SWQgJiYgbGF5b3V0SXRlbUlkKSB7XG4gICAgICByZXR1cm4gY3JlYXRlSXRlbUZyb21MYXlvdXRJbmZvKGxheW91dElkLCBsYXlvdXRJdGVtSWQpXG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJdGVtRnJvbUxheW91dEluZm8gKGxheW91dElkLCBsYXlvdXRJdGVtSWQpOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyB7XG4gIGNvbnN0IHN0YXRlID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gIGNvbnN0IHsgbGF5b3V0cywgd2lkZ2V0cyB9ID0gc3RhdGUuYXBwQ29uZmlnXG4gIGNvbnN0IGZyb21MYXlvdXQgPSBsYXlvdXRzW2xheW91dElkXVxuICBjb25zdCBsYXlvdXRJdGVtID0gZnJvbUxheW91dD8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgaWYgKGxheW91dEl0ZW0pIHtcbiAgICBjb25zdCBsYXlvdXRJbmZvID0geyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH1cbiAgICBjb25zdCBtYW5pZmVzdCA9IGdldE1hbmlmZXN0KHN0YXRlLCBsYXlvdXRJdGVtKVxuICAgIGxldCB1cmkgPSBudWxsXG4gICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmIGxheW91dEl0ZW0ud2lkZ2V0SWQpIHtcbiAgICAgIHVyaSA9IHdpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF0/LnVyaVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbVR5cGU6IGxheW91dEl0ZW0udHlwZSxcbiAgICAgIGxheW91dEluZm8sXG4gICAgICB1cmksXG4gICAgICBtYW5pZmVzdCxcbiAgICAgIHJvdGF0aW9uOiBsYXlvdXRJdGVtLnNldHRpbmc/LnN0eWxlPy50cmFuc2Zvcm0/LnJvdGF0ZSA/PyAwXG4gICAgfSBhcyBhbnlcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSXRlbUZyb21INURyYWdFdmVudCAoKTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMge1xuICBpZiAod2luZG93LnBhcmVudCAmJiB3aW5kb3cucGFyZW50Ll9kcmFnZ2luZ193aWRnZXRfaXRlbSkge1xuICAgIHJldHVybiB3aW5kb3cucGFyZW50Ll9kcmFnZ2luZ193aWRnZXRfaXRlbSBhcyBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wc1xuICB9XG4gIHJldHVybiBudWxsXG59XG5cbi8vIHRoZSBpdGVtUmVjdCBzaG91bGQgbm90IGV4Y2VlZCB0aGUgYm91bmRhcnkgb2YgdGhlIGNvbnRhaW5lclJlY3RcbmV4cG9ydCBmdW5jdGlvbiByZXN0cmljdEl0ZW1JbkNvbnRhaW5lciAoaXRlbVJlY3Q6IFBhcnRpYWw8RE9NUmVjdD4sIGNvbnRhaW5lclJlY3Q6IFBhcnRpYWw8RE9NUmVjdD4pOiBQYXJ0aWFsPERPTVJlY3Q+IHtcbiAgY29uc3QgcmVzdWx0OiB7IGxlZnQ6IG51bWJlciwgdG9wOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0gPSB7fSBhcyBhbnlcbiAgcmVzdWx0LndpZHRoID0gTWF0aC5taW4oaXRlbVJlY3Qud2lkdGgsIGNvbnRhaW5lclJlY3Qud2lkdGgpXG4gIHJlc3VsdC5oZWlnaHQgPSBNYXRoLm1pbihpdGVtUmVjdC5oZWlnaHQsIGNvbnRhaW5lclJlY3QuaGVpZ2h0KVxuICByZXN1bHQubGVmdCA9IE1hdGgubWF4KDAsIGl0ZW1SZWN0LmxlZnQpXG4gIHJlc3VsdC50b3AgPSBNYXRoLm1heCgwLCBpdGVtUmVjdC50b3ApXG5cbiAgaWYgKHJlc3VsdC5sZWZ0ICsgcmVzdWx0LndpZHRoID4gY29udGFpbmVyUmVjdC53aWR0aCkge1xuICAgIHJlc3VsdC5sZWZ0ID0gY29udGFpbmVyUmVjdC53aWR0aCAtIHJlc3VsdC53aWR0aFxuICB9XG5cbiAgaWYgKHJlc3VsdC50b3AgKyByZXN1bHQuaGVpZ2h0ID4gY29udGFpbmVyUmVjdC5oZWlnaHQpIHtcbiAgICByZXN1bHQudG9wID0gY29udGFpbmVyUmVjdC5oZWlnaHQgLSByZXN1bHQuaGVpZ2h0XG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmZ1bmN0aW9uIGdldE1hbmlmZXN0IChzdGF0ZTogSU1TdGF0ZSwgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvbik6IElNV2lkZ2V0TWFuaWZlc3Qge1xuICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICBjb25zdCB3aWRnZXRJZCA9IGxheW91dEl0ZW0ud2lkZ2V0SWRcblxuICAgIGlmICh3aWRnZXRJZCkge1xuICAgICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZz8ud2lkZ2V0cz8uW3dpZGdldElkXT8ubWFuaWZlc3RcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRHJhZ2dpbmdJdGVtQWNjZXB0ZWQgKFxuICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICBsYXlvdXRDb250ZXh0OiBMYXlvdXRDb250ZXh0UHJvcHMsXG4gIHByb3BzOiBEcm9wQXJlYVByb3BzLFxuICBsYXlvdXRJZDogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgLy8gc2NyZWVuIGdyb3VwIG9ubHkgYWxsb3dzIHRvIGRyb3Agb24gYSBzY3JvbGxpbmcgcGFnZVxuICBpZiAoZHJhZ2dpbmdJdGVtPy5pdGVtVHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXApIHtcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gdXRpbHMuZ2V0Q3VycmVudFBhZ2VJZCgpXG4gICAgY29uc3QgYXBwQ29uZmlnID0gdXRpbHMuZ2V0QXBwQ29uZmlnKClcbiAgICBjb25zdCBwYWdlSnNvbiA9IGFwcENvbmZpZy5wYWdlc1tjdXJyZW50UGFnZUlkXVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhwYWdlSnNvbj8ubGF5b3V0ID8/IHt9KS5zb21lKHNpemVNb2RlID0+IHtcbiAgICAgIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzW3BhZ2VKc29uLmxheW91dFtzaXplTW9kZV1dXG4gICAgICByZXR1cm4gbGF5b3V0LnR5cGUgPT09IExheW91dFR5cGUuRmxvd0xheW91dCAmJiBsYXlvdXQuaWQgPT09IGxheW91dElkXG4gICAgfSlcbiAgfVxuXG4gIGxldCBpc0FsbG93ZWQgPSBsb2NrUGFyZW50QWxsb3dlZChsYXlvdXRJZCwgZHJhZ2dpbmdJdGVtKVxuICBpZiAoaXNBbGxvd2VkICYmIHR5cGVvZiBsYXlvdXRDb250ZXh0LmlzSXRlbUFjY2VwdGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaXNBbGxvd2VkID0gbGF5b3V0Q29udGV4dC5pc0l0ZW1BY2NlcHRlZChkcmFnZ2luZ0l0ZW0sIHByb3BzLmlzUGxhY2Vob2xkZXIgPz8gZmFsc2UpXG4gIH1cbiAgcmV0dXJuIGlzQWxsb3dlZFxufVxuXG5mdW5jdGlvbiBsb2NrUGFyZW50QWxsb3dlZCAobGF5b3V0SWQ6IHN0cmluZywgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyk6IGJvb2xlYW4ge1xuICBpZiAoIWRyYWdnaW5nSXRlbSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKCEoZHJhZ2dpbmdJdGVtLmlzRnJvbUN1cnJlbnRTaXplTW9kZSA/PyB0cnVlKSkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBjb25zdCBkcmFnZ2luZ0xheW91dEluZm8gPSBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mb1xuXG4gIGlmIChkcmFnZ2luZ0xheW91dEluZm8pIHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKVxuICAgIGNvbnN0IHsgbGF5b3V0cyB9ID0gc3RhdGUuYXBwQ29uZmlnXG4gICAgY29uc3QgZnJvbUxheW91dCA9IGxheW91dHNbZHJhZ2dpbmdMYXlvdXRJbmZvLmxheW91dElkXVxuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBmcm9tTGF5b3V0Py5jb250ZW50Py5bZHJhZ2dpbmdMYXlvdXRJbmZvLmxheW91dEl0ZW1JZF1cbiAgICBpZiAobGF5b3V0SXRlbSkge1xuICAgICAgY29uc3QgbG9ja1BhcmVudCA9IGxheW91dEl0ZW0uc2V0dGluZz8ubG9ja1BhcmVudCA/PyBmYWxzZVxuXG4gICAgICBpZiAoZnJvbUxheW91dC50eXBlID09PSBMYXlvdXRUeXBlLkZsb3dMYXlvdXQgfHwgbG9ja1BhcmVudCkge1xuICAgICAgICByZXR1cm4gZHJhZ2dpbmdMYXlvdXRJbmZvLmxheW91dElkID09PSBsYXlvdXRJZFxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuIiwiaW1wb3J0IHsgdHlwZSBSZWFjdCwgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcywgbG9kYXNoIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgaXNEcmFnZ2luZ0l0ZW1BY2NlcHRlZCwgY3JlYXRlSXRlbUZyb21INURyYWdFdmVudCwgdHlwZSBEcm9wQXJlYUNvbnRleHQsIHJlc3RyaWN0SXRlbUluQ29udGFpbmVyIH0gZnJvbSAnLi9kcm9wYXJlYS1jb21tb24nXG5pbXBvcnQgeyBHTE9CQUxfSDVfRFJBR0dJTkdfQ0xBU1NfTkFNRSB9IGZyb20gJy4vZHJhZy1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgdHlwZSBET01SZWN0Tm90UmVhZE9ubHkgfSBmcm9tICcuLi8uLi9maXhlZC1sYXlvdXQvYnVpbGRlci9tb3ZlLWd1aWRlLWNvbW1vbidcbmV4cG9ydCBmdW5jdGlvbiBpbml0SDUgKFxuICBlbGVtOiBIVE1MRWxlbWVudCxcbiAgY29udGV4dFJlZjogUmVhY3QuUmVmT2JqZWN0PERyb3BBcmVhQ29udGV4dD5cbikge1xuICBsZXQgaDVEcmFnZ2luZ0l0ZW1cbiAgbGV0IGNvbnRhaW5lclJlY3RcblxuICBjb25zdCB0aHJvdHRsZURyYWdPdmVySGFuZGxlciA9IGxvZGFzaC50aHJvdHRsZShoNURyYWdPdmVySGFuZGxlciwgMTAwKVxuXG4gIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgb25EcmFnRW50ZXIpXG4gIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgb25EcmFnTGVhdmUpXG4gIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWdPdmVyKVxuICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3ApXG5cbiAgZnVuY3Rpb24gaW5pdEg1RHJhZ2dpbmcgKCkge1xuICAgIGNvbnN0IHsgcHJvcHMsIGxheW91dElkLCBsYXlvdXRDb250ZXh0LCBwYWdlQ29udGV4dCB9ID0gY29udGV4dFJlZi5jdXJyZW50XG4gICAgaWYgKHBhZ2VDb250ZXh0LnZpZXdPbmx5KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY3VycmVudERyYWdnaW5nSXRlbSA9IGNyZWF0ZUl0ZW1Gcm9tSDVEcmFnRXZlbnQoKVxuICAgIGlmICghaDVEcmFnZ2luZ0l0ZW0gfHwgaDVEcmFnZ2luZ0l0ZW0gIT09IGN1cnJlbnREcmFnZ2luZ0l0ZW0pIHtcbiAgICAgIGg1RHJhZ2dpbmdJdGVtID0gY3VycmVudERyYWdnaW5nSXRlbVxuICAgICAgaWYgKGlzRHJhZ2dpbmdJdGVtQWNjZXB0ZWQoaDVEcmFnZ2luZ0l0ZW0sIGxheW91dENvbnRleHQsIHByb3BzLCBsYXlvdXRJZCkpIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdkcm9wLXRhcmdldCcpXG4gICAgICAgIGlmIChwcm9wcy5vblRvZ2dsZURyYWdvdmVyRWZmZWN0KSB7XG4gICAgICAgICAgcHJvcHMub25Ub2dnbGVEcmFnb3ZlckVmZmVjdCh0cnVlLCBoNURyYWdnaW5nSXRlbSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzSDVEcmFnRWxlbWVudEFjY2VwdGVkICgpIHtcbiAgICBpZiAoIWg1RHJhZ2dpbmdJdGVtKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgeyBwcm9wcywgbGF5b3V0SWQsIHBhZ2VDb250ZXh0LCBsYXlvdXRDb250ZXh0IH0gPSBjb250ZXh0UmVmLmN1cnJlbnRcbiAgICByZXR1cm4gIXBhZ2VDb250ZXh0LnZpZXdPbmx5ICYmXG4gICAgICBpc0RyYWdnaW5nSXRlbUFjY2VwdGVkKGg1RHJhZ2dpbmdJdGVtLCBsYXlvdXRDb250ZXh0LCBwcm9wcywgbGF5b3V0SWQpXG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdFbnRlciAoZSkge1xuICAgIGNvbnN0IHsgcHJvcHMgfSA9IGNvbnRleHRSZWYuY3VycmVudFxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIGluaXRINURyYWdnaW5nKClcbiAgICBpZiAoIWlzSDVEcmFnRWxlbWVudEFjY2VwdGVkKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnRhaW5lclJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgaWYgKGg1RHJhZ2dpbmdJdGVtICYmIHByb3BzLm9uRHJhZ0VudGVyKSB7XG4gICAgICBwcm9wcy5vbkRyYWdFbnRlcihoNURyYWdnaW5nSXRlbSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdMZWF2ZSAoZSkge1xuICAgIGNvbnN0IHsgcHJvcHMgfSA9IGNvbnRleHRSZWYuY3VycmVudFxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC10YXJnZXQnKVxuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC1hY3RpdmUnKVxuXG4gICAgaWYgKCFpc0g1RHJhZ0VsZW1lbnRBY2NlcHRlZCgpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAocHJvcHMub25EcmFnTGVhdmUpIHtcbiAgICAgIHByb3BzLm9uRHJhZ0xlYXZlKGg1RHJhZ2dpbmdJdGVtKVxuICAgIH1cbiAgICBpZiAocHJvcHMub25Ub2dnbGVEcmFnb3ZlckVmZmVjdCkge1xuICAgICAgcHJvcHMub25Ub2dnbGVEcmFnb3ZlckVmZmVjdChmYWxzZSwgaDVEcmFnZ2luZ0l0ZW0pXG4gICAgfVxuICAgIGg1RHJhZ2dpbmdJdGVtID0gbnVsbFxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnT3ZlciAoZSkge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIHBhZ2VDb250ZXh0IH0gPSBjb250ZXh0UmVmLmN1cnJlbnRcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpbml0SDVEcmFnZ2luZygpXG4gICAgaWYgKCFpc0g1RHJhZ0VsZW1lbnRBY2NlcHRlZCgpKSB7XG4gICAgICBpZiAoZS5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJ1xuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChlLmRhdGFUcmFuc2Zlcikge1xuICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5J1xuICAgIH1cblxuICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucygnZHJvcC10YXJnZXQnKSkge1xuICAgICAgY29uc3QgeyBjbGllbnRYLCBjbGllbnRZIH0gPSBlXG4gICAgICBpZiAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wLWFjdGl2ZScpICYmIGxheW91dElkICE9PSBwYWdlQ29udGV4dC5yb290TGF5b3V0SWQpIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdkcm9wLWFjdGl2ZScpXG4gICAgICB9XG4gICAgICB0aHJvdHRsZURyYWdPdmVySGFuZGxlcihoNURyYWdnaW5nSXRlbSwgY2xpZW50WCwgY2xpZW50WSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoNURyYWdPdmVySGFuZGxlciAoZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcywgY2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXIpIHtcbiAgICBpZiAoIWRyYWdnaW5nSXRlbSB8fCBpc05hTihjbGllbnRYKSB8fCBpc05hTihjbGllbnRZKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGxldCB3aWR0aCA9IDIwMFxuICAgIGxldCBoZWlnaHQgPSAxMDBcbiAgICBjb25zdCB7IHByb3BzIH0gPSBjb250ZXh0UmVmLmN1cnJlbnRcbiAgICBpZiAoZHJhZ2dpbmdJdGVtLm1hbmlmZXN0LmRlZmF1bHRTaXplKSB7XG4gICAgICB3aWR0aCA9IGlzTmFOKGRyYWdnaW5nSXRlbS5tYW5pZmVzdC5kZWZhdWx0U2l6ZS53aWR0aClcbiAgICAgICAgPyB3aWR0aFxuICAgICAgICA6IGRyYWdnaW5nSXRlbS5tYW5pZmVzdC5kZWZhdWx0U2l6ZS53aWR0aFxuICAgICAgaGVpZ2h0ID0gaXNOYU4oZHJhZ2dpbmdJdGVtLm1hbmlmZXN0LmRlZmF1bHRTaXplLmhlaWdodClcbiAgICAgICAgPyBoZWlnaHRcbiAgICAgICAgOiBkcmFnZ2luZ0l0ZW0ubWFuaWZlc3QuZGVmYXVsdFNpemUuaGVpZ2h0XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRHJhZ092ZXIpIHtcbiAgICAgIHByb3BzLm9uRHJhZ092ZXIoXG4gICAgICAgIGRyYWdnaW5nSXRlbSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgY29udGFpbmVyUmVjdCxcbiAgICAgICAge1xuICAgICAgICAgIGxlZnQ6IGNsaWVudFggLSB3aWR0aCAvIDIgLSBjb250YWluZXJSZWN0LmxlZnQsXG4gICAgICAgICAgdG9wOiBjbGllbnRZIC0gaGVpZ2h0IC8gMiAtIGNvbnRhaW5lclJlY3QudG9wLFxuICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICByaWdodDogY2xpZW50WCAtIHdpZHRoIC8gMiAtIGNvbnRhaW5lclJlY3QubGVmdCArIHdpZHRoLFxuICAgICAgICAgIGJvdHRvbTogY2xpZW50WSAtIGhlaWdodCAvIDIgLSBjb250YWluZXJSZWN0LnRvcCArIGhlaWdodFxuICAgICAgICB9IGFzIERPTVJlY3QsXG4gICAgICAgIGNsaWVudFggLSBjb250YWluZXJSZWN0LmxlZnQsXG4gICAgICAgIGNsaWVudFkgLSBjb250YWluZXJSZWN0LnRvcFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJvcCAoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC10YXJnZXQnKVxuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC1hY3RpdmUnKVxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKEdMT0JBTF9INV9EUkFHR0lOR19DTEFTU19OQU1FKVxuXG4gICAgaWYgKCFpc0g1RHJhZ0VsZW1lbnRBY2NlcHRlZCgpKSB7XG4gICAgICBoNURyYWdnaW5nSXRlbSA9IG51bGxcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHsgcHJvcHMgfSA9IGNvbnRleHRSZWYuY3VycmVudFxuICAgIGNvbnN0IHsgY2xpZW50WCwgY2xpZW50WSB9ID0gZVxuICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgbGV0IHdpZHRoID0gMjAwXG4gICAgbGV0IGhlaWdodCA9IDEwMFxuICAgIGlmIChoNURyYWdnaW5nSXRlbS5tYW5pZmVzdC5kZWZhdWx0U2l6ZSkge1xuICAgICAgd2lkdGggPSBpc05hTihoNURyYWdnaW5nSXRlbS5tYW5pZmVzdC5kZWZhdWx0U2l6ZS53aWR0aClcbiAgICAgICAgPyB3aWR0aFxuICAgICAgICA6IGg1RHJhZ2dpbmdJdGVtLm1hbmlmZXN0LmRlZmF1bHRTaXplLndpZHRoXG4gICAgICBoZWlnaHQgPSBpc05hTihoNURyYWdnaW5nSXRlbS5tYW5pZmVzdC5kZWZhdWx0U2l6ZS5oZWlnaHQpXG4gICAgICAgID8gaGVpZ2h0XG4gICAgICAgIDogaDVEcmFnZ2luZ0l0ZW0ubWFuaWZlc3QuZGVmYXVsdFNpemUuaGVpZ2h0XG4gICAgfVxuICAgIGxldCBpdGVtUmVjdDogUGFydGlhbDxET01SZWN0Tm90UmVhZE9ubHk+ID0ge1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBsZWZ0OiBjbGllbnRYIC0gd2lkdGggLyAyIC0gY29udGFpbmVyUmVjdC5sZWZ0LFxuICAgICAgdG9wOiBjbGllbnRZIC0gaGVpZ2h0IC8gMiAtIGNvbnRhaW5lclJlY3QudG9wXG4gICAgfVxuICAgIGl0ZW1SZWN0ID0gcmVzdHJpY3RJdGVtSW5Db250YWluZXIoaXRlbVJlY3QsIHsgbGVmdDogMCwgdG9wOiAwLCB3aWR0aDogY29udGFpbmVyUmVjdC53aWR0aCwgaGVpZ2h0OiBjb250YWluZXJSZWN0LmhlaWdodCB9KVxuICAgIGl0ZW1SZWN0LnJpZ2h0ID0gaXRlbVJlY3QubGVmdCArIGl0ZW1SZWN0LndpZHRoXG4gICAgaXRlbVJlY3QuYm90dG9tID0gaXRlbVJlY3QudG9wICsgaXRlbVJlY3QuaGVpZ2h0XG5cbiAgICBpZiAocHJvcHMub25Ub2dnbGVEcmFnb3ZlckVmZmVjdCkge1xuICAgICAgcHJvcHMub25Ub2dnbGVEcmFnb3ZlckVmZmVjdChmYWxzZSwgaDVEcmFnZ2luZ0l0ZW0pXG4gICAgfVxuICAgIGlmIChwcm9wcy5vbkRyb3ApIHtcbiAgICAgIHByb3BzLm9uRHJvcChcbiAgICAgICAgaDVEcmFnZ2luZ0l0ZW0sXG4gICAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICAgIGl0ZW1SZWN0IGFzIERPTVJlY3QsXG4gICAgICAgIGNsaWVudFggLSBjb250YWluZXJSZWN0LmxlZnQsXG4gICAgICAgIGNsaWVudFkgLSBjb250YWluZXJSZWN0LnRvcFxuICAgICAgKVxuICAgIH1cbiAgICBoNURyYWdnaW5nSXRlbSA9IG51bGxcbiAgfVxufVxuIiwiaW1wb3J0IHsgdHlwZSBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGludGVyYWN0IH0gZnJvbSAnamltdS1jb3JlL2RuZCdcbmltcG9ydCB7XG4gIGNyZWF0ZUl0ZW1Gcm9tSW50ZXJhY3RFdmVudCxcbiAgaXNEcmFnZ2luZ0l0ZW1BY2NlcHRlZCxcbiAgdHlwZSBEcm9wQXJlYUNvbnRleHQsXG4gIHJlc3RyaWN0SXRlbUluQ29udGFpbmVyXG59IGZyb20gJy4vZHJvcGFyZWEtY29tbW9uJ1xuaW1wb3J0IHsgdHlwZSBET01SZWN0Tm90UmVhZE9ubHkgfSBmcm9tICcuLi8uLi9maXhlZC1sYXlvdXQvYnVpbGRlci9tb3ZlLWd1aWRlLWNvbW1vbidcbmV4cG9ydCBmdW5jdGlvbiBpbml0SW50ZXJhY3RpdmUgKFxuICBkb21SZWY6IEhUTUxFbGVtZW50LFxuICBjb250ZXh0UmVmOiBSZWFjdC5SZWZPYmplY3Q8RHJvcEFyZWFDb250ZXh0PixcbiAgYWNjZXB0Q2xhc3NOYW1lPzogc3RyaW5nXG4pOiBJbnRlcmFjdC5JbnRlcmFjdGFibGUge1xuICBsZXQgZHJhZ2dpbmdJdGVtXG4gIGxldCBkcmFnZ2luZ0VsZW1lbnRcbiAgbGV0IGNvbnRhaW5lclJlY3RcbiAgbGV0IGxhc3REcmFnQ2FsbFxuXG4gIHJldHVybiBpbnRlcmFjdChkb21SZWYpLmRyb3B6b25lKHtcbiAgICBhY2NlcHQ6IGFjY2VwdENsYXNzTmFtZSA/PyAnLmV4Yi1ybmQnLFxuICAgIGNoZWNrZXI6IChcbiAgICAgIGRyYWdFdmVudCwgLy8gcmVsYXRlZCBkcmFnbW92ZSBvciBkcmFnZW5kXG4gICAgICBldmVudCwgLy8gVG91Y2gsIFBvaW50ZXIgb3IgTW91c2UgRXZlbnRcbiAgICAgIGRyb3BwZWQsIC8vIGJvb2wgZGVmYXVsdCBjaGVja2VyIHJlc3VsdFxuICAgICAgZHJvcHpvbmUsIC8vIGRyb3B6b25lIEludGVyYWN0YWJsZVxuICAgICAgZHJvcEVsZW1lbnQsIC8vIGRyb3B6b25lIGVsZW1udFxuICAgICAgZHJhZ2dhYmxlLCAvLyBkcmFnZ2FibGUgSW50ZXJhY3RhYmxlXG4gICAgICBkcmFnZ2FibGVFbGVtZW50IC8vIGRyYWdnYWJsZSBlbGVtZW50XG4gICAgKSA9PiB7XG4gICAgICBjb25zdCB7IHByb3BzLCBsYXlvdXRJZCwgcGFnZUNvbnRleHQsIGxheW91dENvbnRleHQgfSA9IGNvbnRleHRSZWYuY3VycmVudFxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUoZHJvcEVsZW1lbnQpLnBvaW50ZXJFdmVudHMgPT09ICdub25lJykge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmIGNoZWNrZXIgcmV0dXJucyBmYWxzZSwgdGhlIGZvbGxvd2luZyBldmVudHMgc3VjaCBhcyBkcmFnZW50ZXIgYW5kIGRyYWdtb3ZlIHdpbGwgbm90IGJlIGZpcmVkLlxuICAgICAgZHJhZ2dpbmdJdGVtID0gY3JlYXRlSXRlbUZyb21JbnRlcmFjdEV2ZW50KGRyYWdnYWJsZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpXG4gICAgICByZXR1cm4gKFxuICAgICAgICAhcGFnZUNvbnRleHQudmlld09ubHkgJiZcbiAgICAgICAgZHJvcHBlZCAmJlxuICAgICAgICAhZHJhZ2dhYmxlRWxlbWVudC5jb250YWlucyhkcm9wRWxlbWVudCkgJiZcbiAgICAgICAgaXNEcmFnZ2luZ0l0ZW1BY2NlcHRlZChkcmFnZ2luZ0l0ZW0sIGxheW91dENvbnRleHQsIHByb3BzLCBsYXlvdXRJZClcbiAgICAgIClcbiAgICB9LFxuICAgIG9uZHJhZ2VudGVyOiAoZXZlbnQ6IEludGVyYWN0LkRyb3BFdmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBwcm9wcywgbGF5b3V0SWQsIHBhZ2VDb250ZXh0IH0gPSBjb250ZXh0UmVmLmN1cnJlbnRcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJvcC10YXJnZXQnKVxuICAgICAgaWYgKGxheW91dElkICE9PSBwYWdlQ29udGV4dC5yb290TGF5b3V0SWQpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2Ryb3AtYWN0aXZlJylcbiAgICAgIH1cbiAgICAgIGRyYWdnaW5nRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnRlcmFjdF9kcmFnZ2luZ19wbGFjZWhvbGRlcicpIHx8IGV2ZW50LnJlbGF0ZWRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGNvbnRhaW5lclJlY3QgPSBldmVudC5kcm9wem9uZS5nZXRSZWN0KGV2ZW50LnRhcmdldClcbiAgICAgIGlmIChwcm9wcy5vbkRyYWdFbnRlcikge1xuICAgICAgICBwcm9wcy5vbkRyYWdFbnRlcihkcmFnZ2luZ0l0ZW0pXG4gICAgICB9XG4gICAgICBpZiAocHJvcHMub25Ub2dnbGVEcmFnb3ZlckVmZmVjdCkge1xuICAgICAgICBwcm9wcy5vblRvZ2dsZURyYWdvdmVyRWZmZWN0KHRydWUsIGRyYWdnaW5nSXRlbSlcbiAgICAgIH1cbiAgICB9LFxuICAgIG9uZHJhZ2xlYXZlOiAoZXZlbnQ6IEludGVyYWN0LkRyb3BFdmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBwcm9wcyB9ID0gY29udGV4dFJlZi5jdXJyZW50XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3AtdGFyZ2V0JylcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wLWFjdGl2ZScpXG4gICAgICBkcmFnZ2luZ0VsZW1lbnQgPSBudWxsXG4gICAgICBjb250YWluZXJSZWN0ID0gbnVsbFxuICAgICAgaWYgKGxhc3REcmFnQ2FsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShsYXN0RHJhZ0NhbGwpXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcy5vbkRyYWdMZWF2ZSkge1xuICAgICAgICBwcm9wcy5vbkRyYWdMZWF2ZShkcmFnZ2luZ0l0ZW0pXG4gICAgICB9XG4gICAgICBpZiAocHJvcHMub25Ub2dnbGVEcmFnb3ZlckVmZmVjdCkge1xuICAgICAgICBwcm9wcy5vblRvZ2dsZURyYWdvdmVyRWZmZWN0KGZhbHNlLCBkcmFnZ2luZ0l0ZW0pXG4gICAgICB9XG4gICAgfSxcbiAgICBvbmRyb3Btb3ZlOiAoZXZlbnQ6IEludGVyYWN0LkRyb3BFdmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBwcm9wcyB9ID0gY29udGV4dFJlZi5jdXJyZW50XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgaWYgKGxhc3REcmFnQ2FsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShsYXN0RHJhZ0NhbGwpXG4gICAgICB9XG5cbiAgICAgIGxhc3REcmFnQ2FsbCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRyYWdFbGVtZW50UmVjdCA9IGV2ZW50LmRyYWdFdmVudC5yZWN0XG5cbiAgICAgICAgY29uc3QgY2xpZW50Q29vciA9IGV2ZW50LmRyYWdFdmVudC5faW50ZXJhY3Rpb24uY29vcmRzLmN1ci5jbGllbnRcbiAgICAgICAgY29uc3QgY2xpZW50WCA9IGNsaWVudENvb3IueCAtIGNvbnRhaW5lclJlY3Q/LmxlZnRcbiAgICAgICAgY29uc3QgY2xpZW50WSA9IGNsaWVudENvb3IueSAtIGNvbnRhaW5lclJlY3Q/LnRvcFxuXG4gICAgICAgIGlmIChwcm9wcy5vbkRyYWdPdmVyKSB7XG4gICAgICAgICAgcHJvcHMub25EcmFnT3ZlcihcbiAgICAgICAgICAgIGRyYWdnaW5nSXRlbSxcbiAgICAgICAgICAgIGRyYWdnaW5nRWxlbWVudCxcbiAgICAgICAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxlZnQ6IGRyYWdFbGVtZW50UmVjdC5sZWZ0IC0gY29udGFpbmVyUmVjdD8ubGVmdCxcbiAgICAgICAgICAgICAgdG9wOiBkcmFnRWxlbWVudFJlY3QudG9wIC0gY29udGFpbmVyUmVjdD8udG9wLFxuICAgICAgICAgICAgICB3aWR0aDogZHJhZ0VsZW1lbnRSZWN0LndpZHRoLFxuICAgICAgICAgICAgICBoZWlnaHQ6IGRyYWdFbGVtZW50UmVjdC5oZWlnaHQsXG4gICAgICAgICAgICAgIHJpZ2h0OiBkcmFnRWxlbWVudFJlY3QubGVmdCAtIGNvbnRhaW5lclJlY3Q/LmxlZnQgKyBkcmFnRWxlbWVudFJlY3Qud2lkdGgsXG4gICAgICAgICAgICAgIGJvdHRvbTogZHJhZ0VsZW1lbnRSZWN0LnRvcCAtIGNvbnRhaW5lclJlY3Q/LnRvcCArIGRyYWdFbGVtZW50UmVjdC5oZWlnaHRcbiAgICAgICAgICAgIH0gYXMgRE9NUmVjdCxcbiAgICAgICAgICAgIGNsaWVudFgsXG4gICAgICAgICAgICBjbGllbnRZLFxuICAgICAgICAgICAgZXZlbnQuZHJhZ0V2ZW50LnNwZWVkXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGxhc3REcmFnQ2FsbCA9IG51bGxcbiAgICAgIH0pXG4gICAgfSxcbiAgICBvbmRyb3A6IChldmVudDogSW50ZXJhY3QuRHJvcEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB7IHByb3BzIH0gPSBjb250ZXh0UmVmLmN1cnJlbnRcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC10YXJnZXQnKVxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3AtYWN0aXZlJylcbiAgICAgIGlmIChwcm9wcy5vblRvZ2dsZURyYWdvdmVyRWZmZWN0KSB7XG4gICAgICAgIHByb3BzLm9uVG9nZ2xlRHJhZ292ZXJFZmZlY3QoZmFsc2UsIGRyYWdnaW5nSXRlbSlcbiAgICAgIH1cblxuICAgICAgaWYgKGxhc3REcmFnQ2FsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShsYXN0RHJhZ0NhbGwpXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcy5vbkRyb3ApIHtcbiAgICAgICAgY29uc3QgZHJhZ0VsZW1lbnRSZWN0ID0gZXZlbnQuZHJhZ0V2ZW50LnJlY3RcblxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGRyYWdFbGVtZW50IGlzIHRvdGFsbHkgaW4gdGhlIGNvbnRhaW5lciByZWN0XG4gICAgICAgIGNvbnN0IGxlZnQgPSBkcmFnRWxlbWVudFJlY3QubGVmdCAtIGNvbnRhaW5lclJlY3QubGVmdFxuICAgICAgICBjb25zdCB0b3AgPSBkcmFnRWxlbWVudFJlY3QudG9wIC0gY29udGFpbmVyUmVjdC50b3BcblxuICAgICAgICBsZXQgaXRlbVJlY3Q6IFBhcnRpYWw8RE9NUmVjdE5vdFJlYWRPbmx5PiA9IHtcbiAgICAgICAgICBsZWZ0LFxuICAgICAgICAgIHRvcCxcbiAgICAgICAgICB3aWR0aDogZHJhZ0VsZW1lbnRSZWN0LndpZHRoLFxuICAgICAgICAgIGhlaWdodDogZHJhZ0VsZW1lbnRSZWN0LmhlaWdodFxuICAgICAgICB9XG4gICAgICAgIGl0ZW1SZWN0ID0gcmVzdHJpY3RJdGVtSW5Db250YWluZXIoaXRlbVJlY3QsIHsgbGVmdDogMCwgdG9wOiAwLCB3aWR0aDogY29udGFpbmVyUmVjdC53aWR0aCwgaGVpZ2h0OiBjb250YWluZXJSZWN0LmhlaWdodCB9KVxuICAgICAgICBpdGVtUmVjdC5yaWdodCA9IGl0ZW1SZWN0LmxlZnQgKyBpdGVtUmVjdC53aWR0aFxuICAgICAgICBpdGVtUmVjdC5ib3R0b20gPSBpdGVtUmVjdC50b3AgKyBpdGVtUmVjdC5oZWlnaHRcblxuICAgICAgICBjb25zdCBjbGllbnRDb29yID0gZXZlbnQuZHJhZ0V2ZW50Ll9pbnRlcmFjdGlvbi5jb29yZHMuY3VyLmNsaWVudFxuICAgICAgICBjb25zdCBjbGllbnRYID0gY2xpZW50Q29vci54IC0gY29udGFpbmVyUmVjdC5sZWZ0XG4gICAgICAgIGNvbnN0IGNsaWVudFkgPSBjbGllbnRDb29yLnkgLSBjb250YWluZXJSZWN0LnRvcFxuXG4gICAgICAgIHByb3BzLm9uRHJvcChkcmFnZ2luZ0l0ZW0sIGNvbnRhaW5lclJlY3QsIGl0ZW1SZWN0IGFzIERPTVJlY3QsIGNsaWVudFgsIGNsaWVudFkpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICBjbGFzc05hbWVzLFxuICBqc3gsXG4gIGNzcyxcbiAgcG9saXNoZWQsXG4gIEFwcE1vZGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgUGFnZUNvbnRleHQsXG4gIExheW91dENvbnRleHRcbn0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgdHlwZSBEcm9wQXJlYVByb3BzLCB0eXBlIERyb3BBcmVhQ29udGV4dCB9IGZyb20gJy4vZHJvcGFyZWEtY29tbW9uJ1xuaW1wb3J0IHsgaW5pdEludGVyYWN0aXZlIH0gZnJvbSAnLi9kcm9wYXJlYS1lZmZlY3QtaW50ZXJhY3RqcydcbmltcG9ydCB7IGluaXRINSB9IGZyb20gJy4vZHJvcGFyZWEtZWZmZWN0LWg1J1xuXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgKi9cbmV4cG9ydCBmdW5jdGlvbiBEcm9wQXJlYSAocHJvcHM6IERyb3BBcmVhUHJvcHMpIHtcbiAgY29uc3QgcmVmT2JqID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIGNvbnN0IGxheW91dElkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gcHJvcHMubGF5b3V0c1tzdGF0ZS5icm93c2VyU2l6ZU1vZGVdXG4gIH0pXG4gIGNvbnN0IGlzRGVzaWduTW9kZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcFJ1bnRpbWVJbmZvLmFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduXG4gIH0pXG4gIGNvbnN0IHBhZ2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChQYWdlQ29udGV4dClcbiAgY29uc3QgbGF5b3V0Q29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoTGF5b3V0Q29udGV4dClcblxuICBjb25zdCBjb250ZXh0UmVmID0gUmVhY3QudXNlUmVmPERyb3BBcmVhQ29udGV4dD4oKVxuICBjb250ZXh0UmVmLmN1cnJlbnQgPSB7IHByb3BzLCBsYXlvdXRJZCwgcGFnZUNvbnRleHQsIGxheW91dENvbnRleHQgfVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGludGVyYWN0YmxlXG4gICAgaWYgKHJlZk9iai5jdXJyZW50KSB7XG4gICAgICBpbnRlcmFjdGJsZSA9IGluaXRJbnRlcmFjdGl2ZShyZWZPYmouY3VycmVudCwgY29udGV4dFJlZilcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpbnRlcmFjdGJsZSkge1xuICAgICAgICBpbnRlcmFjdGJsZS51bnNldCgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWZPYmouY3VycmVudCkge1xuICAgICAgaW5pdEg1KHJlZk9iai5jdXJyZW50LCBjb250ZXh0UmVmKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3Qge1xuICAgIGNsYXNzTmFtZSxcbiAgICBzdHlsZSxcbiAgICBoaWdobGlnaHREcmFnb3ZlclxuICB9ID0gcHJvcHNcblxuICBjb25zdCBtZXJnZWRDbGFzcyA9IGNsYXNzTmFtZXMoJ2V4Yi1kcm9wLWFyZWEgZC1mbGV4JywgY2xhc3NOYW1lKVxuXG4gIGNvbnN0IGdldFN0eWxlID0gKCkgPT4ge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIHBhZGRpbmc6IGluaGVyaXQ7XG4gICAgICBwb2ludGVyLWV2ZW50czogJHtpc0Rlc2lnbk1vZGUgPyAnYXV0bycgOiAnbm9uZSAhaW1wb3J0YW50J307XG5cbiAgICAgICYgPiAuaGlnaGxpZ2h0LWNvbnRlbnQge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICAmLmRyb3AtdGFyZ2V0ID4gLmhpZ2hsaWdodC1jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIH1cblxuICAgICAgJi5kcm9wLWFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7cG9saXNoZWQucmdiYShwYWdlQ29udGV4dC5idWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs3MDBdLCAwLjIpfTtcbiAgICAgIH1cbiAgICBgXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e21lcmdlZENsYXNzfVxuICAgICAgY3NzPXtnZXRTdHlsZSgpfVxuICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgcmVmPXtlbCA9PiB7IHJlZk9iai5jdXJyZW50ID0gZWwgfX1cbiAgICA+XG4gICAgICB7aGlnaGxpZ2h0RHJhZ292ZXIgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMDAgaGlnaGxpZ2h0LWNvbnRlbnQnPlxuICAgICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBpbnRlcmFjdCB9IGZyb20gJ2ppbXUtY29yZS9kbmQnXG5pbXBvcnQgeyB1dGlscyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcblxuZXhwb3J0IGludGVyZmFjZSBSZXNpemVIYW5kbGVyUHJvcHMge1xuICBsYXlvdXRJdGVtSWQ6IHN0cmluZ1xuICByZXN0cmljdEVkZ2VzPzogYm9vbGVhblxuICBvblJlc2l6ZVN0YXJ0PzogKGlkOiBzdHJpbmcsIGluaXRXaWR0aDogbnVtYmVyLCBpbml0SGVpZ2h0OiBudW1iZXIpID0+IHZvaWRcbiAgb25SZXNpemluZz86IChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk/OiBib29sZWFuLCBzcGVlZD86IG51bWJlcikgPT4gdm9pZFxuICBvblJlc2l6ZUVuZD86IChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk/OiBib29sZWFuKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBjb25zdCBHTE9CQUxfUkVTSVpJTkdfQ0xBU1NfTkFNRSA9ICdpbnRlcmFjdGpzLXJlc2l6aW5nJ1xuXG5sZXQgaXNJdGVtUmVzaXppbmcgPSBmYWxzZVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZFJlc2l6ZUhhbmRsZXIgKFxuICBpbnRlcmFjdGFibGU6IEludGVyYWN0LkludGVyYWN0YWJsZSxcbiAgcmVzaXplSGFuZGxlclByb3BzOiBSZXNpemVIYW5kbGVyUHJvcHNcbik6IEludGVyYWN0LkludGVyYWN0YWJsZSB7XG4gIGlmICghaW50ZXJhY3RhYmxlKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBsZXQgZHhcbiAgbGV0IGR5XG4gIGxldCBkd1xuICBsZXQgZGhcbiAgbGV0IGxhc3RSZXNpemVDYWxsID0gbnVsbFxuICBjb25zdCB7IGxheW91dEl0ZW1JZCwgb25SZXNpemVTdGFydCwgb25SZXNpemluZywgb25SZXNpemVFbmQsIHJlc3RyaWN0RWRnZXMgPSB0cnVlIH0gPSByZXNpemVIYW5kbGVyUHJvcHNcblxuICByZXR1cm4gaW50ZXJhY3RhYmxlLnJlc2l6YWJsZSh7XG4gICAgaW5lcnRpYTogZmFsc2UsXG4gICAgZWRnZXM6IHtcbiAgICAgIHRvcDogJy5ybmQtcmVzaXplLXRvcCcsXG4gICAgICBsZWZ0OiB1dGlscy5pc1JUTCgpID8gJy5ybmQtcmVzaXplLXJpZ2h0JyA6ICcucm5kLXJlc2l6ZS1sZWZ0JyxcbiAgICAgIGJvdHRvbTogJy5ybmQtcmVzaXplLWJvdHRvbScsXG4gICAgICByaWdodDogdXRpbHMuaXNSVEwoKSA/ICcucm5kLXJlc2l6ZS1sZWZ0JyA6ICcucm5kLXJlc2l6ZS1yaWdodCdcbiAgICB9LFxuICAgIG1vZGlmaWVyczogW1xuICAgICAgLy8ga2VlcCB0aGUgZWRnZXMgaW5zaWRlIHRoZSBwYXJlbnRcbiAgICAgIGludGVyYWN0Lm1vZGlmaWVycy5yZXN0cmljdEVkZ2VzKHtcbiAgICAgICAgb3V0ZXI6IHJlc3RyaWN0RWRnZXMgPyAncGFyZW50JyA6IG51bGxcbiAgICAgIH0pLFxuICAgICAgLy8gbWluaW11bSBzaXplXG4gICAgICBpbnRlcmFjdC5tb2RpZmllcnMucmVzdHJpY3RTaXplKHtcbiAgICAgICAgbWluOiB7IHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiB9XG4gICAgICB9KVxuICAgIF0sXG4gICAgbGlzdGVuZXJzOiB7XG4gICAgICBzdGFydDogKGV2ZW50OiBJbnRlcmFjdC5SZXNpemVFdmVudCkgPT4ge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICBkeCA9IDBcbiAgICAgICAgZHkgPSAwXG4gICAgICAgIGR3ID0gMFxuICAgICAgICBkaCA9IDBcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgICAgIGNvbnN0IHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgaWYgKG9uUmVzaXplU3RhcnQpIHtcbiAgICAgICAgICBvblJlc2l6ZVN0YXJ0KGxheW91dEl0ZW1JZCwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpXG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKEdMT0JBTF9SRVNJWklOR19DTEFTU19OQU1FKVxuICAgICAgfSxcbiAgICAgIG1vdmU6IChldmVudDogSW50ZXJhY3QuUmVzaXplRXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgICBjb25zdCBkZWx0YVJlY3QgPSBldmVudC5kZWx0YVJlY3RcbiAgICAgICAgZHggKz0gZGVsdGFSZWN0LmxlZnRcbiAgICAgICAgZHkgKz0gZGVsdGFSZWN0LnRvcFxuICAgICAgICBkdyArPSBkZWx0YVJlY3Qud2lkdGhcbiAgICAgICAgZGggKz0gZGVsdGFSZWN0LmhlaWdodFxuICAgICAgICBpZiAobGFzdFJlc2l6ZUNhbGwpIHtcbiAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShsYXN0UmVzaXplQ2FsbClcbiAgICAgICAgICBsYXN0UmVzaXplQ2FsbCA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBsYXN0UmVzaXplQ2FsbCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgaWYgKG9uUmVzaXppbmcpIHtcbiAgICAgICAgICAgIG9uUmVzaXppbmcobGF5b3V0SXRlbUlkLCBkeCwgZHksIGR3LCBkaCwgZXZlbnQuc2hpZnRLZXksIGV2ZW50LnNwZWVkKVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBTaW5jZSB0aGlzIGZyYW1lIGRpZG4ndCBnZXQgY2FuY2VsbGVkLCB0aGUgbGFzdFVwZGF0ZUNhbGwgc2hvdWxkIGJlIHJlc2V0IHNvIG5ldyBmcmFtZXMgY2FuIGJlIGNhbGxlZC5cbiAgICAgICAgICBsYXN0UmVzaXplQ2FsbCA9IG51bGxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlbmQ6IChldmVudDogSW50ZXJhY3QuUmVzaXplRXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgaWYgKGxhc3RSZXNpemVDYWxsKSB7XG4gICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUobGFzdFJlc2l6ZUNhbGwpXG4gICAgICAgICAgbGFzdFJlc2l6ZUNhbGwgPSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9uUmVzaXplRW5kKSB7XG4gICAgICAgICAgY29uc3QgZGVsdGFSZWN0ID0gZXZlbnQuZGVsdGFSZWN0XG4gICAgICAgICAgZHggKz0gZGVsdGFSZWN0LmxlZnRcbiAgICAgICAgICBkeSArPSBkZWx0YVJlY3QudG9wXG4gICAgICAgICAgZHcgKz0gZGVsdGFSZWN0LndpZHRoXG4gICAgICAgICAgZGggKz0gZGVsdGFSZWN0LmhlaWdodFxuICAgICAgICAgIG9uUmVzaXplRW5kKGxheW91dEl0ZW1JZCwgZHgsIGR5LCBkdywgZGgsIGV2ZW50LnNoaWZ0S2V5KVxuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShHTE9CQUxfUkVTSVpJTkdfQ0xBU1NfTkFNRSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRJc1Jlc2l6aW5nICh2YWx1ZTogYm9vbGVhbikge1xuICBpc0l0ZW1SZXNpemluZyA9IHZhbHVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Jlc2l6aW5nICgpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzSXRlbVJlc2l6aW5nXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGNsYXNzTmFtZXMsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIElNTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgSU1TdGF0ZSxcbiAgTGF5b3V0SXRlbVR5cGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgaW50ZXJhY3QgfSBmcm9tICdqaW11LWNvcmUvZG5kJ1xuaW1wb3J0ICogYXMgaG9pc3ROb25SZWFjdFN0YXRpYyBmcm9tICdob2lzdC1ub24tcmVhY3Qtc3RhdGljcydcbmltcG9ydCB7IGJpbmREcmFnSGFuZGxlciB9IGZyb20gJy4vZHJhZy1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgYmluZFJlc2l6ZUhhbmRsZXIgfSBmcm9tICcuL3Jlc2l6ZS1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHtcbiAgdHlwZSBMYXlvdXRJdGVtUHJvcHMsXG4gIFBhZ2VDb250ZXh0LFxuICB0eXBlIFBhZ2VDb250ZXh0UHJvcHMsXG4gIHV0aWxzXG59IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcblxuZXhwb3J0IGludGVyZmFjZSBSbmRPcHRpb25zIHtcbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvblxuICB0b3A/OiBib29sZWFuXG4gIGxlZnQ/OiBib29sZWFuXG4gIHJpZ2h0PzogYm9vbGVhblxuICBib3R0b20/OiBib29sZWFuXG4gIHJlc3RyaWN0PzogYm9vbGVhblxuICBncmlkU2l6ZT86IG51bWJlclxuICB1c2VEcmFnSGFuZGxlcj86IGJvb2xlYW5cbiAgZm9yY2VBc3BlY3RSYXRpbz86IGJvb2xlYW5cbiAgYXNwZWN0UmF0aW8/OiBudW1iZXJcbiAgc3R5bGU/OiBhbnlcbiAgY2xhc3NOYW1lPzogYW55XG4gIG9uUmVzaXplU3RhcnQ/OiAoaWQ6IHN0cmluZywgaW5pdFdpZHRoOiBudW1iZXIsIGluaXRIZWlnaHQ6IG51bWJlcikgPT4gdm9pZFxuICBvblJlc2l6aW5nPzogKGlkOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uUmVzaXplRW5kPzogKGlkOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uRHJhZ1N0YXJ0PzogKGlkOiBzdHJpbmcpID0+IHZvaWRcbiAgb25EcmFnZ2luZz86IChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkXG4gIG9uRHJhZ0VuZD86IChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBSbmRXcmFwcGVyUHJvcHMge1xuICBpc0lubGluZUVkaXRpbmc6IGJvb2xlYW5cbiAgc3VwcG9ydFJlcGVhdDogYm9vbGVhblxuICBpc0xheW91dFdpZGdldDogYm9vbGVhblxuICBzZWxlY3RlZDogYm9vbGVhblxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwU3RhdGVUb1JuZFdyYXBwZXJQcm9wcyAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMgJiBSbmRPcHRpb25zKTogUm5kV3JhcHBlclByb3BzIHtcbiAgY29uc3QgbGF5b3V0SWQgPSBvd25Qcm9wcy5sYXlvdXRJZFxuICAvLyBjb25zdCBsYXlvdXQgPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF07XG4gIC8vIGNvbnN0IGxheW91dEl0ZW1JZCA9IG93blByb3BzLmxheW91dEl0ZW1JZDtcbiAgY29uc3Qgc2VsZWN0aW9uID0gc3RhdGUuYXBwUnVudGltZUluZm8uc2VsZWN0aW9uXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBvd25Qcm9wcy5sYXlvdXRJdGVtXG4gIGxldCBzZWxlY3RlZCA9IGZhbHNlXG4gIGxldCBpc0lubGluZUVkaXRpbmcgPSBmYWxzZVxuICBsZXQgc3VwcG9ydFJlcGVhdCA9IGZhbHNlXG4gIGxldCBpc0xheW91dFdpZGdldCA9IGZhbHNlXG5cbiAgaWYgKGxheW91dEl0ZW0pIHtcbiAgICBzZWxlY3RlZCA9IEJvb2xlYW4oc2VsZWN0aW9uICYmIGxheW91dElkID09PSBzZWxlY3Rpb24ubGF5b3V0SWQgJiYgbGF5b3V0SXRlbS5pZCA9PT0gc2VsZWN0aW9uLmxheW91dEl0ZW1JZClcbiAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgIGNvbnN0IHdpZGdldCA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG4gICAgICBjb25zdCBzdXBwb3J0SW5saW5lRWRpdGluZyA9IHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/LnN1cHBvcnRJbmxpbmVFZGl0aW5nXG4gICAgICBzdXBwb3J0UmVwZWF0ID0gd2lkZ2V0Py5tYW5pZmVzdD8ucHJvcGVydGllcz8uc3VwcG9ydFJlcGVhdFxuICAgICAgaWYgKHN1cHBvcnRJbmxpbmVFZGl0aW5nKSB7XG4gICAgICAgIGNvbnN0IHdpZGdldFJ1bnRpbWVJbmZvID0gc3RhdGUud2lkZ2V0c1J1bnRpbWVJbmZvW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG4gICAgICAgIGlzSW5saW5lRWRpdGluZyA9IHdpZGdldFJ1bnRpbWVJbmZvICYmIHdpZGdldFJ1bnRpbWVJbmZvLmlzSW5saW5lRWRpdGluZ1xuICAgICAgfVxuICAgICAgaXNMYXlvdXRXaWRnZXQgPSB1dGlscy5pc1dpZGdldEhhc0VtYmVkZGVkTGF5b3V0KGxheW91dEl0ZW0ud2lkZ2V0SWQsIHN0YXRlLmFwcENvbmZpZylcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNlbGVjdGVkLFxuICAgIHN1cHBvcnRSZXBlYXQsXG4gICAgaXNJbmxpbmVFZGl0aW5nLFxuICAgIGlzTGF5b3V0V2lkZ2V0XG4gIH1cbn1cblxuY29uc3QgZW1wdHlGdW5jID0gKCkgPT4ge31cblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhSbmQgKGF1dG9TZWxlY3Q/OiBib29sZWFuKSB7XG4gIHJldHVybiAoXG4gICAgV3JhcHBlZENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50Q2xhc3M8XG4gICAgTGF5b3V0SXRlbVByb3BzICYge1xuICAgICAgZGlzYWJsZVJlc2l6aW5nPzogYm9vbGVhblxuICAgICAgaXNEcmFnZ2luZz86IGJvb2xlYW5cbiAgICAgIGlzUmVzaXppbmc/OiBib29sZWFuXG4gICAgfVxuICAgID5cbiAgKTogUmVhY3QuQ29tcG9uZW50Q2xhc3M8Um5kT3B0aW9ucyAmIExheW91dEl0ZW1Qcm9wcyAmIHsgd2lkZ2V0SWQ/OiBzdHJpbmcsIFt4OiBzdHJpbmddOiBhbnkgfT4gPT4ge1xuICAgIGNsYXNzIFJuZFdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFJuZFdyYXBwZXJQcm9wcyAmIFJuZE9wdGlvbnMgJiBMYXlvdXRJdGVtUHJvcHM+IHtcbiAgICAgIHN0YXRpYyBkZWZhdWx0UHJvcHM6IFBhcnRpYWw8Um5kT3B0aW9ucz4gPSB7XG4gICAgICAgIGxlZnQ6IHRydWUsXG4gICAgICAgIHRvcDogdHJ1ZSxcbiAgICAgICAgcmlnaHQ6IHRydWUsXG4gICAgICAgIGJvdHRvbTogdHJ1ZSxcbiAgICAgICAgcmVzdHJpY3Q6IGZhbHNlLFxuICAgICAgICBvblJlc2l6ZVN0YXJ0OiBlbXB0eUZ1bmMsXG4gICAgICAgIG9uUmVzaXppbmc6IGVtcHR5RnVuYyxcbiAgICAgICAgb25SZXNpemVFbmQ6IGVtcHR5RnVuYyxcbiAgICAgICAgb25EcmFnU3RhcnQ6IGVtcHR5RnVuYyxcbiAgICAgICAgb25EcmFnZ2luZzogZW1wdHlGdW5jLFxuICAgICAgICBvbkRyYWdFbmQ6IGVtcHR5RnVuY1xuICAgICAgfVxuXG4gICAgICByZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD5cbiAgICAgIGludGVyYWN0YWJsZTogSW50ZXJhY3QuSW50ZXJhY3RhYmxlXG4gICAgICByb290TGF5b3V0SWQ6IHN0cmluZ1xuXG4gICAgICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpXG4gICAgICAgIHRoaXMucmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gICAgICB9XG5cbiAgICAgIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGxheW91dElkLFxuICAgICAgICAgIGxheW91dEl0ZW1JZCxcbiAgICAgICAgICBsYXlvdXRJdGVtLFxuICAgICAgICAgIG9uUmVzaXplU3RhcnQsXG4gICAgICAgICAgb25SZXNpemluZyxcbiAgICAgICAgICBvblJlc2l6ZUVuZCxcbiAgICAgICAgICBvbkRyYWdTdGFydCxcbiAgICAgICAgICBvbkRyYWdnaW5nLFxuICAgICAgICAgIG9uRHJhZ0VuZCxcbiAgICAgICAgICB1c2VEcmFnSGFuZGxlclxuICAgICAgICB9ID0gdGhpcy5wcm9wc1xuXG4gICAgICAgIGlmICh0aGlzLnJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUgPSBpbnRlcmFjdCh0aGlzLnJlZi5jdXJyZW50KS5vcmlnaW4oJ3BhcmVudCcpXG4gICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUgPSBiaW5kRHJhZ0hhbmRsZXIodGhpcy5pbnRlcmFjdGFibGUgYXMgYW55LCB7XG4gICAgICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgICAgIGxheW91dEl0ZW1JZCxcbiAgICAgICAgICAgIHVzZURyYWdIYW5kbGVyLFxuICAgICAgICAgICAgb25EcmFnZ2luZyxcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0LFxuICAgICAgICAgICAgb25EcmFnRW5kLFxuICAgICAgICAgICAgaXRlbVR5cGU6IGxheW91dEl0ZW0udHlwZSxcbiAgICAgICAgICAgIHJvb3RMYXlvdXRJZDogKCkgPT4gdGhpcy5yb290TGF5b3V0SWQsXG4gICAgICAgICAgICByZXN0cmljdDogKCkgPT4gdGhpcy5wcm9wcy5yZXN0cmljdFxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUgPSBiaW5kUmVzaXplSGFuZGxlcih0aGlzLmludGVyYWN0YWJsZSwge1xuICAgICAgICAgICAgbGF5b3V0SXRlbUlkLFxuICAgICAgICAgICAgb25SZXNpemluZyxcbiAgICAgICAgICAgIG9uUmVzaXplU3RhcnQsXG4gICAgICAgICAgICBvblJlc2l6ZUVuZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29tcG9uZW50V2lsbFVuTW91bnQgKCkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcmFjdGFibGUpIHtcbiAgICAgICAgICB0aGlzLmludGVyYWN0YWJsZS51bnNldCgpXG4gICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUgPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZ2V0U3R5bGUgKGlzSW5saW5lRWRpdGluZzogYm9vbGVhbikge1xuICAgICAgICByZXR1cm4gY3NzYFxuICAgICAgICAgICR7dGhpcy5hc3BlY3RSYXRpb1N0eWxlKCl9O1xuXG4gICAgICAgICAgJi5kcmFnZ2luZyB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgdG91Y2gtYWN0aW9uOiAke2lzSW5saW5lRWRpdGluZyA/ICdhdXRvJyA6ICdub25lJ307XG4gICAgICAgICAgdXNlci1zZWxlY3Q6ICR7aXNJbmxpbmVFZGl0aW5nID8gJ2F1dG8nIDogJ25vbmUnfTtcbiAgICAgICAgYFxuICAgICAgfVxuXG4gICAgICBhc3BlY3RSYXRpb1N0eWxlICgpIHtcbiAgICAgICAgY29uc3QgeyBhc3BlY3RSYXRpbywgZm9yY2VBc3BlY3RSYXRpbzoga2VlcEFzcGVjdFJhdGlvIH0gPSB0aGlzLnByb3BzXG4gICAgICAgIGlmIChrZWVwQXNwZWN0UmF0aW8pIHtcbiAgICAgICAgICByZXR1cm4gY3NzYFxuICAgICAgICAgICAgJiA+IGRpdi5ybmQtYXNwZWN0LXJhdGlvLXdyYXBwZXIge1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogJHthc3BlY3RSYXRpbyAqIDEwMH0lO1xuXG4gICAgICAgICAgICAgICYgPiBkaXYge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIGBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3NzYFxuICAgICAgICAgICYgPiAucm5kLWFzcGVjdC1yYXRpby13cmFwcGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICB9XG4gICAgICAgIGBcbiAgICAgIH1cblxuICAgICAgcmVuZGVyICgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8UGFnZUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgICB7KHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFByb3BzKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMucm9vdExheW91dElkID0gcGFnZUNvbnRleHQucm9vdExheW91dElkXG4gICAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBncmlkU2l6ZSxcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGUsXG4gICAgICAgICAgICAgICAgb25SZXNpemVTdGFydCxcbiAgICAgICAgICAgICAgICBvblJlc2l6aW5nLFxuICAgICAgICAgICAgICAgIG9uUmVzaXplRW5kLFxuICAgICAgICAgICAgICAgIHN0eWxlLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICB1c2VEcmFnSGFuZGxlcixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICAgICAgICAuLi5vdGhlclByb3BzXG4gICAgICAgICAgICAgIH0gPSB0aGlzLnByb3BzXG4gICAgICAgICAgICAgIGNvbnN0IHsgaXNJbmxpbmVFZGl0aW5nIH0gPSB0aGlzLnByb3BzXG5cbiAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkQ2xhc3MgPSBjbGFzc05hbWVzKCdleGItcm5kJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgJ2Z1bmN0aW9uYWwtd2lkZ2V0JzogIXRoaXMucHJvcHMuaXNMYXlvdXRXaWRnZXRcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICBjb25zdCBtZXJnZWRTdHlsZSA9IHR5cGVvZiBzdHlsZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IEpTT04ucGFyc2Uoc3R5bGUpXG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmZvcmNlQXNwZWN0UmF0aW8pIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRTdHlsZS5oZWlnaHQgPSAnYXV0bydcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXttZXJnZWRDbGFzc31cbiAgICAgICAgICAgICAgICAgIHJlZj17dGhpcy5yZWZ9XG4gICAgICAgICAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoaXNJbmxpbmVFZGl0aW5nKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtbGF5b3V0aWQ9e3RoaXMucHJvcHMubGF5b3V0SWR9XG4gICAgICAgICAgICAgICAgICBkYXRhLWxheW91dGl0ZW1pZD17dGhpcy5wcm9wcy5sYXlvdXRJdGVtSWR9XG4gICAgICAgICAgICAgICAgICBkYXRhLXJlcGVhdGFibGU9e3RoaXMucHJvcHMuc3VwcG9ydFJlcGVhdH1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXttZXJnZWRTdHlsZX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncm5kLWFzcGVjdC1yYXRpby13cmFwcGVyJz5cbiAgICAgICAgICAgICAgICAgICAgPFdyYXBwZWRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRJZD17dGhpcy5wcm9wcy5sYXlvdXRJZH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctMTAwJ1xuICAgICAgICAgICAgICAgICAgICAgIGxheW91dEl0ZW1JZD17dGhpcy5wcm9wcy5sYXlvdXRJdGVtSWR9XG4gICAgICAgICAgICAgICAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA8L1BhZ2VDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgSG9pc3RlZENvbXBvbmVudCA9IGhvaXN0Tm9uUmVhY3RTdGF0aWMoUm5kV3JhcHBlciwgV3JhcHBlZENvbXBvbmVudClcbiAgICByZXR1cm4gUmVhY3RSZWR1eC5jb25uZWN0PFJuZFdyYXBwZXJQcm9wcywgdW5rbm93biwgUm5kT3B0aW9ucyAmIExheW91dEl0ZW1Qcm9wcz4obWFwU3RhdGVUb1JuZFdyYXBwZXJQcm9wcykoXG4gICAgICBIb2lzdGVkQ29tcG9uZW50XG4gICAgKSBhcyB1bmtub3duIGFzIFJlYWN0LkNvbXBvbmVudENsYXNzPFJuZE9wdGlvbnMgJiBMYXlvdXRJdGVtUHJvcHMgJiB7IHdpZGdldElkPzogc3RyaW5nLCBbeDogc3RyaW5nXTogYW55IH0+XG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgUmVhY3RSZWR1eCwgTGF5b3V0VHlwZSwgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7XG4gIHV0aWxzLFxuICB0eXBlIExheW91dFByb3BzLFxuICB0eXBlIFN0YXRlVG9MYXlvdXRQcm9wcyxcbiAgZmluZExheW91dEJ1aWxkZXIsXG4gIExheW91dENvbnRleHRcbn0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuXG5jb25zdCBlbnVtIExheW91dEVudHJ5TW9kZSB7XG4gIENob29zZUxheW91dFR5cGUsXG4gIFJlbmRlckxheW91dCxcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbW9kZTogTGF5b3V0RW50cnlNb2RlXG59XG5cbmNsYXNzIExheW91dEVudHJ5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzLCBTdGF0ZT4ge1xuICBzdGF0ZTogU3RhdGUgPSB7XG4gICAgbW9kZTogTGF5b3V0RW50cnlNb2RlLlJlbmRlckxheW91dFxuICB9XG5cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlIChuZXh0UHJvcHM6IExheW91dFByb3BzKSB7XG4gICAgaWYgKG5leHRQcm9wcy5pc1BhZ2VJdGVtICYmICFuZXh0UHJvcHMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhuZXh0UHJvcHMpLnNvbWUoa2V5ID0+IG5leHRQcm9wc1trZXldICE9PSB0aGlzLnByb3BzW2tleV0pXG4gIH1cblxuICBvbkxheW91dFR5cGVTZWxlY3RlZCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1vZGU6IExheW91dEVudHJ5TW9kZS5SZW5kZXJMYXlvdXRcbiAgICB9KVxuICB9XG5cbiAgc3dpdGNoVG9DaG9vc2luZ01vYmUgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBtb2RlOiBMYXlvdXRFbnRyeU1vZGUuQ2hvb3NlTGF5b3V0VHlwZVxuICAgIH0pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG5cbiAgICBpZiAoIWxheW91dCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBMYXlvdXRFbGVtZW50ID0gZmluZExheW91dEJ1aWxkZXIobGF5b3V0LnR5cGUgfHwgTGF5b3V0VHlwZS5GbG93TGF5b3V0KSAvLyBkZWZhdWx0IGxheW91dCB0eXBlIGlzIEZsb3dMYXlvdXRcbiAgICBpZiAoIUxheW91dEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgeyBpc0l0ZW1BY2NlcHRlZCwgLi4ub3RoZXJQcm9wcyB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7XG4gICAgICAgIGlzSXRlbUFjY2VwdGVkOiBpc0l0ZW1BY2NlcHRlZCB8fCBkZWZhdWx0V2lkZ2V0RmlsdGVyXG4gICAgICB9fVxuICAgICAgPlxuICAgICAgICA8TGF5b3V0RWxlbWVudCB7Li4ub3RoZXJQcm9wc30gLz5cbiAgICAgIDwvTGF5b3V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgTGF5b3V0UHJvcHM+KHV0aWxzLm1hcFN0YXRlVG9MYXlvdXRQcm9wcykoTGF5b3V0RW50cnkpXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0V2lkZ2V0RmlsdGVyIChpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcykge1xuICByZXR1cm4gaXRlbSAhPSBudWxsXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBsb2Rhc2gsXG4gIHR5cGUgTGF5b3V0SXRlbVR5cGUsXG4gIExheW91dFR5cGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgaW50ZXJhY3QgfSBmcm9tICdqaW11LWNvcmUvZG5kJ1xuaW1wb3J0IHtcbiAgYmluZERyYWdIYW5kbGVyLFxuICBzZXRJc0RyYWdnaW5nLFxuICBMSU1JVEVEX0JPVU5EQVJZX0NMQVNTX05BTUVcbn0gZnJvbSAnLi9pbnRlcmFjdGl2ZS9kcmFnLWV2ZW50LWhhbmRsZXInXG5pbXBvcnQgeyBiaW5kUmVzaXplSGFuZGxlciwgc2V0SXNSZXNpemluZyB9IGZyb20gJy4vaW50ZXJhY3RpdmUvcmVzaXplLWV2ZW50LWhhbmRsZXInXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHJlc3RyaWN0OiBib29sZWFuXG4gIGxheW91dElkOiBzdHJpbmdcbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmdcbiAgbGF5b3V0VHlwZTogTGF5b3V0VHlwZVxuICBsYXlvdXRJdGVtVHlwZTogTGF5b3V0SXRlbVR5cGVcbiAgdXNlRHJhZ0hhbmRsZXI6IGJvb2xlYW5cbiAgcmVzaXplT2JzZXJ2ZXI/OiBSZXNpemVPYnNlcnZlclxuICBnZXRDdXJyZW50Um9vdExheW91dElkOiAoKSA9PiBzdHJpbmdcbiAgb25EcmFnU3RhcnQ/OiAobGF5b3V0SXRlbUlkOiBzdHJpbmcpID0+IHZvaWRcbiAgb25EcmFnZ2luZz86IChsYXlvdXRJdGVtSWQ6IHN0cmluZywgZHg6IG51bWJlciwgZHk6IG51bWJlcikgPT4gdm9pZFxuICBvbkRyYWdFbmQ/OiAobGF5b3V0SXRlbUlkOiBzdHJpbmcsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpID0+IHZvaWRcbiAgb25SZXNpemVTdGFydD86IChsYXlvdXRJdGVtSWQ6IHN0cmluZywgaW5pdFdpZHRoOiBudW1iZXIsIGluaXRIZWlnaHQ6IG51bWJlcikgPT4gdm9pZFxuICBvblJlc2l6aW5nPzogKGxheW91dEl0ZW1JZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk/OiBib29sZWFuLCBzcGVlZD86IG51bWJlcikgPT4gdm9pZFxuICBvblJlc2l6ZUVuZD86IChsYXlvdXRJdGVtSWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIsIHNoaWZ0S2V5PzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5jb25zdCBwYXJlbnRSZXN0cmljdCA9IGludGVyYWN0Lm1vZGlmaWVycy5yZXN0cmljdFJlY3Qoe1xuICByZXN0cmljdGlvbjogJ3BhcmVudCdcbn0pXG5cbmNvbnN0IGJvdW5kYXJ5UmVzdHJpY3QgPSBpbnRlcmFjdC5tb2RpZmllcnMucmVzdHJpY3RSZWN0KHtcbiAgcmVzdHJpY3Rpb246IGBkaXYuJHtMSU1JVEVEX0JPVU5EQVJZX0NMQVNTX05BTUV9YFxufSlcblxuLyoqXG4gKiBCaW5kIGRyYWcgYW5kIHJlc2l6ZSBjYXBhYmlsaXR5XG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VEbmRCaW5kaW5nIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBsYXlvdXRUeXBlLCBsYXlvdXRJdGVtVHlwZSwgdXNlRHJhZ0hhbmRsZXIsIHJlc3RyaWN0LCBnZXRDdXJyZW50Um9vdExheW91dElkIH0gPSBwcm9wc1xuICBjb25zdCBpbnRlcmFjdGFibGVSZWYgPSBSZWFjdC51c2VSZWY8SW50ZXJhY3QuSW50ZXJhY3RhYmxlPigpXG4gIGNvbnN0IHdpZGdldFJlc2l6ZVN0YXJ0SGFuZGxlclJlZiA9IFJlYWN0LnVzZVJlZjwoaW5pdFdpZHRoOiBudW1iZXIsIGluaXRIZWlnaHQ6IG51bWJlcikgPT4gdm9pZD4oKVxuICBjb25zdCB3aWRnZXRSZXNpemluZ0hhbmRsZXJSZWYgPSBSZWFjdC51c2VSZWY8KGR4OiBudW1iZXIsIGR5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIpID0+IHZvaWQ+KClcbiAgY29uc3Qgd2lkZ2V0UmVzaXplRW5kSGFuZGxlclJlZiA9IFJlYWN0LnVzZVJlZjwoZHg6IG51bWJlciwgZHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlcikgPT4gdm9pZD4oKVxuICBjb25zdCB3aWRnZXREcmFnU3RhcnRIYW5kbGVyUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IHZvaWQ+KClcbiAgY29uc3Qgd2lkZ2V0RHJhZ2dpbmdIYW5kbGVyUmVmID0gUmVhY3QudXNlUmVmPChkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkPigpXG4gIGNvbnN0IHdpZGdldERyYWdFbmRIYW5kbGVyUmVmID0gUmVhY3QudXNlUmVmPChkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkPigpXG4gIGNvbnN0IGVsZW1lbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcblxuICBmdW5jdGlvbiBvbkl0ZW1EcmFnU3RhcnQgKGxheW91dEl0ZW1JZDogc3RyaW5nKSB7XG4gICAgc2V0SXNEcmFnZ2luZyh0cnVlKVxuICAgIHNldElzUmVzaXppbmcoZmFsc2UpXG4gICAgaWYgKHByb3BzLm9uRHJhZ1N0YXJ0KSB7XG4gICAgICBwcm9wcy5vbkRyYWdTdGFydChsYXlvdXRJdGVtSWQpXG4gICAgfVxuICAgIGlmICh3aWRnZXREcmFnU3RhcnRIYW5kbGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHdpZGdldERyYWdTdGFydEhhbmRsZXJSZWYuY3VycmVudCgpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25JdGVtRHJhZ2dpbmcgKGlkOiBzdHJpbmcsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpIHtcbiAgICBpZiAocHJvcHMub25EcmFnZ2luZykge1xuICAgICAgcHJvcHMub25EcmFnZ2luZyhpZCwgZHgsIGR5KVxuICAgIH1cbiAgICBpZiAod2lkZ2V0RHJhZ2dpbmdIYW5kbGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHdpZGdldERyYWdnaW5nSGFuZGxlclJlZi5jdXJyZW50KGR4LCBkeSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkl0ZW1EcmFnRW5kIChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSB7XG4gICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpXG4gICAgfSlcbiAgICBpZiAocHJvcHMub25EcmFnRW5kKSB7XG4gICAgICBwcm9wcy5vbkRyYWdFbmQoaWQsIGR4LCBkeSlcbiAgICB9XG4gICAgaWYgKHdpZGdldERyYWdFbmRIYW5kbGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHdpZGdldERyYWdFbmRIYW5kbGVyUmVmLmN1cnJlbnQoZHgsIGR5KVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uSXRlbVJlc2l6ZVN0YXJ0IChsYXlvdXRJdGVtSWQ6IHN0cmluZywgaW5pdFdpZHRoOiBudW1iZXIsIGluaXRIZWlnaHQ6IG51bWJlcikge1xuICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpXG4gICAgc2V0SXNSZXNpemluZyh0cnVlKVxuICAgIGlmIChwcm9wcy5vblJlc2l6ZVN0YXJ0KSB7XG4gICAgICBwcm9wcy5vblJlc2l6ZVN0YXJ0KGxheW91dEl0ZW1JZCwgaW5pdFdpZHRoLCBpbml0SGVpZ2h0KVxuICAgIH1cbiAgICBpZiAod2lkZ2V0UmVzaXplU3RhcnRIYW5kbGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHdpZGdldFJlc2l6ZVN0YXJ0SGFuZGxlclJlZi5jdXJyZW50KGluaXRXaWR0aCwgaW5pdEhlaWdodClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkl0ZW1SZXNpemluZyAobGF5b3V0SXRlbUlkOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyLCBzaGlmdEtleT86IGJvb2xlYW4sIHNwZWVkPzogbnVtYmVyKSB7XG4gICAgaWYgKHByb3BzLm9uUmVzaXppbmcpIHtcbiAgICAgIHByb3BzLm9uUmVzaXppbmcobGF5b3V0SXRlbUlkLCB4LCB5LCBkdywgZGgsIHNoaWZ0S2V5LCBzcGVlZClcbiAgICB9XG4gICAgaWYgKHdpZGdldFJlc2l6aW5nSGFuZGxlclJlZi5jdXJyZW50KSB7XG4gICAgICB3aWRnZXRSZXNpemluZ0hhbmRsZXJSZWYuY3VycmVudCh4LCB5LCBkdywgZGgpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25JdGVtUmVzaXplRW5kIChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk/OiBib29sZWFuKSB7XG4gICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgIHNldElzUmVzaXppbmcoZmFsc2UpXG4gICAgfSlcbiAgICBpZiAocHJvcHMub25SZXNpemVFbmQpIHtcbiAgICAgIHByb3BzLm9uUmVzaXplRW5kKGlkLCB4LCB5LCBkdywgZGgsIHNoaWZ0S2V5KVxuICAgIH1cbiAgICBpZiAod2lkZ2V0UmVzaXplRW5kSGFuZGxlclJlZi5jdXJyZW50KSB7XG4gICAgICB3aWRnZXRSZXNpemVFbmRIYW5kbGVyUmVmLmN1cnJlbnQoeCwgeSwgZHcsIGRoKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHJlZ2lzdGVyV2lkZ2V0SW5pdFJlc2l6ZUhhbmRsZXIgPSBSZWFjdC51c2VDYWxsYmFjaygob25SZXNpemVTdGFydCwgb25SZXNpemluZywgb25SZXNpemVFbmQpID0+IHtcbiAgICB3aWRnZXRSZXNpemVTdGFydEhhbmRsZXJSZWYuY3VycmVudCA9IG9uUmVzaXplU3RhcnRcbiAgICB3aWRnZXRSZXNpemluZ0hhbmRsZXJSZWYuY3VycmVudCA9IG9uUmVzaXppbmdcbiAgICB3aWRnZXRSZXNpemVFbmRIYW5kbGVyUmVmLmN1cnJlbnQgPSBvblJlc2l6ZUVuZFxuICB9LCBbXSlcblxuICBjb25zdCByZWdpc3RlcldpZGdldEluaXREcmFnSGFuZGxlciA9IFJlYWN0LnVzZUNhbGxiYWNrKChvbkRyYWdTdGFydCwgb25EcmFnZ2luZywgb25EcmFnRW5kKSA9PiB7XG4gICAgd2lkZ2V0RHJhZ1N0YXJ0SGFuZGxlclJlZi5jdXJyZW50ID0gb25EcmFnU3RhcnRcbiAgICB3aWRnZXREcmFnZ2luZ0hhbmRsZXJSZWYuY3VycmVudCA9IG9uRHJhZ2dpbmdcbiAgICB3aWRnZXREcmFnRW5kSGFuZGxlclJlZi5jdXJyZW50ID0gb25EcmFnRW5kXG4gIH0sIFtdKVxuXG4gIGNvbnN0IHNldFJlZkVsZW1lbnQgPSBSZWFjdC51c2VDYWxsYmFjaygoZWxlbWVudDogSFRNTERpdkVsZW1lbnQpID0+IHtcbiAgICBlbGVtZW50UmVmLmN1cnJlbnQgPSBlbGVtZW50XG5cbiAgICBpZiAoIWludGVyYWN0YWJsZVJlZi5jdXJyZW50KSB7XG4gICAgICBpbnRlcmFjdGFibGVSZWYuY3VycmVudCA9IGludGVyYWN0KGVsZW1lbnQpLm9yaWdpbigncGFyZW50JylcbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gYmluZERyYWdIYW5kbGVyKGludGVyYWN0YWJsZVJlZi5jdXJyZW50IGFzIGFueSwge1xuICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkLFxuICAgICAgICB1c2VEcmFnSGFuZGxlcixcbiAgICAgICAgb25EcmFnZ2luZzogb25JdGVtRHJhZ2dpbmcsXG4gICAgICAgIG9uRHJhZ1N0YXJ0OiBvbkl0ZW1EcmFnU3RhcnQsXG4gICAgICAgIG9uRHJhZ0VuZDogb25JdGVtRHJhZ0VuZCxcbiAgICAgICAgaXRlbVR5cGU6IGxheW91dEl0ZW1UeXBlLFxuICAgICAgICByb290TGF5b3V0SWQ6IGdldEN1cnJlbnRSb290TGF5b3V0SWQsXG4gICAgICAgIHJlc3RyaWN0OiAoKSA9PiByZXN0cmljdFxuICAgICAgfSlcbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gYmluZFJlc2l6ZUhhbmRsZXIoaW50ZXJhY3RhYmxlUmVmLmN1cnJlbnQsIHtcbiAgICAgICAgbGF5b3V0SXRlbUlkLFxuICAgICAgICBvblJlc2l6aW5nOiBvbkl0ZW1SZXNpemluZyxcbiAgICAgICAgcmVzdHJpY3RFZGdlczogbGF5b3V0VHlwZSA9PT0gTGF5b3V0VHlwZS5GaXhlZExheW91dCwgLy8gZml4ZWQgbGF5b3V0IGRvZXNuJ3Qgc3VwcG9ydCBhdXRvIHNpemVcbiAgICAgICAgb25SZXNpemVTdGFydDogb25JdGVtUmVzaXplU3RhcnQsXG4gICAgICAgIG9uUmVzaXplRW5kOiBvbkl0ZW1SZXNpemVFbmRcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChpbnRlcmFjdGFibGVSZWYuY3VycmVudCkge1xuICAgICAgaWYgKHJlc3RyaWN0KSB7XG4gICAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50LmRyYWdnYWJsZSh7XG4gICAgICAgICAgbW9kaWZpZXJzOiBbcGFyZW50UmVzdHJpY3RdXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnRlcmFjdGFibGVSZWYuY3VycmVudC5kcmFnZ2FibGUoe1xuICAgICAgICAgIG1vZGlmaWVyczogW2JvdW5kYXJ5UmVzdHJpY3RdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9wcy5yZXNpemVPYnNlcnZlciAmJiBlbGVtZW50KSB7XG4gICAgICBwcm9wcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpXG4gICAgfVxuICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcyAqL1xuICB9LCBbcmVzdHJpY3RdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpbnRlcmFjdGFibGVSZWYuY3VycmVudCkge1xuICAgICAgICBpbnRlcmFjdGFibGVSZWYuY3VycmVudC51bnNldCgpXG4gICAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgfVxuICAgICAgaWYgKHByb3BzLnJlc2l6ZU9ic2VydmVyICYmIGVsZW1lbnRSZWYuY3VycmVudCkge1xuICAgICAgICBwcm9wcy5yZXNpemVPYnNlcnZlci51bm9ic2VydmUoZWxlbWVudFJlZi5jdXJyZW50KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIHsgcmVnaXN0ZXJXaWRnZXRJbml0RHJhZ0hhbmRsZXIsIHJlZ2lzdGVyV2lkZ2V0SW5pdFJlc2l6ZUhhbmRsZXIsIHNldFJlZkVsZW1lbnQgfVxufVxuIiwiaW1wb3J0IHsgdHlwZSBBbmltYXRpb25UeXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdXNlUHJldmlld1BsYXlJZCB9IGZyb20gJy4vdXNlLXByZXZpZXctcGxheWlkJ1xuaW1wb3J0IHsgdXNlTGl2ZXZpZXdQbGF5SWQgfSBmcm9tICcuL3VzZS1saXZldmlldy1wbGF5aWQnXG4vKipcbiAqIFdheXMgdG8gdHJpZ2dlciBhcyBvbmUgYW5pbWF0aW9uIGRpcmVjdGx5OlxuICogMS4gcHJldmlldyBlZmZlY3RcbiAqIDIuIHN3aXRjaGluZyBmcm9tIGRlc2lnbiBtb2RlIHRvIGxpdmUgdmlldyBtb2RlXG4gKiAzLiBzd2l0Y2ggdG8gYW5vdGhlciBwYWdlIGluIGxpdmUgdmlldyBtb2RlXG4gKiA0LiBzY3JvbGwgaW50byB2aWV3IGluIGxpdmUgdmlldyBtb2RlXG4gKlxuICogbm90ZTogYXMgb25lIGFuaW1hdGlvbiBjYW4gYmUgdHJpZ2dlcmVkIGluZGlyZWN0bHkgaWYgdGhlIGNvbnRhaW5lciBwbGF5cyBvbmUgYnkgb25lXG4gKiBAcGFyYW0gb3B0aW9uXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQXNPbmVQbGF5SWQgKG9wdGlvbjoge1xuICB0eXBlOiBBbmltYXRpb25UeXBlXG4gIGlzUHJldmlldzogYm9vbGVhblxuICBwcmV2aWV3SWQ6IG51bWJlclxuICBoYXNQYXJlbnRBbmltYXRpb246IGJvb2xlYW5cbn0pOiBbbnVtYmVyLCBib29sZWFuLCAoKSA9PiB2b2lkXSB7XG4gIGNvbnN0IHsgdHlwZSwgaXNQcmV2aWV3LCBwcmV2aWV3SWQsIGhhc1BhcmVudEFuaW1hdGlvbiB9ID0gb3B0aW9uXG5cbiAgY29uc3QgcHJldmlld1BsYXlJZCA9IHVzZVByZXZpZXdQbGF5SWQoeyBpc1ByZXZpZXcsIHByZXZpZXdJZCB9KVxuICBjb25zdCB7IHBsYXlJZDogbGl2ZXZpZXdQbGF5SWQsIHJldmVydDogbGl2ZXZpZXdSZXZlcnQsIG9uQW5pbWF0aW9uRW5kIH0gPSB1c2VMaXZldmlld1BsYXlJZCh0eXBlLCBoYXNQYXJlbnRBbmltYXRpb24pXG5cbiAgaWYgKCF0eXBlKSB7XG4gICAgcmV0dXJuIFtudWxsLCBmYWxzZSwgbnVsbF1cbiAgfVxuXG4gIGlmIChpc1ByZXZpZXcpIHtcbiAgICByZXR1cm4gW3ByZXZpZXdQbGF5SWQsIGZhbHNlLCBudWxsXVxuICB9XG5cbiAgcmV0dXJuIFtsaXZldmlld1BsYXlJZCwgbGl2ZXZpZXdSZXZlcnQsIG9uQW5pbWF0aW9uRW5kXVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIHR5cGUgSU1TdGF0ZSwgQXBwTW9kZSwgZ2V0TmV4dEFuaW1hdGlvbklkLCB0eXBlIEFuaW1hdGlvblR5cGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYWdlVmlzaWJpbGl0eUNvbnRleHQgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5cbi8qKlxuICogR2VuZXJhdGUgcGxheUlkIHdoZW4gdGhlIHdob2xlIHBhZ2UncyBhbmltYXRpb24gaXMgcGxheWVkIGluIGxpdmUgdmlldyBtb2RlLlxuICogMS4gc3dpdGNoIGZyb20gZGVzaWduIG1vZGUgdG8gbGl2ZSB2aWV3IG1vZGVcbiAqIDIuIHNpemUgbW9kZSBjaGFuZ2VzXG4gKiAzLiBwYWdlIGlzIGFjdGl2YXRlZFxuICpcbiAqIEBwYXJhbSBvcHRpb25cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VMaXZldmlld1BsYXlJZCAodHlwZTogQW5pbWF0aW9uVHlwZSwgaGFzUGFyZW50QW5pbWF0aW9uOiBib29sZWFuKTogeyBwbGF5SWQ6IG51bWJlciwgcmV2ZXJ0OiBib29sZWFuLCBvbkFuaW1hdGlvbkVuZDogKCkgPT4gdm9pZCB9IHtcbiAgY29uc3QgW2xpdmVWaWV3UGxheUlkLCBzZXRMaXZlVmlld1BsYXlJZF0gPSBSZWFjdC51c2VTdGF0ZTxudW1iZXI+KG51bGwpXG5cbiAgY29uc3QgaXNEZXNpZ25Nb2RlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwUnVudGltZUluZm8/LmFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduXG4gIH0pXG4gIGNvbnN0IHNpemVNb2RlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYnJvd3NlclNpemVNb2RlXG4gIH0pXG4gIGNvbnN0IGlzUGFnZVZpc2libGUgPSBSZWFjdC51c2VDb250ZXh0KFBhZ2VWaXNpYmlsaXR5Q29udGV4dClcblxuICBjb25zdCB2aXNpYmxlUmVmID0gUmVhY3QudXNlUmVmKGlzUGFnZVZpc2libGUpXG4gIGNvbnN0IHNpemVNb2RlUmVmID0gUmVhY3QudXNlUmVmKHNpemVNb2RlKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gc3dpdGNoIGZyb20gZWRpdCBtb2RlIHRvIGxpdmUgdmlldyBtb2RlXG4gICAgLy8gdXBkYXRlIHRoZSBwbGF5SWQgbWFudWFsbHkgdG8gcGxheSBhbmltYXRpb25cbiAgICAvLyBvbmx5IG1vbml0b3IgZGVzaWduTW9kZSBjaGFuZ2Ugd2hlbiB0aGVyZSBpcyBubyBwYXJlbnQgYW5pbWF0aW9uXG4gICAgaWYgKHR5cGUgIT0gbnVsbCAmJiAhaGFzUGFyZW50QW5pbWF0aW9uKSB7XG4gICAgICBpZiAoIWlzRGVzaWduTW9kZSkge1xuICAgICAgICBzZXRMaXZlVmlld1BsYXlJZChnZXROZXh0QW5pbWF0aW9uSWQoKSlcbiAgICAgIH0gZWxzZSBpZiAoIXZpc2libGVSZWYuY3VycmVudCkge1xuICAgICAgICAvLyBmb3IgdW52aXNpYmxlIHBhZ2UsIHNob3VsZCBzaG93IHRoZSBoaWRkZW4gZWxlbWVudHNcbiAgICAgICAgc2V0TGl2ZVZpZXdQbGF5SWQoZ2V0TmV4dEFuaW1hdGlvbklkKCkpXG4gICAgICB9XG4gICAgfVxuICB9LCBbaXNEZXNpZ25Nb2RlLCBoYXNQYXJlbnRBbmltYXRpb24sIHR5cGVdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGUgIT0gbnVsbCAmJiAhaGFzUGFyZW50QW5pbWF0aW9uICYmICFpc0Rlc2lnbk1vZGUgJiYgc2l6ZU1vZGVSZWYuY3VycmVudCAhPT0gc2l6ZU1vZGUpIHtcbiAgICAgIHNpemVNb2RlUmVmLmN1cnJlbnQgPSBzaXplTW9kZVxuICAgICAgc2V0TGl2ZVZpZXdQbGF5SWQoZ2V0TmV4dEFuaW1hdGlvbklkKCkpXG4gICAgfVxuICB9LCBbc2l6ZU1vZGUsIGlzRGVzaWduTW9kZSwgaGFzUGFyZW50QW5pbWF0aW9uLCB0eXBlXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIHZpc2libGUgLT4gaW52aXNpYmxlIG9yIGludmlzaWJsZSAtPiB2aXNpYmxlXG4gICAgaWYgKHR5cGUgIT0gbnVsbCAmJiAhaGFzUGFyZW50QW5pbWF0aW9uICYmICFpc0Rlc2lnbk1vZGUgJiYgdmlzaWJsZVJlZi5jdXJyZW50ICE9PSBpc1BhZ2VWaXNpYmxlKSB7XG4gICAgICB2aXNpYmxlUmVmLmN1cnJlbnQgPSBpc1BhZ2VWaXNpYmxlXG4gICAgICBzZXRMaXZlVmlld1BsYXlJZChnZXROZXh0QW5pbWF0aW9uSWQoKSlcbiAgICB9XG4gIH0sIFtpc1BhZ2VWaXNpYmxlLCBpc0Rlc2lnbk1vZGUsIGhhc1BhcmVudEFuaW1hdGlvbiwgdHlwZV0pXG5cbiAgY29uc3QgcmVzZXRQbGF5SWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0TGl2ZVZpZXdQbGF5SWQobnVsbClcbiAgfSwgW10pXG5cbiAgcmV0dXJuIHtcbiAgICBwbGF5SWQ6IGxpdmVWaWV3UGxheUlkLFxuICAgIHJldmVydDogaXNEZXNpZ25Nb2RlID8gZmFsc2UgOiAhaXNQYWdlVmlzaWJsZSwgLy8gZG8gbm90IGhpZGUgZWxlbWVudHMgaW4gZGVzaWduIG1vZGVcbiAgICBvbkFuaW1hdGlvbkVuZDogcmVzZXRQbGF5SWRcbiAgfVxufVxuIiwiaW1wb3J0IHsgdHlwZSBBbmltYXRpb25UeXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdXNlUHJldmlld1BsYXlJZCB9IGZyb20gJy4vdXNlLXByZXZpZXctcGxheWlkJ1xuaW1wb3J0IHsgdXNlTGl2ZXZpZXdQbGF5SWQgfSBmcm9tICcuL3VzZS1saXZldmlldy1wbGF5aWQnXG5cbi8qKlxuICogV2F5cyB0byB0cmlnZ2VyIG9uZSBieSBvbmUgYW5pbWF0aW9uIGRpcmVjdGx5OlxuICogMS4gcHJldmlldyBlZmZlY3RcbiAqIDIuIElmIHRoZSBjb250YWluZXIgd2lkZ2V0IGhhcyBubyBhbmltYXRpb24gZWZmZWN0OlxuICogIDIuMS4gc3dpdGNoaW5nIGZyb20gZGVzaWduIG1vZGUgdG8gbGl2ZSB2aWV3IG1vZGVcbiAqICAyLjIuIHN3aXRjaCB0byBhbm90aGVyIHBhZ2UgaW4gbGl2ZSB2aWV3IG1vZGVcbiAqICAyLjMuIHNjcm9sbCBpbnRvIHZpZXcgaW4gbGl2ZSB2aWV3IG1vZGVcbiAqXG4gKiBub3RlOiBvbmUgYnkgb25lIGNhbiBiZSB0cmlnZ2VyZWQgaW5kaXJlY3RseSBpZiB0aGUgY29udGFpbmVyIHBsYXlzIGFuaW1hdGlvblxuICogQHBhcmFtIG9wdGlvblxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZU9uZUJ5T25lUGxheUlkIChvcHRpb246IHtcbiAgdHlwZTogQW5pbWF0aW9uVHlwZVxuICBpc1ByZXZpZXc6IGJvb2xlYW5cbiAgcHJldmlld0lkOiBudW1iZXJcbiAgaGFzUGFyZW50QW5pbWF0aW9uOiBib29sZWFuXG59KTogW251bWJlciwgYm9vbGVhbiwgKCkgPT4gdm9pZF0ge1xuICBjb25zdCB7IHR5cGUsIGlzUHJldmlldywgcHJldmlld0lkLCBoYXNQYXJlbnRBbmltYXRpb24gfSA9IG9wdGlvblxuXG4gIGNvbnN0IHByZXZpZXdQbGF5SWQgPSB1c2VQcmV2aWV3UGxheUlkKHsgaXNQcmV2aWV3LCBwcmV2aWV3SWQgfSlcbiAgY29uc3QgeyBwbGF5SWQ6IGxpdmV2aWV3UGxheUlkLCByZXZlcnQ6IGxpdmV2aWV3UmV2ZXJ0LCBvbkFuaW1hdGlvbkVuZCB9ID0gdXNlTGl2ZXZpZXdQbGF5SWQodHlwZSwgaGFzUGFyZW50QW5pbWF0aW9uKVxuXG4gIGlmICghdHlwZSkge1xuICAgIHJldHVybiBbbnVsbCwgZmFsc2UsIG51bGxdXG4gIH1cblxuICBpZiAoaXNQcmV2aWV3KSB7XG4gICAgcmV0dXJuIFtwcmV2aWV3UGxheUlkLCBmYWxzZSwgbnVsbF1cbiAgfVxuICByZXR1cm4gW2xpdmV2aWV3UGxheUlkLCBsaXZldmlld1JldmVydCwgb25BbmltYXRpb25FbmRdXG59XG4iLCIvKipcbiAqIEdlbmVyYXRlIHBsYXlJZCB3aGVuIHVzZXIgcHJldmlldyB0aGUgYW5pbWF0aW9uIGVmZmVjdCBvZiBhIHNpbmdsZSB3aWRnZXRcbiAqIEBwYXJhbSBvcHRpb25cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcmV2aWV3UGxheUlkIChvcHRpb246IHtcbiAgaXNQcmV2aWV3OiBib29sZWFuXG4gIHByZXZpZXdJZDogbnVtYmVyXG59KTogbnVtYmVyIHtcbiAgY29uc3QgeyBpc1ByZXZpZXcsIHByZXZpZXdJZCB9ID0gb3B0aW9uXG5cbiAgcmV0dXJuIGlzUHJldmlldyA/IHByZXZpZXdJZCA6IG51bGxcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIEV4dGVuc2lvbk1hbmFnZXIsIGV4dGVuc2lvblNwZWMsIHR5cGUgSU1MYXlvdXRJdGVtSnNvbiwgTGF5b3V0SXRlbVR5cGUsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcywgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgX1BvcHBlciBhcyBQb3BwZXIsIHR5cGUgTW9kaWZpZXJzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7XG4gIHR5cGUgVG9vbEl0ZW1Db25maWcsXG4gIHR5cGUgVG9vbGJhckNvbmZpZ1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBUb29sYmFyIH0gZnJvbSAnLi90b29sYmFyJ1xuaW1wb3J0IHsgZGVsZXRlTWVudUl0ZW0sIHBlbmRpbmdNZW51SXRlbSwgZHVwbGljYXRlTWVudUl0ZW0sIGZsb2F0aW5nTWVudUl0ZW0sIHNpbmtpbmdNZW51SXRlbSB9IGZyb20gJy4vbWVudS9jb21tb24tbWVudSdcbmltcG9ydCB7IHNlY3Rpb25NZW51SXRlbXMgfSBmcm9tICcuL21lbnUvc2VjdGlvbi1tZW51J1xuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dEl0ZW1Ub29sYmFyUHJvcHMge1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbiAgcmVmRWxlbWVudDogSFRNTEVsZW1lbnRcbiAgbW9kaWZpZXJzOiBNb2RpZmllcnNcbiAgYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4gIGZvcm1hdE1lc3NhZ2U6IChzdHJpbmcsIHZhbHVlcz86IGFueSkgPT4gc3RyaW5nXG4gIHRvb2xJdGVtcz86IFRvb2xiYXJDb25maWdcbiAgc2hvd0RlZmF1bHRUb29scz86IGJvb2xlYW5cbn1cblxuY29uc3QgY29tbW9uV2lkZ2V0TWVudUl0ZW1zID0gW2R1cGxpY2F0ZU1lbnVJdGVtLCBmbG9hdGluZ01lbnVJdGVtLCBzaW5raW5nTWVudUl0ZW0sIHBlbmRpbmdNZW51SXRlbSwgZGVsZXRlTWVudUl0ZW1dXG5jb25zdCBjb21tb25TZWN0aW9uTWVudUl0ZW1zID0gW10uY29uY2F0KHNlY3Rpb25NZW51SXRlbXMsIGNvbW1vbldpZGdldE1lbnVJdGVtcylcbmxldCBjb3VudCA9IDBcblxuZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uVG9vbHMgKHsgbGF5b3V0SWQsIGxheW91dEl0ZW0sIHJlZkVsZW1lbnQgfTogTGF5b3V0SXRlbVRvb2xiYXJQcm9wcyk6IFRvb2xJdGVtQ29uZmlnW10ge1xuICBjb25zdCB7IHdpZGdldElkIH0gPSBsYXlvdXRJdGVtXG4gIGlmICghd2lkZ2V0SWQpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBjb25zdCBleHRzID0gRXh0ZW5zaW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldEV4dGVuc2lvbnMoXG4gICAgZXh0ZW5zaW9uU3BlYy5FeHRlbnNpb25Qb2ludHMuQ29udGV4dFRvb2xcbiAgKSBhcyBleHRlbnNpb25TcGVjLkNvbnRleHRUb29sRXh0ZW5zaW9uW11cbiAgY29uc3QgY2xpZW50UmVjdCA9IHJlZkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIGV4dHNcbiAgICAuZmlsdGVyKGV4dCA9PiBleHQud2lkZ2V0SWQgPT09IHdpZGdldElkKVxuICAgIC5tYXAoZXh0ID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBpY29uOiBleHQuZ2V0SWNvbigpLFxuICAgICAgICB0aXRsZTogZXh0LmdldFRpdGxlLmJpbmQoZXh0KSxcbiAgICAgICAgb25DbGljazogZXh0Lm9uQ2xpY2suYmluZChleHQpLFxuICAgICAgICBjaGVja2VkOiBleHQuY2hlY2tlZCAmJiBleHQuY2hlY2tlZC5iaW5kKGV4dCksXG4gICAgICAgIGRpc2FibGVkOiBleHQuZGlzYWJsZWQgPyAodHlwZW9mIGV4dC5kaXNhYmxlZCA9PT0gJ2Z1bmN0aW9uJyA/IGV4dC5kaXNhYmxlZC5iaW5kKGV4dCkgOiBleHQuZGlzYWJsZWQpIDogbnVsbCxcbiAgICAgICAgdmlzaWJsZTogZXh0LnZpc2libGUgPyAodHlwZW9mIGV4dC52aXNpYmxlID09PSAnZnVuY3Rpb24nID8gZXh0LnZpc2libGUuYmluZChleHQpIDogZXh0LnZpc2libGUpIDogbnVsbCxcbiAgICAgICAgc2V0dGluZ1BhbmVsOiBleHQuZ2V0U2V0dGluZ1BhbmVsKHtcbiAgICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgICBsYXlvdXRJdGVtLFxuICAgICAgICAgIGNsaWVudFJlY3RcbiAgICAgICAgfSksXG4gICAgICAgIGluZGV4OiBleHQuaW5kZXgsXG4gICAgICAgIGV4dE5hbWU6IGV4dC5uYW1lXG4gICAgICB9XG4gICAgfSlcbiAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExheW91dEl0ZW1Ub29sYmFyIChwcm9wczogTGF5b3V0SXRlbVRvb2xiYXJQcm9wcykge1xuICBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuZXh0ZW5zaW9uc0luZm9bZXh0ZW5zaW9uU3BlYy5FeHRlbnNpb25Qb2ludHMuQ29udGV4dFRvb2xdKVxuXG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0sIHJlZkVsZW1lbnQsIG1vZGlmaWVycywgZm9ybWF0TWVzc2FnZSwgYnVpbGRlclRoZW1lLCB0b29sSXRlbXMgPSBbXSwgc2hvd0RlZmF1bHRUb29scyA9IHRydWUgfSA9IHByb3BzXG5cbiAgaWYgKCFyZWZFbGVtZW50KSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IGlzU2VjdGlvbiA9IGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvblxuICBsZXQgZXh0ZW5zaW9uVG9vbHMgPSBnZXRFeHRlbnNpb25Ub29scyhwcm9wcylcblxuICBjb25zdCBjb21tb25Ub29sSXRlbXMgPSBpc1NlY3Rpb24gPyBjb21tb25TZWN0aW9uTWVudUl0ZW1zIDogY29tbW9uV2lkZ2V0TWVudUl0ZW1zXG4gIGNvbnN0IGRlZmF1bHRUb29scyA9IHNob3dEZWZhdWx0VG9vbHMgPyBbLi4udG9vbEl0ZW1zLCAuLi5jb21tb25Ub29sSXRlbXNdIDogdG9vbEl0ZW1zXG4gIGlmIChleHRlbnNpb25Ub29scy5sZW5ndGggPiAwKSB7XG4gICAgZXh0ZW5zaW9uVG9vbHMgPSBbXS5jb25jYXQoZGVmYXVsdFRvb2xzLCB7IHNlcGVyYXRvcjogdHJ1ZSB9LCBleHRlbnNpb25Ub29scylcbiAgfSBlbHNlIHtcbiAgICBleHRlbnNpb25Ub29scyA9IGRlZmF1bHRUb29sc1xuICB9XG5cbiAgaWYgKGV4dGVuc2lvblRvb2xzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxQb3BwZXJcbiAgICAgIHBsYWNlbWVudD0ndG9wLXN0YXJ0J1xuICAgICAgcmVmZXJlbmNlPXtyZWZFbGVtZW50fVxuICAgICAgb3BlblxuICAgICAgbW9kaWZpZXJzPXttb2RpZmllcnN9XG4gICAgICB2ZXJzaW9uPXtjb3VudCsrfVxuICAgICAgdHJhcEZvY3VzPXtmYWxzZX1cbiAgICAgIGF1dG9Gb2N1cz17ZmFsc2V9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICBgfVxuICAgID5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxUb29sYmFyXG4gICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgIGxheW91dEl0ZW09e2xheW91dEl0ZW19XG4gICAgICAgICAgdGhlbWU9e2J1aWxkZXJUaGVtZX1cbiAgICAgICAgICBwYXJlbnRSZWY9e3JlZkVsZW1lbnR9XG4gICAgICAgICAgdG9vbHM9e2V4dGVuc2lvblRvb2xzfVxuICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e2Zvcm1hdE1lc3NhZ2V9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L1BvcHBlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJTVN0YXRlLFxuICBSZWFjdFJlZHV4LFxuICBhcHBBY3Rpb25zLFxuICBnZXRBcHBTdG9yZSxcbiAgY2xhc3NOYW1lcyxcbiAgdXRpbHMsXG4gIExheW91dEl0ZW1UeXBlLFxuICBBbmltYXRpb25Db250ZXh0LFxuICBBbmltYXRpb25Db21wb25lbnQsXG4gIEFuaW1hdGlvblRyaWdnZXJUeXBlLFxuICBBbmltYXRpb25UeXBlLFxuICBBbmltYXRpb25QbGF5TW9kZSxcbiAgcG9saXNoZWQsXG4gIHR5cGUgTGF5b3V0VHlwZSxcbiAgdHlwZSBBbmltYXRpb25Db250ZXh0UHJvcHMsXG4gIGdldE5leHRBbmltYXRpb25JZCxcbiAgZ2V0SG92ZXJTdHlsZSxcbiAgQW5pbWF0aW9uU3RhcnRNb2RlLFxuICBjcmVhdGVTZWxlY3RvclxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQge1xuICB1dGlscyBhcyBsYXlvdXRVdGlscyxcbiAgUGFnZUNvbnRleHQsXG4gIFZpZXdwb3J0VmlzaWJpbGl0eUNvbnRleHQsXG4gIHR5cGUgTGF5b3V0SXRlbVByb3BzLFxuICB0eXBlIFdpZGdldFByb3BzLFxuICB0eXBlIFNlY3Rpb25Qcm9wcyxcbiAgdHlwZSBUb29sYmFyQ29uZmlnLFxuICB0eXBlIENvbW1vbkxheW91dEl0ZW1TZXR0aW5nLFxuICB0eXBlIFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMsXG4gIENPTlRFWFRfTUVOVV9JQ09OX1NJWkUsXG4gIENPTlRFWFRfTUVOVV9JVEVNX1NJWkUsXG4gIHNlYXJjaFV0aWxzLFxuICBNSU5fTEFZT1VUX0lURU1fU0laRSxcbiAgQ0xJQ0tfVE9MUkVSQU5DRVxufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgQ29udGV4dE1lbnUgZnJvbSAnLi9jb250ZXh0LW1lbnUnXG5pbXBvcnQge1xuICBpc0RyYWdnaW5nLFxuICBHTE9CQUxfSDVfRFJBR0dJTkdfQ0xBU1NfTkFNRSxcbiAgR0xPQkFMX0RSQUdHSU5HX0NMQVNTX05BTUVcbn0gZnJvbSAnLi9pbnRlcmFjdGl2ZS9kcmFnLWV2ZW50LWhhbmRsZXInXG5pbXBvcnQgeyBpc1Jlc2l6aW5nIH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS9yZXNpemUtZXZlbnQtaGFuZGxlcidcbmltcG9ydCB7IHBlbmRpbmdNZW51SXRlbSwgZGVsZXRlTWVudUl0ZW0sIHNldHRpbmdNZW51SXRlbSwgZHJhZ2dpbmdNZW51SXRlbSwgaXNMb2NrTGF5b3V0LCBpc0Rlc2lnbk1vZGUgfSBmcm9tICcuL21lbnUvY29tbW9uLW1lbnUnXG5pbXBvcnQgU2VsZWN0V3JhcHBlciBmcm9tICcuL3NlbGVjdC13cmFwcGVyJ1xuaW1wb3J0IHsgV2lkZ2V0UmVuZGVyZXJJbkJ1aWxkZXIgfSBmcm9tICcuL3dpZGdldC1yZW5kZXJlcidcbmltcG9ydCB7IFNlY3Rpb25SZW5kZXJlckluQnVpbGRlciB9IGZyb20gJy4vc2VjdGlvbi1yZW5kZXJlcidcbmltcG9ydCB7IGZpbmRBY3RpdmVWaWV3SWQgfSBmcm9tICcuL21lbnUvc2VjdGlvbi1tZW51J1xuaW1wb3J0IHsgdXNlQXNPbmVQbGF5SWQgfSBmcm9tICcuL2xheW91dC1pdGVtLWhvb2svdXNlLWFzb25lLXBsYXlpZCdcbmltcG9ydCB7IHVzZU9uZUJ5T25lUGxheUlkIH0gZnJvbSAnLi9sYXlvdXQtaXRlbS1ob29rL3VzZS1vbmVieW9uZS1wbGF5aWQnXG5pbXBvcnQgeyB1c2VWaWV3cG9ydEludGVyc2VjdGlvbiB9IGZyb20gJy4uL3VzZS12aWV3cG9ydC1pbnRlcnNlY3Rpb24nXG5pbXBvcnQgeyB1c2VEbmRCaW5kaW5nIH0gZnJvbSAnLi9sYXlvdXQtaXRlbS1kbmQtaG9vaydcblxuaW50ZXJmYWNlIENoaWxkRW1lbWVudCB7XG4gIGNoaWxkcmVuPzogRWxlbWVudCB8IFJlYWN0LlJlYWN0Tm9kZSAvLyByZWY6IEhUTUxFbGVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE93blByb3BzIHtcbiAgaWQ/OiBzdHJpbmdcbiAgaXNCbG9jaz86IGJvb2xlYW5cbiAgdG9vbEl0ZW1zPzogVG9vbGJhckNvbmZpZ1xuICBjb250ZXh0TWVudUl0ZW1zPzogVG9vbGJhckNvbmZpZ1xuICBkZWxheT86IG51bWJlclxuICBpc0xhc3RDaGlsZD86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmFnRXZlbnRIYW5kbGVycyB7XG4gIHJlc3RyaWN0PzogYm9vbGVhblxuICB1c2VEcmFnSGFuZGxlcj86IGJvb2xlYW5cbiAgb25EcmFnU3RhcnQ/OiAobGF5b3V0SXRlbUlkOiBzdHJpbmcpID0+IHZvaWRcbiAgb25EcmFnZ2luZz86IChsYXlvdXRJdGVtSWQ6IHN0cmluZywgZHg6IG51bWJlciwgZHk6IG51bWJlcikgPT4gdm9pZFxuICBvbkRyYWdFbmQ/OiAobGF5b3V0SXRlbUlkOiBzdHJpbmcsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpID0+IHZvaWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNpemVFdmVudEhhbmRsZXJzIHtcbiAgdG9wPzogYm9vbGVhblxuICBsZWZ0PzogYm9vbGVhblxuICByaWdodD86IGJvb2xlYW5cbiAgYm90dG9tPzogYm9vbGVhblxuICByZXNpemFibGU/OiBib29sZWFuXG4gIGtlZXBBc3BlY3RSYXRpbz86IGJvb2xlYW5cbiAgYXNwZWN0UmF0aW8/OiBudW1iZXJcbiAgb25SZXNpemVTdGFydD86IChsYXlvdXRJdGVtSWQ6IHN0cmluZywgaW5pdFdpZHRoOiBudW1iZXIsIGluaXRIZWlnaHQ6IG51bWJlcikgPT4gdm9pZFxuICBvblJlc2l6aW5nPzogKGxheW91dEl0ZW1JZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk/OiBib29sZWFuLCBzcGVlZD86IG51bWJlcikgPT4gdm9pZFxuICBvblJlc2l6ZUVuZD86IChsYXlvdXRJdGVtSWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIsIHNoaWZ0S2V5PzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG50eXBlIExheW91dEl0ZW1JbkJ1aWxkZXJQcm9wcyA9IExheW91dEl0ZW1Qcm9wcyAmIERyYWdFdmVudEhhbmRsZXJzICYgUmVzaXplRXZlbnRIYW5kbGVycyAmIE93blByb3BzXG5cbnR5cGUgU3RhdGVUb0l0ZW1Qcm9wcyA9IFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgJiBXaWRnZXRQcm9wcyAmIFNlY3Rpb25Qcm9wcyAmIHsgbGF5b3V0VHlwZTogTGF5b3V0VHlwZSwgaW5uZXJMYXlvdXRJZD86IHN0cmluZyB8IHN0cmluZ1tdIH1cblxuY29uc3QgZGVmYXVsdENvbnN0ZXh0TWVudXM6IFRvb2xiYXJDb25maWcgPSBbc2V0dGluZ01lbnVJdGVtLCBkcmFnZ2luZ01lbnVJdGVtLCBwZW5kaW5nTWVudUl0ZW0sIGRlbGV0ZU1lbnVJdGVtXVxuY29uc3QgZHJhZ01lbnVzOiBUb29sYmFyQ29uZmlnID0gW2RyYWdnaW5nTWVudUl0ZW1dXG5cbmZ1bmN0aW9uIGZpbmRJbm5lckxheW91dElkIChzdGF0ZTogSU1TdGF0ZSwgbGF5b3V0SWQ6IHN0cmluZywgbGF5b3V0SXRlbUlkOiBzdHJpbmcpOiBzdHJpbmcgfCBzdHJpbmdbXSB7XG4gIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gIGlmIChsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1tsYXlvdXRJdGVtLndpZGdldElkXSAvLyBtYXkgYmUgYSBwbGFjZWhvbGRlclxuICAgIGlmICh3aWRnZXRKc29uPy5sYXlvdXRzICE9IG51bGwpIHsgLy8gd2lkZ2V0IG1heSBoYXZlIG11bHRpcGxlIGlubmVyIGxheW91dCwgbGlrZSBzaWRlYmFyXG4gICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKHdpZGdldEpzb24ubGF5b3V0cylcbiAgICAgIGlmIChuYW1lcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3Qgc2l6ZU1vZGVMYXlvdXQgPSB3aWRnZXRKc29uPy5sYXlvdXRzW25hbWVzWzBdXVxuXG4gICAgICAgIGlmIChzaXplTW9kZUxheW91dCkge1xuICAgICAgICAgIHJldHVybiBzaXplTW9kZUxheW91dFtzdGF0ZS5icm93c2VyU2l6ZU1vZGVdXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdXG4gICAgICAgIG5hbWVzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICBjb25zdCBzaXplTW9kZUxheW91dCA9IHdpZGdldEpzb24ubGF5b3V0c1tuYW1lXVxuICAgICAgICAgIG91dHB1dC5wdXNoKHNpemVNb2RlTGF5b3V0W3N0YXRlLmJyb3dzZXJTaXplTW9kZV0pXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBvdXRwdXRcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExheW91dEl0ZW1JbkJ1aWxkZXIgKHByb3BzOiBMYXlvdXRJdGVtSW5CdWlsZGVyUHJvcHMgJiBDaGlsZEVtZW1lbnQpIHtcbiAgY29uc3Qgc3RhdGVQcm9wcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIHByb3BzKSwgUmVhY3RSZWR1eC5zaGFsbG93RXF1YWwpXG4gIGNvbnN0IGFsbFByb3BzID0geyAuLi5zdGF0ZVByb3BzLCAuLi5wcm9wcyB9XG4gIGNvbnN0IHBhZ2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChQYWdlQ29udGV4dClcbiAgY29uc3QgcmVmT2JqID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PigpXG5cbiAgbGV0IG1vdXNlZG93blg6IG51bWJlclxuICBsZXQgbW91c2Vkb3duWTogbnVtYmVyXG5cbiAgY29uc3QgeyBlZmZlY3QsIG9uZUJ5T25lRWZmZWN0LCBob3ZlckVmZmVjdCB9ID0gYWxsUHJvcHMubGF5b3V0SXRlbT8uc2V0dGluZyA/PyB7fSBhcyBDb21tb25MYXlvdXRJdGVtU2V0dGluZ1xuICBjb25zdCB7IGFuaW1hdGlvblByZXZpZXcsIGhvdmVyUHJldmlldywgcHJldmlld0lkLCBwbGF5TW9kZSwgbGF5b3V0VHlwZSB9ID0gYWxsUHJvcHNcblxuICBjb25zdCBnZXRDdXJyZW50Um9vdExheW91dElkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4gcGFnZUNvbnRleHQucm9vdExheW91dElkLCBbcGFnZUNvbnRleHQucm9vdExheW91dElkXSlcblxuICBjb25zdCBpc0luVmlld3BvcnQgPSB1c2VWaWV3cG9ydEludGVyc2VjdGlvbihyZWZPYmouY3VycmVudCwgYWxsUHJvcHMud2F0Y2hWaWV3cG9ydFZpc2liaWxpdHkpXG4gIGxldCBlZmZlY3RUeXBlID0gZWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddPy50eXBlXG4gIGVmZmVjdFR5cGUgPSBlZmZlY3RUeXBlICYmIGVmZmVjdFR5cGUgIT09IEFuaW1hdGlvblR5cGUuTm9uZSA/IGVmZmVjdFR5cGUgOiBudWxsXG4gIGxldCBvbmVCeU9uZUVmZmVjdFR5cGUgPSBvbmVCeU9uZUVmZmVjdD8uW0FuaW1hdGlvblRyaWdnZXJUeXBlLlNjcm9sbEludG9WaWV3XT8udHlwZVxuICBvbmVCeU9uZUVmZmVjdFR5cGUgPSBvbmVCeU9uZUVmZmVjdFR5cGUgJiYgb25lQnlPbmVFZmZlY3RUeXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmUgPyBvbmVCeU9uZUVmZmVjdFR5cGUgOiBudWxsXG5cbiAgY29uc3QgW2FuaW1hdGlvbkNvbnRleHQsIHNldEFuaW1hdGlvbkNvbnRleHRdID0gUmVhY3QudXNlU3RhdGU8QW5pbWF0aW9uQ29udGV4dFByb3BzPih7XG4gICAgc2V0dGluZzogb25lQnlPbmVFZmZlY3Q/LltBbmltYXRpb25UcmlnZ2VyVHlwZS5TY3JvbGxJbnRvVmlld10sXG4gICAgcGxheUlkOiBudWxsLFxuICAgIG9pZDogc3RhdGVQcm9wcy5pbm5lckxheW91dElkLFxuICAgIHJldmVydDogbnVsbCxcbiAgICBwbGF5TW9kZTogbnVsbFxuICB9KVxuXG4gIGNvbnN0IHsgc2V0dGluZzogcGFyZW50QW5pbWF0aW9uU2V0dGluZyB9ID0gUmVhY3QudXNlQ29udGV4dChBbmltYXRpb25Db250ZXh0KVxuXG4gIGNvbnN0IFthc09uZVBsYXlJZCwgYXNPbmVSZXZlcnQsIG9uQXNPbmVBbmltYXRpb25FbmRdID0gdXNlQXNPbmVQbGF5SWQoe1xuICAgIHR5cGU6IGVmZmVjdFR5cGUsXG4gICAgaXNQcmV2aWV3OiBhbmltYXRpb25QcmV2aWV3LFxuICAgIHByZXZpZXdJZDogcGxheU1vZGUgIT09IEFuaW1hdGlvblBsYXlNb2RlLk9uZUJ5T25lID8gcHJldmlld0lkIDogbnVsbCxcbiAgICBoYXNQYXJlbnRBbmltYXRpb246IHBhcmVudEFuaW1hdGlvblNldHRpbmc/LnR5cGUgIT0gbnVsbCAmJiBwYXJlbnRBbmltYXRpb25TZXR0aW5nLnR5cGUgIT09IEFuaW1hdGlvblR5cGUuTm9uZVxuICB9KVxuICBjb25zdCBbb25lQnlPbmVQbGF5SWQsIG9uZUJ5T25lUmV2ZXJ0LCBvbk9uZWJ5T25lQW5pbWF0aW9uRW5kXSA9IHVzZU9uZUJ5T25lUGxheUlkKHtcbiAgICB0eXBlOiBvbmVCeU9uZUVmZmVjdFR5cGUsXG4gICAgaXNQcmV2aWV3OiBhbmltYXRpb25QcmV2aWV3LFxuICAgIHByZXZpZXdJZDogcGxheU1vZGUgIT09IEFuaW1hdGlvblBsYXlNb2RlLkFzT25lID8gcHJldmlld0lkIDogbnVsbCxcbiAgICBoYXNQYXJlbnRBbmltYXRpb246IHBhcmVudEFuaW1hdGlvblNldHRpbmc/LnR5cGUgIT0gbnVsbCAmJiBwYXJlbnRBbmltYXRpb25TZXR0aW5nLnR5cGUgIT09IEFuaW1hdGlvblR5cGUuTm9uZVxuICB9KVxuXG4gIGNvbnN0IHsgcmVnaXN0ZXJXaWRnZXRJbml0RHJhZ0hhbmRsZXIsIHJlZ2lzdGVyV2lkZ2V0SW5pdFJlc2l6ZUhhbmRsZXIsIHNldFJlZkVsZW1lbnQgfSA9IHVzZURuZEJpbmRpbmcoe1xuICAgIHJlc3RyaWN0OiBwcm9wcy5yZXN0cmljdCxcbiAgICBsYXlvdXRJZDogcHJvcHMubGF5b3V0SWQsXG4gICAgbGF5b3V0SXRlbUlkOiBwcm9wcy5sYXlvdXRJdGVtSWQsXG4gICAgbGF5b3V0VHlwZSxcbiAgICBsYXlvdXRJdGVtVHlwZTogc3RhdGVQcm9wcy5sYXlvdXRJdGVtPy50eXBlLFxuICAgIHVzZURyYWdIYW5kbGVyOiBwcm9wcy51c2VEcmFnSGFuZGxlcixcbiAgICByZXNpemVPYnNlcnZlcjogcHJvcHMucmVzaXplT2JzZXJ2ZXIsXG4gICAgZ2V0Q3VycmVudFJvb3RMYXlvdXRJZCxcbiAgICBvbkRyYWdTdGFydDogcHJvcHMub25EcmFnU3RhcnQsXG4gICAgb25EcmFnZ2luZzogcHJvcHMub25EcmFnZ2luZyxcbiAgICBvbkRyYWdFbmQ6IHByb3BzLm9uRHJhZ0VuZCxcbiAgICBvblJlc2l6ZVN0YXJ0OiBwcm9wcy5vblJlc2l6ZVN0YXJ0LFxuICAgIG9uUmVzaXppbmc6IHByb3BzLm9uUmVzaXppbmcsXG4gICAgb25SZXNpemVFbmQ6IHByb3BzLm9uUmVzaXplRW5kXG4gIH0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSZWZFbGVtZW50KHJlZk9iai5jdXJyZW50KVxuICB9LCBbXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIG5vIGFzIG9uZSBwbGF5SWQsIHBsYXkgaW5uZXIgYW5pbWF0aW9ucyBvbmUgYnkgb25lIGJ5IHNldHRpbmcgYW5pbWF0aW9uIGNvbnRleHRcbiAgICBpZiAoYXNPbmVQbGF5SWQgPT0gbnVsbCAmJiBvbmVCeU9uZVBsYXlJZCkge1xuICAgICAgc2V0QW5pbWF0aW9uQ29udGV4dCh7XG4gICAgICAgIHNldHRpbmc6IG9uZUJ5T25lRWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddLFxuICAgICAgICBwbGF5SWQ6IG9uZUJ5T25lUGxheUlkLFxuICAgICAgICBvaWQ6IHN0YXRlUHJvcHMuaW5uZXJMYXlvdXRJZCxcbiAgICAgICAgcmV2ZXJ0OiBvbmVCeU9uZVJldmVydCxcbiAgICAgICAgcGxheU1vZGUsXG4gICAgICAgIG9uQ29udGV4dEFuaW1hdGlvbkVuZDogb25lQnlPbmVSZXZlcnRcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6ICgpID0+IHtcbiAgICAgICAgICAgICAgLy8gY2xlYXIgYW5pbWF0aW9uIHByZXZpZXcgc2V0dGluZyBpZiBpdCBpcyBwcmV2aWV3IGFzIG9uZVxuICAgICAgICAgICAgICBvbk9uZWJ5T25lQW5pbWF0aW9uRW5kPy4oKVxuICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uUHJldmlldykge1xuICAgICAgICAgICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5jbGVhckFuaW1hdGlvblByZXZpZXcoKSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzZXRBbmltYXRpb25Db250ZXh0KHtcbiAgICAgICAgICAgICAgICBzZXR0aW5nOiBvbmVCeU9uZUVmZmVjdD8uW0FuaW1hdGlvblRyaWdnZXJUeXBlLlNjcm9sbEludG9WaWV3XSxcbiAgICAgICAgICAgICAgICBvaWQ6IHN0YXRlUHJvcHMuaW5uZXJMYXlvdXRJZCxcbiAgICAgICAgICAgICAgICBwbGF5SWQ6IC0xXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FzT25lUGxheUlkLCBvbmVCeU9uZVBsYXlJZF0pXG5cbiAgY29uc3Qgc2hvdWxkQW5pbWF0aW9uUGFzc2Rvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgLy8gQW5pbWF0aW9uIG1heSBiZSB0cmlnZ2VyIGJ5OlxuICAgIC8vIDEuIHByZXZpZXcgdGhlIGxheW91dCBpdGVtJ3MgYW5pbWF0aW9uXG4gICAgLy8gICAgMS4xIGlmIHByZXZpZXcgYXMgb25lLCB0aGUgYW5pbWF0aW9uIHNob3VsZCBzdG9wIGhlcmVcbiAgICAvLyAgICAxLjIgaWYgcHJldmlldyBhcyBhIHdob2xlLCB0aGUgYW5pbWF0aW9uIHNob3VsZCBwYXNzIGRvd25cbiAgICAvLyAyLiBwYXJlbnQgYW5pbWF0aW9uIGlzIHBsYXlpbmcsIHRoaXMgaXRlbSBpcyBwbGF5ZWQgYXMgYSBjaGlsZFxuICAgIC8vICAgIDIuMSBpZiB0aGUgcGFyZW50IGlzIHByZXZpZXdlZCBhcyBvbmVieW9uZSwgdGhlIGFuaW1hdGlvbiBzaG91bGQgc3RvcCBoZXJlXG4gICAgLy8gICAgMi4yIG90aGVyd2lzZSwgdGhlIGFuaW1hdGlvbiBzaG91bGQgcGFzcyBkb3duXG4gICAgaWYgKGFuaW1hdGlvblByZXZpZXcpIHtcbiAgICAgIC8vIGNhc2UgMS4xIGFuZCAxLjIsIHByZXZpZXcgb25lIGJ5IG9uZSBjYW4gbm90IHRyaWdnZXIgdGhpcyBpdGVtJ3MgYW5pbWF0aW9uXG4gICAgICByZXR1cm4gcGxheU1vZGUgIT09IEFuaW1hdGlvblBsYXlNb2RlLkFzT25lXG4gICAgfVxuICAgIC8vIFBhcmVudCBpcyBwbGF5aW5nLiBjaGVjayBpZiBpdCBpcyBwcmV2aWV3ZWQgYXMgYSB3aG9sZVxuICAgIGNvbnN0IHByZXZpZXdJbmZvID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFJ1bnRpbWVJbmZvPy5hbmltYXRpb25QcmV2aWV3XG4gICAgcmV0dXJuIHByZXZpZXdJbmZvID09IG51bGwgfHwgcHJldmlld0luZm8ucGxheU1vZGUgIT09IEFuaW1hdGlvblBsYXlNb2RlLk9uZUJ5T25lXG4gIH0sIFthbmltYXRpb25QcmV2aWV3XSlcblxuICBjb25zdCBoYW5kbGVTaW5nbGVBbmltYXRpb25TdGFydCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoc2hvdWxkQW5pbWF0aW9uUGFzc2Rvd24oKSkge1xuICAgICAgLy8gbWF5YmUgdGhlcmUgaXMgbm8gb25lIGJ5IG9uZSBhbmltYXRpb24sIGJ1dCBzb21lIGNoaWxkIGVsZW1lbnQgaGFzIGl0cyBvd24gYW5pbWF0aW9uXG4gICAgICBjb25zdCBzZXR0aW5nID0gb25lQnlPbmVFZmZlY3Q/LltBbmltYXRpb25UcmlnZ2VyVHlwZS5TY3JvbGxJbnRvVmlld11cbiAgICAgIGNvbnN0IHJldmVydCA9IHNldHRpbmc/Lm9wdGlvbj8uc3RhcnQgPT09IEFuaW1hdGlvblN0YXJ0TW9kZS5BZnRlclByZXZpb3VzIC8vIGNoZWNrIG9uZSBieSBvbmUgc3RhcnQgbW9kZVxuICAgICAgc2V0QW5pbWF0aW9uQ29udGV4dCh7XG4gICAgICAgIHNldHRpbmcsXG4gICAgICAgIHBsYXlJZDogZ2V0TmV4dEFuaW1hdGlvbklkKCksXG4gICAgICAgIG9pZDogc3RhdGVQcm9wcy5pbm5lckxheW91dElkLFxuICAgICAgICByZXZlcnQsXG4gICAgICAgIHBsYXlNb2RlLFxuICAgICAgICBvbkNvbnRleHRBbmltYXRpb25FbmQ6IHJldmVydCAvLyBubyBuZWVkIHRvIHJlc2V0IGFuaW1hdGlvbiBjb250ZXh0IGlmIGl0IGlzIHJldmVydFxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBjbGVhciBwbGF5SWRcbiAgICAgICAgICAgICAgc2V0QW5pbWF0aW9uQ29udGV4dCh7IHNldHRpbmcsIG9pZDogc3RhdGVQcm9wcy5pbm5lckxheW91dElkLCBwbGF5SWQ6IC0xIH0pXG4gICAgICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSwgW29uZUJ5T25lRWZmZWN0VHlwZSwgYW5pbWF0aW9uUHJldmlldywgcGxheU1vZGUsIHNob3VsZEFuaW1hdGlvblBhc3Nkb3duXSlcblxuICBjb25zdCBoYW5kbGVTaW5nbGVBbmltYXRpb25FbmQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHNob3VsZEFuaW1hdGlvblBhc3Nkb3duKCkpIHtcbiAgICAgIGNvbnN0IHNldHRpbmcgPSBvbmVCeU9uZUVmZmVjdD8uW0FuaW1hdGlvblRyaWdnZXJUeXBlLlNjcm9sbEludG9WaWV3XVxuICAgICAgLy8gb25seSBwbGF5cyB3aGVuIHN0YXJ0IG1vZGUgaXMgXCJhZnRlciBwcmV2aW91c1wiXG4gICAgICBpZiAoc2V0dGluZz8ub3B0aW9uPy5zdGFydCA9PT0gQW5pbWF0aW9uU3RhcnRNb2RlLkFmdGVyUHJldmlvdXMpIHtcbiAgICAgICAgc2V0QW5pbWF0aW9uQ29udGV4dCh7XG4gICAgICAgICAgc2V0dGluZyxcbiAgICAgICAgICBwbGF5SWQ6IGdldE5leHRBbmltYXRpb25JZCgpLFxuICAgICAgICAgIG9pZDogc3RhdGVQcm9wcy5pbm5lckxheW91dElkLFxuICAgICAgICAgIHJldmVydDogZmFsc2UsXG4gICAgICAgICAgcGxheU1vZGUsXG4gICAgICAgICAgb25Db250ZXh0QW5pbWF0aW9uRW5kOiAoKSA9PiB7XG4gICAgICAgICAgICAvLyBjbGVhciBwbGF5SWRcbiAgICAgICAgICAgIHNldEFuaW1hdGlvbkNvbnRleHQoeyBzZXR0aW5nLCBvaWQ6IHN0YXRlUHJvcHMuaW5uZXJMYXlvdXRJZCwgcGxheUlkOiAtMSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gY2xlYXIgYW5pbWF0aW9uIHByZXZpZXcgc2V0dGluZyBpZiBpdCBpcyBwcmV2aWV3IGFzIG9uZVxuICAgIG9uQXNPbmVBbmltYXRpb25FbmQ/LigpXG4gICAgaWYgKGFuaW1hdGlvblByZXZpZXcpIHtcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5jbGVhckFuaW1hdGlvblByZXZpZXcoKSlcbiAgICB9XG4gIH0sIFtvbmVCeU9uZUVmZmVjdFR5cGUsIGFuaW1hdGlvblByZXZpZXcsIHBsYXlNb2RlLCBzaG91bGRBbmltYXRpb25QYXNzZG93bl0pXG5cbiAgLyoqXG4gICAqIEVuYWJsZSBpbmxpbmUgZWRpdGluZyBtb2RlIGZvciB0aGUgd2lkZ2V0XG4gICAqXG4gICAqIEBtZW1iZXJvZiBMYXlvdXRJdGVtSW5CdWlsZGVyXG4gICAqL1xuICBmdW5jdGlvbiBkb3VibGVDbGljayAoZSkge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gcHJvcHNcbiAgICBjb25zdCB7IHN1cHBvcnRJbmxpbmVFZGl0aW5nLCB3aWRnZXRJZCB9ID0gc3RhdGVQcm9wc1xuXG4gICAgaWYgKHByb3BzLm9uRG91YmxlQ2xpY2spIHtcbiAgICAgIHByb3BzLm9uRG91YmxlQ2xpY2soZSwgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0pXG4gICAgfVxuICAgIGlmIChwYWdlQ29udGV4dC52aWV3T25seSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBpZiAoc3VwcG9ydElubGluZUVkaXRpbmcpIHtcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZXRXaWRnZXRJc0lubGluZUVkaXRpbmdTdGF0ZSh3aWRnZXRJZCwgdHJ1ZSkpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25JdGVtQ2xpY2sgKGUpIHtcbiAgICBpZiAoTWF0aC5hYnMoZS5zY3JlZW5YIC0gbW91c2Vkb3duWCkgPiBDTElDS19UT0xSRVJBTkNFIHx8IE1hdGguYWJzKGUuc2NyZWVuWSAtIG1vdXNlZG93blkpID4gQ0xJQ0tfVE9MUkVSQU5DRSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHsgdmlld09ubHkgfSA9IHBhZ2VDb250ZXh0XG4gICAgY29uc3QgeyBpc0Z1bmN0aW9uYWxXaWRnZXQsIGxheW91dEl0ZW0gfSA9IHN0YXRlUHJvcHNcbiAgICBpZiAoXG4gICAgICB2aWV3T25seSB8fFxuICAgICAgKChpc0xvY2tMYXlvdXQoKSB8fCAhaXNEZXNpZ25Nb2RlKCkpICYmXG4gICAgICAgICFpc0Z1bmN0aW9uYWxXaWRnZXQgJiZcbiAgICAgICAgbGF5b3V0SXRlbS50eXBlICE9PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKVxuICAgICkge1xuICAgICAgLy8gcHJvcGFnYXRlIG5vcm1hbGx5IGluIHZpZXcgbW9kZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChpc1Jlc2l6aW5nKCkgfHwgaXNEcmFnZ2luZygpKSB7XG4gICAgICAvLyBQcmV2ZW50IHN3aXRjaGluZyBzZWxlY3Rpb24gd2hlbiByZXNpemluZyBhbiBpdGVtXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gYWxsUHJvcHNcbiAgICAgIHByb3BzLm9uQ2xpY2soZSwgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0pXG4gICAgfVxuICAgIHN3aXRjaFNldHRpbmcoKVxuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24gKGUpIHtcbiAgICBtb3VzZWRvd25YID0gZS5zY3JlZW5YXG4gICAgbW91c2Vkb3duWSA9IGUuc2NyZWVuWVxuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ29udGV4dE1lbnUgKHJvdGF0ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgeyBidWlsZGVyVGhlbWUgfSA9IHBhZ2VDb250ZXh0XG4gICAgcmV0dXJuIChcbiAgICAgIDxDb250ZXh0TWVudVxuICAgICAgICBidWlsZGVyVGhlbWU9e2J1aWxkZXJUaGVtZX1cbiAgICAgICAgbGF5b3V0SWQ9e3Byb3BzLmxheW91dElkfVxuICAgICAgICBsYXlvdXRJdGVtPXtzdGF0ZVByb3BzLmxheW91dEl0ZW19XG4gICAgICAgIHBvc2l0aW9uVHlwZT0nY2VudGVyJ1xuICAgICAgICBzaXplPXtDT05URVhUX01FTlVfSVRFTV9TSVpFfVxuICAgICAgICByb3RhdGU9e3JvdGF0ZX1cbiAgICAgICAgaWNvblNpemU9e0NPTlRFWFRfTUVOVV9JQ09OX1NJWkV9XG4gICAgICAgIGNsYXNzTmFtZT0nd2lkZ2V0LWNvbnRleHQtbWVudSdcbiAgICAgICAgbWVudUl0ZW1zPXtwcm9wcy5jb250ZXh0TWVudUl0ZW1zIHx8IChzdGF0ZVByb3BzLnVzZURyYWdIYW5kbGVyID8gZHJhZ01lbnVzIDogZGVmYXVsdENvbnN0ZXh0TWVudXMpfVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBmdW5jdGlvbiBzd2l0Y2hTZXR0aW5nICgpIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IHByb3BzXG4gICAgaWYgKCFzdGF0ZVByb3BzLnNlbGVjdGVkKSB7XG4gICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKFxuICAgICAgICBhcHBBY3Rpb25zLnNlbGVjdGlvbkNoYW5nZWQoe1xuICAgICAgICAgIGxheW91dElkLFxuICAgICAgICAgIGxheW91dEl0ZW1JZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFN0eWxlIChyb3RhdGU6IG51bWJlcikge1xuICAgIGNvbnN0IGRyYWdnYWJsZSA9IGNhbkRyYWcoKVxuICAgIGNvbnN0IGlzSW5saW5lRWRpdGluZyA9IHN0YXRlUHJvcHMuaXNJbmxpbmVFZGl0aW5nID8/IGZhbHNlXG4gICAgY29uc3QgZGVmYXVsdENvbG9yID0gcG9saXNoZWQucmdiYShwYWdlQ29udGV4dC5idWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1szMDBdLCAwLjYpXG4gICAgY29uc3QgaG92ZXJDb2xvciA9IHBhZ2VDb250ZXh0LmJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzYwMF1cbiAgICBjb25zdCBvdXRsaW5lU3R5bGUgPVxuICAgICAgKCFpc0Z1bmN0aW9uYWxXaWRnZXQgfHwgaXNTZWN0aW9uKSAmJiAhc2VsZWN0ZWQgPyAnZGFzaGVkJyA6ICdzb2xpZCdcbiAgICBsZXQgaG92ZXJTdHlsZSA9IG51bGxcblxuICAgIGlmICghaXNEZXNpZ25Nb2RlKCkpIHtcbiAgICAgIGhvdmVyU3R5bGUgPSBnZXRIb3ZlclN0eWxlKGhvdmVyRWZmZWN0Py50eXBlLCBob3ZlckVmZmVjdD8uc2V0dGluZylcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzYFxuICAgICAgJHtob3ZlclN0eWxlfTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgY3Vyc29yOiAke2RyYWdnYWJsZSA/ICdtb3ZlJyA6ICdkZWZhdWx0J307XG4gICAgICB0b3VjaC1hY3Rpb246ICR7KGlzSW5saW5lRWRpdGluZyB8fCAhc2VsZWN0ZWQpID8gJ2F1dG8nIDogJ25vbmUnfTtcbiAgICAgIHVzZXItc2VsZWN0OiAke2lzSW5saW5lRWRpdGluZyA/ICdhdXRvJyA6ICdub25lJ307XG4gICAgICBtaW4td2lkdGg6ICR7TUlOX0xBWU9VVF9JVEVNX1NJWkV9cHg7XG4gICAgICBtaW4taGVpZ2h0OiAke01JTl9MQVlPVVRfSVRFTV9TSVpFfXB4O1xuXG4gICAgICAmID4gZGl2LndpZGdldC1jb250ZXh0LW1lbnUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuXG4gICAgICAmOmhvdmVyID4gZGl2LndpZGdldC1jb250ZXh0LW1lbnUge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgfVxuXG4gICAgICAuJHtHTE9CQUxfSDVfRFJBR0dJTkdfQ0xBU1NfTkFNRX0gJi5mdW5jdGlvbmFsLXdpZGdldCB7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuICAgICAgLiR7R0xPQkFMX0g1X0RSQUdHSU5HX0NMQVNTX05BTUV9ICYuZnVuY3Rpb25hbC13aWRnZXQgLmV4Yi1kcm9wLWFyZWEge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1xuICAgICAgfVxuXG4gICAgICAuJHtHTE9CQUxfSDVfRFJBR0dJTkdfQ0xBU1NfTkFNRX0gJixcbiAgICAgIC4ke0dMT0JBTF9EUkFHR0lOR19DTEFTU19OQU1FfSAmIHtcbiAgICAgICAgPiBkaXYuaGlnaGxpZ2h0LXRpcCB7XG4gICAgICAgICAgLnRpcC1jb250ZW50IHtcbiAgICAgICAgICAgIG91dGxpbmUtY29sb3I6ICR7ZGVmYXVsdENvbG9yfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmLFxuICAgICAgYm9keS5sb2NrLWxheW91dCAmIHtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYgPiBkaXYuaGlnaGxpZ2h0LXRpcCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgJiA+IGRpdi5oaWdobGlnaHQtdGlwIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHBhZGRpbmc6IGluaGVyaXQ7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgdHJhbnNmb3JtOiAke3JvdGF0ZSA+IDAgfHwgcm90YXRlIDwgMCA/IGByb3RhdGVaKCR7cm90YXRlfWRlZylgIDogJyd9O1xuICAgICAgICAudGlwLWNvbnRlbnQge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiAxcHg7XG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgb3V0bGluZTogJHtpc0Jsb2NrICYmICFzZWxlY3RlZFxuICAgICAgICAgICAgICA/ICdub25lJ1xuICAgICAgICAgICAgICA6IGAxcHggJHtvdXRsaW5lU3R5bGV9ICR7ZGVmYXVsdENvbG9yfWB9O1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICBvdXRsaW5lLWNvbG9yOiAkeyFpc0Z1bmN0aW9uYWxXaWRnZXQgfHwgaXNTZWN0aW9uXG4gICAgICAgICAgICAgID8gZGVmYXVsdENvbG9yXG4gICAgICAgICAgICAgIDogJ3RyYW5zcGFyZW50J307XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICY6aG92ZXIgPiBkaXYuaGlnaGxpZ2h0LXRpcCxcbiAgICAgICYuaG92ZXJlZCA+IGRpdi5oaWdobGlnaHQtdGlwIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIC50aXAtY29udGVudCB7XG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBvdXRsaW5lLWNvbG9yOiAke2hvdmVyQ29sb3J9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLmZ1bmN0aW9uYWwtd2lkZ2V0Om5vdCguc2VsZWN0ZWQpOmhvdmVyID4gZGl2LmhpZ2hsaWdodC10aXAsXG4gICAgICAmLmZ1bmN0aW9uYWwtd2lkZ2V0Om5vdCguc2VsZWN0ZWQpLmhvdmVyZWQgPiBkaXYuaGlnaGxpZ2h0LXRpcCB7XG4gICAgICAgIC50aXAtY29udGVudCB7XG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBvdXRsaW5lLXdpZHRoOiAycHg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgZnVuY3Rpb24gY2FuRHJhZyAoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBzZWxlY3RlZCwgZHJhZ2dhYmxlID0gdHJ1ZSB9ID0gYWxsUHJvcHNcbiAgICBjb25zdCBpc0lubGluZUVkaXRpbmcgPSBzdGF0ZVByb3BzLmlzSW5saW5lRWRpdGluZyA/PyBmYWxzZVxuICAgIGNvbnN0IGlzVG91Y2hEZXZpY2UgPSB1dGlscy5pc1RvdWNoRGV2aWNlKClcbiAgICByZXR1cm4gKFxuICAgICAgZHJhZ2dhYmxlICYmIC8vIGRyYWdnYWJsZSAhPT0gZmFsc2VcbiAgICAgICFwYWdlQ29udGV4dC52aWV3T25seSAmJlxuICAgICAgIWlzSW5saW5lRWRpdGluZyAmJlxuICAgICAgKCFpc1RvdWNoRGV2aWNlIHx8IHNlbGVjdGVkKVxuICAgIClcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBsYXlvdXRJZCxcbiAgICBsYXlvdXRJdGVtSWQsXG4gICAgdG9wLFxuICAgIGxlZnQsXG4gICAgcmlnaHQsXG4gICAgYm90dG9tLFxuICAgIHJlc2l6YWJsZSxcbiAgICBkcmFnZ2FibGUsXG4gICAgaXNCbG9jayxcbiAgICBhdXRvU2Nyb2xsLFxuICAgIGxheW91dEl0ZW0sXG4gICAgaXNGdW5jdGlvbmFsV2lkZ2V0LFxuICAgIHNlbGVjdGVkLFxuICAgIGlzSW5saW5lRWRpdGluZyxcbiAgICBoYXNFbWJlZGRlZExheW91dCxcbiAgICBoYXNFeHRlbnNpb25cbiAgfSA9IGFsbFByb3BzXG5cbiAgaWYgKCFsYXlvdXRJdGVtKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCBmb3JiaWRDb250ZXh0TWVudSwgb25DbGljaywgb25Eb3VibGVDbGljaywgY2hpbGRyZW4sIGlkLCBpc0xhc3RDaGlsZCwgLi4ub3RoZXJQcm9wcyB9ID0gYWxsUHJvcHNcbiAgY29uc3QgaXNXaWRnZXQgPSBsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldFxuICBjb25zdCBpc1NlY3Rpb24gPSBsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb25cbiAgY29uc3Qgc2hvd0NvbnRleHRNZW51ID1cbiAgICAhZm9yYmlkQ29udGV4dE1lbnUgJiZcbiAgICAhcGFnZUNvbnRleHQudmlld09ubHkgJiZcbiAgICAobGF5b3V0SXRlbS53aWRnZXRJZCB8fCBsYXlvdXRJdGVtLnNlY3Rpb25JZCkgJiZcbiAgICAoIWlzRnVuY3Rpb25hbFdpZGdldCB8fCBpc1NlY3Rpb24pXG5cbiAgY29uc3QgZWZmZWN0T3B0aW9uID0gZWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddPy5vcHRpb25cbiAgY29uc3Qgcm90YXRlID0gbGF5b3V0SXRlbS5zZXR0aW5nPy5zdHlsZT8udHJhbnNmb3JtPy5yb3RhdGUgPz8gMFxuXG4gIHJldHVybiAoXG4gICAgPFZpZXdwb3J0VmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2lzRGVzaWduTW9kZSgpID8gdHJ1ZSA6IGlzSW5WaWV3cG9ydH0+XG4gICAgICA8QW5pbWF0aW9uQ29tcG9uZW50XG4gICAgICAgIGlkPXtpZH1cbiAgICAgICAgcGFyZW50SWQ9e2xheW91dElkfVxuICAgICAgICB0eXBlPXtlZmZlY3RUeXBlfVxuICAgICAgICBjb25maWdUeXBlPXtlZmZlY3RPcHRpb24/LmNvbmZpZ1R5cGV9XG4gICAgICAgIGRpcmVjdGlvbj17ZWZmZWN0T3B0aW9uPy5kaXJlY3Rpb259XG4gICAgICAgIHJldmVydD17YXNPbmVSZXZlcnR9XG4gICAgICAgIGRlbGF5PXtwcm9wcy5kZWxheX1cbiAgICAgICAgaXNMYXN0Q2hpbGQ9e2lzTGFzdENoaWxkfVxuICAgICAgICBwbGF5SWQ9e2FzT25lUGxheUlkfVxuICAgICAgICBob3ZlckVmZmVjdD17aG92ZXJFZmZlY3R9XG4gICAgICAgIGhvdmVyUGxheUlkPXtwcmV2aWV3SWR9XG4gICAgICAgIG9uQW5pbWF0aW9uU3RhcnQ9e2hhbmRsZVNpbmdsZUFuaW1hdGlvblN0YXJ0fVxuICAgICAgICBvbkFuaW1hdGlvbkVuZD17aGFuZGxlU2luZ2xlQW5pbWF0aW9uRW5kfVxuICAgICAgICBjc3M9e2dldFN0eWxlKHJvdGF0ZSl9XG4gICAgICAgIHN0eWxlPXtwcm9wcy5zdHlsZX1cbiAgICAgICAgcmVmPXtyZWZPYmp9XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYnVpbGRlci1sYXlvdXQtaXRlbSBleGItcm5kJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgc2VsZWN0ZWQsXG4gICAgICAgICAgJ2lzLXdpZGdldCc6IGlzV2lkZ2V0LFxuICAgICAgICAgICdpcy1zZWN0aW9uJzogaXNTZWN0aW9uLFxuICAgICAgICAgICdmdW5jdGlvbmFsLXdpZGdldCc6IGlzV2lkZ2V0ICYmIGlzRnVuY3Rpb25hbFdpZGdldCxcbiAgICAgICAgICAnbm8tZHJhZy1hY3Rpb24nOiAhY2FuRHJhZygpXG4gICAgICAgIH0pfVxuICAgICAgICBvbkRvdWJsZUNsaWNrPXtkb3VibGVDbGlja31cbiAgICAgICAgb25DbGljaz17b25JdGVtQ2xpY2t9XG4gICAgICAgIG9uTW91c2VEb3duPXtvbk1vdXNlRG93bn1cbiAgICAgICAgZGF0YS1sYXlvdXRpdGVtaWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgZGF0YS1sYXlvdXRpZD17bGF5b3V0SWR9XG4gICAgICA+XG4gICAgICAgIDxBbmltYXRpb25Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXthbmltYXRpb25Db250ZXh0fT5cbiAgICAgICAgICB7aXNXaWRnZXQgJiYgPFdpZGdldFJlbmRlcmVySW5CdWlsZGVyIHJvdGF0ZT17cm90YXRlfSBvbkluaXREcmFnSGFuZGxlcj17cmVnaXN0ZXJXaWRnZXRJbml0RHJhZ0hhbmRsZXJ9IG9uSW5pdFJlc2l6ZUhhbmRsZXI9e3JlZ2lzdGVyV2lkZ2V0SW5pdFJlc2l6ZUhhbmRsZXJ9IHsuLi5vdGhlclByb3BzfSAvPn1cbiAgICAgICAgICB7aXNTZWN0aW9uICYmIDxTZWN0aW9uUmVuZGVyZXJJbkJ1aWxkZXIgcm90YXRlPXtyb3RhdGV9IHsuLi5vdGhlclByb3BzfSAvPn1cbiAgICAgICAgPC9BbmltYXRpb25Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgICB7KHNob3dDb250ZXh0TWVudSB8fCBzdGF0ZVByb3BzLnVzZURyYWdIYW5kbGVyKSAmJiAhcGFnZUNvbnRleHQudmlld09ubHkgJiYgIXN0YXRlUHJvcHMuaXNJbkNvbnRyb2xsZXIgJiYgY3JlYXRlQ29udGV4dE1lbnUocm90YXRlKX1cbiAgICAgICAgeyFwYWdlQ29udGV4dC52aWV3T25seSAmJiBzZWxlY3RlZCAmJiAoXG4gICAgICAgICAgPFNlbGVjdFdyYXBwZXJcbiAgICAgICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgICAgIGxheW91dEl0ZW09e2xheW91dEl0ZW19XG4gICAgICAgICAgICB0b3A9e3RvcH1cbiAgICAgICAgICAgIGxlZnQ9e2xlZnR9XG4gICAgICAgICAgICByaWdodD17cmlnaHR9XG4gICAgICAgICAgICBib3R0b209e2JvdHRvbX1cbiAgICAgICAgICAgIHJlc2l6YWJsZT17cmVzaXphYmxlfVxuICAgICAgICAgICAgZHJhZ2dhYmxlPXtkcmFnZ2FibGV9XG4gICAgICAgICAgICBzZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICAgICAgICBhdXRvU2Nyb2xsPXthdXRvU2Nyb2xsfVxuICAgICAgICAgICAgZm9yYmlkVG9vbGJhcj17cHJvcHMuZm9yYmlkVG9vbGJhcn1cbiAgICAgICAgICAgIHRvb2xJdGVtcz17cHJvcHMudG9vbEl0ZW1zfVxuICAgICAgICAgICAgc2hvd0RlZmF1bHRUb29scz17cHJvcHMuc2hvd0RlZmF1bHRUb29sc31cbiAgICAgICAgICAgIGlzSW5saW5lRWRpdGluZz17aXNJbmxpbmVFZGl0aW5nfVxuICAgICAgICAgICAgaXNGdW5jdGlvbmFsV2lkZ2V0PXtpc0Z1bmN0aW9uYWxXaWRnZXR9XG4gICAgICAgICAgICBoYXNFbWJlZGRlZExheW91dD17aGFzRW1iZWRkZWRMYXlvdXR9XG4gICAgICAgICAgICBpc1NlY3Rpb249e2lzU2VjdGlvbn1cbiAgICAgICAgICAgIGlzQmxvY2s9e2lzQmxvY2t9XG4gICAgICAgICAgICBoYXNFeHRlbnNpb249e2lzV2lkZ2V0ICYmIGhhc0V4dGVuc2lvbn1cbiAgICAgICAgICAgIHdpZGdldEpzb249e3N0YXRlUHJvcHMud2lkZ2V0SnNvbn1cbiAgICAgICAgICAgIHdpZGdldFN0YXRlPXtzdGF0ZVByb3BzLndpZGdldFN0YXRlfVxuICAgICAgICAgICAgcm90YXRlPXtyb3RhdGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgeyFwYWdlQ29udGV4dC52aWV3T25seSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2hpZ2hsaWdodC10aXAnPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpcC1jb250ZW50JyAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICA8L0FuaW1hdGlvbkNvbXBvbmVudD5cbiAgICA8L1ZpZXdwb3J0VmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzOiAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IFN0YXRlVG9JdGVtUHJvcHMgPSBjcmVhdGVTZWxlY3RvcihbXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IExheW91dEl0ZW1Qcm9wcykgPT4gbGF5b3V0VXRpbHMubWFwU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyhzdGF0ZSwgb3duUHJvcHMpLFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW293blByb3BzLmxheW91dElkXT8udHlwZSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKHN0YXRlLmFwcENvbmZpZywgeyBsYXlvdXRJZDogb3duUHJvcHMubGF5b3V0SWQsIGxheW91dEl0ZW1JZDogb3duUHJvcHMubGF5b3V0SXRlbUlkIH0pXG4gICAgaWYgKGxheW91dEl0ZW0/LnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgICAgY29uc3QgaW5uZXJMYXlvdXRJZCA9IGZpbmRJbm5lckxheW91dElkKHN0YXRlLCBvd25Qcm9wcy5sYXlvdXRJZCwgb3duUHJvcHMubGF5b3V0SXRlbUlkKVxuICAgICAgcmV0dXJuIGlubmVyTGF5b3V0SWRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKHN0YXRlLmFwcENvbmZpZywgeyBsYXlvdXRJZDogb3duUHJvcHMubGF5b3V0SWQsIGxheW91dEl0ZW1JZDogb3duUHJvcHMubGF5b3V0SXRlbUlkIH0pXG4gICAgaWYgKGxheW91dEl0ZW0/LnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgICAgcmV0dXJuIGxheW91dFV0aWxzLm1hcFN0YXRlVG9XaWRnZXRQcm9wcyhzdGF0ZSwgb3duUHJvcHMpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IExheW91dEl0ZW1Qcm9wcykgPT4ge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShzdGF0ZS5hcHBDb25maWcsIHsgbGF5b3V0SWQ6IG93blByb3BzLmxheW91dElkLCBsYXlvdXRJdGVtSWQ6IG93blByb3BzLmxheW91dEl0ZW1JZCB9KVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICByZXR1cm4gc2VhcmNoVXRpbHMuZ2V0U2VjdGlvbkluZm8oc3RhdGUsIGxheW91dEl0ZW0uc2VjdGlvbklkKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc2VhcmNoVXRpbHMuZmluZExheW91dEl0ZW0oc3RhdGUuYXBwQ29uZmlnLCB7IGxheW91dElkOiBvd25Qcm9wcy5sYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBvd25Qcm9wcy5sYXlvdXRJdGVtSWQgfSlcbiAgICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbikge1xuICAgICAgY29uc3Qgc2VjdGlvblByb3BzID0gc2VhcmNoVXRpbHMuZ2V0U2VjdGlvbkluZm8oc3RhdGUsIGxheW91dEl0ZW0uc2VjdGlvbklkKVxuICAgICAgY29uc3QgYWN0aXZlVmlld0lkID0gZmluZEFjdGl2ZVZpZXdJZChzZWN0aW9uUHJvcHMpXG4gICAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLnZpZXdzW2FjdGl2ZVZpZXdJZF1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXSwgKGxheW91dEl0ZW1Qcm9wcywgbGF5b3V0VHlwZSwgaW5uZXJMYXlvdXRJZCwgd2lkZ2V0UHJvcHMsIHNlY3Rpb25Qcm9wcywgYWN0aXZlVmlldykgPT4ge1xuICByZXR1cm4ge1xuICAgIGxheW91dFR5cGUsXG4gICAgaW5uZXJMYXlvdXRJZCxcbiAgICBhY3RpdmVWaWV3LFxuICAgIC4uLmxheW91dEl0ZW1Qcm9wcyxcbiAgICAuLi4od2lkZ2V0UHJvcHMgPz8ge30pLFxuICAgIC4uLihzZWN0aW9uUHJvcHMgPz8ge30pXG4gIH0gYXMgU3RhdGVUb0l0ZW1Qcm9wc1xufSlcbiIsImltcG9ydCB7IHR5cGUgTGF5b3V0Q29udGV4dFRvb2xQcm9wcywgTGF5b3V0SXRlbVR5cGUsIGdldEFwcFN0b3JlLCBBcHBNb2RlLCBhcHBBY3Rpb25zLCB0eXBlIExheW91dEl0ZW1Kc29uLCBXaWRnZXRUeXBlLCB0eXBlIElNTGF5b3V0SXRlbUpzb24gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQge1xuICBwZW5kTGF5b3V0SXRlbSxcbiAgZHVwbGljYXRlTGF5b3V0SXRlbSxcbiAgc2lua2luZ0xheW91dEl0ZW0sXG4gIHN1cHBvcnRGbG9hdGluZ1xufSBmcm9tICcuLi9jb21tb24tbGF5b3V0LWFjdGlvbnMnXG5pbXBvcnQgeyBhcHBCdWlsZGVyU3luYyB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyBGbG9hdGluZ0FyZWFDaG9vc2VyIH0gZnJvbSAnLi9mbG9hdGluZy1hcmVhLWNob29zZXInXG5pbXBvcnQgdHJhc2hPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xuaW1wb3J0IHBlbmRpbmdPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvcGVuZGluZy5zdmcnXG5pbXBvcnQgZHJhZ091dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9tb3ZlLnN2ZydcbmltcG9ydCBkdXBsaWNhdGVPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvZHVwbGljYXRlLnN2ZydcbmltcG9ydCBmbG9hdE91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9mbG9hdC5zdmcnXG5pbXBvcnQgdW5mbG9hdE91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci91bmZsb2F0LnN2ZydcbmltcG9ydCBzZXR0aW5nT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vc2V0dGluZy5zdmcnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcHBNb2RlICgpIHtcbiAgbGV0IHN0YXRlID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gIGlmICh3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXIpIHtcbiAgICBzdGF0ZSA9IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyXG4gIH1cbiAgcmV0dXJuIHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5hcHBNb2RlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xvY2tMYXlvdXQgKCkge1xuICBsZXQgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgIHN0YXRlID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgfVxuICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnPy5mb3JCdWlsZGVyQXR0cmlidXRlcz8ubG9ja0xheW91dCA/PyBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFiZWxPZkxheW91dEl0ZW0gKGxheW91dEl0ZW0pIHtcbiAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xuICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbj8ubGFiZWwgPz8gJydcbiAgfVxuXG4gIGlmIChsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24pIHtcbiAgICBjb25zdCBzZWN0aW9uSnNvbiA9IGFwcENvbmZpZy5zZWN0aW9uc1tsYXlvdXRJdGVtLnNlY3Rpb25JZF1cbiAgICByZXR1cm4gc2VjdGlvbkpzb24/LmxhYmVsID8/ICcnXG4gIH1cblxuICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cCkge1xuICAgIGNvbnN0IHNnSnNvbiA9IGFwcENvbmZpZy5zY3JlZW5Hcm91cHNbbGF5b3V0SXRlbS5zY3JlZW5Hcm91cElkXVxuICAgIHJldHVybiBzZ0pzb24/LmxhYmVsID8/ICcnXG4gIH1cbiAgcmV0dXJuICcnXG59XG5cbmZ1bmN0aW9uIGhhc0NvbnRlbnQgKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgcmV0dXJuIGxheW91dEl0ZW0ud2lkZ2V0SWQgIT0gbnVsbCB8fCBsYXlvdXRJdGVtLnNlY3Rpb25JZCAhPSBudWxsIHx8IGxheW91dEl0ZW0uc2NyZWVuR3JvdXBJZCAhPSBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Rlc2lnbk1vZGUgKCkge1xuICByZXR1cm4gZ2V0QXBwTW9kZSgpID09PSBBcHBNb2RlLkRlc2lnblxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb3JtYWxXaWRnZXQgKGxheW91dEl0ZW06IExheW91dEl0ZW1Kc29uIHwgSU1MYXlvdXRJdGVtSnNvbikge1xuICBsZXQgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgIHN0YXRlID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgfVxuICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgbGF5b3V0SXRlbS53aWRnZXRJZCkge1xuICAgIGNvbnN0IGFwcENvbmZpZyA9IHN0YXRlLmFwcENvbmZpZ1xuICAgIGNvbnN0IHdpZGdldCA9IGFwcENvbmZpZy53aWRnZXRzW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG4gICAgaWYgKHdpZGdldCkge1xuICAgICAgcmV0dXJuIHdpZGdldC5tYW5pZmVzdD8ud2lkZ2V0VHlwZSAhPT0gV2lkZ2V0VHlwZS5MYXlvdXRcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBjb25zdCBkZWxldGVNZW51SXRlbSA9IHtcbiAgaWNvbjogdHJhc2hPdXRsaW5lZCxcbiAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnZGVsZXRlJylcbiAgfSxcbiAgdmlzaWJsZTogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgcmV0dXJuIGdldEFwcE1vZGUoKSA9PT0gQXBwTW9kZS5EZXNpZ24gJiZcbiAgICAgICghaXNMb2NrTGF5b3V0KCkgfHwgaXNOb3JtYWxXaWRnZXQocHJvcHMubGF5b3V0SXRlbSkpXG4gIH0sXG4gIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgbGF5b3V0SWQgfSA9IHByb3BzXG4gICAgY29uc3QgbGF5b3V0SW5mbyA9IHtcbiAgICAgIGxheW91dElkLFxuICAgICAgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkXG4gICAgfVxuICAgIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hDb25maXJtRGVsZXRlVG9BcHAobGF5b3V0SW5mbylcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcGVuZGluZ01lbnVJdGVtID0ge1xuICBpY29uOiBwZW5kaW5nT3V0bGluZWQsXG4gIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3BlbmRpbmdUaXAnKVxuICB9LFxuICB2aXNpYmxlOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IGdldEFwcE1vZGUoKSA9PT0gQXBwTW9kZS5EZXNpZ24gJiYgIWlzTG9ja0xheW91dCgpICYmIGhhc0NvbnRlbnQocHJvcHMpLFxuICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgIHBlbmRMYXlvdXRJdGVtKHtcbiAgICAgIGxheW91dElkLFxuICAgICAgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc2V0dGluZ01lbnVJdGVtID0ge1xuICBpY29uOiBzZXR0aW5nT3V0bGluZWQsXG4gIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NldHRpbmcnKVxuICB9LFxuICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKHtcbiAgICAgIGxheW91dElkLFxuICAgICAgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkXG4gICAgfSkpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRyYWdnaW5nTWVudUl0ZW0gPSB7XG4gIGljb246IGRyYWdPdXRsaW5lZCxcbiAgdGl0bGU6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcyAmIHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcsIHZhbHVlcz86IGFueSkgPT4gc3RyaW5nIH0pID0+IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHByb3BzXG4gICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2RyYWdUb01vdmUnLCB7IGxhYmVsOiBnZXRMYWJlbE9mTGF5b3V0SXRlbShsYXlvdXRJdGVtKSB9KVxuICB9LFxuICB2aXNpYmxlOiAoKSA9PiBnZXRBcHBNb2RlKCkgPT09IEFwcE1vZGUuRGVzaWduICYmICFpc0xvY2tMYXlvdXQoKVxufVxuXG5leHBvcnQgY29uc3QgZHVwbGljYXRlTWVudUl0ZW0gPSB7XG4gIGljb246IGR1cGxpY2F0ZU91dGxpbmVkLFxuICB0aXRsZTogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdkdXBsaWNhdGUnKVxuICB9LFxuICB2aXNpYmxlOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICBpZiAoaXNMb2NrTGF5b3V0KCkgfHwgIWlzRGVzaWduTW9kZSgpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgLy8gaWYgaXQgaXMgaW4gYSByb3csIHRoZSBudW1iZXIgb2Ygc2libGluZyBpdGVtcyBzaG91bGQgYmUgbGVzcyB0aGFuIDEyXG4gICAgY29uc3QgeyBsYXlvdXRJZCB9ID0gcHJvcHNcbiAgICBjb25zdCBsYXlvdXQgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnPy5sYXlvdXRzW2xheW91dElkXVxuICAgIGlmICgobGF5b3V0Py50eXBlIGFzIGFueSkgPT09ICdST1cnKSB7XG4gICAgICByZXR1cm4gKGxheW91dC5vcmRlcj8ubGVuZ3RoID8/IDApIDwgMTJcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfSxcbiAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICBkdXBsaWNhdGVMYXlvdXRJdGVtKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZCB9KVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBmbG9hdGluZ01lbnVJdGVtID0ge1xuICBpY29uOiBmbG9hdE91dGxpbmVkLFxuICB0aXRsZTogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdmbG9hdGluZycpXG4gIH0sXG4gIHZpc2libGU6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgIGlmIChpc0xvY2tMYXlvdXQoKSB8fCAhaXNEZXNpZ25Nb2RlKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgIHJldHVybiBzdXBwb3J0RmxvYXRpbmcoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0pXG4gIH0sXG4gIHNldHRpbmdQYW5lbDogRmxvYXRpbmdBcmVhQ2hvb3NlcixcbiAgb25DbGljazogKCkgPT4geyB9XG59XG5cbmV4cG9ydCBjb25zdCBzaW5raW5nTWVudUl0ZW0gPSB7XG4gIGljb246IHVuZmxvYXRPdXRsaW5lZCxcbiAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnc2lua2luZycpXG4gIH0sXG4gIHZpc2libGU6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgIGlmIChpc0xvY2tMYXlvdXQoKSB8fCAhaXNEZXNpZ25Nb2RlKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHByb3BzXG4gICAgcmV0dXJuIChsYXlvdXRJdGVtLnNldHRpbmc/LmlzRmxvYXRpbmcgPz8gZmFsc2UpXG4gIH0sXG4gIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0sIGNsaWVudFJlY3QgfSA9IHByb3BzXG4gICAgc2lua2luZ0xheW91dEl0ZW0oeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0sIGNsaWVudFJlY3QpXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICBBUFBfRlJBTUVfTkFNRV9JTl9CVUlMREVSLFxuICB0eXBlIElNTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBnZXRUaGVtZSwgZ2V0VGhlbWUyIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCB7IGZsb2F0aW5nTGF5b3V0SXRlbSB9IGZyb20gJy4uL2NvbW1vbi1sYXlvdXQtYWN0aW9ucydcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGFyZWE/OiBudW1iZXJcbiAgbGF5b3V0SWQ6IHN0cmluZ1xuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uXG59XG5cbmV4cG9ydCBjbGFzcyBGbG9hdGluZ0FyZWFDaG9vc2VyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcz4ge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzOiBQYXJ0aWFsPFByb3BzPiA9IHtcbiAgICBhcmVhOiAwXG4gIH1cblxuICB0b3BMZWZ0OiAoKSA9PiB2b2lkXG4gIHRvcENlbnRlcjogKCkgPT4gdm9pZFxuICB0b3BSaWdodDogKCkgPT4gdm9pZFxuICBtaWRkbGVMZWZ0OiAoKSA9PiB2b2lkXG4gIG1pZGRsZUNlbnRlcjogKCkgPT4gdm9pZFxuICBtaWRkbGVSaWdodDogKCkgPT4gdm9pZFxuICBib3R0b21MZWZ0OiAoKSA9PiB2b2lkXG4gIGJvdHRvbUNlbnRlcjogKCkgPT4gdm9pZFxuICBib3R0b21SaWdodDogKCkgPT4gdm9pZFxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMudG9wTGVmdCA9IHRoaXMudXBkYXRlRmxvYXRpbmdBcmVhLmJpbmQodGhpcywgMSlcbiAgICB0aGlzLnRvcENlbnRlciA9IHRoaXMudXBkYXRlRmxvYXRpbmdBcmVhLmJpbmQodGhpcywgMilcbiAgICB0aGlzLnRvcFJpZ2h0ID0gdGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCAzKVxuICAgIHRoaXMubWlkZGxlTGVmdCA9IHRoaXMudXBkYXRlRmxvYXRpbmdBcmVhLmJpbmQodGhpcywgNClcbiAgICB0aGlzLm1pZGRsZUNlbnRlciA9IHRoaXMudXBkYXRlRmxvYXRpbmdBcmVhLmJpbmQodGhpcywgNSlcbiAgICB0aGlzLm1pZGRsZVJpZ2h0ID0gdGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCA2KVxuICAgIHRoaXMuYm90dG9tTGVmdCA9IHRoaXMudXBkYXRlRmxvYXRpbmdBcmVhLmJpbmQodGhpcywgNylcbiAgICB0aGlzLmJvdHRvbUNlbnRlciA9IHRoaXMudXBkYXRlRmxvYXRpbmdBcmVhLmJpbmQodGhpcywgOClcbiAgICB0aGlzLmJvdHRvbVJpZ2h0ID0gdGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCA5KVxuICB9XG5cbiAgdXBkYXRlRmxvYXRpbmdBcmVhICh2YWx1ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGxheW91dEluZm8gPSB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfVxuICAgIGZsb2F0aW5nTGF5b3V0SXRlbShsYXlvdXRJbmZvLCB0aGlzLmdldFNpemVPZkl0ZW0oKSwgdmFsdWUpXG4gIH1cblxuICBnZXRTaXplT2ZJdGVtICgpOiBDbGllbnRSZWN0IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSB0aGlzLnByb3BzXG4gICAgbGV0IGFwcERvYzogRG9jdW1lbnRcbiAgICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgICBjb25zdCBhcHBGcmFtZTogSFRNTEZyYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGlmcmFtZVtuYW1lPVwiJHtBUFBfRlJBTUVfTkFNRV9JTl9CVUlMREVSfVwiXWApXG4gICAgICBhcHBEb2MgPSBhcHBGcmFtZT8uY29udGVudERvY3VtZW50IHx8IGFwcEZyYW1lPy5jb250ZW50V2luZG93LmRvY3VtZW50XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcERvYyA9IGRvY3VtZW50XG4gICAgfVxuICAgIGNvbnN0IGxheW91dEVsZW0gPSBhcHBEb2MucXVlcnlTZWxlY3RvcihcbiAgICAgIGBkaXYuZXhiLXJuZFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW0uaWR9XCJdYClcbiAgICBpZiAobGF5b3V0RWxlbSkge1xuICAgICAgcmV0dXJuIGxheW91dEVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICBsZXQgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbiAgICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgICB0aGVtZSA9IGdldFRoZW1lKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhlbWUgPSBnZXRUaGVtZTIoKVxuICAgIH1cbiAgICBjb25zdCBib3JkZXJDb2xvciA9IHRoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzUwMF1cbiAgICByZXR1cm4gY3NzYFxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFszMDBdfTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHBhZGRpbmc6IDRweDtcblxuICAgICAgLmNvbnRlbnQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyO1xuICAgICAgICBncmlkLXJvdy1nYXA6IDA7XG4gICAgICAgIGdyaWQtY29sdW1uLWdhcDogMDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgJHtib3JkZXJDb2xvcn07XG5cbiAgICAgICAgJiA+IGJ1dHRvbiB7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGhlaWdodDogNTBweDtcbiAgICAgICAgICB3aWR0aDogNTBweDtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuXG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGxlZnQ6IDFweDtcbiAgICAgICAgICAgIHRvcDogMXB4O1xuICAgICAgICAgICAgcmlnaHQ6IDFweDtcbiAgICAgICAgICAgIGJvdHRvbTogMXB4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgICY6aG92ZXIge1xuICAgICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNzAwXX07XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVsxMDBdfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAmID4gYnV0dG9uOm50aC1vZi10eXBlKDNuKzEpIHtcbiAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAke2JvcmRlckNvbG9yfTtcbiAgICAgICAgfVxuICAgICAgICAmID4gYnV0dG9uOm50aC1vZi10eXBlKDNuKSB7XG4gICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke2JvcmRlckNvbG9yfTtcbiAgICAgICAgfVxuICAgICAgICAmID4gYnV0dG9uOm50aC1vZi10eXBlKDEpLCAmID4gYnV0dG9uOm50aC1vZi10eXBlKDIpLCAmID4gYnV0dG9uOm50aC1vZi10eXBlKDMpIHtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgJHtib3JkZXJDb2xvcn07XG4gICAgICAgIH1cbiAgICAgICAgJiA+IGJ1dHRvbjpudGgtb2YtdHlwZSg3KSwgJiA+IGJ1dHRvbjpudGgtb2YtdHlwZSg4KSwgJiA+IGJ1dHRvbjpudGgtb2YtdHlwZSg5KSB7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7Ym9yZGVyQ29sb3J9O1xuICAgICAgICB9XG5cbiAgICAgICAgLnNlbGVjdGVkOmFmdGVyIHtcbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVsxMDBdfTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNjAwXX07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgYXJlYSB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbG9hdGluZy1hcmVhLWNob29zZXIgZC1mbGV4JyBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb250ZW50IHctMTAwJz5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3RvcC1sZWZ0JywgeyBzZWxlY3RlZDogYXJlYSA9PT0gMSB9KX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9wTGVmdH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndG9wLWNlbnRlcicsIHsgc2VsZWN0ZWQ6IGFyZWEgPT09IDIgfSl9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvcENlbnRlcn1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndG9wLXJpZ2h0JywgeyBzZWxlY3RlZDogYXJlYSA9PT0gMyB9KX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9wUmlnaHR9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ21pZGRsZS1sZWZ0JywgeyBzZWxlY3RlZDogYXJlYSA9PT0gNCB9KX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMubWlkZGxlTGVmdH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbWlkZGxlLWNlbnRlcicsIHsgc2VsZWN0ZWQ6IGFyZWEgPT09IDUgfSl9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm1pZGRsZUNlbnRlcn1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbWlkZGxlLXJpZ2h0JywgeyBzZWxlY3RlZDogYXJlYSA9PT0gNiB9KX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMubWlkZGxlUmlnaHR9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2JvdHRvbS1sZWZ0JywgeyBzZWxlY3RlZDogYXJlYSA9PT0gNyB9KX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuYm90dG9tTGVmdH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYm90dG9tLWNlbnRlcicsIHsgc2VsZWN0ZWQ6IGFyZWEgPT09IDggfSl9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmJvdHRvbUNlbnRlcn1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYm90dG9tLXJpZ2h0JywgeyBzZWxlY3RlZDogYXJlYSA9PT0gOSB9KX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuYm90dG9tUmlnaHR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgTGF5b3V0Q29udGV4dFRvb2xQcm9wcyxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIEFwcE1vZGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IHR5cGUgVG9vbEl0ZW1Db25maWcgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBnZXRBcHBNb2RlLCBpc0xvY2tMYXlvdXQgfSBmcm9tICcuL2NvbW1vbi1tZW51J1xuXG5pbXBvcnQgZHVwbGljYXRlSWNvbiBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvZHVwbGljYXRlLXBhZ2Uuc3ZnJ1xuaW1wb3J0IGRlbGV0ZUljb24gZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcblxuZnVuY3Rpb24gZmluZEFjdGl2ZVNjcmVlbkluZGV4IChzY3JlZW5Hcm91cElkOiBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgIHN0YXRlID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgfVxuICBjb25zdCBuYXZJbmZvID0gc3RhdGUuYXBwUnVudGltZUluZm8uc2NyZWVuR3JvdXBOYXZJbmZvcz8uW3NjcmVlbkdyb3VwSWRdXG4gIHJldHVybiBuYXZJbmZvPy5hY3RpdmVJbmRleCA/PyAwXG59XG5cbmV4cG9ydCBjb25zdCBzY3JlZW5NZW51SXRlbXM6IFRvb2xJdGVtQ29uZmlnW10gPSBbXG4gIHtcbiAgICBpY29uOiBkdXBsaWNhdGVJY29uLFxuICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnZHVwbGljYXRlU2NyZWVuJylcbiAgICB9LFxuICAgIHZpc2libGU6ICgpID0+IGdldEFwcE1vZGUoKSA9PT0gQXBwTW9kZS5EZXNpZ24gJiYgIWlzTG9ja0xheW91dCgpLFxuICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgY29uc3QgYWN0aXZlU2NyZWVuSW5kZXggPSBmaW5kQWN0aXZlU2NyZWVuSW5kZXgobGF5b3V0SXRlbS5zY3JlZW5Hcm91cElkKVxuICAgICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5kdXBsaWNhdGVTY3JlZW5CeUluZGV4KGFjdGl2ZVNjcmVlbkluZGV4LCBsYXlvdXRJdGVtLnNjcmVlbkdyb3VwSWQpXG4gICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2NyZWVuR3JvdXBOYXZJbmZvQ2hhbmdlZChsYXlvdXRJdGVtLnNjcmVlbkdyb3VwSWQsIGFjdGl2ZVNjcmVlbkluZGV4ICsgMSkpXG4gICAgfVxuICB9LFxuICB7XG4gICAgaWNvbjogZGVsZXRlSWNvbixcbiAgICB0aXRsZTogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2RlbGV0ZVNjcmVlbicpXG4gICAgfSxcbiAgICB2aXNpYmxlOiAoKSA9PiBnZXRBcHBNb2RlKCkgPT09IEFwcE1vZGUuRGVzaWduICYmICFpc0xvY2tMYXlvdXQoKSxcbiAgICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICAgIGNvbnN0IGFjdGl2ZVNjcmVlbkluZGV4ID0gZmluZEFjdGl2ZVNjcmVlbkluZGV4KGxheW91dEl0ZW0uc2NyZWVuR3JvdXBJZClcbiAgICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgICBjb25zdCB0b3RhbCA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcuc2NyZWVuR3JvdXBzW2xheW91dEl0ZW0uc2NyZWVuR3JvdXBJZF0uc2NyZWVucy5sZW5ndGhcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5yZW1vdmVTY3JlZW5CeUluZGV4KGFjdGl2ZVNjcmVlbkluZGV4LCBsYXlvdXRJdGVtLnNjcmVlbkdyb3VwSWQpLmV4ZWMoKVxuICAgICAgaWYgKGFjdGl2ZVNjcmVlbkluZGV4ID09PSB0b3RhbCAtIDEpIHtcbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlbkdyb3VwTmF2SW5mb0NoYW5nZWQobGF5b3V0SXRlbS5zY3JlZW5Hcm91cElkLCBhY3RpdmVTY3JlZW5JbmRleCAtIDEpKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXVxuIiwiaW1wb3J0IHtcbiAgamltdUhpc3RvcnksXG4gIHR5cGUgTGF5b3V0Q29udGV4dFRvb2xQcm9wcyxcbiAgZ2V0QXBwU3RvcmUsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgQXBwTW9kZSxcbiAgZ2V0SW5kZXhGcm9tUHJvZ3Jlc3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IHNlYXJjaFV0aWxzLCB0eXBlIFRvb2xJdGVtQ29uZmlnLCB0eXBlIFNlY3Rpb25Qcm9wcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGdldEFwcE1vZGUsIGlzTG9ja0xheW91dCB9IGZyb20gJy4vY29tbW9uLW1lbnUnXG5pbXBvcnQgbGVmdE91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2xlZnQuc3ZnJ1xuaW1wb3J0IHJpZ2h0T3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xuaW1wb3J0IGFkZE91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9wbHVzLnN2ZydcbmltcG9ydCBkdXBsaWNhdGVPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvZHVwbGljYXRlLXBhZ2Uuc3ZnJ1xuaW1wb3J0IGNsb3NlT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZydcblxuZnVuY3Rpb24gZmluZFNlY3Rpb25JbmZvIChsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uKSB7XG4gIGxldCBzdGF0ZSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKVxuICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgc3RhdGUgPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlclxuICB9XG4gIHJldHVybiBzZWFyY2hVdGlscy5nZXRTZWN0aW9uSW5mbyhzdGF0ZSwgbGF5b3V0SXRlbS5zZWN0aW9uSWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQWN0aXZlVmlld0lkIChwcm9wczogU2VjdGlvblByb3BzKTogc3RyaW5nIHtcbiAgY29uc3QgeyBuYXZJbmZvLCB2aWV3cywgYWN0aXZlVmlldyB9ID0gcHJvcHMgPz8ge31cbiAgaWYgKCFuYXZJbmZvKSB7XG4gICAgcmV0dXJuIGFjdGl2ZVZpZXc/LmlkXG4gIH1cbiAgaWYgKCFuYXZJbmZvLnVzZVByb2dyZXNzKSB7XG4gICAgcmV0dXJuIG5hdkluZm8uY3VycmVudFZpZXdJZFxuICB9XG4gIGNvbnN0IHZpc2libGVWaWV3cyA9IG5hdkluZm8udmlzaWJsZVZpZXdzPy5sZW5ndGggPiAwID8gbmF2SW5mby52aXNpYmxlVmlld3MgOiB2aWV3c1xuICBjb25zdCB7IGN1cnJlbnRJbmRleCB9ID0gZ2V0SW5kZXhGcm9tUHJvZ3Jlc3MobmF2SW5mby5wcm9ncmVzcywgdmlzaWJsZVZpZXdzLmxlbmd0aClcbiAgcmV0dXJuIHZpc2libGVWaWV3c1tjdXJyZW50SW5kZXhdXG59XG5cbmNvbnN0IGR1cGxpY2F0ZVZpZXdUb29sID0ge1xuICBpY29uOiBkdXBsaWNhdGVPdXRsaW5lZCxcbiAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnZHVwbGljYXRlVmlldycpXG4gIH0sXG4gIHZpc2libGU6ICgpID0+IGdldEFwcE1vZGUoKSA9PT0gQXBwTW9kZS5EZXNpZ24gJiYgIWlzTG9ja0xheW91dCgpLFxuICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHByb3BzXG4gICAgY29uc3Qgc2VjdGlvbkluZm8gPSBmaW5kU2VjdGlvbkluZm8obGF5b3V0SXRlbSlcbiAgICBsZXQgYWN0aXZlVmlld0lkID0gZmluZEFjdGl2ZVZpZXdJZChzZWN0aW9uSW5mbylcbiAgICBpZiAoIWFjdGl2ZVZpZXdJZCkge1xuICAgICAgY29uc3Qgc2VjdGlvbkluZm8gPSBmaW5kU2VjdGlvbkluZm8obGF5b3V0SXRlbSlcbiAgICAgIGFjdGl2ZVZpZXdJZCA9IHNlY3Rpb25JbmZvLnZpZXdzWzBdXG4gICAgfVxuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgY29uc3QgbmV3VmlldyA9IGFwcENvbmZpZ0FjdGlvbi5kdXBsaWNhdGVWaWV3KGFjdGl2ZVZpZXdJZCwgbGF5b3V0SXRlbS5zZWN0aW9uSWQsIHRydWUpXG4gICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuICAgIGppbXVIaXN0b3J5LmNoYW5nZVZpZXcobGF5b3V0SXRlbS5zZWN0aW9uSWQsIG5ld1ZpZXcuaWQpXG4gIH1cbn1cblxuY29uc3QgZGVsZXRlVmlld1Rvb2wgPSB7XG4gIGljb246IGNsb3NlT3V0bGluZWQsXG4gIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2RlbGV0ZVZpZXcnKVxuICB9LFxuICB2aXNpYmxlOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICBjb25zdCBhcHBNb2RlID0gZ2V0QXBwTW9kZSgpXG4gICAgaWYgKGFwcE1vZGUgIT09IEFwcE1vZGUuRGVzaWduIHx8IGlzTG9ja0xheW91dCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgIGNvbnN0IHNlY3Rpb25JbmZvID0gZmluZFNlY3Rpb25JbmZvKGxheW91dEl0ZW0pXG4gICAgaWYgKCFzZWN0aW9uSW5mbykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IHsgdmlld3MgfSA9IHNlY3Rpb25JbmZvXG4gICAgcmV0dXJuIHZpZXdzICYmIHZpZXdzLmxlbmd0aCA+IDFcbiAgfSxcbiAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgIGNvbnN0IHNlY3Rpb25JbmZvID0gZmluZFNlY3Rpb25JbmZvKGxheW91dEl0ZW0pXG4gICAgY29uc3QgeyB2aWV3cyB9ID0gc2VjdGlvbkluZm9cbiAgICBjb25zdCBhY3RpdmVWaWV3SWQgPSBmaW5kQWN0aXZlVmlld0lkKHNlY3Rpb25JbmZvKVxuXG4gICAgaWYgKHZpZXdzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IGluZGV4VG9EZWxldGUgPSB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXdJZClcbiAgICAgIGxldCB2aWV3SWRUb1Nob3dcbiAgICAgIGlmIChpbmRleFRvRGVsZXRlID4gMCkge1xuICAgICAgICAvLyBzaG93IHByZXZpb3VzIHZpZXdcbiAgICAgICAgdmlld0lkVG9TaG93ID0gdmlld3NbaW5kZXhUb0RlbGV0ZSAtIDFdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzaG93IG5leHQgdmlld1xuICAgICAgICB2aWV3SWRUb1Nob3cgPSB2aWV3c1sxXVxuICAgICAgfVxuICAgICAgZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICAgICAgLnJlbW92ZVZpZXcoYWN0aXZlVmlld0lkLCBsYXlvdXRJdGVtLnNlY3Rpb25JZClcbiAgICAgICAgLmV4ZWMoKVxuICAgICAgamltdUhpc3RvcnkuY2hhbmdlVmlldyhwcm9wcy5sYXlvdXRJdGVtLnNlY3Rpb25JZCwgdmlld0lkVG9TaG93KVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc2VjdGlvbk1lbnVJdGVtczogVG9vbEl0ZW1Db25maWdbXSA9IFtcbiAge1xuICAgIGljb246IGxlZnRPdXRsaW5lZCxcbiAgICBhdXRvRmxpcEljb246IHRydWUsXG4gICAgc2l6ZTogMTAsXG4gICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdwcmV2aW91c1ZpZXcnKVxuICAgIH0sXG4gICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHByb3BzXG4gICAgICBjb25zdCBzZWN0aW9uSW5mbyA9IGZpbmRTZWN0aW9uSW5mbyhsYXlvdXRJdGVtKVxuICAgICAgY29uc3QgeyB2aWV3cyB9ID0gc2VjdGlvbkluZm9cbiAgICAgIGNvbnN0IGFjdGl2ZVZpZXdJZCA9IGZpbmRBY3RpdmVWaWV3SWQoc2VjdGlvbkluZm8pXG4gICAgICBjb25zdCBpbmRleCA9IHZpZXdzLmluZGV4T2YoYWN0aXZlVmlld0lkKVxuICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICBqaW11SGlzdG9yeS5jaGFuZ2VWaWV3KGxheW91dEl0ZW0uc2VjdGlvbklkLCB2aWV3c1tpbmRleCAtIDFdKVxuICAgICAgfVxuICAgIH0sXG4gICAgZGlzYWJsZWQ6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgY29uc3Qgc2VjdGlvbkluZm8gPSBmaW5kU2VjdGlvbkluZm8obGF5b3V0SXRlbSlcbiAgICAgIGlmICghc2VjdGlvbkluZm8pIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgdmlld3MgfSA9IHNlY3Rpb25JbmZvXG4gICAgICBjb25zdCBhY3RpdmVWaWV3SWQgPSBmaW5kQWN0aXZlVmlld0lkKHNlY3Rpb25JbmZvKVxuICAgICAgY29uc3QgaW5kZXggPSB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXdJZClcbiAgICAgIHJldHVybiBpbmRleCA8PSAwXG4gICAgfVxuICB9LFxuICB7XG4gICAgbGFiZWw6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcyAmIHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHByb3BzXG4gICAgICBjb25zdCBzZWN0aW9uSW5mbyA9IGZpbmRTZWN0aW9uSW5mbyhsYXlvdXRJdGVtKVxuICAgICAgaWYgKCFzZWN0aW9uSW5mbykge1xuICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgdmlld3MgfSA9IHNlY3Rpb25JbmZvXG4gICAgICBjb25zdCBhY3RpdmVWaWV3SWQgPSBmaW5kQWN0aXZlVmlld0lkKHNlY3Rpb25JbmZvKVxuICAgICAgY29uc3QgaW5kZXggPSBNYXRoLm1heCgwLCB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXdJZCkpXG4gICAgICByZXR1cm4gYCR7aW5kZXggKyAxfSAvICR7dmlld3MubGVuZ3RofWBcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBpY29uOiByaWdodE91dGxpbmVkLFxuICAgIGF1dG9GbGlwSWNvbjogdHJ1ZSxcbiAgICBzaXplOiAxMCxcbiAgICB0aXRsZTogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ25leHRWaWV3JylcbiAgICB9LFxuICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgY29uc3Qgc2VjdGlvbkluZm8gPSBmaW5kU2VjdGlvbkluZm8obGF5b3V0SXRlbSlcbiAgICAgIGNvbnN0IHsgdmlld3MgfSA9IHNlY3Rpb25JbmZvXG4gICAgICBjb25zdCBhY3RpdmVWaWV3SWQgPSBmaW5kQWN0aXZlVmlld0lkKHNlY3Rpb25JbmZvKVxuICAgICAgY29uc3QgaW5kZXggPSB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXdJZClcbiAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdmlld3MubGVuZ3RoIC0gMSkge1xuICAgICAgICBqaW11SGlzdG9yeS5jaGFuZ2VWaWV3KGxheW91dEl0ZW0uc2VjdGlvbklkLCB2aWV3c1tpbmRleCArIDFdKVxuICAgICAgfVxuICAgIH0sXG4gICAgZGlzYWJsZWQ6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgY29uc3Qgc2VjdGlvbkluZm8gPSBmaW5kU2VjdGlvbkluZm8obGF5b3V0SXRlbSlcbiAgICAgIGlmICghc2VjdGlvbkluZm8pIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgdmlld3MgfSA9IHNlY3Rpb25JbmZvXG4gICAgICBjb25zdCBhY3RpdmVWaWV3SWQgPSBmaW5kQWN0aXZlVmlld0lkKHNlY3Rpb25JbmZvKVxuICAgICAgY29uc3QgaW5kZXggPSB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXdJZClcbiAgICAgIHJldHVybiBpbmRleCA8IDAgfHwgaW5kZXggPj0gdmlld3MubGVuZ3RoIC0gMVxuICAgIH1cbiAgfSxcbiAge1xuICAgIGljb246IGFkZE91dGxpbmVkLFxuICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnYWRkVmlldycpXG4gICAgfSxcbiAgICB2aXNpYmxlOiAoKSA9PiBnZXRBcHBNb2RlKCkgPT09IEFwcE1vZGUuRGVzaWduICYmICFpc0xvY2tMYXlvdXQoKSxcbiAgICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgIC8vIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbiAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG5cbiAgICAgIC8vIGNvbnN0IHZpZXdKc29uID0gSW1tdXRhYmxlKHt9KS5tZXJnZSh7XG4gICAgICAvLyAgIGlkOiBhcHBDb25maWdVdGlscy5nZXRVbmlxdWVJZChhcHBDb25maWcsICd2aWV3JyksXG4gICAgICAvLyAgIGxhYmVsOiBhcHBDb25maWdVdGlscy5nZXRVbmlxdWVMYWJlbChhcHBDb25maWcsICd2aWV3JywgaTE4bi5nZXRJbnRsKCkuZm9ybWF0TWVzc2FnZSh7IGlkOiAndmlldycgfSkpXG4gICAgICAvLyB9KSBhcyBJTVZpZXdKc29uXG4gICAgICBjb25zdCB2aWV3SWQgPSBhcHBDb25maWdBY3Rpb24uYWRkVmlldyhsYXlvdXRJdGVtLnNlY3Rpb25JZClcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbiAgICAgIGppbXVIaXN0b3J5LmNoYW5nZVZpZXcobGF5b3V0SXRlbS5zZWN0aW9uSWQsIHZpZXdJZClcbiAgICB9XG4gIH0sXG4gIGR1cGxpY2F0ZVZpZXdUb29sLFxuICBkZWxldGVWaWV3VG9vbCxcbiAgeyBzZXBlcmF0b3I6IHRydWUgfVxuXVxuXG5leHBvcnQgY29uc3Qgdmlld01lbnVJdGVtczogVG9vbEl0ZW1Db25maWdbXSA9IFtcbiAgZHVwbGljYXRlVmlld1Rvb2wsXG4gIGRlbGV0ZVZpZXdUb29sXG5dXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgUGFnZVBhcnQsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgcG9saXNoZWQsXG4gIHR5cGUgSU1QYWdlSnNvbixcbiAgUGFnZU1vZGUsXG4gIEFuaW1hdGlvbkNvbnRleHQsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIEFuaW1hdGlvblR5cGUsXG4gIEFwcE1vZGUsXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICBnZXROZXh0QW5pbWF0aW9uSWRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgUGFnZUNvbnRleHQsXG4gIHR5cGUgUGFnZUNvbnRleHRQcm9wcyxcbiAgUGFnZVZpc2liaWxpdHlDb250ZXh0LFxuICBzZWFyY2hVdGlsc1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgTGF5b3V0RW50cnkgZnJvbSAnLi9sYXlvdXQtZW50cnknXG5pbXBvcnQge1xuICBtYXNrU3R5bGUsXG4gIGVkaXRCb2R5XG59IGZyb20gJy4vcGFnZS1yZW5kZXJlci1jb21tb24nXG5pbXBvcnQgeyBjb21wdXRlUGFnZUhlaWdodCB9IGZyb20gJy4uL2NvbW1vbi9wYWdlLXV0aWwnXG5pbXBvcnQgeyBDb250cm9sbGVyUGFuZWxHcm91cCB9IGZyb20gJy4uL2NvbnRyb2xsZXItcGFuZWwvYnVpbGRlci9ncm91cCdcblxuZXhwb3J0IGludGVyZmFjZSBQYWdlQm9keVByb3BzIHtcbiAgcGFnZUpzb246IElNUGFnZUpzb25cbiAgcmVuZGVyZWRQYWdlSWQ6IHN0cmluZ1xuICBhY3RpdmVQYWdlUGFydDogUGFnZVBhcnRcbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgcGFnZUNvbnRleHQ6IEltbXV0YWJsZU9iamVjdDxQYWdlQ29udGV4dFByb3BzPlxuICB2aXNpYmxlOiBib29sZWFuXG4gIGhlYWRlckZvb3RlckhlaWdodDogbnVtYmVyXG59XG5cbmZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyAoc3RhdGU6IElNU3RhdGUsIHBhZ2VJZDogc3RyaW5nKSB7XG4gIGNvbnN0IGFuaW1hdGlvblByZXZpZXcgPSBzdGF0ZS5hcHBSdW50aW1lSW5mby5hbmltYXRpb25QcmV2aWV3XG4gIGlmIChhbmltYXRpb25QcmV2aWV3Py5wYWdlSWQgPT09IHBhZ2VJZCkge1xuICAgIHJldHVybiB7IHByZXZpZXdJZDogYW5pbWF0aW9uUHJldmlldy5pZCwgcGxheU1vZGU6IGFuaW1hdGlvblByZXZpZXcucGxheU1vZGUgfVxuICB9XG4gIHJldHVybiB7IHByZXZpZXdJZDogMCwgcGxheU1vZGU6IG51bGwgfVxufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIFBhZ2VCb2R5IChwcm9wczogUGFnZUJvZHlQcm9wcykge1xuICBjb25zdCB7IHBhZ2VKc29uLCB2aXNpYmxlLCByZW5kZXJlZFBhZ2VJZCwgYnJvd3NlclNpemVNb2RlLCBhY3RpdmVQYWdlUGFydCwgcGFnZUNvbnRleHQsIGhlYWRlckZvb3RlckhlaWdodCB9ID0gcHJvcHNcbiAgY29uc3QgW3BsYXlJZCwgc2V0UGxheUlkXSA9IFJlYWN0LnVzZVN0YXRlKDApXG4gIGNvbnN0IHsgcHJldmlld0lkLCBwbGF5TW9kZSB9ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSwgcGFnZUpzb24uaWQpLCBSZWFjdFJlZHV4LnNoYWxsb3dFcXVhbClcbiAgLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzICovXG4gIGNvbnN0IHBhZ2VIZWlnaHQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gY29tcHV0ZVBhZ2VIZWlnaHQocGFnZUpzb24sIGhlYWRlckZvb3RlckhlaWdodClcbiAgfSwgW2hlYWRlckZvb3RlckhlaWdodF0pXG4gIGNvbnN0IGxheW91dCA9IHBhZ2VKc29uLmxheW91dFxuICBjb25zdCBvbmVCeU9uZUVmZmVjdCA9IHBhZ2VKc29uLm9uZUJ5T25lRWZmZWN0ICYmIHBhZ2VKc29uLm9uZUJ5T25lRWZmZWN0LnR5cGUgIT09IEFuaW1hdGlvblR5cGUuTm9uZSA/IHBhZ2VKc29uLm9uZUJ5T25lRWZmZWN0IDogbnVsbFxuICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBvbmVCeU9uZUVmZmVjdCA9PT0gbnVsbCA/IHRydWUgOiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ25cbiAgfSlcbiAgY29uc3Qgc2l6ZU1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBvbmVCeU9uZUVmZmVjdCA9PT0gbnVsbCA/IG51bGwgOiBzdGF0ZS5icm93c2VyU2l6ZU1vZGVcbiAgfSlcbiAgY29uc3QgZWZmZWN0UmVmID0gUmVhY3QudXNlUmVmKG9uZUJ5T25lRWZmZWN0KVxuICBjb25zdCBzaXplTW9kZVJlZiA9IFJlYWN0LnVzZVJlZihzaXplTW9kZSlcbiAgY29uc3QgdmlzaWJsZVJlZiA9IFJlYWN0LnVzZVJlZih2aXNpYmxlKVxuICBjb25zdCByZXZlcnQgPSBvbmVCeU9uZUVmZmVjdCA/ICghdmlzaWJsZSkgOiBudWxsXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBlZmZlY3RSZWYuY3VycmVudCA9IG9uZUJ5T25lRWZmZWN0XG4gIH0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzRGVzaWduTW9kZSkgeyAvLyBpc0Rlc2lnbk1vZGUgPT09IGZhbHNlXG4gICAgICAvLyBwbGF5IGV2ZXJ5IGFuaW1hdGlvblxuICAgICAgc2V0UGxheUlkKGdldE5leHRBbmltYXRpb25JZCgpKVxuICAgIH0gZWxzZSBpZiAoIXZpc2libGVSZWYuY3VycmVudCkge1xuICAgICAgc2V0UGxheUlkKGdldE5leHRBbmltYXRpb25JZCgpKSAvLyByZXN0b3JlIHRoZSBoaWRkZW4gaXRlbXNcbiAgICB9XG4gIH0sIFtpc0Rlc2lnbk1vZGVdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc0Rlc2lnbk1vZGUgJiYgc2l6ZU1vZGVSZWYuY3VycmVudCAhPT0gc2l6ZU1vZGUpIHtcbiAgICAgIHNldFBsYXlJZChnZXROZXh0QW5pbWF0aW9uSWQoKSlcbiAgICB9XG4gICAgc2l6ZU1vZGVSZWYuY3VycmVudCA9IHNpemVNb2RlXG4gIH0sIFtzaXplTW9kZSwgaXNEZXNpZ25Nb2RlXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNEZXNpZ25Nb2RlICYmIHZpc2libGVSZWYuY3VycmVudCAhPT0gdmlzaWJsZSAmJiBlZmZlY3RSZWYuY3VycmVudCkge1xuICAgICAgc2V0UGxheUlkKGdldE5leHRBbmltYXRpb25JZCgpKVxuICAgIH1cbiAgICB2aXNpYmxlUmVmLmN1cnJlbnQgPSB2aXNpYmxlXG4gIH0sIFt2aXNpYmxlXSlcblxuICBjb25zdCB2aWV3T25seSA9ICFsYXlvdXRbYnJvd3NlclNpemVNb2RlXVxuICBsZXQgbWF4V2lkdGhcbiAgaWYgKHBhZ2VKc29uLm1vZGUgIT09IFBhZ2VNb2RlLkZpdFdpbmRvdyAmJiBwYWdlSnNvbi5tYXhXaWR0aCA+IDApIHtcbiAgICBtYXhXaWR0aCA9IHBhZ2VKc29uLm1heFdpZHRoXG4gIH1cblxuICBjb25zdCBwYWdlQ29udGV4dFZhbHVlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgICBsZXQgcm9vdExheW91dElkXG4gICAgaWYgKHBhZ2VKc29uLmxheW91dCkge1xuICAgICAgcm9vdExheW91dElkID0gc2VhcmNoVXRpbHMuZmluZExheW91dElkKHBhZ2VKc29uLmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4ucGFnZUNvbnRleHQgYXMgYW55LFxuICAgICAgbWF4V2lkdGgsXG4gICAgICB2aWV3T25seSxcbiAgICAgIC8vIHZpc2libGUsXG4gICAgICByb290TGF5b3V0SWQsXG4gICAgICBwYWdlSWQ6IHJlbmRlcmVkUGFnZUlkXG4gICAgfVxuICB9LCBbcGFnZUNvbnRleHQsIHZpZXdPbmx5LCBtYXhXaWR0aCwgcmVuZGVyZWRQYWdlSWQsIHBhZ2VKc29uLmxheW91dCwgYnJvd3NlclNpemVNb2RlXSlcblxuICBjb25zdCBhbmltYXRpb25Db250ZXh0VmFsdWUgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAvLyBpc0Rlc2lnbk1kb2UgPT09IGZhbHNlXG4gICAgY29uc3Qgc2V0dGluZyA9ICghaXNEZXNpZ25Nb2RlIHx8IHByZXZpZXdJZCA+IDApID8gb25lQnlPbmVFZmZlY3QgOiBudWxsXG5cbiAgICByZXR1cm4ge1xuICAgICAgc2V0dGluZyxcbiAgICAgIHJldmVydCxcbiAgICAgIHBsYXlJZDogcHJldmlld0lkID4gMCA/IHByZXZpZXdJZCA6IHBsYXlJZCxcbiAgICAgIG9pZDogcGFnZUNvbnRleHRWYWx1ZS5yb290TGF5b3V0SWQsXG4gICAgICBwbGF5TW9kZSxcbiAgICAgIG9uQ29udGV4dEFuaW1hdGlvbkVuZDogKCkgPT4ge1xuICAgICAgICBpZiAocHJldmlld0lkID4gMCkge1xuICAgICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5jbGVhckFuaW1hdGlvblByZXZpZXcoKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRQbGF5SWQoLTEpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpc0Rlc2lnbk1vZGUsIHJldmVydCwgcGxheUlkLCBwcmV2aWV3SWQsIG9uZUJ5T25lRWZmZWN0LCBwYWdlQ29udGV4dFZhbHVlLnJvb3RMYXlvdXRJZF0pXG5cbiAgY29uc3QgZ2V0U3R5bGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGRpc3BsYXk6ICR7dmlzaWJsZSA/ICdmbGV4JyA6ICdub25lJ307XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3BhZ2VKc29uLmJvZHlCYWNrZ3JvdW5kQ29sb3IgfHwgJ3RyYW5zcGFyZW50J307XG4gICAgICB6LWluZGV4OiAxO1xuICAgICAgZmxleDogMSAwIGF1dG87XG4gICAgICBoZWlnaHQ6ICR7cGFnZUhlaWdodH07XG5cbiAgICAgIGJvZHk6bm90KC5kZXNpZ24tbW9kZSkgJiB7XG4gICAgICAgIC5lZGl0LW1hc2sge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuZXhiLWRyb3AtYXJlYSB7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiAke2FjdGl2ZVBhZ2VQYXJ0ICE9PSBQYWdlUGFydC5Cb2R5ID8gJ25vbmUgIWltcG9ydGFudCcgOiAnYXV0byd9XG4gICAgICB9XG4gICAgYFxuICB9LCBbdmlzaWJsZSwgcGFnZUhlaWdodCwgYWN0aXZlUGFnZVBhcnQsIHBhZ2VKc29uLmJvZHlCYWNrZ3JvdW5kQ29sb3JdKVxuXG4gIGlmICghbGF5b3V0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxQYWdlQ29udGV4dC5Qcm92aWRlclxuICAgICAga2V5PXtwYWdlSnNvbi5pZH1cbiAgICAgIHZhbHVlPXtwYWdlQ29udGV4dFZhbHVlfVxuICAgID5cbiAgICAgIDxQYWdlVmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3Zpc2libGV9PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgaWQ9e3BhZ2VKc29uLmlkfVxuICAgICAgICAgIGRhdGEtcGFnZWlkPXtwYWdlSnNvbi5pZH1cbiAgICAgICAgICBjbGFzc05hbWU9J3BhZ2UnXG4gICAgICAgICAgY3NzPXtnZXRTdHlsZSgpfVxuICAgICAgICA+XG4gICAgICAgICAgPEFuaW1hdGlvbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2FuaW1hdGlvbkNvbnRleHRWYWx1ZX0+XG4gICAgICAgICAgICA8TGF5b3V0RW50cnlcbiAgICAgICAgICAgICAgbGF5b3V0cz17bGF5b3V0fVxuICAgICAgICAgICAgICBpc1BhZ2VJdGVtXG4gICAgICAgICAgICAgIHZpc2libGU9e3Zpc2libGV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy0xMDAnXG4gICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IDA7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvQW5pbWF0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICB7YnJvd3NlclNpemVNb2RlICE9PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwgJiYgPENvbnRyb2xsZXJQYW5lbEdyb3VwIHBhZ2VJZD17cGFnZUpzb24uaWR9IC8+fVxuICAgICAgICAgIHthY3RpdmVQYWdlUGFydCAhPT0gUGFnZVBhcnQuQm9keSAmJiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nZWRpdC1tYXNrJ1xuICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAke21hc2tTdHlsZX07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJHtwb2xpc2hlZC5yZ2JhKHBhZ2VDb250ZXh0LnRoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbODAwXSwgMC42KX07XG4gICAgICAgICAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgb25DbGljaz17ZWRpdEJvZHl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9QYWdlVmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXI+XG4gICAgPC9QYWdlQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IFBhZ2VDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxQYWdlQ29udGV4dFByb3BzPih7XG4gIHZpZXdPbmx5OiB0cnVlXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VDb250ZXh0UHJvcHMge1xuICByb290TGF5b3V0SWQ/OiBzdHJpbmdcbiAgaXNIZWFkZXI/OiBib29sZWFuXG4gIGlzRm9vdGVyPzogYm9vbGVhblxuICBpc0RpYWxvZz86IGJvb2xlYW5cbiAgcGFnZUlkPzogc3RyaW5nXG4gIGJ1aWxkZXJUaGVtZT86IElNVGhlbWVWYXJpYWJsZXNcbiAgdGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG4gIHZpZXdPbmx5PzogYm9vbGVhblxuICBtYXhXaWR0aD86IG51bWJlclxuICBmb3JtYXRNZXNzYWdlPzogKGlkOiBzdHJpbmcsIHZhbHVlcz86IGFueSkgPT4gc3RyaW5nXG4gIGRpYWxvZ0lkPzogc3RyaW5nXG59XG5cbmV4cG9ydCBjb25zdCBWaWV3cG9ydFZpc2liaWxpdHlDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxib29sZWFuPih0cnVlKVxuZXhwb3J0IGNvbnN0IFBhZ2VWaXNpYmlsaXR5Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8Ym9vbGVhbj4odHJ1ZSlcbmV4cG9ydCBjb25zdCBWaWV3VmlzaWJpbGl0eUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFZpZXdWaXNpYmlsaXR5Q29udGV4dFByb3BzPih7XG4gIGlzSW5WaWV3OiBmYWxzZSxcbiAgaXNJbkN1cnJlbnRWaWV3OiBmYWxzZVxufSlcblxuZXhwb3J0IGludGVyZmFjZSBWaWV3VmlzaWJpbGl0eUNvbnRleHRQcm9wcyB7XG4gIGlzSW5WaWV3PzogYm9vbGVhblxuICBpc0luQ3VycmVudFZpZXc/OiBib29sZWFuXG59XG5cbmV4cG9ydCBjb25zdCBTY3JlZW5Hcm91cENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHN0cmluZz4oJycpXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIEFwcE1vZGUsXG4gIGpzeCxcbiAgY3NzLFxuICBQYWdlUGFydCxcbiAgdHlwZSBJTUZvb3Rlckpzb24sXG4gIHR5cGUgQnJvd3NlclNpemVNb2RlLFxuICB0eXBlIElNVGhlbWVWYXJpYWJsZXMsXG4gIHBvbGlzaGVkLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgUmVhY3RSZXNpemVEZXRlY3RvclxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBpbnRlcmFjdCB9IGZyb20gJ2ppbXUtY29yZS9kbmQnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24gfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgRWRpdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvZWRpdCdcbmltcG9ydCB7IFBhZ2VDb250ZXh0LCB0eXBlIFBhZ2VDb250ZXh0UHJvcHMsIHV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBMYXlvdXRFbnRyeSBmcm9tICcuL2xheW91dC1lbnRyeSdcbmltcG9ydCB7XG4gIFJFU0laRV9IQU5ETEVSX0hFSUdIVCxcbiAgcmVzaXplSGFuZGxlclN0eWxlLFxuICBtYXNrU3R5bGUsXG4gIGVkaXRCdG5TdHlsZSxcbiAgZWRpdEJvZHksXG4gIGVkaXRGb290ZXIsXG4gIGdldEZvb3RlckxheW91dElkXG59IGZyb20gJy4vcGFnZS1yZW5kZXJlci1jb21tb24nXG5pbXBvcnQgeyBERUZBVUxUX0ZPT1RFUl9IRUlHSFQgfSBmcm9tICcuLi9jb21tb24vcGFnZS11dGlsJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VGb290ZXJQcm9wcyB7XG4gIGZvb3RlcjogSU1Gb290ZXJKc29uXG4gIGFjdGl2ZVBhZ2VQYXJ0OiBQYWdlUGFydFxuICBmb290ZXJWaXNpYmxlOiBib29sZWFuXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIG1haW5TaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIHBhZ2VDb250ZXh0OiBJbW11dGFibGVPYmplY3Q8UGFnZUNvbnRleHRQcm9wcz5cbiAgb25IZWlnaHRDaGFuZ2U6IChoZWlnaHQ6IG51bWJlcikgPT4gdm9pZFxufVxuXG5mdW5jdGlvbiBnZXRTdHlsZSAoXG4gIGZvb3RlcjogSU1Gb290ZXJKc29uLFxuICBoZWlnaHQ6IHN0cmluZyxcbiAgZm9vdGVyVmlzaWJsZTogYm9vbGVhbixcbiAgYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzLFxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuKSB7XG4gIHJldHVybiBjc3NgXG4gICAgJHtyZXNpemVIYW5kbGVyU3R5bGV9O1xuICAgICR7ZWRpdEJ0blN0eWxlKGJ1aWxkZXJUaGVtZSl9O1xuICAgIGRpc3BsYXk6ICR7Zm9vdGVyVmlzaWJsZSA/ICdmbGV4JyA6ICdub25lJ307XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogYXV0bztcbiAgICBtaW4taGVpZ2h0OiAke3BhcnNlRmxvYXQoaGVpZ2h0KX1weDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7Zm9vdGVyLmJhY2tncm91bmRDb2xvciB8fCB0aGVtZS5mb290ZXIuYmcgfHwgJ3RyYW5zcGFyZW50J307XG4gICAgYmFja2dyb3VuZC1pbWFnZTogJHtmb290ZXIuYmFja2dyb3VuZElNYWdlIGFzIGFueX07XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJHtmb290ZXIuYmFja2dyb3VuZFBvc2l0aW9ufTtcbiAgICBjb2xvcjogJHt0aGVtZS5mb290ZXIuY29sb3J9O1xuICAgIGJvcmRlci10b3A6IDFweCBkYXNoZWQgJHtwb2xpc2hlZC5yZ2JhKGJ1aWxkZXJUaGVtZS5jb2xvcnMud2hpdGUsIDAuMTIpfTtcbiAgICB6LWluZGV4OiAwO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICAuZWRpdC1tYXNrIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBib2R5LmxvY2stbGF5b3V0ICYsXG4gICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgID4gLnJlc2l6ZS1oYW5kbGVyIHtcbiAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgIH1cbiAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgLmVkaXQtbWFzaywgLmVkaXQtbWFzay1hbGwge1xuICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgfVxuICBgXG59XG5cbmZ1bmN0aW9uIGJpbmRSZXNpemVIYW5kbGVyIChmb290ZXJSZWY6IEhUTUxEaXZFbGVtZW50KTogSW50ZXJhY3QuSW50ZXJhY3RhYmxlIHtcbiAgbGV0IGRoXG4gIGxldCBpbml0SGVpZ2h0XG5cbiAgcmV0dXJuIGludGVyYWN0KGZvb3RlclJlZilcbiAgICAub3JpZ2luKCdwYXJlbnQnKVxuICAgIC5yZXNpemFibGUoe1xuICAgICAgaW5lcnRpYTogZmFsc2UsXG4gICAgICBlZGdlczoge1xuICAgICAgICB0b3A6ICcucmVzaXplLWhhbmRsZXInXG4gICAgICB9LFxuICAgICAgb25zdGFydDogKGV2ZW50OiBJbnRlcmFjdC5JbnRlcmFjdEV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIGRoID0gMFxuICAgICAgICBpbml0SGVpZ2h0ID0gZm9vdGVyUmVmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodFxuICAgICAgfSxcbiAgICAgIG9ubW92ZTogKGV2ZW50OiBJbnRlcmFjdC5SZXNpemVFdmVudCkgPT4ge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICBjb25zdCBkZWx0YVJlY3QgPSBldmVudC5kZWx0YVJlY3RcbiAgICAgICAgZGggKz0gZGVsdGFSZWN0LmhlaWdodFxuICAgICAgICBmb290ZXJSZWYuc3R5bGUuaGVpZ2h0ID0gYCR7aW5pdEhlaWdodCArIGRofXB4YFxuICAgICAgfSxcbiAgICAgIG9uZW5kOiAoZXZlbnQ6IEludGVyYWN0LlJlc2l6ZUV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIGZvb3RlclJlZi5zdHlsZS5oZWlnaHQgPSBudWxsXG4gICAgICAgIGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgICAgICAgLmVkaXRGb290ZXJQcm9wZXJ0eShgaGVpZ2h0LiR7dXRpbHMuZ2V0Q3VycmVudFNpemVNb2RlKCl9YCwgTWF0aC5yb3VuZChpbml0SGVpZ2h0ICsgZGgpKVxuICAgICAgICAgIC5leGVjKClcbiAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gUGFnZUZvb3RlciAocHJvcHM6IFBhZ2VGb290ZXJQcm9wcykge1xuICBjb25zdCB7IGZvb3RlciwgZm9vdGVyVmlzaWJsZSwgYnJvd3NlclNpemVNb2RlLCBtYWluU2l6ZU1vZGUsIGFjdGl2ZVBhZ2VQYXJ0LCBwYWdlQ29udGV4dCwgb25IZWlnaHRDaGFuZ2UgfSA9IHByb3BzXG4gIGNvbnN0IGlzRGVzaWduTW9kZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ24pXG4gIGNvbnN0IGZvb3RlclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgY29uc3QgaGVpZ2h0ID0gZm9vdGVyLmhlaWdodFticm93c2VyU2l6ZU1vZGVdIHx8IGZvb3Rlci5oZWlnaHRbbWFpblNpemVNb2RlXSB8fCBERUZBVUxUX0ZPT1RFUl9IRUlHSFRcbiAgY29uc3QgbGF5b3V0ID0gZm9vdGVyLmxheW91dFxuICBjb25zdCB2aWV3T25seSA9ICFsYXlvdXRbYnJvd3NlclNpemVNb2RlXVxuICBjb25zdCBidWlsZGVyVGhlbWUgPSBwYWdlQ29udGV4dC5idWlsZGVyVGhlbWVcblxuICAvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgaW50ZXJhY3RibGVcbiAgICBpZiAoZm9vdGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGludGVyYWN0YmxlID0gYmluZFJlc2l6ZUhhbmRsZXIoZm9vdGVyUmVmLmN1cnJlbnQpXG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaW50ZXJhY3RibGUpIHtcbiAgICAgICAgaW50ZXJhY3RibGUudW5zZXQoKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgZm9vdGVyTGF5b3V0SWQgPSBnZXRGb290ZXJMYXlvdXRJZCgpXG5cbiAgY29uc3QgcGFnZUNvbnRleHRWYWx1ZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5wYWdlQ29udGV4dCBhcyBhbnksXG4gICAgICBpc0Zvb3RlcjogdHJ1ZSxcbiAgICAgIHJvb3RMYXlvdXRJZDogZm9vdGVyTGF5b3V0SWQsXG4gICAgICB2aWV3T25seTogdmlld09ubHkgfHwgKGlzRGVzaWduTW9kZSAmJiBhY3RpdmVQYWdlUGFydCAhPT0gUGFnZVBhcnQuRm9vdGVyKVxuICAgIH1cbiAgfSwgW3BhZ2VDb250ZXh0LCBmb290ZXJMYXlvdXRJZCwgdmlld09ubHksIGFjdGl2ZVBhZ2VQYXJ0LCBpc0Rlc2lnbk1vZGVdKVxuXG4gIGNvbnN0IGhhbmRsZVNpemVDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoXywgaGVpZ2h0KSA9PiB7XG4gICAgb25IZWlnaHRDaGFuZ2UoTWF0aC5yb3VuZChoZWlnaHQpKVxuICB9LCBbb25IZWlnaHRDaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPFBhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtwYWdlQ29udGV4dFZhbHVlfT5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPSdmb290ZXInXG4gICAgICAgIGNzcz17Z2V0U3R5bGUoZm9vdGVyLCBoZWlnaHQgYXMgc3RyaW5nLCBmb290ZXJWaXNpYmxlLCBwYWdlQ29udGV4dC5idWlsZGVyVGhlbWUsIHBhZ2VDb250ZXh0LnRoZW1lKX1cbiAgICAgICAgcmVmPXtlbCA9PiAoZm9vdGVyUmVmLmN1cnJlbnQgPSBlbCl9XG4gICAgICA+XG4gICAgICAgIHshdmlld09ubHkgJiYgKFxuICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICBjbGFzc05hbWU9J3Jlc2l6ZS1oYW5kbGVyJ1xuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIHRvcDogJHstUkVTSVpFX0hBTkRMRVJfSEVJR0hUIC8gMn1weDtcbiAgICAgICAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT0ndy0xMDAgaC0xMDAnXG4gICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICAgICAgbWluLWhlaWdodDogJHtwYXJzZUZsb2F0KGhlaWdodCBhcyBzdHJpbmcpfXB4O1xuICAgICAgICAgIGB9XG4gICAgICAgID5cbiAgICAgICAgICA8TGF5b3V0RW50cnkgbGF5b3V0cz17bGF5b3V0fSBpc1BhZ2VJdGVtIHZpc2libGU9e2Zvb3RlclZpc2libGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7YWN0aXZlUGFnZVBhcnQgIT09IFBhZ2VQYXJ0LkZvb3RlciAmJiAhdmlld09ubHkgJiYgKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nZWRpdC1tYXNrLWFsbCdcbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAke21hc2tTdHlsZX07XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICR7YWN0aXZlUGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkJvZHkgPyAndHJhbnNwYXJlbnQnIDogcG9saXNoZWQucmdiYShidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNDAwXSwgMC42KX07XG4gICAgICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgICAgb25DbGljaz17ZWRpdEJvZHl9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge2FjdGl2ZVBhZ2VQYXJ0ID09PSBQYWdlUGFydC5Cb2R5ICYmICghdmlld09ubHkgfHwgYnJvd3NlclNpemVNb2RlID09PSBtYWluU2l6ZU1vZGUpICYmIChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9J2VkaXQtbWFzayBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcidcbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAke21hc2tTdHlsZX07XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICR7cG9saXNoZWQucmdiYShidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNDAwXSwgMC42KX07XG4gICAgICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdlZGl0LWJ0biBidG4tbGFyZ2UgYm9yZGVyLTAnIG9uQ2xpY2s9e2VkaXRGb290ZXJ9PlxuICAgICAgICAgICAgICA8RWRpdE91dGxpbmVkIHNpemU9J20nLz5cbiAgICAgICAgICAgICAge3BhZ2VDb250ZXh0LmZvcm1hdE1lc3NhZ2UoJ2VkaXRGb290ZXInKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8UmVhY3RSZXNpemVEZXRlY3RvciBoYW5kbGVIZWlnaHQgaGFuZGxlV2lkdGg9e2ZhbHNlfSBvblJlc2l6ZT17aGFuZGxlU2l6ZUNoYW5nZX0gLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvUGFnZUNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgQXBwTW9kZSxcbiAganN4LFxuICBjc3MsXG4gIFBhZ2VQYXJ0LFxuICB0eXBlIElNSGVhZGVySnNvbixcbiAgdHlwZSBCcm93c2VyU2l6ZU1vZGUsXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcbiAgcG9saXNoZWQsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICBSZWFjdFJlc2l6ZURldGVjdG9yXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGludGVyYWN0IH0gZnJvbSAnamltdS1jb3JlL2RuZCdcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyBFZGl0T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9lZGl0J1xuaW1wb3J0IHsgUGFnZUNvbnRleHQsIHR5cGUgUGFnZUNvbnRleHRQcm9wcywgdXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IExheW91dEVudHJ5IGZyb20gJy4vbGF5b3V0LWVudHJ5J1xuaW1wb3J0IHtcbiAgUkVTSVpFX0hBTkRMRVJfSEVJR0hULFxuICByZXNpemVIYW5kbGVyU3R5bGUsXG4gIG1hc2tTdHlsZSxcbiAgZWRpdEJ0blN0eWxlLFxuICBlZGl0Qm9keSxcbiAgZWRpdEhlYWRlcixcbiAgZ2V0SGVhZGVyTGF5b3V0SWRcbn0gZnJvbSAnLi9wYWdlLXJlbmRlcmVyLWNvbW1vbidcbmltcG9ydCB7IERFRkFVTFRfSEVBREVSX0hFSUdIVCB9IGZyb20gJy4uL2NvbW1vbi9wYWdlLXV0aWwnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZUhlYWRlclByb3BzIHtcbiAgaGVhZGVyOiBJTUhlYWRlckpzb25cbiAgYWN0aXZlUGFnZVBhcnQ6IFBhZ2VQYXJ0XG4gIGhlYWRlclZpc2libGU6IGJvb2xlYW5cbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgbWFpblNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgcGFnZUNvbnRleHQ6IEltbXV0YWJsZU9iamVjdDxQYWdlQ29udGV4dFByb3BzPlxuICBvbkhlaWdodENoYW5nZTogKGhlaWdodDogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmZ1bmN0aW9uIGdldFN0eWxlIChcbiAgaGVhZGVyOiBJTUhlYWRlckpzb24sXG4gIGhlaWdodDogc3RyaW5nLFxuICBoZWFkZXJWaXNpYmxlOiBib29sZWFuLFxuICBidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXMsXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4pIHtcbiAgcmV0dXJuIGNzc2BcbiAgICAke3Jlc2l6ZUhhbmRsZXJTdHlsZX07XG4gICAgJHtlZGl0QnRuU3R5bGUoYnVpbGRlclRoZW1lKX07XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHotaW5kZXg6IDA7XG4gICAgdG9wOiAwO1xuICAgIGRpc3BsYXk6ICR7aGVhZGVyVmlzaWJsZSA/ICdmbGV4JyA6ICdub25lJ307XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiBhdXRvO1xuICAgIG1pbi1oZWlnaHQ6ICR7cGFyc2VGbG9hdChoZWlnaHQpfXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHtoZWFkZXIuYmFja2dyb3VuZENvbG9yIHx8IHRoZW1lLmhlYWRlci5iZyB8fCAndHJhbnNwYXJlbnQnfTtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiAke2hlYWRlci5iYWNrZ3JvdW5kSU1hZ2UgYXMgYW55fTtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAke2hlYWRlci5iYWNrZ3JvdW5kUG9zaXRpb259O1xuICAgIGNvbG9yOiAke3RoZW1lLmhlYWRlci5jb2xvcn07XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCAke3BvbGlzaGVkLnJnYmEoYnVpbGRlclRoZW1lLmNvbG9ycy53aGl0ZSwgMC4xMil9O1xuICAgIGZsZXg6IDAgMCBhdXRvO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICAuZWRpdC1tYXNrIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBib2R5LmxvY2stbGF5b3V0ICYsXG4gICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICA+IC5yZXNpemUtaGFuZGxlciB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICB9XG4gICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgIHBvc2l0aW9uOiAke2hlYWRlci5zdGlja3kgPyAnc3RpY2t5JyA6ICdyZWxhdGl2ZSd9O1xuICAgICAgei1pbmRleDogJHtoZWFkZXIuc3RpY2t5ID8gMiA6ICcwJ307XG5cbiAgICAgIC5lZGl0LW1hc2ssIC5lZGl0LW1hc2stYWxsIHtcbiAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgIH1cbiAgYFxufVxuXG5mdW5jdGlvbiBiaW5kUmVzaXplSGFuZGxlciAoaGVhZGVyUmVmOiBIVE1MRGl2RWxlbWVudCk6IEludGVyYWN0LkludGVyYWN0YWJsZSB7XG4gIGxldCBkaFxuICBsZXQgaW5pdEhlaWdodFxuXG4gIHJldHVybiBpbnRlcmFjdChoZWFkZXJSZWYpXG4gICAgLm9yaWdpbigncGFyZW50JylcbiAgICAucmVzaXphYmxlKHtcbiAgICAgIGluZXJ0aWE6IGZhbHNlLFxuICAgICAgZWRnZXM6IHtcbiAgICAgICAgYm90dG9tOiAnLnJlc2l6ZS1oYW5kbGVyJ1xuICAgICAgfSxcbiAgICAgIG9uc3RhcnQ6IChldmVudDogSW50ZXJhY3QuSW50ZXJhY3RFdmVudCkgPT4ge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICBkaCA9IDBcbiAgICAgICAgaW5pdEhlaWdodCA9IGhlYWRlclJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHRcbiAgICAgICAgaGVhZGVyUmVmLnN0eWxlLm1pbkhlaWdodCA9ICcwcHgnXG4gICAgICB9LFxuICAgICAgb25tb3ZlOiAoZXZlbnQ6IEludGVyYWN0LlJlc2l6ZUV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIGNvbnN0IGRlbHRhUmVjdCA9IGV2ZW50LmRlbHRhUmVjdFxuICAgICAgICBkaCArPSBkZWx0YVJlY3QuaGVpZ2h0XG4gICAgICAgIGhlYWRlclJlZi5zdHlsZS5oZWlnaHQgPSBgJHtpbml0SGVpZ2h0ICsgZGh9cHhgXG4gICAgICB9LFxuICAgICAgb25lbmQ6IChldmVudDogSW50ZXJhY3QuUmVzaXplRXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgaGVhZGVyUmVmLnN0eWxlLmhlaWdodCA9IG51bGxcbiAgICAgICAgaGVhZGVyUmVmLnN0eWxlLm1pbkhlaWdodCA9IG51bGxcbiAgICAgICAgZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICAgICAgICAuZWRpdEhlYWRlclByb3BlcnR5KGBoZWlnaHQuJHt1dGlscy5nZXRDdXJyZW50U2l6ZU1vZGUoKX1gLCBNYXRoLnJvdW5kKGluaXRIZWlnaHQgKyBkaCkpXG4gICAgICAgICAgLmV4ZWMoKVxuICAgICAgfVxuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQYWdlSGVhZGVyIChwcm9wczogUGFnZUhlYWRlclByb3BzKSB7XG4gIGNvbnN0IHsgaGVhZGVyLCBoZWFkZXJWaXNpYmxlLCBicm93c2VyU2l6ZU1vZGUsIG1haW5TaXplTW9kZSwgYWN0aXZlUGFnZVBhcnQsIHBhZ2VDb250ZXh0LCBvbkhlaWdodENoYW5nZSB9ID0gcHJvcHNcbiAgY29uc3QgaXNEZXNpZ25Nb2RlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnbilcbiAgY29uc3QgaGVhZGVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBoZWlnaHQgPSBoZWFkZXIuaGVpZ2h0W2Jyb3dzZXJTaXplTW9kZV0gfHwgaGVhZGVyLmhlaWdodFttYWluU2l6ZU1vZGVdIHx8IERFRkFVTFRfSEVBREVSX0hFSUdIVFxuICBjb25zdCBsYXlvdXQgPSBoZWFkZXIubGF5b3V0XG4gIGNvbnN0IHZpZXdPbmx5ID0gIWxheW91dFticm93c2VyU2l6ZU1vZGVdXG4gIGNvbnN0IGJ1aWxkZXJUaGVtZSA9IHBhZ2VDb250ZXh0LmJ1aWxkZXJUaGVtZVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcyAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpbnRlcmFjdGJsZVxuICAgIGlmIChoZWFkZXJSZWYuY3VycmVudCkge1xuICAgICAgaW50ZXJhY3RibGUgPSBiaW5kUmVzaXplSGFuZGxlcihoZWFkZXJSZWYuY3VycmVudClcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpbnRlcmFjdGJsZSkge1xuICAgICAgICBpbnRlcmFjdGJsZS51bnNldCgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBoZWFkZXJMYXlvdXRJZCA9IGdldEhlYWRlckxheW91dElkKClcblxuICBjb25zdCBwYWdlQ29udGV4dFZhbHVlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnBhZ2VDb250ZXh0IGFzIGFueSxcbiAgICAgIGlzSGVhZGVyOiB0cnVlLFxuICAgICAgcm9vdExheW91dElkOiBoZWFkZXJMYXlvdXRJZCxcbiAgICAgIHZpZXdPbmx5OiB2aWV3T25seSB8fCAoaXNEZXNpZ25Nb2RlICYmIGFjdGl2ZVBhZ2VQYXJ0ICE9PSBQYWdlUGFydC5IZWFkZXIpXG4gICAgfVxuICB9LCBbcGFnZUNvbnRleHQsIGhlYWRlckxheW91dElkLCB2aWV3T25seSwgYWN0aXZlUGFnZVBhcnQsIGlzRGVzaWduTW9kZV0pXG5cbiAgY29uc3QgaGFuZGxlU2l6ZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChfLCBoZWlnaHQpID0+IHtcbiAgICBvbkhlaWdodENoYW5nZShNYXRoLnJvdW5kKGhlaWdodCkpXG4gIH0sIFtvbkhlaWdodENoYW5nZV0pXG5cbiAgcmV0dXJuIChcbiAgICA8UGFnZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3BhZ2VDb250ZXh0VmFsdWV9PlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9J2hlYWRlcidcbiAgICAgICAgY3NzPXtnZXRTdHlsZShoZWFkZXIsIGhlaWdodCBhcyBzdHJpbmcsIGhlYWRlclZpc2libGUsIHBhZ2VDb250ZXh0LmJ1aWxkZXJUaGVtZSwgcGFnZUNvbnRleHQudGhlbWUpfVxuICAgICAgICByZWY9e2VsID0+IChoZWFkZXJSZWYuY3VycmVudCA9IGVsKX1cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT0ndy0xMDAgaC0xMDAnXG4gICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICAgICAgbWluLWhlaWdodDogJHtwYXJzZUZsb2F0KGhlaWdodCBhcyBzdHJpbmcpfXB4O1xuICAgICAgICAgIGB9XG4gICAgICAgID5cbiAgICAgICAgICA8TGF5b3V0RW50cnkgbGF5b3V0cz17bGF5b3V0fSBpc1BhZ2VJdGVtIHZpc2libGU9e2hlYWRlclZpc2libGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7IXZpZXdPbmx5ICYmIChcbiAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgY2xhc3NOYW1lPSdyZXNpemUtaGFuZGxlcidcbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBib3R0b206ICR7LVJFU0laRV9IQU5ETEVSX0hFSUdIVCAvIDJ9cHg7XG4gICAgICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIHthY3RpdmVQYWdlUGFydCAhPT0gUGFnZVBhcnQuSGVhZGVyICYmICF2aWV3T25seSAmJiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPSdlZGl0LW1hc2stYWxsJ1xuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICR7bWFza1N0eWxlfTtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogJHthY3RpdmVQYWdlUGFydCA9PT0gUGFnZVBhcnQuQm9keSA/ICd0cmFuc3BhcmVudCcgOiBwb2xpc2hlZC5yZ2JhKGJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs0MDBdLCAwLjYpfTtcbiAgICAgICAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgICBvbkNsaWNrPXtlZGl0Qm9keX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICB7YWN0aXZlUGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkJvZHkgJiYgKCF2aWV3T25seSB8fCBicm93c2VyU2l6ZU1vZGUgPT09IG1haW5TaXplTW9kZSkgJiYgKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nZWRpdC1tYXNrIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJ1xuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICR7bWFza1N0eWxlfTtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogJHtwb2xpc2hlZC5yZ2JhKGJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs0MDBdLCAwLjYpfTtcbiAgICAgICAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J2VkaXQtYnRuIGJ0bi1sYXJnZSBib3JkZXItMCcgb25DbGljaz17ZWRpdEhlYWRlcn0+XG4gICAgICAgICAgICAgIDxFZGl0T3V0bGluZWQgc2l6ZT0nbScgLz5cbiAgICAgICAgICAgICAge3BhZ2VDb250ZXh0LmZvcm1hdE1lc3NhZ2UoJ2VkaXRIZWFkZXInKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8UmVhY3RSZXNpemVEZXRlY3RvciBoYW5kbGVIZWlnaHQgaGFuZGxlV2lkdGg9e2ZhbHNlfSBvblJlc2l6ZT17aGFuZGxlU2l6ZUNoYW5nZX0gLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvUGFnZUNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsImltcG9ydCB7IGdldEFwcFN0b3JlLCBjc3MsIGFwcEFjdGlvbnMsIFBhZ2VQYXJ0LCB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIHR5cGUgSW1tdXRhYmxlT2JqZWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc2VhcmNoVXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5cbmV4cG9ydCBjb25zdCBSRVNJWkVfSEFORExFUl9IRUlHSFQgPSAxNlxuXG5leHBvcnQgY29uc3QgcmVzaXplSGFuZGxlclN0eWxlID0gY3NzYFxuICAucmVzaXplLWhhbmRsZXIge1xuICAgIGhlaWdodDogJHtSRVNJWkVfSEFORExFUl9IRUlHSFR9cHg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgY3Vyc29yOiBucy1yZXNpemU7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICB9XG5gXG5cbmV4cG9ydCBjb25zdCBtYXNrU3R5bGUgPSBjc3NgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuYFxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdEJ0blN0eWxlICh0aGVtZTogSU1UaGVtZVZhcmlhYmxlcykge1xuICByZXR1cm4gY3NzYFxuICAgIC5lZGl0LWJ0biB7XG4gICAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5fTtcbiAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbODAwXX07XG4gICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzYwMF19O1xuICAgICAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMuYmxhY2t9O1xuICAgICAgfVxuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdEhlYWRlciAoKSB7XG4gIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5hY3RpdmVQYWdlUGFydENoYW5nZWQoUGFnZVBhcnQuSGVhZGVyKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRGb290ZXIgKCkge1xuICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuYWN0aXZlUGFnZVBhcnRDaGFuZ2VkKFBhZ2VQYXJ0LkZvb3RlcikpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0Qm9keSAoKSB7XG4gIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5hY3RpdmVQYWdlUGFydENoYW5nZWQoUGFnZVBhcnQuQm9keSkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWFkZXJMYXlvdXRJZCAoKSB7XG4gIGNvbnN0IHN0YXRlID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gIGNvbnN0IHNpemVNb2RlTGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmhlYWRlci5sYXlvdXRcbiAgcmV0dXJuIHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJZChzaXplTW9kZUxheW91dCwgc3RhdGUuYnJvd3NlclNpemVNb2RlLCBzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9vdGVyTGF5b3V0SWQgKCkge1xuICBjb25zdCBzdGF0ZSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKVxuICBjb25zdCBzaXplTW9kZUxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5mb290ZXIubGF5b3V0XG4gIHJldHVybiBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoc2l6ZU1vZGVMYXlvdXQsIHN0YXRlLmJyb3dzZXJTaXplTW9kZSwgc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VMYXlvdXRJZCAocGFnZUlkOiBzdHJpbmcpIHtcbiAgY29uc3Qgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgY29uc3Qgc2l6ZU1vZGVMYXlvdXQgPSBzdGF0ZS5hcHBDb25maWcucGFnZXNbcGFnZUlkXT8ubGF5b3V0XG4gIGlmIChzaXplTW9kZUxheW91dCkge1xuICAgIHJldHVybiBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoc2l6ZU1vZGVMYXlvdXQsIHN0YXRlLmJyb3dzZXJTaXplTW9kZSwgc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlhbG9nTGF5b3V0SWQgKGRpYWxvZ0lkOiBzdHJpbmcpIHtcbiAgY29uc3Qgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgY29uc3Qgc2l6ZU1vZGVMYXlvdXQgPSBzdGF0ZS5hcHBDb25maWcuZGlhbG9nc1tkaWFsb2dJZF0/LmxheW91dFxuICByZXR1cm4gc2VhcmNoVXRpbHMuZmluZExheW91dElkKHNpemVNb2RlTGF5b3V0LCBzdGF0ZS5icm93c2VyU2l6ZU1vZGUsIHN0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWaXNpYmxlUGFnZUlkIChwYWdlU3RhdHVzOiBJbW11dGFibGVPYmplY3Q8eyBbcGFnZUlkOiBzdHJpbmddOiBib29sZWFuIH0+KTogc3RyaW5nIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhZ2VTdGF0dXMpLmZpbmQocGlkID0+IHBhZ2VTdGF0dXNbcGlkXSlcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIFBhZ2VKc29uLFxuICBFeHRlbnNpb25NYW5hZ2VyLFxuICB0eXBlIElNU3RhdGUsXG4gIFJlYWN0UmVkdXgsXG4gIGV4dGVuc2lvblNwZWMsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICBJbW11dGFibGUsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgTGF5b3V0VHlwZSxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIFBhZ2VQYXJ0LFxuICB0eXBlIElNSGVhZGVySnNvbixcbiAgdHlwZSBJTUZvb3Rlckpzb24sXG4gIHR5cGUgTGF5b3V0SW5mbyxcbiAgdXRpbHMsXG4gIGluamVjdEludGwsXG4gIHR5cGUgSW50bFNoYXBlLFxuICBLZXlib2FyZCxcbiAgdHlwZSBDbGlwYm9hcmRJdGVtLFxuICB0eXBlIERpYWxvZ0pzb24sXG4gIEFwcERpYWxvZyxcbiAgUGFnZU1vZGUsXG4gIHR5cGUgSU1EaWFsb2dKc29uLFxuICBQYWdlVHlwZSxcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxuICBjcmVhdGVTZWxlY3RvclxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgRml4ZWRMYXlvdXRCdWlsZGVyIGZyb20gJy4uL2ZpeGVkLWxheW91dC9idWlsZGVyL2xheW91dCdcbmltcG9ydCB7IEZsb3dMYXlvdXRUcmFuc2Zvcm1lciB9IGZyb20gJy4uL2Zsb3ctbGF5b3V0L2xheW91dC10cmFuc2Zvcm0nXG5pbXBvcnQgeyBSb3dMYXlvdXRUcmFuc2Zvcm1lciB9IGZyb20gJy4uL3Jvdy1sYXlvdXQvbGF5b3V0LXRyYW5zZm9ybSdcbmltcG9ydCB7IEdyaWRMYXlvdXRUcmFuc2Zvcm1lciB9IGZyb20gJy4uL2dyaWQtbGF5b3V0L2xheW91dC10cmFuc2Zvcm0nXG5pbXBvcnQgRmxvd0xheW91dEJ1aWxkZXIgZnJvbSAnLi4vZmxvdy1sYXlvdXQvYnVpbGRlci9sYXlvdXQnXG5pbXBvcnQgR3JpZExheW91dEJ1aWxkZXIgZnJvbSAnLi4vZ3JpZC1sYXlvdXQvYnVpbGRlci9sYXlvdXQnXG5pbXBvcnQgQ29sdW1uTGF5b3V0QnVpbGRlciBmcm9tICcuLi9jb2x1bW4tbGF5b3V0L2J1aWxkZXIvbGF5b3V0J1xuaW1wb3J0IHtcbiAgcmVnaXN0ZXJMYXlvdXRCdWlsZGVyLFxuICBQYWdlQ29udGV4dCxcbiAgdHlwZSBQYWdlQ29udGV4dFByb3BzLFxuICBMYXlvdXRaSW5kZXhcbn0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgaXNEcmFnZ2luZyB9IGZyb20gJy4vaW50ZXJhY3RpdmUvZHJhZy1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgaXNSZXNpemluZyB9IGZyb20gJy4vaW50ZXJhY3RpdmUvcmVzaXplLWV2ZW50LWhhbmRsZXInXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4uL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgcGFzdGVMYXlvdXRJdGVtIH0gZnJvbSAnLi9jb21tb24tbGF5b3V0LWFjdGlvbnMnXG5pbXBvcnQgeyBQYWdlSGVhZGVyIH0gZnJvbSAnLi9wYWdlLWhlYWRlcidcbmltcG9ydCB7IFBhZ2VGb290ZXIgfSBmcm9tICcuL3BhZ2UtZm9vdGVyJ1xuaW1wb3J0IHsgUGFnZUJvZHkgfSBmcm9tICcuL3BhZ2UtYm9keSdcbmltcG9ydCB7XG4gIGdldERpYWxvZ0xheW91dElkLFxuICBnZXRGb290ZXJMYXlvdXRJZCxcbiAgZ2V0SGVhZGVyTGF5b3V0SWQsXG4gIGdldFBhZ2VMYXlvdXRJZCxcbiAgZ2V0VmlzaWJsZVBhZ2VJZFxufSBmcm9tICcuL3BhZ2UtcmVuZGVyZXItY29tbW9uJ1xuaW1wb3J0IHsgaXNMb2NrTGF5b3V0LCBpc0Rlc2lnbk1vZGUgfSBmcm9tICcuL21lbnUvY29tbW9uLW1lbnUnXG5pbXBvcnQgeyB3aXRoVGhlbWUsIGdldEJ1aWxkZXJUaGVtZVZhcmlhYmxlcyB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgeyBMYXlvdXRTZXJ2aWNlUHJvdmlkZXIgfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgUm93TGF5b3V0U2VydmljZSB9IGZyb20gJy4uL3Jvdy1sYXlvdXQvYnVpbGRlci9sYXlvdXQtc2VydmljZSdcbmltcG9ydCB7IEdyaWRMYXlvdXRTZXJ2aWNlIH0gZnJvbSAnLi4vZ3JpZC1sYXlvdXQvYnVpbGRlci9sYXlvdXQtc2VydmljZSdcbmltcG9ydCB7IEZpeGVkTGF5b3V0U2VydmljZSB9IGZyb20gJy4uL2ZpeGVkLWxheW91dC9idWlsZGVyL2xheW91dC1zZXJ2aWNlJ1xuaW1wb3J0IHsgRmxvd0xheW91dFNlcnZpY2UgfSBmcm9tICcuLi9mbG93LWxheW91dC9idWlsZGVyL2xheW91dC1zZXJ2aWNlJ1xuaW1wb3J0IHsgQ29sdW1uTGF5b3V0U2VydmljZSB9IGZyb20gJy4uL2NvbHVtbi1sYXlvdXQvYnVpbGRlci9sYXlvdXQtc2VydmljZSdcblxuTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkucmVnaXN0ZXJTZXJ2aWNlKExheW91dFR5cGUuUm93TGF5b3V0LCBuZXcgUm93TGF5b3V0U2VydmljZSgpKVxuTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkucmVnaXN0ZXJTZXJ2aWNlKExheW91dFR5cGUuR3JpZExheW91dCwgbmV3IEdyaWRMYXlvdXRTZXJ2aWNlKCkpXG5MYXlvdXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlclNlcnZpY2UoTGF5b3V0VHlwZS5GaXhlZExheW91dCwgbmV3IEZpeGVkTGF5b3V0U2VydmljZSgpKVxuTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkucmVnaXN0ZXJTZXJ2aWNlKExheW91dFR5cGUuRmxvd0xheW91dCwgbmV3IEZsb3dMYXlvdXRTZXJ2aWNlKCkpXG5MYXlvdXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlclNlcnZpY2UoTGF5b3V0VHlwZS5Db2x1bW5MYXlvdXQsIG5ldyBDb2x1bW5MYXlvdXRTZXJ2aWNlKCkpXG5cbnJlZ2lzdGVyTGF5b3V0QnVpbGRlcihMYXlvdXRUeXBlLkZpeGVkTGF5b3V0LCBGaXhlZExheW91dEJ1aWxkZXIgYXMgYW55KVxucmVnaXN0ZXJMYXlvdXRCdWlsZGVyKExheW91dFR5cGUuRmxvd0xheW91dCwgRmxvd0xheW91dEJ1aWxkZXIgYXMgYW55KVxucmVnaXN0ZXJMYXlvdXRCdWlsZGVyKExheW91dFR5cGUuR3JpZExheW91dCwgR3JpZExheW91dEJ1aWxkZXIgYXMgYW55KVxucmVnaXN0ZXJMYXlvdXRCdWlsZGVyKExheW91dFR5cGUuQ29sdW1uTGF5b3V0LCBDb2x1bW5MYXlvdXRCdWlsZGVyIGFzIGFueSlcblxuaW50ZXJmYWNlIFBhZ2VQcm9wcyB7XG4gIGludGw6IEludGxTaGFwZVxuICBkaWFsb2dJZD86IHN0cmluZ1xuICAvKipcbiAgICogc3RvcmUgcGFnZXMgdGhhdCBoYXZlIGJlZW4gcmVuZGVyZWRcbiAgICpcbiAgICogT25seSBvbmUgcGFnZSB3aWxsIGJlIHZpc2libGUsIGFsbCBvdGhlciBwYWdlcyB3aWxsIGJlIGhpZGRlblxuICAgKiAgKi9cbiAgcGFnZVN0YXR1czogSW1tdXRhYmxlT2JqZWN0PHsgW3BhZ2VJZDogc3RyaW5nXTogYm9vbGVhbiB9PlxuICAvLyBsYXlvdXRJZFdpdGhTZWxlY3Rpb24/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdGF0ZVRvUHJvcHMge1xuICBwYWdlczogSW1tdXRhYmxlT2JqZWN0PHsgW3BhZ2VJZDogc3RyaW5nXTogUGFnZUpzb24gfT5cbiAgaGVhZGVyOiBJTUhlYWRlckpzb25cbiAgaGVhZGVyVmlzaWJsZT86IGJvb2xlYW5cbiAgZm9vdGVyOiBJTUZvb3Rlckpzb25cbiAgZm9vdGVyVmlzaWJsZT86IGJvb2xlYW5cbiAgbWFpblNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgLy8gbG9jYWxlPzogc3RyaW5nO1xuICAvLyBkaXNwYXRjaD86IGFueTtcbiAgbWluSGVpZ2h0OiBudW1iZXJcbiAgYWN0aXZlUGFnZVBhcnQ6IFBhZ2VQYXJ0XG4gIGNsaXBib2FyZEl0ZW06IENsaXBib2FyZEl0ZW1cbiAgZGlhbG9nczogSW1tdXRhYmxlT2JqZWN0PHsgW2RsZ0lkOiBzdHJpbmddOiBEaWFsb2dKc29uIH0+XG4gIGN1cnJlbnREaWFsb2dJZD86IHN0cmluZ1xuXG4gIHNwbGFzaERpYWxvZ0pzb246IElNRGlhbG9nSnNvblxuICBpc1NwbGFzaENsb3NlZDogYm9vbGVhblxuICBwYWdlRGlhbG9nSWQ6IHN0cmluZ1xuICBwYWdlRGlhbG9nSnNvbjogSU1EaWFsb2dKc29uXG4gIGlzUGFnZURsZ0Nsb3NlZDogYm9vbGVhblxuICB1cmxEaWFsb2dKc29uOiBJTURpYWxvZ0pzb25cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXJcbiAgZm9vdGVySGVpZ2h0OiBudW1iZXJcbn1cblxuZXhwb3J0IGNsYXNzIFBhZ2VSZW5kZXJlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UGFnZVByb3BzICYgU3RhdGVUb1Byb3BzICYgeyB0aGVtZTogSU1UaGVtZVZhcmlhYmxlcyB9LCBTdGF0ZT4ge1xuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnQnVpbGRlclBhZ2VSZW5kZXJlcidcbiAgcGFnZVJlZjogSFRNTEVsZW1lbnRcbiAgcGFnZUNvbnRleHQ6IEltbXV0YWJsZU9iamVjdDxQYWdlQ29udGV4dFByb3BzPlxuICBhY3RpdmVMYXlvdXRJbmZvOiBMYXlvdXRJbmZvXG4gIGtleUJpbmRpbmdzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5zdGF0ZSA9IHsgaGVhZGVySGVpZ2h0OiAwLCBmb290ZXJIZWlnaHQ6IDAgfVxuICAgIEV4dGVuc2lvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlckV4dGVuc2lvbih7XG4gICAgICBlcE5hbWU6IGV4dGVuc2lvblNwZWMuRXh0ZW5zaW9uUG9pbnRzLkxheW91dFRyYW5zZm9ybWVyLFxuICAgICAgZXh0ZW5zaW9uOiBuZXcgRmxvd0xheW91dFRyYW5zZm9ybWVyKClcbiAgICB9KVxuICAgIEV4dGVuc2lvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlckV4dGVuc2lvbih7XG4gICAgICBlcE5hbWU6IGV4dGVuc2lvblNwZWMuRXh0ZW5zaW9uUG9pbnRzLkxheW91dFRyYW5zZm9ybWVyLFxuICAgICAgZXh0ZW5zaW9uOiBuZXcgUm93TGF5b3V0VHJhbnNmb3JtZXIoKVxuICAgIH0pXG4gICAgRXh0ZW5zaW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLnJlZ2lzdGVyRXh0ZW5zaW9uKHtcbiAgICAgIGVwTmFtZTogZXh0ZW5zaW9uU3BlYy5FeHRlbnNpb25Qb2ludHMuTGF5b3V0VHJhbnNmb3JtZXIsXG4gICAgICBleHRlbnNpb246IG5ldyBHcmlkTGF5b3V0VHJhbnNmb3JtZXIoKVxuICAgIH0pXG5cbiAgICBpZiAodGhpcy5pc01hYygpKSB7XG4gICAgICB0aGlzLmtleUJpbmRpbmdzID0ge1xuICAgICAgICAnY29tbWFuZCtrZXl2JzogdGhpcy5zdGFydFBhc3RlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMua2V5QmluZGluZ3MgPSB7XG4gICAgICAgICdjdHJsK2tleXYnOiB0aGlzLnN0YXJ0UGFzdGVcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVBhZ2VDb250ZXh0KClcbiAgfVxuXG4gIHVwZGF0ZUhlYWRlckhlaWdodCA9IChoZWlnaHQpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgaGVhZGVySGVpZ2h0OiBoZWlnaHQgfSlcbiAgfVxuXG4gIHVwZGF0ZUZvb3RlckhlaWdodCA9IChoZWlnaHQpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZm9vdGVySGVpZ2h0OiBoZWlnaHQgfSlcbiAgfVxuXG4gIHN0YXJ0UGFzdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2xpcGJvYXJkSXRlbSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBSdW50aW1lSW5mbz8uY2xpcGJvYXJkXG4gICAgY29uc3QgeyBhY3RpdmVQYWdlUGFydCwgcGFnZVN0YXR1cywgY3VycmVudERpYWxvZ0lkLCBkaWFsb2dzIH0gPSB0aGlzLnByb3BzXG5cbiAgICBpZiAoY2xpcGJvYXJkSXRlbSkge1xuICAgICAgbGV0IHRhcmdldExheW91dElkXG4gICAgICBpZiAoY3VycmVudERpYWxvZ0lkICYmIGRpYWxvZ3NbY3VycmVudERpYWxvZ0lkXSkge1xuICAgICAgICB0YXJnZXRMYXlvdXRJZCA9IGdldERpYWxvZ0xheW91dElkKGN1cnJlbnREaWFsb2dJZClcbiAgICAgIH0gZWxzZSBpZiAoYWN0aXZlUGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkhlYWRlcikge1xuICAgICAgICB0YXJnZXRMYXlvdXRJZCA9IGdldEhlYWRlckxheW91dElkKClcbiAgICAgIH0gZWxzZSBpZiAoYWN0aXZlUGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkZvb3Rlcikge1xuICAgICAgICB0YXJnZXRMYXlvdXRJZCA9IGdldEZvb3RlckxheW91dElkKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHZpdmlzaWJsZVBhZ2VJZCA9IGdldFZpc2libGVQYWdlSWQocGFnZVN0YXR1cylcbiAgICAgICAgdGFyZ2V0TGF5b3V0SWQgPSBnZXRQYWdlTGF5b3V0SWQodml2aXNpYmxlUGFnZUlkKVxuICAgICAgfVxuICAgICAgcGFzdGVMYXlvdXRJdGVtKGNsaXBib2FyZEl0ZW0sIHRhcmdldExheW91dElkKVxuICAgIH1cbiAgfVxuXG4gIGlzTWFjID0gKCkgPT4ge1xuICAgIHJldHVybiB3aW5kb3cuamltdVVBPy5vcz8ubmFtZSA9PT0gJ21hY09TJ1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmIChpc0Rlc2lnbk1vZGUoKSAmJiAhZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2Rlc2lnbi1tb2RlJykpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZGVzaWduLW1vZGUnKVxuICAgIH1cblxuICAgIGlmIChpc0xvY2tMYXlvdXQoKSAmJiAhZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2xvY2stbGF5b3V0JykpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbG9jay1sYXlvdXQnKVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzOiBQYWdlUHJvcHMpIHtcbiAgICBjb25zdCBkb2N1bWVudEVsZW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ/LmRvY3VtZW50RWxlbWVudFxuICAgIGlmIChkb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgIGlmICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiBpc0Rlc2lnbk1vZGUoKSkge1xuICAgICAgICBkb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtaW4tYnVpbGRlcicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaW4tYnVpbGRlcicpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzUGFnZUlkID0gZ2V0VmlzaWJsZVBhZ2VJZChwcmV2UHJvcHMucGFnZVN0YXR1cylcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gZ2V0VmlzaWJsZVBhZ2VJZCh0aGlzLnByb3BzLnBhZ2VTdGF0dXMpXG4gICAgaWYgKHByZXZpb3VzUGFnZUlkICE9PSBjdXJyZW50UGFnZUlkKSB7XG4gICAgICB0aGlzLnBhZ2VSZWYuc2Nyb2xsVG9wID0gMFxuICAgIH1cbiAgfVxuXG4gIGNsZWFyU2VsZWN0aW9uID0gKGUpID0+IHtcbiAgICBpZiAoaXNEZXNpZ25Nb2RlKCkgJiYgIWlzUmVzaXppbmcoKSAmJiAhaXNEcmFnZ2luZygpKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VsZWN0aW9uQ2hhbmdlZChudWxsKSlcbiAgICB9XG4gIH1cblxuICBmb3JtYXRNZXNzYWdlID0gKGlkOiBzdHJpbmcsIHZhbHVlcz86IGFueSk6IHN0cmluZyA9PiB7XG4gICAgaWYgKHRoaXMucHJvcHMuaW50bCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXNbaWRdIH0sIHZhbHVlcylcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRNZXNzYWdlc1tpZF1cbiAgfVxuXG4gIGdldFBhZ2VTdHlsZSAoKSB7XG4gICAgY29uc3QgeyBwYWdlU3RhdHVzLCBwYWdlcywgbWluSGVpZ2h0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgdmlzaWJsZVBhZ2VJZCA9IE9iamVjdC5rZXlzKHBhZ2VTdGF0dXMpLmZpbmQoKHBpZCkgPT4gcGFnZVN0YXR1c1twaWRdKVxuICAgIGNvbnN0IHBhZ2VKc29uID0gcGFnZXNbdmlzaWJsZVBhZ2VJZF1cbiAgICByZXR1cm4gY3NzYFxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgaGVpZ2h0OiAke3BhZ2VKc29uLm1vZGUgPT09IFBhZ2VNb2RlLkZpdFdpbmRvdyA/ICcxMDAlJyA6ICdhdXRvJ307XG4gICAgICBtaW4taGVpZ2h0OiAke21pbkhlaWdodH1weDtcbiAgICAgIC5pcy1kcmFnZ2luZyB7XG4gICAgICAgIHotaW5kZXg6ICR7TGF5b3V0WkluZGV4LkRyYWdnaW5nSXRlbX07XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgIH1cblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICB1cGRhdGVQYWdlQ29udGV4dCAoKSB7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3QgcGFnZUNvbnRleHQgPSB7XG4gICAgICB0aGVtZSxcbiAgICAgIGJ1aWxkZXJUaGVtZTogZ2V0QnVpbGRlclRoZW1lVmFyaWFibGVzKCksXG4gICAgICBmb3JtYXRNZXNzYWdlOiB0aGlzLmZvcm1hdE1lc3NhZ2VcbiAgICB9XG4gICAgaWYgKCF0aGlzLnBhZ2VDb250ZXh0KSB7XG4gICAgICB0aGlzLnBhZ2VDb250ZXh0ID0gSW1tdXRhYmxlKHBhZ2VDb250ZXh0KVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gcGFnZUNvbnRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMucGFnZUNvbnRleHRbcHJvcF0gIT09IHBhZ2VDb250ZXh0W3Byb3BdKSB7XG4gICAgICAgICAgdGhpcy5wYWdlQ29udGV4dCA9IHRoaXMucGFnZUNvbnRleHQuc2V0KHByb3AsIHBhZ2VDb250ZXh0W3Byb3BdKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IHBhZ2VTdGF0dXMsIHBhZ2VzIH0gPSB0aGlzLnByb3BzXG5cbiAgICBjb25zdCB2aXNpYmxlUGFnZUlkID0gZ2V0VmlzaWJsZVBhZ2VJZChwYWdlU3RhdHVzKVxuICAgIGlmICghdmlzaWJsZVBhZ2VJZCB8fCAhcGFnZXM/Llt2aXNpYmxlUGFnZUlkXSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVBhZ2VDb250ZXh0KClcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT0ncGFnZS1yZW5kZXJlciBkLWZsZXggZmxleC1jb2x1bW4gYWxpZ24taXRlbXMtY2VudGVyIHctMTAwJ1xuICAgICAgICByZWY9eyhlbCkgPT4gKHRoaXMucGFnZVJlZiA9IGVsKX1cbiAgICAgICAgY3NzPXt0aGlzLmdldFBhZ2VTdHlsZSgpfVxuICAgICAgICBkYXRhLXRlc3RpZD0ncGFnZVJlbmRlcmVyJ1xuICAgICAgICBvbkNsaWNrPXt0aGlzLmNsZWFyU2VsZWN0aW9ufVxuICAgICAgPlxuICAgICAgICB7dGhpcy5yZW5kZXJEaWFsb2coKX1cbiAgICAgICAge3RoaXMucmVuZGVySGVhZGVyKCl9XG4gICAgICAgIHtPYmplY3Qua2V5cyhwYWdlU3RhdHVzKS5tYXAoKHBJZCkgPT4gdGhpcy5yZW5kZXJQYWdlQm9keShwSWQpKX1cbiAgICAgICAge3RoaXMucmVuZGVyRm9vdGVyKCl9XG4gICAgICAgIDxLZXlib2FyZCBiaW5kaW5ncz17dGhpcy5rZXlCaW5kaW5nc30gLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHJlbmRlckhlYWRlciAoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmhlYWRlcikge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgeyBoZWFkZXIsIGhlYWRlclZpc2libGUsIGJyb3dzZXJTaXplTW9kZSwgbWFpblNpemVNb2RlLCBhY3RpdmVQYWdlUGFydCB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlSGVhZGVyXG4gICAgICAgIGhlYWRlcj17aGVhZGVyfVxuICAgICAgICBhY3RpdmVQYWdlUGFydD17YWN0aXZlUGFnZVBhcnR9XG4gICAgICAgIGhlYWRlclZpc2libGU9e2hlYWRlclZpc2libGV9XG4gICAgICAgIGJyb3dzZXJTaXplTW9kZT17YnJvd3NlclNpemVNb2RlfVxuICAgICAgICBtYWluU2l6ZU1vZGU9e21haW5TaXplTW9kZX1cbiAgICAgICAgcGFnZUNvbnRleHQ9e3RoaXMucGFnZUNvbnRleHR9XG4gICAgICAgIG9uSGVpZ2h0Q2hhbmdlPXt0aGlzLnVwZGF0ZUhlYWRlckhlaWdodH1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyRm9vdGVyICgpIHtcbiAgICBpZiAoIXRoaXMucHJvcHMuZm9vdGVyKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBjb25zdCB7IGZvb3RlciwgZm9vdGVyVmlzaWJsZSwgYnJvd3NlclNpemVNb2RlLCBtYWluU2l6ZU1vZGUsIGFjdGl2ZVBhZ2VQYXJ0IH0gPSB0aGlzLnByb3BzXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlRm9vdGVyXG4gICAgICAgIGZvb3Rlcj17Zm9vdGVyfVxuICAgICAgICBhY3RpdmVQYWdlUGFydD17YWN0aXZlUGFnZVBhcnR9XG4gICAgICAgIGZvb3RlclZpc2libGU9e2Zvb3RlclZpc2libGV9XG4gICAgICAgIGJyb3dzZXJTaXplTW9kZT17YnJvd3NlclNpemVNb2RlfVxuICAgICAgICBtYWluU2l6ZU1vZGU9e21haW5TaXplTW9kZX1cbiAgICAgICAgcGFnZUNvbnRleHQ9e3RoaXMucGFnZUNvbnRleHR9XG4gICAgICAgIG9uSGVpZ2h0Q2hhbmdlPXt0aGlzLnVwZGF0ZUZvb3RlckhlaWdodH1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyUGFnZUJvZHkgKHJlbmRlcmVkUGFnZUlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCB7IHBhZ2VzLCBwYWdlU3RhdHVzLCBicm93c2VyU2l6ZU1vZGUsIGFjdGl2ZVBhZ2VQYXJ0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgcGFnZUpzb24gPSBwYWdlc1tyZW5kZXJlZFBhZ2VJZF1cbiAgICBpZiAoIXBhZ2VKc29uIHx8IHBhZ2VKc29uLnR5cGUgIT09IFBhZ2VUeXBlLk5vcm1hbCkge1xuICAgICAgLy8gcGFnZSBpcyByZW1vdmVkLCBvciBjdXJyZW50IHR5cGUgaXMgbGluayBvciBmb2xkZXJcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPFBhZ2VCb2R5XG4gICAgICAgIGtleT17cGFnZUpzb24uaWR9XG4gICAgICAgIHBhZ2VKc29uPXtwYWdlSnNvbn1cbiAgICAgICAgcmVuZGVyZWRQYWdlSWQ9e3JlbmRlcmVkUGFnZUlkfVxuICAgICAgICBhY3RpdmVQYWdlUGFydD17YWN0aXZlUGFnZVBhcnR9XG4gICAgICAgIGJyb3dzZXJTaXplTW9kZT17YnJvd3NlclNpemVNb2RlfVxuICAgICAgICBwYWdlQ29udGV4dD17dGhpcy5wYWdlQ29udGV4dH1cbiAgICAgICAgdmlzaWJsZT17ISFwYWdlU3RhdHVzW3BhZ2VKc29uLmlkXX1cbiAgICAgICAgaGVhZGVyRm9vdGVySGVpZ2h0PXt0aGlzLnN0YXRlLmhlYWRlckhlaWdodCArIHRoaXMuc3RhdGUuZm9vdGVySGVpZ2h0fVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICAvLyB2aWV3T25seSB3aGVuIGRpYWxvZyBpcyBpbiBtb2RlOiAhTGFyZ2UgJiYgQVVUT1xuICBpc0RpYWxvZ1ZpZXdPbmx5IChkaWFsb2dKc29uKSB7XG4gICAgY29uc3QgeyBicm93c2VyU2l6ZU1vZGUgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBpc0F1dG9JblVuTGFyZ2VTaXplID0gYnJvd3NlclNpemVNb2RlICE9PSBCcm93c2VyU2l6ZU1vZGUuTGFyZ2UgJiYgIWRpYWxvZ0pzb24ubGF5b3V0W2Jyb3dzZXJTaXplTW9kZV1cbiAgICByZXR1cm4gISFpc0F1dG9JblVuTGFyZ2VTaXplXG4gIH1cblxuICByZW5kZXJEaWFsb2cgKCkge1xuICAgIGNvbnN0IHsgY3VycmVudERpYWxvZ0lkLCB1cmxEaWFsb2dKc29uLCBzcGxhc2hEaWFsb2dKc29uLCBpc1NwbGFzaENsb3NlZCwgaXNQYWdlRGxnQ2xvc2VkLCBwYWdlRGlhbG9nSnNvbiwgcGFnZURpYWxvZ0lkIH0gPSB0aGlzLnByb3BzXG5cbiAgICBjb25zdCBzaG93U3BsYXNoID0gIWlzU3BsYXNoQ2xvc2VkICYmIHNwbGFzaERpYWxvZ0pzb25cbiAgICBjb25zdCBzaG93UGFnZURsZyA9ICFpc1BhZ2VEbGdDbG9zZWQgJiYgcGFnZURpYWxvZ0pzb25cbiAgICBjb25zdCBzaG93VXJsRGxnID0gdXJsRGlhbG9nSnNvbiA/IChzcGxhc2hEaWFsb2dKc29uPy5pZCA9PT0gdXJsRGlhbG9nSnNvbi5pZCB8fCBwYWdlRGlhbG9nSnNvbj8uaWQgPT09IHVybERpYWxvZ0pzb24uaWQpID8gbnVsbCA6IHVybERpYWxvZ0pzb24gOiBudWxsXG5cbiAgICByZXR1cm4gKFxuICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICB7c2hvd1VybERsZyAmJiAoXG4gICAgICAgICAgPFBhZ2VDb250ZXh0LlByb3ZpZGVyXG4gICAgICAgICAgICB2YWx1ZT17e1xuICAgICAgICAgICAgICAuLi4odGhpcy5wYWdlQ29udGV4dCBhcyBhbnkpLFxuICAgICAgICAgICAgICBkaWFsb2dJZDogY3VycmVudERpYWxvZ0lkLFxuICAgICAgICAgICAgICBpc0RpYWxvZzogdHJ1ZSxcbiAgICAgICAgICAgICAgdmlld09ubHk6IHRoaXMuaXNEaWFsb2dWaWV3T25seSh1cmxEaWFsb2dKc29uKSxcbiAgICAgICAgICAgICAgcm9vdExheW91dElkOiBnZXREaWFsb2dMYXlvdXRJZChjdXJyZW50RGlhbG9nSWQpXG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxBcHBEaWFsb2cgZGlhbG9nSnNvbj17dXJsRGlhbG9nSnNvbn0gLz5cbiAgICAgICAgICA8L1BhZ2VDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICApfVxuXG4gICAgICAgIHtzaG93UGFnZURsZyAmJiAoXG4gICAgICAgICAgPFBhZ2VDb250ZXh0LlByb3ZpZGVyXG4gICAgICAgICAgICB2YWx1ZT17e1xuICAgICAgICAgICAgICAuLi4odGhpcy5wYWdlQ29udGV4dCBhcyBhbnkpLFxuICAgICAgICAgICAgICBkaWFsb2dJZDogcGFnZURpYWxvZ0lkLFxuICAgICAgICAgICAgICBpc0RpYWxvZzogdHJ1ZSxcbiAgICAgICAgICAgICAgdmlld09ubHk6IHRoaXMuaXNEaWFsb2dWaWV3T25seShwYWdlRGlhbG9nSnNvbiksXG4gICAgICAgICAgICAgIHJvb3RMYXlvdXRJZDogZ2V0RGlhbG9nTGF5b3V0SWQocGFnZURpYWxvZ0pzb24uaWQpXG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxBcHBEaWFsb2cgZGlhbG9nSnNvbj17cGFnZURpYWxvZ0pzb259IGlzT3BlbkJ5UGFnZSAvPlxuICAgICAgICAgIDwvUGFnZUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICl9XG5cbiAgICAgICAge3Nob3dTcGxhc2ggJiYgKFxuICAgICAgICAgIDxQYWdlQ29udGV4dC5Qcm92aWRlclxuICAgICAgICAgICAgdmFsdWU9e3tcbiAgICAgICAgICAgICAgLi4uKHRoaXMucGFnZUNvbnRleHQgYXMgYW55KSxcbiAgICAgICAgICAgICAgZGlhbG9nSWQ6IHNwbGFzaERpYWxvZ0pzb24uaWQsXG4gICAgICAgICAgICAgIGlzRGlhbG9nOiB0cnVlLFxuICAgICAgICAgICAgICB2aWV3T25seTogdGhpcy5pc0RpYWxvZ1ZpZXdPbmx5KHNwbGFzaERpYWxvZ0pzb24pLFxuICAgICAgICAgICAgICByb290TGF5b3V0SWQ6IGdldERpYWxvZ0xheW91dElkKHNwbGFzaERpYWxvZ0pzb24uaWQpXG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxBcHBEaWFsb2cgZGlhbG9nSnNvbj17c3BsYXNoRGlhbG9nSnNvbn0gLz5cbiAgICAgICAgICA8L1BhZ2VDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICApfVxuICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICApXG4gIH1cbn1cblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzOiAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBQYWdlUHJvcHMpID0+IFN0YXRlVG9Qcm9wcyA9IGNyZWF0ZVNlbGVjdG9yKFtcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgdmlld3BvcnRTaXplID0gdXRpbHMuZmluZFZpZXdwb3J0U2l6ZShzdGF0ZS5hcHBDb25maWcsIHN0YXRlLmJyb3dzZXJTaXplTW9kZSlcbiAgICByZXR1cm4gdmlld3BvcnRTaXplLmhlaWdodFxuICB9LFxuICAoXywgb3duUHJvcHM6IFBhZ2VQcm9wcykgPT4ge1xuICAgIHJldHVybiBnZXRWaXNpYmxlUGFnZUlkKG93blByb3BzLnBhZ2VTdGF0dXMpXG4gIH0sXG4gIChfLCBvd25Qcm9wczogUGFnZVByb3BzKSA9PiBvd25Qcm9wcy5kaWFsb2dJZCxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBSdW50aW1lSW5mby5jdXJyZW50UGFnZUlkLFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcENvbmZpZy5wYWdlcyxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBDb25maWcuZGlhbG9ncyxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBDb25maWcuaGVhZGVyLFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcENvbmZpZy5mb290ZXIsXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZSxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5icm93c2VyU2l6ZU1vZGUsXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYXBwUnVudGltZUluZm8uYWN0aXZlUGFnZVBhcnQgPz8gUGFnZVBhcnQuQm9keSxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBSdW50aW1lSW5mby5jbGlwYm9hcmQsXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYXBwUnVudGltZUluZm8uY3VycmVudERpYWxvZ0lkLFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5kaWFsb2dJbmZvcyxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy5wYWdlc1tzdGF0ZS5hcHBSdW50aW1lSW5mby5jdXJyZW50UGFnZUlkXS5hdXRvT3BlbkRpYWxvZ0lkXG4gIH1cbl0sIChtaW5IZWlnaHQsIHBhZ2VJZCwgZGlhbG9nSWQsIGN1cnJlbnRQYWdlSWQsIHBhZ2VzLCBkaWFsb2dzLCBoZWFkZXIsIGZvb3RlciwgbWFpblNpemVNb2RlLCBicm93c2VyU2l6ZU1vZGUsIGFjdGl2ZVBhZ2VQYXJ0LCBjbGlwYm9hcmRJdGVtLCBjdXJyZW50RGlhbG9nSWQsIGRpYWxvZ0luZm9zLCBwYWdlRGxnSWQpID0+IHtcbiAgaWYgKCFwYWdlSWQgfHwgIXBhZ2VzW3BhZ2VJZF0pIHtcbiAgICByZXR1cm4ge30gYXMgYW55XG4gIH1cbiAgY29uc3QgZGlhbG9nSnNvbiA9IGRpYWxvZ3NbT2JqZWN0LmtleXMoZGlhbG9ncykuZmluZChkbGdJZCA9PiBkaWFsb2dzW2RsZ0lkXS5pc1NwbGFzaCldXG4gIHJldHVybiB7XG4gICAgcGFnZXMsXG4gICAgZGlhbG9ncyxcbiAgICBoZWFkZXIsXG4gICAgZm9vdGVyLFxuICAgIGhlYWRlclZpc2libGU6ICEhcGFnZXNbcGFnZUlkXS5oZWFkZXIsXG4gICAgZm9vdGVyVmlzaWJsZTogISFwYWdlc1twYWdlSWRdLmZvb3RlcixcbiAgICBtYWluU2l6ZU1vZGUsXG4gICAgYnJvd3NlclNpemVNb2RlLFxuICAgIG1pbkhlaWdodCxcbiAgICBhY3RpdmVQYWdlUGFydCxcbiAgICBjbGlwYm9hcmRJdGVtLFxuICAgIGN1cnJlbnREaWFsb2dJZCxcbiAgICBzcGxhc2hEaWFsb2dKc29uOiBkaWFsb2dKc29uLFxuICAgIGlzU3BsYXNoQ2xvc2VkOiBkaWFsb2dJbmZvcz8uW2RpYWxvZ0pzb24/LmlkXT8uaXNDbG9zZWQsXG4gICAgcGFnZURpYWxvZ0lkOiBwYWdlRGxnSWQsXG4gICAgcGFnZURpYWxvZ0pzb246IGRpYWxvZ3NbcGFnZURsZ0lkXSxcbiAgICBpc1BhZ2VEbGdDbG9zZWQ6IGRpYWxvZ0luZm9zPy5bY3VycmVudFBhZ2VJZCArICctJyArIHBhZ2VEbGdJZF0/LmlzQ2xvc2VkLFxuICAgIHVybERpYWxvZ0pzb246IGRpYWxvZ3NbZGlhbG9nSWRdXG4gIH1cbn0pXG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9Qcm9wcywgdW5rbm93biwgUGFnZVByb3BzPihtYXBTdGF0ZVRvUHJvcHMpKHdpdGhUaGVtZShQYWdlUmVuZGVyZXIpKSlcbiIsImNvbnN0IFNURVAgPSAzNjAgLyAxNiAvLyBEaXZpZGUgdGhlIGNpcmNsZSBpbnRvIDE2IHBhcnRzLlxuXG5mdW5jdGlvbiBjbGFtcFJvdGF0aW9uIChyb3RhdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKGlzTmFOKHJvdGF0aW9uKSkge1xuICAgIHJldHVybiAwXG4gIH1cblxuICBjb25zdCByZXN1bHQgPSByb3RhdGlvbiAlIDM2MFxuXG4gIHJldHVybiByZXN1bHQgPCAwID8gcmVzdWx0ICsgMzYwIDogcmVzdWx0XG59XG5cbi8qKlxuICogVGhlIGFycm93IG9mIHplcm8gZGVncmVlIGlzIHRoZSBzYW1lIGFzIHRoZSB5IGF4aXMgcG9pbnRzIHRvIHRoZSBib3R0b20gb2YgdGhlIHZpZXdwb3J0LlxuICogQHBhcmFtIHJvdGF0aW9uIGluIGRlZ3JlZSwgZ3JlYXRlciB0aGFuIDAgaWYgcm90YXRlIGNsb2Nrd2lzZVxuICogQHBhcmFtIGluaXRBbmdsZSBpbiBkZWdyZWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnNvciAocm90YXRpb246IG51bWJlciwgaW5pdEFuZ2xlOiBudW1iZXIpIHtcbiAgY29uc3QgciA9IGNsYW1wUm90YXRpb24ocm90YXRpb24gKyBpbml0QW5nbGUpXG4gIGlmIChyID49IDM2MCAtIFNURVAgfHwgciA8IFNURVAgfHwgKHIgPj0gU1RFUCAqIDcgJiYgciA8IFNURVAgKiA5KSkge1xuICAgIHJldHVybiAnbnMtcmVzaXplJ1xuICB9IGVsc2UgaWYgKChyID49IFNURVAgJiYgciA8IFNURVAgKiAzKSB8fCAociA+PSBTVEVQICogOSAmJiByIDwgU1RFUCAqIDExKSkge1xuICAgIHJldHVybiAnbmVzdy1yZXNpemUnXG4gIH0gZWxzZSBpZiAoKHIgPj0gU1RFUCAqIDMgJiYgciA8IFNURVAgKiA1KSB8fCAociA+PSBTVEVQICogMTEgJiYgciA8IFNURVAgKiAxMykpIHtcbiAgICByZXR1cm4gJ2V3LXJlc2l6ZSdcbiAgfSBlbHNlIGlmICgociA+PSBTVEVQICogNSAmJiByIDwgU1RFUCAqIDcpIHx8IChyID49IFNURVAgKiAxMyAmJiByIDwgU1RFUCAqIDE1KSkge1xuICAgIHJldHVybiAnbndzZS1yZXNpemUnXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dFpJbmRleCB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGdldEN1cnNvciB9IGZyb20gJy4vcmVzaXplLWN1cnNvci11dGlsJ1xuaW1wb3J0IHsgU2hhcGVMIH0gZnJvbSAnLi9zaGFwZS1sJ1xuaW1wb3J0IHsgU2hhcGVSZWN0IH0gZnJvbSAnLi9zaGFwZS1yZWN0J1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlc2l6ZUhhbmRsZXJzUHJvcHMge1xuICBsZWZ0OiBib29sZWFuXG4gIHJpZ2h0OiBib29sZWFuXG4gIHRvcDogYm9vbGVhblxuICBib3R0b206IGJvb2xlYW5cbiAgYnVpbGRlclRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xuICByb3RhdGlvbj86IG51bWJlclxufVxuXG5pbnRlcmZhY2UgUmVzaXphYmxlU2lkZXMge1xuICB0b3A6IGJvb2xlYW5cbiAgcmlnaHQ6IGJvb2xlYW5cbiAgYm90dG9tOiBib29sZWFuXG4gIGxlZnQ6IGJvb2xlYW5cbiAgdG9wUmlnaHQ6IGJvb2xlYW5cbiAgYm90dG9tUmlnaHQ6IGJvb2xlYW5cbiAgYm90dG9tTGVmdDogYm9vbGVhblxuICB0b3BMZWZ0OiBib29sZWFuXG59XG5cbmNvbnN0IGNvcm5lclNpemUgPSAxMVxuY29uc3QgaGFuZGxlclNpemUgPSAxMFxuY29uc3Qgc2lkZUxvbmcgPSAxNlxuY29uc3Qgc2lkZVNob3J0ID0gNFxuY29uc3Qgc2lkZVBvc2l0aW9uID0gMTBcblxuY29uc3QgdG9wTGVmdEN1cnNvciA9IChyb3RhdGlvbjogbnVtYmVyKSA9PiBjc3NgXG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICAvKiBjdXJzb3I6IG53c2UtcmVzaXplOyAqL1xuICBjdXJzb3I6ICR7Z2V0Q3Vyc29yKHJvdGF0aW9uLCAxMzUpfTtcbiAgLmppbXUtcnRsICYge1xuICAgIC8qIGN1cnNvcjogbmVzdy1yZXNpemU7ICovXG4gICAgY3Vyc29yOiAke2dldEN1cnNvcihyb3RhdGlvbiwgMTM1ICsgOTApfTtcbiAgfVxuICA+IHN2ZyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICB9XG5gXG5jb25zdCB0b3BSaWdodEN1cnNvciA9IChyb3RhdGlvbjogbnVtYmVyKSA9PiBjc3NgXG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgLyogY3Vyc29yOiBuZXN3LXJlc2l6ZTsgKi9cbiAgY3Vyc29yOiAke2dldEN1cnNvcihyb3RhdGlvbiwgMjI1KX07XG4gIC5qaW11LXJ0bCAmIHtcbiAgICAvKiBjdXJzb3I6IG53c2UtcmVzaXplOyAqL1xuICAgIGN1cnNvcjogJHtnZXRDdXJzb3Iocm90YXRpb24sIDIyNSArIDkwKX07XG4gIH1cbmBcbmNvbnN0IGJvdHRvbUxlZnRDdXJzb3IgPSAocm90YXRpb246IG51bWJlcikgPT4gY3NzYFxuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgLyogY3Vyc29yOiBuZXN3LXJlc2l6ZTsgKi9cbiAgY3Vyc29yOiAke2dldEN1cnNvcihyb3RhdGlvbiwgNDUpfTtcbiAgLmppbXUtcnRsICYge1xuICAgIC8qIGN1cnNvcjogbndzZS1yZXNpemU7ICovXG4gICAgY3Vyc29yOiAke2dldEN1cnNvcihyb3RhdGlvbiwgNDUgKyA5MCl9O1xuICB9XG5gXG5jb25zdCBib3R0b21SaWdodEN1cnNvciA9IChyb3RhdGlvbjogbnVtYmVyKSA9PiBjc3NgXG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgLyogY3Vyc29yOiBud3NlLXJlc2l6ZTsgKi9cbiAgY3Vyc29yOiAke2dldEN1cnNvcihyb3RhdGlvbiwgMzE1KX07XG4gIC5qaW11LXJ0bCAmIHtcbiAgICAvKiBjdXJzb3I6IG5lc3ctcmVzaXplOyAqL1xuICAgIGN1cnNvcjogJHtnZXRDdXJzb3Iocm90YXRpb24sIDMxNSArIDkwKX07XG4gIH1cbmBcbmNvbnN0IHRvcFNpZGVDdXJzb3IgPSAocm90YXRpb246IG51bWJlcikgPT4gY3NzYFxuICBoZWlnaHQ6ICR7aGFuZGxlclNpemV9cHg7XG4gIGxlZnQ6ICR7c2lkZVBvc2l0aW9ufXB4O1xuICByaWdodDogJHtzaWRlUG9zaXRpb259cHg7XG4gIHRvcDogMHB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIC8qIGN1cnNvcjogbnMtcmVzaXplOyAqL1xuICBjdXJzb3I6ICR7Z2V0Q3Vyc29yKHJvdGF0aW9uLCAxODApfTtcblxuICBjYW52YXMge1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0b3A6IDA7XG4gICAgd2lkdGg6ICR7c2lkZUxvbmd9cHg7XG4gICAgaGVpZ2h0OiAke3NpZGVTaG9ydH1weDtcbiAgICBtYXJnaW4tbGVmdDogJHstc2lkZUxvbmcgLyAyfXB4O1xuICAgIG1hcmdpbi10b3A6IDFweDtcbiAgfVxuYFxuY29uc3QgcmlnaHRTaWRlQ3Vyc29yID0gKHJvdGF0aW9uOiBudW1iZXIpID0+IGNzc2BcbiAgd2lkdGg6ICR7aGFuZGxlclNpemV9cHg7XG4gIHRvcDogJHtzaWRlUG9zaXRpb259cHg7XG4gIGJvdHRvbTogJHtzaWRlUG9zaXRpb259cHg7XG4gIHJpZ2h0OiAwO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIC8qIGN1cnNvcjogZXctcmVzaXplOyAqL1xuICBjdXJzb3I6ICR7Z2V0Q3Vyc29yKHJvdGF0aW9uLCAyNzApfTtcblxuICBjYW52YXMge1xuICAgIHRvcDogNTAlO1xuICAgIHJpZ2h0OiAwO1xuICAgIHdpZHRoOiAke3NpZGVTaG9ydH1weDtcbiAgICBoZWlnaHQ6ICR7c2lkZUxvbmd9cHg7XG4gICAgbWFyZ2luLXRvcDogJHstc2lkZUxvbmcgLyAyfXB4O1xuICAgIG1hcmdpbi1yaWdodDogMXB4O1xuICB9XG5gXG5jb25zdCBib3R0b21TaWRlQ3Vyc29yID0gKHJvdGF0aW9uOiBudW1iZXIpID0+IGNzc2BcbiAgaGVpZ2h0OiAke2hhbmRsZXJTaXplfXB4O1xuICBsZWZ0OiAke3NpZGVQb3NpdGlvbn1weDtcbiAgcmlnaHQ6ICR7c2lkZVBvc2l0aW9ufXB4O1xuICBib3R0b206IDA7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgLyogY3Vyc29yOiBucy1yZXNpemU7ICovXG4gIGN1cnNvcjogJHtnZXRDdXJzb3Iocm90YXRpb24sIDApfTtcblxuICBjYW52YXMge1xuICAgIGxlZnQ6IDUwJTtcbiAgICBib3R0b206IDA7XG4gICAgd2lkdGg6ICR7c2lkZUxvbmd9cHg7XG4gICAgaGVpZ2h0OiAke3NpZGVTaG9ydH1weDtcbiAgICBtYXJnaW4tbGVmdDogJHstc2lkZUxvbmcgLyAyfXB4O1xuICAgIG1hcmdpbi1ib3R0b206IDFweDtcbiAgfVxuYFxuY29uc3QgbGVmdFNpZGVDdXJzb3IgPSAocm90YXRpb246IG51bWJlcikgPT4gY3NzYFxuICB3aWR0aDogJHtoYW5kbGVyU2l6ZX1weDtcbiAgdG9wOiAke3NpZGVQb3NpdGlvbn1weDtcbiAgYm90dG9tOiAke3NpZGVQb3NpdGlvbn1weDtcbiAgbGVmdDogMDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICAvKiBjdXJzb3I6IGV3LXJlc2l6ZTsgKi9cbiAgY3Vyc29yOiAke2dldEN1cnNvcihyb3RhdGlvbiwgOTApfTtcblxuICBjYW52YXMge1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6ICR7c2lkZVNob3J0fXB4O1xuICAgIGhlaWdodDogJHtzaWRlTG9uZ31weDtcbiAgICBtYXJnaW4tdG9wOiAkey1zaWRlTG9uZyAvIDJ9cHg7XG4gICAgbWFyZ2luLWxlZnQ6IDFweDtcbiAgfVxuYFxuXG5mdW5jdGlvbiBnZXRSZXNpemFibGVTaWRlcyAocHJvcHM6IFJlc2l6ZUhhbmRsZXJzUHJvcHMpOiBSZXNpemFibGVTaWRlcyB7XG4gIGNvbnN0IHsgbGVmdCA9IHRydWUsIHRvcCA9IHRydWUsIHJpZ2h0ID0gdHJ1ZSwgYm90dG9tID0gdHJ1ZSB9ID0gcHJvcHNcbiAgcmV0dXJuIHtcbiAgICB0b3AsXG4gICAgcmlnaHQsXG4gICAgYm90dG9tLFxuICAgIGxlZnQsXG4gICAgdG9wUmlnaHQ6IHRvcCAmJiByaWdodCxcbiAgICBib3R0b21SaWdodDogYm90dG9tICYmIHJpZ2h0LFxuICAgIGJvdHRvbUxlZnQ6IGJvdHRvbSAmJiBsZWZ0LFxuICAgIHRvcExlZnQ6IHRvcCAmJiBsZWZ0XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlc2l6ZUhhbmRsZXJzIChwcm9wczogUmVzaXplSGFuZGxlcnNQcm9wcykge1xuICBjb25zdCB7IHJvdGF0aW9uID0gMCB9ID0gcHJvcHNcbiAgY29uc3QgeyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21SaWdodCwgYm90dG9tTGVmdCB9ID0gZ2V0UmVzaXphYmxlU2lkZXMocHJvcHMpXG5cbiAgY29uc3QgcmVjdEhhbmRsZSA9IGNzc2BcbiAgICB3aWR0aDogJHtjb3JuZXJTaXplfXB4O1xuICAgIGhlaWdodDogJHtjb3JuZXJTaXplfXB4O1xuICAgIHBhZGRpbmc6IDFweDtcbiAgICB6LWluZGV4OiAke0xheW91dFpJbmRleC5IYW5kbGVyVG9vbHN9O1xuICBgXG4gIGNvbnN0IGNvcm5lckhhbmRsZXJTdHlsZSA9IHJlY3RIYW5kbGVcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCBhY3Rpb24tYXJlYSc+XG4gICAgICB7dG9wICYmIChcbiAgICAgICAgPHNwYW5cbiAgICAgICAgICBrZXk9JzInXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9J3RvcCdcbiAgICAgICAgICBjbGFzc05hbWU9J3JuZC1yZXNpemUtdG9wIGhhbmRsZSBuby1kcmFnLWFjdGlvbidcbiAgICAgICAgICBjc3M9e3RvcFNpZGVDdXJzb3Iocm90YXRpb24pfVxuICAgICAgICA+XG4gICAgICAgICAgPFNoYXBlUmVjdCBkaXJlY3Rpb249J2gnLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKX1cbiAgICAgIHtyaWdodCAmJiAoXG4gICAgICAgIDxzcGFuXG4gICAgICAgICAga2V5PSc0J1xuICAgICAgICAgIGRhdGEtdGVzdGlkPSdyaWdodCdcbiAgICAgICAgICBjbGFzc05hbWU9J3JuZC1yZXNpemUtcmlnaHQgaGFuZGxlIG5vLWRyYWctYWN0aW9uJ1xuICAgICAgICAgIGNzcz17cmlnaHRTaWRlQ3Vyc29yKHJvdGF0aW9uKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxTaGFwZVJlY3QgZGlyZWN0aW9uPSd2Jy8+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICl9XG4gICAgICB7Ym90dG9tICYmIChcbiAgICAgICAgPHNwYW5cbiAgICAgICAgICBrZXk9JzYnXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9J2JvdHRvbSdcbiAgICAgICAgICBjbGFzc05hbWU9J3JuZC1yZXNpemUtYm90dG9tIGhhbmRsZSBuby1kcmFnLWFjdGlvbidcbiAgICAgICAgICBjc3M9e2JvdHRvbVNpZGVDdXJzb3Iocm90YXRpb24pfVxuICAgICAgICA+XG4gICAgICAgICAgPFNoYXBlUmVjdCBkaXJlY3Rpb249J2gnLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKX1cbiAgICAgIHtsZWZ0ICYmIChcbiAgICAgICAgPHNwYW5cbiAgICAgICAgICBrZXk9JzgnXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9J2xlZnQnXG4gICAgICAgICAgY2xhc3NOYW1lPSdybmQtcmVzaXplLWxlZnQgaGFuZGxlIG5vLWRyYWctYWN0aW9uJ1xuICAgICAgICAgIGNzcz17bGVmdFNpZGVDdXJzb3Iocm90YXRpb24pfVxuICAgICAgICA+XG4gICAgICAgICAgPFNoYXBlUmVjdCBkaXJlY3Rpb249J3YnLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKX1cbiAgICAgIHt0b3BMZWZ0ICYmIChcbiAgICAgICAgPHNwYW5cbiAgICAgICAgICBrZXk9JzEnXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9J3RvcExlZnQnXG4gICAgICAgICAgY2xhc3NOYW1lPSdybmQtcmVzaXplLXRvcCBybmQtcmVzaXplLWxlZnQgaGFuZGxlIG5vLWRyYWctYWN0aW9uJ1xuICAgICAgICAgIGNzcz17W2Nvcm5lckhhbmRsZXJTdHlsZSwgdG9wTGVmdEN1cnNvcihyb3RhdGlvbildfVxuICAgICAgICA+XG4gICAgICAgICAgPFNoYXBlTCBwb3M9J3RsJy8+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICl9XG4gICAgICB7dG9wUmlnaHQgJiYgKFxuICAgICAgICA8c3BhblxuICAgICAgICAgIGtleT0nMydcbiAgICAgICAgICBkYXRhLXRlc3RpZD0ndG9wUmlnaHQnXG4gICAgICAgICAgY2xhc3NOYW1lPSdybmQtcmVzaXplLXRvcCBybmQtcmVzaXplLXJpZ2h0IGhhbmRsZSBuby1kcmFnLWFjdGlvbidcbiAgICAgICAgICBjc3M9e1tjb3JuZXJIYW5kbGVyU3R5bGUsIHRvcFJpZ2h0Q3Vyc29yKHJvdGF0aW9uKV19XG4gICAgICAgID5cbiAgICAgICAgICA8U2hhcGVMIHBvcz0ndHInLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKX1cbiAgICAgIHtib3R0b21SaWdodCAmJiAoXG4gICAgICAgIDxzcGFuXG4gICAgICAgICAga2V5PSc1J1xuICAgICAgICAgIGRhdGEtdGVzdGlkPSdib3R0b21SaWdodCdcbiAgICAgICAgICBjbGFzc05hbWU9J3JuZC1yZXNpemUtYm90dG9tIHJuZC1yZXNpemUtcmlnaHQgaGFuZGxlIG5vLWRyYWctYWN0aW9uJ1xuICAgICAgICAgIGNzcz17W2Nvcm5lckhhbmRsZXJTdHlsZSwgYm90dG9tUmlnaHRDdXJzb3Iocm90YXRpb24pXX1cbiAgICAgICAgPlxuICAgICAgICAgIDxTaGFwZUwgcG9zPSdicicvPlxuICAgICAgICA8L3NwYW4+XG4gICAgICApfVxuICAgICAge2JvdHRvbUxlZnQgJiYgKFxuICAgICAgICA8c3BhblxuICAgICAgICAgIGtleT0nNydcbiAgICAgICAgICBkYXRhLXRlc3RpZD0nYm90dG9tTGVmdCdcbiAgICAgICAgICBjbGFzc05hbWU9J3JuZC1yZXNpemUtYm90dG9tIHJuZC1yZXNpemUtbGVmdCBoYW5kbGUgbm8tZHJhZy1hY3Rpb24nXG4gICAgICAgICAgY3NzPXtbY29ybmVySGFuZGxlclN0eWxlLCBib3R0b21MZWZ0Q3Vyc29yKHJvdGF0aW9uKV19XG4gICAgICAgID5cbiAgICAgICAgICA8U2hhcGVMIHBvcz0nYmwnLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIExheW91dEl0ZW1Qcm9wcywgdHlwZSBTZWN0aW9uUHJvcHMsIHR5cGUgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcywgVmlld1Zpc2liaWxpdHlDb250ZXh0IH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IExheW91dEVudHJ5IGZyb20gJy4vbGF5b3V0LWVudHJ5J1xuaW1wb3J0IHsgU2VjdGlvblJlbmRlcmVyQmFzZSB9IGZyb20gJy4uL3J1bnRpbWUvc2VjdGlvbi1yZW5kZXJlci1iYXNlJ1xuXG5leHBvcnQgY2xhc3MgU2VjdGlvblJlbmRlcmVySW5CdWlsZGVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRJdGVtUHJvcHMgJiBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzICYgU2VjdGlvblByb3BzPiB7XG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTZWN0aW9uUmVuZGVyZXJCYXNlIHsuLi50aGlzLnByb3BzfSBsYXlvdXRFbnRyeUNvbXBvbmVudD17TGF5b3V0RW50cnkgYXMgYW55fSB2aWV3VmlzaWJpbGl0eUNvbnRleHQ9e1ZpZXdWaXNpYmlsaXR5Q29udGV4dCBhcyBhbnl9IC8+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBjbGFzc05hbWVzLFxuICBwb2xpc2hlZCxcbiAgaW5qZWN0SW50bCxcbiAgdHlwZSBJbnRsU2hhcGUsXG4gIGppbXVIaXN0b3J5LFxuICBnZXRBcHBTdG9yZSxcbiAgYXBwQWN0aW9ucyxcbiAgbG9kYXNoLFxuICB0eXBlIElNV2lkZ2V0SnNvbixcbiAgS2V5Ym9hcmQsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIHR5cGUgSU1TdGF0ZSxcbiAgQXBwTW9kZSxcbiAgdHlwZSBJTVNlY3Rpb25OYXZJbmZvLFxuICB0eXBlIFNlcmlhbGl6ZWRTdHlsZXMsXG4gIExheW91dFBhcmVudFR5cGUsXG4gIGNyZWF0ZVNlbGVjdG9yXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgVG9vbGJhckNvbmZpZywgUGFnZUNvbnRleHQsIHR5cGUgUGFnZUNvbnRleHRQcm9wcywgTGF5b3V0WkluZGV4IH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgU2NyZWVuR3JvdXBDb250ZXh0IH0gZnJvbSAnLi9wYWdlLWNvbnRleHQnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24sIGFwcEJ1aWxkZXJTeW5jIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IGdldEZhbGxiYWNrUGxhY2VtZW50c01vZGlmaWVyIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEdMT0JBTF9EUkFHR0lOR19DTEFTU19OQU1FLCBHTE9CQUxfSDVfRFJBR0dJTkdfQ0xBU1NfTkFNRSB9IGZyb20gJy4vaW50ZXJhY3RpdmUvZHJhZy1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlcyBmcm9tICcuLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IFJlc2l6ZUhhbmRsZXJzIH0gZnJvbSAnLi9yZXNpemUtaGFuZGxlcnMnXG5pbXBvcnQgeyBMYXlvdXRJdGVtVG9vbGJhciB9IGZyb20gJy4vbGF5b3V0LWl0ZW0tdG9vbGJhcidcbmltcG9ydCB7IExvY2tPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL2xvY2snXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGxheW91dElkOiBzdHJpbmdcbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvblxuICB0b3A/OiBib29sZWFuXG4gIGxlZnQ/OiBib29sZWFuXG4gIHJpZ2h0PzogYm9vbGVhblxuICBib3R0b20/OiBib29sZWFuXG4gIHJlc2l6YWJsZT86IGJvb2xlYW5cbiAgZHJhZ2dhYmxlPzogYm9vbGVhblxuICBmb3JiaWRUb29sYmFyPzogYm9vbGVhblxuICB0b29sSXRlbXM/OiBUb29sYmFyQ29uZmlnXG4gIHNob3dEZWZhdWx0VG9vbHM/OiBib29sZWFuXG4gIHNlbGVjdGVkOiBib29sZWFuXG4gIGF1dG9TY3JvbGw/OiBib29sZWFuXG4gIGlzSW5saW5lRWRpdGluZzogYm9vbGVhblxuICBpc0Z1bmN0aW9uYWxXaWRnZXQ6IGJvb2xlYW5cbiAgaGFzRW1iZWRkZWRMYXlvdXQ6IGJvb2xlYW5cbiAgaXNTZWN0aW9uOiBib29sZWFuXG4gIHZpZXdzPzogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxuICBpc0Jsb2NrPzogYm9vbGVhblxuICBoYXNFeHRlbnNpb24/OiBib29sZWFuXG4gIHdpZGdldEpzb24/OiBJTVdpZGdldEpzb25cbiAgd2lkZ2V0U3RhdGU/OiBhbnlcbiAgcm90YXRlPzogbnVtYmVyXG59XG5cbmludGVyZmFjZSBTdGF0ZVRvUHJvcHMge1xuICBsb2NrTGF5b3V0OiBib29sZWFuXG4gIGlzRGVzaWduTW9kZTogYm9vbGVhblxuICBzZWN0aW9uTmF2SW5mbzogSU1TZWN0aW9uTmF2SW5mb1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBzZWxlY3RlZDogYm9vbGVhblxuICB1cGRhdGVJbmRleDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBJbnRsUHJvcHMge1xuICBpbnRsOiBJbnRsU2hhcGVcbn1cblxuZXhwb3J0IGNsYXNzIFNlbGVjdFdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgSW50bFByb3BzICYgU3RhdGVUb1Byb3BzLCBTdGF0ZT4ge1xuICByZWY6IEhUTUxFbGVtZW50XG5cbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHNcbiAgc2NyZWVuR3JvdXBJbmZvOiBzdHJpbmdcblxuICBrZXlCaW5kaW5nczogeyBba2V5OiBzdHJpbmddOiBhbnkgfVxuICBtb2RpZmllcnNcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnN0YXRlID0geyBzZWxlY3RlZDogZmFsc2UsIHVwZGF0ZUluZGV4OiAwIH1cbiAgICB0aGlzLnNjcmVlbkdyb3VwSW5mbyA9ICcnXG5cbiAgICBpZiAodGhpcy5pc01hYygpKSB7XG4gICAgICB0aGlzLmtleUJpbmRpbmdzID0ge1xuICAgICAgICBkZWxldGU6IHRoaXMuZGVsZXRlU2VsZWN0ZWRJdGVtLFxuICAgICAgICBiYWNrc3BhY2U6IHRoaXMuZGVsZXRlU2VsZWN0ZWRJdGVtLFxuICAgICAgICAnY29tbWFuZCtrZXljJzogdGhpcy5jb3B5SXRlbVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmtleUJpbmRpbmdzID0ge1xuICAgICAgICBkZWxldGU6IHRoaXMuZGVsZXRlU2VsZWN0ZWRJdGVtLFxuICAgICAgICBiYWNrc3BhY2U6IHRoaXMuZGVsZXRlU2VsZWN0ZWRJdGVtLFxuICAgICAgICAnY3RybCtrZXljJzogdGhpcy5jb3B5SXRlbVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpOiB2b2lkIHtcbiAgICBsZXQgYm91bmRhcnlFbGVtZW50XG4gICAgY29uc3QgaW5mbyA9IHRoaXMuc2NyZWVuR3JvdXBJbmZvLnNwbGl0KCc6JylcbiAgICBpZiAoaW5mby5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBsYXlvdXRJZCA9IGluZm9bMF1cbiAgICAgIGNvbnN0IGxheW91dEl0ZW1JZCA9IGluZm9bMV1cbiAgICAgIGJvdW5kYXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBkaXYuYnVpbGRlci1sYXlvdXQtaXRlbVtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW1JZH1cIl1gXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMubW9kaWZpZXJzID0gW1xuICAgICAge1xuICAgICAgICBuYW1lOiAncHJldmVudE92ZXJmbG93JyxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeUVsZW1lbnQgPz8gJ3ZpZXdwb3J0JyxcbiAgICAgICAgICBhbHRBeGlzOiB0cnVlIC8vIGFsbG93IHRoZSBwb3BwZXIgdG8gb3ZlcmxhcCBpdHMgcmVmZXJlbmNlIGVsZW1lbnQuXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdmbGlwJyxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeUVsZW1lbnQgPz8gJ3ZpZXdwb3J0JyxcbiAgICAgICAgICBmYWxsYmFja1BsYWNlbWVudHM6IGdldEZhbGxiYWNrUGxhY2VtZW50c01vZGlmaWVyKFsndG9wLXN0YXJ0JywgJ2JvdHRvbS1zdGFydCddLCB0cnVlKS5vcHRpb25zLmZhbGxiYWNrUGxhY2VtZW50c1xuICAgICAgICB9XG4gICAgICB9XG4gICAgXVxuICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWQ6IHRydWUgfSkgLy8gVXNlZCB0byB1cGRhdGUgdGhlIHRvb2xiYXIgd2hlbiB3aWRnZXQgaXMgZHJhZ2dlZCBmcm9tIHdpZGdldCBsaXN0XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFByb3BzICYgU3RhdGVUb1Byb3BzKTogdm9pZCB7XG4gICAgdGhpcy5zY3JvbGxJbnRvVmlldygpXG4gICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0ZWQgJiYgIXByZXZQcm9wcy5pc0Rlc2lnbk1vZGUgJiYgdGhpcy5wcm9wcy5pc0Rlc2lnbk1vZGUpIHtcbiAgICAgIC8vIHRoaXMucmVmIGlzIG5vdCB1bmRlZmluZWQgbm93LCBpdCdzIHRpbWUgdG8gc2hvdyB0aGUgdG9vbGJhclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZUluZGV4OiB0aGlzLnN0YXRlLnVwZGF0ZUluZGV4ICsgMSB9KVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZG9TY3JvbGwgKCk6IHZvaWQge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgZGl2LmV4Yi1ybmRbZGF0YS1sYXlvdXRpZD1cIiR7bGF5b3V0SWR9XCJdW2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtsYXlvdXRJdGVtLmlkfVwiXWBcbiAgICApXG4gICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnYXV0bycsIGJsb2NrOiAnY2VudGVyJyB9KVxuICAgIH1cbiAgfVxuXG4gIHNjcm9sbEludG9WaWV3ICgpOiB2b2lkIHtcbiAgICBjb25zdCB7IHNlbGVjdGVkLCBhdXRvU2Nyb2xsIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFzZWxlY3RlZCB8fCAhYXV0b1Njcm9sbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHsgbGF5b3V0SWQgfSA9IHRoaXMucHJvcHNcblxuICAgIGxldCB2aWV3Q2hhbmdlZCA9IGZhbHNlXG4gICAgbGV0IHNjcmVlbkNoYW5nZWQgPSBmYWxzZVxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcENvbmZpZ0FjdGlvbigpLmFwcENvbmZpZ1xuICAgIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cblxuICAgIGlmIChsYXlvdXRKc29uLnBhcmVudD8udHlwZSA9PT0gTGF5b3V0UGFyZW50VHlwZS5WaWV3KSB7XG4gICAgICBjb25zdCB2aWV3SnNvbiA9IGFwcENvbmZpZy52aWV3c1tsYXlvdXRKc29uLnBhcmVudC5pZF1cbiAgICAgIGlmICh2aWV3SnNvbj8ucGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgamltdUhpc3RvcnkuY2hhbmdlVmlldyh2aWV3SnNvbi5wYXJlbnQsIHZpZXdKc29uLmlkKVxuICAgICAgICB2aWV3Q2hhbmdlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxheW91dEpzb24ucGFyZW50Py50eXBlID09PSBMYXlvdXRQYXJlbnRUeXBlLlNjcmVlbikge1xuICAgICAgY29uc3Qgc2NyZWVuSnNvbiA9IGFwcENvbmZpZy5zY3JlZW5zW2xheW91dEpzb24ucGFyZW50LmlkXVxuICAgICAgaWYgKHNjcmVlbkpzb24/LnBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHNjcmVlbnMgPSBhcHBDb25maWcuc2NyZWVuR3JvdXBzW3NjcmVlbkpzb24ucGFyZW50XS5zY3JlZW5zXG4gICAgICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gc2NyZWVucy5pbmRleE9mKHNjcmVlbkpzb24uaWQpXG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zY3JlZW5Hcm91cE5hdkluZm9DaGFuZ2VkKHNjcmVlbkpzb24ucGFyZW50LCBhY3RpdmVJbmRleCwgdHJ1ZSkpXG4gICAgICAgIHNjcmVlbkNoYW5nZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdmlld0NoYW5nZWQgJiYgIXNjcmVlbkNoYW5nZWQpIHtcbiAgICAgIHRoaXMuZG9TY3JvbGwoKVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmRvU2Nyb2xsKClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZm9ybWF0TWVzc2FnZSA9IChpZDogc3RyaW5nLCB2YWx1ZXM/OiBhbnkpOiBzdHJpbmcgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLmludGwgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXNbaWRdIH0sIHZhbHVlcylcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRNZXNzYWdlc1tpZF1cbiAgfVxuXG4gIGdldFN0eWxlICgpOiBTZXJpYWxpemVkU3R5bGVzIHtcbiAgICBjb25zdCB7IGlzRnVuY3Rpb25hbFdpZGdldCwgaXNTZWN0aW9uLCBzZWxlY3RlZCwgaXNCbG9jaywgcm90YXRlID0gMCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGRlZmF1bHRDb2xvcjogc3RyaW5nID0gcG9saXNoZWQucmdiYSh0aGlzLnBhZ2VDb250ZXh0LmJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzMwMF0sIDAuNilcbiAgICBjb25zdCBob3ZlckNvbG9yID0gdGhpcy5wYWdlQ29udGV4dC5idWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs2MDBdXG4gICAgY29uc3Qgc2VsZWN0ZWRDb2xvciA9IGhvdmVyQ29sb3JcbiAgICBjb25zdCBvdXRsaW5lU3R5bGUgPSAoIWlzRnVuY3Rpb25hbFdpZGdldCB8fCBpc1NlY3Rpb24pID8gJ2Rhc2hlZCcgOiAnc29saWQnXG5cbiAgICByZXR1cm4gY3NzYFxuICAgICAgLiR7R0xPQkFMX0g1X0RSQUdHSU5HX0NMQVNTX05BTUV9ICYsXG4gICAgICAuJHtHTE9CQUxfRFJBR0dJTkdfQ0xBU1NfTkFNRX0gJiB7XG4gICAgICAgID4gLmFjdGlvbi1hcmVhIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgPiBkaXYuc2VsZWN0ZWQtdGlwIHtcbiAgICAgICAgICAudGlwLWNvbnRlbnQge1xuICAgICAgICAgICAgb3V0bGluZS1jb2xvcjogJHtkZWZhdWx0Q29sb3J9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0cmFuc2Zvcm06ICR7cm90YXRlID4gMCB8fCByb3RhdGUgPCAwID8gYHJvdGF0ZVooJHtyb3RhdGV9ZGVnKWAgOiAnJ307XG4gICAgICBwYWRkaW5nOiBpbmhlcml0O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbGVmdDogMDtcbiAgICAgIGJvdHRvbTogMDtcbiAgICAgIHRvcDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgei1pbmRleDogJHtzZWxlY3RlZCA/IExheW91dFpJbmRleC5IYW5kbGVyVG9vbHMgOiAnYXV0byd9O1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgICAgICYgPiBkaXYuc2VsZWN0ZWQtdGlwIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHBhZGRpbmc6IGluaGVyaXQ7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgLnRpcC1jb250ZW50IHtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMXB4O1xuICAgICAgICAgICY6YWZ0ZXIge1xuICAgICAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIG91dGxpbmU6ICR7aXNCbG9jayAmJiAhc2VsZWN0ZWQgPyAnbm9uZScgOiBgMXB4ICR7b3V0bGluZVN0eWxlfSAke2RlZmF1bHRDb2xvcn1gfTtcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgb3V0bGluZS1jb2xvcjogJHshaXNGdW5jdGlvbmFsV2lkZ2V0IHx8IGlzU2VjdGlvbiA/IGRlZmF1bHRDb2xvciA6ICd0cmFuc3BhcmVudCd9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuZXhiLXJuZC5zZWxlY3RlZCA+ICYgPiBkaXYuc2VsZWN0ZWQtdGlwIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIC50aXAtY29udGVudCB7XG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBvdXRsaW5lLWNvbG9yOiAke3NlbGVjdGVkQ29sb3J9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmID4gLmFjdGlvbi1hcmVhIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAuaGFuZGxlIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IGFsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAubG9jay1sYXlvdXQtdGlwIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHt0aGlzLnBhZ2VDb250ZXh0LmJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzEwMF19O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoaXMucGFnZUNvbnRleHQuYnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzcwMF19O1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggMCByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogLTEwcHg7XG4gICAgICAgIHRvcDogLTEwcHg7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGlzTWFjID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiB3aW5kb3cuamltdVVBPy5vcz8ubmFtZSA9PT0gJ21hY09TJ1xuICB9XG5cbiAgZ2V0S2V5Ym9hcmRDb21wb25lbnQgKCk6IEpTWC5FbGVtZW50IHtcbiAgICByZXR1cm4gPEtleWJvYXJkIGJpbmRpbmdzPXt0aGlzLmtleUJpbmRpbmdzfSAvPlxuICB9XG5cbiAgY29weUl0ZW0gPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSwgbG9ja0xheW91dCB9ID0gdGhpcy5wcm9wc1xuXG4gICAgaWYgKCFsb2NrTGF5b3V0KSB7XG4gICAgICBjb25zdCByZWN0ID0gdGhpcy5yZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGNvbnN0IHdpZHRoID0gcmVjdC53aWR0aFxuICAgICAgY29uc3QgaGVpZ2h0ID0gcmVjdC5oZWlnaHRcblxuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChcbiAgICAgICAgYXBwQWN0aW9ucy5jbGlwYm9hcmRDaGFuZ2VkKHtcbiAgICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgZGVsZXRlU2VsZWN0ZWRJdGVtID0gKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHsgc2VsZWN0ZWQsIGxheW91dElkLCBsYXlvdXRJdGVtLCBsb2NrTGF5b3V0LCBpc0Z1bmN0aW9uYWxXaWRnZXQsIGlzRGVzaWduTW9kZSB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghc2VsZWN0ZWQgfHwgIWlzRGVzaWduTW9kZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gb25seSBub3JtYWwgd2lkZ2V0cyBjYW4gZGUgZGVsZXRlZCBpbiBsb2NrIGxheW91dCBtb2RlXG4gICAgaWYgKCFsb2NrTGF5b3V0IHx8IGlzRnVuY3Rpb25hbFdpZGdldCkge1xuICAgICAgY29uc3QgbGF5b3V0SW5mbyA9IHtcbiAgICAgICAgbGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZFxuICAgICAgfVxuICAgICAgYXBwQnVpbGRlclN5bmMucHVibGlzaENvbmZpcm1EZWxldGVUb0FwcChsYXlvdXRJbmZvKVxuICAgIH1cbiAgfVxuXG4gIGlzUmVzaXphYmxlICgpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IHJlc2l6YWJsZSA9IHRydWUsIHNlbGVjdGVkIH0gPSB0aGlzLnByb3BzXG4gICAgcmV0dXJuIHNlbGVjdGVkICYmICF0aGlzLnBhZ2VDb250ZXh0LnZpZXdPbmx5ICYmICF0aGlzLnByb3BzLmxvY2tMYXlvdXQgJiYgcmVzaXphYmxlXG4gIH1cblxuICBzaG93VG9vbGJhciAoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBmb3JiaWRUb29sYmFyLCBzZWxlY3RlZCB9ID0gdGhpcy5wcm9wc1xuICAgIHJldHVybiAhZm9yYmlkVG9vbGJhciAmJiAhdGhpcy5wYWdlQ29udGV4dC52aWV3T25seSAmJiBzZWxlY3RlZFxuICB9XG5cbiAgcmVuZGVyICgpOiBKU1guRWxlbWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTY3JlZW5Hcm91cENvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsoaW5mbykgPT4ge1xuICAgICAgICAgIHRoaXMuc2NyZWVuR3JvdXBJbmZvID0gaW5mb1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8UGFnZUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgICAgIHsocGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VDb250ZXh0ID0gcGFnZUNvbnRleHRcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuaXNEZXNpZ25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgICAgICAgICAgIGxheW91dEl0ZW0sXG4gICAgICAgICAgICAgICAgICByZXNpemFibGUgPSB0cnVlLFxuICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkLFxuICAgICAgICAgICAgICAgICAgdG9vbEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgc2hvd0RlZmF1bHRUb29scyxcbiAgICAgICAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICAgICAgICB0b3AsXG4gICAgICAgICAgICAgICAgICByaWdodCxcbiAgICAgICAgICAgICAgICAgIGJvdHRvbSxcbiAgICAgICAgICAgICAgICAgIHJvdGF0ZVxuICAgICAgICAgICAgICAgIH0gPSB0aGlzLnByb3BzXG5cbiAgICAgICAgICAgICAgICBjb25zdCBsb2NrQkJveCA9ICFkcmFnZ2FibGUgJiYgIXJlc2l6YWJsZVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J3NlbGVjdC13cmFwcGVyJ1xuICAgICAgICAgICAgICAgICAgICByZWY9eyhlbCkgPT4gKHRoaXMucmVmID0gZWwpfVxuICAgICAgICAgICAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzZWxlY3Qtd3JhcHBlcicsIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgICAgICAgICAgICAgICAnbm8tZW1iZWQtbGF5b3V0JzogIXRoaXMucHJvcHMuaGFzRW1iZWRkZWRMYXlvdXRcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHshcGFnZUNvbnRleHQudmlld09ubHkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZWxlY3RlZC10aXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpcC1jb250ZW50JyAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zaG93VG9vbGJhcigpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8TGF5b3V0SXRlbVRvb2xiYXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dEl0ZW09e2xheW91dEl0ZW19XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZFbGVtZW50PXt0aGlzLnJlZn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVycz17dGhpcy5tb2RpZmllcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyVGhlbWU9e3RoaXMucGFnZUNvbnRleHQuYnVpbGRlclRoZW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5mb3JtYXRNZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbEl0ZW1zPXt0b29sSXRlbXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RGVmYXVsdFRvb2xzPXtzaG93RGVmYXVsdFRvb2xzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLmlzUmVzaXphYmxlKCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxSZXNpemVIYW5kbGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdD17bGVmdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0PXtyaWdodH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcD17dG9wfVxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tPXtib3R0b219XG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbj17cm90YXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlclRoZW1lPXtwYWdlQ29udGV4dC5idWlsZGVyVGhlbWV9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge2xvY2tCQm94ICYmIHNlbGVjdGVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9jay1sYXlvdXQtdGlwIHJvdW5kZWQtY2lyY2xlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMb2NrT3V0bGluZWQgc2l6ZT0ncycgY29sb3I9e3BhZ2VDb250ZXh0LmJ1aWxkZXJUaGVtZS5jb2xvcnMuYmxhY2t9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZCAmJiB0aGlzLmdldEtleWJvYXJkQ29tcG9uZW50KCl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA8L1BhZ2VDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICAgIClcbiAgICAgICAgfX1cbiAgICAgIDwvU2NyZWVuR3JvdXBDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufVxuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHM6IChzdGF0ZTogSU1TdGF0ZSwgcHJvcHM6IFByb3BzKSA9PiBTdGF0ZVRvUHJvcHMgPSBjcmVhdGVTZWxlY3RvcihbXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYXBwQ29uZmlnPy5mb3JCdWlsZGVyQXR0cmlidXRlcz8ubG9ja0xheW91dCA/PyBmYWxzZSxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBSdW50aW1lSW5mby5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnbixcbiAgKHN0YXRlOiBJTVN0YXRlLCBwcm9wczogUHJvcHMpID0+IHByb3BzLmlzU2VjdGlvbiA/IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5zZWN0aW9uTmF2SW5mb3M/Lltwcm9wcy5sYXlvdXRJdGVtLnNlY3Rpb25JZF0gOiBudWxsXG5dLCAobG9ja0xheW91dCwgaXNEZXNpZ25Nb2RlLCBzZWN0aW9uTmF2SW5mbykgPT4gKHsgbG9ja0xheW91dCwgaXNEZXNpZ25Nb2RlLCBzZWN0aW9uTmF2SW5mbyB9KSlcblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9Qcm9wcywgdW5rbm93biwgUHJvcHM+KG1hcFN0YXRlVG9Qcm9wcykoaW5qZWN0SW50bChTZWxlY3RXcmFwcGVyKSlcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuXG5jb25zdCBzaXplID0gOVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgd2lkdGg6ICR7c2l6ZX1weDtcbiAgaGVpZ2h0OiAke3NpemV9cHg7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5gXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHBvczogJ3RsJyB8ICd0cicgfCAnYmwnIHwgJ2JyJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU2hhcGVMIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBwb3MgfSA9IHByb3BzXG4gIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4oKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnN0IHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gPz8gMVxuICAgIHJlZi5jdXJyZW50LndpZHRoID0gc2l6ZSAqIHJhdGlvXG4gICAgcmVmLmN1cnJlbnQuaGVpZ2h0ID0gc2l6ZSAqIHJhdGlvXG4gICAgY29uc3QgY3R4ID0gcmVmLmN1cnJlbnQuZ2V0Q29udGV4dCgnMmQnKVxuXG4gICAgaWYgKCFjdHgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGN0eC5zY2FsZShyYXRpbywgcmF0aW8pXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJyM0NDQnXG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJ1xuICAgIGN0eC5saW5lV2lkdGggPSAyXG5cbiAgICBpZiAodXRpbHMuaXNSVEwoKSkge1xuICAgICAgaWYgKHBvcyA9PT0gJ3RsJykge1xuICAgICAgICBjdHgudHJhbnNsYXRlKHNpemUsIDApXG4gICAgICAgIGN0eC5yb3RhdGUoTWF0aC5QSSAvIDIpXG4gICAgICB9XG4gICAgICBpZiAocG9zID09PSAnYnInKSB7XG4gICAgICAgIGN0eC50cmFuc2xhdGUoMCwgc2l6ZSlcbiAgICAgICAgY3R4LnJvdGF0ZSgtTWF0aC5QSSAvIDIpXG4gICAgICB9XG4gICAgICBpZiAocG9zID09PSAnYmwnKSB7XG4gICAgICAgIGN0eC50cmFuc2xhdGUoc2l6ZSwgc2l6ZSlcbiAgICAgICAgY3R4LnJvdGF0ZShNYXRoLlBJKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocG9zID09PSAndHInKSB7XG4gICAgICAgIGN0eC50cmFuc2xhdGUoc2l6ZSwgMClcbiAgICAgICAgY3R4LnJvdGF0ZShNYXRoLlBJIC8gMilcbiAgICAgIH1cbiAgICAgIGlmIChwb3MgPT09ICdicicpIHtcbiAgICAgICAgY3R4LnRyYW5zbGF0ZShzaXplLCBzaXplKVxuICAgICAgICBjdHgucm90YXRlKE1hdGguUEkpXG4gICAgICB9XG4gICAgICBpZiAocG9zID09PSAnYmwnKSB7XG4gICAgICAgIGN0eC50cmFuc2xhdGUoMCwgc2l6ZSlcbiAgICAgICAgY3R4LnJvdGF0ZSgtTWF0aC5QSSAvIDIpXG4gICAgICB9XG4gICAgfVxuICAgIGN0eC5iZWdpblBhdGgoKVxuICAgIGN0eC5tb3ZlVG8oMSwgMSlcbiAgICBjdHgubGluZVRvKHNpemUgLSAxLCAxKVxuICAgIGN0eC5saW5lVG8oc2l6ZSAtIDEsIHNpemUgLyAzKVxuICAgIGN0eC5saW5lVG8oc2l6ZSAvIDMsIHNpemUgLyAzKVxuICAgIGN0eC5saW5lVG8oc2l6ZSAvIDMsIHNpemUgLSAxKVxuICAgIGN0eC5saW5lVG8oMSwgc2l6ZSAtIDEpXG4gICAgY3R4LmNsb3NlUGF0aCgpXG4gICAgY3R4LnN0cm9rZSgpXG4gICAgY3R4LmZpbGwoKVxuICB9KVxuXG4gIHJldHVybiA8Y2FudmFzIGNzcz17c3R5bGV9IHJlZj17cmVmfT48L2NhbnZhcz5cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcblxuY29uc3QgbG9uZyA9IDE2XG5jb25zdCBzaG9ydCA9IDRcblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5gXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRpcmVjdGlvbjogJ2gnIHwgJ3YnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTaGFwZVJlY3QgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IGRpcmVjdGlvbiB9ID0gcHJvcHNcbiAgY29uc3QgcmVmID0gUmVhY3QudXNlUmVmPEhUTUxDYW52YXNFbGVtZW50PigpXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgY29uc3QgcmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA/PyAxXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2gnKSB7XG4gICAgICByZWYuY3VycmVudC53aWR0aCA9IGxvbmcgKiByYXRpb1xuICAgICAgcmVmLmN1cnJlbnQuaGVpZ2h0ID0gc2hvcnQgKiByYXRpb1xuICAgIH0gZWxzZSB7XG4gICAgICByZWYuY3VycmVudC53aWR0aCA9IHNob3J0ICogcmF0aW9cbiAgICAgIHJlZi5jdXJyZW50LmhlaWdodCA9IGxvbmcgKiByYXRpb1xuICAgIH1cbiAgICBjb25zdCBjdHggPSByZWYuY3VycmVudC5nZXRDb250ZXh0KCcyZCcpXG5cbiAgICBpZiAoIWN0eCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY3R4LnNjYWxlKHJhdGlvLCByYXRpbylcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzQ0NCdcbiAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnXG4gICAgY3R4LmxpbmVXaWR0aCA9IDJcblxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdoJykge1xuICAgICAgY3R4LnJlY3QoMSwgMSwgbG9uZyAtIDIsIHNob3J0IC0gMilcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LnJlY3QoMSwgMSwgc2hvcnQgLSAyLCBsb25nIC0gMilcbiAgICB9XG5cbiAgICBjdHguc3Ryb2tlKClcbiAgICBjdHguZmlsbCgpXG4gIH0pXG5cbiAgcmV0dXJuIDxjYW52YXMgY3NzPXtzdHlsZX0gcmVmPXtyZWZ9PjwvY2FudmFzPlxufVxuIiwiaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyB3aXRoQnVpbGRlclRoZW1lIH0gZnJvbSAnamltdS10aGVtZSdcblxuZXhwb3J0IGNvbnN0IFRoZW1lZFRvb2x0aXAgPSB3aXRoQnVpbGRlclRoZW1lKFRvb2x0aXApXG4iLCJpbXBvcnQgeyBSZWFjdCwgdHlwZSBJTVRoZW1lVmFyaWFibGVzLCB0eXBlIElNTGF5b3V0SXRlbUpzb24gfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBUb29sYmFyQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe30pXG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbGJhckNvbnRleHRQcm9wcyB7XG4gIGFjdGl2ZUl0ZW0/OiBzdHJpbmdcbiAgdG9nZ2xlT24/OiBib29sZWFuXG4gIGxheW91dElkOiBzdHJpbmdcbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvblxuICBwYXJlbnRSZWY6IEhUTUxFbGVtZW50XG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4gIGlzTG9ja0xheW91dDogYm9vbGVhblxuICBvbkl0ZW1DbGljazogKHZhbHVlOiBzdHJpbmcsIHRvZ2dsZU9uPzogYm9vbGVhbikgPT4gdm9pZFxuICBvbkl0ZW1VblNlbGVjdGVkOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZywgdmFsdWVzPzogYW55KSA9PiBzdHJpbmdcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCBsb2Rhc2ggfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uLCBEcm9wZG93biwgRHJvcGRvd25CdXR0b24sIERyb3Bkb3duTWVudSwgVG9vbHRpcCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBUaGVtZTJHbG9iYWxTdHlsZUNsYXNzTmFtZSB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgeyB0eXBlIFRvb2xJdGVtQ29uZmlnLCB0eXBlIFN0YXRlVG9MYXlvdXRQcm9wcyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IHsgVG9vbGJhckl0ZW0sIERFRkFVTFRfSUNPTl9TSVpFIH0gZnJvbSAnLi90b29sYmFyLWl0ZW0nXG5pbXBvcnQgeyBUb29sYmFyQ29udGV4dCwgdHlwZSBUb29sYmFyQ29udGV4dFByb3BzIH0gZnJvbSAnLi90b29sYmFyLWNvbnRleHQnXG5pbXBvcnQgeyBUaGVtZWRUb29sdGlwIH0gZnJvbSAnLi90aGVtZS10b29sdGlwJ1xuaW1wb3J0IHsgdXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5cbmNvbnN0IG5vQWN0aW9uID0gKCkgPT4geyB9XG5cbmNvbnN0IFRoZVRvb2x0aXAgPSB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciA/IFRoZW1lZFRvb2x0aXAgOiBUb29sdGlwXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHVpZDogc3RyaW5nXG4gIHRvb2xzOiBUb29sSXRlbUNvbmZpZ1tdXG59XG5cbmV4cG9ydCBjbGFzcyBUb29sYmFyR3JvdXAgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzPiB7XG4gIGNvbnRleHRQcm9wczogVG9vbGJhckNvbnRleHRQcm9wc1xuICBkcm9wZG93bkJ0blJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxCdXR0b25FbGVtZW50PlxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuZHJvcGRvd25CdG5SZWYgPSBSZWFjdC5jcmVhdGVSZWYoKVxuICAgIHV0aWxzLmF1dG9CaW5kSGFuZGxlcnModGhpcywgWyd0b2dnbGVQb3BUb29sSXRlbXMnLCAnb25JdGVtQ2xpY2snXSlcbiAgfVxuXG4gIGdldEJhc2VTdHlsZSAoKSB7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5jb250ZXh0UHJvcHNcbiAgICByZXR1cm4gY3NzYFxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbMzAwXX07XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzUwMF19ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgZ2V0VmFsdWUgKHRhcmdldCwgcHJvcHMpIHtcbiAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHRhcmdldChwcm9wcylcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgdG9nZ2xlUG9wVG9vbEl0ZW1zIChlPzogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pIHtcbiAgICBpZiAoZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgICB0aGlzLmNvbnRleHRQcm9wcy5vbkl0ZW1DbGljayh0aGlzLnByb3BzLnVpZClcbiAgfVxuXG4gIG9uSXRlbUNsaWNrICh0b29sQ29uZmlnOiBUb29sSXRlbUNvbmZpZywgcHJvcHMpIHtcbiAgICBjb25zdCB7IHBhcmVudFJlZiB9ID0gdGhpcy5jb250ZXh0UHJvcHNcbiAgICB0b29sQ29uZmlnLm9uQ2xpY2soe1xuICAgICAgLi4ucHJvcHMsXG4gICAgICBjbGllbnRSZWN0OiBwYXJlbnRSZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB9KVxuICAgIC8vIGZvY3VzIHRoZSBkcm9wIGRvd24gYnV0dG9uIGlmIGFueSBpdGVtIGlzIGNsaWNrZWRcbiAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgdGhpcy5kcm9wZG93bkJ0blJlZi5jdXJyZW50LmZvY3VzKClcbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlVG9vbEl0ZW0gKHRvb2xDb25maWc6IFRvb2xJdGVtQ29uZmlnLCBwcm9wczogU3RhdGVUb0xheW91dFByb3BzLCBpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKCF0b29sQ29uZmlnLm9uQ2xpY2sgJiYgIXRvb2xDb25maWcuc2VwZXJhdG9yKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPFRvb2xiYXJJdGVtXG4gICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgIHVpZD17YCR7dGhpcy5wcm9wcy51aWR9XyR7aW5kZXggKyAxfWB9XG4gICAgICAgIGlzSW5Hcm91cFxuICAgICAgICB7Li4udG9vbENvbmZpZ31cbiAgICAgICAgb25DbGljaz17KCkgPT4geyB0aGlzLm9uSXRlbUNsaWNrKHRvb2xDb25maWcsIHByb3BzKSB9fVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBnZXRHcm91cE1lbnUgKHNlbGVjdGVkVG9vbDogVG9vbEl0ZW1Db25maWcsIHZpc2libGVUb29sczogVG9vbEl0ZW1Db25maWdbXSkge1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMuY29udGV4dFByb3BzXG4gICAgaWYgKHNlbGVjdGVkVG9vbCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEljb25cbiAgICAgICAgICByb3RhdGU9e3NlbGVjdGVkVG9vbC5yb3RhdGV9IGljb249e3NlbGVjdGVkVG9vbC5pY29ufVxuICAgICAgICAgIHNpemU9e3NlbGVjdGVkVG9vbC5zaXplIHx8IERFRkFVTFRfSUNPTl9TSVpFfSBjb2xvcj17dGhlbWUuY29sb3JzLmJsYWNrfVxuICAgICAgICAvPlxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodmlzaWJsZVRvb2xzWzBdLmljb24pIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxJY29uXG4gICAgICAgICAgaWNvbj17dmlzaWJsZVRvb2xzWzBdLmljb259XG4gICAgICAgICAgc2l6ZT17dmlzaWJsZVRvb2xzWzBdLnNpemUgfHwgREVGQVVMVF9JQ09OX1NJWkV9IGNvbG9yPXt0aGVtZS5jb2xvcnMuYmxhY2t9XG4gICAgICAgIC8+XG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8VG9vbGJhckl0ZW1cbiAgICAgICAgdWlkPXtgJHt0aGlzLnByb3BzLnVpZH1fMGB9XG4gICAgICAgIG9uQ2xpY2s9e25vQWN0aW9ufVxuICAgICAgICB7Li4udmlzaWJsZVRvb2xzWzBdfVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBoYW5kbGVEb3VibGVDbGljayAoZTogUmVhY3QuTW91c2VFdmVudCkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIHRvb2x0aXBTdHlsZSAoKSB7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5jb250ZXh0UHJvcHNcbiAgICByZXR1cm4gY3NzYFxuICAgICAgYm9yZGVyOiBub25lO1xuXG4gICAgICAudG9vbHRpcCB7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ibGFja307XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNjAwXX07XG4gICAgICAgIGJvcmRlci1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFszMDBdfTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgdG9vbHMsIHVpZCB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghdG9vbHMgfHwgdG9vbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8VG9vbGJhckNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsocHJvcHM6IFN0YXRlVG9MYXlvdXRQcm9wcyAmIFRvb2xiYXJDb250ZXh0UHJvcHMpID0+IHtcbiAgICAgICAgICB0aGlzLmNvbnRleHRQcm9wcyA9IHByb3BzXG4gICAgICAgICAgY29uc3QgeyB2aXNpYmxlOiByb290VmlzaWJsZSwgY2FyZXQgPSB0cnVlLCB0aXRsZSB9ID0gdG9vbHNbMF1cbiAgICAgICAgICBjb25zdCBpc1Jvb3RWaXNpYmxlID0gdGhpcy5nZXRWYWx1ZShyb290VmlzaWJsZSwgcHJvcHMpXG4gICAgICAgICAgaWYgKHJvb3RWaXNpYmxlICE9PSB1bmRlZmluZWQgJiYgIWlzUm9vdFZpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHZpc2libGVUb29scyA9IHRvb2xzLmZpbHRlcigodG9vbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB2aXNpYmxlIH0gPSB0b29sXG4gICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLmdldFZhbHVlKHZpc2libGUsIHByb3BzKVxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2aXNpYmxlID09PSAndW5kZWZpbmVkJyB8fCBpc1Zpc2libGVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmICh2aXNpYmxlVG9vbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodmlzaWJsZVRvb2xzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIDxUb29sYmFySXRlbSB1aWQ9e2Ake3VpZH1fMGB9IHsuLi52aXNpYmxlVG9vbHNbMF19IC8+XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBzZWxlY3RlZFRvb2xcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICB2aXNpYmxlVG9vbHMuc29tZSgodG9vbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBjaGVja2VkIH0gPSB0b29sXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRWYWx1ZShjaGVja2VkLCBwcm9wcykpIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRUb29sID0gdG9vbFxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgbGV0IHRvb2x0aXAgPSAnJ1xuICAgICAgICAgIGlmICh0eXBlb2YgdGl0bGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRvb2x0aXAgPSB0aXRsZShwcm9wcyBhcyBhbnkpXG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0b29sdGlwID0gdGl0bGVcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0b29sYmFyLWdyb3VwJyBjc3M9e3RoaXMuZ2V0QmFzZVN0eWxlKCl9PlxuICAgICAgICAgICAgICA8RHJvcGRvd25cbiAgICAgICAgICAgICAgICBkaXJlY3Rpb249J2Rvd24nXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjYXJldCA/ICdweC0xJyA6ICcnfVxuICAgICAgICAgICAgICAgIGlzT3Blbj17cHJvcHMudG9nZ2xlT24gJiYgcHJvcHMuYWN0aXZlSXRlbSA9PT0gdWlkfVxuICAgICAgICAgICAgICAgIHRvZ2dsZT17dGhpcy50b2dnbGVQb3BUb29sSXRlbXN9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VGhlVG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgdGl0bGU9e3Rvb2x0aXB9IGNzcz17dGhpcy50b29sdGlwU3R5bGUoKX0+XG4gICAgICAgICAgICAgICAgICA8RHJvcGRvd25CdXR0b24gaWNvbiBhcnJvdz17Y2FyZXR9IHR5cGU9J3RlcnRpYXJ5JyBzaXplPSdzbScgcmVmPXt0aGlzLmRyb3Bkb3duQnRuUmVmfSBjc3M9e1xuICAgICAgICAgICAgICAgICAgICBjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgLmNhcmV0LWljb24ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICR7cHJvcHMudGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s2MDBdfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAwLjI1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkRvdWJsZUNsaWNrPXt0aGlzLmhhbmRsZURvdWJsZUNsaWNrfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5nZXRHcm91cE1lbnUoc2VsZWN0ZWRUb29sLCB2aXNpYmxlVG9vbHMpfVxuICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bkJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L1RoZVRvb2x0aXA+XG4gICAgICAgICAgICAgICAgPERyb3Bkb3duTWVudSBjbGFzc05hbWU9e2BwLTAgJHt3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciA/IFRoZW1lMkdsb2JhbFN0eWxlQ2xhc3NOYW1lIDogJyd9YH0gY3NzPXtjc3NgbWluLXdpZHRoOiA1cmVtO2B9PlxuICAgICAgICAgICAgICAgICAge3Zpc2libGVUb29scy5tYXAoKHRvb2xDb25maWcsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9vbEl0ZW0odG9vbENvbmZpZywgcHJvcHMsIGluZGV4KVxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnU+XG4gICAgICAgICAgICAgIDwvRHJvcGRvd24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApXG4gICAgICAgIH19XG4gICAgICA8L1Rvb2xiYXJDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcywganN4LCBjc3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQb3BwZXIsIEljb24sIEJ1dHRvbiwgVG9vbHRpcCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyB0eXBlIFRvb2xJdGVtQ29uZmlnLCB0eXBlIFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgVG9vbGJhckNvbnRleHQsIHR5cGUgVG9vbGJhckNvbnRleHRQcm9wcyB9IGZyb20gJy4vdG9vbGJhci1jb250ZXh0J1xuaW1wb3J0IHsgVGhlbWVkVG9vbHRpcCB9IGZyb20gJy4vdGhlbWUtdG9vbHRpcCdcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfSUNPTl9TSVpFID0gMTZcbmNvbnN0IFRoZVRvb2x0aXAgPSB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciA/IFRoZW1lZFRvb2x0aXAgOiBUb29sdGlwXG5cbmNvbnN0IG1vZGlmaWVycyA9IFtcbiAge1xuICAgIG5hbWU6ICdmbGlwJyxcbiAgICBvcHRpb25zOiB7XG4gICAgICBmYWxsYmFja1BsYWNlbWVudHM6IFsndG9wJywgJ3JpZ2h0J11cbiAgICB9XG4gIH1cbl1cblxuZXhwb3J0IGNsYXNzIFRvb2xiYXJJdGVtIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxcblRvb2xJdGVtQ29uZmlnICYge1xuICB1aWQ6IHN0cmluZ1xuICBpc0luR3JvdXA/OiBib29sZWFuXG59PiB7XG4gIGNvbnRleHRQcm9wczogVG9vbGJhckNvbnRleHRQcm9wc1xuICByZWZlcmVuY2U6IEhUTUxCdXR0b25FbGVtZW50XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB1dGlscy5hdXRvQmluZEhhbmRsZXJzKHRoaXMsIFsnc2VsZWN0JywgJ2hhbmRsZU1vdXNlRW50ZXInLCAnaGFuZGxlTW91c2VMZWF2ZSddKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlICgpIHtcbiAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLmdldFZhbHVlKHRoaXMucHJvcHMudmlzaWJsZSwgdGhpcy5jb250ZXh0UHJvcHMpXG4gICAgY29uc3QgaXNEaXNhYmxlZCA9IHRoaXMuZ2V0VmFsdWUodGhpcy5wcm9wcy5kaXNhYmxlZCwgdGhpcy5jb250ZXh0UHJvcHMpXG4gICAgaWYgKCFpc1Zpc2libGUgfHwgaXNEaXNhYmxlZCkge1xuICAgICAgdGhpcy5jb250ZXh0UHJvcHMub25JdGVtVW5TZWxlY3RlZCh0aGlzLnByb3BzLnVpZClcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgdGhpcy5jb250ZXh0UHJvcHMub25JdGVtVW5TZWxlY3RlZCh0aGlzLnByb3BzLnVpZClcbiAgfVxuXG4gIHNlbGVjdCAoZTogUmVhY3QuTW91c2VFdmVudCkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBpZiAodGhpcy5wcm9wcy5vbkNsaWNrKSB7XG4gICAgICBjb25zdCB7IHBhcmVudFJlZiB9ID0gdGhpcy5jb250ZXh0UHJvcHNcbiAgICAgIHRoaXMucHJvcHMub25DbGljayhcbiAgICAgICAge1xuICAgICAgICAgIGxheW91dElkOiB0aGlzLmNvbnRleHRQcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgICBsYXlvdXRJdGVtOiB0aGlzLmNvbnRleHRQcm9wcy5sYXlvdXRJdGVtLFxuICAgICAgICAgIGNsaWVudFJlY3Q6IHBhcmVudFJlZiAmJiBwYXJlbnRSZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgfSxcbiAgICAgICAgZVxuICAgICAgKVxuICAgICAgdGhpcy5jb250ZXh0UHJvcHMub25JdGVtQ2xpY2sodGhpcy5wcm9wcy51aWQpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlRG91YmxlQ2xpY2sgKGU6IFJlYWN0Lk1vdXNlRXZlbnQpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICBoYW5kbGVNb3VzZUVudGVyIChlOiBSZWFjdC5Nb3VzZUV2ZW50KSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmICh0aGlzLnByb3BzLm9uTW91c2VFbnRlcikge1xuICAgICAgdGhpcy5wcm9wcy5vbk1vdXNlRW50ZXIoXG4gICAgICAgIHtcbiAgICAgICAgICBsYXlvdXRJZDogdGhpcy5jb250ZXh0UHJvcHMubGF5b3V0SWQsXG4gICAgICAgICAgbGF5b3V0SXRlbTogdGhpcy5jb250ZXh0UHJvcHMubGF5b3V0SXRlbSxcbiAgICAgICAgICBjbGllbnRSZWN0OiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGVcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBoYW5kbGVNb3VzZUxlYXZlIChlOiBSZWFjdC5Nb3VzZUV2ZW50KSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmICh0aGlzLnByb3BzLm9uTW91c2VMZWF2ZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbk1vdXNlTGVhdmUoXG4gICAgICAgIHtcbiAgICAgICAgICBsYXlvdXRJZDogdGhpcy5jb250ZXh0UHJvcHMubGF5b3V0SWQsXG4gICAgICAgICAgbGF5b3V0SXRlbTogdGhpcy5jb250ZXh0UHJvcHMubGF5b3V0SXRlbSxcbiAgICAgICAgICBjbGllbnRSZWN0OiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGVcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBnZXRWYWx1ZSAodGFyZ2V0LCBwcm9wcykge1xuICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0KHByb3BzKVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBnZXRTdHlsZSAoKSB7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5jb250ZXh0UHJvcHNcblxuICAgIHJldHVybiBjc3NgXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB3aWR0aDogMzJweDtcbiAgICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzMwMF19O1xuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs1MDBdfTtcbiAgICAgIH1cbiAgICAgICYuc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5fTtcbiAgICAgIH1cblxuICAgICAgJi5kaXNhYmxlZCxcbiAgICAgICYubm8tYWN0aW9uIHtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzMwMF19O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAmLmRpc2FibGVkIHtcbiAgICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLmppbXUtYnRuIHN2ZywgLnRvb2xiYXItbGFiZWwge1xuICAgICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbMjAwXX0gIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLm1zZyB7XG4gICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ibGFja307XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjMzcHg7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMCA4cHg7XG4gICAgICB9XG5cbiAgICAgIC50b29sYmFyLWdyb3VwICYge1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICB9XG5cbiAgICAgIC5wb3BwZXIge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbNDAwXX07XG4gICAgICB9XG5cbiAgICAgIC50b29sYmFyLWxhYmVsIHtcbiAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmJsYWNrfTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBzZXBhcmF0b3JTdHlsZSAoKSB7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5jb250ZXh0UHJvcHNcbiAgICBpZiAodGhpcy5wcm9wcy5pc0luR3JvdXApIHtcbiAgICAgIHJldHVybiBjc3NgXG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDFweDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs2MDBdfTtcbiAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgICAgYFxuICAgIH1cbiAgICByZXR1cm4gY3NzYFxuICAgICAgZGl2LnRvb2xiYXItaXRlbSArICYsXG4gICAgICBkaXYudG9vbGJhci1ncm91cCArICYge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB3aWR0aDogMXB4O1xuICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzYwMF19O1xuICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgIGBcbiAgfVxuXG4gIHRvb2x0aXBTdHlsZSAoKSB7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5jb250ZXh0UHJvcHNcbiAgICByZXR1cm4gY3NzYFxuICAgICAgYm9yZGVyOiBub25lO1xuXG4gICAgICAudG9vbHRpcCB7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ibGFja307XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNjAwXX07XG4gICAgICAgIGJvcmRlci1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFszMDBdfTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBjcmVhdGVCdXR0b24gKHsgdGV4dENvbnRlbnQsIGljb25Db250ZW50LCB0b29sdGlwLCBpc0Rpc2FibGVkLCBub0FjdGlvbiwgaXNDaGVja2VkLCByb3RhdGUsIGljb25TaXplLCBhdXRvRmxpcEljb24sIHJlZiB9KSB7XG4gICAgY29uc3QgdGl0bGUgPSB0ZXh0Q29udGVudCA/ICcnIDogdG9vbHRpcFxuICAgIGNvbnN0IHRpdGxlUHJvcHMgPSBpc0Rpc2FibGVkID8geyB0aXRsZSB9IDoge31cblxuICAgIGNvbnN0IGJ1dHRvbkNvbXBvbmVudCA9IDxCdXR0b25cbiAgICAgIGFyaWEtbGFiZWw9e3RleHRDb250ZW50IHx8IHRvb2x0aXB9XG4gICAgICByZWY9e3JlZn1cbiAgICAgIGNsYXNzTmFtZT0ncHgtMCB3LTEwMCB0ZXh0LWxlZnQnXG4gICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgIHNpemU9J3NtJ1xuICAgICAgaWNvbj17aWNvbkNvbnRlbnQgJiYgIXRleHRDb250ZW50fVxuICAgICAgcm9sZT0nbWVudWl0ZW0nXG4gICAgICBvbkNsaWNrPXtpc0Rpc2FibGVkIHx8IG5vQWN0aW9uID8gbnVsbCA6IHRoaXMuc2VsZWN0fVxuICAgICAgZGlzYWJsZWQ9e2lzRGlzYWJsZWR9XG4gICAgICBvbk1vdXNlRW50ZXI9e3RoaXMuaGFuZGxlTW91c2VFbnRlcn1cbiAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5oYW5kbGVNb3VzZUxlYXZlfVxuICAgICAgb25Eb3VibGVDbGljaz17dGhpcy5oYW5kbGVEb3VibGVDbGlja31cbiAgICAgIGRhdGEtZXh0bmFtZT17dGhpcy5wcm9wcy5leHROYW1lfVxuICAgICAgey4uLnRpdGxlUHJvcHN9XG4gICAgPlxuICAgICAge2ljb25Db250ZW50ICYmIChcbiAgICAgICAgPEljb25cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3Rvb2wtaXRlbS1pY29uJywgeyBjaGVja2VkOiBpc0NoZWNrZWQgfSl9XG4gICAgICAgICAgaWNvbj17aWNvbkNvbnRlbnR9XG4gICAgICAgICAgcm90YXRlPXtyb3RhdGV9XG4gICAgICAgICAgc2l6ZT17aWNvblNpemV9XG4gICAgICAgICAgY29sb3I9e3RoaXMuY29udGV4dFByb3BzLnRoZW1lLmNvbG9ycy5ibGFja31cbiAgICAgICAgICBhdXRvRmxpcD17YXV0b0ZsaXBJY29ufVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHt0ZXh0Q29udGVudCAmJiA8c3BhbiBjbGFzc05hbWU9J3Rvb2xiYXItbGFiZWwgdGV4dC1ub3dyYXAnPnt0ZXh0Q29udGVudH08L3NwYW4+fVxuICAgIDwvQnV0dG9uPlxuXG4gICAgaWYgKGlzRGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBidXR0b25Db21wb25lbnRcbiAgICB9XG4gICAgcmV0dXJuIDxUaGVUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyB0aXRsZT17dGl0bGV9IG1vZGlmaWVycz17bW9kaWZpZXJzfSBjc3M9e3RoaXMudG9vbHRpcFN0eWxlKCl9PlxuICAgICAge2J1dHRvbkNvbXBvbmVudH1cbiAgICA8L1RoZVRvb2x0aXA+XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGljb24sXG4gICAgICBhdXRvRmxpcEljb24sXG4gICAgICBsYWJlbCxcbiAgICAgIHNpemUsXG4gICAgICBjaGVja2VkLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICB2aXNpYmxlLFxuICAgICAgcm90YXRlLFxuICAgICAgc2V0dGluZ1BhbmVsLFxuICAgICAgdGl0bGUsXG4gICAgICB1aWQsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHNlcGVyYXRvclxuICAgIH0gPSB0aGlzLnByb3BzXG5cbiAgICBpZiAoc2VwZXJhdG9yKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VG9vbGJhckNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgeyhwcm9wczogU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyAmIFRvb2xiYXJDb250ZXh0UHJvcHMgJiB7IGxheW91dElkOiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0UHJvcHMgPSBwcm9wc1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9J3Rvb2xiYXJTZXBhcmF0b3InIGNzcz17dGhpcy5zZXBhcmF0b3JTdHlsZSgpfSAvPlxuICAgICAgICAgIH19XG4gICAgICAgIDwvVG9vbGJhckNvbnRleHQuQ29uc3VtZXI+XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3Qgbm9BY3Rpb24gPSB0aGlzLnByb3BzLm9uQ2xpY2sgPT0gbnVsbFxuXG4gICAgY29uc3QgaWNvblNpemUgPSBzaXplIHx8IERFRkFVTFRfSUNPTl9TSVpFXG5cbiAgICBjb25zdCBTZXR0aW5nUGFuZWwgPSBzZXR0aW5nUGFuZWxcblxuICAgIHJldHVybiAoXG4gICAgICA8VG9vbGJhckNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsocHJvcHM6IFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgJiBUb29sYmFyQ29udGV4dFByb3BzICYgeyBsYXlvdXRJZDogc3RyaW5nIH0pID0+IHtcbiAgICAgICAgICB0aGlzLmNvbnRleHRQcm9wcyA9IHByb3BzXG4gICAgICAgICAgaWYgKHdpZGdldElkICYmIHByb3BzLmxheW91dEl0ZW0ud2lkZ2V0SWQgIT09IHdpZGdldElkKSB7XG4gICAgICAgICAgICAvLyBUT0RPIC0gcHJldmVudCByZW5kZXJyaW5nIHRvb2xiYXIgaXRlbSBmb3IgdGhlIHByZXZpb3VzIHNlbGVjdGVkIHdpZGdldC5cbiAgICAgICAgICAgIC8vIFNob3VsZCBoYXZlIGJldHRlciBzb2x1dGlvblxuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHRvb2x0aXAgPSAnJ1xuICAgICAgICAgIGlmICh0eXBlb2YgdGl0bGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRvb2x0aXAgPSB0aXRsZShwcm9wcyBhcyBhbnkpXG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0b29sdGlwID0gdGl0bGVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBzaG93U2V0dGluZ1BhbmVsID0gc2V0dGluZ1BhbmVsICYmIHByb3BzLmFjdGl2ZUl0ZW0gPT09IHVpZCAmJiBwcm9wcy50b2dnbGVPblxuICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IHNob3dTZXR0aW5nUGFuZWwgfHwgdGhpcy5nZXRWYWx1ZShjaGVja2VkLCBwcm9wcylcbiAgICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gdGhpcy5nZXRWYWx1ZShkaXNhYmxlZCwgcHJvcHMpXG4gICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5nZXRWYWx1ZSh2aXNpYmxlLCBwcm9wcylcbiAgICAgICAgICBjb25zdCB0ZXh0Q29udGVudCA9IHRoaXMuZ2V0VmFsdWUobGFiZWwsIHByb3BzKVxuICAgICAgICAgIGNvbnN0IGljb25Db250ZW50ID0gdGhpcy5nZXRWYWx1ZShpY29uLCBwcm9wcylcbiAgICAgICAgICBpZiAodmlzaWJsZSAhPSBudWxsICYmICFpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd0b29sYmFyLWl0ZW0nLCBjbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogaXNDaGVja2VkLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgICAgICAgICAgICAgIG1zZzogdGV4dENvbnRlbnQsXG4gICAgICAgICAgICAgICAgJ25vLWFjdGlvbic6IG5vQWN0aW9uXG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgeyFTZXR0aW5nUGFuZWwgJiYgdGhpcy5jcmVhdGVCdXR0b24oeyB0ZXh0Q29udGVudCwgaWNvbkNvbnRlbnQsIHRvb2x0aXAsIGlzRGlzYWJsZWQsIG5vQWN0aW9uLCBpc0NoZWNrZWQsIHJvdGF0ZSwgaWNvblNpemUsIGF1dG9GbGlwSWNvbiwgcmVmOiBudWxsIH0pfVxuICAgICAgICAgICAgICB7U2V0dGluZ1BhbmVsICYmIChcbiAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5jcmVhdGVCdXR0b24oeyB0ZXh0Q29udGVudCwgaWNvbkNvbnRlbnQsIHRvb2x0aXAsIGlzRGlzYWJsZWQsIG5vQWN0aW9uLCBpc0NoZWNrZWQsIHJvdGF0ZSwgaWNvblNpemUsIGF1dG9GbGlwSWNvbiwgcmVmOiByZWYgPT4geyB0aGlzLnJlZmVyZW5jZSA9IHJlZiB9IH0pfVxuICAgICAgICAgICAgICAgICAgPFBvcHBlciBwbGFjZW1lbnQ9J2JvdHRvbS1zdGFydCcgcmVmZXJlbmNlPXt0aGlzLnJlZmVyZW5jZX0gb3Blbj17c2hvd1NldHRpbmdQYW5lbH0gZGlzYWJsZVBvcnRhbD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3Byb3BzLnRoZW1lLmNvbG9ycy53aGl0ZX07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZC1mbGV4J1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3Nob3dTZXR0aW5nUGFuZWwgJiYgPFNldHRpbmdQYW5lbCB7Li4ucHJvcHN9IC8+fVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvUG9wcGVyPlxuICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApXG4gICAgICAgIH19XG4gICAgICA8L1Rvb2xiYXJDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVRoZW1lVmFyaWFibGVzLCBqc3gsIGNzcywgdHlwZSBJTUxheW91dEl0ZW1Kc29uLCB0eXBlIExheW91dEl0ZW1Kc29uLCB0eXBlIElNU3RhdGUsIEJyb3dzZXJTaXplTW9kZSwgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgbW9yZU91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmcnXG5pbXBvcnQgeyBUaGVtZTJHbG9iYWxTdHlsZUNsYXNzTmFtZSB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgeyB0eXBlIFRvb2xJdGVtQ29uZmlnIH0gZnJvbSAnLi4vdHlwZXMnXG5pbXBvcnQgeyBUb29sYmFyQ29udGV4dCB9IGZyb20gJy4vdG9vbGJhci1jb250ZXh0J1xuaW1wb3J0IHsgVG9vbGJhckdyb3VwIH0gZnJvbSAnLi90b29sYmFyLWdyb3VwJ1xuaW1wb3J0IHsgVG9vbGJhckl0ZW0gfSBmcm9tICcuL3Rvb2xiYXItaXRlbSdcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgR0xPQkFMX0RSQUdHSU5HX0NMQVNTX05BTUUsIEdMT0JBTF9INV9EUkFHR0lOR19DTEFTU19OQU1FIH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS9kcmFnLWV2ZW50LWhhbmRsZXInXG5pbXBvcnQgeyBHTE9CQUxfUkVTSVpJTkdfQ0xBU1NfTkFNRSB9IGZyb20gJy4vaW50ZXJhY3RpdmUvcmVzaXplLWV2ZW50LWhhbmRsZXInXG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbGJhclByb3BzIHtcbiAgdG9vbHM6IEFycmF5PFRvb2xJdGVtQ29uZmlnIHwgVG9vbEl0ZW1Db25maWdbXT5cbiAgbGF5b3V0SWQ6IHN0cmluZ1xuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uIHwgTGF5b3V0SXRlbUpzb25cbiAgcGFyZW50UmVmOiBIVE1MRWxlbWVudFxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuICBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZywgdmFsdWVzPzogYW55KSA9PiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFN0YXRlVG9Qcm9wcyB7XG4gIGlzTG9ja0xheW91dDogYm9vbGVhblxufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBhY3RpdmVJdGVtPzogc3RyaW5nIC8vIFRoZSB0b29sYmFyIGl0ZW0gdGhhdCBpcyBjbGlja2VkIG1vc3QgcmVjZW50bHkuXG4gIHRvZ2dsZU9uPzogYm9vbGVhbiAvLyBzdGF0ZSBjb250cm9sIGZvciB0aGUgYWN0aXZlIGl0ZW1cbn1cbmNsYXNzIF9Ub29sYmFyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxUb29sYmFyUHJvcHMgJiBTdGF0ZVRvUHJvcHMsIFN0YXRlPiB7XG4gIHN0YXRlOiBTdGF0ZSA9IHtcbiAgICBhY3RpdmVJdGVtOiBudWxsXG4gIH1cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB1dGlscy5hdXRvQmluZEhhbmRsZXJzKHRoaXMsIFsnb25JdGVtQ2xpY2snLCAnb25JdGVtVW5TZWxlY3RlZCddKVxuICB9XG5cbiAgb25JdGVtQ2xpY2sgKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBsZXQgaXNPbiA9IHRoaXMuc3RhdGUudG9nZ2xlT25cbiAgICBpZiAodmFsdWUgPT09IHRoaXMuc3RhdGUuYWN0aXZlSXRlbSkge1xuICAgICAgaXNPbiA9ICFpc09uXG4gICAgfSBlbHNlIHtcbiAgICAgIGlzT24gPSB0cnVlXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYWN0aXZlSXRlbTogdmFsdWUsXG4gICAgICB0b2dnbGVPbjogaXNPblxuICAgIH0pXG4gIH1cblxuICBvbkl0ZW1VblNlbGVjdGVkICh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHZhbHVlID09PSB0aGlzLnN0YXRlLmFjdGl2ZUl0ZW0pIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhY3RpdmVJdGVtOiBudWxsLFxuICAgICAgICB0b2dnbGVPbjogZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZ2V0U3R5bGUgKCkge1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHNcbiAgICByZXR1cm4gY3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggMXB4IHJnYmEoMCwwLDAsMC4yMCk7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBtYXJnaW46IDVweCAwO1xuICAgICAgYmFja2dyb3VuZDogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFszMDBdfTtcblxuICAgICAgLnRvb2xiYXItaXRlbSwgLnRvb2xiYXItaXRlbSB7XG4gICAgICAgIC5qaW11LWJ0bjpmb2N1cywgLmppbXUtYnRuOmZvY3VzLXZpc2libGUge1xuICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLiR7R0xPQkFMX0RSQUdHSU5HX0NMQVNTX05BTUV9ICYsXG4gICAgICAuJHtHTE9CQUxfUkVTSVpJTkdfQ0xBU1NfTkFNRX0gJixcbiAgICAgIC4ke0dMT0JBTF9INV9EUkFHR0lOR19DTEFTU19OQU1FfSAmIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICByZU9yZ2FuaXplVG9vbHMgKCkge1xuICAgIGNvbnN0IHsgdG9vbHMgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBzaXplTW9kZSA9IHV0aWxzLmdldEN1cnJlbnRTaXplTW9kZSgpXG4gICAgaWYgKHNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGNvbnN0IGZpbHRlclRvb2xzID0gdG9vbHMuZmlsdGVyKHRvb2xJdGVtID0+IHtcbiAgICAgICAgbGV0IHRvb2xcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodG9vbEl0ZW0pKSB7XG4gICAgICAgICAgdG9vbCA9IHRvb2xJdGVtWzBdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9vbCA9IHRvb2xJdGVtXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB2aXNpYmxlLCBzZXBlcmF0b3IgPSBmYWxzZSB9ID0gdG9vbFxuICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB0eXBlb2YgdmlzaWJsZSA9PT0gJ2Z1bmN0aW9uJyA/IHZpc2libGUodGhpcy5wcm9wcykgOiB2aXNpYmxlXG4gICAgICAgIHJldHVybiAhc2VwZXJhdG9yICYmICh0eXBlb2YgdmlzaWJsZSA9PT0gJ3VuZGVmaW5lZCcgfHwgaXNWaXNpYmxlKVxuICAgICAgfSlcblxuICAgICAgaWYgKGZpbHRlclRvb2xzLmxlbmd0aCA+IDgpIHtcbiAgICAgICAgLy8gU21hbGwgc2l6ZSBhY2NlcHRzIDggdG9vbGJhciBpdGVtcyBhdCBtb3N0LlxuICAgICAgICBjb25zdCBuZXdUb29scyA9IHRvb2xzLnNsaWNlKDAsIDgpXG4gICAgICAgIGNvbnN0IGdyb3VwZWRUb29scyA9IHRvb2xzLnNsaWNlKDgpLm1hcCh0b29sID0+IHsgcmV0dXJuIHsgLi4udG9vbCwgbGFiZWw6ICh0b29sIGFzIFRvb2xJdGVtQ29uZmlnKS50aXRsZSB9IH0pXG4gICAgICAgIGNvbnN0IHRvb2wgPSBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWNvbjogbW9yZU91dGxpbmVkLFxuICAgICAgICAgICAgY2FyZXQ6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICAuLi5ncm91cGVkVG9vbHNcbiAgICAgICAgXVxuICAgICAgICBuZXdUb29scy5wdXNoKHRvb2wgYXMgVG9vbEl0ZW1Db25maWdbXSlcbiAgICAgICAgcmV0dXJuIG5ld1Rvb2xzXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0b29sc1xuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IHRvb2xzLCBpc0xvY2tMYXlvdXQgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoIXRvb2xzIHx8IHRvb2xzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBvcmdhbml6ZWRUb29scyA9IHRoaXMucmVPcmdhbml6ZVRvb2xzKClcblxuICAgIGNvbnN0IHsgYWN0aXZlSXRlbSwgdG9nZ2xlT24gfSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gKFxuICAgICAgPFRvb2xiYXJDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IC4uLnRoaXMucHJvcHMsIGFjdGl2ZUl0ZW0sIHRvZ2dsZU9uLCBvbkl0ZW1DbGljazogdGhpcy5vbkl0ZW1DbGljaywgb25JdGVtVW5TZWxlY3RlZDogdGhpcy5vbkl0ZW1VblNlbGVjdGVkLCBpc0xvY2tMYXlvdXQ6IGlzTG9ja0xheW91dCB9fT5cbiAgICAgICAgPGRpdiBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0gY2xhc3NOYW1lPXtgbGF5b3V0LWl0ZW0tdG9vbGJhciAke3dpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyID8gVGhlbWUyR2xvYmFsU3R5bGVDbGFzc05hbWUgOiAnJ31gfT5cbiAgICAgICAgICB7b3JnYW5pemVkVG9vbHMubWFwKCh0b29sQ29uZmlnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodG9vbENvbmZpZykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIDxUb29sYmFyR3JvdXAgdWlkPXtgJHtpbmRleH1gfSBrZXk9e2luZGV4fSB0b29scz17dG9vbENvbmZpZ30gLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiA8VG9vbGJhckl0ZW0gdWlkPXtgJHtpbmRleH1gfSBrZXk9e2luZGV4fSB7Li4udG9vbENvbmZpZ30gLz5cbiAgICAgICAgICB9KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1Rvb2xiYXJDb250ZXh0LlByb3ZpZGVyPlxuICAgIClcbiAgfVxufVxuXG5jb25zdCBtYXBGdW5jID0gY3JlYXRlU2VsZWN0b3IoXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYXBwQ29uZmlnPy5mb3JCdWlsZGVyQXR0cmlidXRlcz8ubG9ja0xheW91dCA/PyBmYWxzZSxcbiAgaXNMb2NrTGF5b3V0ID0+ICh7IGlzTG9ja0xheW91dCB9KVxuKVxuXG5leHBvcnQgY29uc3QgVG9vbGJhciA9IFJlYWN0UmVkdXguY29ubmVjdDxTdGF0ZVRvUHJvcHMsIHVua25vd24sIFRvb2xiYXJQcm9wcz4obWFwRnVuYykoXG4gIF9Ub29sYmFyXG4pXG4iLCJpbXBvcnQge1xuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICB0eXBlIExheW91dEluZm8sXG4gIHR5cGUgTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgQm91bmRpbmdCb3hcbn0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIERyb3BIYW5kbGVycyB7XG4gIGhhbmRsZURyYWdFbnRlcj86IChkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKSA9PiB2b2lkXG4gIGhhbmRsZURyYWdPdmVyPzogKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgZHJhZ2dpbmdFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LFxuICAgIGl0ZW1SZWN0OiBDbGllbnRSZWN0LFxuICAgIGNsaWVudFg6IG51bWJlcixcbiAgICBjbGllbnRZOiBudW1iZXIsXG4gICAgc3BlZWQ/OiBudW1iZXJcbiAgKSA9PiB2b2lkXG4gIGhhbmRsZURyYWdMZWF2ZT86IChkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKSA9PiB2b2lkXG4gIGhhbmRsZURyb3A/OiAoXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LFxuICAgIGl0ZW1SZWN0OiBDbGllbnRSZWN0XG4gICkgPT4gdm9pZFxuICBvblBhc3RlPzogKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdCxcbiAgICBpdGVtUmVjdDogQ2xpZW50UmVjdFxuICApID0+IHZvaWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMYXlvdXRJdGVtU2V0dGluZ1Byb3BzIHtcbiAgbGF5b3V0SWQ6IHN0cmluZ1xuICBsYXlvdXRJdGVtOiBMYXlvdXRJdGVtSnNvblxuICBhZGRpdGlvbmFsSW5mbz86IGFueVxuICBzdHlsZTogYW55XG4gIGlzTG9ja0xheW91dDogYm9vbGVhblxuICBzdXBwb3J0QXV0b1NpemU/OiBib29sZWFuXG4gIGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmdcbiAgb25TZXR0aW5nQ2hhbmdlOiAobGF5b3V0SW5mbzogTGF5b3V0SW5mbywgc2V0dGluZykgPT4gdm9pZFxuICBvblN0eWxlQ2hhbmdlOiAobGF5b3V0SW5mbzogTGF5b3V0SW5mbywgc3R5bGUpID0+IHZvaWRcbiAgb25Qb3NDaGFuZ2U6IChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCBiYm94OiBCb3VuZGluZ0JveCkgPT4gdm9pZFxufVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgbG9kYXNoLFxuICBnZXRBcHBTdG9yZSxcbiAgYXBwQWN0aW9ucyxcbiAgdHlwZSBXaWRnZXRKc29uXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5Ecm9wQXRQbGFjZWhvbGRlciAoZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyk6IGJvb2xlYW4ge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBpZiAoZHJhZ2dpbmdJdGVtLmxheW91dEluZm8pIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmICFsYXlvdXRJdGVtLndpZGdldElkKSB7IC8vIGNhbiBub3QgYmUgYSBwbGFjZWhvbGRlclxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH0gZWxzZSBpZiAoZHJhZ2dpbmdJdGVtLml0ZW1UeXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgZHJhZ2dpbmdJdGVtLm1hbmlmZXN0KSB7XG4gICAgaWYgKCFkcmFnZ2luZ0l0ZW0udXJpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyb3BBdFBsYWNlaG9sZGVyIChwbGFjZWhvbGRlckxheW91dEluZm86IExheW91dEluZm8sIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMpIHtcbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcblxuICBpZiAoZHJhZ2dpbmdJdGVtLmxheW91dEluZm8pIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gICAgYXBwQ29uZmlnQWN0aW9uLnJlbW92ZUxheW91dEl0ZW0oZHJhZ2dpbmdJdGVtLmxheW91dEluZm8sIGZhbHNlLCBmYWxzZSlcbiAgICBjb25zdCBzZXR0aW5nID0gbGF5b3V0SXRlbS5zZXR0aW5nXG4gICAgYXBwQ29uZmlnQWN0aW9uLmFkZENvbnRlbnRUb1BsYWNlaG9sZGVyKFxuICAgICAgcGxhY2Vob2xkZXJMYXlvdXRJbmZvLFxuICAgICAgbGF5b3V0SXRlbS50eXBlLFxuICAgICAgbGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgPyBsYXlvdXRJdGVtLndpZGdldElkIDogbGF5b3V0SXRlbS5zZWN0aW9uSWRcbiAgICApXG5cbiAgICBpZiAoc2V0dGluZz8ucGxhY2Vob2xkZXJTdHlsZSkge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICAgIHBsYWNlaG9sZGVyTGF5b3V0SW5mbyxcbiAgICAgICAgJ3NldHRpbmcnLFxuICAgICAgICBzZXR0aW5nLndpdGhvdXQoJ3BsYWNlaG9sZGVyU3R5bGUnKVxuICAgICAgKVxuICAgIH1cbiAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChcbiAgICAgICAgYXBwQWN0aW9ucy5sYXlvdXRDaGFuZ2VkKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIHBsYWNlaG9sZGVyTGF5b3V0SW5mbylcbiAgICAgIClcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGlmIChkcmFnZ2luZ0l0ZW0uaXRlbVR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCAmJiBkcmFnZ2luZ0l0ZW0udXJpKSB7XG4gICAgICBhZGRXaWRnZXRJblBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyTGF5b3V0SW5mbywgZHJhZ2dpbmdJdGVtKVxuICAgIH0gZWxzZSBpZiAoZHJhZ2dpbmdJdGVtLml0ZW1UeXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICBhZGRTZWN0aW9uSW5QbGFjZWhvbGRlcihwbGFjZWhvbGRlckxheW91dEluZm8pXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTZWN0aW9uSW5QbGFjZWhvbGRlciAocGxhY2Vob2xkZXJMYXlvdXRJbmZvOiBMYXlvdXRJbmZvKSB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gcGxhY2Vob2xkZXJMYXlvdXRJbmZvXG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IHNlY3Rpb25Kc29uID0gYXBwQ29uZmlnQWN0aW9uLmNyZWF0ZVNlY3Rpb24oKVxuXG4gIGFwcENvbmZpZ0FjdGlvbi5hZGRDb250ZW50VG9QbGFjZWhvbGRlcihwbGFjZWhvbGRlckxheW91dEluZm8sIExheW91dEl0ZW1UeXBlLlNlY3Rpb24sIHNlY3Rpb25Kc29uLmlkKVxuXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICBjb25zdCBzZXR0aW5nID0gbGF5b3V0SXRlbS5zZXR0aW5nXG4gIGlmIChzZXR0aW5nPy5wbGFjZWhvbGRlclN0eWxlKSB7XG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICBwbGFjZWhvbGRlckxheW91dEluZm8sXG4gICAgICAnc2V0dGluZycsXG4gICAgICBzZXR0aW5nLndpdGhvdXQoJ3BsYWNlaG9sZGVyU3R5bGUnKVxuICAgIClcbiAgfVxuICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goXG4gICAgICBhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywge1xuICAgICAgICBsYXlvdXRJZDogbGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbUlkXG4gICAgICB9KVxuICAgIClcbiAgfSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFdpZGdldEluUGxhY2Vob2xkZXIgKHBsYWNlaG9sZGVyTGF5b3V0SW5mbzogTGF5b3V0SW5mbywgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcykge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IHBsYWNlaG9sZGVyTGF5b3V0SW5mb1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuXG4gIGNvbnN0IHdpZGdldEpzb24gPSBhd2FpdCBhcHBDb25maWdBY3Rpb24uY3JlYXRlV2lkZ2V0KHsgdXJpOiBkcmFnZ2luZ0l0ZW0udXJpLCBpdGVtSWQ6IGRyYWdnaW5nSXRlbS5pdGVtSWQgfSBhcyBXaWRnZXRKc29uKVxuXG4gIGFwcENvbmZpZ0FjdGlvbi5hZGRDb250ZW50VG9QbGFjZWhvbGRlcihwbGFjZWhvbGRlckxheW91dEluZm8sIExheW91dEl0ZW1UeXBlLldpZGdldCwgd2lkZ2V0SnNvbi5pZClcblxuICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgY29uc3Qgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZ1xuICBpZiAoc2V0dGluZz8ucGxhY2Vob2xkZXJTdHlsZSkge1xuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogcGxhY2Vob2xkZXJMYXlvdXRJbmZvLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHBsYWNlaG9sZGVyTGF5b3V0SW5mby5sYXlvdXRJdGVtSWRcbiAgICAgIH0sXG4gICAgICAnc2V0dGluZycsXG4gICAgICBzZXR0aW5nLndpdGhvdXQoJ3BsYWNlaG9sZGVyU3R5bGUnKVxuICAgIClcbiAgfVxuICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goXG4gICAgICBhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywge1xuICAgICAgICBsYXlvdXRJZDogbGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbUlkXG4gICAgICB9KVxuICAgIClcbiAgfSlcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBwb2xpc2hlZCxcbiAgdHlwZSBJTVNpemVNb2RlTGF5b3V0SnNvbixcbiAgQnJvd3NlclNpemVNb2RlLFxuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICB0eXBlIElNVGhlbWVWYXJpYWJsZXMsXG4gIEltbXV0YWJsZSxcbiAgaW5qZWN0SW50bCxcbiAgdHlwZSBJbnRsU2hhcGUsXG4gIGdldEFwcFN0b3JlLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIExheW91dEl0ZW1UeXBlLFxuICBjcmVhdGVTZWxlY3RvclxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMb2FkaW5nLCBCdXR0b24sIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGFwcEJ1aWxkZXJTeW5jIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IFdpZGdldExpc3RQb3BwZXIgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7XG4gIFBhZ2VDb250ZXh0LFxuICB0eXBlIFBhZ2VDb250ZXh0UHJvcHMsXG4gIHR5cGUgTGF5b3V0SXRlbVByb3BzLFxuICBMYXlvdXRDb250ZXh0LFxuICB0eXBlIExheW91dENvbnRleHRQcm9wc1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBEcm9wQXJlYSB9IGZyb20gJy4vaW50ZXJhY3RpdmUvZHJvcGFyZWEtaG9vaydcbmltcG9ydCB7IFBsdXNPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3BsdXMnXG5pbXBvcnQgeyBUaGVtZWRUb29sdGlwIH0gZnJvbSAnLi90aGVtZS10b29sdGlwJ1xuaW1wb3J0IHsgY2FuRHJvcEF0UGxhY2Vob2xkZXIsIGRyb3BBdFBsYWNlaG9sZGVyLCBhZGRXaWRnZXRJblBsYWNlaG9sZGVyLCBhZGRTZWN0aW9uSW5QbGFjZWhvbGRlciB9IGZyb20gJy4vdXRpbCdcblxuY29uc3QgZHJvcGFyZWFTdHlsZSA9IGNzc2BcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBkaXNwbGF5OiBmbGV4O1xuICB6LWluZGV4OiAwO1xuYFxuXG5pbnRlcmZhY2UgSW50bFByb3BzIHtcbiAgaW50bDogSW50bFNoYXBlXG59XG5cbmludGVyZmFjZSBEaWFsb2dQcm9wcyB7XG4gIGN1cnJlbnREaWFsb2dJZDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIHNob3dNb2RhbDogYm9vbGVhblxuICBpc0J1c3k6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNsYXNzIF9XaWRnZXRQbGFjZWhvbGRlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVByb3BzICYgSW50bFByb3BzICYgRGlhbG9nUHJvcHMsIFN0YXRlPiB7XG4gIHJlZjogSFRNTEVsZW1lbnRcbiAgYnRuUmVmOiBIVE1MRWxlbWVudFxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRQcm9wc1xuICBsYXlvdXRDb250ZXh0OiBMYXlvdXRDb250ZXh0UHJvcHNcbiAgZmFrZUxheW91dHM6IElNU2l6ZU1vZGVMYXlvdXRKc29uXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5mYWtlTGF5b3V0cyA9IEltbXV0YWJsZSh7XG4gICAgICBbQnJvd3NlclNpemVNb2RlLkxhcmdlXTogYCR7dGhpcy5wcm9wcy5sYXlvdXRJZH1fJHt0aGlzLnByb3BzLmxheW91dEl0ZW1JZH1fdGxhcmdlYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuTWVkaXVtXTogYCR7dGhpcy5wcm9wcy5sYXlvdXRJZH1fJHt0aGlzLnByb3BzLmxheW91dEl0ZW1JZH1fdG1lZGl1bWAsXG4gICAgICBbQnJvd3NlclNpemVNb2RlLlNtYWxsXTogYCR7dGhpcy5wcm9wcy5sYXlvdXRJZH1fJHt0aGlzLnByb3BzLmxheW91dEl0ZW1JZH1fdHNtYWxsYFxuICAgIH0pIGFzIGFueVxuICAgIHRoaXMuc3RhdGUgPSB7IHNob3dNb2RhbDogZmFsc2UsIGlzQnVzeTogZmFsc2UgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFJlYWRvbmx5PExheW91dEl0ZW1Qcm9wcyAmIEludGxQcm9wcyAmIERpYWxvZ1Byb3BzPik6IHZvaWQge1xuICAgIGlmIChwcmV2UHJvcHMuY3VycmVudERpYWxvZ0lkICE9PSB0aGlzLnByb3BzLmN1cnJlbnREaWFsb2dJZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dNb2RhbDogZmFsc2UgfSlcbiAgICB9XG4gIH1cblxuICBnZXRTdHlsZSAoYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzKSB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICB0b3A6IDA7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICAgICAmLmRyYWdvdmVyIC5kcm9wLXRpcCB7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7cG9saXNoZWQucmdiYShidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs3MDBdLCAwLjUpfSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAuYWRkLWJ0biB7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC5tYXNrIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHRvcDowO1xuICAgICAgICByaWdodDowO1xuICAgICAgICBib3R0b206MDtcbiAgICAgICAgei1pbmRleDoyO1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIH1cblxuICAgICAgJi5hc3BlY3QtcmF0aW8td3JhcHBlciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAkeyh0aGlzLnByb3BzLmFzcGVjdFJhdGlvIHx8IDApICogMTAwfSU7XG4gICAgICB9XG5cbiAgICAgICYuYXNwZWN0LXJhdGlvLXdyYXBwZXIgPiAuZXhiLWRyb3AtYXJlYSB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgIH1cblxuICAgICAgJi5hc3BlY3QtcmF0aW8td3JhcHBlciA+IC5hZGQtYnRuIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICB0b2dnbGVNb2RhbCA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYnJvd3NlclNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hTaWRlUGFuZWxUb0FwcCh7IHR5cGU6ICd3aWRnZXQnLCBpc1BsYWNlaG9sZGVyOiB0cnVlLCBpc0l0ZW1BY2NlcHRlZDogdGhpcy5pc0l0ZW1BY2NlcHRlZCwgb25TZWxlY3Q6IHRoaXMuc2V0Q29udGVudCB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICBzaG93TW9kYWw6ICFwcmV2U3RhdGUuc2hvd01vZGFsXG4gICAgfSkpXG4gIH1cblxuICBjbG9zZU1vZGFsID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLnNob3dNb2RhbCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dNb2RhbDogZmFsc2UgfSlcbiAgICB9XG4gIH1cblxuICB0b2dnbGVEcmFnb3ZlckVmZmVjdCA9IChpc0RyYWdvdmVyOiBib29sZWFuLCBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKSA9PiB7XG4gICAgaWYgKHRoaXMucmVmICYmIGlzRHJhZ292ZXIgJiYgY2FuRHJvcEF0UGxhY2Vob2xkZXIoZHJhZ2dpbmdJdGVtKSkge1xuICAgICAgdGhpcy5yZWYuY2xhc3NMaXN0LmFkZCgnZHJhZ292ZXInKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZi5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnb3ZlcicpXG4gICAgfVxuICB9XG5cbiAgb25Ecm9wID0gKGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMpID0+IHtcbiAgICBpZiAoIWNhbkRyb3BBdFBsYWNlaG9sZGVyKGRyYWdnaW5nSXRlbSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IHRoaXMucHJvcHNcbiAgICBkcm9wQXRQbGFjZWhvbGRlcih7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSwgZHJhZ2dpbmdJdGVtKVxuICB9XG5cbiAgc2V0Q29udGVudCA9IChpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gdGhpcy5wcm9wc1xuICAgIGlmIChpdGVtLml0ZW1UeXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgIGFkZFdpZGdldEluUGxhY2Vob2xkZXIoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0sIGl0ZW0pLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc0J1c3k6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoaXRlbS5pdGVtVHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbikge1xuICAgICAgYWRkU2VjdGlvbkluUGxhY2Vob2xkZXIoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0pXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2hvd01vZGFsOiBmYWxzZSxcbiAgICAgIGlzQnVzeTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBnZXRQb3B1cFN0eWxlICgpIHtcbiAgICBjb25zdCB7IGJ1aWxkZXJUaGVtZSB9ID0gdGhpcy5wYWdlQ29udGV4dFxuICAgIHJldHVybiBjc3NgXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFszMDBdfTtcbiAgICAgIG1heC1oZWlnaHQ6IDQwMHB4O1xuICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgYFxuICB9XG5cbiAgZ2V0TW9kYWxTdHlsZSAoKSB7XG4gICAgY29uc3QgeyBidWlsZGVyVGhlbWUgfSA9IHRoaXMucGFnZUNvbnRleHRcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLm1vZGFsLWNvbnRlbnQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFszMDBdfTtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWhlYWRlciB7XG4gICAgICAgIGNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMuYmxhY2t9O1xuICAgICAgICAuY2xvc2Uge1xuICAgICAgICAgIGNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzcwMF19O1xuICAgICAgICAgICY6aG92ZXIge1xuICAgICAgICAgICAgY29sb3I6ICR7YnVpbGRlclRoZW1lLmNvbG9ycy5ibGFja307XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgaXNJdGVtQWNjZXB0ZWQgPSAoaXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gdGhpcy5sYXlvdXRDb250ZXh0LmlzSXRlbUFjY2VwdGVkKGl0ZW0sIHRydWUpXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8UGFnZUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsocGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHMpID0+IHtcbiAgICAgICAgICB0aGlzLnBhZ2VDb250ZXh0ID0gcGFnZUNvbnRleHRcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPExheW91dENvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgICAgIHsobGF5b3V0Q29udGV4dDogTGF5b3V0Q29udGV4dFByb3BzKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXlvdXRDb250ZXh0ID0gbGF5b3V0Q29udGV4dFxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbGF5b3V0LXdpZGdldCBsYXlvdXQtaXRlbS1jb250ZW50IG5vLXdpZGdldCBoLTEwMCB3LTEwMCBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInXG4gICAgICAgICAgICAgICAgICAgIHJlZj17ZWwgPT4geyB0aGlzLnJlZiA9IGVsIH19XG4gICAgICAgICAgICAgICAgICAgIGNzcz17dGhpcy5nZXRTdHlsZShwYWdlQ29udGV4dC5idWlsZGVyVGhlbWUpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8RHJvcEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Ryb3BhcmVhU3R5bGV9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdkcm9wLXRpcCdcbiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRzPXt0aGlzLmZha2VMYXlvdXRzfVxuICAgICAgICAgICAgICAgICAgICAgIGlzUGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHREcmFnb3Zlcj17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGVEcmFnb3ZlckVmZmVjdD17dGhpcy50b2dnbGVEcmFnb3ZlckVmZmVjdH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkRyb3A9e3RoaXMub25Ecm9wfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0J1c3kgJiYgPExvYWRpbmcgdHlwZT17TG9hZGluZ1R5cGUuUHJpbWFyeX0gLz59XG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5pc0J1c3kgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPXtlbCA9PiB7IHRoaXMuYnRuUmVmID0gZWwgfX0gY2xhc3NOYW1lPSdhZGQtYnRuJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUaGVtZWRUb29sdGlwIHRpdGxlPXt0aGlzLnByb3BzLmludGw/LmZvcm1hdE1lc3NhZ2UoeyBpZDogJ2FkZFdpZGdldCcgfSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYHdpZHRoOiAzNnB4OyBoZWlnaHQ6IDM2cHg7IHBhZGRpbmc6IDAuNXJlbTtgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oYXNwb3B1cFxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNPdXRsaW5lZCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGhlbWVkVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnN0YXRlLmlzQnVzeSAmJiB0aGlzLnN0YXRlLnNob3dNb2RhbCAmJlxuICAgICAgICAgICAgICAgICAgICAgIDxXaWRnZXRMaXN0UG9wcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VFbGVtZW50PXt0aGlzLmJ0blJlZn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWNjZXB0ZWQ9e3RoaXMuaXNJdGVtQWNjZXB0ZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17dGhpcy5zZXRDb250ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17dGhpcy5jbG9zZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgIC8+fVxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wYWdlQ29udGV4dC52aWV3T25seSAmJiA8ZGl2IGNsYXNzTmFtZT0nbWFzaycgLz59XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA8L0xheW91dENvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgKVxuICAgICAgICB9fVxuICAgICAgPC9QYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cbn1cblxuY29uc3QgbWFwRnVuYyA9IGNyZWF0ZVNlbGVjdG9yKFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5jdXJyZW50RGlhbG9nSWQsXG4gIGN1cnJlbnREaWFsb2dJZCA9PiAoeyBjdXJyZW50RGlhbG9nSWQgfSlcbilcblxuY29uc3QgV3JhcHBlZENvbXBvbmVudCA9IFJlYWN0UmVkdXguY29ubmVjdDxEaWFsb2dQcm9wcywgdW5rbm93biwgTGF5b3V0SXRlbVByb3BzPihtYXBGdW5jKShfV2lkZ2V0UGxhY2Vob2xkZXIpXG5cbmV4cG9ydCBjb25zdCBXaWRnZXRQbGFjZWhvbGRlciA9IGluamVjdEludGwoV3JhcHBlZENvbXBvbmVudClcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgdHlwZSBQYWdlQ29udGV4dFByb3BzLFxuICB0eXBlIExheW91dEl0ZW1Qcm9wcyxcbiAgdHlwZSBXaWRnZXRQcm9wcyxcbiAgTGF5b3V0WkluZGV4LFxuICBXaWRnZXRSZW5kZXJlclxufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBXaWRnZXRQbGFjZWhvbGRlciB9IGZyb20gJy4vd2lkZ2V0LXBsYWNlaG9sZGVyJ1xuaW1wb3J0IHsgR0xPQkFMX0RSQUdHSU5HX0NMQVNTX05BTUUgfSBmcm9tICcuL2ludGVyYWN0aXZlL2RyYWctZXZlbnQtaGFuZGxlcidcblxudHlwZSBQcm9wcyA9IExheW91dEl0ZW1Qcm9wcyAmIFdpZGdldFByb3BzXG5cbmV4cG9ydCBjbGFzcyBXaWRnZXRSZW5kZXJlckluQnVpbGRlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHM+IHtcbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHNcblxuICBtYXNrICgpIHtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J3dpZGdldC1tYXNrJyAvPlxuICB9XG5cbiAgZ2V0U3R5bGUgKCkge1xuICAgIC8vIFNldCB6LWluZGV4IGhpZ2hlciB0aGFuIGRyb3BhcmVhICh6LWluZGV4OiAxMCkgd2hlbiB3aWRnZXQgaXMgaW5saW5lIGVkaXRpbmdcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLiR7R0xPQkFMX0RSQUdHSU5HX0NMQVNTX05BTUV9ICYge1xuICAgICAgICBvdmVyZmxvdzogdmlzaWJsZSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgei1pbmRleDogJHt0aGlzLnByb3BzLmlzSW5saW5lRWRpdGluZyA/IExheW91dFpJbmRleC5IYW5kbGVyVG9vbHMgOiAwfTtcblxuICAgICAgLndpZGdldC1tYXNrIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgfVxuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYgLndpZGdldC1tYXNrIHtcbiAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGdldFBsYWNlaG9sZGVyU3R5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7XG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGlzSW5saW5lRWRpdGluZyxcbiAgICAgIGlzRnVuY3Rpb25hbFdpZGdldCxcbiAgICAgIGhhc0VtYmVkZGVkTGF5b3V0XG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICAvLyBpZiAoIXdpZGdldElkKSB7XG4gICAgLy8gICByZXR1cm4gPFdpZGdldFBsYWNlaG9sZGVyIGNzcz17dGhpcy5nZXRQbGFjZWhvbGRlclN0eWxlKCl9IHsuLi50aGlzLnByb3BzfSAvPlxuICAgIC8vIH1cbiAgICBjb25zdCBzaG93TWFzayA9ICFpc0lubGluZUVkaXRpbmcgJiYgaXNGdW5jdGlvbmFsV2lkZ2V0ICYmICFoYXNFbWJlZGRlZExheW91dFxuICAgIHJldHVybiAoXG4gICAgICA8V2lkZ2V0UmVuZGVyZXIgY2xhc3NOYW1lPSd3LTEwMCcgY3NzPXt0aGlzLmdldFN0eWxlKCl9IHsuLi50aGlzLnByb3BzfT5cbiAgICAgICAgeyF3aWRnZXRJZCAmJiA8V2lkZ2V0UGxhY2Vob2xkZXIgY3NzPXt0aGlzLmdldFBsYWNlaG9sZGVyU3R5bGUoKX0gey4uLnRoaXMucHJvcHN9IC8+fVxuICAgICAgICB7c2hvd01hc2sgJiYgd2lkZ2V0SWQgJiYgdGhpcy5tYXNrKCl9XG4gICAgICA8L1dpZGdldFJlbmRlcmVyPlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MsIEltbXV0YWJsZSwgTGF5b3V0SXRlbVR5cGUsIEFQUF9GUkFNRV9OQU1FX0lOX0JVSUxERVIsIHR5cGUgSU1Cb3VuZGluZ0JveCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNldHRpbmdTZWN0aW9uLCBTZXR0aW5nUm93IH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBTaXplRWRpdG9yLCBJbnB1dFJhdGlvIH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zdHlsZS1zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBEaXN0YW5jZVVuaXRzLCB0eXBlIExpbmVhclVuaXQsIFNlbGVjdCwgVG9vbHRpcCwgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IExheW91dEl0ZW1TaXplTW9kZXMsIHV0aWxzIGFzIGxheW91dFV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtU2V0dGluZ1Byb3BzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCBDb21tb25MYXlvdXRJdGVtU2V0dGluZyBmcm9tICcuLi8uLi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtaXRlbS1zZXR0aW5nJ1xuaW1wb3J0IENvbW1vblRyYW5zZm9ybVNldHRpbmcgZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tdHJhbnNmb3JtLXNldHRpbmcnXG5pbXBvcnQgeyBMb2NrT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9sb2NrJ1xuaW1wb3J0IHsgVW5sb2NrT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci91bmxvY2snXG5cbmNvbnN0IGlucHV0U3R5bGUgPSBjc3Ngd2lkdGg6IDEwMHB4O2BcblxuY29uc3Qgd2lkdGhNb2RlcyA9IFtMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gsIExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXVxuY29uc3QgaGVpZ2h0TW9kZXMgPSBbTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gsIExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXVxuY29uc3QgaGVpZ2h0TW9kZXNXaXRob3V0QXV0byA9IFtMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gsIExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXVxuY29uc3QgYXZhaWxhYmxlV2lkdGhVbml0cyA9IFtEaXN0YW5jZVVuaXRzLlBJWEVMLCBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0VdXG5jb25zdCBhdmFpbGFibGVIZWlnaHRVbml0cyA9IFtEaXN0YW5jZVVuaXRzLlBJWEVMXVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2x1bW5JdGVtU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVNldHRpbmdQcm9wcz4ge1xuICB1cGRhdGVCQm94ID0gKHByb3A6IHN0cmluZywgdmFsdWU6IExpbmVhclVuaXQpID0+IHtcbiAgICBsZXQgYmJveCA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3hcbiAgICBjb25zdCB7IGRpc3RhbmNlLCB1bml0IH0gPSB2YWx1ZVxuICAgIGNvbnN0IG9yaWdpbmFsVmFsdWUgPSBiYm94W3Byb3BdXG4gICAgY29uc3QgY29udGFpZW5yUmVjdCA9IHRoaXMuZ2V0U2l6ZU9mQ29udGFpbmVyKClcbiAgICBsZXQgbmV3VmFsdWU6IHN0cmluZyB8IG51bWJlciA9IGRpc3RhbmNlLnRvRml4ZWQoMilcbiAgICBsZXQgcGl4ZWxWYWx1ZTogbnVtYmVyXG5cbiAgICBpZiAobGF5b3V0VXRpbHMuaXNQZXJjZW50YWdlKG9yaWdpbmFsVmFsdWUpICYmIHVuaXQgPT09IERpc3RhbmNlVW5pdHMuUElYRUwpIHsgLy8gY2hhbmdlIGZyb20gcGVyY2VudGFnZSB0byBwaXhlbFxuICAgICAgaWYgKGNvbnRhaWVuclJlY3QpIHtcbiAgICAgICAgaWYgKHByb3AgPT09ICdsZWZ0JyB8fCBwcm9wID09PSAncmlnaHQnIHx8IHByb3AgPT09ICd3aWR0aCcpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IE1hdGgucm91bmQocGFyc2VGbG9hdChvcmlnaW5hbFZhbHVlKSAqIGNvbnRhaWVuclJlY3Qud2lkdGggLyAxMDApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQob3JpZ2luYWxWYWx1ZSkgKiBjb250YWllbnJSZWN0LmhlaWdodCAvIDEwMClcbiAgICAgICAgfVxuICAgICAgICBwaXhlbFZhbHVlID0gbmV3VmFsdWVcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFsYXlvdXRVdGlscy5pc1BlcmNlbnRhZ2Uob3JpZ2luYWxWYWx1ZSkgJiYgdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFKSB7IC8vIGNoYW5nZSBmcm9tIHBpeGVsIHRvIHBlcmNlbnRhZ2VcbiAgICAgIGlmIChjb250YWllbnJSZWN0KSB7XG4gICAgICAgIGlmIChwcm9wID09PSAnbGVmdCcgfHwgcHJvcCA9PT0gJ3JpZ2h0JyB8fCBwcm9wID09PSAnd2lkdGgnKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSAocGFyc2VGbG9hdChvcmlnaW5hbFZhbHVlKSAqIDEwMCAvIGNvbnRhaWVuclJlY3Qud2lkdGgpLnRvRml4ZWQoNClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IChwYXJzZUZsb2F0KG9yaWdpbmFsVmFsdWUpICogMTAwIC8gY29udGFpZW5yUmVjdC5oZWlnaHQpLnRvRml4ZWQoNClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcGl4ZWxWYWx1ZSA9IHBhcnNlRmxvYXQob3JpZ2luYWxWYWx1ZSlcbiAgICB9XG5cbiAgICBpZiAoIXBpeGVsVmFsdWUgJiYgdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFKSB7XG4gICAgICAvLyBjaGFuZ2UgcGVyY2VudGFnZSB2YWx1ZVxuICAgICAgY29uc3QgdG90YWwgPSBwcm9wID09PSAnd2lkdGgnID8gY29udGFpZW5yUmVjdC53aWR0aCA6IGNvbnRhaWVuclJlY3QuaGVpZ2h0XG4gICAgICBwaXhlbFZhbHVlID0gTWF0aC5yb3VuZChkaXN0YW5jZSAqIHRvdGFsIC8gMTAwKVxuICAgIH0gZWxzZSBpZiAoIXBpeGVsVmFsdWUgJiYgdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QSVhFTCkge1xuICAgICAgcGl4ZWxWYWx1ZSA9IGRpc3RhbmNlXG4gICAgfVxuXG4gICAgYmJveCA9IGJib3guc2V0KHByb3AsIHVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSA/IGAke25ld1ZhbHVlfSVgIDogYCR7bmV3VmFsdWV9cHhgKVxuXG4gICAgaWYgKHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nPy5oZWlnaHRNb2RlID09PSAncmF0aW8nKSB7XG4gICAgICBjb25zdCByYXRpbyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nLmFzcGVjdFJhdGlvXG4gICAgICBpZiAocHJvcCA9PT0gJ3dpZHRoJykge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBwaXhlbFZhbHVlICogcmF0aW9cbiAgICAgICAgaWYgKGxheW91dFV0aWxzLmlzUGVyY2VudGFnZShiYm94LmhlaWdodCkpIHtcbiAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IChoZWlnaHQgKiAxMDAgLyBjb250YWllbnJSZWN0LmhlaWdodCkudG9GaXhlZCg0KVxuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgnaGVpZ2h0JywgYCR7bmV3VmFsdWV9JWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdoZWlnaHQnLCBgJHtNYXRoLnJvdW5kKGhlaWdodCl9cHhgKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHBpeGVsVmFsdWUgLyByYXRpb1xuICAgICAgICBpZiAobGF5b3V0VXRpbHMuaXNQZXJjZW50YWdlKGJib3gud2lkdGgpKSB7XG4gICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSAod2lkdGggKiAxMDAgLyBjb250YWllbnJSZWN0LndpZHRoKS50b0ZpeGVkKDQpXG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCd3aWR0aCcsIGAke25ld1ZhbHVlfSVgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgnd2lkdGgnLCBgJHtNYXRoLnJvdW5kKHdpZHRoKX1weGApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnByb3BzLm9uUG9zQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBiYm94XG4gICAgKVxuICB9XG5cbiAgdG9nZ2xlSGVpZ2h0TW9kZSA9ICgpID0+IHtcbiAgICBsZXQgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICBjb25zdCBoZWlnaHRNb2RlID0gc2V0dGluZy5oZWlnaHRNb2RlID09PSAncmF0aW8nID8gJ2ZpeGVkJyA6ICdyYXRpbydcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ2hlaWdodE1vZGUnLCBoZWlnaHRNb2RlKVxuICAgIGlmIChoZWlnaHRNb2RlID09PSAncmF0aW8nKSB7XG4gICAgICBjb25zdCBpdGVtUmVjdCA9IHRoaXMuZ2V0U2l6ZU9mSXRlbSgpXG4gICAgICBpZiAoaXRlbVJlY3QpIHtcbiAgICAgICAgc2V0dGluZyA9IHNldHRpbmcuc2V0KCdhc3BlY3RSYXRpbycsIE51bWJlcigoaXRlbVJlY3QuaGVpZ2h0IC8gaXRlbVJlY3Qud2lkdGgpLnRvRml4ZWQoMikpKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgYmJveCA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3hcbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmdldFNpemVPZkl0ZW0oKVxuICAgICAgaWYgKGxheW91dFV0aWxzLmlzUGVyY2VudGFnZShiYm94LndpZHRoKSkge1xuICAgICAgICBjb25zdCBjb250YWllbnJSZWN0ID0gdGhpcy5nZXRTaXplT2ZDb250YWluZXIoKVxuICAgICAgICBiYm94ID0gYmJveC5zZXQoJ3dpZHRoJywgYCR7KHJlY3Qud2lkdGggKiAxMDAgLyBjb250YWllbnJSZWN0LndpZHRoKS50b0ZpeGVkKDQpfSVgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmJveCA9IGJib3guc2V0KCd3aWR0aCcsIGAke01hdGgucm91bmQocmVjdC53aWR0aCl9cHhgKVxuICAgICAgfVxuICAgICAgYmJveCA9IGJib3guc2V0KCdoZWlnaHQnLCBgJHtNYXRoLnJvdW5kKHJlY3QuaGVpZ2h0KX1weGApXG4gICAgICB0aGlzLnByb3BzLm9uUG9zQ2hhbmdlKFxuICAgICAgICB7XG4gICAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgICAgfSxcbiAgICAgICAgYmJveFxuICAgICAgKVxuICAgIH1cblxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nXG4gICAgKVxuICB9XG5cbiAgdXBkYXRlQWxpZ25TZWxmID0gKGUpID0+IHtcbiAgICBsZXQgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXRJbihbJ3N0eWxlJywgJ2FsaWduU2VsZiddLCBlLnRhcmdldC52YWx1ZSlcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgc2V0dGluZ1xuICAgIClcbiAgfVxuXG4gIHVwZGF0ZUhlaWdodE1vZGUgPSAobW9kZTogTGF5b3V0SXRlbVNpemVNb2RlcykgPT4ge1xuICAgIGNvbnN0IHNldHRpbmcgPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uc2V0dGluZyB8fCBJbW11dGFibGUoe30pXG4gICAgbGV0IGJib3ggPSBJbW11dGFibGUodGhpcy5wcm9wcy5sYXlvdXRJdGVtLmJib3gpXG4gICAgaWYgKG1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tICYmIGlzTmFOKHBhcnNlRmxvYXQoYmJveC5oZWlnaHQpKSkge1xuICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZ2V0U2l6ZU9mSXRlbSgpXG4gICAgICBiYm94ID0gYmJveC5zZXQoJ2hlaWdodCcsIGAke01hdGgucm91bmQocmVjdC5oZWlnaHQpfXB4YClcbiAgICAgIHRoaXMucHJvcHMub25Qb3NDaGFuZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgICB9LFxuICAgICAgICBiYm94XG4gICAgICApXG4gICAgfVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldEluKFsnYXV0b1Byb3BzJywgJ2hlaWdodCddLCBtb2RlKVxuICAgIClcbiAgfVxuXG4gIHVwZGF0ZVdpZHRoTW9kZSA9IChtb2RlOiBMYXlvdXRJdGVtU2l6ZU1vZGVzKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICBsZXQgYmJveCA9IEltbXV0YWJsZSh0aGlzLnByb3BzLmxheW91dEl0ZW0uYmJveClcbiAgICBpZiAobW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20gJiYgaXNOYU4ocGFyc2VGbG9hdChiYm94LndpZHRoKSkpIHtcbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmdldFNpemVPZkl0ZW0oKVxuICAgICAgYmJveCA9IGJib3guc2V0KCd3aWR0aCcsIGAke01hdGgucm91bmQocmVjdC53aWR0aCl9cHhgKVxuICAgICAgdGhpcy5wcm9wcy5vblBvc0NoYW5nZShcbiAgICAgICAge1xuICAgICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICAgIH0sXG4gICAgICAgIGJib3hcbiAgICAgIClcbiAgICB9XG5cbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgc2V0dGluZy5zZXRJbihbJ2F1dG9Qcm9wcycsICd3aWR0aCddLCBtb2RlKVxuICAgIClcbiAgfVxuXG4gIHVwZGF0ZUFzcGVjdFJhdGlvID0gKG5ld1JhdGlvKSA9PiB7XG4gICAgbGV0IHNldHRpbmcgPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uc2V0dGluZyB8fCBJbW11dGFibGUoe30pXG4gICAgc2V0dGluZyA9IHNldHRpbmcuc2V0KCdhc3BlY3RSYXRpbycsIG5ld1JhdGlvKVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nXG4gICAgKVxuICB9XG5cbiAgZ2V0U2l6ZU9mQ29udGFpbmVyICgpOiBET01SZWN0IHtcbiAgICBjb25zdCBsYXlvdXRFbGVtID0gdGhpcy5xdWVyeVNlbGVjdG9yKGBkaXYuY29sdW1uLWxheW91dFtkYXRhLWxheW91dGlkPVwiJHt0aGlzLnByb3BzLmxheW91dElkfVwiXWApXG4gICAgaWYgKGxheW91dEVsZW0pIHtcbiAgICAgIHJldHVybiBsYXlvdXRFbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXRTaXplT2ZJdGVtICgpOiBET01SZWN0IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgbGF5b3V0RWxlbSA9IHRoaXMucXVlcnlTZWxlY3RvcihcbiAgICAgIGBkaXYuZXhiLXJuZFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW0uaWR9XCJdYClcbiAgICBpZiAobGF5b3V0RWxlbSkge1xuICAgICAgcmV0dXJuIGxheW91dEVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHF1ZXJ5U2VsZWN0b3IgKHNlbGVjdG9yOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgYXBwRnJhbWU6IEhUTUxGcmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBpZnJhbWVbbmFtZT1cIiR7QVBQX0ZSQU1FX05BTUVfSU5fQlVJTERFUn1cIl1gKVxuICAgIGlmIChhcHBGcmFtZSkge1xuICAgICAgY29uc3QgYXBwRnJhbWVEb2MgPSBhcHBGcmFtZS5jb250ZW50RG9jdW1lbnQgfHwgYXBwRnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudFxuICAgICAgcmV0dXJuIGFwcEZyYW1lRG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBmb3JtYXRNZXNzYWdlID0gKGlkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKGlkKVxuICB9XG5cbiAgZ2V0U3R5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAucm90YXRpb24tc2V0dGluZywgLnJvdGF0aW9uLXNldHRpbmcgaW5wdXQge1xuICAgICAgICBoZWlnaHQ6IDI2cHg7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpby12YWx1ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmFsaWduLXNlbGVjdCB7XG4gICAgICAgIC5kcm9wZG93bi1idXR0b24sIC5kcm9wZG93bi1idXR0b246aG92ZXIge1xuICAgICAgICAgIGhlaWdodDogMjZweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIC8vIGdldEFzcGVjdFJhdGlvKCkge1xuICAvLyAgIGNvbnN0IHJhdGlvID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmc/LmFzcGVjdFJhdGlvID8/IC0xO1xuICAvLyAgIGlmIChyYXRpbyA8IDApIHtcbiAgLy8gICAgIHJldHVybiAnJztcbiAgLy8gICB9XG4gIC8vICAgY29uc3Qgd2lkdGggPSAxMDA7XG4gIC8vICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5yb3VuZChyYXRpbyAqIDEwMCk7XG4gIC8vICAgY29uc3QgY29tbW9uID0gbGF5b3V0VXRpbHMuZ2NkKHdpZHRoLCBoZWlnaHQpO1xuICAvLyAgIHJldHVybiBgJHt3aWR0aCAvIGNvbW1vbn0gOiAke2hlaWdodCAvIGNvbW1vbn1gO1xuICAvLyB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtLCBpc0xvY2tMYXlvdXQsIHN1cHBvcnRBdXRvU2l6ZSB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGF5b3V0SXRlbSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3Qgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyB8fCB7fVxuICAgIGNvbnN0IHN0eWxlID0gc2V0dGluZy5zdHlsZSB8fCB7fVxuICAgIGNvbnN0IGJib3ggPSBsYXlvdXRJdGVtLmJib3ggfHwge31cbiAgICBjb25zdCBpc0F1dG9XaWR0aCA9IHNldHRpbmcuYXV0b1Byb3BzPy53aWR0aCAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b21cbiAgICBjb25zdCBoZWlnaHRNb2RlID0gc2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA/PyBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbVxuICAgIGNvbnN0IGtlZXBBc3BlY3RSYXRpbyA9IHNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJ1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2x1bW4taXRlbS1zZXR0aW5nJyBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0+XG4gICAgICAgIHshaXNMb2NrTGF5b3V0ICYmIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICA8U2V0dGluZ1NlY3Rpb24gcm9sZT0nZ3JvdXAnIHRpdGxlPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3NpemUnKX0gYXJpYS1sYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdzaXplJyl9PlxuICAgICAgICAgICAgPFNldHRpbmdSb3cgcm9sZT0nZ3JvdXAnIGxhYmVsPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3dpZHRoJyl9IGFyaWEtbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgnd2lkdGgnKX0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtpbnB1dFN0eWxlfT5cbiAgICAgICAgICAgICAgICA8U2l6ZUVkaXRvclxuICAgICAgICAgICAgICAgICAgbGFiZWw9J1cnXG4gICAgICAgICAgICAgICAgICBtb2RlPXtpc0F1dG9XaWR0aCA/IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCA6IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tfVxuICAgICAgICAgICAgICAgICAgc2l6ZU1vZGVzPXt3aWR0aE1vZGVzfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2Jib3g/LndpZHRofVxuICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlVW5pdHM9e2F2YWlsYWJsZVdpZHRoVW5pdHN9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4geyB0aGlzLnVwZGF0ZUJCb3goJ3dpZHRoJywgdmFsdWUpIH19XG4gICAgICAgICAgICAgICAgICBvbk1vZGVDaGFuZ2U9e3RoaXMudXBkYXRlV2lkdGhNb2RlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgPFNldHRpbmdSb3dcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtdC0wJ1xuICAgICAgICAgICAgICBsYWJlbD17XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgna2VlcEFzcGVjdFJhdGlvJyl9IHBsYWNlbWVudD0nYm90dG9tJz5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIHR5cGU9J3RlcnRpYXJ5JyBjbGFzc05hbWU9J21sLTEnIGljb24gb25DbGljaz17dGhpcy50b2dnbGVIZWlnaHRNb2RlfSBhcmlhLXByZXNzZWQ9e2tlZXBBc3BlY3RSYXRpb30+XG4gICAgICAgICAgICAgICAgICAgIHtrZWVwQXNwZWN0UmF0aW8gPyA8TG9ja091dGxpbmVkIHNpemU9J3MnIC8+IDogPFVubG9ja091dGxpbmVkIHNpemU9J3MnIC8+fVxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgICA8U2V0dGluZ1JvdyByb2xlPSdncm91cCcgY2xhc3NOYW1lPSdtdC0wJyBsYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdoZWlnaHQnKX0gYXJpYS1sYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdoZWlnaHQnKX0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtpbnB1dFN0eWxlfT5cbiAgICAgICAgICAgICAgICA8U2l6ZUVkaXRvclxuICAgICAgICAgICAgICAgICAgbGFiZWw9J0gnXG4gICAgICAgICAgICAgICAgICBtb2RlPXtoZWlnaHRNb2RlIHx8IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tfVxuICAgICAgICAgICAgICAgICAgc2l6ZU1vZGVzPXtzdXBwb3J0QXV0b1NpemUgPyBoZWlnaHRNb2RlcyA6IGhlaWdodE1vZGVzV2l0aG91dEF1dG99XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17YmJveC5oZWlnaHR9XG4gICAgICAgICAgICAgICAgICBhdmFpbGFibGVVbml0cz17YXZhaWxhYmxlSGVpZ2h0VW5pdHN9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4geyB0aGlzLnVwZGF0ZUJCb3goJ2hlaWdodCcsIHZhbHVlKSB9fVxuICAgICAgICAgICAgICAgICAgb25Nb2RlQ2hhbmdlPXt0aGlzLnVwZGF0ZUhlaWdodE1vZGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17a2VlcEFzcGVjdFJhdGlvfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAge2tlZXBBc3BlY3RSYXRpbyAmJlxuICAgICAgICAgICAgICA8U2V0dGluZ1JvdyBsYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdhc3BlY3RSYXRpbycpfSBhcmlhLWxhYmVsPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2FzcGVjdFJhdGlvJyl9PlxuICAgICAgICAgICAgICAgIDxJbnB1dFJhdGlvIHZhbHVlPXtzZXR0aW5nLmFzcGVjdFJhdGlvfSBzdHlsZT17eyB3aWR0aDogMTAwIH19IG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUFzcGVjdFJhdGlvfSAvPlxuICAgICAgICAgICAgICA8L1NldHRpbmdSb3c+fVxuICAgICAgICAgICAgeyFpc0F1dG9XaWR0aCAmJiA8U2V0dGluZ1JvdyBsYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdhbGlnbicpfT5cbiAgICAgICAgICAgICAgPFNlbGVjdCBhcmlhLWxhYmVsPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2FsaWduJyl9IGNsYXNzTmFtZT0nYWxpZ24tc2VsZWN0JyB2YWx1ZT17c3R5bGUuYWxpZ25TZWxmID8/ICdmbGV4LXN0YXJ0J30gb25DaGFuZ2U9e3RoaXMudXBkYXRlQWxpZ25TZWxmfSBjc3M9e2lucHV0U3R5bGV9PlxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2ZsZXgtc3RhcnQnPnt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3N0YXJ0Jyl9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nZmxleC1lbmQnPnt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2VuZCcpfTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2NlbnRlcic+e3RoaXMuZm9ybWF0TWVzc2FnZSgnY2VudGVyJyl9PC9vcHRpb24+XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9TZXR0aW5nUm93Pn1cbiAgICAgICAgICAgIDxDb21tb25UcmFuc2Zvcm1TZXR0aW5nXG4gICAgICAgICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtLmlkfVxuICAgICAgICAgICAgICBzZXR0aW5nPXtzZXR0aW5nfVxuICAgICAgICAgICAgICBvblNldHRpbmdDaGFuZ2U9e3RoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlfVxuICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvU2V0dGluZ1NlY3Rpb24+XG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+fVxuICAgICAgICB7KGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0IHx8IGxheW91dEl0ZW0uc2VjdGlvbklkKSAmJiAoXG4gICAgICAgICAgPENvbW1vbkxheW91dEl0ZW1TZXR0aW5nXG4gICAgICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgICAgICBpc1NlY3Rpb249e2xheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbn1cbiAgICAgICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfVxuICAgICAgICAgICAgb25TdHlsZUNoYW5nZT17dGhpcy5wcm9wcy5vblN0eWxlQ2hhbmdlfVxuICAgICAgICAgICAgb25TZXR0aW5nQ2hhbmdlPXt0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZX1cbiAgICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e3RoaXMucHJvcHMuZm9ybWF0TWVzc2FnZX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gY2FsSW5zZXJ0UG9zaXRpb25Gb3JDb2x1bW4gKFxuICBib3VuZGluZ1JlY3Q6IENsaWVudFJlY3QsXG4gIGl0ZW1SZWN0OiBQYXJ0aWFsPENsaWVudFJlY3Q+LFxuICBjaGlsZFJlY3RzOiBBcnJheTxDbGllbnRSZWN0ICYgeyBpZDogc3RyaW5nIH0+XG4pOiB7IGluc2VydFk6IG51bWJlciwgcmVmSWQ6IHN0cmluZyB9IHtcbiAgY29uc3QgY2VudGVyWSA9IGl0ZW1SZWN0LnRvcCArIGl0ZW1SZWN0LmhlaWdodCAvIDJcbiAgbGV0IHJlc3VsdFxuICBsZXQgcmVmSWRcbiAgbGV0IGZvdW5kID0gZmFsc2VcbiAgY2hpbGRSZWN0cy5zb21lKChyZWN0LCBpKSA9PiB7XG4gICAgY29uc3QgcmVjdFkgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMlxuICAgIGlmIChyZWN0WSA+IGNlbnRlclkpIHtcbiAgICAgIGlmIChpID09PSAwKSB7IC8vIGluc2VydCBiZWZvcmUgdGhlIGZpcnN0IGl0ZW1cbiAgICAgICAgcmVzdWx0ID0gcmVjdC50b3AgLyAyXG4gICAgICB9IGVsc2UgeyAvLyBpbnNlcnQgYmV0d2VlbiB0aGlzIGFuZCBwcmV2aW91cyBvbmVcbiAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtID0gY2hpbGRSZWN0c1tpIC0gMV1cbiAgICAgICAgcmVzdWx0ID0gKHJlY3QudG9wICsgcHJldmlvdXNJdGVtLnRvcCArIHByZXZpb3VzSXRlbS5oZWlnaHQpIC8gMlxuICAgICAgfVxuICAgICAgZm91bmQgPSB0cnVlXG4gICAgICByZWZJZCA9IHJlY3QuaWRcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kXG4gIH0pXG4gIGlmICghZm91bmQpIHsgLy8gaW5zZXJ0IGFmdGVyIHRoZSBsYXN0IG9uZVxuICAgIGNvbnN0IGxhc3RJdGVtID0gY2hpbGRSZWN0c1tjaGlsZFJlY3RzLmxlbmd0aCAtIDFdXG4gICAgcmVzdWx0ID0gKGxhc3RJdGVtLnRvcCArIGxhc3RJdGVtLmhlaWdodCArIGJvdW5kaW5nUmVjdC5oZWlnaHQpIC8gMlxuICB9XG4gIHJldHVybiB7XG4gICAgcmVmSWQsXG4gICAgaW5zZXJ0WTogcmVzdWx0XG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMsIHR5cGUgTGF5b3V0SXRlbUpzb24sIHR5cGUgSU1MYXlvdXRJdGVtSnNvbiwgdHlwZSBCb3VuZGluZ0JveCwganN4IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtUHJvcHMsIHR5cGUgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcywgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgdXRpbHMgYXMgbGF5b3V0VXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgTGF5b3V0SXRlbUluQnVpbGRlciBmcm9tICcuLi8uLi9idWlsZGVyL2xheW91dC1pdGVtJ1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vY29tbW9uL3V0aWwnXG5cbmludGVyZmFjZSBPd25Qcm9wcyB7XG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbiAgYWN0aXZlSWRzPzogc3RyaW5nXG4gIGluZGV4OiBudW1iZXJcbiAgc3BhY2U6IG51bWJlclxuICBjaGlsZHJlbj86IGFueVxuICBvblJlc2l6ZVN0YXJ0OiAoaWQ6IHN0cmluZykgPT4gdm9pZFxuICBvblJlc2l6aW5nOiAoaWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIpID0+IHZvaWRcbiAgb25SZXNpemVFbmQ6IChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgbGF5b3V0SXRlbTogTGF5b3V0SXRlbUpzb24gfCBJTUxheW91dEl0ZW1Kc29uKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGlzUmVzaXppbmc6IGJvb2xlYW5cbiAgZHc6IG51bWJlclxuICBkaDogbnVtYmVyXG59XG5cbmV4cG9ydCBjbGFzcyBDb2x1bW5JdGVtIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRJdGVtUHJvcHMgJiBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzICYgT3duUHJvcHMsIFN0YXRlPiB7XG4gIGluaXRXaWR0aDogbnVtYmVyXG4gIGluaXRIZWlnaHQ6IG51bWJlclxuICBhdXRvSGVpZ2h0OiBib29sZWFuXG5cbiAgc3RhdGU6IFN0YXRlID0ge1xuICAgIGlzUmVzaXppbmc6IGZhbHNlLFxuICAgIGR3OiAwLFxuICAgIGRoOiAwXG4gIH1cblxuICBvblJlc2l6ZVN0YXJ0ID0gKGlkOiBzdHJpbmcsIGluaXRXOiBudW1iZXIsIGluaXRIOiBudW1iZXIpID0+IHtcbiAgICB0aGlzLmluaXRXaWR0aCA9IGluaXRXXG4gICAgdGhpcy5pbml0SGVpZ2h0ID0gaW5pdEhcbiAgICB0aGlzLnByb3BzLm9uUmVzaXplU3RhcnQoaWQpXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpc1Jlc2l6aW5nOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIG9uUmVzaXppbmcgPSAoaWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIpID0+IHtcbiAgICB0aGlzLnByb3BzLm9uUmVzaXppbmcoaWQsIHgsIHksIGR3LCBkaClcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGR3LFxuICAgICAgZGgsXG4gICAgICBpc1Jlc2l6aW5nOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIG9uUmVzaXplRW5kID0gKGlkOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyLCBzaGlmdEtleT86IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICB0aGlzLnByb3BzLm9uUmVzaXplRW5kKGlkLCB4LCB5LCBkdywgZGgsIGxheW91dEl0ZW0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpc1Jlc2l6aW5nOiBmYWxzZSxcbiAgICAgIGR3OiAwLFxuICAgICAgZGg6IDBcbiAgICB9KVxuICB9XG5cbiAgaXNTdHJldGNoSW5Dcm9zc0F4aXMgKCkge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIHJldHVybiB1dGlscy5pc1N0cmV0Y2hJbkNyb3NzQXhpcyhsYXlvdXRJdGVtKVxuICB9XG5cbiAgY2FsSGVpZ2h0IChpdGVtU2V0dGluZywgYmJveDogQm91bmRpbmdCb3gpIHtcbiAgICByZXR1cm4gdXRpbHMuY2FsSGVpZ2h0KGl0ZW1TZXR0aW5nLCBiYm94KVxuICB9XG5cbiAgZ2V0U3R5bGUgKGxheW91dFNldHRpbmcsIGlzU3RyZXRjaDogYm9vbGVhbikge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgZHcsIGRoLCBpc1Jlc2l6aW5nIH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgYmJveCA9IGxheW91dEl0ZW0uYmJveCB8fCAoe30gYXMgYW55KVxuXG4gICAgY29uc3Qgc3R5bGU6IGFueSA9IHRoaXMuY2FsSGVpZ2h0KGxheW91dFNldHRpbmcsIGJib3gpXG5cbiAgICBpZiAoaXNTdHJldGNoKSB7XG4gICAgICBzdHlsZS53aWR0aCA9ICdhdXRvJ1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS53aWR0aCA9IGJib3gud2lkdGhcbiAgICB9XG5cbiAgICBpZiAoaXNSZXNpemluZyAmJiAoZHcgfHwgZGgpKSB7XG4gICAgICBzdHlsZS5oZWlnaHQgPSB0aGlzLmluaXRIZWlnaHQgKyBkaFxuICAgICAgc3R5bGUud2lkdGggPSB0aGlzLmluaXRXaWR0aCArIGR3XG4gICAgfVxuICAgIHRoaXMuYXV0b0hlaWdodCA9IHN0eWxlLmhlaWdodCA9PT0gJ2F1dG8nXG4gICAgcmV0dXJuIHV0aWxzLmdldEl0ZW1TdHlsZShzdHlsZSwgbGF5b3V0U2V0dGluZywgaXNTdHJldGNoKVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtLCBkcmFnZ2FibGUsIHJlc2l6YWJsZSwgc2VsZWN0YWJsZSwgc2hvd0RlZmF1bHRUb29scyB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGF5b3V0SXRlbSB8fCBsYXlvdXRJdGVtLmlzUGVuZGluZykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgbGF5b3V0U2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyB8fCB7fVxuICAgIGNvbnN0IGhlaWdodE1vZGUgPSBsYXlvdXRTZXR0aW5nLmF1dG9Qcm9wcz8uaGVpZ2h0ID8/IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXG4gICAgY29uc3QgbWVyZ2VkQ2xhc3MgPSBjbGFzc05hbWVzKCdmbGV4Ym94LWxheW91dC1pdGVtJywgeyAnZC1mbGV4JzogaGVpZ2h0TW9kZSAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvIH0pXG4gICAgY29uc3QgaXNTdHJldGNoID0gdGhpcy5pc1N0cmV0Y2hJbkNyb3NzQXhpcygpXG4gICAgY29uc3Qga2VlcEFzcGVjdFJhdGlvID0gbGF5b3V0VXRpbHMuc2hvdWxkVXNlQXNwZWN0UmF0aW8obGF5b3V0U2V0dGluZylcblxuICAgIGNvbnN0IHJhdGlvID0gbGF5b3V0VXRpbHMucGFyc2VBc3BlY3RSYXRpbyhsYXlvdXRTZXR0aW5nLmFzcGVjdFJhdGlvKVxuICAgIGNvbnN0IG9uZUJ5T25lQW5pbWF0aW9uUHJvcHMgPSBsYXlvdXRVdGlscy5oYW5kbGVPbmVieU9uZUFuaW1hdGlvbih0aGlzLnByb3BzKVxuICAgIHJldHVybiAoXG4gICAgICA8TGF5b3V0SXRlbUluQnVpbGRlclxuICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUobGF5b3V0U2V0dGluZywgaXNTdHJldGNoKX1cbiAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgIG9uUmVzaXplU3RhcnQ9e3RoaXMub25SZXNpemVTdGFydH1cbiAgICAgICAgb25SZXNpemluZz17dGhpcy5vblJlc2l6aW5nfVxuICAgICAgICBvblJlc2l6ZUVuZD17dGhpcy5vblJlc2l6ZUVuZH1cbiAgICAgICAgbGVmdD17IWlzU3RyZXRjaH1cbiAgICAgICAgcmlnaHQ9eyFpc1N0cmV0Y2h9XG4gICAgICAgIHRvcD17ZmFsc2V9XG4gICAgICAgIGJvdHRvbT17aGVpZ2h0TW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20gJiYgIWtlZXBBc3BlY3RSYXRpb31cbiAgICAgICAgZHJhZ2dhYmxlPXtkcmFnZ2FibGV9XG4gICAgICAgIHJlc2l6YWJsZT17cmVzaXphYmxlfVxuICAgICAgICBzZWxlY3RhYmxlPXtzZWxlY3RhYmxlfVxuICAgICAgICBzaG93RGVmYXVsdFRvb2xzPXtzaG93RGVmYXVsdFRvb2xzfVxuICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2t9XG4gICAgICAgIGNsYXNzTmFtZT17bWVyZ2VkQ2xhc3N9XG4gICAgICAgIGZvcmNlQXNwZWN0UmF0aW89e2tlZXBBc3BlY3RSYXRpb31cbiAgICAgICAgYXNwZWN0UmF0aW89e3JhdGlvfVxuICAgICAgICBhdXRvSGVpZ2h0PXt0aGlzLmF1dG9IZWlnaHR9XG4gICAgICAgIHsuLi5vbmVCeU9uZUFuaW1hdGlvblByb3BzfVxuICAgICAgLz5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IHR5cGUgSU1BcHBDb25maWcsIHR5cGUgTGF5b3V0SW5mbywgdHlwZSBCcm93c2VyU2l6ZU1vZGUsIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsIExheW91dEl0ZW1UeXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQmFzZUxheW91dFNlcnZpY2UsIHR5cGUgRHVwbGljYXRlQ29udGV4dCwgZ2V0QXBwQ29uZmlnQWN0aW9uLCB0eXBlIFRvY05vZGUsIENvbnRlbnRTZXJ2aWNlV3JhcHBlciB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyBzZWFyY2hVdGlscywgdXRpbHMsIExheW91dEl0ZW1TaXplTW9kZXMsIHR5cGUgVG9vbEl0ZW1Db25maWcgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBkZWxldGVNZW51SXRlbSwgcGVuZGluZ01lbnVJdGVtLCBkdXBsaWNhdGVNZW51SXRlbSwgZmxvYXRpbmdNZW51SXRlbSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9jb21tb24tbWVudSdcbmltcG9ydCB7IHNlY3Rpb25NZW51SXRlbXMsIHZpZXdNZW51SXRlbXMgfSBmcm9tICcuLi8uLi9idWlsZGVyL21lbnUvc2VjdGlvbi1tZW51J1xuaW1wb3J0IHsgc2NyZWVuTWVudUl0ZW1zIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L3NjcmVlbi1tZW51J1xuXG5jb25zdCBjb21tb25NZW51ID0gW2R1cGxpY2F0ZU1lbnVJdGVtLCBmbG9hdGluZ01lbnVJdGVtLCBwZW5kaW5nTWVudUl0ZW0sIGRlbGV0ZU1lbnVJdGVtXVxuY29uc3Qgc2VjdGlvbk1lbnUgPSBbXS5jb25jYXQoc2VjdGlvbk1lbnVJdGVtcywgY29tbW9uTWVudSlcbmV4cG9ydCBjbGFzcyBDb2x1bW5MYXlvdXRTZXJ2aWNlIGV4dGVuZHMgQmFzZUxheW91dFNlcnZpY2Uge1xuICBwcml2YXRlIHJlbW92ZUl0ZW1Gcm9tT3JkZXIgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8pOiBJTUFwcENvbmZpZyB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBsYXlvdXRJbmZvXG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgIC8vIHJlbW92ZSBpdCBmcm9tIG9yZGVyIGxpc3RcbiAgICBsZXQgb3JkZXIgPSBbXS5jb25jYXQobGF5b3V0SnNvbi5vcmRlcilcbiAgICBvcmRlciA9IG9yZGVyLmZpbHRlcihpdGVtSWQgPT4gaXRlbUlkICE9PSBsYXlvdXRJdGVtSWQpXG4gICAgcmV0dXJuIGFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBsYXlvdXRJZCwgJ29yZGVyJ10sIG9yZGVyKVxuICB9XG5cbiAgYWZ0ZXJJdGVtTW92ZWQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8pOiBJTUFwcENvbmZpZyB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlSXRlbUZyb21PcmRlcihhcHBDb25maWcsIGxheW91dEluZm8pXG4gIH1cblxuICBhZnRlckl0ZW1SZW1vdmVkIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUl0ZW1Gcm9tT3JkZXIoYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICB9XG5cbiAgZHVwbGljYXRlSXRlbUluU2FtZUxheW91dCAoXG4gICAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgICBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLFxuICAgIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gICAgY29udGV4dDogRHVwbGljYXRlQ29udGV4dFxuICApOiBbYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SXRlbUlkOiBzdHJpbmddIHtcbiAgICBjb25zdCByZXN1bHQgPSBzdXBlci5kdXBsaWNhdGVJdGVtSW5TYW1lTGF5b3V0KGFwcENvbmZpZywgbGF5b3V0SW5mbywgc2l6ZU1vZGUsIGNvbnRleHQpXG4gICAgbGV0IHVwZGF0ZWRBcHBDb25maWcgPSByZXN1bHRbMF1cbiAgICBjb25zdCBuZXdJdGVtSWQgPSByZXN1bHRbMV1cblxuICAgIC8vIG1haW50YWluIG9yZGVyXG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IHVwZGF0ZWRBcHBDb25maWcubGF5b3V0c1tsYXlvdXRJbmZvLmxheW91dElkXVxuICAgIGNvbnN0IG9yZGVyID0gW10uY29uY2F0KGxheW91dEpzb24ub3JkZXIpXG4gICAgY29uc3QgaW5kZXggPSBvcmRlci5pbmRleE9mKGxheW91dEluZm8ubGF5b3V0SXRlbUlkKVxuICAgIG9yZGVyLnNwbGljZShpbmRleCwgMSwgbGF5b3V0SW5mby5sYXlvdXRJdGVtSWQsIG5ld0l0ZW1JZClcbiAgICB1cGRhdGVkQXBwQ29uZmlnID0gdXBkYXRlZEFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBsYXlvdXRJbmZvLmxheW91dElkLCAnb3JkZXInXSwgb3JkZXIpXG5cbiAgICByZXR1cm4gW3VwZGF0ZWRBcHBDb25maWcsIG5ld0l0ZW1JZF1cbiAgfVxuXG4gIGdldFRvY1N0cnVjdHVyZSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SWQ6IHN0cmluZyk6IFRvY05vZGVbXSB7XG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgIGNvbnN0IHNpemVNb2RlID0gdXRpbHMuZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgICBpZiAobGF5b3V0SnNvbj8ub3JkZXI/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG9yZGVyID0gW10uY29uY2F0KGxheW91dEpzb24ub3JkZXIpXG4gICAgICByZXR1cm4gb3JkZXIuZmlsdGVyKGl0ZW1JZCA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXVxuICAgICAgICByZXR1cm4gIWl0ZW0uaXNQZW5kaW5nXG4gICAgICB9KS5tYXAoKGxheW91dEl0ZW1JZCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gbGF5b3V0SnNvbi5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBDb250ZW50U2VydmljZVdyYXBwZXIoYXBwQ29uZmlnLCBpdGVtKVxuICAgICAgICByZXR1cm4gc2VydmljZS50b1RvY05vZGUoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0sIHNpemVNb2RlKVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICBwcm9jZXNzQWZ0ZXJJdGVtQWRkZWQgKFxuICAgIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLFxuICAgIGN1cnJlbnRTaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICAgIGNvbnRhaW5lclJlY3Q6IERPTVJlY3RSZWFkT25seSxcbiAgICBpdGVtUmVjdDogRE9NUmVjdFJlYWRPbmx5LFxuICAgIGluc2VydEluZGV4OiBudW1iZXJcbiAgKTogSU1BcHBDb25maWcge1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gICAgbGV0IGJib3ggPSB1dGlscy5yZXBsYWNlQm91bmRpbmdCb3gobnVsbCwgaXRlbVJlY3QsIGNvbnRhaW5lclJlY3QpXG4gICAgLy8gb25seSB3aWR0aCBhbmQgaGVpZ2h0IGFyZSBuZWNlc3NhcnlcbiAgICBiYm94ID0gYmJveC53aXRob3V0KCdsZWZ0Jykud2l0aG91dCgndG9wJykud2l0aG91dCgncmlnaHQnKS53aXRob3V0KCdib3R0b20nKVxuICAgIGFwcENvbmZpZ0FjdGlvblxuICAgICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobGF5b3V0SW5mbywgJ2Jib3gnLCBiYm94KVxuICAgICAgLmFkanVzdE9yZGVyT2ZJdGVtKGxheW91dEluZm8sIGluc2VydEluZGV4KVxuXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZywgbGF5b3V0SW5mbylcbiAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgbGF5b3V0SXRlbS53aWRnZXRJZCkge1xuICAgICAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZy53aWRnZXRzW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG5cbiAgICAgIGlmICh3aWRnZXRKc29uLm1hbmlmZXN0Py5kZWZhdWx0U2l6ZT8uYXV0b0hlaWdodCkge1xuICAgICAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvLCAnc2V0dGluZy5hdXRvUHJvcHMuaGVpZ2h0JywgTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZ1xuICB9XG5cbiAgZ2V0VG9vbEl0ZW1zIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCB0eXBlOiBzdHJpbmcpOiBBcnJheTxUb29sSXRlbUNvbmZpZyB8IFRvb2xJdGVtQ29uZmlnW10+IHtcbiAgICBpZiAodHlwZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3ZpZXcnKSB7XG4gICAgICByZXR1cm4gdmlld01lbnVJdGVtc1xuICAgIH1cbiAgICBpZiAodHlwZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3NjcmVlbicpIHtcbiAgICAgIHJldHVybiBzY3JlZW5NZW51SXRlbXNcbiAgICB9XG5cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc2VhcmNoVXRpbHMuZmluZExheW91dEl0ZW0oYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICAgIGlmIChsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24pIHtcbiAgICAgIHJldHVybiBzZWN0aW9uTWVudVxuICAgIH1cbiAgICByZXR1cm4gY29tbW9uTWVudVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBjbGFzc05hbWVzLFxuICBwb2xpc2hlZCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICB0eXBlIElNVGhlbWVWYXJpYWJsZXMsXG4gIE9uZUJ5T25lQW5pbWF0aW9uLFxuICBJbnRlcnNlY3Rpb25Db250ZXh0LFxuICBMYXlvdXRUeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dFNlcnZpY2VQcm92aWRlciwgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IHN0eWxlVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBEcm9wSGFuZGxlcnMgfSBmcm9tICcuLi8uLi9idWlsZGVyL3R5cGVzJ1xuaW1wb3J0IHtcbiAgdHlwZSBMYXlvdXRQcm9wcyxcbiAgdHlwZSBTdGF0ZVRvTGF5b3V0UHJvcHMsXG4gIHV0aWxzLFxuICBQYWdlQ29udGV4dCxcbiAgdHlwZSBQYWdlQ29udGV4dFByb3BzXG59IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IERyb3BBcmVhIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1ob29rJ1xuaW1wb3J0IHsgYWRkSXRlbVRvTGF5b3V0IH0gZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tbGF5b3V0LWFjdGlvbnMnXG5pbXBvcnQgeyBjYWxJbnNlcnRQb3NpdGlvbkZvckNvbHVtbiB9IGZyb20gJy4vZG5kLWhlbHBlcidcbmltcG9ydCB7IERFRkFVTFRfQ09MVU1OX0xBWU9VVF9TRVRUSU5HIH0gZnJvbSAnLi4vZGVmYXVsdC1zZXR0aW5nJ1xuaW1wb3J0IHsgQ29sdW1uSXRlbSB9IGZyb20gJy4vbGF5b3V0LWl0ZW0nXG5pbXBvcnQgeyBDYW52YXNQYW5lIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9jYW52YXMtcGFuZSdcbmltcG9ydCB7IGdldExheW91dFN0eWxlIH0gZnJvbSAnLi4vY29tbW9uL3N0eWxlJ1xuXG5jb25zdCBkcm9wYXJlYVN0eWxlID0gY3NzYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5gXG5cbmNvbnN0IGd1aWRlT3ZlcmxheSA9IGNzc2BcbiAgJHtkcm9wYXJlYVN0eWxlfTtcbiAgei1pbmRleDogMjA7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuYFxuXG5jb25zdCBkcm9wSW5kaWNhdG9yU2l6ZSA9IDEwXG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGlzRHJhZ292ZXI6IGJvb2xlYW5cbn1cblxuY2xhc3MgTGF5b3V0IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRQcm9wcyAmIFN0YXRlVG9MYXlvdXRQcm9wcywgU3RhdGU+IGltcGxlbWVudHMgRHJvcEhhbmRsZXJzIHtcbiAgcmVmOiBIVE1MRWxlbWVudFxuICBjYW52YXNSZWY6IEhUTUxDYW52YXNFbGVtZW50XG4gIGNhbnZhc1BhbmU6IENhbnZhc1BhbmVcbiAgYm91bmRpbmdSZWN0OiBDbGllbnRSZWN0XG4gIGlzRHJhZ2dpbmc6IGJvb2xlYW5cbiAgLy8gY2hpbGRyZW5SZWY6IHsgW2tleTogc3RyaW5nXTogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PiB9O1xuICBjaGlsZFJlY3RzOiBBcnJheTxDbGllbnRSZWN0ICYgeyBpZDogc3RyaW5nIH0+XG4gIGRvbVJlY3Q6IENsaWVudFJlY3RcbiAgcmVzaXppbmdSZWN0OiBDbGllbnRSZWN0XG4gIHJlZmVyZW5jZUlkOiBzdHJpbmdcblxuICAvLyBwYWdlIGVudlxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuICBidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcblxuICBzdGF0ZTogU3RhdGUgPSB7XG4gICAgaXNEcmFnb3ZlcjogZmFsc2VcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHV0aWxzLmF1dG9CaW5kSGFuZGxlcnModGhpcywgW1xuICAgICAgJ2hhbmRsZUl0ZW1SZXNpemVTdGFydCcsXG4gICAgICAnaGFuZGxlSXRlbVJlc2l6aW5nJyxcbiAgICAgICdoYW5kbGVJdGVtUmVzaXplRW5kJyxcbiAgICAgICdoYW5kbGVEcm9wJyxcbiAgICAgICdoYW5kbGVEcmFnT3ZlcicsXG4gICAgICAnaGFuZGxlRHJhZ0VudGVyJyxcbiAgICAgICdoYW5kbGVEcmFnTGVhdmUnLFxuICAgICAgJ2hhbmRsZVRvZ2dsZURyYWdvdmVyRWZmZWN0J1xuICAgIF0pXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKTogdm9pZCB7XG4gICAgdGhpcy5jYW52YXNQYW5lID0gbmV3IENhbnZhc1BhbmUodGhpcy5jYW52YXNSZWYpXG4gICAgdGhpcy5jYW52YXNQYW5lLnNldFNpemUodGhpcy5yZWYuY2xpZW50V2lkdGgsIHRoaXMucmVmLmNsaWVudEhlaWdodClcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKTogdm9pZCB7XG4gICAgdGhpcy5jYW52YXNQYW5lLnNldFNpemUodGhpcy5yZWYuY2xpZW50V2lkdGgsIHRoaXMucmVmLmNsaWVudEhlaWdodClcbiAgfVxuXG4gIGhhbmRsZUl0ZW1SZXNpemVTdGFydCAoaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG4gICAgdGhpcy5kb21SZWN0ID0gdGhpcy5yZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCBkcmFnZ2luZ0NoaWxkID0gdGhpcy5yZWYucXVlcnlTZWxlY3RvcihcbiAgICAgIGBkaXYuZXhiLXJuZFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXQuaWR9XCJdW2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtpZH1cIl1gXG4gICAgKVxuICAgIGNvbnN0IHJlY3QgPSBkcmFnZ2luZ0NoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdGhpcy5yZXNpemluZ1JlY3QgPSB1dGlscy5yZWxhdGl2ZUNsaWVudFJlY3QocmVjdCwgdGhpcy5kb21SZWN0KVxuICB9XG5cbiAgaGFuZGxlSXRlbVJlc2l6aW5nID0gKCk6IHZvaWQgPT4ge31cblxuICBoYW5kbGVJdGVtUmVzaXplRW5kIChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgbGF5b3V0SXRlbTogTGF5b3V0SXRlbUpzb24pOiB2b2lkIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGJib3ggPSBsYXlvdXQuY29udGVudFtpZF0uYmJveFxuICAgIGxldCB3aWR0aFxuICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UoYmJveC53aWR0aCkpIHtcbiAgICAgIHdpZHRoID0gYCR7KCh0aGlzLnJlc2l6aW5nUmVjdC53aWR0aCArIGR3KSAqIDEwMCAvIHRoaXMuZG9tUmVjdC53aWR0aCkudG9GaXhlZCg0KX0lYFxuICAgIH0gZWxzZSB7XG4gICAgICB3aWR0aCA9IGAke01hdGgucm91bmQodGhpcy5yZXNpemluZ1JlY3Qud2lkdGggKyBkdyl9cHhgXG4gICAgfVxuICAgIGNvbnN0IG5ld1BvcyA9IHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKHRoaXMucmVzaXppbmdSZWN0LmhlaWdodCArIGRoKVxuICAgIH1cbiAgICB0aGlzLmNoaWxkUmVjdHMgPSBbXVxuICAgIHRoaXMuZG9tUmVjdCA9IG51bGxcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGFwcENvbmZpZ0FjdGlvblxuICAgICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICAgIHtcbiAgICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXQuaWQsXG4gICAgICAgICAgbGF5b3V0SXRlbUlkOiBpZFxuICAgICAgICB9LFxuICAgICAgICAnYmJveCcsXG4gICAgICAgIG5ld1Bvc1xuICAgICAgKVxuICAgICAgLmV4ZWMoKVxuICB9XG5cbiAgaGFuZGxlRHJhZ092ZXIgKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgZHJhZ2dpbmdFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBjb250YWluZXJSZWN0OiBQYXJ0aWFsPENsaWVudFJlY3Q+LFxuICAgIGl0ZW1SZWN0OiBQYXJ0aWFsPENsaWVudFJlY3Q+XG4gICk6IHZvaWQge1xuICAgIGxldCByZWN0ID0gaXRlbVJlY3RcblxuICAgIHRoaXMuY2FudmFzUGFuZS5jbGVhcigpXG5cbiAgICBpZiAodGhpcy5jaGlsZFJlY3RzPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB7IGluc2VydFksIHJlZklkIH0gPSBjYWxJbnNlcnRQb3NpdGlvbkZvckNvbHVtbihjb250YWluZXJSZWN0IGFzIENsaWVudFJlY3QsIHJlY3QsIHRoaXMuY2hpbGRSZWN0cylcbiAgICAgIHRoaXMucmVmZXJlbmNlSWQgPSByZWZJZFxuICAgICAgcmVjdCA9IHtcbiAgICAgICAgdG9wOiBpbnNlcnRZIC0gZHJvcEluZGljYXRvclNpemUgLyAyICsgdGhpcy5yZWYuc2Nyb2xsVG9wLFxuICAgICAgICB3aWR0aDogY29udGFpbmVyUmVjdC53aWR0aCAtIGRyb3BJbmRpY2F0b3JTaXplLFxuICAgICAgICBsZWZ0OiBkcm9wSW5kaWNhdG9yU2l6ZSAvIDIsXG4gICAgICAgIGhlaWdodDogZHJvcEluZGljYXRvclNpemVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVjdCA9IHtcbiAgICAgICAgdG9wOiBjb250YWluZXJSZWN0LmhlaWdodCAvIDIgLSBkcm9wSW5kaWNhdG9yU2l6ZSAvIDIsXG4gICAgICAgIHdpZHRoOiBjb250YWluZXJSZWN0LndpZHRoIC0gZHJvcEluZGljYXRvclNpemUsXG4gICAgICAgIGxlZnQ6IGRyb3BJbmRpY2F0b3JTaXplIC8gMixcbiAgICAgICAgaGVpZ2h0OiBkcm9wSW5kaWNhdG9yU2l6ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2FudmFzUGFuZS5zZXRDb2xvcihwb2xpc2hlZC5yZ2JhKHRoaXMuYnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNzAwXSwgMSkpXG4gICAgdGhpcy5jYW52YXNQYW5lLmRyYXdSZWN0KHJlY3QpXG4gIH1cblxuICBoYW5kbGVUb2dnbGVEcmFnb3ZlckVmZmVjdCAodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMucmVmZXJlbmNlSWQgPSBudWxsXG4gICAgICB0aGlzLmNvbGxlY3RCb3VuZHMobnVsbClcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpc0RyYWdvdmVyOiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVEcmFnRW50ZXIgKCk6IHZvaWQge31cblxuICBoYW5kbGVEcmFnTGVhdmUgKCk6IHZvaWQge31cblxuICBoYW5kbGVEcm9wIChkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLCBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LCBpdGVtUmVjdDogQ2xpZW50UmVjdCk6IHZvaWQge1xuICAgIHRoaXMuY2FudmFzUGFuZS5jbGVhcigpXG4gICAgY29uc3QgeyBsYXlvdXQgfSA9IHRoaXMucHJvcHNcbiAgICBsZXQgaW5zZXJ0SW5kZXggPSAwXG4gICAgaWYgKHRoaXMucmVmZXJlbmNlSWQgIT0gbnVsbCkge1xuICAgICAgaW5zZXJ0SW5kZXggPSBsYXlvdXQub3JkZXIuaW5kZXhPZih0aGlzLnJlZmVyZW5jZUlkKVxuICAgIH0gZWxzZSBpZiAobGF5b3V0Lm9yZGVyICE9IG51bGwpIHtcbiAgICAgIGluc2VydEluZGV4ID0gbGF5b3V0Lm9yZGVyLmxlbmd0aFxuICAgIH1cblxuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgYWRkSXRlbVRvTGF5b3V0KGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIGRyYWdnaW5nSXRlbSwgbGF5b3V0LmlkKS50aGVuKFxuICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWcgfSA9IHJlc3VsdFxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkuZ2V0U2VydmljZUJ5VHlwZShMYXlvdXRUeXBlLkNvbHVtbkxheW91dClcbiAgICAgICAgY29uc3Qgb3V0QXBwQ29uZmlnID0gc2VydmljZS5wcm9jZXNzQWZ0ZXJJdGVtQWRkZWQoXG4gICAgICAgICAgdXBkYXRlZEFwcENvbmZpZyxcbiAgICAgICAgICBkcmFnZ2luZ0l0ZW0sXG4gICAgICAgICAgbGF5b3V0SW5mbyxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICAgICAgaXRlbVJlY3QsXG4gICAgICAgICAgaW5zZXJ0SW5kZXhcbiAgICAgICAgKVxuICAgICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMubGF5b3V0Q2hhbmdlZChvdXRBcHBDb25maWcsIGxheW91dEluZm8pKVxuICAgICAgfVxuICAgICkuZmluYWxseShudWxsKVxuICAgIHRoaXMucmVmZXJlbmNlSWQgPSBudWxsXG4gICAgdGhpcy5jaGlsZFJlY3RzID0gW11cbiAgfVxuXG4gIGNvbGxlY3RCb3VuZHMgKGlkOiBzdHJpbmcpOiBBcnJheTxDbGllbnRSZWN0ICYgeyBpZDogc3RyaW5nIH0+IHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuY2hpbGRSZWN0cyA9IFtdXG4gICAgdGhpcy5kb21SZWN0ID0gdGhpcy5yZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCBkcmFnZ2FibGVDaGlsZHJlbiA9IHRoaXMucmVmLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChgZGl2W2RhdGEtbGF5b3V0aWQ9XCIke2xheW91dC5pZH1cIl0gPiAudHJhaWwtY29udGFpbmVyID4gZGl2LmV4Yi1ybmRgKVxuICAgIGlmIChkcmFnZ2FibGVDaGlsZHJlbj8ubGVuZ3RoID4gMCkge1xuICAgICAgZHJhZ2dhYmxlQ2hpbGRyZW4uZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtSWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1sYXlvdXRpdGVtaWQnKVxuICAgICAgICBpZiAoaWQgIT09IGl0ZW1JZCAmJiBsYXlvdXQub3JkZXIuaW5jbHVkZXMoaXRlbUlkKSkge1xuICAgICAgICAgIGNvbnN0IHJlY3QgPSB1dGlscy5yZWxhdGl2ZUNsaWVudFJlY3Qobm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgdGhpcy5kb21SZWN0KVxuICAgICAgICAgIHJlY3QuaWQgPSBpdGVtSWRcbiAgICAgICAgICB0aGlzLmNoaWxkUmVjdHMucHVzaChyZWN0KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNoaWxkUmVjdHMuc29ydCgoYSwgYikgPT4gYS50b3AgLSBiLnRvcClcbiAgfVxuXG4gIGNyZWF0ZUl0ZW0gKGl0ZW1JZDogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBsYXlvdXRTZXR0aW5nKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHsgbGF5b3V0LCBpdGVtRHJhZ2dhYmxlLCBpdGVtUmVzaXphYmxlLCBpdGVtU2VsZWN0YWJsZSwgc2hvd0RlZmF1bHRUb29scyB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxDb2x1bW5JdGVtXG4gICAgICAgIGtleT17aXRlbUlkfVxuICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgIHNwYWNlPXtsYXlvdXRTZXR0aW5nLnNwYWNlfVxuICAgICAgICBsYXlvdXRJZD17bGF5b3V0LmlkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2l0ZW1JZH1cbiAgICAgICAgbGF5b3V0SXRlbT17bGF5b3V0LmNvbnRlbnRbaXRlbUlkXX1cbiAgICAgICAgZHJhZ2dhYmxlPXtpdGVtRHJhZ2dhYmxlfVxuICAgICAgICByZXNpemFibGU9e2l0ZW1SZXNpemFibGV9XG4gICAgICAgIHNlbGVjdGFibGU9e2l0ZW1TZWxlY3RhYmxlfVxuICAgICAgICBzaG93RGVmYXVsdFRvb2xzPXtzaG93RGVmYXVsdFRvb2xzfVxuICAgICAgICBvblJlc2l6ZVN0YXJ0PXt0aGlzLmhhbmRsZUl0ZW1SZXNpemVTdGFydH1cbiAgICAgICAgb25SZXNpemluZz17dGhpcy5oYW5kbGVJdGVtUmVzaXppbmd9XG4gICAgICAgIG9uUmVzaXplRW5kPXt0aGlzLmhhbmRsZUl0ZW1SZXNpemVFbmR9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIGlzRW1wdHkgKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgY29udGVudCA9IGxheW91dC5vcmRlciA/PyBbXVxuICAgIGNvbnN0IGhhc1NvbWV0aGluZ1RvUmVuZGVyID0gY29udGVudC5sZW5ndGggPiAwICYmIGNvbnRlbnQuc29tZShpZCA9PiB7XG4gICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgICByZXR1cm4gIWxheW91dEl0ZW0uaXNQZW5kaW5nXG4gICAgfSlcbiAgICByZXR1cm4gIWhhc1NvbWV0aGluZ1RvUmVuZGVyXG4gIH1cblxuICByZW5kZXIgKCk6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IGxheW91dCwgY2xhc3NOYW1lIH0gPSB0aGlzLnByb3BzXG5cbiAgICBjb25zdCBjb250ZW50ID0gbGF5b3V0Lm9yZGVyID8/IFtdXG4gICAgY29uc3QgbGF5b3V0U2V0dGluZyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfQ09MVU1OX0xBWU9VVF9TRVRUSU5HLCBsYXlvdXQuc2V0dGluZylcbiAgICBjb25zdCBpc0VtcHR5ID0gdGhpcy5pc0VtcHR5KClcblxuICAgIHJldHVybiAoXG4gICAgICA8UGFnZUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsocGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHMpID0+IHtcbiAgICAgICAgICB0aGlzLmJ1aWxkZXJUaGVtZSA9IHBhZ2VDb250ZXh0LmJ1aWxkZXJUaGVtZVxuICAgICAgICAgIHRoaXMudGhlbWUgPSBwYWdlQ29udGV4dC50aGVtZVxuXG4gICAgICAgICAgY29uc3QgbWVyZ2VkU3R5bGU6IGFueSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgbWluV2lkdGg6IGxheW91dFNldHRpbmcubWluLFxuICAgICAgICAgICAgcGFkZGluZzogc3R5bGVVdGlscy50b0NTU1BhZGRpbmcobGF5b3V0U2V0dGluZy5wYWRkaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBvdXRDbGFzcyA9IGNsYXNzTmFtZXMoJ2xheW91dCBjb2x1bW4tbGF5b3V0JywgY2xhc3NOYW1lKVxuICAgICAgICAgIGNvbnN0IGd1aWRlVmlzaWJsZVN0eWxlID0ge1xuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5zdGF0ZS5pc0RyYWdvdmVyID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17b3V0Q2xhc3N9XG4gICAgICAgICAgICAgIHJlZj17KGVsKSA9PiAodGhpcy5yZWYgPSBlbCl9XG4gICAgICAgICAgICAgIHN0eWxlPXttZXJnZWRTdHlsZX1cbiAgICAgICAgICAgICAgZGF0YS1sYXlvdXRpZD17bGF5b3V0LmlkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SW50ZXJzZWN0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBtb25pdG9yOiB0cnVlLCBsYXlvdXRJZDogbGF5b3V0LmlkIH19PlxuICAgICAgICAgICAgICAgIDxPbmVCeU9uZUFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgb2lkPXtsYXlvdXQuaWR9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RyYWlsLWNvbnRhaW5lciBkLWZsZXggZmxleC1jb2x1bW4gdy0xMDAnXG4gICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICR7aXNFbXB0eSA/ICdhYnNvbHV0ZScgOiBudWxsfTtcbiAgICAgICAgICAgICAgICAgICAgJHtnZXRMYXlvdXRTdHlsZShsYXlvdXRTZXR0aW5nKX07XG4gICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxEcm9wQXJlYVxuICAgICAgICAgICAgICAgICAgICBjc3M9e2Ryb3BhcmVhU3R5bGV9XG4gICAgICAgICAgICAgICAgICAgIGxheW91dHM9e3RoaXMucHJvcHMubGF5b3V0c31cbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0RHJhZ292ZXJcbiAgICAgICAgICAgICAgICAgICAgb25EcmFnRW50ZXI9e3RoaXMuaGFuZGxlRHJhZ0VudGVyfVxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdMZWF2ZT17dGhpcy5oYW5kbGVEcmFnTGVhdmV9XG4gICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3RoaXMuaGFuZGxlRHJhZ092ZXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uRHJvcD17dGhpcy5oYW5kbGVEcm9wfVxuICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZURyYWdvdmVyRWZmZWN0PXt0aGlzLmhhbmRsZVRvZ2dsZURyYWdvdmVyRWZmZWN0fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIHsoY29udGVudCBhcyBhbnkpLm1hcCgobGF5b3V0SXRlbSwgaW5kZXgpID0+IHRoaXMuY3JlYXRlSXRlbShsYXlvdXRJdGVtLCBpbmRleCwgbGF5b3V0U2V0dGluZykpfVxuICAgICAgICAgICAgICAgIDwvT25lQnlPbmVBbmltYXRpb24+XG4gICAgICAgICAgICAgIDwvSW50ZXJzZWN0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICAgICAge2lzRW1wdHkgJiYgdGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgICAgPGNhbnZhcyBjc3M9e2d1aWRlT3ZlcmxheX0gc3R5bGU9e2d1aWRlVmlzaWJsZVN0eWxlfSByZWY9eyhlbCkgPT4gKHRoaXMuY2FudmFzUmVmID0gZWwpfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKVxuICAgICAgICB9fVxuICAgICAgPC9QYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgTGF5b3V0UHJvcHM+KHV0aWxzLm1hcFN0YXRlVG9MYXlvdXRQcm9wcykoTGF5b3V0KVxuIiwiaW1wb3J0IHsgY3NzIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgZ2V0TGF5b3V0U3R5bGUgPSAobGF5b3V0U2V0dGluZykgPT4gY3NzYFxuICBoZWlnaHQ6IDEwMCU7XG4gIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAganVzdGlmeS1jb250ZW50OiAke2xheW91dFNldHRpbmcuanVzdGlmeUNvbnRlbnR9O1xuICBvdmVyZmxvdy15OiBhdXRvICFpbXBvcnRhbnQ7XG4gIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTsgIC8qIEludGVybmV0IEV4cGxvcmVyIDEwKyAqL1xuICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7ICAvKiBGaXJlZm94ICovXG4gICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICBkaXNwbGF5OiBub25lOyAgLyogU2FmYXJpIGFuZCBDaHJvbWUgKi9cbiAgfVxuICAmOmhvdmVyIHtcbiAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IGF1dG87ICAvKiBJbnRlcm5ldCBFeHBsb3JlciAxMCsgKi9cbiAgICBzY3JvbGxiYXItd2lkdGg6IGF1dG87ICAvKiBGaXJlZm94ICovXG4gICAgJjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgZGlzcGxheTogYmxvY2s7ICAvKiBTYWZhcmkgYW5kIENocm9tZSAqL1xuICAgIH1cbiAgfVxuICAmID4gZGl2LmZsZXhib3gtbGF5b3V0LWl0ZW0gfiBkaXYuZmxleGJveC1sYXlvdXQtaXRlbSB7XG4gICAgbWFyZ2luLXRvcDogJHtsYXlvdXRTZXR0aW5nLnNwYWNlfXB4O1xuICB9XG5gXG4iLCJpbXBvcnQgeyB0eXBlIEJvdW5kaW5nQm94LCB0eXBlIElNTGF5b3V0SXRlbUpzb24sIGNzcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dEl0ZW1TaXplTW9kZXMgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB7IGdldFZhbHVlT2ZCQm94IH0gZnJvbSAnLi4vLi4vdXRpbHMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxIZWlnaHQgKGl0ZW1TZXR0aW5nLCBiYm94OiBCb3VuZGluZ0JveCkge1xuICBpZiAoaXRlbVNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0byB8fCBpdGVtU2V0dGluZy5oZWlnaHRNb2RlID09PSAncmF0aW8nKSB7XG4gICAgaWYgKGl0ZW1TZXR0aW5nLmhlaWdodE1vZGUgPT09ICdyYXRpbycpIHtcbiAgICAgIHJldHVybiB7IGhlaWdodDogJ2F1dG8nLCBmbGV4OiAnMCAwIGF1dG8nIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgaGVpZ2h0OiAnYXV0bycgfVxuICB9XG4gIGlmIChpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoIHx8IGl0ZW1TZXR0aW5nLmhlaWdodE1vZGUgPT09ICdmaXQnKSB7XG4gICAgcmV0dXJuIHsgZmxleDogJzEgMSBhdXRvJyB9XG4gIH1cbiAgcmV0dXJuIHsgaGVpZ2h0OiBiYm94LmhlaWdodCwgZmxleFNocmluazogMCB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmV0Y2hJbkNyb3NzQXhpcyAobGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvbikge1xuICByZXR1cm4gbGF5b3V0SXRlbS5zZXR0aW5nPy5hdXRvUHJvcHM/LndpZHRoICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXRlbVN0eWxlIChzdHlsZSwgbGF5b3V0U2V0dGluZywgaXNTdHJldGNoOiBib29sZWFuKSB7XG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IGxheW91dFNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuXG4gIHJldHVybiBjc3NgXG4gICAgYWxpZ24tc2VsZjogJHtpc1N0cmV0Y2ggPyAnc3RyZXRjaCcgOiBsYXlvdXRTZXR0aW5nLnN0eWxlPy5hbGlnblNlbGYgPz8gJ2F1dG8nfTtcbiAgICB3aWR0aDogJHtnZXRWYWx1ZU9mQkJveChzdHlsZSwgJ3dpZHRoJyl9O1xuICAgIGhlaWdodDogJHtnZXRWYWx1ZU9mQkJveChzdHlsZSwgJ2hlaWdodCcpfTtcbiAgICBmbGV4OiAke3N0eWxlLmZsZXh9O1xuICAgIGZsZXgtc2hyaW5rOiAke3N0eWxlLmZsZXhTaHJpbmt9O1xuICAgIG1pbi1oZWlnaHQ6ICR7aXNBdXRvSGVpZ2h0ID8gJ3Vuc2V0JyA6IG51bGx9O1xuICBgXG59XG4iLCJpbXBvcnQgeyB0eXBlIENvbHVtbkxheW91dFNldHRpbmcgfSBmcm9tICcuLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09MVU1OX0xBWU9VVF9TRVRUSU5HOiBDb2x1bW5MYXlvdXRTZXR0aW5nID0ge1xuICBtaW46IDE2LFxuICBzcGFjZTogMTBcbn1cbiIsImltcG9ydCB7IHR5cGUgSU1QYWdlSnNvbiwgZ2V0QXBwU3RvcmUsIExheW91dFR5cGUgfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0hFQURFUl9IRUlHSFQgPSA3NVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfRk9PVEVSX0hFSUdIVCA9IDc1XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlUGFnZUhlaWdodCAocGFnZUpzb246IElNUGFnZUpzb24sIGhlYWRlckZvb3RlckhlaWdodDogbnVtYmVyKTogbnVtYmVyIHwgc3RyaW5nIHtcbiAgaWYgKHBhZ2VKc29uKSB7XG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xuICAgIGNvbnN0IHBhZ2VMYXlvdXRJZCA9IHBhZ2VKc29uLmxheW91dFthcHBDb25maWcubWFpblNpemVNb2RlXVxuICAgIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzW3BhZ2VMYXlvdXRJZF1cbiAgICAvLyBvbmx5IGdyaWQgcGFnZSBuZWVkIHNwZWNpZmljIGhlaWdodFxuICAgIGlmIChsYXlvdXQ/LnR5cGUgPT09IExheW91dFR5cGUuR3JpZExheW91dCkge1xuICAgICAgaWYgKGhlYWRlckZvb3RlckhlaWdodCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGBjYWxjKDEwMCUgLSAke2hlYWRlckZvb3RlckhlaWdodH1weClgXG4gICAgICB9XG4gICAgICByZXR1cm4gJzEwMCUnXG4gICAgfVxuICB9XG4gIHJldHVybiAnYXV0bydcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgQXBwTW9kZSxcbiAgdHlwZSBJTVN0YXRlLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgTGF5b3V0UGFyZW50VHlwZSxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIFdpZGdldFN0YXRlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGZpbmRQYWdlUmVsYXRlZENvbnRyb2xsZXJJZHMgfSBmcm9tICcuLi91dGlsJ1xuaW1wb3J0IHsgQ29udHJvbGxlclBhbmVsQnVpbGRlciB9IGZyb20gJy4vbGF5b3V0J1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBwYWdlSWQ6IHN0cmluZyAvLyBUaGUgcGFnZSBpZCB0aGF0IHRoaXMgY29udHJvbGxlciBncm91cCBpcyBwbGFjZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENvbnRyb2xsZXJQYW5lbEdyb3VwIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBwYWdlSWQgfSA9IHByb3BzXG5cbiAgY29uc3QgY29udHJvbGxlckluZm8gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBmaW5kUGFnZVJlbGF0ZWRDb250cm9sbGVySWRzKHN0YXRlLmFwcENvbmZpZywgcGFnZUlkLCBzdGF0ZS5icm93c2VyU2l6ZU1vZGUpXG4gIH0pXG5cbiAgY29uc3QgY29udHJvbGxlcklkcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gY29udHJvbGxlckluZm8uc3BsaXQoJywnKS5maWx0ZXIoaWQgPT4gaWQgIT09ICcnKSwgW2NvbnRyb2xsZXJJbmZvXSlcblxuICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBSdW50aW1lSW5mby5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuICB9KVxuXG4gIC8vIHNlbGVjdGVkIGNvbnRyb2xsZXJJZCBhbmQgd2lkZ2V0SWRcbiAgY29uc3QgW2NvbnRyb2xsZXJJZCwgZGVzY2VuZGFudFdpZGdldElkXSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKTogW3N0cmluZywgc3RyaW5nXSA9PiB7XG4gICAgaWYgKCFpc0Rlc2lnbk1vZGUpIHsgLy8gaWdub3JlIHRoaXMgaW4gbGl2ZSB2aWV3IG1vZGVcbiAgICAgIHJldHVybiBbbnVsbCwgbnVsbF1cbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gc3RhdGUuYXBwUnVudGltZUluZm8uc2VsZWN0aW9uXG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBbbnVsbCwgbnVsbF1cbiAgICB9XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBzZWxlY3Rpb25cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuXG4gICAgLy8gMS4gYSBjb250cm9sbGVyIHdpZGdldCB3aXRoIGZpeGVkIGFycmFuZ2VtZW50IGlzIHNlbGVjdGVkXG4gICAgaWYgKGxheW91dEl0ZW0/LnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCAmJiBsYXlvdXRJdGVtLndpZGdldElkKSB7XG4gICAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgICAgIGlmICh3aWRnZXRKc29uPy51cmkgPT09ICd3aWRnZXRzL2NvbW1vbi9jb250cm9sbGVyLycgJiYgc3RhdGUuYXBwQ29uZmlnLmNvbnRyb2xsZXJQYW5lbHM/LltsYXlvdXRJdGVtLndpZGdldElkXSkge1xuICAgICAgICByZXR1cm4gW2xheW91dEl0ZW0ud2lkZ2V0SWQsIG51bGxdXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZmluZFBhcmVudExheW91dEluZm8gPSAocGFyZW50OiB7IHR5cGU6IExheW91dFBhcmVudFR5cGUsIGlkOiBzdHJpbmcgfSkgPT4ge1xuICAgICAgc3dpdGNoIChwYXJlbnQ/LnR5cGUpIHtcbiAgICAgICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLlZpZXc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCB2aWV3SWQgPSBwYXJlbnQuaWRcbiAgICAgICAgICBjb25zdCBzZWN0aW9uSWQgPSBzdGF0ZS5hcHBDb25maWcudmlld3Nbdmlld0lkXS5wYXJlbnRcbiAgICAgICAgICBjb25zdCBzZWN0aW9uSnNvbiA9IHN0YXRlLmFwcENvbmZpZy5zZWN0aW9uc1tzZWN0aW9uSWRdXG4gICAgICAgICAgY29uc3QgbGF5b3V0SW5mbyA9IHNlY3Rpb25Kc29uLnBhcmVudD8uW3N0YXRlLmJyb3dzZXJTaXplTW9kZV0/LlswXSB8fCBzZWN0aW9uSnNvbi5wYXJlbnQ/LltzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlXT8uWzBdXG4gICAgICAgICAgY29uc3QgbGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mbz8ubGF5b3V0SWRdXG4gICAgICAgICAgcmV0dXJuIGxheW91dD8ucGFyZW50XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLldpZGdldDpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHdJZCA9IHBhcmVudC5pZFxuICAgICAgICAgIGNvbnN0IHdKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd0lkXVxuICAgICAgICAgIGNvbnN0IGxheW91dEluZm8gPSB3SnNvbi5wYXJlbnQ/LltzdGF0ZS5icm93c2VyU2l6ZU1vZGVdPy5bMF0gfHwgd0pzb24ucGFyZW50Py5bc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZV0/LlswXVxuICAgICAgICAgIGNvbnN0IGxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8/LmxheW91dElkXVxuICAgICAgICAgIHJldHVybiBsYXlvdXQ/LnBhcmVudFxuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyLiBhIHdpZGdldCBpbiB0aGUgY29ub3Ryb2xsZXIgd2lkZ2V0IGlzIHNlbGVjdGVkLCBhbmQgdGhlIGNvbnRyb2xsZXIgaXMgdXNlIGZpeGVkIGFycmFuZ2VtZW50XG4gICAgY29uc3QgbGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgbGV0IHBhcmVudEluZm8gPSBsYXlvdXQucGFyZW50XG5cbiAgICB3aGlsZSAocGFyZW50SW5mbykge1xuICAgICAgaWYgKHBhcmVudEluZm8udHlwZSA9PT0gTGF5b3V0UGFyZW50VHlwZS5XaWRnZXQpIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3BhcmVudEluZm8uaWRdXG4gICAgICAgIGlmICh3aWRnZXRKc29uPy51cmkgPT09ICd3aWRnZXRzL2NvbW1vbi9jb250cm9sbGVyLycgJiYgc3RhdGUuYXBwQ29uZmlnLmNvbnRyb2xsZXJQYW5lbHM/Llt3aWRnZXRKc29uLmlkXSkge1xuICAgICAgICAgIHJldHVybiBbcGFyZW50SW5mby5pZCwgbGF5b3V0SXRlbS5pZF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gZmluZCB1cHdhcmRcbiAgICAgIHBhcmVudEluZm8gPSBmaW5kUGFyZW50TGF5b3V0SW5mbyhwYXJlbnRJbmZvKVxuICAgIH1cbiAgICByZXR1cm4gW251bGwsIG51bGxdXG4gIH0sIFJlYWN0UmVkdXguc2hhbGxvd0VxdWFsKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbnRyb2xsZXJJZCkge1xuICAgICAgY29uc3Qgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgICAgIGNvbnN0IG9wZW5lZFdpZGdldHMgPSBPYmplY3Qua2V5cyhzdGF0ZS53aWRnZXRzUnVudGltZUluZm8gPz8ge30pLmZpbHRlcih3aWQgPT4ge1xuICAgICAgICBjb25zdCBpbmZvID0gc3RhdGUud2lkZ2V0c1J1bnRpbWVJbmZvW3dpZF1cbiAgICAgICAgcmV0dXJuIGluZm8uc3RhdGUgPT09IFdpZGdldFN0YXRlLk9wZW5lZCAmJiBpbmZvLmNvbnRyb2xsZXJXaWRnZXRJZCAhPT0gY29udHJvbGxlcklkXG4gICAgICB9KVxuXG4gICAgICBpZiAob3BlbmVkV2lkZ2V0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5jbG9zZVdpZGdldHMob3BlbmVkV2lkZ2V0cykpXG4gICAgICB9XG4gICAgfVxuICB9LCBbY29udHJvbGxlcklkXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGNsb3NlIGFsbCBvcGVuZWQgd2lkZ2V0cyB3aGVuIGRlc2lnbiBtb2RlIGNoYW5nZXNcbiAgICBjb25zdCBzdGF0ZSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKVxuICAgIGNvbnN0IG9wZW5lZFdpZGdldHMgPSBPYmplY3Qua2V5cyhzdGF0ZS53aWRnZXRzUnVudGltZUluZm8gPz8ge30pLmZpbHRlcih3aWRnZXRJZCA9PiB7XG4gICAgICBjb25zdCBpbmZvID0gc3RhdGUud2lkZ2V0c1J1bnRpbWVJbmZvW3dpZGdldElkXVxuICAgICAgcmV0dXJuIGluZm8uc3RhdGUgPT09IFdpZGdldFN0YXRlLk9wZW5lZFxuICAgIH0pXG4gICAgaWYgKG9wZW5lZFdpZGdldHMubGVuZ3RoID4gMCkge1xuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmNsb3NlV2lkZ2V0cyhvcGVuZWRXaWRnZXRzKSlcbiAgICB9XG4gIH0sIFtpc0Rlc2lnbk1vZGVdKVxuXG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAge2NvbnRyb2xsZXJJZHMubWFwKChpZCkgPT4gKFxuICAgICAgICA8Q29udHJvbGxlclBhbmVsQnVpbGRlclxuICAgICAgICAgIGtleT17aWR9XG4gICAgICAgICAgaXNEZXNpZ25Nb2RlPXtpc0Rlc2lnbk1vZGV9XG4gICAgICAgICAgc2VsZWN0ZWQ9e2NvbnRyb2xsZXJJZCA9PT0gaWQgJiYgZGVzY2VuZGFudFdpZGdldElkID09PSBudWxsfVxuICAgICAgICAgIGlubmVyU2VsZWN0ZWQ9e2NvbnRyb2xsZXJJZCA9PT0gaWQgJiYgZGVzY2VuZGFudFdpZGdldElkICE9IG51bGx9XG4gICAgICAgICAgY29udHJvbGxlcklkPXtpZH1cbiAgICAgICAgLz5cbiAgICAgICkpfVxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgY3NzLFxuICBwb2xpc2hlZCxcbiAgdHlwZSBJTVN0YXRlLFxuICBnZXRBcHBTdG9yZSxcbiAgYXBwQWN0aW9ucyxcbiAgV2lkZ2V0U3RhdGUsXG4gIHNwcmluZ1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBpbnRlcmFjdCB9IGZyb20gJ2ppbXUtY29yZS9kbmQnXG5pbXBvcnQgeyBnZXRUaGVtZTIgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IHsgdXRpbHMsIHNlYXJjaFV0aWxzLCBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgUmVzaXplSGFuZGxlcnMgfSBmcm9tICcuLi8uLi9idWlsZGVyL3Jlc2l6ZS1oYW5kbGVycydcbmltcG9ydCB7IGJpbmRSZXNpemVIYW5kbGVyIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9yZXNpemUtZXZlbnQtaGFuZGxlcidcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyBQYW5lbCB9IGZyb20gJy4vcGFuZWwnXG5pbXBvcnQgeyBjb252ZXJ0VG9TdHlsZSwgcGFuZWxUcmFuc2Zvcm1TdHlsZSB9IGZyb20gJy4uL3V0aWwnXG5pbXBvcnQgeyB1c2VBbmltYXRpb24gfSBmcm9tICcuL3VzZS1hbmltYXRpb24nXG5cbmNvbnN0IHsgYW5pbWF0ZWQgfSA9IHNwcmluZ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBjb250cm9sbGVySWQ6IHN0cmluZ1xuICBzZWxlY3RlZDogYm9vbGVhblxuICBpbm5lclNlbGVjdGVkOiBib29sZWFuXG4gIGlzRGVzaWduTW9kZTogYm9vbGVhblxufVxuXG5mdW5jdGlvbiB1cGRhdGVDb250cm9sbGVyU3R5bGUgKGNvbnRyb2xsZXJJZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBjb25zdCBhcHBDb25maWcgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIGxldCBvcmlnaW5TdHlsZSA9IGFwcENvbmZpZy5jb250cm9sbGVyUGFuZWxzW2NvbnRyb2xsZXJJZF1cbiAgaWYgKG9yaWdpblN0eWxlLndpZHRoTW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgaWYgKGR3ICE9PSAwKSB7XG4gICAgICBpZiAoZHggIT09IDApIHsgLy8gdXBkYXRlIGxlZnRcbiAgICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShvcmlnaW5TdHlsZS5sZWZ0KSkge1xuICAgICAgICAgIG9yaWdpblN0eWxlID0gb3JpZ2luU3R5bGUuc2V0KCdsZWZ0JywgYCR7KHBhcnNlRmxvYXQob3JpZ2luU3R5bGUubGVmdCkgKyBkeCAqIDEwMCAvIHdpbmRvdy5pbm5lcldpZHRoKS50b0ZpeGVkKDIpfSVgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9yaWdpblN0eWxlID0gb3JpZ2luU3R5bGUuc2V0KCdsZWZ0JywgYCR7TWF0aC5yb3VuZChwYXJzZUZsb2F0KG9yaWdpblN0eWxlLmxlZnQpICsgZHgpfXB4YClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gdXBkYXRlIHJpZ2h0XG4gICAgICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2Uob3JpZ2luU3R5bGUucmlnaHQpKSB7XG4gICAgICAgICAgb3JpZ2luU3R5bGUgPSBvcmlnaW5TdHlsZS5zZXQoJ3JpZ2h0JywgYCR7KHBhcnNlRmxvYXQob3JpZ2luU3R5bGUucmlnaHQpIC0gZHcgKiAxMDAgLyB3aW5kb3cuaW5uZXJXaWR0aCkudG9GaXhlZCgyKX0lYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcmlnaW5TdHlsZSA9IG9yaWdpblN0eWxlLnNldCgncmlnaHQnLCBgJHtNYXRoLnJvdW5kKHBhcnNlRmxvYXQob3JpZ2luU3R5bGUucmlnaHQpIC0gZHcpfXB4YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAodXRpbHMuaXNQZXJjZW50YWdlKG9yaWdpblN0eWxlLndpZHRoKSkge1xuICAgICAgb3JpZ2luU3R5bGUgPSBvcmlnaW5TdHlsZS5zZXQoJ3dpZHRoJywgYCR7KHdpZHRoICogMTAwIC8gd2luZG93LmlubmVyV2lkdGgpLnRvRml4ZWQoMil9JWApXG4gICAgfSBlbHNlIHtcbiAgICAgIG9yaWdpblN0eWxlID0gb3JpZ2luU3R5bGUuc2V0KCd3aWR0aCcsIGAke01hdGgucm91bmQod2lkdGgpfXB4YClcbiAgICB9XG4gIH1cbiAgaWYgKG9yaWdpblN0eWxlLmhlaWdodE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIGlmIChkaCAhPT0gMCkge1xuICAgICAgaWYgKGR5ICE9PSAwKSB7IC8vIHVwZGF0ZSB0b3BcbiAgICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShvcmlnaW5TdHlsZS50b3ApKSB7XG4gICAgICAgICAgb3JpZ2luU3R5bGUgPSBvcmlnaW5TdHlsZS5zZXQoJ3RvcCcsIGAkeyhwYXJzZUZsb2F0KG9yaWdpblN0eWxlLnRvcCkgKyBkeSAqIDEwMCAvIHdpbmRvdy5pbm5lckhlaWdodCkudG9GaXhlZCgyKX0lYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcmlnaW5TdHlsZSA9IG9yaWdpblN0eWxlLnNldCgndG9wJywgYCR7TWF0aC5yb3VuZChwYXJzZUZsb2F0KG9yaWdpblN0eWxlLnRvcCkgKyBkeSl9cHhgKVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyB1cGRhdGUgYm90dG9tXG4gICAgICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2Uob3JpZ2luU3R5bGUuYm90dG9tKSkge1xuICAgICAgICAgIG9yaWdpblN0eWxlID0gb3JpZ2luU3R5bGUuc2V0KCdib3R0b20nLCBgJHsocGFyc2VGbG9hdChvcmlnaW5TdHlsZS5ib3R0b20pIC0gZGggKiAxMDAgLyB3aW5kb3cuaW5uZXJIZWlnaHQpLnRvRml4ZWQoMil9JWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3JpZ2luU3R5bGUgPSBvcmlnaW5TdHlsZS5zZXQoJ2JvdHRvbScsIGAke01hdGgucm91bmQocGFyc2VGbG9hdChvcmlnaW5TdHlsZS5ib3R0b20pIC0gZGgpfXB4YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAodXRpbHMuaXNQZXJjZW50YWdlKG9yaWdpblN0eWxlLmhlaWdodCkpIHtcbiAgICAgIG9yaWdpblN0eWxlID0gb3JpZ2luU3R5bGUuc2V0KCdoZWlnaHQnLCBgJHsoaGVpZ2h0ICogMTAwIC8gd2luZG93LmlubmVySGVpZ2h0KS50b0ZpeGVkKDIpfSVgKVxuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5TdHlsZSA9IG9yaWdpblN0eWxlLnNldCgnaGVpZ2h0JywgYCR7TWF0aC5yb3VuZChoZWlnaHQpfXB4YClcbiAgICB9XG4gIH1cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRDb250cm9sbGVyUGFuZWwoY29udHJvbGxlcklkLCBvcmlnaW5TdHlsZSkuZXhlYygpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sbGVyUGFuZWxCdWlsZGVyIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBjb250cm9sbGVySWQsIHNlbGVjdGVkLCBpbm5lclNlbGVjdGVkLCBpc0Rlc2lnbk1vZGUgfSA9IHByb3BzXG4gIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBbaXNSZXNpemluZywgc2V0SXNSZXNpemluZ10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3NpemUsIHNldFNpemVdID0gUmVhY3QudXNlU3RhdGU8eyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZHg6IG51bWJlciwgZHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciB9PigpXG4gIGNvbnN0IFttaW5pbWl6ZWQsIHNldE1pbmltaXplZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBpbm5lckxheW91dElkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICAvLyBmaW5kIHRoZSBsYXlvdXRJbmZvIG9mIHRoZSBvcGVuZWQgd2lkZ2V0XG4gICAgY29uc3QgY29udHJvbGxlckpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1tjb250cm9sbGVySWRdXG4gICAgY29uc3QgbGF5b3V0TmFtZSA9IGNvbnRyb2xsZXJKc29uLm1hbmlmZXN0LmxheW91dHNbMF0ubmFtZVxuICAgIGNvbnN0IHNpemVNb2RlTGF5b3V0cyA9IGNvbnRyb2xsZXJKc29uLmxheW91dHNbbGF5b3V0TmFtZV1cbiAgICByZXR1cm4gc2VhcmNoVXRpbHMuZmluZExheW91dElkKHNpemVNb2RlTGF5b3V0cywgc3RhdGUuYnJvd3NlclNpemVNb2RlLCBzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlKVxuICB9KVxuXG4gIGNvbnN0IGl0ZW1zID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICAvLyBmaW5kIHRoZSBpdGVtcyBvZiB0aGUgb3BlbmVkIHdpZGdldFxuICAgIGNvbnN0IGxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2lubmVyTGF5b3V0SWRdXG4gICAgY29uc3QgaXRlbUlkcyA9IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50ID8/IHt9KVxuICAgICAgLmZpbHRlcihpdGVtSWQgPT4ge1xuICAgICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaXRlbUlkXVxuICAgICAgICByZXR1cm4gbGF5b3V0SXRlbT8ud2lkZ2V0SWQgIT0gbnVsbCAmJiAhbGF5b3V0SXRlbS5pc1BlbmRpbmdcbiAgICAgIH0pXG4gICAgaXRlbUlkcy5zb3J0KClcbiAgICByZXR1cm4gaXRlbUlkcy5qb2luKCcsJylcbiAgfSlcblxuICBjb25zdCBoYXNJdGVtT3BlbmVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBpZiAoaXNEZXNpZ25Nb2RlKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3Qgb3BlbmVkV2lkZ2V0cyA9IE9iamVjdC5rZXlzKHN0YXRlLndpZGdldHNSdW50aW1lSW5mbyA/PyB7fSkuZmlsdGVyKHdpZGdldElkID0+IHtcbiAgICAgIGNvbnN0IGluZm8gPSBzdGF0ZS53aWRnZXRzUnVudGltZUluZm9bd2lkZ2V0SWRdXG4gICAgICByZXR1cm4gaW5mby5zdGF0ZSA9PT0gV2lkZ2V0U3RhdGUuT3BlbmVkXG4gICAgfSlcbiAgICAvLyBmaW5kIHRoZSBpdGVtcyBvZiB0aGUgb3BlbmVkIHdpZGdldFxuICAgIGNvbnN0IGxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2lubmVyTGF5b3V0SWRdXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50ID8/IHt9KVxuICAgICAgLnNvbWUoaXRlbUlkID0+IHtcbiAgICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dC5jb250ZW50W2l0ZW1JZF1cbiAgICAgICAgcmV0dXJuIGxheW91dEl0ZW0/LndpZGdldElkICE9IG51bGwgJiYgIWxheW91dEl0ZW0uaXNQZW5kaW5nICYmIG9wZW5lZFdpZGdldHMuaW5jbHVkZXMobGF5b3V0SXRlbS53aWRnZXRJZClcbiAgICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgaXRlbUlkTGlzdCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gaXRlbXMuc3BsaXQoJywnKS5maWx0ZXIoaWQgPT4gaWQgIT09ICcnKSwgW2l0ZW1zXSlcblxuICBjb25zdCBwYW5lbEpzb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcuY29udHJvbGxlclBhbmVsc1tjb250cm9sbGVySWRdXG4gIH0pXG5cbiAgY29uc3QgYW5pbWF0aW9uU3R5bGUgPSB1c2VBbmltYXRpb24oeyBjb250cm9sbGVySWQgfSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCB3aWR0aFxuICAgIGxldCBoZWlnaHRcblxuICAgIGNvbnN0IG9uUmVzaXplU3RhcnQgPSAoXywgaW5pdFdpZHRoLCBpbml0SGVpZ2h0KSA9PiB7XG4gICAgICB3aWR0aCA9IGluaXRXaWR0aFxuICAgICAgaGVpZ2h0ID0gaW5pdEhlaWdodFxuICAgICAgc2V0SXNSZXNpemluZyh0cnVlKVxuICAgICAgc2V0U2l6ZSh7IGR4OiAwLCBkeTogMCwgZHc6IDAsIGRoOiAwLCB3aWR0aDogaW5pdFdpZHRoLCBoZWlnaHQ6IGluaXRIZWlnaHQgfSlcbiAgICB9XG5cbiAgICBjb25zdCBvblJlc2l6aW5nID0gKF8sIGR4LCBkeSwgZHcsIGRoKSA9PiB7XG4gICAgICBzZXRTaXplKHsgZHgsIGR5LCBkdywgZGgsIHdpZHRoOiB3aWR0aCArIGR3LCBoZWlnaHQ6IGhlaWdodCArIGRoIH0pXG4gICAgfVxuXG4gICAgY29uc3Qgb25SZXNpemVFbmQgPSAoXywgZHgsIGR5LCBkdywgZGgpID0+IHtcbiAgICAgIHNldElzUmVzaXppbmcoZmFsc2UpXG4gICAgICB1cGRhdGVDb250cm9sbGVyU3R5bGUoY29udHJvbGxlcklkLCBkeCwgZHksIGR3LCBkaCwgd2lkdGggKyBkdywgaGVpZ2h0ICsgZGgpXG4gICAgfVxuXG4gICAgbGV0IGludGVyYWN0YWJsZTogSW50ZXJhY3QuSW50ZXJhY3RhYmxlXG4gICAgaWYgKHJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBpbnRlcmFjdGFibGUgPSBpbnRlcmFjdChyZWYuY3VycmVudCkub3JpZ2luKCdwYXJlbnQnKVxuICAgICAgYmluZFJlc2l6ZUhhbmRsZXIoaW50ZXJhY3RhYmxlLCB7XG4gICAgICAgIGxheW91dEl0ZW1JZDogJ2NvbnRyb2xsZXInLFxuICAgICAgICByZXN0cmljdEVkZ2VzOiB0cnVlLFxuICAgICAgICBvblJlc2l6ZVN0YXJ0LFxuICAgICAgICBvblJlc2l6aW5nLFxuICAgICAgICBvblJlc2l6ZUVuZFxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGludGVyYWN0YWJsZT8udW5zZXQoKVxuICAgIH1cbiAgfSwgW2NvbnRyb2xsZXJJZF0pXG5cbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSwgW10pXG5cbiAgY29uc3QgdG9nZ2xlTWluaW1pemVkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldE1pbmltaXplZCghbWluaW1pemVkKVxuICB9LCBbbWluaW1pemVkXSlcblxuICBjb25zdCBoYW5kbGVDbG9zZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlLCB3aWRnZXRJZCkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VsZWN0aW9uQ2hhbmdlZChudWxsKSlcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuY2xvc2VXaWRnZXQod2lkZ2V0SWQpKVxuICB9LCBbXSlcblxuICBjb25zdCB2aXNpYmxlID0gaXNEZXNpZ25Nb2RlID8gKHNlbGVjdGVkIHx8IGlubmVyU2VsZWN0ZWQpIDogaGFzSXRlbU9wZW5lZFxuXG4gIGNvbnN0IGdldFN0eWxlID0gKCkgPT4ge1xuICAgIGNvbnN0IHRoZW1lID0gZ2V0VGhlbWUyKClcbiAgICBpZiAoaXNSZXNpemluZykge1xuICAgICAgbGV0IGhQb3NcbiAgICAgIGxldCB2UG9zXG4gICAgICBpZiAocGFuZWxKc29uLndpZHRoTW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgICAgIGhQb3MgPSBjc3NgXG4gICAgICAgICAgbGVmdDogY2FsYygke3BhbmVsSnNvbi5sZWZ0fSArICR7c2l6ZS5keH1weCk7XG4gICAgICAgICAgcmlnaHQ6ICR7c2l6ZS5keCA9PT0gMCA/IGBjYWxjKCR7cGFuZWxKc29uLnJpZ2h0fSAtICR7c2l6ZS5kd31weClgIDogcGFuZWxKc29uLnJpZ2h0fTtcbiAgICAgICAgYFxuICAgICAgfVxuICAgICAgaWYgKHBhbmVsSnNvbi5oZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICAgICAgdlBvcyA9IGNzc2BcbiAgICAgICAgICB0b3A6IGNhbGMoJHtwYW5lbEpzb24udG9wfSArICR7c2l6ZS5keX1weCk7XG4gICAgICAgICAgYm90dG9tOiAke3NpemUuZHkgPT09IDAgPyBgY2FsYygke3BhbmVsSnNvbi5ib3R0b219IC0gJHtzaXplLmRofXB4KWAgOiBwYW5lbEpzb24uYm90dG9tfTtcbiAgICAgICAgYFxuICAgICAgfVxuICAgICAgcmV0dXJuIGNzc2BcbiAgICAgICAgJHtjb252ZXJ0VG9TdHlsZShwYW5lbEpzb24pfTtcbiAgICAgICAgZGlzcGxheTogJHt2aXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJ307XG4gICAgICAgIHdpZHRoOiAke3BhbmVsSnNvbi53aWR0aE1vZGUgIT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCA/IHNpemUud2lkdGggKyAncHgnIDogJ2F1dG8nfTtcbiAgICAgICAgaGVpZ2h0OiAke3BhbmVsSnNvbi5oZWlnaHRNb2RlICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2ggPyBzaXplLmhlaWdodCArICdweCcgOiAnYXV0byd9O1xuICAgICAgICAke2hQb3N9XG4gICAgICAgICR7dlBvc31cbiAgICAgICAgYm9yZGVyOiAke3NlbGVjdGVkID8gJzFweCBzb2xpZCB2YXIoLS1wcmltYXJ5LTYwMCknIDogJ25vbmUnfTtcbiAgICAgICAgYmFja2dyb3VuZDogJHtzZWxlY3RlZCA/IHBvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs2MDBdLCAwLjIpIDogJ3RyYW5zcGFyZW50J307XG4gICAgICBgXG4gICAgfVxuICAgIHJldHVybiBjc3NgXG4gICAgICAke2NvbnZlcnRUb1N0eWxlKHBhbmVsSnNvbil9O1xuICAgICAgZGlzcGxheTogJHt2aXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJ307XG4gICAgICBoZWlnaHQ6ICR7bWluaW1pemVkID8gJzM2cHgnIDogcGFuZWxKc29uPy5oZWlnaHR9O1xuICAgICAgYm9yZGVyOiAke3NlbGVjdGVkID8gJzFweCBzb2xpZCB2YXIoLS1wcmltYXJ5LTYwMCknIDogJ25vbmUnfTtcbiAgICAgIHRyYW5zaXRpb246IGhlaWdodCAwLjNzIGVhc2UtaW4tb3V0O1xuICAgICAgYmFja2dyb3VuZDogJHtzZWxlY3RlZCA/IHBvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs2MDBdLCAwLjIpIDogJ3RyYW5zcGFyZW50J307XG4gICAgYFxuICB9XG5cbiAgbGV0IG1lcmdlZFN0eWxlID0gYW5pbWF0aW9uU3R5bGVcbiAgY29uc3QgcGFuZWxUcmFuc2Zvcm0gPSBwYW5lbFRyYW5zZm9ybVN0eWxlKHBhbmVsSnNvbilcbiAgaWYgKHBhbmVsVHJhbnNmb3JtICE9IG51bGwpIHtcbiAgICBtZXJnZWRTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgIHRyYW5zZm9ybTogcGFuZWxUcmFuc2Zvcm1cbiAgICB9LCBhbmltYXRpb25TdHlsZSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGFuaW1hdGVkLmRpdlxuICAgICAgcmVmPXtyZWZ9XG4gICAgICBzdHlsZT17bWVyZ2VkU3R5bGV9XG4gICAgICBjc3M9e2dldFN0eWxlKCl9XG4gICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja31cbiAgICAgIGNsYXNzTmFtZT0ncGFuZWwtY29udGFpbmVyJ1xuICAgID5cbiAgICAgIHtzZWxlY3RlZCAmJiAoXG4gICAgICAgIDxSZXNpemVIYW5kbGVyc1xuICAgICAgICAgIGxlZnQ9eyFwYW5lbEpzb24/LnBvc2l0aW9uPy5pbmNsdWRlcygnTEVGVCcpIHx8IHBhbmVsSnNvbi53aWR0aE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaH1cbiAgICAgICAgICByaWdodD17IXBhbmVsSnNvbj8ucG9zaXRpb24/LmluY2x1ZGVzKCdSSUdIVCcpIHx8IHBhbmVsSnNvbi53aWR0aE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaH1cbiAgICAgICAgICB0b3A9eyFwYW5lbEpzb24/LnBvc2l0aW9uPy5pbmNsdWRlcygnVE9QJykgfHwgcGFuZWxKc29uLmhlaWdodE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaH1cbiAgICAgICAgICBib3R0b209eyFwYW5lbEpzb24/LnBvc2l0aW9uPy5pbmNsdWRlcygnQk9UVE9NJykgfHwgcGFuZWxKc29uLmhlaWdodE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaH1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgIHtpdGVtSWRMaXN0Lm1hcChpdGVtSWQgPT4gKFxuICAgICAgICAgIDxQYW5lbFxuICAgICAgICAgICAga2V5PXtpdGVtSWR9XG4gICAgICAgICAgICBjb250cm9sbGVySWQ9e2NvbnRyb2xsZXJJZH1cbiAgICAgICAgICAgIGxheW91dElkPXtpbm5lckxheW91dElkfVxuICAgICAgICAgICAgbGF5b3V0SXRlbUlkPXtpdGVtSWR9XG4gICAgICAgICAgICBtaW5pbWl6ZWQ9e21pbmltaXplZH1cbiAgICAgICAgICAgIG9uVG9nZ2xlPXt0b2dnbGVNaW5pbWl6ZWR9XG4gICAgICAgICAgICBvbkNsb3NlPXtoYW5kbGVDbG9zZX1cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgPC9hbmltYXRlZC5kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBXaWRnZXRNYW5hZ2VyLFxuICBFcnJvckJvdW5kYXJ5LFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgQW5pbWF0aW9uU2V0dGluZyxcbiAgQXBwTW9kZSxcbiAgV2lkZ2V0U3RhdGUsXG4gIGNsYXNzTmFtZXMsXG4gIFdpZGdldFR5cGUsXG4gIGhvb2tzLFxuICBnZXRBcHBTdG9yZSxcbiAgYXBwQWN0aW9ucyxcbiAgc3ByaW5nLFxuICBnZXRBbmltYXRpb25FZmZlY3QsXG4gIEFuaW1hdGlvblR5cGUsXG4gIERFRkFVTFRfQU5JTUFUSU9OX1BST1BTLFxuICBsb2Rhc2hcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBMb2FkaW5nLCBMb2FkaW5nVHlwZSwgZ2V0RmFsbGJhY2tQbGFjZW1lbnRzTW9kaWZpZXIsIHVzZVRyYXBGb2N1c0xvb3AgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgQ2xvc2VPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL2Nsb3NlJ1xuaW1wb3J0IHsgTGF5b3V0SXRlbVRvb2xiYXIgfSBmcm9tICcuLi8uLi9idWlsZGVyL2xheW91dC1pdGVtLXRvb2xiYXInXG5pbXBvcnQgeyBnZXRUaGVtZTIgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IHsgVXBEb3VibGVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAtZG91YmxlJ1xuXG5jb25zdCB7IGFuaW1hdGVkLCB1c2VTcHJpbmcgfSA9IHNwcmluZ1xuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13aGl0ZSk7XG4gIGJveC1zaGFkb3c6IDBweCAwcHggMTBweCAxcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAucGFuZWwtaGVhZGVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LTYwMCk7XG4gICAgY29sb3I6IHZhcigtLXdoaXRlKTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIC5hY3Rpb25zIC5qaW11LWJ0biB7XG4gICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS0yMDApO1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS13aGl0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC5wYW5lbC1jb250ZW50IHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAgIC53aWRnZXQtY29udGVudCB7XG4gICAgICB6LWluZGV4OiAwO1xuICAgIH1cblxuICAgIC53aWRnZXQtbWFzayB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIHRvcDogMDtcbiAgICAgIGJvdHRvbTogMDtcbiAgICAgIHotaW5kZXg6IDE7XG4gICAgfVxuICB9XG5gXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNvbnRyb2xsZXJJZDogc3RyaW5nXG4gIGxheW91dElkOiBzdHJpbmdcbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmdcbiAgbWluaW1pemVkOiBib29sZWFuXG4gIG9uQ2xvc2U6IChlLCBzdHJpbmcpID0+IHZvaWRcbiAgb25Ub2dnbGU6ICgpID0+IHZvaWRcbiAgb25DbGljaz86IChlKSA9PiB2b2lkXG59XG5cbmNvbnN0IG1vZGlmaWVycyA9IFtcbiAge1xuICAgIG5hbWU6ICdwcmV2ZW50T3ZlcmZsb3cnLFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgb3B0aW9uczoge1xuICAgICAgYm91bmRhcnk6ICd2aWV3cG9ydCcsXG4gICAgICBhbHRBeGlzOiB0cnVlIC8vIGFsbG93IHRoZSBwb3BwZXIgdG8gb3ZlcmxhcCBpdHMgcmVmZXJlbmNlIGVsZW1lbnQuXG4gICAgfVxuICB9LFxuICB7XG4gICAgbmFtZTogJ2ZsaXAnLFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgb3B0aW9uczoge1xuICAgICAgYm91bmRhcnk6ICd2aWV3cG9ydCcsXG4gICAgICBmYWxsYmFja1BsYWNlbWVudHM6IGdldEZhbGxiYWNrUGxhY2VtZW50c01vZGlmaWVyKFsndG9wLXN0YXJ0JywgJ2JvdHRvbS1zdGFydCddLCB0cnVlKS5vcHRpb25zLmZhbGxiYWNrUGxhY2VtZW50c1xuICAgIH1cbiAgfVxuXVxuXG5leHBvcnQgZnVuY3Rpb24gUGFuZWwgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGNvbnRyb2xsZXJJZCwgbWluaW1pemVkLCBvbkNsaWNrLCBvblRvZ2dsZSwgb25DbG9zZSB9ID0gcHJvcHNcbiAgY29uc3QgW21vdW50ZWQsIHNldE1vdW50ZWRdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKClcblxuICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBSdW50aW1lSW5mby5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuICB9KVxuXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBzdGF0ZS5hcHBSdW50aW1lSW5mby5zZWxlY3Rpb25cbiAgICBpZiAoIXNlbGVjdGlvbikgeyAvLyBpZ25vcmUgdGhpcyBpbiBsaXZlIHZpZXcgbW9kZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKGxheW91dElkID09PSBzZWxlY3Rpb24ubGF5b3V0SWQgJiYgbGF5b3V0SXRlbUlkID09PSBzZWxlY3Rpb24ubGF5b3V0SXRlbUlkKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IG5lc3RlZCA9IHJlZi5jdXJyZW50Py5xdWVyeVNlbGVjdG9yKGBkaXYuYnVpbGRlci1sYXlvdXQtaXRlbVtkYXRhLWxheW91dGlkPVwiJHtzZWxlY3Rpb24ubGF5b3V0SWR9XCJdW2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtzZWxlY3Rpb24ubGF5b3V0SXRlbUlkfVwiXWApXG4gICAgcmV0dXJuIG5lc3RlZCAhPSBudWxsXG4gIH0pXG5cbiAgY29uc3Qgd2lkZ2V0SWQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gICAgcmV0dXJuIGxheW91dEl0ZW0ud2lkZ2V0SWRcbiAgfSlcblxuICBjb25zdCBoYXNFbWJlZGRlZExheW91dCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uPy5tYW5pZmVzdD8ucHJvcGVydGllcz8uaGFzRW1iZWRkZWRMYXlvdXQgJiYgT2JqZWN0LmtleXMod2lkZ2V0SnNvbi5sYXlvdXRzID8/IHt9KS5sZW5ndGggPiAwXG4gIH0pXG5cbiAgY29uc3QgaXNGdW5jdGlvbmFsV2lkZ2V0ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24/Lm1hbmlmZXN0Py53aWRnZXRUeXBlICE9PSBXaWRnZXRUeXBlLkxheW91dFxuICB9KVxuXG4gIGNvbnN0IHN1cHBvcnRJbmxpbmVFZGl0aW5nID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24/Lm1hbmlmZXN0Py5wcm9wZXJ0aWVzPy5zdXBwb3J0SW5saW5lRWRpdGluZyA/PyBmYWxzZVxuICB9KVxuXG4gIGNvbnN0IGlzSW5saW5lRWRpdGluZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0UnVudGltZUluZm8gPSBzdGF0ZS53aWRnZXRzUnVudGltZUluZm9bd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHN1cHBvcnRJbmxpbmVFZGl0aW5nICYmIHdpZGdldFJ1bnRpbWVJbmZvPy5pc0lubGluZUVkaXRpbmdcbiAgfSlcblxuICBjb25zdCBpc09wZW4gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGluZm8gPSBzdGF0ZS53aWRnZXRzUnVudGltZUluZm8/Llt3aWRnZXRJZF1cbiAgICByZXR1cm4gaW5mbz8uc3RhdGUgPT09IFdpZGdldFN0YXRlLk9wZW5lZFxuICB9KVxuXG4gIGNvbnN0IGxhYmVsID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24/LmxhYmVsXG4gIH0sIFJlYWN0UmVkdXguc2hhbGxvd0VxdWFsKVxuXG4gIGNvbnN0IHdpZGdldENsYXNzTG9hZGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRSdW50aW1lSW5mbyA9IHN0YXRlLndpZGdldHNSdW50aW1lSW5mb1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0UnVudGltZUluZm8/LmlzQ2xhc3NMb2FkZWQgPz8gZmFsc2VcbiAgfSlcblxuICBjb25zdCBlZmZlY3Q6IEFuaW1hdGlvblNldHRpbmcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHBhbmVsSnNvbiA9IHN0YXRlLmFwcENvbmZpZy5jb250cm9sbGVyUGFuZWxzW2NvbnRyb2xsZXJJZF1cbiAgICByZXR1cm4gcGFuZWxKc29uLmVmZmVjdFxuICB9KVxuXG4gIGNvbnN0IGFuaW1hdGlvbk9iaiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChlZmZlY3Q/LnR5cGUgJiYgZWZmZWN0LnR5cGUgIT09IEFuaW1hdGlvblR5cGUuTm9uZSkge1xuICAgICAgcmV0dXJuIGdldEFuaW1hdGlvbkVmZmVjdChlZmZlY3QudHlwZSwge1xuICAgICAgICBjb25maWdUeXBlOiBlZmZlY3Qub3B0aW9uPy5jb25maWdUeXBlLFxuICAgICAgICBkaXJlY3Rpb246IGVmZmVjdC5vcHRpb24/LmRpcmVjdGlvblxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSwgW2VmZmVjdF0pXG5cbiAgY29uc3QgW2VmZmVjdFByb3BzLCBhcGldID0gdXNlU3ByaW5nKCgpID0+IHtcbiAgICByZXR1cm4gREVGQVVMVF9BTklNQVRJT05fUFJPUFNcbiAgfSwgW2FuaW1hdGlvbk9ial0pXG5cbiAgY29uc3QgaGFuZGxlQ2xvc2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIG9uQ2xvc2UoZSwgd2lkZ2V0SWQpXG4gICAgLy8gYWZ0ZXIgcGFuZWwgY2xvc2VkLCBmb2N1cyBiYWNrIHRvIGJ1dHRvblxuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC53aWRnZXQtY29udHJvbGxlciAuYXZhdGFyLWNhcmRbZGF0YS13aWRnZXRpZD0nJHt3aWRnZXRJZH0nXWApLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG4gICAgYnV0dG9uPy5mb2N1cygpXG4gIH0sIFt3aWRnZXRJZCwgb25DbG9zZV0pXG5cbiAgdXNlVHJhcEZvY3VzTG9vcChyZWYsIHRydWUsIHRydWUsIGZhbHNlLCBtb3VudGVkICYmIGlzT3BlbilcblxuICBjb25zdCBoYW5kbGVDbGljayA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBSdW50aW1lSW5mbz8uc2VsZWN0aW9uXG5cbiAgICBpZiAoIXNlbGVjdGlvbiB8fCBzZWxlY3Rpb24ubGF5b3V0SWQgIT09IGxheW91dElkIHx8IHNlbGVjdGlvbi5sYXlvdXRJdGVtSWQgIT09IGxheW91dEl0ZW1JZCkge1xuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNlbGVjdGlvbkNoYW5nZWQoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0pKVxuICAgIH1cblxuICAgIG9uQ2xpY2s/LihlKVxuICB9LCBbbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgb25DbGlja10pXG5cbiAgLyoqXG4gICAqIEVuYWJsZSBpbmxpbmUgZWRpdGluZyBtb2RlIGZvciB0aGUgd2lkZ2V0XG4gICAqXG4gICAqIEBtZW1iZXJvZiBMYXlvdXRJdGVtSW5CdWlsZGVyXG4gICAqL1xuICBjb25zdCBoYW5kbGVEb3VibGVDbGljayA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChzdXBwb3J0SW5saW5lRWRpdGluZykge1xuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNldFdpZGdldElzSW5saW5lRWRpdGluZ1N0YXRlKHdpZGdldElkLCB0cnVlKSlcbiAgICB9XG4gIH0sIFt3aWRnZXRJZCwgc3VwcG9ydElubGluZUVkaXRpbmddKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKChpc09wZW4gfHwgc2VsZWN0ZWQpICYmICFtb3VudGVkKSB7IC8vIGxvYWQgdGhlIGNsYXNzIHdoZW4gdGhpcyB3aWRnZXQgaXMgb3BlbmVkIHRoZSBmaXJzdCB0aW1lXG4gICAgICBzZXRNb3VudGVkKHRydWUpXG4gICAgICBXaWRnZXRNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICAgICAgLmxvYWRXaWRnZXRDbGFzcyh3aWRnZXRJZClcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH0pXG4gICAgfVxuICB9LCBbaXNPcGVuLCBzZWxlY3RlZCwgd2lkZ2V0SWQsIG1vdW50ZWRdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzT3BlbiAmJiAhaXNEZXNpZ25Nb2RlICYmIGFuaW1hdGlvbk9iaiAhPSBudWxsKSB7XG4gICAgICBhcGkuc3RhcnQoe1xuICAgICAgICAuLi5hbmltYXRpb25PYmouYW5pbWF0ZVByb3BzKCksXG4gICAgICAgIG9uUmVzdDogKCkgPT4ge1xuICAgICAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICAgICAgICByZWYuY3VycmVudC5zdHlsZS5jbGlwUGF0aCA9IG51bGwgLy8gZWxpbWluYXRlIGNsaXBQYXRoIHRvIHNob3cgYm94LXNoYWRvd1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQucGFyZW50RWxlbWVudC5zdHlsZS5jbGlwUGF0aCA9IG51bGxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FwaSwgaXNPcGVuLCBpc0Rlc2lnbk1vZGUsIGFuaW1hdGlvbk9ial0pXG5cbiAgbGV0IFdpZGdldENsYXNzXG4gIGNvbnN0IHNob3VsZFJlbmRlciA9IGlzRGVzaWduTW9kZSA/IHNlbGVjdGVkIDogaXNPcGVuXG5cbiAgaWYgKG1vdW50ZWQgJiYgd2lkZ2V0Q2xhc3NMb2FkZWQpIHtcbiAgICBXaWRnZXRDbGFzcyA9IFdpZGdldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRXaWRnZXRDbGFzcyh3aWRnZXRJZClcbiAgfVxuXG4gIGNvbnN0IHNob3dNYXNrID0gaXNEZXNpZ25Nb2RlICYmICFpc0lubGluZUVkaXRpbmcgJiYgaXNGdW5jdGlvbmFsV2lkZ2V0ICYmICFoYXNFbWJlZGRlZExheW91dFxuICBjb25zdCB0aGVtZSA9IGdldFRoZW1lMigpXG4gIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbiAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF1cblxuICByZXR1cm4gKFxuICAgIDxhbmltYXRlZC5kaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnY29udHJvbGxlci1wYW5lbCBmbGV4LWNvbHVtbiB3LTEwMCBoLTEwMCcsIHsgJ2Qtbm9uZSc6ICFtb3VudGVkIHx8ICFzaG91bGRSZW5kZXIgfSl9XG4gICAgICBjc3M9e3N0eWxlfVxuICAgICAgc3R5bGU9e2FuaW1hdGlvbk9iaiAhPSBudWxsID8gZWZmZWN0UHJvcHMgOiBudWxsfVxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICBvbkRvdWJsZUNsaWNrPXtoYW5kbGVEb3VibGVDbGlja31cbiAgICAgIHJlZj17cmVmfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYW5lbC1oZWFkZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBmbGV4LXNocmluay0wIHB4LTQnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGFiZWwgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBoLTEwMCc+XG4gICAgICAgICAgey8qIDxJY29uIGljb249e2ljb259IHNpemU9ezE2fSAvPiAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZSc+e2xhYmVsfTwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FjdGlvbnMgbWwtYXV0byBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0ncC0wJyBpY29uIHR5cGU9J3RlcnRpYXJ5JyBzaXplPSdzbScgb25DbGljaz17b25Ub2dnbGV9PlxuICAgICAgICAgICAgPFVwRG91YmxlT3V0bGluZWQgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKCR7bWluaW1pemVkID8gMTgwIDogMH1kZWcpO1xuICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlLWluLW91dDtcbiAgICAgICAgICAgIGB9Lz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0ncC0wIG1sLTInIGljb24gdHlwZT0ndGVydGlhcnknIHNpemU9J3NtJyBvbkNsaWNrPXtoYW5kbGVDbG9zZX0+XG4gICAgICAgICAgICA8Q2xvc2VPdXRsaW5lZCAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3BhbmVsLWNvbnRlbnQgZC1mbGV4IGZsZXgtZ3Jvdy0xJz5cbiAgICAgICAgeyF3aWRnZXRDbGFzc0xvYWRlZCAmJiA8TG9hZGluZyB0eXBlPXtMb2FkaW5nVHlwZS5Eb251dH0gLz59XG4gICAgICAgIHtXaWRnZXRDbGFzcyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwIHdpZGdldC1jb250ZW50IHAtMSc+XG4gICAgICAgICAgICA8RXJyb3JCb3VuZGFyeT5cbiAgICAgICAgICAgICAgPFdpZGdldENsYXNzIHdpZGdldElkPXt3aWRnZXRJZH0gbGF5b3V0SWQ9e2xheW91dElkfSBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW1JZH0gLz5cbiAgICAgICAgICAgICAge2lzRGVzaWduTW9kZSAmJiAoXG4gICAgICAgICAgICAgICAgPExheW91dEl0ZW1Ub29sYmFyXG4gICAgICAgICAgICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICAgICAgICBsYXlvdXRJdGVtPXtsYXlvdXRJdGVtfVxuICAgICAgICAgICAgICAgICAgcmVmRWxlbWVudD17cmVmLmN1cnJlbnR9XG4gICAgICAgICAgICAgICAgICBtb2RpZmllcnM9e21vZGlmaWVyc31cbiAgICAgICAgICAgICAgICAgIGJ1aWxkZXJUaGVtZT17dGhlbWV9XG4gICAgICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0cmFuc2xhdGV9XG4gICAgICAgICAgICAgICAgICBzaG93RGVmYXVsdFRvb2xzPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9FcnJvckJvdW5kYXJ5PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICB7c2hvd01hc2sgJiYgPGRpdiBjbGFzc05hbWU9J3dpZGdldC1tYXNrJyAvPn1cbiAgICAgIDwvZGl2PlxuICAgIDwvYW5pbWF0ZWQuZGl2PlxuICApXG59XG4iLCJpbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICBnZXRBcHBTdG9yZSxcbiAgYXBwQWN0aW9ucyxcbiAgdHlwZSBBbmltYXRpb25TZXR0aW5nLFxuICBBbmltYXRpb25UeXBlLFxuICBnZXRBbmltYXRpb25FZmZlY3QsXG4gIHNwcmluZyxcbiAgREVGQVVMVF9BTklNQVRJT05fUFJPUFNcbn0gZnJvbSAnamltdS1jb3JlJ1xuXG5jb25zdCB7IHVzZVNwcmluZyB9ID0gc3ByaW5nXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNvbnRyb2xsZXJJZDogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBbmltYXRpb24gKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IGNvbnRyb2xsZXJJZCB9ID0gcHJvcHNcblxuICBjb25zdCBwcmV2aWV3SWQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGFuaW1hdGlvblByZXZpZXcgPSBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uYW5pbWF0aW9uUHJldmlld1xuICAgIGlmIChhbmltYXRpb25QcmV2aWV3Py5jb250cm9sbGVySWQgPT09IGNvbnRyb2xsZXJJZCkge1xuICAgICAgcmV0dXJuIGFuaW1hdGlvblByZXZpZXcuaWRcbiAgICB9XG4gICAgcmV0dXJuIC0xXG4gIH0pXG5cbiAgY29uc3QgZWZmZWN0OiBBbmltYXRpb25TZXR0aW5nID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBwYW5lbEpzb24gPSBzdGF0ZS5hcHBDb25maWcuY29udHJvbGxlclBhbmVsc1tjb250cm9sbGVySWRdXG4gICAgcmV0dXJuIHBhbmVsSnNvbi5lZmZlY3RcbiAgfSlcblxuICBjb25zdCBhbmltYXRpb25PYmogPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoZWZmZWN0Py50eXBlICYmIGVmZmVjdC50eXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmUpIHtcbiAgICAgIHJldHVybiBnZXRBbmltYXRpb25FZmZlY3QoZWZmZWN0LnR5cGUsIHtcbiAgICAgICAgY29uZmlnVHlwZTogZWZmZWN0Lm9wdGlvbj8uY29uZmlnVHlwZSxcbiAgICAgICAgZGlyZWN0aW9uOiBlZmZlY3Qub3B0aW9uPy5kaXJlY3Rpb25cbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sIFtlZmZlY3RdKVxuXG4gIGNvbnN0IFtlZmZlY3RQcm9wcywgYXBpXSA9IHVzZVNwcmluZygoKSA9PiB7XG4gICAgcmV0dXJuIERFRkFVTFRfQU5JTUFUSU9OX1BST1BTXG4gIH0sIFthbmltYXRpb25PYmpdKVxuXG4gIC8vIGFuaW1hdGlvbiBjYXVzZWQgYnkgcHJldmlldyBhY3Rpb25zXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByZXZpZXdJZCA+IDAgJiYgYW5pbWF0aW9uT2JqICE9IG51bGwpIHtcbiAgICAgIGFwaS5zdGFydCh7XG4gICAgICAgIC4uLmFuaW1hdGlvbk9iai5hbmltYXRlUHJvcHMoKSxcbiAgICAgICAgb25SZXN0OiAoKSA9PiB7XG4gICAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmNsZWFyQW5pbWF0aW9uUHJldmlldygpKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FwaSwgcHJldmlld0lkLCBhbmltYXRpb25PYmpdKVxuXG4gIHJldHVybiBhbmltYXRpb25PYmogIT0gbnVsbCA/IGVmZmVjdFByb3BzIDogbnVsbFxufVxuIiwiaW1wb3J0IHsgY3NzLCBMYXlvdXRJdGVtVHlwZSwgdHlwZSBJTUNvbnRyb2xsZXJQYW5lbEpzb24sIHR5cGUgSU1BcHBDb25maWcsIHR5cGUgQnJvd3NlclNpemVNb2RlLCBDb250YWluZXJUeXBlLCBDb250cm9sbGVyUG9zaXRpb24gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBnZXRDb250ZW50Um9vdENvbnRhaW5lckluZm8gfSBmcm9tICcuLi9zZWFyY2gvY29udGVudHMnXG5pbXBvcnQgeyBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUGFnZVJlbGF0ZWRDb250cm9sbGVySWRzIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBwYWdlSWQ6IHN0cmluZywgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUpOiBzdHJpbmcge1xuICBjb25zdCByZXN1bHQgPSBPYmplY3Qua2V5cyhhcHBDb25maWcuY29udHJvbGxlclBhbmVscyA/PyB7fSkuZmlsdGVyKGNvbnRyb2xsZXJJZCA9PiB7XG4gICAgY29uc3Qgcm9vdEluZm8gPSBnZXRDb250ZW50Um9vdENvbnRhaW5lckluZm8oYXBwQ29uZmlnLCBjb250cm9sbGVySWQsIExheW91dEl0ZW1UeXBlLldpZGdldCwgYnJvd3NlclNpemVNb2RlKVxuICAgIGlmIChyb290SW5mbyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKHJvb3RJbmZvLnR5cGUgIT09IENvbnRhaW5lclR5cGUuUGFnZSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHJvb3RJbmZvLmlkID09PSBwYWdlSWRcbiAgfSlcbiAgcmVzdWx0LnNvcnQoKVxuICByZXR1cm4gcmVzdWx0LmpvaW4oJywnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFuZWxUcmFuc2Zvcm1TdHlsZSAocGFuZWxKc29uOiBJTUNvbnRyb2xsZXJQYW5lbEpzb24pIHtcbiAgaWYgKHBhbmVsSnNvbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCB7IHBvc2l0aW9uLCBvZmZzZXRYID0gMCwgb2Zmc2V0WSA9IDAgfSA9IHBhbmVsSnNvblxuICBsZXQgdHJhbnNsYXRlXG5cbiAgaWYgKHBhbmVsSnNvbi53aWR0aE1vZGUgIT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIGlmIChvZmZzZXRYICE9PSAwKSB7XG4gICAgICB0cmFuc2xhdGUgPSBgdHJhbnNsYXRlWCgke29mZnNldFh9cHgpYFxuICAgIH1cbiAgICBpZiAocG9zaXRpb24gPT09IENvbnRyb2xsZXJQb3NpdGlvbi5Ub3BDZW50ZXIgfHwgcG9zaXRpb24gPT09IENvbnRyb2xsZXJQb3NpdGlvbi5NaWRkbGVDZW50ZXIgfHwgcG9zaXRpb24gPT09IENvbnRyb2xsZXJQb3NpdGlvbi5Cb3R0b21DZW50ZXIpIHtcbiAgICAgIHRyYW5zbGF0ZSA9IHRyYW5zbGF0ZSAhPSBudWxsID8gYCR7dHJhbnNsYXRlfSB0cmFuc2xhdGVYKC01MCUpYCA6ICd0cmFuc2xhdGVYKC01MCUpJ1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYW5lbEpzb24uaGVpZ2h0TW9kZSAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgaWYgKG9mZnNldFkgIT09IDApIHtcbiAgICAgIHRyYW5zbGF0ZSA9IHRyYW5zbGF0ZSAhPSBudWxsID8gYCR7dHJhbnNsYXRlfSB0cmFuc2xhdGVZKCR7b2Zmc2V0WX1weClgIDogYHRyYW5zbGF0ZVkoJHtvZmZzZXRZfXB4KWBcbiAgICB9XG4gICAgaWYgKHBvc2l0aW9uID09PSBDb250cm9sbGVyUG9zaXRpb24uTWlkZGxlTGVmdCB8fCBwb3NpdGlvbiA9PT0gQ29udHJvbGxlclBvc2l0aW9uLk1pZGRsZUNlbnRlciB8fCBwb3NpdGlvbiA9PT0gQ29udHJvbGxlclBvc2l0aW9uLk1pZGRsZVJpZ2h0KSB7XG4gICAgICB0cmFuc2xhdGUgPSB0cmFuc2xhdGUgIT0gbnVsbCA/IGAke3RyYW5zbGF0ZX0gdHJhbnNsYXRlWSgtNTAlKWAgOiAndHJhbnNsYXRlWSgtNTAlKSdcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJhbnNsYXRlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9TdHlsZSAocGFuZWxKc29uOiBJTUNvbnRyb2xsZXJQYW5lbEpzb24pIHtcbiAgbGV0IHBvc1N0eWxlXG5cbiAgc3dpdGNoIChwYW5lbEpzb24/LnBvc2l0aW9uKSB7XG4gICAgY2FzZSBDb250cm9sbGVyUG9zaXRpb24uVG9wTGVmdDpcbiAgICAgIHBvc1N0eWxlID0gY3NzYHRvcDogMDsgbGVmdDogMDsgYm90dG9tOiBhdXRvOyByaWdodDogYXV0bztgXG4gICAgICBicmVha1xuICAgIGNhc2UgQ29udHJvbGxlclBvc2l0aW9uLlRvcFJpZ2h0OlxuICAgICAgcG9zU3R5bGUgPSBjc3NgdG9wOiAwOyBsZWZ0OiBhdXRvOyBib3R0b206IGF1dG87IHJpZ2h0OiAwO2BcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBDb250cm9sbGVyUG9zaXRpb24uQm90dG9tTGVmdDpcbiAgICAgIHBvc1N0eWxlID0gY3NzYHRvcDogYXV0bzsgbGVmdDogMDsgYm90dG9tOiAwOyByaWdodDogYXV0bztgXG4gICAgICBicmVha1xuICAgIGNhc2UgQ29udHJvbGxlclBvc2l0aW9uLkJvdHRvbVJpZ2h0OlxuICAgICAgcG9zU3R5bGUgPSBjc3NgdG9wOiBhdXRvOyBsZWZ0OiBhdXRvOyBib3R0b206IDA7IHJpZ2h0OiAwO2BcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBDb250cm9sbGVyUG9zaXRpb24uVG9wQ2VudGVyOlxuICAgICAgcG9zU3R5bGUgPSBjc3NgdG9wOiAwOyBsZWZ0OiA1MCU7IGJvdHRvbTogYXV0bzsgcmlnaHQ6IGF1dG87YFxuICAgICAgYnJlYWtcbiAgICBjYXNlIENvbnRyb2xsZXJQb3NpdGlvbi5Cb3R0b21DZW50ZXI6XG4gICAgICBwb3NTdHlsZSA9IGNzc2B0b3A6IGF1dG87IGxlZnQ6IDUwJTsgYm90dG9tOiAwOyByaWdodDogYXV0bztgXG4gICAgICBicmVha1xuICAgIGNhc2UgQ29udHJvbGxlclBvc2l0aW9uLk1pZGRsZUxlZnQ6XG4gICAgICBwb3NTdHlsZSA9IGNzc2B0b3A6IDUwJTsgbGVmdDogMDsgYm90dG9tOiBhdXRvOyByaWdodDogYXV0bztgXG4gICAgICBicmVha1xuICAgIGNhc2UgQ29udHJvbGxlclBvc2l0aW9uLk1pZGRsZVJpZ2h0OlxuICAgICAgcG9zU3R5bGUgPSBjc3NgdG9wOiA1MCU7IGxlZnQ6IGF1dG87IGJvdHRvbTogYXV0bzsgcmlnaHQ6IDA7YFxuICAgICAgYnJlYWtcbiAgICBjYXNlIENvbnRyb2xsZXJQb3NpdGlvbi5NaWRkbGVDZW50ZXI6XG4gICAgICBwb3NTdHlsZSA9IGNzc2B0b3A6IDUwJTsgbGVmdDogNTAlOyBib3R0b206IGF1dG87IHJpZ2h0OiBhdXRvO2BcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIHBvc1N0eWxlID0gY3NzYHRvcDogMDsgbGVmdDogMDsgYm90dG9tOiBhdXRvOyByaWdodDogYXV0bztgXG4gICAgICBicmVha1xuICB9XG5cbiAgbGV0IHdpZHRoTW9kZVN0eWxlXG4gIGxldCBoZWlnaHRNb2RlU3R5bGVcbiAgaWYgKHBhbmVsSnNvbi53aWR0aE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIHdpZHRoTW9kZVN0eWxlID0gY3NzYHdpZHRoOmF1dG87bGVmdDoke3BhbmVsSnNvbi5sZWZ0fTtyaWdodDoke3BhbmVsSnNvbi5yaWdodH07YFxuICB9XG4gIGlmIChwYW5lbEpzb24uaGVpZ2h0TW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgaGVpZ2h0TW9kZVN0eWxlID0gY3NzYGhlaWdodDphdXRvO3RvcDoke3BhbmVsSnNvbi50b3B9O2JvdHRvbToke3BhbmVsSnNvbi5ib3R0b219O2BcbiAgfVxuXG4gIHJldHVybiBjc3NgXG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgICR7cG9zU3R5bGV9XG4gICAgd2lkdGg6ICR7cGFuZWxKc29uPy53aWR0aH07XG4gICAgaGVpZ2h0OiAke3BhbmVsSnNvbj8uaGVpZ2h0fTtcbiAgICAke3dpZHRoTW9kZVN0eWxlfTtcbiAgICAke2hlaWdodE1vZGVTdHlsZX1cbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICB6LWluZGV4OiAyO1xuICBgXG59XG4iLCJpbXBvcnQgeyB0eXBlIENvbW1vbkxheW91dFNldHRpbmcgfSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9MQVlPVVRfSVRFTV9TRVRUSU5HOiBDb21tb25MYXlvdXRTZXR0aW5nID0ge1xuICBvcmRlcjogMFxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcywgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlLCBBcHBNb2RlLCBnZXRBcHBTdG9yZSwgQnJvd3NlclNpemVNb2RlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFRlbXBsYXRlU2VsZWN0b3IgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IGFwcEJ1aWxkZXJTeW5jIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IGdldEhlYWRlclRlbXBsYXRlcywgZ2V0RnVsbFNjcmVlblBhZ2VUZW1wbGF0ZXMsIGdldEZvb3RlclRlbXBsYXRlcywgZ2V0V2luZG93VGVtcGxhdGVzIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlci90ZW1wbGF0ZXMnXG5pbXBvcnQgeyB0eXBlIFBhZ2VDb250ZXh0UHJvcHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBUZW1wbGF0ZU91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9hcHBsaWNhdGlvbi90ZW1wbGF0ZSdcbmltcG9ydCB7IFRoZW1lZFRvb2x0aXAgfSBmcm9tICcuLi8uLi9idWlsZGVyL3RoZW1lLXRvb2x0aXAnXG5cbmNvbnN0IGJ1dHRvblN0eWxlID0gY3NzYFxuICBwb2ludGVyLWV2ZW50czogYWxsO1xuYFxuXG5mdW5jdGlvbiBnZXRTdHlsZSAoYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzKSB7XG4gIHJldHVybiBjc3NgXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGhlaWdodDogMjAwcHg7XG4gICAgcGFkZGluZzogMXJlbTtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB6LWluZGV4OiAxO1xuICAgIC5idG4tdGV4dCB7XG4gICAgICBsaW5lLWhlaWdodDogMzJweDtcbiAgICB9XG4gICAgLmJ0biB7XG4gICAgICBiYWNrZ3JvdW5kOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs2MDBdfTtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs4MDBdfTtcbiAgICAgIH1cbiAgICB9XG4gICAgLmFjdGlvbi1pdGVtIHtcbiAgICAgIHdpZHRoOiAzMnB4O1xuICAgIH1cbiAgICAuYWN0aW9uLXNlcHJhdG9yIHtcbiAgICAgIHdpZHRoOiAzMDBweDtcbiAgICAgIGhlaWdodDogMXB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s4MDBdfTtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25CbG9ja1Byb3BzIHtcbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHNcbiAgb25QYWdlVGVtcGxhdGVTZWxlY3RlZDogKHRlbXBsYXRlUGFnZUpzb24pID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFjdGlvbkJsb2NrIChwcm9wczogQWN0aW9uQmxvY2tQcm9wcykge1xuICBjb25zdCB7IHBhZ2VDb250ZXh0LCBvblBhZ2VUZW1wbGF0ZVNlbGVjdGVkIH0gPSBwcm9wc1xuICBjb25zdCB7IGJ1aWxkZXJUaGVtZSwgZm9ybWF0TWVzc2FnZSwgaXNIZWFkZXIsIGlzRm9vdGVyIH0gPSBwYWdlQ29udGV4dFxuICBjb25zdCBbc2hvd1RlbXBsYXRlUG9wcGVyLCBzZXRTaG93VGVtcGxhdGVQb3BwZXJdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IHRlbXBsYXRlUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBzaG93ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsb2NrTGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnPy5mb3JCdWlsZGVyQXR0cmlidXRlcz8ubG9ja0xheW91dCA/PyBmYWxzZVxuICAgIGNvbnN0IGlzRGVzaWduTW9kZSA9IHN0YXRlLmFwcFJ1bnRpbWVJbmZvLmFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduXG4gICAgcmV0dXJuIGlzRGVzaWduTW9kZSAmJiAhbG9ja0xheW91dFxuICB9KVxuXG4gIGNvbnN0IHRvZ2dsZVRlbXBsYXRlUG9wcGVyID0gZSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYnJvd3NlclNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGlmIChwYWdlQ29udGV4dC5pc0RpYWxvZykge1xuICAgICAgICBhcHBCdWlsZGVyU3luYy5wdWJsaXNoU2lkZVBhbmVsVG9BcHAoeyB0eXBlOiAndGVtcGxhdGVCbG9jaycsIHRlbXBsYXRlTWV0aG9kOiAnZ2V0V2luZG93VGVtcGxhdGVzJywgb25TZWxlY3Q6IG9uUGFnZVRlbXBsYXRlU2VsZWN0ZWQgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBpc0hlYWRlciA/ICdnZXRIZWFkZXJUZW1wbGF0ZXMnIDogKGlzRm9vdGVyID8gJ2dldEZvb3RlclRlbXBsYXRlcycgOiAnZ2V0RnVsbFNjcmVlblBhZ2VUZW1wbGF0ZXMnKVxuICAgICAgICBjb25zdCB0ZW1wbGF0ZVR5cGUgPSBuYW1lID09PSAnZ2V0RnVsbFNjcmVlblBhZ2VUZW1wbGF0ZXMnID8gJ3RlbXBsYXRlJyA6ICd0ZW1wbGF0ZUJsb2NrJ1xuICAgICAgICBhcHBCdWlsZGVyU3luYy5wdWJsaXNoU2lkZVBhbmVsVG9BcHAoeyB0eXBlOiB0ZW1wbGF0ZVR5cGUsIHRlbXBsYXRlTWV0aG9kOiBuYW1lLCBvblNlbGVjdDogb25QYWdlVGVtcGxhdGVTZWxlY3RlZCB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHNldFNob3dUZW1wbGF0ZVBvcHBlcighc2hvd1RlbXBsYXRlUG9wcGVyKVxuICB9XG5cbiAgY29uc3QgY2xvc2VUZW1wbGF0ZVBvcG92ZXIgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1RlbXBsYXRlUG9wcGVyKGZhbHNlKVxuICB9XG5cbiAgbGV0IHRvb2x0aXBcbiAgaWYgKHBhZ2VDb250ZXh0LmlzSGVhZGVyKSB7XG4gICAgdG9vbHRpcCA9IGZvcm1hdE1lc3NhZ2UoJ2Nob29zZUhlYWRlclRlbXBsYXRlJylcbiAgfSBlbHNlIGlmIChwYWdlQ29udGV4dC5pc0Zvb3Rlcikge1xuICAgIHRvb2x0aXAgPSBmb3JtYXRNZXNzYWdlKCdjaG9vc2VGb290ZXJUZW1wbGF0ZScpXG4gIH0gZWxzZSB7XG4gICAgdG9vbHRpcCA9IGZvcm1hdE1lc3NhZ2UoJ2Nob29zZVRlbXBsYXRlJywge1xuICAgICAgdHlwZTogcGFnZUNvbnRleHQuaXNEaWFsb2dcbiAgICAgICAgPyBmb3JtYXRNZXNzYWdlKCdkaWFsb2cnKS50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgIDogZm9ybWF0TWVzc2FnZSgncGFnZScpLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgaWYgKCFzaG93KSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCB3LTEwMCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcicgY3NzPXtnZXRTdHlsZShidWlsZGVyVGhlbWUpfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggZmxleC1jb2x1bW4ganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8VGhlbWVkVG9vbHRpcFxuICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tJ1xuICAgICAgICAgIHRpdGxlPXt0b29sdGlwfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FjdGlvbi1pdGVtJyByZWY9e3RlbXBsYXRlUmVmfT5cbiAgICAgICAgICAgIDxCdXR0b24gaWNvbiBvbkNsaWNrPXt0b2dnbGVUZW1wbGF0ZVBvcHBlcn0gY3NzPXtidXR0b25TdHlsZX0gY2xhc3NOYW1lPSdyb3VuZGVkLWNpcmNsZSc+XG4gICAgICAgICAgICAgIDxUZW1wbGF0ZU91dGxpbmVkIGF1dG9GbGlwIHNpemU9J20nIGNvbG9yPXtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s4MDBdfSAvPlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGhlbWVkVG9vbHRpcD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FjdGlvbi1zZXByYXRvciBtdC00JyAvPlxuICAgICAgICA8aDUgY2xhc3NOYW1lPSdidG4tdGV4dCBtdC0yJz57Zm9ybWF0TWVzc2FnZSgnZHJvcFdpZGdldFRvQWRkJyl9PC9oNT5cbiAgICAgIDwvZGl2PlxuICAgICAge3Nob3dUZW1wbGF0ZVBvcHBlciAmJiAhcGFnZUNvbnRleHQuaXNEaWFsb2cgJiYgKFxuICAgICAgICA8VGVtcGxhdGVTZWxlY3RvclxuICAgICAgICAgIHRlbXBsYXRlcz17aXNIZWFkZXIgPyBnZXRIZWFkZXJUZW1wbGF0ZXMoKSA6IChpc0Zvb3RlciA/IGdldEZvb3RlclRlbXBsYXRlcygpIDogZ2V0RnVsbFNjcmVlblBhZ2VUZW1wbGF0ZXMoZmFsc2UpKX1cbiAgICAgICAgICByZWZlcmVuY2VFbGVtZW50PXt0ZW1wbGF0ZVJlZi5jdXJyZW50fVxuICAgICAgICAgIG9uSXRlbVNlbGVjdD17b25QYWdlVGVtcGxhdGVTZWxlY3RlZH1cbiAgICAgICAgICBvbkNsb3NlPXtjbG9zZVRlbXBsYXRlUG9wb3Zlcn1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICB7c2hvd1RlbXBsYXRlUG9wcGVyICYmIHBhZ2VDb250ZXh0LmlzRGlhbG9nICYmIChcbiAgICAgICAgPFRlbXBsYXRlU2VsZWN0b3JcbiAgICAgICAgICB0ZW1wbGF0ZXM9e2dldFdpbmRvd1RlbXBsYXRlcyhmYWxzZSl9XG4gICAgICAgICAgcmVmZXJlbmNlRWxlbWVudD17dGVtcGxhdGVSZWYuY3VycmVudH1cbiAgICAgICAgICBvbkl0ZW1TZWxlY3Q9e29uUGFnZVRlbXBsYXRlU2VsZWN0ZWR9XG4gICAgICAgICAgb25DbG9zZT17Y2xvc2VUZW1wbGF0ZVBvcG92ZXJ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyB0eXBlIExheW91dENvbnRleHRUb29sUHJvcHMsIEFwcE1vZGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB1dGlscywgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCBsYXllck91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2dpcy9kYXRhLWxheWVyLnN2ZydcbmltcG9ydCBtYXhIZWlnaHRPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9tYXgtaGVpZ2h0LnN2ZydcbmltcG9ydCBtYXhXaWR0aE91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL21heC13aWR0aC5zdmcnXG5pbXBvcnQgbWF4QWxsT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvbWF4LWFsbC5zdmcnXG5pbXBvcnQgbGVmdE91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2FsaWduLWxlZnQuc3ZnJ1xuaW1wb3J0IHNuYXBMZWZ0T3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvc25hcC1sZWZ0LnN2ZydcbmltcG9ydCBzbmFwUmlnaHRPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zbmFwLXJpZ2h0LnN2ZydcbmltcG9ydCBzbmFwVG9wT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvc25hcC10b3Auc3ZnJ1xuaW1wb3J0IHNuYXBCb3R0b21PdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zbmFwLWJvdHRvbS5zdmcnXG5pbXBvcnQgc25hcEhNT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvc25hcC1ob3Jpem9udGFsLW1pZGRsZS5zdmcnXG5pbXBvcnQgc25hcFZNT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvc25hcC12ZXJ0aWNhbC1taWRkbGUuc3ZnJ1xuaW1wb3J0IHNlbmRCYWNrT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvc2VuZC1iYWNrd2FyZC5zdmcnXG5pbXBvcnQgc2VuZEZvcndhcmRPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9zZW5kLWZvcndhcmQuc3ZnJ1xuaW1wb3J0IGJyaW5nQmFja091dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2JyaW5nLWJhY2suc3ZnJ1xuaW1wb3J0IGJyaW5nRnJvbnRPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9icmluZy1mcm9udC5zdmcnXG5pbXBvcnQgbG9ja091dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9sb2NrLnN2ZydcbmltcG9ydCB1bmxvY2tPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdW5sb2NrLnN2ZydcbmltcG9ydCB7IHR5cGUgVG9vbGJhckNvbmZpZyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHtcbiAgYnJpbmdGb3J3YXJkLFxuICBicmluZ1RvRnJvbnQsXG4gIHNlbmRCYWNrd2FyZCxcbiAgc2VuZFRvQmFjayxcbiAgdG9nZ2xlTG9ja0xheW91dCxcbiAgYWxpZ25UbyxcbiAgYWxpZ25Ib3Jpem9udGFsQ2VudGVyLFxuICBhbGlnblZlcnRpY2FsQ2VudGVyLFxuICBhbGlnbkZ1bGxXaWR0aCxcbiAgYWxpZ25GdWxsSGVpZ2h0LFxuICBhbGlnbkZ1bGxTaXplXG59IGZyb20gJy4vbGF5b3V0LWFjdGlvbidcbmltcG9ydCB7IGdldEFwcE1vZGUsIGlzTG9ja0xheW91dCB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9jb21tb24tbWVudSdcblxuZXhwb3J0IGNvbnN0IGZpeGVkSXRlbU1lbnU6IFRvb2xiYXJDb25maWcgPSBbXG4gIFtcbiAgICB7XG4gICAgICBpY29uOiBsZWZ0T3V0bGluZWQsXG4gICAgICB2aXNpYmxlOiAoKSA9PiBnZXRBcHBNb2RlKCkgPT09IEFwcE1vZGUuRGVzaWduICYmICFpc0xvY2tMYXlvdXQoKSxcbiAgICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdhbGlnbicpXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpY29uOiBzbmFwTGVmdE91dGxpbmVkLFxuICAgICAgbGFiZWw6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UodXRpbHMuaXNSVEwoKSA/ICdzbmFwVG9SaWdodCcgOiAnc25hcFRvTGVmdCcpXG4gICAgICB9LFxuICAgICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UodXRpbHMuaXNSVEwoKSA/ICdzbmFwVG9SaWdodCcgOiAnc25hcFRvTGVmdCcpXG4gICAgICB9LFxuICAgICAgYXV0b0ZsaXBJY29uOiB0cnVlLFxuICAgICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgbGF5b3V0SWQgfSA9IHByb3BzXG4gICAgICAgIGFsaWduVG8oeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0sICdsZWZ0JylcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGljb246IHNuYXBITU91dGxpbmVkLFxuICAgICAgbGFiZWw6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2FsaWduSENlbnRlcicpXG4gICAgICB9LFxuICAgICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2FsaWduSENlbnRlcicpXG4gICAgICB9LFxuICAgICAgZGlzYWJsZWQ6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHByb3BzXG4gICAgICAgIGlmIChsYXlvdXRJdGVtLnNldHRpbmc/LmF1dG9Qcm9wcz8ud2lkdGggPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgICAgICAgIHJldHVybiB1dGlscy5pc1BlcmNlbnRhZ2UobGF5b3V0SXRlbS5iYm94LmxlZnQpICE9PSB1dGlscy5pc1BlcmNlbnRhZ2UobGF5b3V0SXRlbS5iYm94LnJpZ2h0KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSxcbiAgICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgICBhbGlnbkhvcml6b250YWxDZW50ZXIoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0pXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpY29uOiBzbmFwUmlnaHRPdXRsaW5lZCxcbiAgICAgIGxhYmVsOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKHV0aWxzLmlzUlRMKCkgPyAnc25hcFRvTGVmdCcgOiAnc25hcFRvUmlnaHQnKVxuICAgICAgfSxcbiAgICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKHV0aWxzLmlzUlRMKCkgPyAnc25hcFRvTGVmdCcgOiAnc25hcFRvUmlnaHQnKVxuICAgICAgfSxcbiAgICAgIGF1dG9GbGlwSWNvbjogdHJ1ZSxcbiAgICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgICBhbGlnblRvKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZCB9LCAncmlnaHQnKVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWNvbjogc25hcFRvcE91dGxpbmVkLFxuICAgICAgbGFiZWw6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NuYXBUb1RvcCcpXG4gICAgICB9LFxuICAgICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NuYXBUb1RvcCcpXG4gICAgICB9LFxuICAgICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgbGF5b3V0SWQgfSA9IHByb3BzXG4gICAgICAgIGFsaWduVG8oeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0sICd0b3AnKVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWNvbjogc25hcFZNT3V0bGluZWQsXG4gICAgICBsYWJlbDogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnYWxpZ25WQ2VudGVyJylcbiAgICAgIH0sXG4gICAgICB0aXRsZTogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnYWxpZ25WQ2VudGVyJylcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlZDogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICAgICAgaWYgKGxheW91dEl0ZW0uc2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgICAgICAgIHJldHVybiB1dGlscy5pc1BlcmNlbnRhZ2UobGF5b3V0SXRlbS5iYm94LnRvcCkgIT09IHV0aWxzLmlzUGVyY2VudGFnZShsYXlvdXRJdGVtLmJib3guYm90dG9tKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSxcbiAgICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgICBhbGlnblZlcnRpY2FsQ2VudGVyKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZCB9KVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWNvbjogc25hcEJvdHRvbU91dGxpbmVkLFxuICAgICAgbGFiZWw6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NuYXBUb0JvdHRvbScpXG4gICAgICB9LFxuICAgICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NuYXBUb0JvdHRvbScpXG4gICAgICB9LFxuICAgICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgbGF5b3V0SWQgfSA9IHByb3BzXG4gICAgICAgIGFsaWduVG8oeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0sICdib3R0b20nKVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWNvbjogbWF4V2lkdGhPdXRsaW5lZCxcbiAgICAgIGxhYmVsOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdmdWxsV2lkdGgnKVxuICAgICAgfSxcbiAgICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdmdWxsV2lkdGgnKVxuICAgICAgfSxcbiAgICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgICBhbGlnbkZ1bGxXaWR0aCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSlcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGljb246IG1heEhlaWdodE91dGxpbmVkLFxuICAgICAgbGFiZWw6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2Z1bGxIZWlnaHQnKVxuICAgICAgfSxcbiAgICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdmdWxsSGVpZ2h0JylcbiAgICAgIH0sXG4gICAgICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgICAgY29uc3QgeyBsYXlvdXRJdGVtLCBsYXlvdXRJZCB9ID0gcHJvcHNcbiAgICAgICAgYWxpZ25GdWxsSGVpZ2h0KHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZCB9KVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWNvbjogbWF4QWxsT3V0bGluZWQsXG4gICAgICBsYWJlbDogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzICYgeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2Z1bGxTaXplJylcbiAgICAgIH0sXG4gICAgICB0aXRsZTogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzICYgeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2Z1bGxTaXplJylcbiAgICAgIH0sXG4gICAgICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgICAgY29uc3QgeyBsYXlvdXRJdGVtLCBsYXlvdXRJZCB9ID0gcHJvcHNcbiAgICAgICAgYWxpZ25GdWxsU2l6ZSh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSlcbiAgICAgIH1cbiAgICB9XG4gIF0sXG4gIFtcbiAgICB7XG4gICAgICBpY29uOiBsYXllck91dGxpbmVkLFxuICAgICAgdmlzaWJsZTogKCkgPT4gZ2V0QXBwTW9kZSgpID09PSBBcHBNb2RlLkRlc2lnbiAmJiAhaXNMb2NrTGF5b3V0KCksXG4gICAgICB0aXRsZTogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnYXJyYW5nZScpXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpY29uOiBzZW5kQmFja091dGxpbmVkLFxuICAgICAgbGFiZWw6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NlbmRCYWNrd2FyZCcpXG4gICAgICB9LFxuICAgICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NlbmRCYWNrd2FyZCcpXG4gICAgICB9LFxuICAgICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgbGF5b3V0SWQgfSA9IHByb3BzXG4gICAgICAgIHNlbmRCYWNrd2FyZCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSlcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGljb246IHNlbmRGb3J3YXJkT3V0bGluZWQsXG4gICAgICBsYWJlbDogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnYnJpbmdGb3J3YXJkJylcbiAgICAgIH0sXG4gICAgICB0aXRsZTogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnYnJpbmdGb3J3YXJkJylcbiAgICAgIH0sXG4gICAgICBvbkNsaWNrOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgICAgY29uc3QgeyBsYXlvdXRJdGVtLCBsYXlvdXRJZCB9ID0gcHJvcHNcbiAgICAgICAgYnJpbmdGb3J3YXJkKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZCB9KVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWNvbjogYnJpbmdCYWNrT3V0bGluZWQsXG4gICAgICBsYWJlbDogKHByb3BzOiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnc2VuZFRvQmFjaycpXG4gICAgICB9LFxuICAgICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ3NlbmRUb0JhY2snKVxuICAgICAgfSxcbiAgICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgICBzZW5kVG9CYWNrKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZCB9KVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWNvbjogYnJpbmdGcm9udE91dGxpbmVkLFxuICAgICAgbGFiZWw6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2JyaW5nVG9Gcm9udCcpXG4gICAgICB9LFxuICAgICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UoJ2JyaW5nVG9Gcm9udCcpXG4gICAgICB9LFxuICAgICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgbGF5b3V0SWQgfSA9IHByb3BzXG4gICAgICAgIGJyaW5nVG9Gcm9udCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSlcbiAgICAgIH1cbiAgICB9XG4gIF0sXG4gIHtcbiAgICBpY29uOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICAgIGNvbnN0IGxvY2tMYXlvdXQgPSBsYXlvdXRJdGVtLnNldHRpbmc/LmxvY2tMYXlvdXQgPz8gZmFsc2VcbiAgICAgIHJldHVybiBsb2NrTGF5b3V0ID8gbG9ja091dGxpbmVkIDogdW5sb2NrT3V0bGluZWRcbiAgICB9LFxuICAgIHZpc2libGU6ICgpID0+IGdldEFwcE1vZGUoKSA9PT0gQXBwTW9kZS5EZXNpZ24gJiYgIWlzTG9ja0xheW91dCgpLFxuICAgIHRpdGxlOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMgJiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmcgfSkgPT4ge1xuICAgICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgY29uc3QgbG9ja0xheW91dCA9IGxheW91dEl0ZW0uc2V0dGluZz8ubG9ja0xheW91dCA/PyBmYWxzZVxuICAgICAgcmV0dXJuIHByb3BzLmZvcm1hdE1lc3NhZ2UobG9ja0xheW91dCA/ICd1bmxvY2tMYXlvdXQnIDogJ2xvY2tMYXlvdXQnKVxuICAgIH0sXG4gICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgdG9nZ2xlTG9ja0xheW91dCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSlcbiAgICB9XG4gIH0sXG4gIHsgc2VwZXJhdG9yOiB0cnVlIH1cbl1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIEltbXV0YWJsZSxcbiAganN4LFxuICBjc3MsXG4gIGxvZGFzaCxcbiAgQVBQX0ZSQU1FX05BTUVfSU5fQlVJTERFUixcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIHR5cGUgSU1Cb3VuZGluZ0JveCxcbiAgY2xhc3NOYW1lc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIEZpeGVkTGF5b3V0SXRlbVNldHRpbmcgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB7IERFRkFVTFRfRklYX0xBWU9VVF9JVEVNX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQge1xuICBTZXR0aW5nU2VjdGlvbixcbiAgU2V0dGluZ1Jvd1xufSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IFRvb2x0aXAsIFN3aXRjaCwgdHlwZSBMaW5lYXJVbml0LCBEaXN0YW5jZVVuaXRzLCBCdXR0b24sIHV0aWxzIGFzIHVpVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgU2l6ZUVkaXRvciwgSW5wdXRSYXRpbyB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc3R5bGUtc2V0dGluZy1jb21wb25lbnRzJ1xuaW1wb3J0IENvbW1vbkxheW91dEl0ZW1TZXR0aW5nIGZyb20gJy4uLy4uL2J1aWxkZXIvY29tbW9uLWxheW91dC1pdGVtLXNldHRpbmcnXG5pbXBvcnQgQ29tbW9uVHJhbnNmb3JtU2V0dGluZyBmcm9tICcuLi8uLi9idWlsZGVyL2NvbW1vbi10cmFuc2Zvcm0tc2V0dGluZydcbmltcG9ydCB7IHV0aWxzLCBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtU2V0dGluZ1Byb3BzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCB7IEl0ZW1Qb3NpdGlvblNldHRpbmcgfSBmcm9tICcuL2l0ZW0tcG9zaXRpb24tc2V0dGluZydcbmltcG9ydCB7IGZpeGVkSXRlbU1lbnUgfSBmcm9tICcuL2ZpeGVkLWl0ZW0tbWVudSdcbmltcG9ydCB7IFRvb2xiYXIgfSBmcm9tICcuLi8uLi9idWlsZGVyL3Rvb2xiYXInXG5pbXBvcnQgeyBMb2NrT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9sb2NrJ1xuaW1wb3J0IHsgVW5sb2NrT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci91bmxvY2snXG5pbXBvcnQgbW9yZUhvcml6b250YWxPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwuc3ZnJ1xuaW1wb3J0IHsgZ2V0VGhlbWUgfSBmcm9tICdqaW11LXRoZW1lJ1xuXG5jb25zdCBzaXplbW9kZXMgPSBbTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSwgTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoXVxuY29uc3Qgc2l6ZW1vZGVzV2l0aG91dEF1dG8gPSBbTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20sIExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaF1cblxuY29uc3QgZ3JvdXAxID0gW1xuICBmaXhlZEl0ZW1NZW51WzFdWzFdLFxuICBmaXhlZEl0ZW1NZW51WzFdWzJdLFxuICBmaXhlZEl0ZW1NZW51WzFdWzNdLFxuICBmaXhlZEl0ZW1NZW51WzFdWzRdLFxuICB7IHNlcGVyYXRvcjogdHJ1ZSB9LFxuICBmaXhlZEl0ZW1NZW51WzBdWzFdLFxuICBmaXhlZEl0ZW1NZW51WzBdWzJdLFxuICBmaXhlZEl0ZW1NZW51WzBdWzNdXG5dLm1hcChpdGVtID0+IHsgcmV0dXJuIHsgLi4uaXRlbSwgdGl0bGU6IGl0ZW0udGl0bGUsIGxhYmVsOiBudWxsIH0gfSlcblxuY29uc3QgcG9zaXRpb25NZW51cyA9IFtcbiAgLi4uZ3JvdXAxLFxuICBbXG4gICAgeyBpY29uOiBtb3JlSG9yaXpvbnRhbE91dGxpbmVkLCBjYXJldDogZmFsc2UgfSxcbiAgICBmaXhlZEl0ZW1NZW51WzBdWzRdLFxuICAgIGZpeGVkSXRlbU1lbnVbMF1bNV0sXG4gICAgZml4ZWRJdGVtTWVudVswXVs2XSxcbiAgICB7IHNlcGVyYXRvcjogdHJ1ZSB9LFxuICAgIGZpeGVkSXRlbU1lbnVbMF1bN10sXG4gICAgZml4ZWRJdGVtTWVudVswXVs4XSxcbiAgICBmaXhlZEl0ZW1NZW51WzBdWzldXG4gIF1cbl1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgZW5hYmxlVG9vbGJhcjogYm9vbGVhblxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaXhlZEl0ZW1TZXR0aW5nIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRJdGVtU2V0dGluZ1Byb3BzLCBTdGF0ZT4ge1xuICBpdGVtU2V0dGluZzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZ1xuICBmbGlwTGVmdFJpZ2h0OiBib29sZWFuXG4gIHJlZjogSFRNTERpdkVsZW1lbnRcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLmZsaXBMZWZ0UmlnaHQgPSB1dGlscy5pc1JUTCgpXG4gICAgdGhpcy5zdGF0ZSA9IHsgZW5hYmxlVG9vbGJhcjogZmFsc2UgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmICh0aGlzLnJlZikge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVuYWJsZVRvb2xiYXI6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICB1cGRhdGVCQm94ID0gKHByb3A6IHN0cmluZywgdmFsdWU6IExpbmVhclVuaXQpID0+IHtcbiAgICBsZXQgYmJveCA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3hcbiAgICBjb25zdCB7IGRpc3RhbmNlLCB1bml0IH0gPSB2YWx1ZVxuICAgIGNvbnN0IG9yaWdpbmFsVmFsdWUgPSBiYm94W3Byb3BdXG4gICAgY29uc3QgY29udGFpZW5yUmVjdCA9IHRoaXMuZ2V0U2l6ZU9mQ29udGFpbmVyKClcbiAgICBsZXQgbmV3VmFsdWU6IHN0cmluZyB8IG51bWJlciA9IGRpc3RhbmNlLnRvRml4ZWQoMilcbiAgICBsZXQgcGl4ZWxWYWx1ZTogbnVtYmVyXG5cbiAgICBpZiAodXRpbHMuaXNQZXJjZW50YWdlKG9yaWdpbmFsVmFsdWUpICYmIHVuaXQgPT09IERpc3RhbmNlVW5pdHMuUElYRUwpIHsgLy8gY2hhbmdlIGZyb20gcGVyY2VudGFnZSB0byBwaXhlbFxuICAgICAgaWYgKGNvbnRhaWVuclJlY3QpIHtcbiAgICAgICAgaWYgKHByb3AgPT09ICdsZWZ0JyB8fCBwcm9wID09PSAncmlnaHQnIHx8IHByb3AgPT09ICd3aWR0aCcpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IE1hdGgucm91bmQocGFyc2VGbG9hdChvcmlnaW5hbFZhbHVlKSAqIGNvbnRhaWVuclJlY3Qud2lkdGggLyAxMDApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQob3JpZ2luYWxWYWx1ZSkgKiBjb250YWllbnJSZWN0LmhlaWdodCAvIDEwMClcbiAgICAgICAgfVxuICAgICAgICBwaXhlbFZhbHVlID0gbmV3VmFsdWVcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1BlcmNlbnRhZ2Uob3JpZ2luYWxWYWx1ZSkgJiYgdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFKSB7IC8vIGNoYW5nZSBmcm9tIHBpeGVsIHRvIHBlcmNlbnRhZ2VcbiAgICAgIGlmIChjb250YWllbnJSZWN0KSB7XG4gICAgICAgIGlmIChwcm9wID09PSAnbGVmdCcgfHwgcHJvcCA9PT0gJ3JpZ2h0JyB8fCBwcm9wID09PSAnd2lkdGgnKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSAocGFyc2VGbG9hdChvcmlnaW5hbFZhbHVlKSAqIDEwMCAvIGNvbnRhaWVuclJlY3Qud2lkdGgpLnRvRml4ZWQoNClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IChwYXJzZUZsb2F0KG9yaWdpbmFsVmFsdWUpICogMTAwIC8gY29udGFpZW5yUmVjdC5oZWlnaHQpLnRvRml4ZWQoNClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcGl4ZWxWYWx1ZSA9IHBhcnNlRmxvYXQob3JpZ2luYWxWYWx1ZSlcbiAgICB9XG5cbiAgICBpZiAoIXBpeGVsVmFsdWUgJiYgdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFKSB7XG4gICAgICAvLyBjaGFuZ2UgcGVyY2VudGFnZSB2YWx1ZVxuICAgICAgY29uc3QgdG90YWwgPSBwcm9wID09PSAnd2lkdGgnID8gY29udGFpZW5yUmVjdC53aWR0aCA6IGNvbnRhaWVuclJlY3QuaGVpZ2h0XG4gICAgICBwaXhlbFZhbHVlID0gTWF0aC5yb3VuZChkaXN0YW5jZSAqIHRvdGFsIC8gMTAwKVxuICAgIH0gZWxzZSBpZiAoIXBpeGVsVmFsdWUgJiYgdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QSVhFTCkge1xuICAgICAgcGl4ZWxWYWx1ZSA9IGRpc3RhbmNlXG4gICAgfVxuXG4gICAgYmJveCA9IGJib3guc2V0KHByb3AsIHVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSA/IGAke25ld1ZhbHVlfSVgIDogYCR7bmV3VmFsdWV9cHhgKVxuXG4gICAgaWYgKHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nPy5oZWlnaHRNb2RlID09PSAncmF0aW8nKSB7XG4gICAgICBjb25zdCByYXRpbyA9IHV0aWxzLnBhcnNlQXNwZWN0UmF0aW8odGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmcuYXNwZWN0UmF0aW8pXG4gICAgICBpZiAocHJvcCA9PT0gJ3dpZHRoJykge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBwaXhlbFZhbHVlICogcmF0aW9cbiAgICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShiYm94LmhlaWdodCkpIHtcbiAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IChoZWlnaHQgKiAxMDAgLyBjb250YWllbnJSZWN0LmhlaWdodCkudG9GaXhlZCg0KVxuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgnaGVpZ2h0JywgYCR7bmV3VmFsdWV9JWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdoZWlnaHQnLCBgJHtNYXRoLnJvdW5kKGhlaWdodCl9cHhgKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHBpeGVsVmFsdWUgLyByYXRpb1xuICAgICAgICBpZiAodXRpbHMuaXNQZXJjZW50YWdlKGJib3gud2lkdGgpKSB7XG4gICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSAod2lkdGggKiAxMDAgLyBjb250YWllbnJSZWN0LndpZHRoKS50b0ZpeGVkKDQpXG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCd3aWR0aCcsIGAke25ld1ZhbHVlfSVgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgnd2lkdGgnLCBgJHtNYXRoLnJvdW5kKHdpZHRoKX1weGApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnByb3BzLm9uUG9zQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBiYm94XG4gICAgKVxuICB9XG5cbiAgdXBkYXRlTW9kZSA9IChwcm9wOiBzdHJpbmcsIHZhbHVlOiBMYXlvdXRJdGVtU2l6ZU1vZGVzKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nID8/IEltbXV0YWJsZSh7fSlcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgc2V0dGluZy5zZXRJbihbJ2F1dG9Qcm9wcycsIHByb3BdLCB2YWx1ZSlcbiAgICApXG4gIH1cblxuICB1cGRhdGVMb2NrUGFyZW50ID0gKGUpID0+IHtcbiAgICBsZXQgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ2xvY2tQYXJlbnQnLCBlLnRhcmdldC5jaGVja2VkKVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nXG4gICAgKVxuICB9XG5cbiAgZ2V0U2l6ZU9mQ29udGFpbmVyICgpOiBDbGllbnRSZWN0IHtcbiAgICBjb25zdCBsYXlvdXRFbGVtID0gdGhpcy5xdWVyeVNlbGVjdG9yKGBkaXYuZml4ZWQtbGF5b3V0W2RhdGEtbGF5b3V0aWQ9XCIke3RoaXMucHJvcHMubGF5b3V0SWR9XCJdYClcbiAgICBpZiAobGF5b3V0RWxlbSkge1xuICAgICAgcmV0dXJuIGxheW91dEVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldFNpemVPZkl0ZW0gKCk6IENsaWVudFJlY3Qge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBsYXlvdXRFbGVtID0gdGhpcy5xdWVyeVNlbGVjdG9yKFxuICAgICAgYGRpdi5leGItcm5kW2RhdGEtbGF5b3V0aWQ9XCIke2xheW91dElkfVwiXVtkYXRhLWxheW91dGl0ZW1pZD1cIiR7bGF5b3V0SXRlbS5pZH1cIl1gKVxuICAgIGlmIChsYXlvdXRFbGVtKSB7XG4gICAgICByZXR1cm4gbGF5b3V0RWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcXVlcnlTZWxlY3RvciAoc2VsZWN0b3I6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBhcHBGcmFtZTogSFRNTEZyYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGlmcmFtZVtuYW1lPVwiJHtBUFBfRlJBTUVfTkFNRV9JTl9CVUlMREVSfVwiXWApXG4gICAgaWYgKGFwcEZyYW1lKSB7XG4gICAgICBjb25zdCBhcHBGcmFtZURvYyA9IGFwcEZyYW1lLmNvbnRlbnREb2N1bWVudCB8fCBhcHBGcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50XG4gICAgICByZXR1cm4gYXBwRnJhbWVEb2MucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHRvZ2dsZUhlaWdodE1vZGUgPSAoKSA9PiB7XG4gICAgbGV0IHNldHRpbmcgPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uc2V0dGluZyB8fCBJbW11dGFibGUoe30pXG4gICAgY29uc3QgbW9kZSA9IHNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJyA/ICdmaXhlZCcgOiAncmF0aW8nXG4gICAgc2V0dGluZyA9IHNldHRpbmcuc2V0KCdoZWlnaHRNb2RlJywgbW9kZSlcbiAgICBpZiAobW9kZSA9PT0gJ3JhdGlvJykge1xuICAgICAgY29uc3QgaXRlbVJlY3QgPSB0aGlzLmdldFNpemVPZkl0ZW0oKVxuICAgICAgaWYgKGl0ZW1SZWN0KSB7XG4gICAgICAgIHNldHRpbmcgPSBzZXR0aW5nLnNldCgnYXNwZWN0UmF0aW8nLCBOdW1iZXIoKGl0ZW1SZWN0LmhlaWdodCAvIGl0ZW1SZWN0LndpZHRoKS50b0ZpeGVkKDIpKSlcbiAgICAgICAgICAuc2V0SW4oWydhdXRvUHJvcHMnLCAnaGVpZ2h0JywgJ0FVVE8nXSlcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgIHNldHRpbmdcbiAgICApXG4gIH1cblxuICB1cGRhdGVBc3BlY3RSYXRpbyA9IChuZXdSYXRpbykgPT4ge1xuICAgIGxldCBzZXR0aW5nID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmcgfHwgSW1tdXRhYmxlKHt9KVxuICAgIHNldHRpbmcgPSBzZXR0aW5nLnNldCgnYXNwZWN0UmF0aW8nLCBuZXdSYXRpbylcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgc2V0dGluZ1xuICAgIClcbiAgfVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmxheW91dC1pdGVtLXRvb2xiYXIge1xuICAgICAgICBib3gtc2hhZG93OiBub25lO1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcblxuICAgICAgICAudG9vbGJhci1pdGVtLCBpY29uLWNvbnRhaW5lciB7XG4gICAgICAgICAgd2lkdGg6IDI4cHg7XG4gICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgfVxuICAgICAgICAudG9vbGJhci1ncm91cCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgbWFyZ2luOiAwIDFweDtcbiAgICAgICAgfVxuICAgICAgICAudG9vbGJhci1pdGVtIHtcbiAgICAgICAgICBtYXJnaW46IDAgMXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICY6aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQtNTAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdmcge1xuICAgICAgICAgICAgd2lkdGg6IDE0cHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDE0cHg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5yYXRpby12YWx1ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgbGF5b3V0SWQsIGZvcm1hdE1lc3NhZ2UsIGlzTG9ja0xheW91dCwgc3VwcG9ydEF1dG9TaXplIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFsYXlvdXRJdGVtKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICB0aGlzLml0ZW1TZXR0aW5nID0gbG9kYXNoLmFzc2lnbih7fSwgREVGQVVMVF9GSVhfTEFZT1VUX0lURU1fU0VUVElORywgbGF5b3V0SXRlbS5zZXR0aW5nKVxuICAgIGNvbnN0IGlzS2VlcEFzcGVjdCA9IHRoaXMuaXRlbVNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJ1xuXG4gICAgY29uc3Qgd2lkdGhNb2RlID0gdXRpbHMuZ2V0TGF5b3V0SXRlbVNpemVNb2RlKCd3aWR0aCcsIGxheW91dEl0ZW0uYmJveCBhcyBJTUJvdW5kaW5nQm94LCB0aGlzLml0ZW1TZXR0aW5nLmF1dG9Qcm9wcylcbiAgICBjb25zdCBoZWlnaHRNb2RlID0gdXRpbHMuZ2V0TGF5b3V0SXRlbVNpemVNb2RlKCdoZWlnaHQnLCBsYXlvdXRJdGVtLmJib3ggYXMgSU1Cb3VuZGluZ0JveCwgdGhpcy5pdGVtU2V0dGluZy5hdXRvUHJvcHMpXG4gICAgY29uc3QgYmJveCA9IGxheW91dEl0ZW0uYmJveFxuICAgIGNvbnN0IHRoZW1lID0gZ2V0VGhlbWUoKVxuXG4gICAgY29uc3QgaW5wdXRTdHlsZSA9IGNzc2B3aWR0aDogMTAwcHg7YFxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmaXhlZC1pdGVtLXNldHRpbmcnIGNzcz17dGhpcy5nZXRTdHlsZSgpfSByZWY9e2VsID0+ICh0aGlzLnJlZiA9IGVsKX0+XG4gICAgICAgIHshaXNMb2NrTGF5b3V0ICYmIHRoaXMuc3RhdGUuZW5hYmxlVG9vbGJhciAmJiAoXG4gICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPFNldHRpbmdTZWN0aW9uIGNsYXNzTmFtZT0ncC0wIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJz5cbiAgICAgICAgICAgICAgPFRvb2xiYXJcbiAgICAgICAgICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICAgICAgbGF5b3V0SXRlbT17bGF5b3V0SXRlbX1cbiAgICAgICAgICAgICAgICBwYXJlbnRSZWY9e3RoaXMucmVmfVxuICAgICAgICAgICAgICAgIHRoZW1lPXt0aGVtZX1cbiAgICAgICAgICAgICAgICB0b29scz17cG9zaXRpb25NZW51c31cbiAgICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1NldHRpbmdTZWN0aW9uPlxuICAgICAgICAgICAgPFNldHRpbmdTZWN0aW9uXG4gICAgICAgICAgICAgIHJvbGU9J2dyb3VwJ1xuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtmb3JtYXRNZXNzYWdlKCdzaXplJyl9ICYgJHtmb3JtYXRNZXNzYWdlKCdwb3NpdGlvbicpfWB9XG4gICAgICAgICAgICAgIHRpdGxlPXtgJHtmb3JtYXRNZXNzYWdlKCdzaXplJyl9ICYgJHtmb3JtYXRNZXNzYWdlKCdwb3NpdGlvbicpfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxTZXR0aW5nUm93IHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCd3aWR0aCcpfSBsYWJlbD17Zm9ybWF0TWVzc2FnZSgnd2lkdGgnKX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2lucHV0U3R5bGV9PlxuICAgICAgICAgICAgICAgICAgPFNpemVFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9J1cnXG4gICAgICAgICAgICAgICAgICAgIG1vZGU9e3dpZHRoTW9kZX1cbiAgICAgICAgICAgICAgICAgICAgc2l6ZU1vZGVzPXtzdXBwb3J0QXV0b1NpemUgJiYgIWlzS2VlcEFzcGVjdCA/IHNpemVtb2RlcyA6IHNpemVtb2Rlc1dpdGhvdXRBdXRvfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dWlVdGlscy5zdHJpbmdPZkxpbmVhclVuaXQoYmJveC53aWR0aCl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB7IHRoaXMudXBkYXRlQkJveCgnd2lkdGgnLCB2YWx1ZSkgfX1cbiAgICAgICAgICAgICAgICAgICAgb25Nb2RlQ2hhbmdlPXt2YWx1ZSA9PiB7IHRoaXMudXBkYXRlTW9kZSgnd2lkdGgnLCB2YWx1ZSkgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgICAgICAge3dpZHRoTW9kZSAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ2tlZXBBc3BlY3RSYXRpbycpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIHR5cGU9J3RlcnRpYXJ5JyBjbGFzc05hbWU9J21sLTEnIGljb24gb25DbGljaz17dGhpcy50b2dnbGVIZWlnaHRNb2RlfSBhcmlhLXByZXNzZWQ9e2lzS2VlcEFzcGVjdH0+XG4gICAgICAgICAgICAgICAgICAgICAge2lzS2VlcEFzcGVjdCA/IDxMb2NrT3V0bGluZWQgc2l6ZT0ncycgLz4gOiA8VW5sb2NrT3V0bGluZWQgc2l6ZT0ncycgLz59XG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8U2V0dGluZ1JvdyByb2xlPSdncm91cCcgYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZSgnaGVpZ2h0Jyl9IGxhYmVsPXtmb3JtYXRNZXNzYWdlKCdoZWlnaHQnKX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgJ210LTAnOiB3aWR0aE1vZGUgIT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0byB9KX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2lucHV0U3R5bGV9PlxuICAgICAgICAgICAgICAgICAgPFNpemVFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9J0gnXG4gICAgICAgICAgICAgICAgICAgIG1vZGU9e2hlaWdodE1vZGV9XG4gICAgICAgICAgICAgICAgICAgIHNpemVNb2Rlcz17c3VwcG9ydEF1dG9TaXplID8gc2l6ZW1vZGVzIDogc2l6ZW1vZGVzV2l0aG91dEF1dG99XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0tlZXBBc3BlY3R9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1aVV0aWxzLnN0cmluZ09mTGluZWFyVW5pdChiYm94LmhlaWdodCl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB7IHRoaXMudXBkYXRlQkJveCgnaGVpZ2h0JywgdmFsdWUpIH19XG4gICAgICAgICAgICAgICAgICAgIG9uTW9kZUNoYW5nZT17dmFsdWUgPT4geyB0aGlzLnVwZGF0ZU1vZGUoJ2hlaWdodCcsIHZhbHVlKSB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgICB7aXNLZWVwQXNwZWN0ICYmIChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ1JvdyBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCdhc3BlY3RSYXRpbycpfSBsYWJlbD17Zm9ybWF0TWVzc2FnZSgnYXNwZWN0UmF0aW8nKX0+XG4gICAgICAgICAgICAgICAgICA8SW5wdXRSYXRpbyB2YWx1ZT17dGhpcy5pdGVtU2V0dGluZy5hc3BlY3RSYXRpb30gc3R5bGU9e3sgd2lkdGg6IDEwMCB9fSBvbkNoYW5nZT17dGhpcy51cGRhdGVBc3BlY3RSYXRpb30gLz5cbiAgICAgICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxTZXR0aW5nUm93PlxuICAgICAgICAgICAgICAgIDxJdGVtUG9zaXRpb25TZXR0aW5nIHsuLi50aGlzLnByb3BzfSB3aWR0aE1vZGU9e3dpZHRoTW9kZX0gaGVpZ2h0TW9kZT17aGVpZ2h0TW9kZX0gLz5cbiAgICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgICA8Q29tbW9uVHJhbnNmb3JtU2V0dGluZ1xuICAgICAgICAgICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgICAgICAgICAgc2V0dGluZz17bGF5b3V0SXRlbS5zZXR0aW5nfVxuICAgICAgICAgICAgICAgIG9uU2V0dGluZ0NoYW5nZT17dGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgICAgICAgIDxTZXR0aW5nU2VjdGlvbj5cbiAgICAgICAgICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ2xvY2tQYXJlbnQnKX0+XG4gICAgICAgICAgICAgICAgPFN3aXRjaCBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCdsb2NrUGFyZW50Jyl9IGNoZWNrZWQ9e3RoaXMuaXRlbVNldHRpbmcubG9ja1BhcmVudH0gb25DaGFuZ2U9e3RoaXMudXBkYXRlTG9ja1BhcmVudH0gLz5cbiAgICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICApfVxuICAgICAgICB7KGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0IHx8IGxheW91dEl0ZW0uc2VjdGlvbklkKSAmJiAoXG4gICAgICAgICAgPENvbW1vbkxheW91dEl0ZW1TZXR0aW5nXG4gICAgICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgICAgICBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX1cbiAgICAgICAgICAgIGlzU2VjdGlvbj17bGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9ufVxuICAgICAgICAgICAgb25TdHlsZUNoYW5nZT17dGhpcy5wcm9wcy5vblN0eWxlQ2hhbmdlfVxuICAgICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlfVxuICAgICAgICAgICAgc2V0dGluZz17bGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSl9XG4gICAgICAgICAgICBvblNldHRpbmdDaGFuZ2U9e3RoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCBsb2Rhc2gsIGNsYXNzTmFtZXMsIHR5cGUgSU1Cb3VuZGluZ0JveCwgQVBQX0ZSQU1FX05BTUVfSU5fQlVJTERFUiwgSW1tdXRhYmxlLCB0eXBlIFNlcmlhbGl6ZWRTdHlsZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJbnB1dFVuaXQgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3N0eWxlLXNldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IERpc3RhbmNlVW5pdHMsIHR5cGUgTGluZWFyVW5pdCwgdXRpbHMgYXMgdWlVdGlscywgVG9vbHRpcCB9IGZyb20gJ2ppbXUtdWknXG5cbmltcG9ydCB7IERFRkFVTFRfRklYX0xBWU9VVF9JVEVNX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQgeyB1dGlscywgdHlwZSBGaXhlZExheW91dEl0ZW1TZXR0aW5nLCBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtU2V0dGluZ1Byb3BzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCB7IGdlbmVyYXRlQkJveFN0eWxlIH0gZnJvbSAnLi4vZml4ZWQtbGF5b3V0LXV0aWwnXG5pbXBvcnQgeyBBcnJvd1N0cmV0Y2hlZE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1zdHJldGNoZWQnXG5cbmNvbnN0IGF2YWlsYWJsZVVuaXRzID0gW0Rpc3RhbmNlVW5pdHMuUElYRUwsIERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRV1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgaGVpZ2h0TW9kZTogTGF5b3V0SXRlbVNpemVNb2Rlc1xuICB3aWR0aE1vZGU6IExheW91dEl0ZW1TaXplTW9kZXNcbn1cblxuZXhwb3J0IGNsYXNzIEl0ZW1Qb3NpdGlvblNldHRpbmcgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dEl0ZW1TZXR0aW5nUHJvcHMgJiBQcm9wcz4ge1xuICBmbGlwTGVmdFJpZ2h0OiBib29sZWFuXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5mbGlwTGVmdFJpZ2h0ID0gdXRpbHMuaXNSVEwoKVxuICB9XG5cbiAgZ2V0U3R5bGUgKCk6IFNlcmlhbGl6ZWRTdHlsZXMge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAucG9zaXRpb24tc2V0dGluZyB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0LTUwMCk7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBhZGRpbmctdG9wOiA2MCU7XG4gICAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBwYWRkaW5nOiA3cHg7XG4gICAgICB9XG5cbiAgICAgIC53LWhhbGYge1xuICAgICAgICB3aWR0aDogY2FsYyg1MCUgLSAxNnB4KTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgfVxuICAgICAgLmgtaGFsZiB7XG4gICAgICAgIGhlaWdodDogY2FsYyg1MCUgLSAxNnB4KTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgfVxuICAgICAgLnBvcy1sYWJlbCB7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC5ib3gtY29sdW1uIHtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgfVxuXG4gICAgICAuYm94LWl0ZW0ge1xuICAgICAgICB3aWR0aDogMjRweDtcbiAgICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICAgIG1hcmdpbjogNHB4IDA7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG5cbiAgICAgICAgJi5zdHJldGNoIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICAgIH1cbiAgICAgICAgLmgtYXJyb3csIC52LWFycm93IHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgIC5hcnJvdy1pY29uIHtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC5oLWFycm93IHtcbiAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4gICAgICAgIH1cbiAgICAgICAgLnYtYXJyb3cge1xuICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgICAgIH1cbiAgICAgICAgJi5zdHJldGNoLXcgLmgtYXJyb3csXG4gICAgICAgICYuc3RyZXRjaC1oIC52LWFycm93IHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuYW5jaG9yIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG5cbiAgICAgICAgJi5zZWxlY3RlZCB7XG4gICAgICAgICAgd2lkdGg6IDEwcHg7XG4gICAgICAgICAgaGVpZ2h0OiAxMHB4O1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS0xMDApO1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLXByaW1hcnktNjAwKSAhaW1wb3J0YW50O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgICYudG9wLmxlZnQge1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweCAwIDAgMDtcbiAgICAgICAgfVxuICAgICAgICAmLnRvcC5yaWdodCB7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAzcHggMCAwO1xuICAgICAgICB9XG4gICAgICAgICYuYm90dG9tLnJpZ2h0IHtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgM3B4IDA7XG4gICAgICAgIH1cbiAgICAgICAgJi5ib3R0b20ubGVmdCB7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDAgM3B4O1xuICAgICAgICB9XG4gICAgICAgICYubGVmdCB7XG4gICAgICAgICAgbGVmdDogNnB4O1xuICAgICAgICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgdmFyKC0tZGFyay0yMDApO1xuICAgICAgICAgICYuc2VsZWN0ZWQ6YmVmb3JlIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHJpZ2h0OiAtMTBweDtcbiAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuICAgICAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgICAgICBoZWlnaHQ6IDJweDtcbiAgICAgICAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS02MDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAmLnRvcCB7XG4gICAgICAgICAgdG9wOiA2cHg7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLWRhcmstMjAwKTtcbiAgICAgICAgICAmLnNlbGVjdGVkOmFmdGVyIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJvdHRvbTogLTEwcHg7XG4gICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICAgIHdpZHRoOiAycHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDEwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LTYwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICYuYm90dG9tIHtcbiAgICAgICAgICBib3R0b206IDZweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tZGFyay0yMDApO1xuICAgICAgICAgICYuc2VsZWN0ZWQ6YWZ0ZXIge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiAtMTBweDtcbiAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgd2lkdGg6IDJweDtcbiAgICAgICAgICAgIGhlaWdodDogMTBweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJi5yaWdodCB7XG4gICAgICAgICAgcmlnaHQ6IDZweDtcbiAgICAgICAgICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICAgICAgJi5zZWxlY3RlZDpiZWZvcmUge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgbGVmdDogLTEwcHg7XG4gICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgaGVpZ2h0OiAycHg7XG4gICAgICAgICAgICB3aWR0aDogMTBweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmZyb20tbGVmdCB7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgdmFyKC0tcHJpbWFyeS02MDApO1xuICAgICAgICAmLmlzLWF1dG8ge1xuICAgICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICAgIH1cbiAgICAgICAgJi5hbGxvdy1jaGFuZ2U6aG92ZXIge1xuICAgICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1wcmltYXJ5LTYwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC5mcm9tLXRvcCB7XG4gICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS1wcmltYXJ5LTYwMCk7XG4gICAgICAgICYuaXMtYXV0byB7XG4gICAgICAgICAgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0tZGFyay0yMDApO1xuICAgICAgICB9XG4gICAgICAgICYuYWxsb3ctY2hhbmdlOmhvdmVyIHtcbiAgICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1wcmltYXJ5LTYwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC5mcm9tLXJpZ2h0IHtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgdmFyKC0tcHJpbWFyeS02MDApO1xuICAgICAgICAmLmlzLWF1dG8ge1xuICAgICAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogdmFyKC0tZGFyay0yMDApO1xuICAgICAgICB9XG4gICAgICAgICYuYWxsb3ctY2hhbmdlOmhvdmVyIHtcbiAgICAgICAgICBib3JkZXItcmlnaHQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLmZyb20tYm90dG9tIHtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgJi5pcy1hdXRvIHtcbiAgICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICAgIH1cbiAgICAgICAgJi5hbGxvdy1jaGFuZ2U6aG92ZXIge1xuICAgICAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyogLmxpbmUtaC5pcy1hdXRvLFxuICAgICAgLmxpbmUtdi5pcy1hdXRvIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICB9ICovXG4gICAgICAubGluZS1oIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiAgICAgICAgaGVpZ2h0OiAxMnB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgei1pbmRleDogMDtcblxuICAgICAgICAmLmFsbG93LWNoYW5nZSB7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICY6aG92ZXI6YWZ0ZXIge1xuICAgICAgICAgICAgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0tcHJpbWFyeS02MDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAmOmFmdGVyIHtcbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICBoZWlnaHQ6IDA7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgfVxuICAgICAgICAmLmlzLWF1dG86YWZ0ZXIge1xuICAgICAgICAgIGJvcmRlci10b3Atc3R5bGU6IGRhc2hlZDtcbiAgICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1kYXJrLTIwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC5saW5lLXYge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgd2lkdGg6IDEycHg7XG4gICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgei1pbmRleDogMDtcblxuICAgICAgICAmLmFsbG93LWNoYW5nZSB7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICY6aG92ZXI6YWZ0ZXIge1xuICAgICAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgdmFyKC0tcHJpbWFyeS02MDApO1xuICAgICAgICB9XG4gICAgICAgICYuaXMtYXV0bzphZnRlciB7XG4gICAgICAgICAgYm9yZGVyLWxlZnQtc3R5bGU6IGRhc2hlZDtcbiAgICAgICAgICBib3JkZXItbGVmdC1jb2xvcjogdmFyKC0tZGFyay0yMDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5hdXRvLWxhYmVsIHtcbiAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0LTUwMCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1saWdodC0zMDApO1xuICAgICAgfVxuXG4gICAgICAuc3R5bGUtc2V0dGluZy0taW5wdXQtdW5pdCB7XG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGlucHV0LmppbXUtbnVtZXJpYy1pbnB1dC1pbnB1dCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodC0yMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICAuc3R5bGUtc2V0dGluZy0tdW5pdC1zZWxlY3RvciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodC0yMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIHdpZHRoOiA1MnB4O1xuICAgICAgICBoZWlnaHQ6IDI0cHg7XG5cbiAgICAgICAgaW5wdXQuamltdS1udW1lcmljLWlucHV0LWlucHV0IHtcbiAgICAgICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodC01MDApO1xuICAgICAgICAgICY6Zm9jdXMge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtMjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLnN0eWxlLXNldHRpbmctLXVuaXQtc2VsZWN0b3Ige1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0LTUwMCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWRhcmstNDAwKTtcbiAgICAgICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAub3JpZ2luLXRpcCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFyay00MDApO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGlucHV0VW5pdCAocHJvcDogc3RyaW5nKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgZm9ybWF0TWVzc2FnZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHZhbHVlID0gdWlVdGlscy5zdHJpbmdPZkxpbmVhclVuaXQobGF5b3V0SXRlbS5iYm94W3Byb3BdKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3MtbGFiZWwnIHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKHByb3ApfT5cbiAgICAgICAgPElucHV0VW5pdFxuICAgICAgICAgIHVuaXRzPXthdmFpbGFibGVVbml0c31cbiAgICAgICAgICBtaW49ey1JbmZpbml0eX1cbiAgICAgICAgICBtYXg9e0luZmluaXR5fVxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7IHRoaXMudXBkYXRlQkJveChwcm9wLCB2YWx1ZSkgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHVwZGF0ZUJCb3ggPSAocHJvcDogc3RyaW5nLCB2YWx1ZTogTGluZWFyVW5pdCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGJib3ggPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uYmJveCBhcyBJTUJvdW5kaW5nQm94XG4gICAgY29uc3QgeyBkaXN0YW5jZSwgdW5pdCB9ID0gdmFsdWVcbiAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gYmJveFtwcm9wXVxuICAgIGxldCBuZXdWYWx1ZTogc3RyaW5nIHwgbnVtYmVyID0gZGlzdGFuY2UudG9GaXhlZCgyKVxuXG4gICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShvcmlnaW5hbFZhbHVlKSAmJiB1bml0ID09PSBEaXN0YW5jZVVuaXRzLlBJWEVMKSB7XG4gICAgICAvLyBjaGFuZ2UgZnJvbSBwZXJjZW50YWdlIHRvIHBpeGVsXG4gICAgICBjb25zdCBjb250YWllbnJSZWN0ID0gdGhpcy5nZXRTaXplT2ZDb250YWluZXIoKVxuICAgICAgaWYgKGNvbnRhaWVuclJlY3QgIT0gbnVsbCkge1xuICAgICAgICBpZiAocHJvcCA9PT0gJ2xlZnQnIHx8IHByb3AgPT09ICdyaWdodCcgfHwgcHJvcCA9PT0gJ3dpZHRoJykge1xuICAgICAgICAgIG5ld1ZhbHVlID0gTWF0aC5yb3VuZCgocGFyc2VGbG9hdChvcmlnaW5hbFZhbHVlKSAqIGNvbnRhaWVuclJlY3Qud2lkdGgpIC8gMTAwKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1ZhbHVlID0gTWF0aC5yb3VuZCgocGFyc2VGbG9hdChvcmlnaW5hbFZhbHVlKSAqIGNvbnRhaWVuclJlY3QuaGVpZ2h0KSAvIDEwMClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzUGVyY2VudGFnZShvcmlnaW5hbFZhbHVlKSAmJiB1bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UpIHtcbiAgICAgIC8vIGNoYW5nZSBmcm9tIHBpeGVsIHRvIHBlcmNlbnRhZ2VcbiAgICAgIGNvbnN0IGNvbnRhaWVuclJlY3QgPSB0aGlzLmdldFNpemVPZkNvbnRhaW5lcigpXG4gICAgICBpZiAoY29udGFpZW5yUmVjdCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChwcm9wID09PSAnbGVmdCcgfHwgcHJvcCA9PT0gJ3JpZ2h0JyB8fCBwcm9wID09PSAnd2lkdGgnKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSAoKHBhcnNlRmxvYXQob3JpZ2luYWxWYWx1ZSkgKiAxMDApIC8gY29udGFpZW5yUmVjdC53aWR0aCkudG9GaXhlZCgyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1ZhbHVlID0gKChwYXJzZUZsb2F0KG9yaWdpbmFsVmFsdWUpICogMTAwKSAvIGNvbnRhaWVuclJlY3QuaGVpZ2h0KS50b0ZpeGVkKDIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnByb3BzLm9uUG9zQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBiYm94LnNldChwcm9wLCB2YWx1ZS51bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UgPyBgJHtuZXdWYWx1ZX0lYCA6IGAke25ld1ZhbHVlfXB4YClcbiAgICApXG4gIH1cblxuICBnZXRTaXplT2ZDb250YWluZXIgKCk6IENsaWVudFJlY3Qge1xuICAgIGNvbnN0IGxheW91dEVsZW0gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoYGRpdi5maXhlZC1sYXlvdXRbZGF0YS1sYXlvdXRpZD1cIiR7dGhpcy5wcm9wcy5sYXlvdXRJZH1cIl1gKVxuICAgIHJldHVybiBsYXlvdXRFbGVtPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICB9XG5cbiAgZ2V0U2l6ZU9mSXRlbSAoKTogQ2xpZW50UmVjdCB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGxheW91dEVsZW0gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgZGl2LmV4Yi1ybmRbZGF0YS1sYXlvdXRpZD1cIiR7bGF5b3V0SWR9XCJdW2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtsYXlvdXRJdGVtLmlkfVwiXWBcbiAgICApXG4gICAgcmV0dXJuIGxheW91dEVsZW0/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIH1cblxuICBxdWVyeVNlbGVjdG9yIChzZWxlY3Rvcjogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGFwcEZyYW1lOiBIVE1MRnJhbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaWZyYW1lW25hbWU9XCIke0FQUF9GUkFNRV9OQU1FX0lOX0JVSUxERVJ9XCJdYClcbiAgICBpZiAoYXBwRnJhbWUgIT0gbnVsbCkge1xuICAgICAgY29uc3QgYXBwRnJhbWVEb2MgPSBhcHBGcmFtZS5jb250ZW50RG9jdW1lbnQgPz8gYXBwRnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudFxuICAgICAgcmV0dXJuIGFwcEZyYW1lRG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzd2l0Y2hBdXRvIChzaWRlOiBzdHJpbmcsIG90aGVyU2l6ZTogc3RyaW5nLCBvcmlnaW5WYWx1ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBzZXR0aW5nID0gbGF5b3V0SXRlbS5zZXR0aW5nID8/IEltbXV0YWJsZSh7fSlcbiAgICBsZXQgYmJveCA9IChsYXlvdXRJdGVtLmJib3ggPz8gSW1tdXRhYmxlKHt9KSkgYXMgSU1Cb3VuZGluZ0JveFxuICAgIGlmIChvcmlnaW5WYWx1ZSAmJiBiYm94W3NpZGVdID09IG51bGwpIHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSB0aGlzLmdldFNpemVPZkNvbnRhaW5lcigpXG4gICAgICBjb25zdCByZWN0ID0gdGhpcy5nZXRTaXplT2ZJdGVtKClcbiAgICAgIHN3aXRjaCAoc2lkZSkge1xuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoc2lkZSwgdXRpbHMudG9SYXRpbyhyZWN0LmxlZnQsIGNvbnRhaW5lclJlY3Qud2lkdGgpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoc2lkZSwgdXRpbHMudG9SYXRpbyhjb250YWluZXJSZWN0LndpZHRoIC0gcmVjdC5yaWdodCwgY29udGFpbmVyUmVjdC53aWR0aCkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoc2lkZSwgdXRpbHMudG9SYXRpbyhyZWN0LnRvcCwgY29udGFpbmVyUmVjdC5oZWlnaHQpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KHNpZGUsIHV0aWxzLnRvUmF0aW8oY29udGFpbmVyUmVjdC5oZWlnaHQgLSByZWN0LmJvdHRvbSwgY29udGFpbmVyUmVjdC5oZWlnaHQpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICB0aGlzLnByb3BzLm9uUG9zQ2hhbmdlKFxuICAgICAgICB7XG4gICAgICAgICAgbGF5b3V0SWQsXG4gICAgICAgICAgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkXG4gICAgICAgIH0sXG4gICAgICAgIGJib3hcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldEluKFsnYXV0b1Byb3BzJywgc2lkZV0sICFvcmlnaW5WYWx1ZSkuc2V0SW4oWydhdXRvUHJvcHMnLCBvdGhlclNpemVdLCBvcmlnaW5WYWx1ZSlcbiAgICApXG4gIH1cblxuICBjaGVja0F1dG9Qcm9wcyAoaXRlbVNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmcpOiB7XG4gICAgbGVmdEF1dG86IGJvb2xlYW5cbiAgICByaWdodEF1dG86IGJvb2xlYW5cbiAgICB0b3BBdXRvOiBib29sZWFuXG4gICAgYm90dG9tQXV0bzogYm9vbGVhblxuICB9IHtcbiAgICBjb25zdCBib3ggPSBnZW5lcmF0ZUJCb3hTdHlsZSh0aGlzLnByb3BzLmxheW91dEl0ZW0uYmJveCBhcyBJTUJvdW5kaW5nQm94LCBpdGVtU2V0dGluZylcblxuICAgIGNvbnN0IGxlZnRBdXRvID0gYm94LmxlZnQgPT0gbnVsbCB8fCAoaXRlbVNldHRpbmcuaENlbnRlciAmJiBib3gubGVmdCA9PT0gJzUwJScpXG4gICAgY29uc3QgcmlnaHRBdXRvID0gYm94LnJpZ2h0ID09IG51bGwgfHwgKGl0ZW1TZXR0aW5nLmhDZW50ZXIgJiYgYm94LmxlZnQgPT09ICc1MCUnKVxuICAgIGNvbnN0IHRvcEF1dG8gPSBib3gudG9wID09IG51bGwgfHwgKGl0ZW1TZXR0aW5nLnZDZW50ZXIgJiYgYm94LnRvcCA9PT0gJzUwJScpXG4gICAgY29uc3QgYm90dG9tQXV0byA9IGJveC5ib3R0b20gPT0gbnVsbCB8fCAoaXRlbVNldHRpbmcudkNlbnRlciAmJiBib3gudG9wID09PSAnNTAlJylcblxuICAgIHJldHVybiB7IGxlZnRBdXRvLCByaWdodEF1dG8sIHRvcEF1dG8sIGJvdHRvbUF1dG8gfVxuICB9XG5cbiAgY2hlY2tPcmlnaW4gKGxlZnRBdXRvOiBib29sZWFuLCByaWdodEF1dG86IGJvb2xlYW4sIHRvcEF1dG86IGJvb2xlYW4sIGJvdHRvbUF1dG86IGJvb2xlYW4pOiB7XG4gICAgbGVmdDogYm9vbGVhblxuICAgIHJpZ2h0OiBib29sZWFuXG4gICAgdG9wOiBib29sZWFuXG4gICAgYm90dG9tOiBib29sZWFuXG4gIH0ge1xuICAgIGxldCBsZWZ0ID0gbGVmdEF1dG9cbiAgICBsZXQgcmlnaHQgPSByaWdodEF1dG9cbiAgICBsZXQgdG9wID0gdG9wQXV0b1xuICAgIGxldCBib3R0b20gPSBib3R0b21BdXRvXG5cbiAgICBpZiAobGVmdEF1dG8gPT09IHJpZ2h0QXV0bykge1xuICAgICAgbGVmdCA9IHV0aWxzLmlzUlRMKClcbiAgICAgIHJpZ2h0ID0gIWxlZnRcbiAgICB9XG5cbiAgICBpZiAodG9wQXV0byA9PT0gYm90dG9tQXV0bykge1xuICAgICAgdG9wID0gZmFsc2VcbiAgICAgIGJvdHRvbSA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXaGVuIHdpZHRoIGlzIGN1c3RvbSwgb25seSBvbmUgb2YgdGhlIGxlZnQgYW5kIHJpZ2h0IGNhbiBzZXQgdG8gY3VzdG9tLlxuICAgKiBAcGFyYW0gcHJvcFxuICAgKiBAcGFyYW0gcmVsYXRlZFByb3BcbiAgICogQHBhcmFtIHNpZGVcbiAgICovXG4gIGFsbG93Q2hhbmdlQXV0b1Byb3BzIChzaWRlOiAnd2lkdGgnIHwgJ2hlaWdodCcpOiBib29sZWFuIHtcbiAgICBjb25zdCBpdGVtU2V0dGluZzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nXG4gICAgY29uc3QgYXV0b1Byb3BzID0gaXRlbVNldHRpbmc/LmF1dG9Qcm9wcyA/PyB7fVxuICAgIGNvbnN0IHNpemVNb2RlID0gdXRpbHMuZ2V0TGF5b3V0SXRlbVNpemVNb2RlKHNpZGUsIHRoaXMucHJvcHMubGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3gsIGF1dG9Qcm9wcylcblxuICAgIGlmIChzaXplTW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoIHx8XG4gICAgICAoc2lkZSA9PT0gJ3dpZHRoJyAmJiBpdGVtU2V0dGluZz8uaENlbnRlcikgfHxcbiAgICAgIChzaWRlID09PSAnaGVpZ2h0JyAmJiBpdGVtU2V0dGluZz8udkNlbnRlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0T3JpZ2luIChsZWZ0OiBib29sZWFuLCB0b3A6IGJvb2xlYW4sIHJpZ2h0OiBib29sZWFuLCBib3R0b206IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgZm9ybWF0TWVzc2FnZSB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGVmdCAmJiAhdG9wKSB7XG4gICAgICByZXR1cm4gdGhpcy5mbGlwTGVmdFJpZ2h0ID8gZm9ybWF0TWVzc2FnZSgnVFInKSA6IGZvcm1hdE1lc3NhZ2UoJ1RMJylcbiAgICB9XG4gICAgaWYgKCFyaWdodCAmJiAhdG9wKSB7XG4gICAgICByZXR1cm4gdGhpcy5mbGlwTGVmdFJpZ2h0ID8gZm9ybWF0TWVzc2FnZSgnVEwnKSA6IGZvcm1hdE1lc3NhZ2UoJ1RSJylcbiAgICB9XG4gICAgaWYgKCFyaWdodCAmJiAhYm90dG9tKSB7XG4gICAgICByZXR1cm4gdGhpcy5mbGlwTGVmdFJpZ2h0ID8gZm9ybWF0TWVzc2FnZSgnQkwnKSA6IGZvcm1hdE1lc3NhZ2UoJ0JSJylcbiAgICB9XG4gICAgaWYgKCFsZWZ0ICYmICFib3R0b20pIHtcbiAgICAgIHJldHVybiB0aGlzLmZsaXBMZWZ0UmlnaHQgPyBmb3JtYXRNZXNzYWdlKCdCUicpIDogZm9ybWF0TWVzc2FnZSgnQkwnKVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIHJlbmRlciAoKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgd2lkdGhNb2RlLCBoZWlnaHRNb2RlLCBmb3JtYXRNZXNzYWdlIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKGxheW91dEl0ZW0gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgaXRlbVNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCBERUZBVUxUX0ZJWF9MQVlPVVRfSVRFTV9TRVRUSU5HLCBsYXlvdXRJdGVtLnNldHRpbmcpXG4gICAgY29uc3QgeyBsZWZ0QXV0bywgcmlnaHRBdXRvLCB0b3BBdXRvLCBib3R0b21BdXRvIH0gPSB0aGlzLmNoZWNrQXV0b1Byb3BzKGl0ZW1TZXR0aW5nKVxuICAgIGNvbnN0IHsgdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0IH0gPSB0aGlzLmNoZWNrT3JpZ2luKGxlZnRBdXRvLCByaWdodEF1dG8sIHRvcEF1dG8sIGJvdHRvbUF1dG8pXG5cbiAgICBjb25zdCBjYW5Td2l0Y2hYQXV0byA9IHRoaXMuYWxsb3dDaGFuZ2VBdXRvUHJvcHMoJ3dpZHRoJylcbiAgICBjb25zdCBjYW5Td2l0Y2hZQXV0byA9IHRoaXMuYWxsb3dDaGFuZ2VBdXRvUHJvcHMoJ2hlaWdodCcpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0gY2xhc3NOYW1lPSd3LTEwMCc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3NpdGlvbi1zZXR0aW5nIHJvdW5kZWQtbGcnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb250ZW50IGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IHctaGFsZiBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggdy0xMDAganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyB0aXRsZT17Y2FuU3dpdGNoWEF1dG8gPyBmb3JtYXRNZXNzYWdlKGxlZnRBdXRvID8gJ2NoYW5nZVRvQ3VzdG9tJyA6ICdjaGFuZ2VUb0F1dG8nKSA6ICcnfT5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmcm9tLWxlZnQgbGluZS1oIGZsZXgtZ3Jvdy0xIGZsZXgtc2hyaW5rLTEnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgJ2lzLWF1dG8nOiBsZWZ0QXV0byxcbiAgICAgICAgICAgICAgICAgICAgICAnYWxsb3ctY2hhbmdlJzogY2FuU3dpdGNoWEF1dG9cbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2NhblN3aXRjaFhBdXRvID8gdGhpcy5zd2l0Y2hBdXRvLmJpbmQodGhpcywgJ2xlZnQnLCAncmlnaHQnLCBsZWZ0QXV0bykgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAge2xlZnRBdXRvID8gbnVsbCA6IHRoaXMuaW5wdXRVbml0KCdsZWZ0Jyl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGgtMTAwIGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyIGJveC1jb2x1bW4nPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGgtaGFsZiB3LTEwMCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIHRpdGxlPXtjYW5Td2l0Y2hZQXV0byA/IGZvcm1hdE1lc3NhZ2UodG9wQXV0byA/ICdjaGFuZ2VUb0N1c3RvbScgOiAnY2hhbmdlVG9BdXRvJykgOiAnJ30+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZnJvbS10b3AgbGluZS12IGZsZXgtZ3Jvdy0xIGZsZXgtc2hyaW5rLTEnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgJ2lzLWF1dG8nOiB0b3BBdXRvLFxuICAgICAgICAgICAgICAgICAgICAgICdhbGxvdy1jaGFuZ2UnOiBjYW5Td2l0Y2hZQXV0b1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17Y2FuU3dpdGNoWUF1dG8gPyB0aGlzLnN3aXRjaEF1dG8uYmluZCh0aGlzLCAndG9wJywgJ2JvdHRvbScsIHRvcEF1dG8pIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgIHt0b3BBdXRvID8gbnVsbCA6IHRoaXMuaW5wdXRVbml0KCd0b3AnKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdib3gtaXRlbSByb3VuZGVkLWxnJywge1xuICAgICAgICAgICAgICAgIHN0cmV0Y2g6IHdpZHRoTW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoIHx8IGhlaWdodE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCxcbiAgICAgICAgICAgICAgICAnc3RyZXRjaC13Jzogd2lkdGhNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gsXG4gICAgICAgICAgICAgICAgJ3N0cmV0Y2gtaCc6IGhlaWdodE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaFxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdoLWFycm93Jz5cbiAgICAgICAgICAgICAgICAgIDxBcnJvd1N0cmV0Y2hlZE91dGxpbmVkIGNsYXNzTmFtZT0nYXJyb3ctaWNvbicgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndi1hcnJvdyc+XG4gICAgICAgICAgICAgICAgICA8QXJyb3dTdHJldGNoZWRPdXRsaW5lZCBjbGFzc05hbWU9J2Fycm93LWljb24nIHJvdGF0ZT17OTB9IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGgtaGFsZiB3LTEwMCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIHRpdGxlPXtjYW5Td2l0Y2hZQXV0byA/IGZvcm1hdE1lc3NhZ2UoYm90dG9tQXV0byA/ICdjaGFuZ2VUb0N1c3RvbScgOiAnY2hhbmdlVG9BdXRvJykgOiAnJ30+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZnJvbS1ib3R0b20gbGluZS12IGZsZXgtZ3Jvdy0xIGZsZXgtc2hyaW5rLTEnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgJ2lzLWF1dG8nOiBib3R0b21BdXRvLFxuICAgICAgICAgICAgICAgICAgICAgICdhbGxvdy1jaGFuZ2UnOiBjYW5Td2l0Y2hZQXV0b1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17Y2FuU3dpdGNoWUF1dG8gPyB0aGlzLnN3aXRjaEF1dG8uYmluZCh0aGlzLCAnYm90dG9tJywgJ3RvcCcsIGJvdHRvbUF1dG8pIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgIHtib3R0b21BdXRvID8gbnVsbCA6IHRoaXMuaW5wdXRVbml0KCdib3R0b20nKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggdy1oYWxmIGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCB3LTEwMCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIHRpdGxlPXtjYW5Td2l0Y2hYQXV0byA/IGZvcm1hdE1lc3NhZ2UocmlnaHRBdXRvID8gJ2NoYW5nZVRvQ3VzdG9tJyA6ICdjaGFuZ2VUb0F1dG8nKSA6ICcnfT5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmcm9tLXJpZ2h0IGxpbmUtaCBmbGV4LWdyb3ctMSBmbGV4LXNocmluay0xJywge1xuICAgICAgICAgICAgICAgICAgICAgICdpcy1hdXRvJzogcmlnaHRBdXRvLFxuICAgICAgICAgICAgICAgICAgICAgICdhbGxvdy1jaGFuZ2UnOiBjYW5Td2l0Y2hYQXV0b1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17Y2FuU3dpdGNoWEF1dG8gPyB0aGlzLnN3aXRjaEF1dG8uYmluZCh0aGlzLCAncmlnaHQnLCAnbGVmdCcsIHJpZ2h0QXV0bykgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAge3JpZ2h0QXV0byA/IG51bGwgOiB0aGlzLmlucHV0VW5pdCgncmlnaHQnKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2FuY2hvciB0b3AgbGVmdCcsIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogIWxlZnQgJiYgIXRvcFxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYW5jaG9yIHRvcCByaWdodCcsIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogIXJpZ2h0ICYmICF0b3BcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2FuY2hvciBib3R0b20gbGVmdCcsIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogIWxlZnQgJiYgIWJvdHRvbVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYW5jaG9yIGJvdHRvbSByaWdodCcsIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogIWJvdHRvbSAmJiAhcmlnaHRcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nb3JpZ2luLXRpcCBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtLWNlbnRlcic+XG4gICAgICAgICAge3RoaXMuZ2V0T3JpZ2luKGxlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG4iLCJpbXBvcnQgeyB0eXBlIExheW91dEluZm8sIEltbXV0YWJsZSwgdHlwZSBJbW11dGFibGVPYmplY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzZWFyY2hVdGlscywgTGF5b3V0SXRlbVNpemVNb2RlcywgdXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24gfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0ICogYXMgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCdcbmltcG9ydCB7IHR5cGUgRml4ZWRMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9saWIvdHlwZXMnXG5pbXBvcnQgeyBzb3J0TGF5b3V0SXRlbXMgfSBmcm9tICcuL3V0aWwnXG5cbmV4cG9ydCBmdW5jdGlvbiBicmluZ0ZvcndhcmQgKGxheW91dEluZm86IExheW91dEluZm8pIHtcbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgY29uc3QgYXBwQ29uZmlnID0gYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZ1xuXG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICBjb25zdCBsYXlvdXQgPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgaW52YXJpYW50KGxheW91dC5vcmRlciwgJ3BhcmVudCBvcmRlciBtdXN0IG5vdCBiZSBlbXB0eSB0byBhbHRlciBvcmRlcicpXG4gIGNvbnN0IG9yZGVyID0gW10uY29uY2F0KGxheW91dC5vcmRlcilcbiAgY29uc3QgaW5kZXggPSBvcmRlci5pbmRleE9mKGxheW91dEl0ZW1JZClcbiAgaWYgKGluZGV4ID09PSBvcmRlci5sZW5ndGggLSAxIHx8IGluZGV4IDwgMCkge1xuICAgIHJldHVyblxuICB9XG4gIG9yZGVyW2luZGV4XSA9IG9yZGVyW2luZGV4ICsgMV1cbiAgb3JkZXJbaW5kZXggKyAxXSA9IGxheW91dEluZm8ubGF5b3V0SXRlbUlkXG5cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXRJZCwgJ29yZGVyJywgb3JkZXIpLmV4ZWMoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYnJpbmdUb0Zyb250IChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKSB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IGFwcENvbmZpZyA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcblxuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGludmFyaWFudChsYXlvdXQub3JkZXIsICdwYXJlbnQgb3JkZXIgbXVzdCBub3QgYmUgZW1wdHkgdG8gYWx0ZXIgb3JkZXInKVxuICBjb25zdCBvcmRlciA9IFtdLmNvbmNhdChsYXlvdXQub3JkZXIpXG4gIGNvbnN0IGluZGV4ID0gb3JkZXIuaW5kZXhPZihsYXlvdXRJdGVtSWQpXG4gIGlmIChpbmRleCA9PT0gb3JkZXIubGVuZ3RoIC0gMSB8fCBpbmRleCA8IDApIHtcbiAgICByZXR1cm5cbiAgfVxuICBvcmRlci5zcGxpY2UoaW5kZXgsIDEpXG4gIG9yZGVyLnB1c2gobGF5b3V0SW5mby5sYXlvdXRJdGVtSWQpXG5cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXRJZCwgJ29yZGVyJywgb3JkZXIpLmV4ZWMoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZEJhY2t3YXJkIChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKSB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IGFwcENvbmZpZyA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcblxuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGludmFyaWFudChsYXlvdXQub3JkZXIsICdwYXJlbnQgb3JkZXIgbXVzdCBub3QgYmUgZW1wdHkgdG8gYWx0ZXIgb3JkZXInKVxuICBjb25zdCBvcmRlciA9IFtdLmNvbmNhdChsYXlvdXQub3JkZXIpXG4gIGNvbnN0IGluZGV4ID0gb3JkZXIuaW5kZXhPZihsYXlvdXRJdGVtSWQpXG4gIGlmIChpbmRleCA8PSAwKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgb3JkZXJbaW5kZXhdID0gb3JkZXJbaW5kZXggLSAxXVxuICBvcmRlcltpbmRleCAtIDFdID0gbGF5b3V0SW5mby5sYXlvdXRJdGVtSWRcblxuICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dFByb3BlcnR5KGxheW91dElkLCAnb3JkZXInLCBvcmRlcikuZXhlYygpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kVG9CYWNrIChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKSB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IGFwcENvbmZpZyA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcblxuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGludmFyaWFudChsYXlvdXQub3JkZXIsICdwYXJlbnQgb3JkZXIgbXVzdCBub3QgYmUgZW1wdHkgdG8gYWx0ZXIgb3JkZXInKVxuICBjb25zdCBvcmRlciA9IFtdLmNvbmNhdChsYXlvdXQub3JkZXIpXG4gIGNvbnN0IGluZGV4ID0gb3JkZXIuaW5kZXhPZihsYXlvdXRJdGVtSWQpXG4gIGlmIChpbmRleCA8PSAwKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgb3JkZXIuc3BsaWNlKGluZGV4LCAxKVxuICBvcmRlci5zcGxpY2UoMCwgMCwgbGF5b3V0SW5mby5sYXlvdXRJdGVtSWQpXG5cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXRJZCwgJ29yZGVyJywgb3JkZXIpLmV4ZWMoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlTG9ja0xheW91dCAobGF5b3V0SW5mbzogTGF5b3V0SW5mbykge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBjb25zdCBhcHBDb25maWcgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pXG5cbiAgY29uc3Qgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyB8fCBJbW11dGFibGUoe30pXG5cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgbGF5b3V0SW5mbyxcbiAgICAnc2V0dGluZy5sb2NrTGF5b3V0JyxcbiAgICAhc2V0dGluZy5sb2NrTGF5b3V0XG4gICkuZXhlYygpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGlnblRvIChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCBwcm9wOiAndG9wJyB8ICdib3R0b20nIHwgJ2xlZnQnIHwgJ3JpZ2h0Jykge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBjb25zdCBhcHBDb25maWcgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pXG5cbiAgY29uc3QgYmJveCA9IGxheW91dEl0ZW0uYmJveFxuICBsZXQgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyB8fCBJbW11dGFibGUoe30pXG4gIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoYmJveFtwcm9wXSwgMTApXG4gIGlmICh2YWx1ZSAhPT0gMCkge1xuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KFxuICAgICAgbGF5b3V0SW5mbyxcbiAgICAgICdiYm94JyxcbiAgICAgIGJib3guc2V0KHByb3AsIHV0aWxzLmlzUGVyY2VudGFnZShiYm94W3Byb3BdKSA/ICcwJScgOiAnMHB4JylcbiAgICApXG4gIH1cbiAgc2V0dGluZyA9IHNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCBwcm9wXSwgZmFsc2UpXG4gIGxldCBhdXRvUHJvcFxuICBzd2l0Y2ggKHByb3ApIHtcbiAgICBjYXNlICd0b3AnOlxuICAgICAgYXV0b1Byb3AgPSAnYm90dG9tJ1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdib3R0b20nOlxuICAgICAgYXV0b1Byb3AgPSAndG9wJ1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdsZWZ0JzpcbiAgICAgIGF1dG9Qcm9wID0gJ3JpZ2h0J1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdyaWdodCc6XG4gICAgICBhdXRvUHJvcCA9ICdsZWZ0J1xuICAgICAgYnJlYWtcbiAgfVxuICBzZXR0aW5nID0gc2V0dGluZy5zZXRJbihbJ2F1dG9Qcm9wcycsIGF1dG9Qcm9wXSwgdHJ1ZSlcblxuICBpZiAocHJvcCA9PT0gJ2xlZnQnIHx8IHByb3AgPT09ICdyaWdodCcpIHtcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ2hDZW50ZXInLCBmYWxzZSlcbiAgfSBlbHNlIGlmIChwcm9wID09PSAndG9wJyB8fCBwcm9wID09PSAnYm90dG9tJykge1xuICAgIHNldHRpbmcgPSBzZXR0aW5nLnNldCgndkNlbnRlcicsIGZhbHNlKVxuICB9XG4gIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdzZXR0aW5nJywgc2V0dGluZylcbiAgaWYgKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcudXNlQXV0b1NvcnRJbkZpeGVkTGF5b3V0KSB7XG4gICAgY29uc3Qgc29ydGVkTGF5b3V0ID0gc29ydExheW91dEl0ZW1zKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJbmZvLmxheW91dElkXSlcbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dFByb3BlcnR5KGxheW91dEluZm8ubGF5b3V0SWQsICdvcmRlcicsIHNvcnRlZExheW91dC5vcmRlciBhcyBhbnkpXG4gIH1cbiAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxpZ25GdWxsV2lkdGggKGxheW91dEluZm86IExheW91dEluZm8pIHtcbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgY29uc3QgYXBwQ29uZmlnID0gYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZ1xuICBjb25zdCBsYXlvdXRJdGVtID0gc2VhcmNoVXRpbHMuZmluZExheW91dEl0ZW0oYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuXG4gIGNvbnN0IGJib3ggPSBsYXlvdXRJdGVtLmJib3hcbiAgbGV0IHNldHRpbmcgPSBsYXlvdXRJdGVtLnNldHRpbmcgfHwgSW1tdXRhYmxlKHt9KVxuXG4gIHNldHRpbmcgPSBzZXR0aW5nXG4gICAgLnNldCgnaENlbnRlcicsIGZhbHNlKVxuICAgIC5zZXRJbihbJ2F1dG9Qcm9wcycsICdsZWZ0J10sIGZhbHNlKVxuICAgIC5zZXRJbihbJ2F1dG9Qcm9wcycsICdyaWdodCddLCBmYWxzZSlcbiAgICAuc2V0SW4oWydhdXRvUHJvcHMnLCAnd2lkdGgnXSwgTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKVxuXG4gIGFwcENvbmZpZ0FjdGlvblxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KFxuICAgICAgbGF5b3V0SW5mbyxcbiAgICAgICdiYm94JyxcbiAgICAgIGJib3guc2V0KCdsZWZ0JywgdXRpbHMuaXNQZXJjZW50YWdlKGJib3gubGVmdCkgPyAnMCUnIDogJzBweCcpXG4gICAgICAgIC5zZXQoJ3JpZ2h0JywgdXRpbHMuaXNQZXJjZW50YWdlKGJib3gucmlnaHQpID8gJzAlJyA6ICcwcHgnKVxuICAgICAgICAuc2V0KCd3aWR0aCcsICcxMDAlJylcbiAgICApXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobGF5b3V0SW5mbywgJ3NldHRpbmcnLCBzZXR0aW5nKVxuICBpZiAoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZy51c2VBdXRvU29ydEluRml4ZWRMYXlvdXQpIHtcbiAgICBjb25zdCBzb3J0ZWRMYXlvdXQgPSBzb3J0TGF5b3V0SXRlbXMoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdKVxuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0UHJvcGVydHkobGF5b3V0SW5mby5sYXlvdXRJZCwgJ29yZGVyJywgc29ydGVkTGF5b3V0Lm9yZGVyIGFzIGFueSlcbiAgfVxuICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG59XG5cbmZ1bmN0aW9uIGFsaWduQ2VudGVyIChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCBkaXJlY3Rpb246ICdoJyB8ICd2Jykge1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBjb25zdCBhcHBDb25maWcgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pXG4gIGxldCBzZXR0aW5nOiBJbW11dGFibGVPYmplY3Q8Rml4ZWRMYXlvdXRJdGVtU2V0dGluZz4gPSBsYXlvdXRJdGVtLnNldHRpbmcgfHwgSW1tdXRhYmxlKHt9KVxuICBsZXQgYmJveCA9IGxheW91dEl0ZW0uYmJveFxuXG4gIGlmIChkaXJlY3Rpb24gPT09ICdoJykge1xuICAgIGlmIChzZXR0aW5nLmF1dG9Qcm9wcz8ud2lkdGggPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShiYm94LmxlZnQpID09PSB1dGlscy5pc1BlcmNlbnRhZ2UoYmJveC5yaWdodCkpIHtcbiAgICAgICAgY29uc3QgdW5pdCA9IHV0aWxzLmlzUGVyY2VudGFnZShiYm94LmxlZnQpID8gJyUnIDogJ3B4J1xuICAgICAgICBjb25zdCBzcGFjaW5nID0gcGFyc2VGbG9hdChiYm94LmxlZnQpICsgcGFyc2VGbG9hdChiYm94LnJpZ2h0KVxuICAgICAgICBiYm94ID0gYmJveC5zZXQoJ2xlZnQnLCBgJHtzcGFjaW5nIC8gMn0ke3VuaXR9YCkuc2V0KCdyaWdodCcsIGAke3NwYWNpbmcgLyAyfSR7dW5pdH1gKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGJib3ggPSBiYm94LnNldCgnbGVmdCcsICc1MCUnKVxuICAgICAgc2V0dGluZyA9IHNldHRpbmcuc2V0KCdoQ2VudGVyJywgdHJ1ZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAnbGVmdCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAncmlnaHQnXSwgdHJ1ZSlcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShiYm94LnRvcCkgPT09IHV0aWxzLmlzUGVyY2VudGFnZShiYm94LmJvdHRvbSkpIHtcbiAgICAgICAgY29uc3QgdW5pdCA9IHV0aWxzLmlzUGVyY2VudGFnZShiYm94LnRvcCkgPyAnJScgOiAncHgnXG4gICAgICAgIGNvbnN0IHNwYWNpbmcgPSBwYXJzZUZsb2F0KGJib3gudG9wKSArIHBhcnNlRmxvYXQoYmJveC5ib3R0b20pXG4gICAgICAgIGJib3ggPSBiYm94LnNldCgndG9wJywgYCR7c3BhY2luZyAvIDJ9JHt1bml0fWApLnNldCgnYm90dG9tJywgYCR7c3BhY2luZyAvIDJ9JHt1bml0fWApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYmJveCA9IGJib3guc2V0KCd0b3AnLCAnNTAlJylcbiAgICAgIHNldHRpbmcgPSBzZXR0aW5nLnNldCgndkNlbnRlcicsIHRydWUpLnNldEluKFsnYXV0b1Byb3BzJywgJ3RvcCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAnYm90dG9tJ10sIHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXBwQ29uZmlnQWN0aW9uXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobGF5b3V0SW5mbywgJ2Jib3gnLCBiYm94KVxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdzZXR0aW5nJywgc2V0dGluZylcbiAgaWYgKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcudXNlQXV0b1NvcnRJbkZpeGVkTGF5b3V0KSB7XG4gICAgY29uc3Qgc29ydGVkTGF5b3V0ID0gc29ydExheW91dEl0ZW1zKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJbmZvLmxheW91dElkXSlcbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dFByb3BlcnR5KGxheW91dEluZm8ubGF5b3V0SWQsICdvcmRlcicsIHNvcnRlZExheW91dC5vcmRlciBhcyBhbnkpXG4gIH1cbiAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxpZ25WZXJ0aWNhbENlbnRlciAobGF5b3V0SW5mbzogTGF5b3V0SW5mbykge1xuICBhbGlnbkNlbnRlcihsYXlvdXRJbmZvLCAndicpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGlnbkhvcml6b250YWxDZW50ZXIgKGxheW91dEluZm86IExheW91dEluZm8pIHtcbiAgYWxpZ25DZW50ZXIobGF5b3V0SW5mbywgJ2gnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxpZ25GdWxsSGVpZ2h0IChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKSB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IGFwcENvbmZpZyA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcbiAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZywgbGF5b3V0SW5mbylcblxuICBjb25zdCBiYm94ID0gbGF5b3V0SXRlbS5iYm94XG4gIGxldCBzZXR0aW5nID0gbGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcblxuICBzZXR0aW5nID0gc2V0dGluZ1xuICAgIC5zZXQoJ3ZDZW50ZXInLCBmYWxzZSlcbiAgICAuc2V0SW4oWydhdXRvUHJvcHMnLCAndG9wJ10sIGZhbHNlKVxuICAgIC5zZXRJbihbJ2F1dG9Qcm9wcycsICdib3R0b20nXSwgZmFsc2UpXG4gICAgLnNldEluKFsnYXV0b1Byb3BzJywgJ2hlaWdodCddLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpXG5cbiAgYXBwQ29uZmlnQWN0aW9uXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICBsYXlvdXRJbmZvLFxuICAgICAgJ2Jib3gnLFxuICAgICAgYmJveC5zZXQoJ3RvcCcsIHV0aWxzLmlzUGVyY2VudGFnZShiYm94LnRvcCkgPyAnMCUnIDogJzBweCcpXG4gICAgICAgIC5zZXQoJ2JvdHRvbScsIHV0aWxzLmlzUGVyY2VudGFnZShiYm94LmJvdHRvbSkgPyAnMCUnIDogJzBweCcpXG4gICAgICAgIC5zZXQoJ2hlaWdodCcsICcxMDAlJylcbiAgICApXG4gICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobGF5b3V0SW5mbywgJ3NldHRpbmcnLCBzZXR0aW5nKVxuICBpZiAoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZy51c2VBdXRvU29ydEluRml4ZWRMYXlvdXQpIHtcbiAgICBjb25zdCBzb3J0ZWRMYXlvdXQgPSBzb3J0TGF5b3V0SXRlbXMoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdKVxuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0UHJvcGVydHkobGF5b3V0SW5mby5sYXlvdXRJZCwgJ29yZGVyJywgc29ydGVkTGF5b3V0Lm9yZGVyIGFzIGFueSlcbiAgfVxuICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGlnbkZ1bGxTaXplIChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKSB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IGFwcENvbmZpZyA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcbiAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZywgbGF5b3V0SW5mbylcblxuICBjb25zdCBiYm94ID0gbGF5b3V0SXRlbS5iYm94XG4gIGxldCBzZXR0aW5nID0gbGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcblxuICBzZXR0aW5nID0gc2V0dGluZ1xuICAgIC5zZXQoJ3ZDZW50ZXInLCBmYWxzZSlcbiAgICAuc2V0KCdoQ2VudGVyJywgZmFsc2UpXG4gICAgLnNldEluKFsnYXV0b1Byb3BzJywgJ3RvcCddLCBmYWxzZSlcbiAgICAuc2V0SW4oWydhdXRvUHJvcHMnLCAnYm90dG9tJ10sIGZhbHNlKVxuICAgIC5zZXRJbihbJ2F1dG9Qcm9wcycsICdsZWZ0J10sIGZhbHNlKVxuICAgIC5zZXRJbihbJ2F1dG9Qcm9wcycsICdyaWdodCddLCBmYWxzZSlcbiAgICAuc2V0SW4oWydhdXRvUHJvcHMnLCAnaGVpZ2h0J10sIExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaClcbiAgICAuc2V0SW4oWydhdXRvUHJvcHMnLCAnd2lkdGgnXSwgTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKVxuXG4gIGFwcENvbmZpZ0FjdGlvblxuICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KFxuICAgICAgbGF5b3V0SW5mbyxcbiAgICAgICdiYm94JyxcbiAgICAgIGJib3guc2V0KCd0b3AnLCB1dGlscy5pc1BlcmNlbnRhZ2UoYmJveC50b3ApID8gJzAlJyA6ICcwcHgnKVxuICAgICAgICAuc2V0KCdib3R0b20nLCB1dGlscy5pc1BlcmNlbnRhZ2UoYmJveC5ib3R0b20pID8gJzAlJyA6ICcwcHgnKVxuICAgICAgICAuc2V0KCdsZWZ0JywgdXRpbHMuaXNQZXJjZW50YWdlKGJib3gubGVmdCkgPyAnMCUnIDogJzBweCcpXG4gICAgICAgIC5zZXQoJ3JpZ2h0JywgdXRpbHMuaXNQZXJjZW50YWdlKGJib3gucmlnaHQpID8gJzAlJyA6ICcwcHgnKVxuICAgICAgICAuc2V0KCd3aWR0aCcsICcxMDAlJylcbiAgICAgICAgLnNldCgnaGVpZ2h0JywgJzEwMCUnKVxuICAgIClcbiAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvLCAnc2V0dGluZycsIHNldHRpbmcpXG4gIGlmIChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLnVzZUF1dG9Tb3J0SW5GaXhlZExheW91dCkge1xuICAgIGNvbnN0IHNvcnRlZExheW91dCA9IHNvcnRMYXlvdXRJdGVtcyhhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF0pXG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXRJbmZvLmxheW91dElkLCAnb3JkZXInLCBzb3J0ZWRMYXlvdXQub3JkZXIgYXMgYW55KVxuICB9XG4gIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIHR5cGUgTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgbG9kYXNoLFxuICB0eXBlIElNQm91bmRpbmdCb3gsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgS2V5Ym9hcmQsXG4gIGpzeCxcbiAgdHlwZSBTZXJpYWxpemVkU3R5bGVzLFxuICBBcHBNb2RlLFxuICBjcmVhdGVTZWxlY3RvclxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB1dGlscywgdHlwZSBMYXlvdXRJdGVtUHJvcHMsIHR5cGUgRml4ZWRMYXlvdXRJdGVtU2V0dGluZywgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IERFRkFVTFRfRklYX0xBWU9VVF9JVEVNX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQgTGF5b3V0SXRlbSBmcm9tICcuLi8uLi9idWlsZGVyL2xheW91dC1pdGVtJ1xuaW1wb3J0IHsgZml4ZWRJdGVtTWVudSB9IGZyb20gJy4vZml4ZWQtaXRlbS1tZW51J1xuaW1wb3J0IHtcbiAgZ2VuZXJhdGVSZXNpemluZ0JCb3hTdHlsZSxcbiAgZ2VuZXJhdGVCQm94U3R5bGUsXG4gIGFwcGx5UG9zaXRpb25TZXR0aW5nXG59IGZyb20gJy4uL2ZpeGVkLWxheW91dC11dGlsJ1xuaW1wb3J0ICogYXMgY29tbW9uVXRpbHMgZnJvbSAnLi4vY29tbW9uL3V0aWwnXG5cbmludGVyZmFjZSBPd25Qcm9wcyB7XG4gIGxheW91dEl0ZW06IExheW91dEl0ZW1Kc29uIHwgSU1MYXlvdXRJdGVtSnNvblxuICBvZmZzZXRYPzogbnVtYmVyXG4gIG9mZnNldFk/OiBudW1iZXJcbiAgZHc/OiBudW1iZXJcbiAgZGg/OiBudW1iZXJcbiAgaW5kZXg6IG51bWJlclxuICBpbml0UmVjdD86IERPTVJlY3RcbiAgY29udGFpbmVyUmVjdD86IERPTVJlY3RcbiAgaXNMYXlvdXRMb2NrQ2hpbGRyZW4/OiBib29sZWFuXG4gIC8vIGV2ZW50IGhhbmRsZXJzXG4gIG9uUmVzaXplU3RhcnQ6IChpZDogc3RyaW5nKSA9PiB2b2lkXG4gIG9uUmVzaXppbmc6IChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk6IGJvb2xlYW4sIHNwZWVkOiBudW1iZXIpID0+IHZvaWRcbiAgb25SZXNpemVFbmQ6IChcbiAgICBpZDogc3RyaW5nLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgZHc6IG51bWJlcixcbiAgICBkaDogbnVtYmVyLFxuICAgIHNoaWZ0S2V5OiBib29sZWFuLFxuICAgIGxheW91dEl0ZW06IExheW91dEl0ZW1Kc29uIHwgSU1MYXlvdXRJdGVtSnNvbixcbiAgICBpdGVtU2V0dGluZzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZ1xuICApID0+IHZvaWRcbiAgb25Nb3ZlQnlLZXk6IChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzIHtcbiAgc2VsZWN0ZWQ6IGJvb2xlYW5cbiAgaXNEZXNpZ25Nb2RlOiBib29sZWFuXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGR4PzogbnVtYmVyXG4gIGR5PzogbnVtYmVyXG59XG5cbmNsYXNzIEZpeGVkSXRlbSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVByb3BzICYgT3duUHJvcHMgJiBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzLCBTdGF0ZT4ge1xuICBzdGF0ZTogU3RhdGUgPSB7fVxuICBpdGVtU2V0dGluZzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZ1xuXG4gIGhhbmRsZVJlc2l6ZUVuZCA9IChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyLCBzaGlmdEtleTogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMucHJvcHMub25SZXNpemVFbmQoaWQsIGR4LCBkeSwgZHcsIGRoLCBzaGlmdEtleSwgbGF5b3V0SXRlbSwgdGhpcy5pdGVtU2V0dGluZylcbiAgfVxuXG4gIGhhbmRsZVJlc2l6aW5nID0gKGlkOiBzdHJpbmcsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIsIHNoaWZ0S2V5OiBib29sZWFuLCBzcGVlZDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgdGhpcy5wcm9wcy5vblJlc2l6aW5nKGlkLCBkeCwgZHksIGR3LCBkaCwgc2hpZnRLZXksIHNwZWVkKVxuICB9XG5cbiAgbW92ZVVwID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMucHJvcHMub25Nb3ZlQnlLZXkodGhpcy5wcm9wcy5sYXlvdXRJdGVtSWQsIDAsIC0xKVxuICB9XG5cbiAgbW92ZURvd24gPSAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbk1vdmVCeUtleSh0aGlzLnByb3BzLmxheW91dEl0ZW1JZCwgMCwgMSlcbiAgfVxuXG4gIG1vdmVMZWZ0ID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMucHJvcHMub25Nb3ZlQnlLZXkodGhpcy5wcm9wcy5sYXlvdXRJdGVtSWQsIC0xLCAwKVxuICB9XG5cbiAgbW92ZVJpZ2h0ID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMucHJvcHMub25Nb3ZlQnlLZXkodGhpcy5wcm9wcy5sYXlvdXRJdGVtSWQsIDEsIDApXG4gIH1cblxuICBnZXRLZXlib2FyZENvbXBvbmVudCAoKTogSlNYLkVsZW1lbnQge1xuICAgIGlmICghdGhpcy5wcm9wcy5pc0Rlc2lnbk1vZGUpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8S2V5Ym9hcmRcbiAgICAgICAgYmluZGluZ3M9e3tcbiAgICAgICAgICB1cDogdGhpcy5tb3ZlVXAsXG4gICAgICAgICAgZG93bjogdGhpcy5tb3ZlRG93bixcbiAgICAgICAgICBsZWZ0OiB0aGlzLm1vdmVMZWZ0LFxuICAgICAgICAgIHJpZ2h0OiB0aGlzLm1vdmVSaWdodFxuICAgICAgICB9fVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBnZXRQb3NpdGlvblN0eWxlICgpOiBbU2VyaWFsaXplZFN0eWxlcywgc3RyaW5nXSB7XG4gICAgY29uc3QgeyBsYXlvdXRJdGVtLCBvZmZzZXRYLCBvZmZzZXRZLCBkdywgZGgsIGluaXRSZWN0LCBjb250YWluZXJSZWN0IH0gPSB0aGlzLnByb3BzXG4gICAgbGV0IHBvcyA9IGdlbmVyYXRlQkJveFN0eWxlKGxheW91dEl0ZW0uYmJveCBhcyBJTUJvdW5kaW5nQm94LCB0aGlzLml0ZW1TZXR0aW5nKVxuICAgIGNvbnN0IHNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmcgPSBsYXlvdXRJdGVtLnNldHRpbmdcbiAgICBpZiAoaW5pdFJlY3QgIT0gbnVsbCkge1xuICAgICAgcG9zID0gZ2VuZXJhdGVSZXNpemluZ0JCb3hTdHlsZShpbml0UmVjdCwgY29udGFpbmVyUmVjdCwge1xuICAgICAgICBkdyxcbiAgICAgICAgZGg6IHRoaXMuaXRlbVNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJyA/IGR3IC8gdXRpbHMucGFyc2VBc3BlY3RSYXRpbyh0aGlzLml0ZW1TZXR0aW5nLmFzcGVjdFJhdGlvKSA6IGRoLFxuICAgICAgICBkeDogb2Zmc2V0WCxcbiAgICAgICAgZHk6IG9mZnNldFlcbiAgICAgIH0sIHRydWUpIGFzIGFueSAvLyBUaGUgZW1vdGlvbiBjc3Mgd2lsbCBwcm9jZXNzIFJUTFxuICAgICAgaWYgKHNldHRpbmc/LmhDZW50ZXIgJiYgbGF5b3V0SXRlbS5iYm94Py5sZWZ0ID09PSAnNTAlJykge1xuICAgICAgICBwb3MubGVmdCA9ICc1MCUnXG4gICAgICB9XG4gICAgICBpZiAoc2V0dGluZz8udkNlbnRlciAmJiBsYXlvdXRJdGVtLmJib3g/LnRvcCA9PT0gJzUwJScpIHtcbiAgICAgICAgcG9zLnRvcCA9ICc1MCUnXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZFN0eWxlOiBhbnkgPSB7XG4gICAgICAuLi5wb3MsXG4gICAgICAuLi5hcHBseVBvc2l0aW9uU2V0dGluZyhsYXlvdXRJdGVtLmJib3ggYXMgSU1Cb3VuZGluZ0JveCwgdGhpcy5pdGVtU2V0dGluZywgQm9vbGVhbihpbml0UmVjdCkpXG4gICAgfVxuICAgIGlmIChkdyAhPT0gMCB8fCBkaCAhPT0gMCkge1xuICAgICAgLy8gaXMgcmVzaXppbmcuIFRoZSByaWdodCBzdHlsZSB3aWxsIHRha2UgZWZmZWN0IGluIFJUTC5cbiAgICAgIG1lcmdlZFN0eWxlLnJpZ2h0ID0gJ2F1dG8nXG4gICAgfVxuICAgIHJldHVybiBjb21tb25VdGlscy5nZXRQb3NpdGlvblN0eWxlKG1lcmdlZFN0eWxlKVxuICB9XG5cbiAgcmVuZGVyICgpOiBKU1guRWxlbWVudCB7XG4gICAgY29uc3Qge1xuICAgICAgbGF5b3V0SWQsXG4gICAgICBsYXlvdXRJdGVtLFxuICAgICAgaXNMYXlvdXRMb2NrQ2hpbGRyZW4sXG4gICAgICBkcmFnZ2FibGUgPSB0cnVlLFxuICAgICAgcmVzaXphYmxlID0gdHJ1ZSxcbiAgICAgIHNob3dEZWZhdWx0VG9vbHMgPSB0cnVlXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAobGF5b3V0SXRlbSA9PSBudWxsIHx8IGxheW91dEl0ZW0uaXNQZW5kaW5nKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHRoaXMuaXRlbVNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCBERUZBVUxUX0ZJWF9MQVlPVVRfSVRFTV9TRVRUSU5HLCBsYXlvdXRJdGVtLnNldHRpbmcpXG4gICAgY29uc3QgbG9ja0xheW91dCA9IHRoaXMuaXRlbVNldHRpbmcubG9ja0xheW91dFxuICAgIGNvbnN0IHJhdGlvID0gdXRpbHMucGFyc2VBc3BlY3RSYXRpbyh0aGlzLml0ZW1TZXR0aW5nLmFzcGVjdFJhdGlvKVxuICAgIGNvbnN0IHVzZUFzcGVjdFJhdGlvID0gdXRpbHMuc2hvdWxkVXNlQXNwZWN0UmF0aW8odGhpcy5pdGVtU2V0dGluZylcbiAgICBjb25zdCB3aWR0aE1vZGUgPSB1dGlscy5nZXRMYXlvdXRJdGVtU2l6ZU1vZGUoXG4gICAgICAnd2lkdGgnLFxuICAgICAgbGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3gsXG4gICAgICB0aGlzLml0ZW1TZXR0aW5nLmF1dG9Qcm9wc1xuICAgIClcbiAgICBjb25zdCBoZWlnaHRNb2RlID0gdXRpbHMuZ2V0TGF5b3V0SXRlbVNpemVNb2RlKFxuICAgICAgJ2hlaWdodCcsXG4gICAgICBsYXlvdXRJdGVtLmJib3ggYXMgSU1Cb3VuZGluZ0JveCxcbiAgICAgIHRoaXMuaXRlbVNldHRpbmcuYXV0b1Byb3BzXG4gICAgKVxuICAgIGNvbnN0IG9uZUJ5T25lQW5pbWF0aW9uUHJvcHMgPSB1dGlscy5oYW5kbGVPbmVieU9uZUFuaW1hdGlvbih0aGlzLnByb3BzKVxuICAgIGNvbnN0IFtjc3NTdHlsZSwgdHJhbnNmb3JtXSA9IHRoaXMuZ2V0UG9zaXRpb25TdHlsZSgpXG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXRJdGVtXG4gICAgICAgIGNsYXNzTmFtZT0nZC1mbGV4J1xuICAgICAgICBjc3M9e2Nzc1N0eWxlfVxuICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm0gfX1cbiAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgIHJlc3RyaWN0PXt0aGlzLml0ZW1TZXR0aW5nLmxvY2tQYXJlbnQgfHwgaXNMYXlvdXRMb2NrQ2hpbGRyZW59XG4gICAgICAgIGRyYWdnYWJsZT17ZHJhZ2dhYmxlICYmICFsb2NrTGF5b3V0fSAvLyBkcmFnZ2FibGUgIT09IGZhbHNlXG4gICAgICAgIHJlc2l6YWJsZT17cmVzaXphYmxlICYmICFsb2NrTGF5b3V0fSAvLyByZXNpemFibGUgIT09IGZhbHNlXG4gICAgICAgIHNob3dEZWZhdWx0VG9vbHM9e3Nob3dEZWZhdWx0VG9vbHN9XG4gICAgICAgIHRvb2xJdGVtcz17c2hvd0RlZmF1bHRUb29scyA/IGZpeGVkSXRlbU1lbnUgOiBbXX1cbiAgICAgICAgb25SZXNpemVTdGFydD17dGhpcy5wcm9wcy5vblJlc2l6ZVN0YXJ0fVxuICAgICAgICBvblJlc2l6aW5nPXt0aGlzLmhhbmRsZVJlc2l6aW5nfVxuICAgICAgICBvblJlc2l6ZUVuZD17dGhpcy5oYW5kbGVSZXNpemVFbmR9XG4gICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGlja31cbiAgICAgICAgdG9wPXtoZWlnaHRNb2RlICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG8gJiYgIXVzZUFzcGVjdFJhdGlvfVxuICAgICAgICBib3R0b209e2hlaWdodE1vZGUgIT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0byAmJiAhdXNlQXNwZWN0UmF0aW99XG4gICAgICAgIGxlZnQ9e3dpZHRoTW9kZSAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvfVxuICAgICAgICByaWdodD17d2lkdGhNb2RlICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG99XG4gICAgICAgIGZvcmNlQXNwZWN0UmF0aW89e3VzZUFzcGVjdFJhdGlvfVxuICAgICAgICBhc3BlY3RSYXRpbz17cmF0aW99XG4gICAgICAgIGlzSW5TZWN0aW9uPXt0aGlzLnByb3BzLmlzSW5TZWN0aW9ufVxuICAgICAgICBhdXRvV2lkdGg9e3dpZHRoTW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvfVxuICAgICAgICBhdXRvSGVpZ2h0PXtoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG99XG4gICAgICAgIHsuLi5vbmVCeU9uZUFuaW1hdGlvblByb3BzfVxuICAgICAgPlxuICAgICAgICB7dGhpcy5wcm9wcy5zZWxlY3RlZCAmJiB0aGlzLmdldEtleWJvYXJkQ29tcG9uZW50KCl9XG4gICAgICA8L0xheW91dEl0ZW0+XG4gICAgKVxuICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9MYXlvdXRJdGVtUHJvcHM6IChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IExheW91dEl0ZW1Qcm9wcykgPT4gU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyA9IGNyZWF0ZVNlbGVjdG9yKFtcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gc3RhdGUuYXBwUnVudGltZUluZm8/LnNlbGVjdGlvblxuICAgIGlmIChzZWxlY3Rpb24gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHNlbGVjdGlvbi5sYXlvdXRJZCA9PT0gb3duUHJvcHMubGF5b3V0SWQgJiYgc2VsZWN0aW9uLmxheW91dEl0ZW1JZCA9PT0gb3duUHJvcHMubGF5b3V0SXRlbUlkXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuXSwgKHNlbGVjdGVkLCBpc0Rlc2lnbk1vZGUpID0+ICh7IHNlbGVjdGVkLCBpc0Rlc2lnbk1vZGUgfSkpXG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxTdGF0ZVRvTGF5b3V0SXRlbVByb3BzLCB1bmtub3duLCBMYXlvdXRJdGVtUHJvcHM+KG1hcFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMpKEZpeGVkSXRlbSlcbiIsImltcG9ydCB7XG4gIHR5cGUgSU1BcHBDb25maWcsXG4gIHR5cGUgQnJvd3NlclNpemVNb2RlLFxuICB0eXBlIExheW91dEluZm8sXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIEltbXV0YWJsZSxcbiAgTGF5b3V0UGFyZW50VHlwZSxcbiAgdHlwZSBJTUJvdW5kaW5nQm94LFxuICBMYXlvdXRJdGVtVHlwZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCYXNlTGF5b3V0U2VydmljZSwgdHlwZSBUb2NOb2RlLCBnZXRBcHBDb25maWdBY3Rpb24sIENvbnRlbnRTZXJ2aWNlV3JhcHBlciwgdHlwZSBEdXBsaWNhdGVDb250ZXh0IH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IHV0aWxzLCBzZWFyY2hVdGlscywgTGF5b3V0SXRlbVNpemVNb2RlcywgdHlwZSBUb29sSXRlbUNvbmZpZyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGFwcGx5U25hcFJlc3VsdCwgZmxpcEJCb3ggfSBmcm9tICcuLi9maXhlZC1sYXlvdXQtdXRpbCdcbmltcG9ydCB7IHNvcnRMYXlvdXRJdGVtcyB9IGZyb20gJy4vdXRpbCdcbmltcG9ydCB7IGZpeGVkSXRlbU1lbnUgfSBmcm9tICcuL2ZpeGVkLWl0ZW0tbWVudSdcbmltcG9ydCB7IGRlbGV0ZU1lbnVJdGVtLCBwZW5kaW5nTWVudUl0ZW0sIGR1cGxpY2F0ZU1lbnVJdGVtLCBmbG9hdGluZ01lbnVJdGVtIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L2NvbW1vbi1tZW51J1xuaW1wb3J0IHsgc2VjdGlvbk1lbnVJdGVtcywgdmlld01lbnVJdGVtcyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9zZWN0aW9uLW1lbnUnXG5pbXBvcnQgeyBzY3JlZW5NZW51SXRlbXMgfSBmcm9tICcuLi8uLi9idWlsZGVyL21lbnUvc2NyZWVuLW1lbnUnXG5cbmNvbnN0IGNvbW1vbk1lbnUgPSBbZHVwbGljYXRlTWVudUl0ZW0sIGZsb2F0aW5nTWVudUl0ZW0sIHBlbmRpbmdNZW51SXRlbSwgZGVsZXRlTWVudUl0ZW1dXG5jb25zdCB3aWRnZXRNZW51ID0gW10uY29uY2F0KGZpeGVkSXRlbU1lbnUsIGNvbW1vbk1lbnUpXG5jb25zdCBzZWN0aW9uTWVudSA9IFtdLmNvbmNhdChmaXhlZEl0ZW1NZW51LCBzZWN0aW9uTWVudUl0ZW1zLCBjb21tb25NZW51KVxuZXhwb3J0IGNsYXNzIEZpeGVkTGF5b3V0U2VydmljZSBleHRlbmRzIEJhc2VMYXlvdXRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZW1vdmVJdGVtRnJvbU9yZGVyIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICAgIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICAvLyByZW1vdmUgaXQgZnJvbSBvcmRlciBsaXN0XG4gICAgbGV0IG9yZGVyID0gW10uY29uY2F0KGxheW91dEpzb24ub3JkZXIpXG4gICAgb3JkZXIgPSBvcmRlci5maWx0ZXIoKGl0ZW1JZCkgPT4gaXRlbUlkICE9PSBsYXlvdXRJdGVtSWQpXG4gICAgcmV0dXJuIGFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBsYXlvdXRJZCwgJ29yZGVyJ10sIG9yZGVyKVxuICB9XG5cbiAgYWZ0ZXJJdGVtTW92ZWQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8pOiBJTUFwcENvbmZpZyB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlSXRlbUZyb21PcmRlcihhcHBDb25maWcsIGxheW91dEluZm8pXG4gIH1cblxuICBhZnRlckl0ZW1SZW1vdmVkIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUl0ZW1Gcm9tT3JkZXIoYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVCQm94QWZ0ZXJBZGQgKFxuICAgIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLFxuICAgIGNvbnRhaW5lclJlY3Q6IERPTVJlY3RSZWFkT25seSxcbiAgICBpdGVtUmVjdDogRE9NUmVjdFJlYWRPbmx5LFxuICAgIHNuYXBSZXN1bHQ6IERPTVJlY3RSZWFkT25seSxcbiAgICBjdXJyZW50U2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuICApOiBbSU1Cb3VuZGluZ0JveCwgYW55XSB7XG4gICAgY29uc3QgZHJhZ2dpbmdMYXlvdXRJbmZvID0gZHJhZ2dpbmdJdGVtLmxheW91dEluZm9cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc2VhcmNoVXRpbHMuZmluZExheW91dEl0ZW0oYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICAgIGxldCBzZXR0aW5nID0gSW1tdXRhYmxlKGxheW91dEl0ZW0uc2V0dGluZyA/PyB7fSlcbiAgICBsZXQgYmJveFxuXG4gICAgaWYgKGRyYWdnaW5nSXRlbS5pZCA9PSBudWxsICYmIGRyYWdnaW5nTGF5b3V0SW5mbz8ubGF5b3V0SWQgPT09IGxheW91dEluZm8ubGF5b3V0SWQpIHtcbiAgICAgIC8vIGZyb20gdGhlIHNhbWUgb3JpZ2luLCBub3QgYSBwZW5kaW5nIGl0ZW1cbiAgICAgIC8vIGFkanVzdCBwb3NpdGlvbiBpbiB0aGUgc2FtZSBsYXlvdXRcbiAgICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvKVxuICAgICAgY29uc3Qgb3JpZ2luQkJveCA9IGxheW91dEl0ZW0/LmJib3hcbiAgICAgIGlmIChvcmlnaW5CQm94KSB7XG4gICAgICAgIGNvbnN0IG5ld0JCb3ggPSB1dGlscy5yZXBsYWNlQm91bmRpbmdCb3gob3JpZ2luQkJveCwgc25hcFJlc3VsdCwgY29udGFpbmVyUmVjdClcbiAgICAgICAgLy8ga2VlcCB0aGUgb3JpZ2luYWwgc2l6ZSBpZiBtb3ZlIGl0ZW0gaW4gdGhlIHNhbWUgbGF5b3V0XG4gICAgICAgIGJib3ggPSBuZXdCQm94LnNldCgnd2lkdGgnLCBvcmlnaW5CQm94LndpZHRoKS5zZXQoJ2hlaWdodCcsIG9yaWdpbkJCb3guaGVpZ2h0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmJveCA9IHV0aWxzLnJlcGxhY2VCb3VuZGluZ0JveChudWxsLCBzbmFwUmVzdWx0LCBjb250YWluZXJSZWN0KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBiYm94ID0gdXRpbHMucmVwbGFjZUJvdW5kaW5nQm94KG51bGwsIHNuYXBSZXN1bHQsIGNvbnRhaW5lclJlY3QpXG5cbiAgICAgIC8vIGFwcGx5IGF1dG8gZm9yIG5ldyB3aWRnZXRcbiAgICAgIGlmIChkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbyA9PSBudWxsICYmIGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmIGxheW91dEl0ZW0ud2lkZ2V0SWQpIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZy53aWRnZXRzW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG5cbiAgICAgICAgaWYgKCghc25hcFJlc3VsdC53aWR0aCB8fCAhc25hcFJlc3VsdC5oZWlnaHQpICYmIHdpZGdldEpzb24ubWFuaWZlc3Q/LmRlZmF1bHRTaXplKSB7XG4gICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB3aWRnZXRKc29uLm1hbmlmZXN0LmRlZmF1bHRTaXplXG4gICAgICAgICAgc25hcFJlc3VsdCA9IHsgLi4uaXRlbVJlY3QsIHdpZHRoLCBoZWlnaHQgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpZGdldEpzb24ubWFuaWZlc3Q/LmRlZmF1bHRTaXplPy5hdXRvV2lkdGgpIHtcbiAgICAgICAgICBzZXR0aW5nID0gc2V0dGluZy5zZXRJbihbJ2F1dG9Qcm9wcycsICd3aWR0aCddLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG8pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpZGdldEpzb24ubWFuaWZlc3Q/LmRlZmF1bHRTaXplPy5hdXRvSGVpZ2h0KSB7XG4gICAgICAgICAgc2V0dGluZyA9IHNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAnaGVpZ2h0J10sIExheW91dEl0ZW1TaXplTW9kZXMuQXV0bylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFwcGx5UmVzdWx0ID0gYXBwbHlTbmFwUmVzdWx0KGJib3gsIHNldHRpbmcsIGNvbnRhaW5lclJlY3QsIGl0ZW1SZWN0KVxuICAgIGJib3ggPSBhcHBseVJlc3VsdC5iYm94XG4gICAgc2V0dGluZyA9IGFwcGx5UmVzdWx0LnNldHRpbmdcbiAgICBjb25zdCBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF1cbiAgICBjb25zdCBpc0hlYWRlciA9IGxheW91dEpzb24ucGFyZW50LnR5cGUgPT09IExheW91dFBhcmVudFR5cGUuSGVhZGVyXG4gICAgY29uc3QgaXNGb290ZXIgPSBsYXlvdXRKc29uLnBhcmVudC50eXBlID09PSBMYXlvdXRQYXJlbnRUeXBlLkZvb3RlclxuICAgIGlmIChkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbyA9PSBudWxsICYmIChpc0hlYWRlciB8fCBpc0Zvb3RlcikpIHtcbiAgICAgIC8vIGhlYWRlciBhbmQgZm9vdGVyIHNob3VsZCB1c2UgaXRzIGhlaWdodCBpbiBjb25maWcgd2hlbiBhZGQgd2lkZ2V0IGZyb20gd2lkZ2V0IGxpc3RcbiAgICAgIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9IGlzSGVhZGVyXG4gICAgICAgID8gcGFyc2VJbnQoYCR7YXBwQ29uZmlnLmhlYWRlci5oZWlnaHRbY3VycmVudFNpemVNb2RlXX1gKVxuICAgICAgICA6IHBhcnNlSW50KGAke2FwcENvbmZpZy5mb290ZXIuaGVpZ2h0W2N1cnJlbnRTaXplTW9kZV19YClcbiAgICAgIGJib3ggPSBiYm94LnNldCgnaGVpZ2h0JywgdXRpbHMudG9SYXRpbyhNYXRoLm1pbihpdGVtUmVjdC5oZWlnaHQsIGNvbnRhaW5lckhlaWdodCksIGNvbnRhaW5lckhlaWdodCkpXG4gICAgfVxuICAgIHJldHVybiBbYmJveCwgc2V0dGluZ11cbiAgfVxuXG4gIHByb2Nlc3NBZnRlckl0ZW1BZGRlZCAoXG4gICAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGxheW91dEluZm86IExheW91dEluZm8sXG4gICAgY3VycmVudFNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gICAgY29udGFpbmVyUmVjdDogRE9NUmVjdFJlYWRPbmx5LFxuICAgIGl0ZW1SZWN0OiBET01SZWN0UmVhZE9ubHksXG4gICAgaW5zZXJ0SW5kZXg6IG51bWJlcixcbiAgICBvcHRpb25zOiB7IHNuYXBSZXN1bHQ6IERPTVJlY3RSZWFkT25seSB9XG4gICk6IElNQXBwQ29uZmlnIHtcbiAgICBjb25zdCB1cGRhdGVkQXBwQ29uZmlnID0gYXBwQ29uZmlnXG4gICAgY29uc3QgeyBzbmFwUmVzdWx0IH0gPSBvcHRpb25zXG5cbiAgICAvLyB1cGRhdGUgYmJveCBhbmQgb3JkZXJcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24odXBkYXRlZEFwcENvbmZpZylcblxuICAgIGNvbnN0IFtiYm94LCBzZXR0aW5nXSA9IHRoaXMudXBkYXRlQkJveEFmdGVyQWRkKHVwZGF0ZWRBcHBDb25maWcsIGRyYWdnaW5nSXRlbSwgbGF5b3V0SW5mbywgY29udGFpbmVyUmVjdCwgaXRlbVJlY3QsIHNuYXBSZXN1bHQsIGN1cnJlbnRTaXplTW9kZSlcbiAgICBhcHBDb25maWdBY3Rpb25cbiAgICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdiYm94JywgdXRpbHMuaXNSVEwoKSA/IGZsaXBCQm94KGJib3gpIDogYmJveClcbiAgICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdzZXR0aW5nJywgc2V0dGluZylcblxuICAgIGlmIChkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbyAhPSBudWxsICYmIGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvLmxheW91dElkID09PSBsYXlvdXRJbmZvLmxheW91dElkKSB7XG4gICAgICBhcHBDb25maWdBY3Rpb25cbiAgICAgICAgLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkobGF5b3V0SW5mbywgJ3NldHRpbmcudkNlbnRlcicsIGZhbHNlKVxuICAgICAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvLCAnc2V0dGluZy5oQ2VudGVyJywgZmFsc2UpXG4gICAgfVxuXG4gICAgaWYgKGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvPy5sYXlvdXRJZCAhPT0gbGF5b3V0SW5mby5sYXlvdXRJZCkge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uLmFkanVzdE9yZGVyT2ZJdGVtKGxheW91dEluZm8sIG51bGwpXG4gICAgfVxuICAgIGlmICh1cGRhdGVkQXBwQ29uZmlnLnVzZUF1dG9Tb3J0SW5GaXhlZExheW91dCkge1xuICAgICAgY29uc3Qgc29ydGVkTGF5b3V0ID0gc29ydExheW91dEl0ZW1zKFxuICAgICAgICBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF0sXG4gICAgICAgIGNvbnRhaW5lclJlY3Qud2lkdGgsXG4gICAgICAgIGNvbnRhaW5lclJlY3QuaGVpZ2h0XG4gICAgICApXG4gICAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dFByb3BlcnR5KGxheW91dEluZm8ubGF5b3V0SWQsICdvcmRlcicsIHNvcnRlZExheW91dC5vcmRlciBhcyBhbnkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcbiAgfVxuXG4gIGR1cGxpY2F0ZUl0ZW1JblNhbWVMYXlvdXQgKFxuICAgIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gICAgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICAgIGNvbnRleHQ6IER1cGxpY2F0ZUNvbnRleHRcbiAgKTogW2FwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEl0ZW1JZDogc3RyaW5nXSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc3VwZXIuZHVwbGljYXRlSXRlbUluU2FtZUxheW91dChhcHBDb25maWcsIGxheW91dEluZm8sIHNpemVNb2RlLCBjb250ZXh0KVxuICAgIGxldCB1cGRhdGVkQXBwQ29uZmlnID0gcmVzdWx0WzBdXG4gICAgY29uc3QgbmV3SXRlbUlkID0gcmVzdWx0WzFdXG5cbiAgICAvLyBtYWludGFpbiBvcmRlclxuICAgIGNvbnN0IGxheW91dEpzb24gPSB1cGRhdGVkQXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF1cbiAgICBjb25zdCBvcmRlciA9IFtdLmNvbmNhdChsYXlvdXRKc29uLm9yZGVyKVxuICAgIG9yZGVyLnB1c2gobmV3SXRlbUlkKVxuICAgIHVwZGF0ZWRBcHBDb25maWcgPSB1cGRhdGVkQXBwQ29uZmlnLnNldEluKFsnbGF5b3V0cycsIGxheW91dEluZm8ubGF5b3V0SWQsICdvcmRlciddLCBvcmRlcilcblxuICAgIC8vIG9mZnNldFxuICAgIHVwZGF0ZWRBcHBDb25maWcgPSB0aGlzLm9mZnNldER1cGxpYXRlSXRlbSh1cGRhdGVkQXBwQ29uZmlnLCB7XG4gICAgICBsYXlvdXRJZDogbGF5b3V0SW5mby5sYXlvdXRJZCxcbiAgICAgIGxheW91dEl0ZW1JZDogbmV3SXRlbUlkXG4gICAgfSlcbiAgICByZXR1cm4gW3VwZGF0ZWRBcHBDb25maWcsIG5ld0l0ZW1JZF1cbiAgfVxuXG4gIGdldFRvY1N0cnVjdHVyZSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SWQ6IHN0cmluZyk6IFRvY05vZGVbXSB7XG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgIGNvbnN0IHNpemVNb2RlID0gdXRpbHMuZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgICBpZiAobGF5b3V0SnNvbj8ub3JkZXI/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG9yZGVyID0gW10uY29uY2F0KGxheW91dEpzb24ub3JkZXIpXG4gICAgICByZXR1cm4gb3JkZXJcbiAgICAgICAgLmZpbHRlcigoaXRlbUlkKSA9PiB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGxheW91dEpzb24uY29udGVudFtpdGVtSWRdXG4gICAgICAgICAgcmV0dXJuICFpdGVtLmlzUGVuZGluZ1xuICAgICAgICB9KVxuICAgICAgICAubWFwKChsYXlvdXRJdGVtSWQpID0+IHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gbGF5b3V0SnNvbi5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IENvbnRlbnRTZXJ2aWNlV3JhcHBlcihhcHBDb25maWcsIGl0ZW0pXG4gICAgICAgICAgcmV0dXJuIHNlcnZpY2UudG9Ub2NOb2RlKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9LCBzaXplTW9kZSlcbiAgICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICBnZXRUb29sSXRlbXMgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8sIHR5cGU6IHN0cmluZyk6IEFycmF5PFRvb2xJdGVtQ29uZmlnIHwgVG9vbEl0ZW1Db25maWdbXT4ge1xuICAgIGlmICh0eXBlPy50b0xvd2VyQ2FzZSgpID09PSAndmlldycpIHtcbiAgICAgIHJldHVybiB2aWV3TWVudUl0ZW1zXG4gICAgfVxuICAgIGlmICh0eXBlPy50b0xvd2VyQ2FzZSgpID09PSAnc2NyZWVuJykge1xuICAgICAgcmV0dXJuIHNjcmVlbk1lbnVJdGVtc1xuICAgIH1cblxuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pXG4gICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbikge1xuICAgICAgcmV0dXJuIHNlY3Rpb25NZW51XG4gICAgfVxuICAgIHJldHVybiB3aWRnZXRNZW51XG4gIH1cblxuICBwcml2YXRlIG9mZnNldER1cGxpYXRlSXRlbSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IElNQXBwQ29uZmlnIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIGxldCB7IGJib3gsIHNldHRpbmcgfSA9IGxheW91dEl0ZW1cblxuICAgIGNvbnN0IG9mZnNldCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGAke3BhcnNlRmxvYXQodmFsdWUpICsgNX0lYFxuICAgICAgfVxuICAgICAgY29uc3QgcHhWYWx1ZSA9IHBhcnNlSW50KHZhbHVlLCAxMClcbiAgICAgIGlmICghaXNOYU4ocHhWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHB4VmFsdWUgKyAyMFxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICAgIGlmIChzZXR0aW5nPy5hdXRvUHJvcHM/LmxlZnQpIHtcbiAgICAgIGJib3ggPSBiYm94LnNldCgncmlnaHQnLCBvZmZzZXQoYmJveC5yaWdodCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGJib3ggPSBiYm94LnNldCgnbGVmdCcsIG9mZnNldChiYm94LmxlZnQpKVxuICAgIH1cbiAgICBpZiAoc2V0dGluZz8uYXV0b1Byb3BzPy50b3ApIHtcbiAgICAgIGJib3ggPSBiYm94LnNldCgnYm90dG9tJywgb2Zmc2V0KGJib3guYm90dG9tKSlcbiAgICB9IGVsc2Uge1xuICAgICAgYmJveCA9IGJib3guc2V0KCd0b3AnLCBvZmZzZXQoYmJveC50b3ApKVxuICAgIH1cblxuICAgIGlmIChzZXR0aW5nPy5oQ2VudGVyICYmIHNldHRpbmc/LnZDZW50ZXIpIHtcbiAgICAgIHNldHRpbmcgPSBzZXR0aW5nLnNldCgndkNlbnRlcicsIGZhbHNlKVxuICAgIH1cbiAgICByZXR1cm4gYXBwQ29uZmlnXG4gICAgICAuc2V0SW4oWydsYXlvdXRzJywgbGF5b3V0SWQsICdjb250ZW50JywgbGF5b3V0SXRlbUlkLCAnYmJveCddLCBiYm94KVxuICAgICAgLnNldEluKFsnbGF5b3V0cycsIGxheW91dElkLCAnY29udGVudCcsIGxheW91dEl0ZW1JZCwgJ3NldHRpbmcnXSwgc2V0dGluZylcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAgbG9kYXNoLFxuICBjbGFzc05hbWVzLFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBMYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgcG9saXNoZWQsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBnZXRBcHBTdG9yZSxcbiAgYXBwQWN0aW9ucyxcbiAgRXh0ZW5zaW9uTWFuYWdlcixcbiAgZXh0ZW5zaW9uU3BlYyxcbiAgdHlwZSBMYXlvdXRUcmFuc2Zvcm1GdW5jLFxuICB0eXBlIElNQXBwQ29uZmlnLFxuICBPbmVCeU9uZUFuaW1hdGlvbixcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICBJbnRlcnNlY3Rpb25Db250ZXh0LFxuICBMYXlvdXRUeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dFNlcnZpY2VQcm92aWRlciwgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IHR5cGUgRHJvcEhhbmRsZXJzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCB7IHN0eWxlVXRpbHMsIExvYWRpbmcsIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IERFRkFVTFRfRklYX0xBWU9VVF9TRVRUSU5HIH0gZnJvbSAnLi4vZGVmYXVsdC1zZXR0aW5nJ1xuaW1wb3J0IHtcbiAgdXRpbHMsXG4gIFBhZ2VDb250ZXh0LFxuICB0eXBlIFBhZ2VDb250ZXh0UHJvcHMsXG4gIENMSUNLX1RPTFJFUkFOQ0UsXG4gIHR5cGUgRml4ZWRMYXlvdXRTZXR0aW5nLFxuICB0eXBlIEZpeGVkTGF5b3V0SXRlbVNldHRpbmcsXG4gIHR5cGUgTGF5b3V0UHJvcHMsXG4gIHR5cGUgU3RhdGVUb0xheW91dFByb3BzXG59IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCBGaXhlZExheW91dEl0ZW0gZnJvbSAnLi9sYXlvdXQtaXRlbSdcbmltcG9ydCB7IExJTUlURURfQk9VTkRBUllfQ0xBU1NfTkFNRSwgaXNEcmFnZ2luZyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJhZy1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgRHJvcEFyZWEgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL2Ryb3BhcmVhLWhvb2snXG5pbXBvcnQgeyBhZGRJdGVtVG9MYXlvdXQgfSBmcm9tICcuLi8uLi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtYWN0aW9ucydcbmltcG9ydCB7IGlzRGVzaWduTW9kZSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9jb21tb24tbWVudSdcbmltcG9ydCB7IGlzUmVzaXppbmcgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL3Jlc2l6ZS1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgc29ydExheW91dEl0ZW1zIH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0IHtcbiAgZ2VuZXJhdGVSZXNpemluZ0JCb3hTdHlsZSxcbiAgYXBwbHlTbmFwUmVzdWx0LFxuICBmbGlwQkJveFxufSBmcm9tICcuLi9maXhlZC1sYXlvdXQtdXRpbCdcbmltcG9ydCB7IHR5cGUgQkJveEdyaWRsaW5lLCB0eXBlIFJuZERlbHRhIH0gZnJvbSAnLi9tb3ZlLWd1aWRlLWNvbW1vbidcbmltcG9ydCB7XG4gIG1vdmVHdWlkZSxcbiAgZ2V0QkJveFVuaXRzLFxuICBkcmF3UG9zaXRpb24sXG4gIHR5cGUgSXRlbUNsaWVudFJlY3QsXG4gIGdldEdyaWRsaW5lc09mTGF5b3V0LFxuICB0eXBlIEJCb3hVbml0c1xufSBmcm9tICcuL21vdmUtZ3VpZGUnXG5pbXBvcnQgeyBBY3Rpb25CbG9jayB9IGZyb20gJy4vYWN0aW9uLWJsb2NrJ1xuaW1wb3J0IHsgQ2FudmFzUGFuZSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvY2FudmFzLXBhbmUnXG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIG9mZnNldFg6IG51bWJlclxuICBvZmZzZXRZOiBudW1iZXJcbiAgZHc6IG51bWJlclxuICBkaDogbnVtYmVyXG4gIGlzRHJhZ292ZXI6IGJvb2xlYW5cbiAgc2hvd1dpZGdldExpc3Q6IGJvb2xlYW5cbiAgaXNMb2FkaW5nVGVtcGxhdGU6IGJvb2xlYW5cbn1cblxuY29uc3QgZHJvcGFyZWFTdHlsZSA9IGNzc2BcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICBib3R0b206IDA7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuYFxuXG5jb25zdCBndWlkZU92ZXJsYXkgPSBjc3NgXG4gICR7ZHJvcGFyZWFTdHlsZX07XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuYFxuXG5jbGFzcyBMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzLCBTdGF0ZT4gaW1wbGVtZW50cyBEcm9wSGFuZGxlcnMge1xuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnRml4ZWRMYXlvdXQnXG4gIGxheW91dFRyYW5zZm9ybTogTGF5b3V0VHJhbnNmb3JtRnVuY1xuICBsYXlvdXRTZXR0aW5nOiBGaXhlZExheW91dFNldHRpbmdcbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHNcbiAgcmVmOiBIVE1MRWxlbWVudFxuXG4gIGFkZEJ0blJlZjogSFRNTEVsZW1lbnRcbiAgY2FudmFzUmVmOiBIVE1MQ2FudmFzRWxlbWVudFxuICBjYW52YXNQYW5lOiBDYW52YXNQYW5lXG4gIG1lZGlhUXVlcnlMaXN0OiBNZWRpYVF1ZXJ5TGlzdFxuXG4gIHJuZGluZ0xheW91dElkOiBzdHJpbmdcbiAgZG9tUmVjdDogRE9NUmVjdFxuICByZXNpemluZ1JlY3Q6IEl0ZW1DbGllbnRSZWN0XG4gIGJib3hHcmlkbGluZXM6IEJCb3hHcmlkbGluZVtdXG5cbiAgZmxpcExlZnRSaWdodDogYm9vbGVhblxuXG4gIG1vdXNlZG93blg6IG51bWJlclxuICBtb3VzZWRvd25ZOiBudW1iZXJcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICBpZiAodGhpcy5wcm9wcy5sYXlvdXQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHV0aWxzLmF1dG9CaW5kSGFuZGxlcnModGhpcywgW1xuICAgICAgJ2hhbmRsZVJlc2l6ZVN0YXJ0JyxcbiAgICAgICdoYW5kbGVSZXNpemluZycsXG4gICAgICAnaGFuZGxlUmVzaXplRW5kJyxcbiAgICAgICdoYW5kbGVEcmFnU3RhcnQnLFxuICAgICAgJ2hhbmRsZURyYWdFbmQnLFxuICAgICAgJ2hhbmRsZURyYWdPdmVyJyxcbiAgICAgICdoYW5kbGVEcmFnRW50ZXInLFxuICAgICAgJ2hhbmRsZURyYWdMZWF2ZScsXG4gICAgICAnaGFuZGxlRHJvcCcsXG4gICAgICAnaGFuZGxlQWN0aXZhdGUnLFxuICAgICAgJ2hhbmRsZVRvZ2dsZURyYWdvdmVyRWZmZWN0J1xuICAgIF0pXG4gICAgY29uc3QgZXh0cyA9IEV4dGVuc2lvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRFeHRlbnNpb25zKGAke2V4dGVuc2lvblNwZWMuRXh0ZW5zaW9uUG9pbnRzLkxheW91dFRyYW5zZm9ybWVyfWApXG4gICAgaWYgKGV4dHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGV4dCA9IGV4dHMuZmluZChpdGVtID0+IChpdGVtIGFzIGV4dGVuc2lvblNwZWMuTGF5b3V0VHJhbnNmb3JtZXJFeHRlbnNpb24pLmxheW91dFR5cGUgPT09IHRoaXMucHJvcHMubGF5b3V0LnR5cGUpXG4gICAgICB0aGlzLmxheW91dFRyYW5zZm9ybSA9IChleHQgYXMgYW55KT8udHJhbnNmb3JtTGF5b3V0XG4gICAgfVxuICAgIHRoaXMuZmxpcExlZnRSaWdodCA9IHV0aWxzLmlzUlRMKClcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgb2Zmc2V0WDogMCxcbiAgICAgIG9mZnNldFk6IDAsXG4gICAgICBkdzogMCxcbiAgICAgIGRoOiAwLFxuICAgICAgaXNEcmFnb3ZlcjogZmFsc2UsXG4gICAgICBzaG93V2lkZ2V0TGlzdDogZmFsc2UsXG4gICAgICBpc0xvYWRpbmdUZW1wbGF0ZTogZmFsc2VcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUFjdGl2YXRlIChlOiBSZWFjdC5Nb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCFpc0Rlc2lnbk1vZGUoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChNYXRoLmFicyhlLnNjcmVlblggLSB0aGlzLm1vdXNlZG93blgpID4gQ0xJQ0tfVE9MUkVSQU5DRSB8fFxuICAgICAgTWF0aC5hYnMoZS5zY3JlZW5ZIC0gdGhpcy5tb3VzZWRvd25ZKSA+IENMSUNLX1RPTFJFUkFOQ0UpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCB7IGlzSW5TZWN0aW9uLCBpc0luV2lkZ2V0IH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCF0aGlzLnBhZ2VDb250ZXh0LnZpZXdPbmx5ICYmICFpc0luU2VjdGlvbiAmJiAhaXNJbldpZGdldCAmJiAhaXNSZXNpemluZygpICYmICFpc0RyYWdnaW5nKCkpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKG51bGwpKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU1vdXNlRG93biA9IChlKTogdm9pZCA9PiB7XG4gICAgdGhpcy5tb3VzZWRvd25YID0gZS5zY3JlZW5YXG4gICAgdGhpcy5tb3VzZWRvd25ZID0gZS5zY3JlZW5ZXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKTogdm9pZCB7XG4gICAgdGhpcy5jYW52YXNQYW5lID0gbmV3IENhbnZhc1BhbmUodGhpcy5jYW52YXNSZWYsIHRoaXMucGFnZUNvbnRleHQuYnVpbGRlclRoZW1lKVxuICAgIHRoaXMudXBkYXRlRGV2aWNlUmF0aW8oKVxuXG4gICAgLy8gbW9uaXRvciBkZXZpY2VQaXhlbFJhdGlvIGNoYW5nZVxuICAgIGNvbnN0IG1xU3RyaW5nID0gYChyZXNvbHV0aW9uOiAke3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYFxuICAgIHRoaXMubWVkaWFRdWVyeUxpc3QgPSB3aW5kb3cubWF0Y2hNZWRpYT8uKG1xU3RyaW5nKVxuICAgIGNvbnN0IHsgbmFtZSwgdmVyc2lvbiB9ID0gd2luZG93LmppbXVVQS5icm93c2VyXG4gICAgaWYgKG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NhZmFyaScgJiYgcGFyc2VJbnQodmVyc2lvbikgPCAxNCkge1xuICAgICAgdGhpcy5tZWRpYVF1ZXJ5TGlzdD8uYWRkTGlzdGVuZXIodGhpcy51cGRhdGVEZXZpY2VSYXRpbylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZWRpYVF1ZXJ5TGlzdD8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy51cGRhdGVEZXZpY2VSYXRpbylcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKTogdm9pZCB7XG4gICAgY29uc3QgeyBuYW1lLCB2ZXJzaW9uIH0gPSB3aW5kb3cuamltdVVBLmJyb3dzZXJcbiAgICBpZiAobmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2FmYXJpJyAmJiBwYXJzZUludCh2ZXJzaW9uKSA8IDE0KSB7XG4gICAgICB0aGlzLm1lZGlhUXVlcnlMaXN0Py5yZW1vdmVMaXN0ZW5lcih0aGlzLnVwZGF0ZURldmljZVJhdGlvKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1lZGlhUXVlcnlMaXN0Py5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZURldmljZVJhdGlvKVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVEZXZpY2VSYXRpbygpXG4gIH1cblxuICB1cGRhdGVEZXZpY2VSYXRpbyA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLmNhbnZhc1BhbmUuc2V0U2l6ZShcbiAgICAgIHRoaXMucmVmLmNsaWVudFdpZHRoLFxuICAgICAgdGhpcy5yZWYuY2xpZW50SGVpZ2h0LFxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW9cbiAgICApXG4gIH1cblxuICBpc1Jlc2l6aW5nSXRlbSAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuZGggIT09IDAgfHwgdGhpcy5zdGF0ZS5kdyAhPT0gMFxuICB9XG5cbiAgaGFuZGxlUmVzaXplU3RhcnQgKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMucm5kaW5nTGF5b3V0SWQgPSBpZFxuXG4gICAgY29uc3QgZHJhZ2dpbmdDaGlsZCA9IHRoaXMucmVmLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgZGl2LmV4Yi1ybmRbZGF0YS1sYXlvdXRpZD1cIiR7bGF5b3V0LmlkfVwiXVtkYXRhLWxheW91dGl0ZW1pZD1cIiR7aWR9XCJdYFxuICAgIClcbiAgICB0aGlzLmRvbVJlY3QgPSB0aGlzLnJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIHRoaXMuYmJveEdyaWRsaW5lcyA9IGdldEdyaWRsaW5lc09mTGF5b3V0KFxuICAgICAgdGhpcy5wcm9wcy5sYXlvdXQsXG4gICAgICB0aGlzLmRvbVJlY3Qud2lkdGgsXG4gICAgICB0aGlzLmRvbVJlY3QuaGVpZ2h0LFxuICAgICAgaWRcbiAgICApXG4gICAgY29uc3QgcmVjdCA9IGRyYWdnaW5nQ2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0UG9zaXRpb25Vbml0KGlkKVxuICAgIHRoaXMucmVzaXppbmdSZWN0ID0ge1xuICAgICAgdW5pdHMsXG4gICAgICAuLi51dGlscy5yZWxhdGl2ZUNsaWVudFJlY3QocmVjdCwgdGhpcy5kb21SZWN0KVxuICAgIH1cbiAgfVxuXG4gIGdldFJlc2l6aW5nRGVsdGEgKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgZHg6IG51bWJlcixcbiAgICBkeTogbnVtYmVyLFxuICAgIGR3OiBudW1iZXIsXG4gICAgZGg6IG51bWJlcixcbiAgICBzaGlmdEtleTogYm9vbGVhblxuICApOiBSbmREZWx0YSB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHRoaXMucHJvcHMubGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgY29uc3Qgcm5kRGVsdGEgPSBtb3ZlR3VpZGUoXG4gICAgICBsYXlvdXRJdGVtLFxuICAgICAgdGhpcy5kb21SZWN0LFxuICAgICAgdGhpcy5yZXNpemluZ1JlY3QsXG4gICAgICB7IHg6IGR4LCB3OiBkdywgeTogZHksIGg6IGRoIH0sXG4gICAgICBzaGlmdEtleSxcbiAgICAgIHRoaXMuYmJveEdyaWRsaW5lcyxcbiAgICAgIHRoaXMuY2FudmFzUGFuZSxcbiAgICAgIHRoaXMucGFnZUNvbnRleHQuYnVpbGRlclRoZW1lXG4gICAgKVxuXG4gICAgcmV0dXJuIHJuZERlbHRhXG4gIH1cblxuICBoYW5kbGVSZXNpemluZyAoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBkeDogbnVtYmVyLFxuICAgIGR5OiBudW1iZXIsXG4gICAgZHc6IG51bWJlcixcbiAgICBkaDogbnVtYmVyLFxuICAgIHNoaWZ0S2V5OiBib29sZWFuLFxuICAgIHNwZWVkOiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5jYW52YXNQYW5lLmNsZWFyKClcbiAgICBpZiAoc3BlZWQgPiA1MDApIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvZmZzZXRYOiBkeCxcbiAgICAgICAgb2Zmc2V0WTogZHksXG4gICAgICAgIGR3OiBkdyxcbiAgICAgICAgZGg6IGRoXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHJuZERlbHRhID0gdGhpcy5nZXRSZXNpemluZ0RlbHRhKGlkLCBkeCwgZHksIGR3LCBkaCwgc2hpZnRLZXkpXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBvZmZzZXRYOiBybmREZWx0YS54LFxuICAgICAgb2Zmc2V0WTogcm5kRGVsdGEueSxcbiAgICAgIGR3OiBybmREZWx0YS53LFxuICAgICAgZGg6IHJuZERlbHRhLmhcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlUmVzaXplRW5kIChcbiAgICBpZDogc3RyaW5nLFxuICAgIGR4OiBudW1iZXIsXG4gICAgZHk6IG51bWJlcixcbiAgICBkdzogbnVtYmVyLFxuICAgIGRoOiBudW1iZXIsXG4gICAgc2hpZnRLZXk6IGJvb2xlYW4sXG4gICAgbGF5b3V0SXRlbTogTGF5b3V0SXRlbUpzb24sXG4gICAgaXRlbVNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmdcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5ybmRpbmdMYXlvdXRJZCA9IG51bGxcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3QgZGVsdGEgPSB0aGlzLmdldFJlc2l6aW5nRGVsdGEoaWQsIGR4LCBkeSwgZHcsIGRoLCBzaGlmdEtleSlcbiAgICB0aGlzLmNhbnZhc1BhbmUuY2xlYXIoKVxuXG4gICAgY29uc3QgbmV3UG9zID0gZ2VuZXJhdGVSZXNpemluZ0JCb3hTdHlsZSh0aGlzLnJlc2l6aW5nUmVjdCBhcyB1bmtub3duIGFzIERPTVJlY3QsIHRoaXMuZG9tUmVjdCwge1xuICAgICAgZHg6IGRlbHRhLngsXG4gICAgICBkeTogZGVsdGEueSxcbiAgICAgIGR3OiBkZWx0YS53LFxuICAgICAgZGg6IGRlbHRhLmhcbiAgICB9KVxuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG5cbiAgICBjb25zdCBsYXlvdXRJbmZvID0geyBsYXlvdXRJZDogbGF5b3V0LmlkLCBsYXlvdXRJdGVtSWQ6IGlkIH1cbiAgICBjb25zdCB7IGJib3gsIHNldHRpbmcgfSA9IGFwcGx5U25hcFJlc3VsdChcbiAgICAgIEltbXV0YWJsZShsYXlvdXRJdGVtLmJib3gpLFxuICAgICAgbGF5b3V0SXRlbS5zZXR0aW5nLFxuICAgICAgdGhpcy5kb21SZWN0LFxuICAgICAgbmV3UG9zXG4gICAgKVxuICAgIGxldCBuZXdCQm94ID0gYmJveFxuICAgIGlmIChpdGVtU2V0dGluZz8uaENlbnRlciAmJiBsYXlvdXRJdGVtLmJib3g/LmxlZnQgPT09ICc1MCUnKSB7XG4gICAgICBuZXdCQm94ID0gbmV3QkJveC5zZXQoJ2xlZnQnLCAnNTAlJylcbiAgICB9XG4gICAgaWYgKGl0ZW1TZXR0aW5nPy52Q2VudGVyICYmIGxheW91dEl0ZW0uYmJveD8udG9wID09PSAnNTAlJykge1xuICAgICAgbmV3QkJveCA9IG5ld0JCb3guc2V0KCd0b3AnLCAnNTAlJylcbiAgICB9XG4gICAgYXBwQ29uZmlnQWN0aW9uXG4gICAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgICAgbGF5b3V0SW5mbyxcbiAgICAgICAgJ2Jib3gnLFxuICAgICAgICB0aGlzLmZsaXBMZWZ0UmlnaHQgPyBmbGlwQkJveChuZXdCQm94KSA6IG5ld0JCb3hcbiAgICAgIClcbiAgICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdzZXR0aW5nJywgc2V0dGluZylcbiAgICBpZiAoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZy51c2VBdXRvU29ydEluRml4ZWRMYXlvdXQpIHtcbiAgICAgIGNvbnN0IHNvcnRlZExheW91dCA9IHNvcnRMYXlvdXRJdGVtcyhhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF0sIHRoaXMuZG9tUmVjdC53aWR0aCwgdGhpcy5kb21SZWN0LmhlaWdodClcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0UHJvcGVydHkobGF5b3V0SW5mby5sYXlvdXRJZCwgJ29yZGVyJywgc29ydGVkTGF5b3V0Lm9yZGVyIGFzIGFueSlcbiAgICB9XG4gICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuXG4gICAgdGhpcy5iYm94R3JpZGxpbmVzID0gbnVsbFxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgb2Zmc2V0WDogMCxcbiAgICAgIG9mZnNldFk6IDAsXG4gICAgICBkdzogMCxcbiAgICAgIGRoOiAwXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZU1vdmVJdGVtQnlLZXkgPSAoaWQ6IHN0cmluZywgZHg6IG51bWJlciwgZHk6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG4gICAgbGV0IGl0ZW1XaWR0aDogbnVtYmVyXG4gICAgbGV0IGl0ZW1IZWlnaHQ6IG51bWJlclxuICAgIGxldCBiYm94ID0gbGF5b3V0LmNvbnRlbnRbaWRdLmJib3hcbiAgICBsZXQgc2V0dGluZzogSW1tdXRhYmxlT2JqZWN0PEZpeGVkTGF5b3V0SXRlbVNldHRpbmc+ID0gbGF5b3V0LmNvbnRlbnRbaWRdLnNldHRpbmcgPz8gSW1tdXRhYmxlKHt9KVxuICAgIGNvbnN0IGlzQWxpZ25DZW50ZXIgPSAoc2V0dGluZz8uaENlbnRlciA/PyBmYWxzZSkgfHwgKHNldHRpbmc/LnZDZW50ZXIgPz8gZmFsc2UpXG4gICAgaWYgKGlzQWxpZ25DZW50ZXIpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5yZWYucXVlcnlTZWxlY3RvcihgZGl2W2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtpZH1cIl1gKVxuICAgICAgaXRlbVdpZHRoID0gZWxlbWVudC5jbGllbnRXaWR0aFxuICAgICAgaXRlbUhlaWdodCA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gICAgfVxuICAgIGlmIChkeCAhPT0gMCkge1xuICAgICAgLy8gbW9kaWZ5IGxlZnQgYW5kIHJpZ2h0XG4gICAgICBpZiAodXRpbHMuaXNQZXJjZW50YWdlKGJib3gubGVmdCkpIHtcbiAgICAgICAgY29uc3QgcFZhbHVlID0gcGFyc2VGbG9hdChiYm94LmxlZnQpXG4gICAgICAgIGlmIChzZXR0aW5nPy5oQ2VudGVyKSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdsZWZ0JywgYCR7KDUwIC0gKGl0ZW1XaWR0aCAqIDEwMCAvIDIpIC8gdGhpcy5yZWYuY2xpZW50V2lkdGggKyBkeCAqIDAuMSkudG9GaXhlZCgxKX0lYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoJ2xlZnQnLCBgJHsocFZhbHVlICsgZHggKiAwLjEpLnRvRml4ZWQoMSl9JWApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBWYWx1ZSA9IHBhcnNlRmxvYXQoYmJveC5sZWZ0KVxuICAgICAgICBpZiAoc2V0dGluZz8uaENlbnRlcikge1xuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgnbGVmdCcsIGAkeyh0aGlzLnJlZi5jbGllbnRXaWR0aCAtIGl0ZW1XaWR0aCkgLyAyICsgZHh9cHhgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgnbGVmdCcsIGAke3BWYWx1ZSArIGR4fXB4YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShiYm94LnJpZ2h0KSkge1xuICAgICAgICBjb25zdCBwVmFsdWUgPSBwYXJzZUZsb2F0KGJib3gucmlnaHQpXG4gICAgICAgIGlmIChzZXR0aW5nPy5oQ2VudGVyKSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdyaWdodCcsIGAkeyg1MCArIChpdGVtV2lkdGggKiAxMDAgLyAyKSAvIHRoaXMucmVmLmNsaWVudFdpZHRoIC0gZHggKiAwLjEpLnRvRml4ZWQoMSl9JWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdyaWdodCcsIGAkeyhwVmFsdWUgLSBkeCAqIDAuMSkudG9GaXhlZCgxKX0lYClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcFZhbHVlID0gcGFyc2VGbG9hdChiYm94LnJpZ2h0KVxuICAgICAgICBpZiAoc2V0dGluZz8uaENlbnRlcikge1xuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgncmlnaHQnLCBgJHsodGhpcy5yZWYuY2xpZW50V2lkdGggKyBpdGVtV2lkdGgpIC8gMiAtIGR4fXB4YClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoJ3JpZ2h0JywgYCR7cFZhbHVlIC0gZHh9cHhgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2V0dGluZz8uaENlbnRlcikge1xuICAgICAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ2hDZW50ZXInLCBmYWxzZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZHkgIT09IDApIHtcbiAgICAgIC8vIG1vZGlmeSB0b3AgYW5kIGJvdHRvbVxuICAgICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShiYm94LnRvcCkpIHtcbiAgICAgICAgY29uc3QgcFZhbHVlID0gcGFyc2VGbG9hdChiYm94LnRvcClcbiAgICAgICAgaWYgKHNldHRpbmc/LnZDZW50ZXIpIHtcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoJ3RvcCcsIGAkeyg1MCAtIChpdGVtSGVpZ2h0ICogMTAwIC8gMikgLyB0aGlzLnJlZi5jbGllbnRIZWlnaHQgKyBkeSAqIDAuMSkudG9GaXhlZCgxKX0lYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoJ3RvcCcsIGAkeyhwVmFsdWUgKyBkeSAqIDAuMSkudG9GaXhlZCgxKX0lYClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcFZhbHVlID0gcGFyc2VGbG9hdChiYm94LnRvcClcbiAgICAgICAgaWYgKHNldHRpbmc/LnZDZW50ZXIpIHtcbiAgICAgICAgICBiYm94ID0gYmJveC5zZXQoJ3RvcCcsIGAkeyh0aGlzLnJlZi5jbGllbnRIZWlnaHQgLSBpdGVtSGVpZ2h0KSAvIDIgKyBkeX1weGApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCd0b3AnLCBgJHtwVmFsdWUgKyBkeX1weGApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UoYmJveC5ib3R0b20pKSB7XG4gICAgICAgIGNvbnN0IHBWYWx1ZSA9IHBhcnNlRmxvYXQoYmJveC5ib3R0b20pXG4gICAgICAgIGlmIChzZXR0aW5nPy52Q2VudGVyKSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdib3R0b20nLCBgJHsoNTAgKyAoaXRlbUhlaWdodCAqIDEwMCAvIDIpIC8gdGhpcy5yZWYuY2xpZW50SGVpZ2h0IC0gZHkgKiAwLjEpLnRvRml4ZWQoMSl9JWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdib3R0b20nLCBgJHsocFZhbHVlIC0gZHkgKiAwLjEpLnRvRml4ZWQoMSl9JWApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBWYWx1ZSA9IHBhcnNlRmxvYXQoYmJveC5ib3R0b20pXG4gICAgICAgIGlmIChzZXR0aW5nPy5oQ2VudGVyKSB7XG4gICAgICAgICAgYmJveCA9IGJib3guc2V0KCdib3R0b20nLCBgJHsodGhpcy5yZWYuY2xpZW50SGVpZ2h0ICsgaXRlbUhlaWdodCkgLyAyIC0gZHl9cHhgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJib3ggPSBiYm94LnNldCgnYm90dG9tJywgYCR7cFZhbHVlIC0gZHl9cHhgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2V0dGluZz8udkNlbnRlcikge1xuICAgICAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ3ZDZW50ZXInLCBmYWxzZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICBpZiAoaXNBbGlnbkNlbnRlcikge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICAgIHtcbiAgICAgICAgICBsYXlvdXRJZDogbGF5b3V0LmlkLFxuICAgICAgICAgIGxheW91dEl0ZW1JZDogaWRcbiAgICAgICAgfSxcbiAgICAgICAgJ3NldHRpbmcnLFxuICAgICAgICBzZXR0aW5nXG4gICAgICApXG4gICAgfVxuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHtcbiAgICAgIGxheW91dElkOiBsYXlvdXQuaWQsXG4gICAgICBsYXlvdXRJdGVtSWQ6IGlkXG4gICAgfSwgJ2Jib3gnLCBiYm94KVxuICAgIGlmIChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLnVzZUF1dG9Tb3J0SW5GaXhlZExheW91dCkge1xuICAgICAgY29uc3Qgc29ydGVkTGF5b3V0ID0gc29ydExheW91dEl0ZW1zKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXQuaWRdLCB0aGlzLnJlZi5jbGllbnRXaWR0aCwgdGhpcy5yZWYuY2xpZW50SGVpZ2h0KVxuICAgICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXQuaWQsICdvcmRlcicsIHNvcnRlZExheW91dC5vcmRlciBhcyBhbnkpXG4gICAgfVxuICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbiAgfVxuXG4gIGhhbmRsZURyYWdPdmVyIChcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGRyYWdnaW5nRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdCxcbiAgICBpdGVtUmVjdDogQ2xpZW50UmVjdCxcbiAgICBjbGllbnRYOiBudW1iZXIsXG4gICAgY2xpZW50WTogbnVtYmVyLFxuICAgIHNwZWVkOiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5jYW52YXNQYW5lLmNsZWFyKClcbiAgICBpZiAoIXRoaXMuc3RhdGUuaXNEcmFnb3ZlciB8fCBzcGVlZCA+IDUwMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIGNvbnN0IGdyaWRsaW5lcyA9IHRoaXMuY2FsY3VsYXRlR3JpZGxpbmVzKGRyYWdnaW5nSXRlbSwgaXRlbVJlY3QpXG5cbiAgICBsZXQgZGVsdGFYID0gMFxuICAgIGxldCBkZWx0YVkgPSAwXG4gICAgbGV0IGV4Y2x1ZGVJdGVtSWRcbiAgICBsZXQgbGF5b3V0SXRlbVxuXG4gICAgbGV0IHVuaXRzXG4gICAgaWYgKGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvPy5sYXlvdXRJZCA9PT0gdGhpcy5wcm9wcy5sYXlvdXQuaWQpIHtcbiAgICAgIGV4Y2x1ZGVJdGVtSWQgPSBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mby5sYXlvdXRJdGVtSWRcbiAgICAgIHVuaXRzID0gdGhpcy5nZXRQb3NpdGlvblVuaXQoZXhjbHVkZUl0ZW1JZClcbiAgICAgIGxheW91dEl0ZW0gPSB0aGlzLnByb3BzLmxheW91dC5jb250ZW50W2V4Y2x1ZGVJdGVtSWRdXG4gICAgfSBlbHNlIHtcbiAgICAgIHVuaXRzID0gZ2V0QkJveFVuaXRzKHt9LCB0aGlzLmZsaXBMZWZ0UmlnaHQpXG4gICAgfVxuICAgIGNvbnN0IGhhc1JvdGF0aW9uID0gZHJhZ2dpbmdJdGVtLnJvdGF0aW9uID4gMCB8fCBkcmFnZ2luZ0l0ZW0ucm90YXRpb24gPCAwXG5cbiAgICBjb25zdCBybmREZWx0YSA9IG1vdmVHdWlkZShcbiAgICAgIGxheW91dEl0ZW0sXG4gICAgICB0aGlzLmRvbVJlY3QsXG4gICAgICBpdGVtUmVjdCxcbiAgICAgIHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgICAgdzogMCxcbiAgICAgICAgaDogMFxuICAgICAgfSxcbiAgICAgIGZhbHNlLFxuICAgICAgdGhpcy5iYm94R3JpZGxpbmVzLFxuICAgICAgaGFzUm90YXRpb24gPyBudWxsIDogdGhpcy5jYW52YXNQYW5lLFxuICAgICAgaGFzUm90YXRpb24gPyBudWxsIDogdGhpcy5wYWdlQ29udGV4dC5idWlsZGVyVGhlbWVcbiAgICApXG5cbiAgICAvLyBzbmFwIGRyYWdnaW5nRWxlbWVudFxuICAgIGlmIChkcmFnZ2luZ0VsZW1lbnQgIT0gbnVsbCAmJiAocm5kRGVsdGEueCAhPT0gMCB8fCBybmREZWx0YS55ICE9PSAwKSkge1xuICAgICAgY29uc3QgdHggPSBwYXJzZUZsb2F0KGRyYWdnaW5nRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRleCcpKSA/PyAwXG4gICAgICBjb25zdCB0eSA9IHBhcnNlRmxvYXQoZHJhZ2dpbmdFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10cmFuc2xhdGV5JykpID8/IDBcbiAgICAgIGRyYWdnaW5nRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7dHggKyBybmREZWx0YS54fXB4LCAke3R5ICsgcm5kRGVsdGEueX1weClgXG4gICAgfVxuICAgIGRlbHRhWCA9IHJuZERlbHRhLnhcbiAgICBkZWx0YVkgPSBybmREZWx0YS55XG4gICAgdGhpcy5jYW52YXNQYW5lLnNldENvbG9yKFxuICAgICAgdGhpcy5wYWdlQ29udGV4dC5idWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs2MDBdXG4gICAgKVxuICAgIGNvbnN0IHJlY3Q6IFBhcnRpYWw8SXRlbUNsaWVudFJlY3Q+ID0ge1xuICAgICAgd2lkdGg6IGl0ZW1SZWN0LndpZHRoLFxuICAgICAgaGVpZ2h0OiBpdGVtUmVjdC5oZWlnaHQsXG4gICAgICBsZWZ0OiBpdGVtUmVjdC5sZWZ0ICsgZGVsdGFYLFxuICAgICAgdG9wOiBpdGVtUmVjdC50b3AgKyBkZWx0YVksXG4gICAgICB1bml0c1xuICAgIH1cbiAgICBkcmF3UG9zaXRpb24oXG4gICAgICByZWN0IGFzIEl0ZW1DbGllbnRSZWN0LFxuICAgICAgdGhpcy5kb21SZWN0LFxuICAgICAgdGhpcy5jYW52YXNQYW5lXG4gICAgKVxuXG4gICAgaWYgKGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvID09IG51bGwgfHwgZHJhZ2dpbmdJdGVtLmlzUGVuZGluZykge1xuICAgICAgdGhpcy5jYW52YXNQYW5lLnNldENvbG9yKFxuICAgICAgICBwb2xpc2hlZC5yZ2JhKFxuICAgICAgICAgIHRoaXMucGFnZUNvbnRleHQuYnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNzAwXSxcbiAgICAgICAgICAwLjJcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgY29uc3QgcmVjdDogUGFydGlhbDxDbGllbnRSZWN0PiA9IHtcbiAgICAgICAgbGVmdDogaXRlbVJlY3QubGVmdCArIGRlbHRhWCxcbiAgICAgICAgdG9wOiBpdGVtUmVjdC50b3AgKyBkZWx0YVksXG4gICAgICAgIHdpZHRoOiBpdGVtUmVjdC53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBpdGVtUmVjdC5oZWlnaHRcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FudmFzUGFuZS5kcmF3UmVjdChyZWN0KVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVRvZ2dsZURyYWdvdmVyRWZmZWN0IChcbiAgICB2YWx1ZTogYm9vbGVhbixcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzXG4gICk6IHZvaWQge1xuICAgIHRoaXMuY2FudmFzUGFuZS5jbGVhcigpXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLmRvbVJlY3QgPSB0aGlzLnJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgbGV0IGV4Y2x1ZGVJZFxuICAgICAgaWYgKGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvPy5sYXlvdXRJZCA9PT0gdGhpcy5wcm9wcy5sYXlvdXQuaWQpIHtcbiAgICAgICAgZXhjbHVkZUlkID0gZHJhZ2dpbmdJdGVtLmxheW91dEluZm8ubGF5b3V0SXRlbUlkXG4gICAgICB9XG4gICAgICB0aGlzLmJib3hHcmlkbGluZXMgPSBnZXRHcmlkbGluZXNPZkxheW91dChcbiAgICAgICAgdGhpcy5wcm9wcy5sYXlvdXQsXG4gICAgICAgIHRoaXMuZG9tUmVjdC53aWR0aCxcbiAgICAgICAgdGhpcy5kb21SZWN0LmhlaWdodCxcbiAgICAgICAgZXhjbHVkZUlkXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNEcmFnb3ZlcjogdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlRHJhZ0VudGVyIChkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKTogdm9pZCB7fVxuXG4gIGhhbmRsZURyYWdMZWF2ZSAoKTogdm9pZCB7fVxuXG4gIGhhbmRsZURyb3AgKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdCxcbiAgICBpdGVtUmVjdDogQ2xpZW50UmVjdFxuICApOiB2b2lkIHtcbiAgICBsZXQgdW5pdHNcbiAgICBpZiAoXG4gICAgICBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbyA9PSBudWxsIHx8XG4gICAgICBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mby5sYXlvdXRJZCAhPT0gdGhpcy5wcm9wcy5sYXlvdXQuaWRcbiAgICApIHtcbiAgICAgIHVuaXRzID0gZ2V0QkJveFVuaXRzKHt9LCB0aGlzLmZsaXBMZWZ0UmlnaHQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHVuaXRzID0gdGhpcy5nZXRQb3NpdGlvblVuaXQoZHJhZ2dpbmdJdGVtLmxheW91dEluZm8ubGF5b3V0SXRlbUlkKVxuICAgIH1cbiAgICBjb25zdCB7IHNuYXBwZWRSZWN0LCBkZWx0YSB9ID0gdGhpcy5jYWxTbmFwcGVkUmVjdChcbiAgICAgIGRyYWdnaW5nSXRlbSxcbiAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICB7IHVuaXRzLCAuLi5pdGVtUmVjdCB9LFxuICAgICAgZHJhZ2dpbmdJdGVtLmxheW91dEluZm9cbiAgICApXG4gICAgdGhpcy5jYW52YXNQYW5lLmNsZWFyKClcbiAgICBjb25zdCByZWN0ID0ge1xuICAgICAgbGVmdDogaXRlbVJlY3QubGVmdCArIGRlbHRhLngsXG4gICAgICB0b3A6IGl0ZW1SZWN0LnRvcCArIGRlbHRhLnksXG4gICAgICB3aWR0aDogaXRlbVJlY3Qud2lkdGgsXG4gICAgICBoZWlnaHQ6IGl0ZW1SZWN0LmhlaWdodCxcbiAgICAgIHJpZ2h0OiBjb250YWluZXJSZWN0LndpZHRoIC0gKGl0ZW1SZWN0LmxlZnQgKyBkZWx0YS54ICsgaXRlbVJlY3Qud2lkdGgpLFxuICAgICAgYm90dG9tOiBjb250YWluZXJSZWN0LmhlaWdodCAtIChpdGVtUmVjdC50b3AgKyBkZWx0YS55ICsgaXRlbVJlY3QuaGVpZ2h0KVxuICAgIH1cbiAgICB0aGlzLmFkZFdpZGdldFRvTGF5b3V0KGRyYWdnaW5nSXRlbSwgY29udGFpbmVyUmVjdCwgcmVjdCBhcyBET01SZWN0LCBzbmFwcGVkUmVjdCkuY2F0Y2goZXJyID0+IHsgY29uc29sZS5lcnJvcihlcnIpIH0pXG4gICAgdGhpcy5iYm94R3JpZGxpbmVzID0gbnVsbFxuICB9XG5cbiAgY2FsU25hcHBlZFJlY3QgKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgY29udGFpbmVyUmVjdDogRE9NUmVjdCxcbiAgICBpdGVtUmVjdDogSXRlbUNsaWVudFJlY3QsXG4gICAgbGF5b3V0SW5mbz86IExheW91dEluZm9cbiAgKToge1xuICAgICAgc25hcHBlZFJlY3Q6IERPTVJlY3RcbiAgICAgIGRlbHRhOiBSbmREZWx0YVxuICAgIH0ge1xuICAgIGxldCBsYXlvdXRJdGVtXG4gICAgaWYgKGxheW91dEluZm8/LmxheW91dElkID09PSB0aGlzLnByb3BzLmxheW91dC5pZCkge1xuICAgICAgbGF5b3V0SXRlbSA9IHRoaXMucHJvcHMubGF5b3V0LmNvbnRlbnRbbGF5b3V0SW5mby5sYXlvdXRJdGVtSWRdXG4gICAgfVxuICAgIGNvbnN0IGRlbHRhID0gbW92ZUd1aWRlKFxuICAgICAgbGF5b3V0SXRlbSxcbiAgICAgIHRoaXMuZG9tUmVjdCxcbiAgICAgIGl0ZW1SZWN0LFxuICAgICAgeyB4OiAwLCB5OiAwLCB3OiAwLCBoOiAwIH0sXG4gICAgICBmYWxzZSxcbiAgICAgIHRoaXMuYmJveEdyaWRsaW5lc1xuICAgIClcbiAgICBjb25zdCBzbmFwcGVkUmVjdDogYW55ID0ge1xuICAgICAgbGVmdDogaXRlbVJlY3QubGVmdCArIGRlbHRhLngsXG4gICAgICB0b3A6IGl0ZW1SZWN0LnRvcCArIGRlbHRhLnksXG4gICAgICB3aWR0aDogaXRlbVJlY3Qud2lkdGgsXG4gICAgICBoZWlnaHQ6IGl0ZW1SZWN0LmhlaWdodFxuICAgIH1cbiAgICBzbmFwcGVkUmVjdC5yaWdodCA9IGNvbnRhaW5lclJlY3Qud2lkdGggLSAoKCtzbmFwcGVkUmVjdC5sZWZ0KSArICgrc25hcHBlZFJlY3Qud2lkdGgpKVxuICAgIHNuYXBwZWRSZWN0LmJvdHRvbSA9IGNvbnRhaW5lclJlY3QuaGVpZ2h0IC0gKCgrc25hcHBlZFJlY3QudG9wKSArICgrc25hcHBlZFJlY3QuaGVpZ2h0KSlcbiAgICBpZiAoaXRlbVJlY3Qud2lkdGggPiBjb250YWluZXJSZWN0LndpZHRoKSB7XG4gICAgICBzbmFwcGVkUmVjdC53aWR0aCA9IGNvbnRhaW5lclJlY3Qud2lkdGhcbiAgICAgIHNuYXBwZWRSZWN0LmxlZnQgPSAwXG4gICAgfVxuICAgIGlmIChpdGVtUmVjdC5oZWlnaHQgPiBjb250YWluZXJSZWN0LmhlaWdodCkge1xuICAgICAgc25hcHBlZFJlY3QuaGVpZ2h0ID0gY29udGFpbmVyUmVjdC5oZWlnaHRcbiAgICAgIHNuYXBwZWRSZWN0LnRvcCA9IDBcbiAgICB9XG5cbiAgICAvLyBVc2UgcGVyY2VudGFnZSBzaXplIGJ5IGRlZmF1bHRcbiAgICBzbmFwcGVkUmVjdC5sZWZ0ID0gdXRpbHMudG9SYXRpbyhzbmFwcGVkUmVjdC5sZWZ0LCBjb250YWluZXJSZWN0LndpZHRoKVxuICAgIHNuYXBwZWRSZWN0LnRvcCA9IHV0aWxzLnRvUmF0aW8oc25hcHBlZFJlY3QudG9wLCBjb250YWluZXJSZWN0LmhlaWdodClcbiAgICBzbmFwcGVkUmVjdC53aWR0aCA9IHV0aWxzLnRvUmF0aW8oc25hcHBlZFJlY3Qud2lkdGgsIGNvbnRhaW5lclJlY3Qud2lkdGgpXG4gICAgc25hcHBlZFJlY3QuaGVpZ2h0ID0gdXRpbHMudG9SYXRpbyhzbmFwcGVkUmVjdC5oZWlnaHQsIGNvbnRhaW5lclJlY3QuaGVpZ2h0KVxuICAgIHNuYXBwZWRSZWN0LnJpZ2h0ID0gdXRpbHMudG9SYXRpbyhzbmFwcGVkUmVjdC5yaWdodCwgY29udGFpbmVyUmVjdC53aWR0aClcbiAgICBzbmFwcGVkUmVjdC5ib3R0b20gPSB1dGlscy50b1JhdGlvKHNuYXBwZWRSZWN0LmJvdHRvbSwgY29udGFpbmVyUmVjdC5oZWlnaHQpXG5cbiAgICByZXR1cm4geyBzbmFwcGVkUmVjdCwgZGVsdGEgfVxuICB9XG5cbiAgYXN5bmMgYWRkV2lkZ2V0VG9MYXlvdXQgKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdCxcbiAgICBpdGVtUmVjdDogQ2xpZW50UmVjdCxcbiAgICBzbmFwUmVzdWx0OiBDbGllbnRSZWN0LFxuICAgIGFwcENvbmZpZz86IElNQXBwQ29uZmlnXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgbGF5b3V0LCBicm93c2VyU2l6ZU1vZGUgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkZEl0ZW1Ub0xheW91dChcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsXG4gICAgICBkcmFnZ2luZ0l0ZW0sXG4gICAgICBsYXlvdXQuaWRcbiAgICApXG5cbiAgICBjb25zdCB7IGxheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWcgfSA9IHJlc3VsdFxuICAgIGNvbnN0IHNlcnZpY2UgPSBMYXlvdXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW5zdGFuY2UoKS5nZXRTZXJ2aWNlQnlUeXBlKExheW91dFR5cGUuRml4ZWRMYXlvdXQpXG4gICAgY29uc3Qgb3V0QXBwQ29uZmlnID0gc2VydmljZS5wcm9jZXNzQWZ0ZXJJdGVtQWRkZWQoXG4gICAgICB1cGRhdGVkQXBwQ29uZmlnLFxuICAgICAgZHJhZ2dpbmdJdGVtLFxuICAgICAgbGF5b3V0SW5mbyxcbiAgICAgIGJyb3dzZXJTaXplTW9kZSxcbiAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICBpdGVtUmVjdCxcbiAgICAgIG51bGwsXG4gICAgICB7IHNuYXBSZXN1bHQgfVxuICAgIClcblxuICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goXG4gICAgICBhcHBBY3Rpb25zLmxheW91dENoYW5nZWQob3V0QXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICAgIClcbiAgfVxuXG4gIGdldFBvc2l0aW9uVW5pdCAobGF5b3V0SXRlbUlkOiBzdHJpbmcpOiBCQm94VW5pdHMge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSB0aGlzLnByb3BzLmxheW91dC5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICBjb25zdCBiYm94ID0gbGF5b3V0SXRlbS5iYm94XG4gICAgcmV0dXJuIGdldEJCb3hVbml0cyhiYm94LCB0aGlzLmZsaXBMZWZ0UmlnaHQpXG4gIH1cblxuICBjcmVhdGVJdGVtICh0YXJnZXRMYXlvdXQ6IElNTGF5b3V0SnNvbiwgbGF5b3V0SXRlbUlkOiBzdHJpbmcsIGtleTogbnVtYmVyKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHtcbiAgICAgIGl0ZW1SZXNpemFibGUsXG4gICAgICBpdGVtRHJhZ2dhYmxlLFxuICAgICAgaXRlbVNlbGVjdGFibGUsXG4gICAgICBzaG93RGVmYXVsdFRvb2xzXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IG9mZnNldFgsIG9mZnNldFksIGR3LCBkaCB9ID0gdGhpcy5zdGF0ZVxuXG4gICAgY29uc3QgZGVsdGFYID0gbGF5b3V0SXRlbUlkID09PSB0aGlzLnJuZGluZ0xheW91dElkID8gb2Zmc2V0WCA6IDBcbiAgICBjb25zdCBkZWx0YVkgPSBsYXlvdXRJdGVtSWQgPT09IHRoaXMucm5kaW5nTGF5b3V0SWQgPyBvZmZzZXRZIDogMFxuICAgIGNvbnN0IGRlbHRhVyA9IGxheW91dEl0ZW1JZCA9PT0gdGhpcy5ybmRpbmdMYXlvdXRJZCA/IGR3IDogMFxuICAgIGNvbnN0IGRlbHRhSCA9IGxheW91dEl0ZW1JZCA9PT0gdGhpcy5ybmRpbmdMYXlvdXRJZCA/IGRoIDogMFxuICAgIGNvbnN0IGluaXRSZWN0ID0gbGF5b3V0SXRlbUlkID09PSB0aGlzLnJuZGluZ0xheW91dElkID8gdGhpcy5yZXNpemluZ1JlY3QgOiB1bmRlZmluZWRcbiAgICBjb25zdCBjb250YWluZXJSZWN0ID0gbGF5b3V0SXRlbUlkID09PSB0aGlzLnJuZGluZ0xheW91dElkID8gdGhpcy5kb21SZWN0IDogdW5kZWZpbmVkXG5cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gdGFyZ2V0TGF5b3V0LmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxGaXhlZExheW91dEl0ZW1cbiAgICAgICAga2V5PXtgJHt0YXJnZXRMYXlvdXQuaWR9XyR7bGF5b3V0SXRlbUlkfWB9XG4gICAgICAgIGluZGV4PXtrZXl9XG4gICAgICAgIGxheW91dEl0ZW09e2xheW91dEl0ZW19XG4gICAgICAgIG9mZnNldFg9e2RlbHRhWH1cbiAgICAgICAgb2Zmc2V0WT17ZGVsdGFZfVxuICAgICAgICBkdz17ZGVsdGFXfVxuICAgICAgICBkaD17ZGVsdGFIfVxuICAgICAgICBpbml0UmVjdD17aW5pdFJlY3QgYXMgdW5rbm93biBhcyBET01SZWN0fVxuICAgICAgICBjb250YWluZXJSZWN0PXtjb250YWluZXJSZWN0fVxuICAgICAgICBsYXlvdXRJZD17dGFyZ2V0TGF5b3V0LmlkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgZHJhZ2dhYmxlPXtpdGVtRHJhZ2dhYmxlfVxuICAgICAgICByZXNpemFibGU9e2l0ZW1SZXNpemFibGV9XG4gICAgICAgIHNlbGVjdGFibGU9e2l0ZW1TZWxlY3RhYmxlfVxuICAgICAgICBzaG93RGVmYXVsdFRvb2xzPXtzaG93RGVmYXVsdFRvb2xzfVxuICAgICAgICBpc0xheW91dExvY2tDaGlsZHJlbj17dGhpcy5sYXlvdXRTZXR0aW5nLmxvY2tDaGlsZHJlbn1cbiAgICAgICAgb25SZXNpemVTdGFydD17dGhpcy5oYW5kbGVSZXNpemVTdGFydH1cbiAgICAgICAgb25SZXNpemluZz17dGhpcy5oYW5kbGVSZXNpemluZ31cbiAgICAgICAgb25SZXNpemVFbmQ9e3RoaXMuaGFuZGxlUmVzaXplRW5kfVxuICAgICAgICBvbk1vdmVCeUtleT17dGhpcy5oYW5kbGVNb3ZlSXRlbUJ5S2V5fVxuICAgICAgICBpc0luU2VjdGlvbj17dGhpcy5wcm9wcy5pc0luU2VjdGlvbn1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgdG9nZ2xlU2hvd1dpZGdldExpc3QgPSAoZSk6IHZvaWQgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1dpZGdldExpc3Q6ICF0aGlzLnN0YXRlLnNob3dXaWRnZXRMaXN0IH0pXG4gIH1cblxuICBjbG9zZVdpZGdldExpc3QgPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2hvd1dpZGdldExpc3QpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93V2lkZ2V0TGlzdDogZmFsc2UgfSlcbiAgICB9XG4gIH1cblxuICBoYW5kbGVQYWdlVGVtcGxhdGVTZWxlY3RlZCA9ICh0ZW1wbGF0ZVBhZ2VKc29uKTogdm9pZCA9PiB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogdHJ1ZSB9KVxuICAgIGlmICh0aGlzLnBhZ2VDb250ZXh0LmlzSGVhZGVyKSB7XG4gICAgICBhcHBDb25maWdBY3Rpb24uYXBwbHlIZWFkZXJUZW1wbGF0ZSh0ZW1wbGF0ZVBhZ2VKc29uKS50aGVuKCgpID0+IHtcbiAgICAgICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuICAgICAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogZmFsc2UgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pLmNhdGNoKGVyciA9PiB7IGNvbnNvbGUuZXJyb3IoZXJyKSB9KVxuICAgIH0gZWxzZSBpZiAodGhpcy5wYWdlQ29udGV4dC5pc0Zvb3Rlcikge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uLmFwcGx5Rm9vdGVyVGVtcGxhdGUodGVtcGxhdGVQYWdlSnNvbikudGhlbigoKSA9PiB7XG4gICAgICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbiAgICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nVGVtcGxhdGU6IGZhbHNlIH0pXG4gICAgICAgIH0pXG4gICAgICB9KS5jYXRjaChlcnIgPT4geyBjb25zb2xlLmVycm9yKGVycikgfSlcbiAgICB9IGVsc2UgaWYgKHRoaXMucGFnZUNvbnRleHQuaXNEaWFsb2cpIHtcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBseURpYWxvZ1RlbXBsYXRlKHRoaXMucGFnZUNvbnRleHQuZGlhbG9nSWQsIHRlbXBsYXRlUGFnZUpzb24pLnRoZW4oKCkgPT4ge1xuICAgICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZ1RlbXBsYXRlOiBmYWxzZSB9KVxuICAgICAgICB9KVxuICAgICAgfSkuY2F0Y2goZXJyID0+IHsgY29uc29sZS5lcnJvcihlcnIpIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBseVBhZ2VCb2R5VGVtcGxhdGUodGhpcy5wYWdlQ29udGV4dC5wYWdlSWQsIHRlbXBsYXRlUGFnZUpzb24pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogZmFsc2UgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KS5jYXRjaChlcnIgPT4geyBjb25zb2xlLmVycm9yKGVycikgfSlcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCk6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IGxheW91dCwgY2xhc3NOYW1lLCBzdHlsZSwgbGF5b3V0cywgaXNQYWdlSXRlbSwgbWFpblNpemVNb2RlLCBicm93c2VyU2l6ZU1vZGUgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAobGF5b3V0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgeyhwcm9wczogUGFnZUNvbnRleHRQcm9wcykgPT4ge1xuICAgICAgICAgIHRoaXMucGFnZUNvbnRleHQgPSBwcm9wc1xuICAgICAgICAgIGxldCB0YXJnZXRMYXlvdXQgPSBsYXlvdXRcbiAgICAgICAgICBjb25zdCB2aWV3T25seSA9IGxheW91dHNbYnJvd3NlclNpemVNb2RlXSAhPT0gbGF5b3V0LmlkXG4gICAgICAgICAgaWYgKHZpZXdPbmx5ICYmIHRoaXMubGF5b3V0VHJhbnNmb3JtICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRhcmdldExheW91dCA9IHRoaXMubGF5b3V0VHJhbnNmb3JtKGxheW91dCwgbWFpblNpemVNb2RlLCBicm93c2VyU2l6ZU1vZGUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5sYXlvdXRTZXR0aW5nID0gbG9kYXNoLmFzc2lnbih7fSwgREVGQVVMVF9GSVhfTEFZT1VUX1NFVFRJTkcsIHZpZXdPbmx5ID8ge30gOiBsYXlvdXQuc2V0dGluZylcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gdGFyZ2V0TGF5b3V0Lm9yZGVyID8/IFtdXG5cbiAgICAgICAgICBjb25zdCBtZXJnZWRDbGFzc2VzID0gY2xhc3NOYW1lcygnbGF5b3V0IGZpeGVkLWxheW91dCcsIGNsYXNzTmFtZSwge1xuICAgICAgICAgICAgW0xJTUlURURfQk9VTkRBUllfQ0xBU1NfTkFNRV06IGxheW91dC5zZXR0aW5nPy5sb2NrRGVzY2VuZGFudHNcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IGlzUmVzaXppbmcgPSB0aGlzLnN0YXRlLmRoICE9PSAwIHx8IHRoaXMuc3RhdGUuZHcgIT09IDBcblxuICAgICAgICAgIGNvbnN0IG1lcmdlZFN0eWxlID0ge1xuICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgLi4uc3R5bGVVdGlscy50b0NTU1N0eWxlKHRoaXMubGF5b3V0U2V0dGluZy5zdHlsZSksXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGd1aWRlVmlzaWJsZVN0eWxlID0ge1xuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5zdGF0ZS5pc0RyYWdvdmVyIHx8IGlzUmVzaXppbmcgPyAnYmxvY2snIDogJ25vbmUnLFxuICAgICAgICAgICAgekluZGV4OiBjb250ZW50Lmxlbmd0aCArIDFcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBzaG93QWN0aW9uQmxvY2sgPVxuICAgICAgICAgICAgIXRoaXMuc3RhdGUuaXNMb2FkaW5nVGVtcGxhdGUgJiZcbiAgICAgICAgICAgIHV0aWxzLmlzRW1wdHlMYXlvdXQodGFyZ2V0TGF5b3V0KSAmJlxuICAgICAgICAgICAgIXByb3BzLnZpZXdPbmx5ICYmXG4gICAgICAgICAgICBsYXlvdXQuaWQgPT09IHByb3BzLnJvb3RMYXlvdXRJZFxuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXttZXJnZWRDbGFzc2VzfVxuICAgICAgICAgICAgICByZWY9e2VsID0+ICh0aGlzLnJlZiA9IGVsKX1cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVBY3RpdmF0ZX1cbiAgICAgICAgICAgICAgb25Nb3VzZURvd249e3RoaXMuaGFuZGxlTW91c2VEb3dufVxuICAgICAgICAgICAgICBzdHlsZT17bWVyZ2VkU3R5bGV9XG4gICAgICAgICAgICAgIGRhdGEtbGF5b3V0aWQ9e3RhcmdldExheW91dC5pZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgbW9uaXRvcjogZmFsc2UgfX0+XG4gICAgICAgICAgICAgICAgPE9uZUJ5T25lQW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICBvaWQ9e3RhcmdldExheW91dC5pZH1cbiAgICAgICAgICAgICAgICAgIGRhdGEtbGF5b3V0aWQ9e3RhcmdldExheW91dC5pZH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndHJhaWwtY29udGFpbmVyJ1xuICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8RHJvcEFyZWFcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtkcm9wYXJlYVN0eWxlfVxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRzPXt0aGlzLnByb3BzLmxheW91dHN9XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodERyYWdvdmVyPXshaXNQYWdlSXRlbX1cbiAgICAgICAgICAgICAgICAgICAgb25EcmFnRW50ZXI9e3RoaXMuaGFuZGxlRHJhZ0VudGVyfVxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdMZWF2ZT17dGhpcy5oYW5kbGVEcmFnTGVhdmV9XG4gICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3RoaXMuaGFuZGxlRHJhZ092ZXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uRHJvcD17dGhpcy5oYW5kbGVEcm9wfVxuICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZURyYWdvdmVyRWZmZWN0PXt0aGlzLmhhbmRsZVRvZ2dsZURyYWdvdmVyRWZmZWN0fVxuICAgICAgICAgICAgICAgICAgICBpc1JlcGVhdD17dGhpcy5wcm9wcy5pc1JlcGVhdH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICB7KGNvbnRlbnQgYXMgYW55KS5tYXAoKGxheW91dEl0ZW1JZCwgaW5kZXgpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlSXRlbSh0YXJnZXRMYXlvdXQsIGxheW91dEl0ZW1JZCwgaW5kZXgpXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvT25lQnlPbmVBbmltYXRpb24+XG4gICAgICAgICAgICAgIDwvSW50ZXJzZWN0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICAgICAge3Nob3dBY3Rpb25CbG9jayAmJiAoXG4gICAgICAgICAgICAgICAgPEFjdGlvbkJsb2NrXG4gICAgICAgICAgICAgICAgICBwYWdlQ29udGV4dD17dGhpcy5wYWdlQ29udGV4dH1cbiAgICAgICAgICAgICAgICAgIG9uUGFnZVRlbXBsYXRlU2VsZWN0ZWQ9e3RoaXMuaGFuZGxlUGFnZVRlbXBsYXRlU2VsZWN0ZWR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNMb2FkaW5nVGVtcGxhdGUgJiYgKFxuICAgICAgICAgICAgICAgIDxMb2FkaW5nIHR5cGU9e0xvYWRpbmdUeXBlLlByaW1hcnl9IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxjYW52YXNcbiAgICAgICAgICAgICAgICBjc3M9e2d1aWRlT3ZlcmxheX1cbiAgICAgICAgICAgICAgICBzdHlsZT17Z3VpZGVWaXNpYmxlU3R5bGV9XG4gICAgICAgICAgICAgICAgcmVmPXtlbCA9PiAodGhpcy5jYW52YXNSZWYgPSBlbCl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApXG4gICAgICAgIH19XG4gICAgICA8L1BhZ2VDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufVxuXG4vLyBjb25zdCBEcm9wcGFibGVMYXlvdXQgPSB3aXRoRHJvcCgpKExheW91dCk7XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxTdGF0ZVRvTGF5b3V0UHJvcHMsIHVua25vd24sIExheW91dFByb3BzPih1dGlscy5tYXBTdGF0ZVRvTGF5b3V0UHJvcHMpKExheW91dCBhcyBhbnkpXG4iLCJpbXBvcnQgeyB0eXBlIElNVGhlbWVWYXJpYWJsZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIENhbnZhc1BhbmUgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL2NhbnZhcy1wYW5lJ1xuaW1wb3J0IHtcbiAgdHlwZSBHcmlkbGluZSxcbiAgdHlwZSBSbmREZWx0YSxcbiAgdHlwZSBCQm94R3JpZGxpbmUsXG4gIFNOQVBfVE9MRVJBTkNFXG59IGZyb20gJy4vbW92ZS1ndWlkZS1jb21tb24nXG5cbmZ1bmN0aW9uIGRpc3RhbmNlIChzb3VyY2U6IEdyaWRsaW5lLCB0YXJnZXQ6IEdyaWRsaW5lKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGguYWJzKHRhcmdldC5waXhlbFZhbHVlIC0gc291cmNlLnBpeGVsVmFsdWUpXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdyaWRsaW5lIHNob3VsZCBiZSBpbnZvbHZlZCB3aGVuIGNhbGN1bGF0aW5nIHNuYXBwaW5nIGluIGhvcml6b250YWwgZGlyZWN0aW9uXG4gKiAxLiBEaXN0YW5jZSBpcyBsZXNzIHRoYW4gNCB0aW1lcyBvZiBzbmFwIHRvbGVyYW5jZVxuICogMi4gVW5pdCBzaG91bGQgY29tcGF0aWJsZTpcbiAqICAgMi4xIGJvdGggaW4gcGl4ZWwgYW5kIHVzZSB0aGUgc2FtZSBvcmlnaW5cbiAqICAgMi4yIGJvdGggaW4gcGVyY2VudGFnZVxuICogQHBhcmFtIHNvdXJjZVxuICogQHBhcmFtIHRhcmdldFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZWxhdGVkIChzb3VyY2U6IEdyaWRsaW5lLCB0YXJnZXQ6IEdyaWRsaW5lKTogYm9vbGVhbiB7XG4gIGlmIChkaXN0YW5jZSh0YXJnZXQsIHNvdXJjZSkgPCA0ICogU05BUF9UT0xFUkFOQ0UpIHtcbiAgICBjb25zdCB0YXJnZXRVc2VQZXJjZW50YWdlID0gdGFyZ2V0LnVzZVBlcmNlbnRhZ2VcbiAgICBjb25zdCBzb3VyY2VVc2VQZXJjZW50YWdlID0gc291cmNlLnVzZVBlcmNlbnRhZ2VcbiAgICBpZiAodGFyZ2V0VXNlUGVyY2VudGFnZSA9PT0gc291cmNlVXNlUGVyY2VudGFnZSkge1xuICAgICAgcmV0dXJuIHRhcmdldFVzZVBlcmNlbnRhZ2UgfHwgdGFyZ2V0Lm9yaWdpbiA9PT0gc291cmNlLm9yaWdpblxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lUG9zaXRpb24gKFxuICBzb3VyY2U6IEdyaWRsaW5lLFxuICBkZWx0YTogbnVtYmVyLFxuICB0YXJnZXQ6IEdyaWRsaW5lXG4pOiBib29sZWFuIHtcbiAgaWYgKHNvdXJjZS5waXhlbFZhbHVlICsgZGVsdGEgPT09IHRhcmdldC5waXhlbFZhbHVlKSB7XG4gICAgY29uc3QgdGFyZ2V0VXNlUGVyY2VudGFnZSA9IHRhcmdldC51c2VQZXJjZW50YWdlXG4gICAgY29uc3Qgc291cmNlVXNlUGVyY2VudGFnZSA9IHNvdXJjZS51c2VQZXJjZW50YWdlXG4gICAgaWYgKHRhcmdldFVzZVBlcmNlbnRhZ2UgPT09IHNvdXJjZVVzZVBlcmNlbnRhZ2UpIHtcbiAgICAgIHJldHVybiB0YXJnZXRVc2VQZXJjZW50YWdlIHx8IHRhcmdldC5vcmlnaW4gPT09IHNvdXJjZS5vcmlnaW5cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRSZWxhdGVkIChcbiAgYWN0aXZlSXRlbTogR3JpZGxpbmUsXG4gIGdyaWRsaW5lczogR3JpZGxpbmVbXVxuKTogR3JpZGxpbmVbXSB7XG4gIGNvbnN0IHJlbGF0ZWRMaXN0ID0gZ3JpZGxpbmVzXG4gICAgLmZpbHRlcihpdGVtID0+IGlzUmVsYXRlZChhY3RpdmVJdGVtLCBpdGVtKSlcbiAgICAuc29ydCgoYSwgYikgPT4gZGlzdGFuY2UoYSwgYWN0aXZlSXRlbSkgLSBkaXN0YW5jZShiLCBhY3RpdmVJdGVtKSkgLy8gcHJldmlvdXMgdXNlIHJldmVyc2Ugb3JkZXJcblxuICByZXR1cm4gcmVsYXRlZExpc3Rcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdIb3Jpem9udGFsU25hcExpbmUgKFxuICBhY3RpdmVJdGVtczogR3JpZGxpbmVbXSwgLy8gdG9wLCB5bSBhbmQgYm90dG9tXG4gIG90aGVySXRlbXM6IEdyaWRsaW5lW10sXG4gIGRlbHRhWTogbnVtYmVyLFxuICBjYW52YXNQYW5lOiBDYW52YXNQYW5lLFxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuKTogdm9pZCB7XG4gIGlmIChjYW52YXNQYW5lICE9IG51bGwgJiYgdGhlbWUgIT0gbnVsbCkge1xuICAgIGNhbnZhc1BhbmUuc2V0Q29sb3IodGhlbWUuY29sb3JzLnBhbGV0dGUuZGFuZ2VyWzUwMF0pXG5cbiAgICBhY3RpdmVJdGVtcy5mb3JFYWNoKGFjdGl2ZUl0ZW0gPT4ge1xuICAgICAgaWYgKGFjdGl2ZUl0ZW0gIT0gbnVsbCkge1xuICAgICAgICBsZXQgeG1pbiA9IGFjdGl2ZUl0ZW0uZnJvbVxuICAgICAgICBsZXQgeG1heCA9IGFjdGl2ZUl0ZW0udG9cbiAgICAgICAgbGV0IGhhc1NhbWVQb3NpdGlvbiA9IGZhbHNlXG5cbiAgICAgICAgb3RoZXJJdGVtcy5mb3JFYWNoKG90aGVySXRlbSA9PiB7XG4gICAgICAgICAgaWYgKGlzU2FtZVBvc2l0aW9uKGFjdGl2ZUl0ZW0sIGRlbHRhWSwgb3RoZXJJdGVtKSkge1xuICAgICAgICAgICAgeG1pbiA9IE1hdGgubWluKHhtaW4sIG90aGVySXRlbS5mcm9tKVxuICAgICAgICAgICAgeG1heCA9IE1hdGgubWF4KHhtYXgsIG90aGVySXRlbS50bylcbiAgICAgICAgICAgIGhhc1NhbWVQb3NpdGlvbiA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKGhhc1NhbWVQb3NpdGlvbikge1xuICAgICAgICAgIGNvbnN0IHkgPSBhY3RpdmVJdGVtLnBpeGVsVmFsdWUgKyBkZWx0YVlcbiAgICAgICAgICBjYW52YXNQYW5lLmRyYXdMaW5lKHhtaW4sIHksIHhtYXgsIHkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3SG9yaXpvbnRhbENhbmRpZGF0ZSAoXG4gIHNuYXBJdGVtOiBHcmlkbGluZSxcbiAgY2FudmFzUGFuZTogQ2FudmFzUGFuZSxcbiAgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbik6IHZvaWQge1xuICBpZiAoY2FudmFzUGFuZSAhPSBudWxsICYmIHRoZW1lICE9IG51bGwpIHtcbiAgICBjYW52YXNQYW5lLnNldENvbG9yKHRoZW1lLmNvbG9ycy5wYWxldHRlLmRhbmdlcls1MDBdKVxuICAgIGNhbnZhc1BhbmUuZHJhd0xpbmUoXG4gICAgICBzbmFwSXRlbS5mcm9tLFxuICAgICAgc25hcEl0ZW0ucGl4ZWxWYWx1ZSxcbiAgICAgIHNuYXBJdGVtLnRvLFxuICAgICAgc25hcEl0ZW0ucGl4ZWxWYWx1ZSxcbiAgICAgIHRydWVcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdWZXJ0aWNhbENhbmRpZGF0ZSAoXG4gIHNuYXBJdGVtOiBHcmlkbGluZSxcbiAgY2FudmFzUGFuZTogQ2FudmFzUGFuZSxcbiAgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbik6IHZvaWQge1xuICBpZiAoY2FudmFzUGFuZSAhPSBudWxsICYmIHRoZW1lICE9IG51bGwpIHtcbiAgICBjYW52YXNQYW5lLnNldENvbG9yKHRoZW1lLmNvbG9ycy5wYWxldHRlLmRhbmdlcls1MDBdKVxuICAgIGNhbnZhc1BhbmUuZHJhd0xpbmUoXG4gICAgICBzbmFwSXRlbS5waXhlbFZhbHVlLFxuICAgICAgc25hcEl0ZW0uZnJvbSxcbiAgICAgIHNuYXBJdGVtLnBpeGVsVmFsdWUsXG4gICAgICBzbmFwSXRlbS50byxcbiAgICAgIHRydWVcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdWZXJ0aWNhbFNuYXBMaW5lIChcbiAgYWN0aXZlSXRlbXM6IEdyaWRsaW5lW10sIC8vIGxlZnQsIHhtIGFuZCByaWdodFxuICBvdGhlckl0ZW1zOiBHcmlkbGluZVtdLFxuICBkZWx0YVg6IG51bWJlcixcbiAgY2FudmFzUGFuZTogQ2FudmFzUGFuZSxcbiAgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbik6IHZvaWQge1xuICBpZiAoY2FudmFzUGFuZSAhPSBudWxsICYmIHRoZW1lICE9IG51bGwpIHtcbiAgICBjYW52YXNQYW5lLnNldENvbG9yKHRoZW1lLmNvbG9ycy5wYWxldHRlLmRhbmdlcls1MDBdKVxuXG4gICAgYWN0aXZlSXRlbXMuZm9yRWFjaChhY3RpdmVJdGVtID0+IHtcbiAgICAgIGlmIChhY3RpdmVJdGVtICE9IG51bGwpIHtcbiAgICAgICAgbGV0IHltaW4gPSBhY3RpdmVJdGVtLmZyb21cbiAgICAgICAgbGV0IHltYXggPSBhY3RpdmVJdGVtLnRvXG4gICAgICAgIGxldCBoYXNTYW1lUG9zaXRpb24gPSBmYWxzZVxuXG4gICAgICAgIG90aGVySXRlbXMuZm9yRWFjaChvdGhlckl0ZW0gPT4ge1xuICAgICAgICAgIGlmIChpc1NhbWVQb3NpdGlvbihhY3RpdmVJdGVtLCBkZWx0YVgsIG90aGVySXRlbSkpIHtcbiAgICAgICAgICAgIHltaW4gPSBNYXRoLm1pbih5bWluLCBvdGhlckl0ZW0uZnJvbSlcbiAgICAgICAgICAgIHltYXggPSBNYXRoLm1heCh5bWF4LCBvdGhlckl0ZW0udG8pXG4gICAgICAgICAgICBoYXNTYW1lUG9zaXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChoYXNTYW1lUG9zaXRpb24pIHtcbiAgICAgICAgICBjb25zdCB4ID0gYWN0aXZlSXRlbS5waXhlbFZhbHVlICsgZGVsdGFYXG4gICAgICAgICAgY2FudmFzUGFuZS5kcmF3TGluZSh4LCB5bWluLCB4LCB5bWF4KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc25hcFRvRWRnZSAoXG4gIGFjdGl2ZUl0ZW06IEJCb3hHcmlkbGluZSxcbiAgYmJveEdyaWRsaW5lczogQkJveEdyaWRsaW5lW10sXG4gIGRlbHRhOiBSbmREZWx0YSxcbiAgY2FuU25hcFRvWDogYm9vbGVhbixcbiAgY2FuU25hcFRvWTogYm9vbGVhbixcbiAgY2FudmFzUGFuZT86IENhbnZhc1BhbmUsXG4gIHRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xuKTogeyBkeDogbnVtYmVyLCBkeTogbnVtYmVyIH0ge1xuICBsZXQgZHggPSAwXG4gIGxldCBkeSA9IDBcblxuICBpZiAoIWNhblNuYXBUb1ggJiYgIWNhblNuYXBUb1kpIHtcbiAgICByZXR1cm4geyBkeCwgZHkgfVxuICB9XG5cbiAgbGV0IHZlcnRpY2FsTGluZXMgPSBbXVxuICBsZXQgaG9yaXpvbnRhbExpbmVzID0gW11cblxuICBiYm94R3JpZGxpbmVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgaWYgKGNhblNuYXBUb1gpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgY29uc3QgdiA9IFtpdGVtLmxlZnQsIGl0ZW0ueG0sIGl0ZW0ucmlnaHRdLmZpbHRlcihsaW5lID0+IHtcbiAgICAgICAgaWYgKGxpbmUgIT0gbnVsbCkge1xuICAgICAgICAgIC8vIGZyb20gYW5kIHRvIG1heSBiZSB1bmRlZmluZWQgaWYgaGVpZ2h0IGlzIGF1dG9cbiAgICAgICAgICBsaW5lLmZyb20gPSBpdGVtLnJlY3QudG9wID8/IGl0ZW0ucmVjdC5ib3R0b21cbiAgICAgICAgICBsaW5lLnRvID0gKGl0ZW0ucmVjdC50b3AgPj0gMCAmJiBpdGVtLnJlY3QuYm90dG9tID49IDApID8gaXRlbS5yZWN0LmJvdHRvbSA6IGFjdGl2ZUl0ZW0ucmVjdC50b3BcbiAgICAgICAgICBpZiAoZGVsdGEudyAhPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlbHRhLnggPT09IDBcbiAgICAgICAgICAgICAgPyBsaW5lLnBpeGVsVmFsdWUgPj0gYWN0aXZlSXRlbS5yaWdodD8ucGl4ZWxWYWx1ZVxuICAgICAgICAgICAgICA6IGxpbmUucGl4ZWxWYWx1ZSA8PSBhY3RpdmVJdGVtLmxlZnQ/LnBpeGVsVmFsdWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGRlbHRhLmggIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdmVydGljYWxMaW5lcyA9IHZlcnRpY2FsTGluZXMuY29uY2F0KHYpXG4gICAgfVxuXG4gICAgaWYgKGNhblNuYXBUb1kpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgY29uc3QgaCA9IFtpdGVtLnRvcCwgaXRlbS55bSwgaXRlbS5ib3R0b21dLmZpbHRlcihsaW5lID0+IHtcbiAgICAgICAgaWYgKGxpbmUgIT0gbnVsbCkge1xuICAgICAgICAgIC8vIGZyb20gYW5kIHRvIG1heSBiZSB1bmRlZmluZWQgaWYgd2lkdGggaXMgYXV0b1xuICAgICAgICAgIGxpbmUuZnJvbSA9IGl0ZW0ucmVjdC5sZWZ0ID8/IGl0ZW0ucmVjdC5yaWdodFxuICAgICAgICAgIGxpbmUudG8gPSAoaXRlbS5yZWN0LmxlZnQgPj0gMCAmJiBpdGVtLnJlY3QucmlnaHQgPj0gMCkgPyBpdGVtLnJlY3QucmlnaHQgOiBhY3RpdmVJdGVtLnJlY3QubGVmdFxuICAgICAgICAgIGlmIChkZWx0YS5oICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVsdGEueSA9PT0gMFxuICAgICAgICAgICAgICA/IGxpbmUucGl4ZWxWYWx1ZSA+PSBhY3RpdmVJdGVtLmJvdHRvbT8ucGl4ZWxWYWx1ZVxuICAgICAgICAgICAgICA6IGxpbmUucGl4ZWxWYWx1ZSA8PSBhY3RpdmVJdGVtLnRvcD8ucGl4ZWxWYWx1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoZGVsdGEudyAhPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBob3Jpem9udGFsTGluZXMgPSBob3Jpem9udGFsTGluZXMuY29uY2F0KGgpXG4gICAgfVxuICB9KVxuICAvLyAxLiBob3Jpem9udGFsXG4gIGlmIChjYW5TbmFwVG9YKSB7XG4gICAgY29uc3QgeEVkZ2VzID0gW2FjdGl2ZUl0ZW0ubGVmdCwgYWN0aXZlSXRlbS54bSwgYWN0aXZlSXRlbS5yaWdodF1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB4RWRnZXMuc29tZShncmlkbGluZSA9PiB7XG4gICAgICBpZiAoZ3JpZGxpbmUgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGVzID0gZmluZFJlbGF0ZWQoZ3JpZGxpbmUsIHZlcnRpY2FsTGluZXMpXG4gICAgICAgIGlmIChjYW5kaWRhdGVzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKGNhbnZhc1BhbmUgIT0gbnVsbCAmJiB0aGVtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVzLmZvckVhY2goY2FuZGlkYXRlID0+IHsgZHJhd1ZlcnRpY2FsQ2FuZGlkYXRlKGNhbmRpZGF0ZSwgY2FudmFzUGFuZSwgdGhlbWUpIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbmVhcmVzdCA9IGNhbmRpZGF0ZXNbMF1cbiAgICAgICAgICBpZiAoZGlzdGFuY2UobmVhcmVzdCwgZ3JpZGxpbmUpIDw9IFNOQVBfVE9MRVJBTkNFKSB7XG4gICAgICAgICAgICBkeCA9IG5lYXJlc3QucGl4ZWxWYWx1ZSAtIGdyaWRsaW5lLnBpeGVsVmFsdWVcbiAgICAgICAgICAgIGRyYXdWZXJ0aWNhbFNuYXBMaW5lKHhFZGdlcywgdmVydGljYWxMaW5lcywgZHgsIGNhbnZhc1BhbmUsIHRoZW1lKVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gMi4gdmVydGljYWxcbiAgaWYgKGNhblNuYXBUb1kpIHtcbiAgICBjb25zdCB5RWRnZXMgPSBbYWN0aXZlSXRlbS50b3AsIGFjdGl2ZUl0ZW0ueW0sIGFjdGl2ZUl0ZW0uYm90dG9tXVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHlFZGdlcy5zb21lKGdyaWRsaW5lID0+IHtcbiAgICAgIGlmIChncmlkbGluZSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBmaW5kUmVsYXRlZChncmlkbGluZSwgaG9yaXpvbnRhbExpbmVzKVxuICAgICAgICBpZiAoY2FuZGlkYXRlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChjYW52YXNQYW5lICE9IG51bGwgJiYgdGhlbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgY2FuZGlkYXRlcy5mb3JFYWNoKGNhbmRpZGF0ZSA9PiB7IGRyYXdIb3Jpem9udGFsQ2FuZGlkYXRlKGNhbmRpZGF0ZSwgY2FudmFzUGFuZSwgdGhlbWUpIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbmVhcmVzdCA9IGNhbmRpZGF0ZXNbMF1cbiAgICAgICAgICBpZiAoZGlzdGFuY2UobmVhcmVzdCwgZ3JpZGxpbmUpIDw9IFNOQVBfVE9MRVJBTkNFKSB7XG4gICAgICAgICAgICBkeSA9IG5lYXJlc3QucGl4ZWxWYWx1ZSAtIGdyaWRsaW5lLnBpeGVsVmFsdWVcbiAgICAgICAgICAgIGRyYXdIb3Jpem9udGFsU25hcExpbmUoXG4gICAgICAgICAgICAgIHlFZGdlcyxcbiAgICAgICAgICAgICAgaG9yaXpvbnRhbExpbmVzLFxuICAgICAgICAgICAgICBkeSxcbiAgICAgICAgICAgICAgY2FudmFzUGFuZSxcbiAgICAgICAgICAgICAgdGhlbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiB7IGR4LCBkeSB9XG59XG4iLCJleHBvcnQgY29uc3QgU05BUF9UT0xFUkFOQ0UgPSA1IC8vIHRvbGVyYW5jZSBmb3Igc25hcFxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY3Qge1xuICBsZWZ0OiBudW1iZXJcbiAgcmlnaHQ6IG51bWJlclxuICB3aWR0aDogbnVtYmVyXG4gIHRvcDogbnVtYmVyXG4gIGJvdHRvbTogbnVtYmVyXG4gIGhlaWdodDogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm5kRGVsdGEge1xuICB4OiBudW1iZXJcbiAgeTogbnVtYmVyXG4gIHc6IG51bWJlclxuICBoOiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTbmFwUmVzdWx0IHtcbiAgdG9wOiBib29sZWFuXG4gIGJvdHRvbTogYm9vbGVhblxuICBsZWZ0OiBib29sZWFuXG4gIHJpZ2h0OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZGxpbmUge1xuICB2YWx1ZTogc3RyaW5nIC8vIG9yaWdpbiBmcm9tIHRvcC1sZWZ0IGlmIHVuaXQgaXMgcGVyY2VudGFnZSwgb3RoZXJ3aXNlIGNvdWxkIG9yaWdpbiBmcm9tIGZvdXIgY29ybmVyc1xuICBwaXhlbFZhbHVlOiBudW1iZXJcbiAgdXNlUGVyY2VudGFnZTogYm9vbGVhblxuICBvcmlnaW4/OiBudW1iZXIgLy8gbXVzdCBoYXZlIG9yaWdpbiBpZiB0aGUgdW5pdCBvZiB0aGUgdmFsdWUgaXMgcGl4ZWxcbiAgZnJvbT86IG51bWJlciAvLyBmcm9tIGFuZCB0byBhcmUgdXNlZCB0byBkZXNjcmliZSB0aGUgbGVuZ3RoIG9mIHRoaXMgZ3JpZGxpbmVcbiAgdG8/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBET01SZWN0Tm90UmVhZE9ubHkgZXh0ZW5kcyBET01SZWN0IHtcbiAgYm90dG9tOiBudW1iZXJcbiAgbGVmdDogbnVtYmVyXG4gIHJpZ2h0OiBudW1iZXJcbiAgdG9wOiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCQm94R3JpZGxpbmUge1xuICBpZDogc3RyaW5nXG4gIGxlZnQ/OiBHcmlkbGluZVxuICB4bT86IEdyaWRsaW5lXG4gIHJpZ2h0PzogR3JpZGxpbmVcbiAgdG9wPzogR3JpZGxpbmVcbiAgeW0/OiBHcmlkbGluZVxuICBib3R0b20/OiBHcmlkbGluZVxuICByZWN0OiBQYXJ0aWFsPERPTVJlY3ROb3RSZWFkT25seT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCQm94R3JpZGxpbmVOb2RlIHtcbiAgdmFsdWU6IEJCb3hHcmlkbGluZVxuICBuZXh0PzogQkJveEdyaWRsaW5lTm9kZVxufVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBCb3VuZGluZ0JveCxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICB0eXBlIElNTGF5b3V0SnNvbixcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxuICB0eXBlIElNQm91bmRpbmdCb3gsXG4gIHV0aWxzIGFzIGppbXVVdGlsc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQge1xuICB1dGlscyxcbiAgdHlwZSBGaXhlZExheW91dEl0ZW1TZXR0aW5nLFxuICBMYXlvdXRJdGVtU2l6ZU1vZGVzXG59IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IHR5cGUgQ2FudmFzUGFuZSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvY2FudmFzLXBhbmUnXG5pbXBvcnQgeyB0eXBlIEdyaWRsaW5lLCB0eXBlIEJCb3hHcmlkbGluZSwgdHlwZSBSbmREZWx0YSwgdHlwZSBSZWN0IH0gZnJvbSAnLi9tb3ZlLWd1aWRlLWNvbW1vbidcbmltcG9ydCB7IHNuYXBCeURpc3RhbmNlIH0gZnJvbSAnLi9tb3ZlLXNwYWNlLWd1aWRlJ1xuaW1wb3J0IHsgc25hcFRvRWRnZSB9IGZyb20gJy4vbW92ZS1lZGdlLWd1aWRlJ1xuaW1wb3J0IHsgaXNSVEwgfSBmcm9tICdqaW11LWxheW91dHMvbGliL3V0aWxzJ1xuXG5jb25zdCBtaW5TaXplID0gMTZcblxuZXhwb3J0IGludGVyZmFjZSBCQm94VW5pdHMge1xuICBsZWZ0PzogJ3B4JyB8ICclJ1xuICByaWdodD86ICdweCcgfCAnJSdcbiAgdG9wPzogJ3B4JyB8ICclJ1xuICBib3R0b20/OiAncHgnIHwgJyUnXG4gIHdpZHRoPzogJ3B4JyB8ICclJ1xuICBoZWlnaHQ/OiAncHgnIHwgJyUnXG59XG5cbmV4cG9ydCB0eXBlIEl0ZW1DbGllbnRSZWN0ID0gUmVjdCAmIHsgdW5pdHM6IEJCb3hVbml0cyB9XG5cbmV4cG9ydCBjb25zdCBlbnVtIEZpeGVkU2lkZXMge1xuICBTdGFydCxcbiAgRW5kLFxuICBOb25lXG59XG5cbmZ1bmN0aW9uIGdyaWRsaW5lU290cmVyIChhOiBHcmlkbGluZSwgYjogR3JpZGxpbmUpOiBudW1iZXIge1xuICByZXR1cm4gYS5waXhlbFZhbHVlIC0gYi5waXhlbFZhbHVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCQm94VW5pdHMgKGJib3g6IEJvdW5kaW5nQm94LCBydGwgPSBmYWxzZSk6IEJCb3hVbml0cyB7XG4gIGNvbnN0IHJlc3VsdDogQkJveFVuaXRzID0ge31cbiAgY29uc3QgYWxsUHJvcHMgPSBbJ2xlZnQnLCAncmlnaHQnLCAnd2lkdGgnLCAndG9wJywgJ2JvdHRvbScsICdoZWlnaHQnXVxuXG4gIGFsbFByb3BzLmZvckVhY2gocHJvcCA9PiB7XG4gICAgaWYgKGJib3g/Lltwcm9wXSAhPSBudWxsKSB7XG4gICAgICByZXN1bHRbcHJvcF0gPSB1dGlscy5pc1BlcmNlbnRhZ2UoYmJveFtwcm9wXSkgPyAnJScgOiAncHgnXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtwcm9wXSA9ICclJyAvLyBVc2UgcGVyY2VudGFnZSBieSBkZWZhdWx0XG4gICAgfVxuICB9KVxuICBpZiAocnRsKSB7IC8vIHN3YXAgbGVmdCBhbmQgcmlnaHQgaW4gUlRMXG4gICAgY29uc3QgdGVtcCA9IHJlc3VsdC5sZWZ0XG4gICAgcmVzdWx0LmxlZnQgPSByZXN1bHQucmlnaHRcbiAgICByZXN1bHQucmlnaHQgPSB0ZW1wXG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd1Bvc2l0aW9uIChcbiAgaXRlbVJlY3Q6IEl0ZW1DbGllbnRSZWN0LFxuICBjb250YWluZXJSZWN0OiBSZWN0LFxuICBjYW52YXNQYW5lOiBDYW52YXNQYW5lXG4pOiB2b2lkIHtcbiAgY29uc3QgcmlnaHQgPSBjb250YWluZXJSZWN0LndpZHRoIC0gKGl0ZW1SZWN0LmxlZnQgKyBpdGVtUmVjdC53aWR0aClcbiAgY29uc3QgYm90dG9tID0gY29udGFpbmVyUmVjdC5oZWlnaHQgLSAoaXRlbVJlY3QudG9wICsgaXRlbVJlY3QuaGVpZ2h0KVxuICBjb25zdCBsZWZ0VmFsdWUgPVxuICAgIGl0ZW1SZWN0LnVuaXRzLmxlZnQgPT09ICdweCdcbiAgICAgID8gamltdVV0aWxzLmZvcm1hdFBpeGVsTnVtYmVyKGAke01hdGgucm91bmQoaXRlbVJlY3QubGVmdCl9cHhgKVxuICAgICAgOiBqaW11VXRpbHMuZm9ybWF0UGVyY2VudGFnZU51bWJlcih1dGlscy50b1JhdGlvKGl0ZW1SZWN0LmxlZnQsIGNvbnRhaW5lclJlY3Qud2lkdGgpKVxuICBjb25zdCByaWdodFZhbHVlID1cbiAgICBpdGVtUmVjdC51bml0cy5yaWdodCA9PT0gJ3B4J1xuICAgICAgPyBqaW11VXRpbHMuZm9ybWF0UGl4ZWxOdW1iZXIoYCR7TWF0aC5yb3VuZChyaWdodCl9cHhgKVxuICAgICAgOiBqaW11VXRpbHMuZm9ybWF0UGVyY2VudGFnZU51bWJlcih1dGlscy50b1JhdGlvKHJpZ2h0LCBjb250YWluZXJSZWN0LndpZHRoKSlcbiAgY29uc3QgdG9wVmFsdWUgPVxuICAgIGl0ZW1SZWN0LnVuaXRzLnRvcCA9PT0gJ3B4J1xuICAgICAgPyBqaW11VXRpbHMuZm9ybWF0UGl4ZWxOdW1iZXIoYCR7TWF0aC5yb3VuZChpdGVtUmVjdC50b3ApfXB4YClcbiAgICAgIDogamltdVV0aWxzLmZvcm1hdFBlcmNlbnRhZ2VOdW1iZXIodXRpbHMudG9SYXRpbyhpdGVtUmVjdC50b3AsIGNvbnRhaW5lclJlY3QuaGVpZ2h0KSlcbiAgY29uc3QgYm90dG9tVmFsdWUgPVxuICAgIGl0ZW1SZWN0LnVuaXRzLmJvdHRvbSA9PT0gJ3B4J1xuICAgICAgPyBqaW11VXRpbHMuZm9ybWF0UGl4ZWxOdW1iZXIoYCR7TWF0aC5yb3VuZChib3R0b20pfXB4YClcbiAgICAgIDogamltdVV0aWxzLmZvcm1hdFBlcmNlbnRhZ2VOdW1iZXIodXRpbHMudG9SYXRpbyhib3R0b20sIGNvbnRhaW5lclJlY3QuaGVpZ2h0KSlcblxuICBpZiAoaXRlbVJlY3QubGVmdCA8PSByaWdodCkge1xuICAgIGlmIChpdGVtUmVjdC50b3AgPD0gYm90dG9tKSB7XG4gICAgICAvLyB0b3AtbGVmdFxuICAgICAgY2FudmFzUGFuZS5kcmF3TGluZShcbiAgICAgICAgMCxcbiAgICAgICAgaXRlbVJlY3QudG9wLFxuICAgICAgICBpdGVtUmVjdC5sZWZ0LFxuICAgICAgICBpdGVtUmVjdC50b3AsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBsZWZ0VmFsdWVcbiAgICAgIClcbiAgICAgIGNhbnZhc1BhbmUuZHJhd0xpbmUoXG4gICAgICAgIGl0ZW1SZWN0LmxlZnQsXG4gICAgICAgIDAsXG4gICAgICAgIGl0ZW1SZWN0LmxlZnQsXG4gICAgICAgIGl0ZW1SZWN0LnRvcCxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHRvcFZhbHVlXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICBjYW52YXNQYW5lLmRyYXdMaW5lKFxuICAgICAgICAwLFxuICAgICAgICBpdGVtUmVjdC50b3AgKyBpdGVtUmVjdC5oZWlnaHQsXG4gICAgICAgIGl0ZW1SZWN0LmxlZnQsXG4gICAgICAgIGl0ZW1SZWN0LnRvcCArIGl0ZW1SZWN0LmhlaWdodCxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGxlZnRWYWx1ZVxuICAgICAgKVxuICAgICAgY2FudmFzUGFuZS5kcmF3TGluZShcbiAgICAgICAgaXRlbVJlY3QubGVmdCxcbiAgICAgICAgaXRlbVJlY3QudG9wICsgaXRlbVJlY3QuaGVpZ2h0LFxuICAgICAgICBpdGVtUmVjdC5sZWZ0LFxuICAgICAgICBjb250YWluZXJSZWN0LmhlaWdodCxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGJvdHRvbVZhbHVlXG4gICAgICApXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChpdGVtUmVjdC50b3AgPD0gYm90dG9tKSB7XG4gICAgICAvLyB0b3AtcmlnaHRcbiAgICAgIGNhbnZhc1BhbmUuZHJhd0xpbmUoXG4gICAgICAgIGl0ZW1SZWN0LmxlZnQgKyBpdGVtUmVjdC53aWR0aCxcbiAgICAgICAgaXRlbVJlY3QudG9wLFxuICAgICAgICBjb250YWluZXJSZWN0LndpZHRoLFxuICAgICAgICBpdGVtUmVjdC50b3AsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICByaWdodFZhbHVlXG4gICAgICApXG4gICAgICBjYW52YXNQYW5lLmRyYXdMaW5lKFxuICAgICAgICBpdGVtUmVjdC5sZWZ0ICsgaXRlbVJlY3Qud2lkdGgsXG4gICAgICAgIDAsXG4gICAgICAgIGl0ZW1SZWN0LmxlZnQgKyBpdGVtUmVjdC53aWR0aCxcbiAgICAgICAgaXRlbVJlY3QudG9wLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdG9wVmFsdWVcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gYm90dG9tLXJpZ2h0XG4gICAgICBjYW52YXNQYW5lLmRyYXdMaW5lKFxuICAgICAgICBpdGVtUmVjdC5sZWZ0ICsgaXRlbVJlY3Qud2lkdGgsXG4gICAgICAgIGl0ZW1SZWN0LnRvcCArIGl0ZW1SZWN0LmhlaWdodCxcbiAgICAgICAgY29udGFpbmVyUmVjdC53aWR0aCxcbiAgICAgICAgaXRlbVJlY3QudG9wICsgaXRlbVJlY3QuaGVpZ2h0LFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgcmlnaHRWYWx1ZVxuICAgICAgKVxuICAgICAgY2FudmFzUGFuZS5kcmF3TGluZShcbiAgICAgICAgaXRlbVJlY3QubGVmdCArIGl0ZW1SZWN0LndpZHRoLFxuICAgICAgICBpdGVtUmVjdC50b3AgKyBpdGVtUmVjdC5oZWlnaHQsXG4gICAgICAgIGl0ZW1SZWN0LmxlZnQgKyBpdGVtUmVjdC53aWR0aCxcbiAgICAgICAgY29udGFpbmVyUmVjdC5oZWlnaHQsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBib3R0b21WYWx1ZVxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEdyaWRsaW5lIChcbiAgZ3JpZGxpbmU6IEdyaWRsaW5lLFxuICBvcmlnaW46IG51bWJlcixcbiAgc25hcFRvUGVyY2VudGFnZTogYm9vbGVhblxuKTogYm9vbGVhbiB7XG4gIGlmIChncmlkbGluZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgY29uc3QgeyBvcmlnaW46IHBvc09yaWdpbiwgdmFsdWUgfSA9IGdyaWRsaW5lXG4gIGlmIChzbmFwVG9QZXJjZW50YWdlKSB7XG4gICAgLy8gcGVyY2VudGFnZSBjb3VsZCBpZ25vcmUgdGhlIG9yaWdpbiwgc2luY2UgYWxsIHZhbHVlIG9mIGdyaWRsaW5lIGlzIG9yaWdpbiBmcm9tIHRvcC1sZWZ0XG4gICAgcmV0dXJuIHV0aWxzLmlzUGVyY2VudGFnZSh2YWx1ZSlcbiAgfVxuICByZXR1cm4gcG9zT3JpZ2luID09PSBvcmlnaW4gJiYgdXRpbHMuaXNQZXJjZW50YWdlKHZhbHVlKSA9PT0gc25hcFRvUGVyY2VudGFnZVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBpdGVtUmVjdCBzaG91bGQgc25hcCB0byBwaXhlbCB2YWx1ZSBvciBwZXJjZW50YWdlIHZhbHVlXG4gKiBAcGFyYW0gYmJveCBUaGUgYmJveCBwcm9wZXJ0eSBvZiB0aGUgaXRlbVJlY3QuIE9ubHkgZXhpc3RzIHdoZW4gZHJhZ2dpbmcgb3IgcmVzaXppbmcgYSBpdGVtIGFscmVhZHkgaW4gdGhlIGxheW91dFxuICogQHBhcmFtIGl0ZW1SZWN0IFJlY3QgaW4gcGl4ZWwgb2YgdGhlIGRyYWdnaW5nL3Jlc2l6aW5nIGxheW91dCBpdGVtXG4gKiBAcGFyYW0gY29udGFpbmVyV2lkdGhcbiAqIEBwYXJhbSBjb250YWluZXJIZWlnaHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU25hcFRvUGVyY2VudGFnZSAoXG4gIGJib3g6IElNQm91bmRpbmdCb3gsXG4gIGl0ZW1SZWN0OiBSZWN0LFxuICBjb250YWluZXJXaWR0aDogbnVtYmVyLFxuICBjb250YWluZXJIZWlnaHQ6IG51bWJlclxuKTogeyBsZWZ0UmlnaHQ6IGJvb2xlYW4sIHRvcEJvdHRvbTogYm9vbGVhbiB9IHtcbiAgY29uc3QgcmVzdWx0ID0geyBsZWZ0UmlnaHQ6IHRydWUsIHRvcEJvdHRvbTogdHJ1ZSB9XG4gIGlmIChiYm94ID09IG51bGwpIHtcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbiAgY29uc3QgYmJveFVuaXRzID0gZ2V0QkJveFVuaXRzKGJib3gsIGlzUlRMKCkpXG5cbiAgY29uc3QgW3hPcmlnaW4sIHlPcmlnaW5dID0gZ2V0UmVjdE9yaWdpbihpdGVtUmVjdCwge1xuICAgIHdpZHRoOiBjb250YWluZXJXaWR0aCxcbiAgICBoZWlnaHQ6IGNvbnRhaW5lckhlaWdodFxuICB9KVxuICByZXN1bHQubGVmdFJpZ2h0ID1cbiAgICB4T3JpZ2luID09PSAwID8gYmJveFVuaXRzLmxlZnQgPT09ICclJyA6IGJib3hVbml0cy5yaWdodCA9PT0gJyUnXG4gIHJlc3VsdC50b3BCb3R0b20gPVxuICAgIHlPcmlnaW4gPT09IDAgPyBiYm94VW5pdHMudG9wID09PSAnJScgOiBiYm94VW5pdHMuYm90dG9tID09PSAnJSdcblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWN0T3JpZ2luIChcbiAgaXRlbVJlY3Q6IFJlY3QsXG4gIGNvbnRhaW5lclJlY3Q6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfVxuKTogW251bWJlciwgbnVtYmVyXSB7XG4gIGNvbnN0IHRvcCA9IGl0ZW1SZWN0LnRvcFxuICBjb25zdCBib3R0b20gPSBjb250YWluZXJSZWN0LmhlaWdodCAtIChpdGVtUmVjdC50b3AgKyBpdGVtUmVjdC5oZWlnaHQpXG4gIGNvbnN0IGxlZnQgPSBpdGVtUmVjdC5sZWZ0XG4gIGNvbnN0IHJpZ2h0ID0gY29udGFpbmVyUmVjdC53aWR0aCAtIChpdGVtUmVjdC5sZWZ0ICsgaXRlbVJlY3Qud2lkdGgpXG4gIGNvbnN0IHhPcmlnaW4gPSByaWdodCA8IGxlZnQgPyAxIDogMFxuICBjb25zdCB5T3JpZ2luID0gYm90dG9tIDwgdG9wID8gMSA6IDBcbiAgcmV0dXJuIFt4T3JpZ2luLCB5T3JpZ2luXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QkJveE9yaWdpbiAoXG4gIHNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmdcbik6IFtudW1iZXIsIG51bWJlcl0ge1xuICBsZXQgeE9yaWdpbiA9IE5hTlxuICBsZXQgeU9yaWdpbiA9IE5hTlxuICBpZiAoc2V0dGluZz8uYXV0b1Byb3BzPy53aWR0aCAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgeE9yaWdpbiA9IHNldHRpbmc/LmF1dG9Qcm9wcz8ubGVmdCA/IDEgOiAwXG4gIH1cbiAgaWYgKHNldHRpbmc/LmF1dG9Qcm9wcz8uaGVpZ2h0ICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICB5T3JpZ2luID0gc2V0dGluZz8uYXV0b1Byb3BzPy50b3AgPyAxIDogMFxuICB9XG4gIHJldHVybiBbeE9yaWdpbiwgeU9yaWdpbl1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZU9yaWdpbiAoXG4gIGl0ZW1SZWN0OiBSZWN0LFxuICBzZXR0aW5nOiBGaXhlZExheW91dEl0ZW1TZXR0aW5nLFxuICBjb250YWluZXJXaWR0aDogbnVtYmVyLFxuICBjb250YWluZXJIZWlnaHQ6IG51bWJlclxuKTogW2Jvb2xlYW4sIGJvb2xlYW5dIHtcbiAgY29uc3QgY29udGFpbmVyUmVjdCA9IHsgd2lkdGg6IGNvbnRhaW5lcldpZHRoLCBoZWlnaHQ6IGNvbnRhaW5lckhlaWdodCB9XG4gIGNvbnN0IHJlY3RPcmlnaW4gPSBnZXRSZWN0T3JpZ2luKGl0ZW1SZWN0LCBjb250YWluZXJSZWN0KVxuICBjb25zdCBiYm94T3JpZ2luID0gZ2V0QkJveE9yaWdpbihzZXR0aW5nKVxuXG4gIHJldHVybiBbXG4gICAgcmVjdE9yaWdpblswXSA9PT0gYmJveE9yaWdpblswXSB8fCBpc05hTihiYm94T3JpZ2luWzBdKSxcbiAgICByZWN0T3JpZ2luWzFdID09PSBiYm94T3JpZ2luWzFdIHx8IGlzTmFOKGJib3hPcmlnaW5bMV0pXG4gIF1cbn1cblxuZnVuY3Rpb24gZ2V0UGl4ZWxWYWx1ZSAodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgdG90YWw6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiB1dGlscy5pc1BlcmNlbnRhZ2UodmFsdWUpXG4gICAgPyBNYXRoLnJvdW5kKHV0aWxzLmZyb21SYXRpbyh2YWx1ZSwgdG90YWwpKVxuICAgIDogTWF0aC5yb3VuZChwYXJzZUZsb2F0KHZhbHVlKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY3RPZkxheW91dEl0ZW0gKFxuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uLFxuICBjb250YWluZXJXaWR0aDogbnVtYmVyLFxuICBjb250YWluZXJIZWlnaHQ6IG51bWJlclxuKTogUGFydGlhbDxSZWN0PiB7XG4gIGNvbnN0IHJlY3Q6IFJlY3QgPSB7fSBhcyBhbnlcbiAgY29uc3QgYmJveDogSU1Cb3VuZGluZ0JveCA9IGxheW91dEl0ZW0uYmJveCA/PyAoe30gYXMgYW55KVxuICBjb25zdCBhdXRvUHJvcHM6IHsgbGVmdDogYm9vbGVhbiwgdG9wOiBib29sZWFuLCB3aWR0aDogTGF5b3V0SXRlbVNpemVNb2RlcywgaGVpZ2h0OiBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gPSBsYXlvdXRJdGVtLnNldHRpbmc/LmF1dG9Qcm9wcyA/PyB7fVxuXG4gIGlmIChhdXRvUHJvcHMud2lkdGggPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIHJlY3QubGVmdCA9IGdldFBpeGVsVmFsdWUoYmJveC5sZWZ0LCBjb250YWluZXJXaWR0aClcbiAgICByZWN0LnJpZ2h0ID0gY29udGFpbmVyV2lkdGggLSBnZXRQaXhlbFZhbHVlKGJib3gucmlnaHQsIGNvbnRhaW5lcldpZHRoKVxuICAgIHJlY3Qud2lkdGggPSByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0XG4gIH0gZWxzZSBpZiAoYXV0b1Byb3BzLndpZHRoID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG8pIHtcbiAgICBpZiAoYXV0b1Byb3BzLmxlZnQpIHtcbiAgICAgIHJlY3QucmlnaHQgPSBjb250YWluZXJXaWR0aCAtIGdldFBpeGVsVmFsdWUoYmJveC5yaWdodCwgY29udGFpbmVyV2lkdGgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY3QubGVmdCA9IGdldFBpeGVsVmFsdWUoYmJveC5sZWZ0LCBjb250YWluZXJXaWR0aClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVjdC53aWR0aCA9IGdldFBpeGVsVmFsdWUoYmJveC53aWR0aCwgY29udGFpbmVyV2lkdGgpXG4gICAgaWYgKGF1dG9Qcm9wcy5sZWZ0KSB7XG4gICAgICByZWN0LnJpZ2h0ID0gY29udGFpbmVyV2lkdGggLSBnZXRQaXhlbFZhbHVlKGJib3gucmlnaHQsIGNvbnRhaW5lcldpZHRoKVxuICAgICAgcmVjdC5sZWZ0ID0gcmVjdC5yaWdodCAtIHJlY3Qud2lkdGhcbiAgICB9IGVsc2Uge1xuICAgICAgcmVjdC5sZWZ0ID0gZ2V0UGl4ZWxWYWx1ZShiYm94LmxlZnQsIGNvbnRhaW5lcldpZHRoKVxuICAgICAgcmVjdC5yaWdodCA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGhcbiAgICB9XG4gIH1cblxuICBpZiAoYXV0b1Byb3BzLmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgcmVjdC50b3AgPSBnZXRQaXhlbFZhbHVlKGJib3gudG9wLCBjb250YWluZXJIZWlnaHQpXG4gICAgcmVjdC5ib3R0b20gPSBjb250YWluZXJIZWlnaHQgLSBnZXRQaXhlbFZhbHVlKGJib3guYm90dG9tLCBjb250YWluZXJIZWlnaHQpXG4gICAgcmVjdC5oZWlnaHQgPSByZWN0LmJvdHRvbSAtIHJlY3QudG9wXG4gIH0gZWxzZSBpZiAoYXV0b1Byb3BzLmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvKSB7XG4gICAgaWYgKGF1dG9Qcm9wcy50b3ApIHtcbiAgICAgIHJlY3QuYm90dG9tID1cbiAgICAgICAgY29udGFpbmVySGVpZ2h0IC0gZ2V0UGl4ZWxWYWx1ZShiYm94LmJvdHRvbSwgY29udGFpbmVySGVpZ2h0KVxuICAgIH0gZWxzZSB7XG4gICAgICByZWN0LnRvcCA9IGdldFBpeGVsVmFsdWUoYmJveC50b3AsIGNvbnRhaW5lckhlaWdodClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVjdC5oZWlnaHQgPSBnZXRQaXhlbFZhbHVlKGJib3guaGVpZ2h0LCBjb250YWluZXJIZWlnaHQpXG4gICAgaWYgKGF1dG9Qcm9wcy50b3ApIHtcbiAgICAgIHJlY3QuYm90dG9tID1cbiAgICAgICAgY29udGFpbmVySGVpZ2h0IC0gZ2V0UGl4ZWxWYWx1ZShiYm94LmJvdHRvbSwgY29udGFpbmVySGVpZ2h0KVxuICAgICAgcmVjdC50b3AgPSByZWN0LmJvdHRvbSAtIHJlY3QuaGVpZ2h0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY3QudG9wID0gZ2V0UGl4ZWxWYWx1ZShiYm94LnRvcCwgY29udGFpbmVySGVpZ2h0KVxuICAgICAgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlY3Rcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyaWRsaW5lT2ZBY3RpdmVJdGVtIChcbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvbixcbiAgaXRlbVJlY3Q6IFJlY3QsXG4gIGNvbnRhaW5lcldpZHRoOiBudW1iZXIsXG4gIGNvbnRhaW5lckhlaWdodDogbnVtYmVyLFxuICBkZWx0YT86IFJuZERlbHRhXG4pOiBCQm94R3JpZGxpbmUge1xuICBjb25zdCB7IHg6IGR4LCB5OiBkeSwgdzogZHcsIGg6IGRoIH0gPSBkZWx0YSA/PyB7IHg6IDAsIHk6IDAsIHc6IDAsIGg6IDAgfVxuXG4gIGNvbnN0IHNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmcgPSBsYXlvdXRJdGVtPy5zZXR0aW5nID8/IHt9XG4gIGNvbnN0IGN1cnJlbnRSZWN0OiBSZWN0ID0ge1xuICAgIGxlZnQ6IE1hdGgucm91bmQoaXRlbVJlY3QubGVmdCArIGR4KSxcbiAgICB3aWR0aDogTWF0aC5yb3VuZChpdGVtUmVjdC53aWR0aCArIGR3KSxcbiAgICByaWdodDogMCxcbiAgICB0b3A6IE1hdGgucm91bmQoaXRlbVJlY3QudG9wICsgZHkpLFxuICAgIGhlaWdodDogTWF0aC5yb3VuZChpdGVtUmVjdC5oZWlnaHQgKyBkaCksXG4gICAgYm90dG9tOiAwXG4gIH1cbiAgY3VycmVudFJlY3QucmlnaHQgPSBjdXJyZW50UmVjdC5sZWZ0ICsgY3VycmVudFJlY3Qud2lkdGhcbiAgY3VycmVudFJlY3QuYm90dG9tID0gY3VycmVudFJlY3QudG9wICsgY3VycmVudFJlY3QuaGVpZ2h0XG4gIGNvbnN0IHJlc3VsdDogQkJveEdyaWRsaW5lID0geyBpZDogbGF5b3V0SXRlbT8uaWQsIHJlY3Q6IGN1cnJlbnRSZWN0IH1cblxuICBjb25zdCByZWN0T3JpZ2luID0gZ2V0UmVjdE9yaWdpbihjdXJyZW50UmVjdCwge1xuICAgIHdpZHRoOiBjb250YWluZXJXaWR0aCxcbiAgICBoZWlnaHQ6IGNvbnRhaW5lckhlaWdodFxuICB9KVxuICBjb25zdCBiYm94VW5pdHMgPSBnZXRCQm94VW5pdHMobGF5b3V0SXRlbT8uYmJveCwgaXNSVEwoKSlcbiAgaWYgKGlzUlRMKCkpIHtcbiAgICBjb25zdCBsZWZ0ID0gYmJveFVuaXRzLmxlZnRcbiAgICBiYm94VW5pdHMubGVmdCA9IGJib3hVbml0cy5yaWdodFxuICAgIGJib3hVbml0cy5yaWdodCA9IGxlZnRcbiAgfVxuICBpZiAoc2V0dGluZy5hdXRvUHJvcHM/LndpZHRoID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICByZXN1bHQubGVmdCA9IHtcbiAgICAgIHZhbHVlOiBgMSR7YmJveFVuaXRzLmxlZnR9YCxcbiAgICAgIHBpeGVsVmFsdWU6IGN1cnJlbnRSZWN0LmxlZnQsXG4gICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMubGVmdCA9PT0gJyUnLFxuICAgICAgb3JpZ2luOiByZWN0T3JpZ2luWzBdLFxuICAgICAgZnJvbTogY3VycmVudFJlY3QudG9wLFxuICAgICAgdG86IGN1cnJlbnRSZWN0LmJvdHRvbVxuICAgIH1cbiAgICByZXN1bHQucmlnaHQgPSB7XG4gICAgICB2YWx1ZTogYDEke2Jib3hVbml0cy5yaWdodH1gLFxuICAgICAgcGl4ZWxWYWx1ZTogY3VycmVudFJlY3QubGVmdCArIGN1cnJlbnRSZWN0LndpZHRoLFxuICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLnJpZ2h0ID09PSAnJScsXG4gICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICBmcm9tOiBjdXJyZW50UmVjdC50b3AsXG4gICAgICB0bzogY3VycmVudFJlY3QuYm90dG9tXG4gICAgfVxuICB9IGVsc2UgaWYgKHJlY3RPcmlnaW5bMF0gPT09IDApIHtcbiAgICByZXN1bHQubGVmdCA9IHtcbiAgICAgIHZhbHVlOiBgMSR7YmJveFVuaXRzLmxlZnR9YCxcbiAgICAgIHBpeGVsVmFsdWU6IGN1cnJlbnRSZWN0LmxlZnQsXG4gICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMubGVmdCA9PT0gJyUnLFxuICAgICAgb3JpZ2luOiByZWN0T3JpZ2luWzBdLFxuICAgICAgZnJvbTogY3VycmVudFJlY3QudG9wLFxuICAgICAgdG86IGN1cnJlbnRSZWN0LmJvdHRvbVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBiYm94VW5pdHMud2lkdGggPT09IGJib3hVbml0cy5sZWZ0ICYmXG4gICAgICBzZXR0aW5nLmF1dG9Qcm9wcz8ud2lkdGggIT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICAgICkge1xuICAgICAgcmVzdWx0LnhtID0ge1xuICAgICAgICB2YWx1ZTogYDEke2Jib3hVbml0cy5sZWZ0fWAsXG4gICAgICAgIHBpeGVsVmFsdWU6IGN1cnJlbnRSZWN0LmxlZnQgKyBjdXJyZW50UmVjdC53aWR0aCAvIDIsXG4gICAgICAgIHVzZVBlcmNlbnRhZ2U6IGJib3hVbml0cy5sZWZ0ID09PSAnJScsXG4gICAgICAgIG9yaWdpbjogcmVjdE9yaWdpblswXSxcbiAgICAgICAgZnJvbTogY3VycmVudFJlY3QudG9wLFxuICAgICAgICB0bzogY3VycmVudFJlY3QuYm90dG9tXG4gICAgICB9XG4gICAgICByZXN1bHQucmlnaHQgPSB7XG4gICAgICAgIHZhbHVlOiBgMSR7YmJveFVuaXRzLmxlZnR9YCxcbiAgICAgICAgcGl4ZWxWYWx1ZTogY3VycmVudFJlY3QubGVmdCArIGN1cnJlbnRSZWN0LndpZHRoLFxuICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMubGVmdCA9PT0gJyUnLFxuICAgICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMF0sXG4gICAgICAgIGZyb206IGN1cnJlbnRSZWN0LnRvcCxcbiAgICAgICAgdG86IGN1cnJlbnRSZWN0LmJvdHRvbVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXN1bHQucmlnaHQgPSB7XG4gICAgICB2YWx1ZTogYDEke2Jib3hVbml0cy5yaWdodH1gLFxuICAgICAgcGl4ZWxWYWx1ZTogY3VycmVudFJlY3QubGVmdCArIGN1cnJlbnRSZWN0LndpZHRoLFxuICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLnJpZ2h0ID09PSAnJScsXG4gICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMF0sXG4gICAgICBmcm9tOiBjdXJyZW50UmVjdC50b3AsXG4gICAgICB0bzogY3VycmVudFJlY3QuYm90dG9tXG4gICAgfVxuICAgIGlmIChcbiAgICAgIGJib3hVbml0cy53aWR0aCA9PT0gYmJveFVuaXRzLnJpZ2h0ICYmXG4gICAgICBzZXR0aW5nLmF1dG9Qcm9wcz8ud2lkdGggIT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICAgICkge1xuICAgICAgcmVzdWx0LnhtID0ge1xuICAgICAgICB2YWx1ZTogYDEke2Jib3hVbml0cy5yaWdodH1gLFxuICAgICAgICBwaXhlbFZhbHVlOiBjdXJyZW50UmVjdC5sZWZ0ICsgY3VycmVudFJlY3Qud2lkdGggLyAyLFxuICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMucmlnaHQgPT09ICclJyxcbiAgICAgICAgb3JpZ2luOiByZWN0T3JpZ2luWzBdLFxuICAgICAgICBmcm9tOiBjdXJyZW50UmVjdC50b3AsXG4gICAgICAgIHRvOiBjdXJyZW50UmVjdC5ib3R0b21cbiAgICAgIH1cbiAgICAgIHJlc3VsdC5sZWZ0ID0ge1xuICAgICAgICB2YWx1ZTogYDEke2Jib3hVbml0cy5yaWdodH1gLFxuICAgICAgICBwaXhlbFZhbHVlOiBjdXJyZW50UmVjdC5sZWZ0LFxuICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMucmlnaHQgPT09ICclJyxcbiAgICAgICAgb3JpZ2luOiByZWN0T3JpZ2luWzBdLFxuICAgICAgICBmcm9tOiBjdXJyZW50UmVjdC50b3AsXG4gICAgICAgIHRvOiBjdXJyZW50UmVjdC5ib3R0b21cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgcmVzdWx0LnRvcCA9IHtcbiAgICAgIHZhbHVlOiBgMSR7YmJveFVuaXRzLnRvcH1gLFxuICAgICAgcGl4ZWxWYWx1ZTogY3VycmVudFJlY3QudG9wLFxuICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLnRvcCA9PT0gJyUnLFxuICAgICAgb3JpZ2luOiByZWN0T3JpZ2luWzFdLFxuICAgICAgZnJvbTogY3VycmVudFJlY3QubGVmdCxcbiAgICAgIHRvOiBjdXJyZW50UmVjdC5yaWdodFxuICAgIH1cbiAgICByZXN1bHQuYm90dG9tID0ge1xuICAgICAgdmFsdWU6IGAxJHtiYm94VW5pdHMuYm90dG9tfWAsXG4gICAgICBwaXhlbFZhbHVlOiBjdXJyZW50UmVjdC50b3AgKyBjdXJyZW50UmVjdC5oZWlnaHQsXG4gICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMuYm90dG9tID09PSAnJScsXG4gICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICBmcm9tOiBjdXJyZW50UmVjdC5sZWZ0LFxuICAgICAgdG86IGN1cnJlbnRSZWN0LnJpZ2h0XG4gICAgfVxuICB9IGVsc2UgaWYgKHJlY3RPcmlnaW5bMV0gPT09IDApIHtcbiAgICByZXN1bHQudG9wID0ge1xuICAgICAgdmFsdWU6IGAxJHtiYm94VW5pdHMudG9wfWAsXG4gICAgICBwaXhlbFZhbHVlOiBjdXJyZW50UmVjdC50b3AsXG4gICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMudG9wID09PSAnJScsXG4gICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICBmcm9tOiBjdXJyZW50UmVjdC5sZWZ0LFxuICAgICAgdG86IGN1cnJlbnRSZWN0LnJpZ2h0XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGJib3hVbml0cy5oZWlnaHQgPT09IGJib3hVbml0cy50b3AgJiZcbiAgICAgIHNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHQgIT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICAgICkge1xuICAgICAgcmVzdWx0LnltID0ge1xuICAgICAgICB2YWx1ZTogYDEke2Jib3hVbml0cy50b3B9YCxcbiAgICAgICAgcGl4ZWxWYWx1ZTogY3VycmVudFJlY3QudG9wICsgY3VycmVudFJlY3QuaGVpZ2h0IC8gMixcbiAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLnRvcCA9PT0gJyUnLFxuICAgICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICAgIGZyb206IGN1cnJlbnRSZWN0LmxlZnQsXG4gICAgICAgIHRvOiBjdXJyZW50UmVjdC5yaWdodFxuICAgICAgfVxuICAgICAgcmVzdWx0LmJvdHRvbSA9IHtcbiAgICAgICAgdmFsdWU6IGAxJHtiYm94VW5pdHMudG9wfWAsXG4gICAgICAgIHBpeGVsVmFsdWU6IGN1cnJlbnRSZWN0LnRvcCArIGN1cnJlbnRSZWN0LmhlaWdodCxcbiAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLnRvcCA9PT0gJyUnLFxuICAgICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICAgIGZyb206IGN1cnJlbnRSZWN0LmxlZnQsXG4gICAgICAgIHRvOiBjdXJyZW50UmVjdC5yaWdodFxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXN1bHQuYm90dG9tID0ge1xuICAgICAgdmFsdWU6IGAxJHtiYm94VW5pdHMuYm90dG9tfWAsXG4gICAgICBwaXhlbFZhbHVlOiBjdXJyZW50UmVjdC50b3AgKyBjdXJyZW50UmVjdC5oZWlnaHQsXG4gICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMuYm90dG9tID09PSAnJScsXG4gICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICBmcm9tOiBjdXJyZW50UmVjdC5sZWZ0LFxuICAgICAgdG86IGN1cnJlbnRSZWN0LnJpZ2h0XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGJib3hVbml0cy5oZWlnaHQgPT09IGJib3hVbml0cy5ib3R0b20gJiZcbiAgICAgIHNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHQgIT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICAgICkge1xuICAgICAgcmVzdWx0LnltID0ge1xuICAgICAgICB2YWx1ZTogYDEke2Jib3hVbml0cy5ib3R0b219YCxcbiAgICAgICAgcGl4ZWxWYWx1ZTogY3VycmVudFJlY3QudG9wICsgY3VycmVudFJlY3QuaGVpZ2h0IC8gMixcbiAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLmJvdHRvbSA9PT0gJyUnLFxuICAgICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICAgIGZyb206IGN1cnJlbnRSZWN0LmxlZnQsXG4gICAgICAgIHRvOiBjdXJyZW50UmVjdC5yaWdodFxuICAgICAgfVxuICAgICAgcmVzdWx0LnRvcCA9IHtcbiAgICAgICAgdmFsdWU6IGAxJHtiYm94VW5pdHMuYm90dG9tfWAsXG4gICAgICAgIHBpeGVsVmFsdWU6IGN1cnJlbnRSZWN0LnRvcCxcbiAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLmJvdHRvbSA9PT0gJyUnLFxuICAgICAgICBvcmlnaW46IHJlY3RPcmlnaW5bMV0sXG4gICAgICAgIGZyb206IGN1cnJlbnRSZWN0LmxlZnQsXG4gICAgICAgIHRvOiBjdXJyZW50UmVjdC5yaWdodFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyaWRsaW5lT2ZMYXlvdXRJdGVtIChcbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvbixcbiAgY29udGFpbmVyV2lkdGg6IG51bWJlcixcbiAgY29udGFpbmVySGVpZ2h0OiBudW1iZXJcbik6IEJCb3hHcmlkbGluZSB7XG4gIGNvbnN0IGJib3ggPSBsYXlvdXRJdGVtLmJib3hcbiAgY29uc3QgYmJveFVuaXRzID0gZ2V0QkJveFVuaXRzKGJib3gsIGlzUlRMKCkpXG4gIGNvbnN0IHNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmcgPSBsYXlvdXRJdGVtLnNldHRpbmcgPz8ge31cbiAgY29uc3QgcmVjdCA9IGdldFJlY3RPZkxheW91dEl0ZW0obGF5b3V0SXRlbSwgY29udGFpbmVyV2lkdGgsIGNvbnRhaW5lckhlaWdodClcbiAgY29uc3QgcmVzdWx0OiBCQm94R3JpZGxpbmUgPSB7IGlkOiBsYXlvdXRJdGVtLmlkLCByZWN0IH1cblxuICBjb25zdCBnZXRSaWdodE9yQm90dG9tVmFsdWUgPSAodmFsdWUpOiBzdHJpbmcgPT4ge1xuICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UodmFsdWUpKSB7XG4gICAgICByZXR1cm4gYCR7MTAwIC0gcGFyc2VGbG9hdCh2YWx1ZSl9JWBcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBjb25zdCBmbGlwTGVmdFJpZ2h0ID0gKHZhbHVlKTogc3RyaW5nID0+IHtcbiAgICBpZiAodXRpbHMuaXNQZXJjZW50YWdlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGAkezEwMCAtIHBhcnNlRmxvYXQodmFsdWUpfSVgXG4gICAgfVxuICAgIHJldHVybiBgJHtjb250YWluZXJXaWR0aCAtIHBhcnNlRmxvYXQodmFsdWUpfXB4YFxuICB9XG5cbiAgY29uc3QgbGVmdCA9IHsgdmFsdWU6IGJib3gubGVmdCwgcGl4ZWxWYWx1ZTogcmVjdC5sZWZ0LCB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMubGVmdCA9PT0gJyUnLCBvcmlnaW46IDAgfVxuICBjb25zdCB0b3AgPSB7IHZhbHVlOiBiYm94LnRvcCwgcGl4ZWxWYWx1ZTogcmVjdC50b3AsIHVzZVBlcmNlbnRhZ2U6IGJib3hVbml0cy50b3AgPT09ICclJywgb3JpZ2luOiAwIH1cbiAgY29uc3QgcmlnaHQgPSB7XG4gICAgdmFsdWU6IGdldFJpZ2h0T3JCb3R0b21WYWx1ZShiYm94LnJpZ2h0KSxcbiAgICBwaXhlbFZhbHVlOiByZWN0LnJpZ2h0LFxuICAgIHVzZVBlcmNlbnRhZ2U6IGJib3hVbml0cy5yaWdodCA9PT0gJyUnLFxuICAgIG9yaWdpbjogMVxuICB9XG4gIGNvbnN0IGJvdHRvbSA9IHtcbiAgICB2YWx1ZTogZ2V0UmlnaHRPckJvdHRvbVZhbHVlKGJib3guYm90dG9tKSxcbiAgICBwaXhlbFZhbHVlOiByZWN0LmJvdHRvbSxcbiAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMuYm90dG9tID09PSAnJScsXG4gICAgb3JpZ2luOiAxXG4gIH1cblxuICBpZiAoc2V0dGluZy5hdXRvUHJvcHM/LndpZHRoID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICAvLyBsZWZ0IGFuZCByaWdodCBhcmUgZml4ZWQsIHdpZHRoIGlzIGZsZXhpYmxlXG4gICAgcmVzdWx0LmxlZnQgPSBsZWZ0XG4gICAgcmVzdWx0LnJpZ2h0ID0gcmlnaHRcbiAgICAvLyBpZiB1bml0IG9mIGxlZnQgYW5kIHJpZ2h0IGFyZSBib3RoIHBlcmNlbnRhZ2UsIHhtIGlzIGFsc28gZGV0ZXJtaW5lZFxuICAgIGlmIChiYm94VW5pdHMubGVmdCA9PT0gYmJveFVuaXRzLnJpZ2h0ICYmIGJib3hVbml0cy5sZWZ0ID09PSAnJScpIHtcbiAgICAgIHJlc3VsdC54bSA9IHtcbiAgICAgICAgdmFsdWU6IGAkeyhwYXJzZUZsb2F0KHJlc3VsdC5sZWZ0LnZhbHVlKSArXG4gICAgICAgICAgcGFyc2VGbG9hdChyZXN1bHQucmlnaHQudmFsdWUpKSAvXG4gICAgICAgICAgMn0lYCxcbiAgICAgICAgcGl4ZWxWYWx1ZTogKHJlY3QubGVmdCArIHJlY3QucmlnaHQpIC8gMixcbiAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLmxlZnQgPT09ICclJ1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChzZXR0aW5nLmF1dG9Qcm9wcz8ud2lkdGggPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0bykge1xuICAgIGlmIChzZXR0aW5nLmF1dG9Qcm9wcz8ubGVmdCkge1xuICAgICAgLy8gbGVmdCBpcyB0cnVlIG1lYW5zIHRoZSBvcmlnaW4gaXMgcmlnaHRcbiAgICAgIC8vIG9ubHkgcmlnaHQgY2FuIGJlIGZpeGVkXG4gICAgICByZXN1bHQucmlnaHQgPSByaWdodFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvbmx5IGxlZnQgY2FuIGJlIGZpeGVkXG4gICAgICByZXN1bHQubGVmdCA9IGxlZnRcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gYnkgZGVmYXVsdCB3aWR0aCBpcyBjdXN0b21cbiAgICAvLyBsZWZ0LCByaWdodCBhbmQgd2lkdGggY2FuIGJlIGZpeGVkIGlmIHRoZXkgaGFzIHNhbWUgdW5pdFxuICAgIGlmIChzZXR0aW5nLmF1dG9Qcm9wcz8ubGVmdCkge1xuICAgICAgcmVzdWx0LnJpZ2h0ID0gcmlnaHRcblxuICAgICAgaWYgKGJib3hVbml0cy5yaWdodCA9PT0gYmJveFVuaXRzLndpZHRoKSB7XG4gICAgICAgIGNvbnN0IHJpZ2h0VmFsdWUgPSBwYXJzZUZsb2F0KGJib3gucmlnaHQpXG4gICAgICAgIGNvbnN0IHdpZHRoVmFsdWUgPSBwYXJzZUZsb2F0KGJib3gud2lkdGgpXG4gICAgICAgIGNvbnN0IGxlZnRWYWx1ZSA9XG4gICAgICAgICAgYmJveFVuaXRzLnJpZ2h0ID09PSAncHgnXG4gICAgICAgICAgICA/IHJpZ2h0VmFsdWUgKyB3aWR0aFZhbHVlXG4gICAgICAgICAgICA6IDEwMCAtIChyaWdodFZhbHVlICsgd2lkdGhWYWx1ZSlcbiAgICAgICAgY29uc3QgY2VudGVyVmFsdWUgPVxuICAgICAgICAgIGJib3hVbml0cy5yaWdodCA9PT0gJ3B4J1xuICAgICAgICAgICAgPyByaWdodFZhbHVlICsgd2lkdGhWYWx1ZSAvIDJcbiAgICAgICAgICAgIDogMTAwIC0gKHJpZ2h0VmFsdWUgKyB3aWR0aFZhbHVlIC8gMilcbiAgICAgICAgcmVzdWx0LmxlZnQgPSB7XG4gICAgICAgICAgdmFsdWU6IGAke2xlZnRWYWx1ZX0ke2Jib3hVbml0cy5yaWdodH1gLFxuICAgICAgICAgIHBpeGVsVmFsdWU6IHJlY3QubGVmdCxcbiAgICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMucmlnaHQgPT09ICclJyxcbiAgICAgICAgICBvcmlnaW46IDFcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQueG0gPSB7XG4gICAgICAgICAgdmFsdWU6IGAke2NlbnRlclZhbHVlfSR7YmJveFVuaXRzLnJpZ2h0fWAsXG4gICAgICAgICAgcGl4ZWxWYWx1ZTogcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIsXG4gICAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLnJpZ2h0ID09PSAnJScsXG4gICAgICAgICAgb3JpZ2luOiAxXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LmxlZnQgPSBsZWZ0XG5cbiAgICAgIGlmIChiYm94VW5pdHMubGVmdCA9PT0gYmJveFVuaXRzLndpZHRoKSB7XG4gICAgICAgIGNvbnN0IGxlZnRWYWx1ZSA9IHBhcnNlRmxvYXQoYmJveC5sZWZ0KVxuICAgICAgICBjb25zdCB3aWR0aFZhbHVlID0gcGFyc2VGbG9hdChiYm94LndpZHRoKVxuICAgICAgICBjb25zdCByaWdodFZhbHVlID0gbGVmdFZhbHVlICsgd2lkdGhWYWx1ZVxuICAgICAgICByZXN1bHQucmlnaHQgPSB7XG4gICAgICAgICAgdmFsdWU6IGAke3JpZ2h0VmFsdWV9JHtiYm94VW5pdHMubGVmdH1gLFxuICAgICAgICAgIHBpeGVsVmFsdWU6IHJlY3QucmlnaHQsXG4gICAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLmxlZnQgPT09ICclJyxcbiAgICAgICAgICBvcmlnaW46IDBcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQueG0gPSB7XG4gICAgICAgICAgdmFsdWU6IGAke2xlZnRWYWx1ZSArIHdpZHRoVmFsdWUgLyAyfSR7YmJveFVuaXRzLmxlZnR9YCxcbiAgICAgICAgICBwaXhlbFZhbHVlOiByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMixcbiAgICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMubGVmdCA9PT0gJyUnLFxuICAgICAgICAgIG9yaWdpbjogMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzUlRMKCkpIHtcbiAgICByZXN1bHQucmVjdC5sZWZ0ID0gY29udGFpbmVyV2lkdGggLSByZXN1bHQucmVjdC5yaWdodFxuICAgIHJlc3VsdC5yZWN0LnJpZ2h0ID0gcmVzdWx0LnJlY3QubGVmdCArIHJlc3VsdC5yZWN0LndpZHRoXG5cbiAgICBsZXQgbGVmdFxuICAgIGxldCByaWdodFxuICAgIGxldCB4bVxuXG4gICAgaWYgKHJlc3VsdC5sZWZ0ICE9IG51bGwpIHtcbiAgICAgIHJpZ2h0ID0ge1xuICAgICAgICB2YWx1ZTogZmxpcExlZnRSaWdodChyZXN1bHQubGVmdC52YWx1ZSksXG4gICAgICAgIHBpeGVsVmFsdWU6IHJlc3VsdC5yZWN0LnJpZ2h0LFxuICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMubGVmdCA9PT0gJyUnLFxuICAgICAgICBvcmlnaW46IHJlc3VsdC5sZWZ0Lm9yaWdpbiA9PT0gMCA/IDEgOiAwXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZXN1bHQucmlnaHQgIT0gbnVsbCkge1xuICAgICAgbGVmdCA9IHtcbiAgICAgICAgdmFsdWU6IGZsaXBMZWZ0UmlnaHQocmVzdWx0LnJpZ2h0LnZhbHVlKSxcbiAgICAgICAgcGl4ZWxWYWx1ZTogcmVzdWx0LnJlY3QubGVmdCxcbiAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLnJpZ2h0ID09PSAnJScsXG4gICAgICAgIG9yaWdpbjogcmVzdWx0LnJpZ2h0Lm9yaWdpbiA9PT0gMCA/IDEgOiAwXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZXN1bHQueG0gIT0gbnVsbCkge1xuICAgICAgeG0gPSB7XG4gICAgICAgIHZhbHVlOiBmbGlwTGVmdFJpZ2h0KHJlc3VsdC54bS52YWx1ZSksXG4gICAgICAgIHBpeGVsVmFsdWU6IHJlc3VsdC5yZWN0LmxlZnQgKyByZXN1bHQucmVjdC53aWR0aCAvIDIsXG4gICAgICAgIHVzZVBlcmNlbnRhZ2U6IHJlc3VsdC54bS51c2VQZXJjZW50YWdlLFxuICAgICAgICBvcmlnaW46IHJlc3VsdC54bS5vcmlnaW4gPT09IDAgPyAxIDogMFxuICAgICAgfVxuICAgIH1cbiAgICByZXN1bHQucmlnaHQgPSByaWdodFxuICAgIHJlc3VsdC5sZWZ0ID0gbGVmdFxuICAgIHJlc3VsdC54bSA9IHhtXG4gIH1cblxuICBpZiAoc2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgLy8gdG9wIGFuZCBib3R0b20gYXJlIGZpeGVkLCBoZWlnaHQgaXMgZmxleGlibGVcbiAgICByZXN1bHQudG9wID0gdG9wXG4gICAgcmVzdWx0LmJvdHRvbSA9IGJvdHRvbVxuICAgIC8vIGlmIHVuaXQgb2YgdG9wIGFuZCBib3R0b20gYXJlIGJvdGggcGVyY2VudGFnZSwgeG0gaXMgYWxzbyBkZXRlcm1pbmVkXG4gICAgaWYgKGJib3hVbml0cy50b3AgPT09IGJib3hVbml0cy5ib3R0b20gJiYgYmJveFVuaXRzLnRvcCA9PT0gJyUnKSB7XG4gICAgICByZXN1bHQueW0gPSB7XG4gICAgICAgIHZhbHVlOiBgJHsocGFyc2VGbG9hdChyZXN1bHQudG9wLnZhbHVlKSArXG4gICAgICAgICAgcGFyc2VGbG9hdChyZXN1bHQuYm90dG9tLnZhbHVlKSkgL1xuICAgICAgICAgIDJ9JWAsXG4gICAgICAgIHBpeGVsVmFsdWU6IChyZWN0LnRvcCArIHJlY3QuYm90dG9tKSAvIDIsXG4gICAgICAgIHVzZVBlcmNlbnRhZ2U6IGJib3hVbml0cy50b3AgPT09ICclJ1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChzZXR0aW5nLmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG8pIHtcbiAgICBpZiAoc2V0dGluZy5hdXRvUHJvcHM/LnRvcCkge1xuICAgICAgLy8gdG9wIGlzIHRydWUgbWVhbnMgdGhlIG9yaWdpbiBpcyBib3R0b21cbiAgICAgIC8vIG9ubHkgYm90dG9tIGNhbiBiZSBmaXhlZFxuICAgICAgcmVzdWx0LmJvdHRvbSA9IGJvdHRvbVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvbmx5IHRvcCBjYW4gYmUgZml4ZWRcbiAgICAgIHJlc3VsdC50b3AgPSB0b3BcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gYnkgZGVmYXVsdCBoZWlnaHQgaXMgY3VzdG9tXG4gICAgLy8gdG9wLCBib3R0b20gYW5kIGhlaWdodCBjYW4gYmUgZml4ZWQgaWYgdGhleSBoYXMgc2FtZSB1bml0XG4gICAgaWYgKHNldHRpbmcuYXV0b1Byb3BzPy50b3ApIHtcbiAgICAgIHJlc3VsdC5ib3R0b20gPSBib3R0b21cblxuICAgICAgaWYgKGJib3hVbml0cy5ib3R0b20gPT09IGJib3hVbml0cy5oZWlnaHQpIHtcbiAgICAgICAgY29uc3QgYm90dG9tVmFsdWUgPSBwYXJzZUZsb2F0KGJib3guYm90dG9tKVxuICAgICAgICBjb25zdCBoZWlnaHRWYWx1ZSA9IHBhcnNlRmxvYXQoYmJveC5oZWlnaHQpXG4gICAgICAgIGNvbnN0IHRvcFZhbHVlID1cbiAgICAgICAgICBiYm94VW5pdHMuYm90dG9tID09PSAncHgnXG4gICAgICAgICAgICA/IGJvdHRvbVZhbHVlICsgaGVpZ2h0VmFsdWVcbiAgICAgICAgICAgIDogMTAwIC0gKGJvdHRvbVZhbHVlICsgaGVpZ2h0VmFsdWUpXG4gICAgICAgIGNvbnN0IGNlbnRlclZhbHVlID1cbiAgICAgICAgICBiYm94VW5pdHMuYm90dG9tID09PSAncHgnXG4gICAgICAgICAgICA/IGJvdHRvbVZhbHVlICsgaGVpZ2h0VmFsdWUgLyAyXG4gICAgICAgICAgICA6IDEwMCAtIChib3R0b21WYWx1ZSArIGhlaWdodFZhbHVlIC8gMilcbiAgICAgICAgcmVzdWx0LnRvcCA9IHtcbiAgICAgICAgICB2YWx1ZTogYCR7dG9wVmFsdWV9JHtiYm94VW5pdHMuYm90dG9tfWAsXG4gICAgICAgICAgcGl4ZWxWYWx1ZTogcmVjdC50b3AsXG4gICAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLmJvdHRvbSA9PT0gJyUnLFxuICAgICAgICAgIG9yaWdpbjogMVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC55bSA9IHtcbiAgICAgICAgICB2YWx1ZTogYCR7Y2VudGVyVmFsdWV9JHtiYm94VW5pdHMuYm90dG9tfWAsXG4gICAgICAgICAgcGl4ZWxWYWx1ZTogcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIsXG4gICAgICAgICAgdXNlUGVyY2VudGFnZTogYmJveFVuaXRzLmJvdHRvbSA9PT0gJyUnLFxuICAgICAgICAgIG9yaWdpbjogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC50b3AgPSB0b3BcblxuICAgICAgaWYgKGJib3hVbml0cy50b3AgPT09IGJib3hVbml0cy5oZWlnaHQpIHtcbiAgICAgICAgY29uc3QgdG9wVmFsdWUgPSBwYXJzZUZsb2F0KGJib3gudG9wKVxuICAgICAgICBjb25zdCBoZWlnaHRWYWx1ZSA9IHBhcnNlRmxvYXQoYmJveC5oZWlnaHQpXG4gICAgICAgIGNvbnN0IGJvdHRvbVZhbHVlID0gdG9wVmFsdWUgKyBoZWlnaHRWYWx1ZVxuICAgICAgICByZXN1bHQuYm90dG9tID0ge1xuICAgICAgICAgIHZhbHVlOiBgJHtib3R0b21WYWx1ZX0ke2Jib3hVbml0cy50b3B9YCxcbiAgICAgICAgICBwaXhlbFZhbHVlOiByZWN0LmJvdHRvbSxcbiAgICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMudG9wID09PSAnJScsXG4gICAgICAgICAgb3JpZ2luOiAwXG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LnltID0ge1xuICAgICAgICAgIHZhbHVlOiBgJHt0b3BWYWx1ZSArIGhlaWdodFZhbHVlIC8gMn0ke2Jib3hVbml0cy50b3B9YCxcbiAgICAgICAgICBwaXhlbFZhbHVlOiByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMixcbiAgICAgICAgICB1c2VQZXJjZW50YWdlOiBiYm94VW5pdHMudG9wID09PSAnJScsXG4gICAgICAgICAgb3JpZ2luOiAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcmlkbGluZXNPZkxheW91dCAoXG4gIGxheW91dDogSU1MYXlvdXRKc29uLFxuICBjb250YWluZXJXaWR0aDogbnVtYmVyLFxuICBjb250YWluZXJIZWlnaHQ6IG51bWJlcixcbiAgZXhjbHVkZUlkPzogc3RyaW5nXG4pOiBCQm94R3JpZGxpbmVbXSB7XG4gIGNvbnN0IGdyaWRsaW5lcyA9IFtdXG5cbiAgT2JqZWN0LmtleXMobGF5b3V0LmNvbnRlbnQgPz8ge30pLmZvckVhY2goaWQgPT4ge1xuICAgIGlmIChpZCAhPT0gZXhjbHVkZUlkKSB7XG4gICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgICAvLyBza2lwIHRoZSBwZW5kaW5nIGl0ZW1zLCB0aGV5IHdpbGwgbm90IGJlIHJlbmRlcmVkXG4gICAgICBpZiAoIWxheW91dEl0ZW0uaXNQZW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGdyaWRsaW5lID0gZ2V0R3JpZGxpbmVPZkxheW91dEl0ZW0oXG4gICAgICAgICAgbGF5b3V0SXRlbSxcbiAgICAgICAgICBjb250YWluZXJXaWR0aCxcbiAgICAgICAgICBjb250YWluZXJIZWlnaHRcbiAgICAgICAgKVxuICAgICAgICBncmlkbGluZXMucHVzaChncmlkbGluZSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIC8vIGFkZCBjb250YWluZXIgYm9yZGVyIGFzIGdyaWRsaW5lc1xuICBjb25zdCByZWN0ID0geyBsZWZ0OiAwLCByaWdodDogY29udGFpbmVyV2lkdGgsIHdpZHRoOiBjb250YWluZXJXaWR0aCwgdG9wOiAwLCBib3R0b206IGNvbnRhaW5lckhlaWdodCwgaGVpZ2h0OiBjb250YWluZXJIZWlnaHQgfVxuICAvLyBwaXhlbCB1bml0XG4gIGdyaWRsaW5lcy5wdXNoKHtcbiAgICBpZDogJycsXG4gICAgbGVmdDogeyB2YWx1ZTogJzBweCcsIHBpeGVsVmFsdWU6IDAsIHVzZVBlcmNlbnRhZ2U6IGZhbHNlLCBvcmlnaW46IDAsIGZyb206IDAsIHRvOiBjb250YWluZXJIZWlnaHQgfSxcbiAgICByaWdodDogeyB2YWx1ZTogJzBweCcsIHBpeGVsVmFsdWU6IGNvbnRhaW5lcldpZHRoLCB1c2VQZXJjZW50YWdlOiBmYWxzZSwgb3JpZ2luOiAxLCBmcm9tOiAwLCB0bzogY29udGFpbmVySGVpZ2h0IH0sXG4gICAgdG9wOiB7IHZhbHVlOiAnMHB4JywgcGl4ZWxWYWx1ZTogMCwgb3JpZ2luOiAwLCB1c2VQZXJjZW50YWdlOiBmYWxzZSwgZnJvbTogMCwgdG86IGNvbnRhaW5lcldpZHRoIH0sXG4gICAgYm90dG9tOiB7IHZhbHVlOiAnMHB4JywgcGl4ZWxWYWx1ZTogY29udGFpbmVySGVpZ2h0LCB1c2VQZXJjZW50YWdlOiBmYWxzZSwgb3JpZ2luOiAxLCBmcm9tOiAwLCB0bzogY29udGFpbmVyV2lkdGggfSxcbiAgICByZWN0XG4gIH0pXG4gIC8vIHBlcmNlbnRhZ2UgdW5pdFxuICBncmlkbGluZXMucHVzaCh7XG4gICAgaWQ6ICcnLFxuICAgIGxlZnQ6IHsgdmFsdWU6ICcwJScsIHBpeGVsVmFsdWU6IDAsIHVzZVBlcmNlbnRhZ2U6IHRydWUsIG9yaWdpbjogMCwgZnJvbTogMCwgdG86IGNvbnRhaW5lckhlaWdodCB9LFxuICAgIHhtOiB7IHZhbHVlOiAnNTAlJywgcGl4ZWxWYWx1ZTogTWF0aC5yb3VuZChjb250YWluZXJXaWR0aCAvIDIpLCB1c2VQZXJjZW50YWdlOiB0cnVlLCBvcmlnaW46IDAsIGZyb206IDAsIHRvOiBjb250YWluZXJIZWlnaHQgfSxcbiAgICByaWdodDogeyB2YWx1ZTogJzAlJywgcGl4ZWxWYWx1ZTogY29udGFpbmVyV2lkdGgsIHVzZVBlcmNlbnRhZ2U6IHRydWUsIG9yaWdpbjogMSwgZnJvbTogMCwgdG86IGNvbnRhaW5lckhlaWdodCB9LFxuICAgIHRvcDogeyB2YWx1ZTogJzAlJywgcGl4ZWxWYWx1ZTogMCwgdXNlUGVyY2VudGFnZTogdHJ1ZSwgb3JpZ2luOiAwLCBmcm9tOiAwLCB0bzogY29udGFpbmVyV2lkdGggfSxcbiAgICB5bTogeyB2YWx1ZTogJzUwJScsIHBpeGVsVmFsdWU6IE1hdGgucm91bmQoY29udGFpbmVySGVpZ2h0IC8gMiksIHVzZVBlcmNlbnRhZ2U6IHRydWUsIG9yaWdpbjogMCwgZnJvbTogMCwgdG86IGNvbnRhaW5lcldpZHRoIH0sXG4gICAgYm90dG9tOiB7IHZhbHVlOiAnMCUnLCBwaXhlbFZhbHVlOiBjb250YWluZXJIZWlnaHQsIHVzZVBlcmNlbnRhZ2U6IHRydWUsIG9yaWdpbjogMSwgZnJvbTogMCwgdG86IGNvbnRhaW5lcldpZHRoIH0sXG4gICAgcmVjdFxuICB9KVxuXG4gIHJldHVybiBncmlkbGluZXNcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgZ3JpZCBsaW5lcyB0aGF0IGNhbiBiZSB1c2VkIGFzIHNuYXAgdGFyZ2V0IHdoZW4gZHJhZ2dpbmcuXG4gKiBAcGFyYW0gbGF5b3V0XG4gKiBAcGFyYW0gZXhjbHVkZUl0ZW1JZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JpZGxpbmVzIChcbiAgYmJveEdyaWRsaW5lczogQkJveEdyaWRsaW5lW10sXG4gIGNvbnRhaW5lcldpZHRoOiBudW1iZXIsXG4gIGNvbnRhaW5lckhlaWdodDogbnVtYmVyLFxuICBpdGVtUmVjdDogUmVjdCxcbiAgYWN0aXZlTGF5b3V0SXRlbT86IElNTGF5b3V0SXRlbUpzb25cbik6IHsgbGVmdFRvUmlnaHQ6IEdyaWRsaW5lW10sIHRvcFRvQm90dG9tOiBHcmlkbGluZVtdIH0ge1xuICBsZXQgaExpbmVzID0gW11cbiAgbGV0IHZMaW5lcyA9IFtdXG4gIGlmIChiYm94R3JpZGxpbmVzID09IG51bGwgfHwgYmJveEdyaWRsaW5lcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4geyBsZWZ0VG9SaWdodDogaExpbmVzLCB0b3BUb0JvdHRvbTogdkxpbmVzIH1cbiAgfVxuXG4gIGNvbnN0IHNuYXBUb1BlcmNlbnRhZ2UgPSBpc1NuYXBUb1BlcmNlbnRhZ2UoXG4gICAgYWN0aXZlTGF5b3V0SXRlbT8uYmJveCxcbiAgICBpdGVtUmVjdCxcbiAgICBjb250YWluZXJXaWR0aCxcbiAgICBjb250YWluZXJIZWlnaHRcbiAgKVxuXG4gIGNvbnN0IHJlY3RPcmlnaW4gPSBnZXRSZWN0T3JpZ2luKGl0ZW1SZWN0LCB7XG4gICAgd2lkdGg6IGNvbnRhaW5lcldpZHRoLFxuICAgIGhlaWdodDogY29udGFpbmVySGVpZ2h0XG4gIH0pXG5cbiAgYmJveEdyaWRsaW5lcy5mb3JFYWNoKGJib3hHcmlkbGluZSA9PiB7XG4gICAgaExpbmVzID0gaExpbmVzLmNvbmNhdChcbiAgICAgIFtiYm94R3JpZGxpbmUubGVmdCwgYmJveEdyaWRsaW5lLnhtLCBiYm94R3JpZGxpbmUucmlnaHRdLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGlzVmFsaWRHcmlkbGluZShpdGVtLCByZWN0T3JpZ2luWzBdLCBzbmFwVG9QZXJjZW50YWdlLmxlZnRSaWdodClcbiAgICAgIClcbiAgICApXG4gICAgdkxpbmVzID0gdkxpbmVzLmNvbmNhdChcbiAgICAgIFtiYm94R3JpZGxpbmUudG9wLCBiYm94R3JpZGxpbmUueW0sIGJib3hHcmlkbGluZS5ib3R0b21dLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGlzVmFsaWRHcmlkbGluZShpdGVtLCByZWN0T3JpZ2luWzFdLCBzbmFwVG9QZXJjZW50YWdlLnRvcEJvdHRvbSlcbiAgICAgIClcbiAgICApXG4gIH0pXG5cbiAgaExpbmVzLnNvcnQoZ3JpZGxpbmVTb3RyZXIpXG4gIHZMaW5lcy5zb3J0KGdyaWRsaW5lU290cmVyKVxuXG4gIHJldHVybiB7IGxlZnRUb1JpZ2h0OiBoTGluZXMsIHRvcFRvQm90dG9tOiB2TGluZXMgfVxufVxuXG4vKipcbiAqIFdoZW4gcmVzaXppbmcgaW4gUlRMLCB0aGUgcmVzaXplIGVkZ2Ugc2hvdWxkIGJlIGZsaXBwZWQuIFRoYXQgbWVhbnMgaWYgeW91IHJlc2l6ZSBieSBkcmFnZ2luZyB0aGUgcmlnaHQgZWRnZSxcbiAqIHRoZSBpbnRlcmFjdGpzIHdpbGwgbW92ZSB0aGUgbGVmdCBlZGdlLlxuICogQHBhcmFtIGR4XG4gKiBAcGFyYW0gZHdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsaXBEZWx0YSAoZHg6IG51bWJlciwgZHc6IG51bWJlcik6IHsgeDogbnVtYmVyLCB3OiBudW1iZXIgfSB7XG4gIGlmIChkeCA9PT0gMCkge1xuICAgIC8vIG1vdmUgbGVmdCBlZGdlXG4gICAgcmV0dXJuIHsgeDogZHcsIHc6IC1kdyB9XG4gIH1cbiAgcmV0dXJuIHsgeDogMCwgdzogLWR3IH1cbn1cblxuZnVuY3Rpb24ga2VlcE1pbmltYWxTaXplIChcbiAgZHJhZ2dpbmdCb3VuZDogUmVjdCxcbiAgZGVsdGE6IFJuZERlbHRhXG4pOiBSbmREZWx0YSB7XG4gIGlmIChkZWx0YS53ICE9PSAwIHx8IGRlbHRhLmggIT09IDApIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB4OiBkZWx0YS54LFxuICAgICAgeTogZGVsdGEueSxcbiAgICAgIHc6IGRlbHRhLncsXG4gICAgICBoOiBkZWx0YS5oXG4gICAgfVxuICAgIGlmIChkcmFnZ2luZ0JvdW5kLndpZHRoICsgZGVsdGEudyA8IG1pblNpemUpIHtcbiAgICAgIHJlc3VsdC53ID0gbWluU2l6ZSAtIGRyYWdnaW5nQm91bmQud2lkdGhcbiAgICAgIGlmIChkZWx0YS54ICE9PSAwKSB7XG4gICAgICAgIC8vIHJlc2l6aW5nIGxlZnQgc2lkZVxuICAgICAgICByZXN1bHQueCA9IC1yZXN1bHQud1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZHJhZ2dpbmdCb3VuZC5oZWlnaHQgKyBkZWx0YS5oIDwgbWluU2l6ZSkge1xuICAgICAgcmVzdWx0LmggPSBtaW5TaXplIC0gZHJhZ2dpbmdCb3VuZC5oZWlnaHRcbiAgICAgIGlmIChkZWx0YS55ICE9PSAwKSB7XG4gICAgICAgIC8vIHJlc2l6aW5nIHRvcCBzaWRlXG4gICAgICAgIHJlc3VsdC55ID0gLXJlc3VsdC5oXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuICByZXR1cm4gZGVsdGFcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmVHdWlkZSAoXG4gIGFjdGl2ZUxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb24sXG4gIGNvbnRhaW5lclJlY3Q6IFJlY3QsXG4gIGRyYWdnaW5nQm91bmQ6IFJlY3QsXG4gIGRlbHRhOiBSbmREZWx0YSxcbiAgc2hpZnRLZXk6IGJvb2xlYW4sXG4gIGJib3hHcmlkbGluZXM6IEJCb3hHcmlkbGluZVtdLFxuICBjYW52YXNQYW5lPzogQ2FudmFzUGFuZSxcbiAgdGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG4pOiBSbmREZWx0YSB7XG4gIC8vIGRvIG5vdCBzdXBwb3J0IG1vdmUgZ3VpZGUgaWYgdGhlIGFjdGl2ZSBsYXlvdXQgaXRlbSBpcyBhbGlnbmVkIGNlbnRlciBhbmQgaXQgaXMgcmVzaXppbmdcbiAgY29uc3Qgc2V0dGluZzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZyA9IGFjdGl2ZUxheW91dEl0ZW0/LnNldHRpbmcgPz8ge31cbiAgY29uc3QgYmJveDogQm91bmRpbmdCb3ggPSBhY3RpdmVMYXlvdXRJdGVtPy5iYm94ID8/IHt9XG4gIGNvbnN0IGlzUmVzaXppbmcgPSBkZWx0YS53ICE9PSAwIHx8IGRlbHRhLmggIT09IDBcbiAgaWYgKGlzUmVzaXppbmcgJiYgKChzZXR0aW5nLmhDZW50ZXIgJiYgYmJveC5sZWZ0ID09PSAnNTAlJykgfHwgKHNldHRpbmcudkNlbnRlciAmJiBiYm94LnRvcCA9PT0gJzUwJScpKSkge1xuICAgIHJldHVybiBkZWx0YVxuICB9XG4gIGxldCBsaW1pdGVkRGVsdGEgPSBrZWVwTWluaW1hbFNpemUoZHJhZ2dpbmdCb3VuZCwgZGVsdGEpXG4gIGlmIChzaGlmdEtleSkge1xuICAgIC8vIGtlZXAgdGhlIHByb3BvcnRpb24gb2Ygd2lkdGggYW5kIGhlaWdodFxuICAgIGxpbWl0ZWREZWx0YSA9IGtlZXBBc3BlY3RSYXRpbyhkcmFnZ2luZ0JvdW5kIGFzIERPTVJlY3QsIGxpbWl0ZWREZWx0YSlcbiAgfVxuICBjb25zdCBhY3RpdmVJdGVtID0gZ2V0R3JpZGxpbmVPZkFjdGl2ZUl0ZW0oXG4gICAgYWN0aXZlTGF5b3V0SXRlbSxcbiAgICBkcmFnZ2luZ0JvdW5kLFxuICAgIGNvbnRhaW5lclJlY3Qud2lkdGgsXG4gICAgY29udGFpbmVyUmVjdC5oZWlnaHQsXG4gICAgbGltaXRlZERlbHRhXG4gIClcbiAgLy8gMS4gaWYgaXQgY2FuIGJlIHNuYXBwZWQgYnkgZGlzdGFuY2VcbiAgbGV0IHsgZHgsIGR5IH0gPSBzbmFwQnlEaXN0YW5jZShcbiAgICBhY3RpdmVJdGVtLFxuICAgIGJib3hHcmlkbGluZXMsXG4gICAgbGltaXRlZERlbHRhLFxuICAgIGNvbnRhaW5lclJlY3Qud2lkdGgsXG4gICAgY29udGFpbmVyUmVjdC5oZWlnaHQsXG4gICAgY2FudmFzUGFuZSxcbiAgICB0aGVtZVxuICApXG4gIC8vIDIuIGlmIGl0IGNhbiBiZSBzbmFwcGVkIHRvIGVkZ2VcbiAgY29uc3QgZWRnZVNuYXBSZXN1bHQgPSBzbmFwVG9FZGdlKFxuICAgIGFjdGl2ZUl0ZW0sXG4gICAgYmJveEdyaWRsaW5lcyxcbiAgICBsaW1pdGVkRGVsdGEsXG4gICAgZHggPT09IDAgJiYgKCFpc1Jlc2l6aW5nIHx8IGRlbHRhLncgIT09IDApLFxuICAgIGR5ID09PSAwICYmICghaXNSZXNpemluZyB8fCBkZWx0YS5oICE9PSAwKSxcbiAgICBjYW52YXNQYW5lLFxuICAgIHRoZW1lXG4gIClcbiAgZHggPSBkeCAhPT0gMCA/IGR4IDogZWRnZVNuYXBSZXN1bHQuZHhcbiAgZHkgPSBkeSAhPT0gMCA/IGR5IDogZWRnZVNuYXBSZXN1bHQuZHlcblxuICBsZXQgdXBkYXRlZERlbHRhID0gbGltaXRlZERlbHRhXG4gIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgIHVwZGF0ZWREZWx0YSA9IHVwZGF0ZURlbHRhKGxpbWl0ZWREZWx0YSwgZHgsIGR5KVxuICB9XG4gIHJldHVybiB1cGRhdGVkRGVsdGFcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURlbHRhIChcbiAgZGVsdGE6IFJuZERlbHRhLFxuICBkeDogbnVtYmVyLFxuICBkeTogbnVtYmVyXG4pOiBSbmREZWx0YSB7XG4gIGxldCB7IHgsIHksIHcsIGggfSA9IGRlbHRhXG5cbiAgbGV0IGZpeGVkWDogRml4ZWRTaWRlc1xuICBsZXQgZml4ZWRZOiBGaXhlZFNpZGVzXG4gIGlmICh3ID09PSAwKSB7XG4gICAgZml4ZWRYID0gRml4ZWRTaWRlcy5Ob25lXG4gIH0gZWxzZSBpZiAoeCA9PT0gMCkge1xuICAgIGZpeGVkWCA9IEZpeGVkU2lkZXMuU3RhcnRcbiAgfSBlbHNlIHtcbiAgICBmaXhlZFggPSBGaXhlZFNpZGVzLkVuZFxuICB9XG4gIGlmIChoID09PSAwKSB7XG4gICAgZml4ZWRZID0gRml4ZWRTaWRlcy5Ob25lXG4gIH0gZWxzZSBpZiAoeSA9PT0gMCkge1xuICAgIGZpeGVkWSA9IEZpeGVkU2lkZXMuU3RhcnRcbiAgfSBlbHNlIHtcbiAgICBmaXhlZFkgPSBGaXhlZFNpZGVzLkVuZFxuICB9XG4gIGlmIChkeCAhPT0gMCkge1xuICAgIGlmIChmaXhlZFggPT09IEZpeGVkU2lkZXMuTm9uZSkge1xuICAgICAgLy8gZHJhZ2dpbmdcbiAgICAgIHggKz0gZHhcbiAgICB9IGVsc2UgaWYgKGZpeGVkWCA9PT0gRml4ZWRTaWRlcy5FbmQpIHtcbiAgICAgIC8vIHJlc2l6aW5nIGF0IGxlZnQgc2lkZVxuICAgICAgeCArPSBkeFxuICAgICAgdyArPSAtZHhcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmVzaXppbmcgYXQgcmlnaHQgc2lkZVxuICAgICAgdyArPSBkeFxuICAgIH1cbiAgfVxuICBpZiAoZHkgIT09IDApIHtcbiAgICBpZiAoZml4ZWRZID09PSBGaXhlZFNpZGVzLk5vbmUpIHtcbiAgICAgIC8vIGRyYWdnaW5nXG4gICAgICB5ICs9IGR5XG4gICAgfSBlbHNlIGlmIChmaXhlZFkgPT09IEZpeGVkU2lkZXMuRW5kKSB7XG4gICAgICAvLyByZXNpemluZyBhdCB0b3Agc2lkZVxuICAgICAgeSArPSBkeVxuICAgICAgaCArPSAtZHlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmVzaXppbmcgYXQgYm90dG9tIHNpZGVcbiAgICAgIGggKz0gZHlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgeCwgeSwgdywgaCB9XG59XG5cbmZ1bmN0aW9uIGtlZXBBc3BlY3RSYXRpbyAoZHJhZ2dpbmdCb3VuZDogRE9NUmVjdCwgZGVsdGE6IFJuZERlbHRhKTogUm5kRGVsdGEge1xuICBpZiAoZGVsdGEudyA9PT0gMCAmJiBkZWx0YS5oID09PSAwKSB7XG4gICAgcmV0dXJuIGRlbHRhXG4gIH1cblxuICBjb25zdCByYXRpbyA9IGRyYWdnaW5nQm91bmQuaGVpZ2h0IC8gZHJhZ2dpbmdCb3VuZC53aWR0aFxuICBsZXQgdyA9IGRlbHRhLndcbiAgbGV0IGggPSBkZWx0YS5oXG4gIGxldCB4ID0gZGVsdGEueFxuICBsZXQgeSA9IGRlbHRhLnlcblxuICBpZiAoTWF0aC5hYnModykgKiByYXRpbyA+IE1hdGguYWJzKGgpKSB7XG4gICAgaCA9IE1hdGgucm91bmQodyAqIHJhdGlvKVxuICB9IGVsc2Uge1xuICAgIHcgPSBNYXRoLnJvdW5kKGggLyByYXRpbylcbiAgfVxuICBpZiAoeCAhPT0gMCkge1xuICAgIHggPSAtd1xuICB9XG4gIGlmICh5ICE9PSAwKSB7XG4gICAgeSA9IC1oXG4gIH1cbiAgcmV0dXJuIHsgeCwgeSwgdywgaCB9XG59XG4iLCJpbXBvcnQgeyB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIHBvbGlzaGVkLCB1dGlscyBhcyBqaW11VXRpbHMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB1dGlscyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IHR5cGUgQ2FudmFzUGFuZSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvY2FudmFzLXBhbmUnXG5pbXBvcnQge1xuICB0eXBlIFJuZERlbHRhLFxuICB0eXBlIEJCb3hHcmlkbGluZSxcbiAgdHlwZSBCQm94R3JpZGxpbmVOb2RlLFxuICBTTkFQX1RPTEVSQU5DRVxufSBmcm9tICcuL21vdmUtZ3VpZGUtY29tbW9uJ1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSB0YXJnZXQgc2hvdWxkIGJlIGludm9sdmVkIHdoZW4gY2FsY3VsYXRpbmcgZGlzdGFuY2Ugc25hcHBpbmcgaW4gaG9yaXpvbnRhbCBkaXJlY3Rpb25cbiAqIDEuIFNob3VsZCBpbnRlcnNlY3QgaW4gdmVydGljYWwgZGlyZWN0aW9uXG4gKiAyLiBTaG91bGQgbm90IGludGVyc2VjdCBpbiBob3Jpem9udGFsIGRpcmVjdGlvblxuICogMy4gVW5pdCBzaG91bGQgY29tcGF0aWJsZTpcbiAqICAgIDMuMSBib3RoIGluIHBpeGVsIGFuZCB1c2UgdGhlIHNhbWUgb3JpZ2luXG4gKiAgICAzLjIgYm90aCBpbiBwZXJjZW50YWdlXG4gKiBAcGFyYW0gc291cmNlXG4gKiBAcGFyYW0gdGFyZ2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1JlbGF0ZWRIb3Jpem9udGFsIChcbiAgc291cmNlOiBCQm94R3JpZGxpbmUsXG4gIHRhcmdldDogQkJveEdyaWRsaW5lXG4pOiBib29sZWFuIHtcbiAgaWYgKFxuICAgIHRhcmdldC5yZWN0LnRvcCA+IHNvdXJjZS5yZWN0LmJvdHRvbSB8fFxuICAgIHRhcmdldC5yZWN0LmJvdHRvbSA8IHNvdXJjZS5yZWN0LnRvcFxuICApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBpZiAodGFyZ2V0LnJlY3QucmlnaHQgKyBTTkFQX1RPTEVSQU5DRSA8IHNvdXJjZS5yZWN0LmxlZnQpIHtcbiAgICBpZiAodGFyZ2V0LnJpZ2h0Py52YWx1ZSAhPSBudWxsICYmIHNvdXJjZS5sZWZ0Py52YWx1ZSAhPSBudWxsKSB7XG4gICAgICBjb25zdCB0YXJnZXRVc2VQZXJjZW50YWdlID0gdGFyZ2V0LnJpZ2h0LnVzZVBlcmNlbnRhZ2VcbiAgICAgIGNvbnN0IHNvdXJjZVVzZVBlcmNlbnRhZ2UgPSBzb3VyY2UubGVmdC51c2VQZXJjZW50YWdlXG4gICAgICBpZiAodGFyZ2V0VXNlUGVyY2VudGFnZSA9PT0gc291cmNlVXNlUGVyY2VudGFnZSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0VXNlUGVyY2VudGFnZSB8fCB0YXJnZXQucmlnaHQub3JpZ2luID09PSBzb3VyY2UubGVmdC5vcmlnaW5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc291cmNlLnJlY3QucmlnaHQgKyBTTkFQX1RPTEVSQU5DRSA8IHRhcmdldC5yZWN0LmxlZnQpIHtcbiAgICBpZiAoc291cmNlLnJpZ2h0Py52YWx1ZSAhPSBudWxsICYmIHRhcmdldC5sZWZ0Py52YWx1ZSAhPSBudWxsKSB7XG4gICAgICBjb25zdCB0YXJnZXRVc2VQZXJjZW50YWdlID0gdGFyZ2V0LmxlZnQudXNlUGVyY2VudGFnZVxuICAgICAgY29uc3Qgc291cmNlVXNlUGVyY2VudGFnZSA9IHNvdXJjZS5yaWdodC51c2VQZXJjZW50YWdlXG4gICAgICBpZiAodGFyZ2V0VXNlUGVyY2VudGFnZSA9PT0gc291cmNlVXNlUGVyY2VudGFnZSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0VXNlUGVyY2VudGFnZSB8fCB0YXJnZXQubGVmdC5vcmlnaW4gPT09IHNvdXJjZS5yaWdodC5vcmlnaW5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVsYXRlZFZlcnRpY2FsIChcbiAgc291cmNlOiBCQm94R3JpZGxpbmUsXG4gIHRhcmdldDogQkJveEdyaWRsaW5lXG4pOiBib29sZWFuIHtcbiAgaWYgKFxuICAgIHRhcmdldC5yZWN0LmxlZnQgPiBzb3VyY2UucmVjdC5yaWdodCB8fFxuICAgIHRhcmdldC5yZWN0LnJpZ2h0IDwgc291cmNlLnJlY3QubGVmdFxuICApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBpZiAodGFyZ2V0LnJlY3QuYm90dG9tICsgU05BUF9UT0xFUkFOQ0UgPCBzb3VyY2UucmVjdC50b3ApIHtcbiAgICBpZiAodGFyZ2V0LmJvdHRvbT8udmFsdWUgIT0gbnVsbCAmJiBzb3VyY2UudG9wPy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICBjb25zdCB0YXJnZXRVc2VQZXJjZW50YWdlID0gdGFyZ2V0LmJvdHRvbS51c2VQZXJjZW50YWdlXG4gICAgICBjb25zdCBzb3VyY2VVc2VQZXJjZW50YWdlID0gc291cmNlLnRvcC51c2VQZXJjZW50YWdlXG4gICAgICBpZiAodGFyZ2V0VXNlUGVyY2VudGFnZSA9PT0gc291cmNlVXNlUGVyY2VudGFnZSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0VXNlUGVyY2VudGFnZSB8fCB0YXJnZXQuYm90dG9tLm9yaWdpbiA9PT0gc291cmNlLnRvcC5vcmlnaW5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc291cmNlLnJlY3QuYm90dG9tICsgU05BUF9UT0xFUkFOQ0UgPCB0YXJnZXQucmVjdC50b3ApIHtcbiAgICBpZiAoc291cmNlLmJvdHRvbT8udmFsdWUgIT0gbnVsbCAmJiB0YXJnZXQudG9wPy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICBjb25zdCB0YXJnZXRVc2VQZXJjZW50YWdlID0gdGFyZ2V0LnRvcC51c2VQZXJjZW50YWdlXG4gICAgICBjb25zdCBzb3VyY2VVc2VQZXJjZW50YWdlID0gc291cmNlLmJvdHRvbS51c2VQZXJjZW50YWdlXG4gICAgICBpZiAodGFyZ2V0VXNlUGVyY2VudGFnZSA9PT0gc291cmNlVXNlUGVyY2VudGFnZSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0VXNlUGVyY2VudGFnZSB8fCB0YXJnZXQudG9wLm9yaWdpbiA9PT0gc291cmNlLmJvdHRvbS5vcmlnaW5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRQcmV2aW91c0hvcml6b250YWxseVJlbGF0ZWQgKFxuICBhY3RpdmVJdGVtOiBCQm94R3JpZGxpbmUsXG4gIGdyaWRsaW5lczogQkJveEdyaWRsaW5lW11cbik6IEJCb3hHcmlkbGluZU5vZGUge1xuICBsZXQgcmVzdWx0OiBCQm94R3JpZGxpbmVOb2RlXG4gIGNvbnN0IHByZXZpb3VzTGlzdCA9IGdyaWRsaW5lc1xuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnJpZ2h0Py5waXhlbFZhbHVlIDwgYWN0aXZlSXRlbS5sZWZ0Py5waXhlbFZhbHVlKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLnJpZ2h0LnBpeGVsVmFsdWUgLSBhLnJpZ2h0LnBpeGVsVmFsdWUpIC8vIHByZXZpb3VzIHVzZSByZXZlcnNlIG9yZGVyXG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIHByZXZpb3VzTGlzdC5zb21lKGl0ZW0gPT4ge1xuICAgIGNvbnN0IGlzUmVsYXRlZCA9IGlzUmVsYXRlZEhvcml6b250YWwoYWN0aXZlSXRlbSwgaXRlbSlcbiAgICBpZiAoaXNSZWxhdGVkKSB7XG4gICAgICByZXN1bHQgPSB7IHZhbHVlOiBpdGVtIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9KVxuICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICByZXN1bHQubmV4dCA9IGZpbmRQcmV2aW91c0hvcml6b250YWxseVJlbGF0ZWQocmVzdWx0LnZhbHVlLCBncmlkbGluZXMpXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRMZWZ0RWRnZSAoZ3JpZGxpbmVOb2RlOiBCQm94R3JpZGxpbmVOb2RlLCB1c2VQZXJjZW50YWdlOiBib29sZWFuKTogQkJveEdyaWRsaW5lTm9kZSB7XG4gIGNvbnN0IGxlZnQgPSB7XG4gICAgaWQ6ICcnLFxuICAgIHJpZ2h0OiB7XG4gICAgICB2YWx1ZTogdXNlUGVyY2VudGFnZSA/ICcwJScgOiAnMHB4JyxcbiAgICAgIHBpeGVsVmFsdWU6IDAsXG4gICAgICB1c2VQZXJjZW50YWdlLFxuICAgICAgb3JpZ2luOiAwLFxuICAgICAgZnJvbTogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLFxuICAgICAgdG86IE51bWJlci5QT1NJVElWRV9JTkZJTklUWVxuICAgIH0sXG4gICAgcmVjdDogeyBsZWZ0OiAtMTAwLCB3aWR0aDogMTAwLCByaWdodDogMCwgdG9wOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIGJvdHRvbTogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIH1cbiAgfVxuICBpZiAoZ3JpZGxpbmVOb2RlID09IG51bGwpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogbGVmdCB9XG4gIH1cbiAgbGV0IGN1cnJlbnROb2RlID0gZ3JpZGxpbmVOb2RlXG4gIC8vIGZpbmQgdGhlIGxhc3Qgbm9kZVxuICB3aGlsZSAoY3VycmVudE5vZGUubmV4dCAhPSBudWxsKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0XG4gIH1cbiAgY3VycmVudE5vZGUubmV4dCA9IHsgdmFsdWU6IGxlZnQgfVxuICByZXR1cm4gZ3JpZGxpbmVOb2RlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTmV4dEhvcml6b250YWxseVJlbGF0ZWQgKFxuICBhY3RpdmVJdGVtOiBCQm94R3JpZGxpbmUsXG4gIGdyaWRsaW5lczogQkJveEdyaWRsaW5lW11cbik6IEJCb3hHcmlkbGluZU5vZGUge1xuICBsZXQgcmVzdWx0OiBCQm94R3JpZGxpbmVOb2RlXG4gIGNvbnN0IHByZXZpb3VzTGlzdCA9IGdyaWRsaW5lc1xuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLmxlZnQ/LnBpeGVsVmFsdWUgPiBhY3RpdmVJdGVtLnJpZ2h0Py5waXhlbFZhbHVlKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLmxlZnQucGl4ZWxWYWx1ZSAtIGIubGVmdC5waXhlbFZhbHVlKVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgcHJldmlvdXNMaXN0LnNvbWUoaXRlbSA9PiB7XG4gICAgY29uc3QgaXNSZWxhdGVkID0gaXNSZWxhdGVkSG9yaXpvbnRhbChhY3RpdmVJdGVtLCBpdGVtKVxuICAgIGlmIChpc1JlbGF0ZWQpIHtcbiAgICAgIHJlc3VsdCA9IHsgdmFsdWU6IGl0ZW0gfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH0pXG4gIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgIHJlc3VsdC5uZXh0ID0gZmluZE5leHRIb3Jpem9udGFsbHlSZWxhdGVkKHJlc3VsdC52YWx1ZSwgZ3JpZGxpbmVzKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUmlnaHRFZGdlIChncmlkbGluZU5vZGU6IEJCb3hHcmlkbGluZU5vZGUsIHVzZVBlcmNlbnRhZ2U6IGJvb2xlYW4sIGNvbnRhaW5lcldpZHRoOiBudW1iZXIpOiBCQm94R3JpZGxpbmVOb2RlIHtcbiAgY29uc3QgcmlnaHQgPSB7XG4gICAgaWQ6ICcnLFxuICAgIGxlZnQ6IHtcbiAgICAgIHZhbHVlOiB1c2VQZXJjZW50YWdlID8gJzAlJyA6ICcwcHgnLFxuICAgICAgcGl4ZWxWYWx1ZTogY29udGFpbmVyV2lkdGgsXG4gICAgICB1c2VQZXJjZW50YWdlLFxuICAgICAgb3JpZ2luOiAxLFxuICAgICAgZnJvbTogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLFxuICAgICAgdG86IE51bWJlci5QT1NJVElWRV9JTkZJTklUWVxuICAgIH0sXG4gICAgcmVjdDogeyBsZWZ0OiBjb250YWluZXJXaWR0aCwgd2lkdGg6IDEwMCwgcmlnaHQ6IGNvbnRhaW5lcldpZHRoICsgMTAwLCB0b3A6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgYm90dG9tOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgfVxuICB9XG4gIGlmIChncmlkbGluZU5vZGUgPT0gbnVsbCkge1xuICAgIHJldHVybiB7IHZhbHVlOiByaWdodCB9XG4gIH1cbiAgbGV0IGN1cnJlbnROb2RlID0gZ3JpZGxpbmVOb2RlXG4gIC8vIGZpbmQgdGhlIGxhc3Qgbm9kZVxuICB3aGlsZSAoY3VycmVudE5vZGUubmV4dCAhPSBudWxsKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0XG4gIH1cbiAgY3VycmVudE5vZGUubmV4dCA9IHsgdmFsdWU6IHJpZ2h0IH1cbiAgcmV0dXJuIGdyaWRsaW5lTm9kZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFByZXZpb3VzVmVydGljYWxseVJlbGF0ZWQgKFxuICBhY3RpdmVJdGVtOiBCQm94R3JpZGxpbmUsXG4gIGdyaWRsaW5lczogQkJveEdyaWRsaW5lW11cbik6IEJCb3hHcmlkbGluZU5vZGUge1xuICBsZXQgcmVzdWx0OiBCQm94R3JpZGxpbmVOb2RlXG4gIGNvbnN0IHByZXZpb3VzTGlzdCA9IGdyaWRsaW5lc1xuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLmJvdHRvbT8ucGl4ZWxWYWx1ZSA8IGFjdGl2ZUl0ZW0udG9wPy5waXhlbFZhbHVlKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmJvdHRvbS5waXhlbFZhbHVlIC0gYS5ib3R0b20ucGl4ZWxWYWx1ZSkgLy8gdXNlIHJldmVyc2Ugb3JkZXJcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgcHJldmlvdXNMaXN0LnNvbWUoaXRlbSA9PiB7XG4gICAgY29uc3QgaXNSZWxhdGVkID0gaXNSZWxhdGVkVmVydGljYWwoYWN0aXZlSXRlbSwgaXRlbSlcbiAgICBpZiAoaXNSZWxhdGVkKSB7XG4gICAgICByZXN1bHQgPSB7IHZhbHVlOiBpdGVtIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9KVxuICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICByZXN1bHQubmV4dCA9IGZpbmRQcmV2aW91c1ZlcnRpY2FsbHlSZWxhdGVkKHJlc3VsdC52YWx1ZSwgZ3JpZGxpbmVzKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9wRWRnZSAoZ3JpZGxpbmVOb2RlOiBCQm94R3JpZGxpbmVOb2RlLCB1c2VQZXJjZW50YWdlOiBib29sZWFuKTogQkJveEdyaWRsaW5lTm9kZSB7XG4gIGNvbnN0IHRvcCA9IHtcbiAgICBpZDogJycsXG4gICAgYm90dG9tOiB7XG4gICAgICB2YWx1ZTogdXNlUGVyY2VudGFnZSA/ICcwJScgOiAnMHB4JyxcbiAgICAgIHBpeGVsVmFsdWU6IDAsXG4gICAgICB1c2VQZXJjZW50YWdlLFxuICAgICAgb3JpZ2luOiAwLFxuICAgICAgZnJvbTogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLFxuICAgICAgdG86IE51bWJlci5QT1NJVElWRV9JTkZJTklUWVxuICAgIH0sXG4gICAgcmVjdDogeyB0b3A6IC0xMDAsIGhlaWdodDogMTAwLCBib3R0b206IDAsIGxlZnQ6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgcmlnaHQ6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB9XG4gIH1cbiAgaWYgKGdyaWRsaW5lTm9kZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHRvcCB9XG4gIH1cbiAgbGV0IGN1cnJlbnROb2RlID0gZ3JpZGxpbmVOb2RlXG4gIC8vIGZpbmQgdGhlIGxhc3Qgbm9kZVxuICB3aGlsZSAoY3VycmVudE5vZGUubmV4dCAhPSBudWxsKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0XG4gIH1cbiAgY3VycmVudE5vZGUubmV4dCA9IHsgdmFsdWU6IHRvcCB9XG4gIHJldHVybiBncmlkbGluZU5vZGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmROZXh0VmVydGljYWxseVJlbGF0ZWQgKFxuICBhY3RpdmVJdGVtOiBCQm94R3JpZGxpbmUsXG4gIGdyaWRsaW5lczogQkJveEdyaWRsaW5lW11cbik6IEJCb3hHcmlkbGluZU5vZGUge1xuICBsZXQgcmVzdWx0OiBCQm94R3JpZGxpbmVOb2RlXG4gIGNvbnN0IHByZXZpb3VzTGlzdCA9IGdyaWRsaW5lc1xuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnRvcD8ucGl4ZWxWYWx1ZSA+IGFjdGl2ZUl0ZW0uYm90dG9tPy5waXhlbFZhbHVlKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLnRvcC5waXhlbFZhbHVlIC0gYi50b3AucGl4ZWxWYWx1ZSlcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgcHJldmlvdXNMaXN0LnNvbWUoaXRlbSA9PiB7XG4gICAgY29uc3QgaXNSZWxhdGVkID0gaXNSZWxhdGVkVmVydGljYWwoYWN0aXZlSXRlbSwgaXRlbSlcbiAgICBpZiAoaXNSZWxhdGVkKSB7XG4gICAgICByZXN1bHQgPSB7IHZhbHVlOiBpdGVtIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9KVxuICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICByZXN1bHQubmV4dCA9IGZpbmROZXh0VmVydGljYWxseVJlbGF0ZWQocmVzdWx0LnZhbHVlLCBncmlkbGluZXMpXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRCb3R0b21FZGdlIChncmlkbGluZU5vZGU6IEJCb3hHcmlkbGluZU5vZGUsIHVzZVBlcmNlbnRhZ2U6IGJvb2xlYW4sIGNvbnRhaW5lckhlaWdodDogbnVtYmVyKTogQkJveEdyaWRsaW5lTm9kZSB7XG4gIGNvbnN0IGJvdHRvbSA9IHtcbiAgICBpZDogJycsXG4gICAgdG9wOiB7XG4gICAgICB2YWx1ZTogdXNlUGVyY2VudGFnZSA/ICcwJScgOiAnMHB4JyxcbiAgICAgIHBpeGVsVmFsdWU6IGNvbnRhaW5lckhlaWdodCxcbiAgICAgIHVzZVBlcmNlbnRhZ2UsXG4gICAgICBvcmlnaW46IDEsXG4gICAgICBmcm9tOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksXG4gICAgICB0bzogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXG4gICAgfSxcbiAgICByZWN0OiB7IHRvcDogY29udGFpbmVySGVpZ2h0LCBoZWlnaHQ6IDEwMCwgYm90dG9tOiBjb250YWluZXJIZWlnaHQgKyAxMDAsIGxlZnQ6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgcmlnaHQ6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB9XG4gIH1cbiAgaWYgKGdyaWRsaW5lTm9kZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IGJvdHRvbSB9XG4gIH1cbiAgbGV0IGN1cnJlbnROb2RlID0gZ3JpZGxpbmVOb2RlXG4gIC8vIGZpbmQgdGhlIGxhc3Qgbm9kZVxuICB3aGlsZSAoY3VycmVudE5vZGUubmV4dCAhPSBudWxsKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0XG4gIH1cbiAgY3VycmVudE5vZGUubmV4dCA9IHsgdmFsdWU6IGJvdHRvbSB9XG4gIHJldHVybiBncmlkbGluZU5vZGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNuYXBUb05lYXJieUhvcml6b250YWwgKFxuICBhY3RpdmVJdGVtOiBCQm94R3JpZGxpbmUsXG4gIHByZXZpb3VzSXRlbTogeyBncmlkbGluZTogQkJveEdyaWRsaW5lLCBmaXhlZDogYm9vbGVhbiB9LFxuICBuZXh0SXRlbTogeyBncmlkbGluZTogQkJveEdyaWRsaW5lLCBmaXhlZDogYm9vbGVhbiB9LFxuICBjYW52YXNQYW5lPzogQ2FudmFzUGFuZSxcbiAgY29udGFpbmVyV2lkdGg/OiBudW1iZXIsXG4gIHRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xuKTogbnVtYmVyIHtcbiAgY29uc3QgaXNCb3RoRWRnZSA9IHByZXZpb3VzSXRlbS5ncmlkbGluZS5yZWN0LnRvcCA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZICYmIG5leHRJdGVtLmdyaWRsaW5lLnJlY3QudG9wID09PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFlcbiAgaWYgKGlzQm90aEVkZ2UgfHwgYWN0aXZlSXRlbS5sZWZ0ID09IG51bGwgfHwgYWN0aXZlSXRlbS5yaWdodCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBjb25zdCBkaXN0YW5jZUJlZm9yZSA9XG4gICAgYWN0aXZlSXRlbS5sZWZ0LnBpeGVsVmFsdWUgLSBwcmV2aW91c0l0ZW0uZ3JpZGxpbmUucmlnaHQucGl4ZWxWYWx1ZVxuICBjb25zdCBkaXN0YW5jZUFmdGVyID1cbiAgICBuZXh0SXRlbS5ncmlkbGluZS5sZWZ0LnBpeGVsVmFsdWUgLSBhY3RpdmVJdGVtLnJpZ2h0LnBpeGVsVmFsdWVcbiAgY29uc3QgdG9sZXJhbmNlID1cbiAgICBwcmV2aW91c0l0ZW0uZml4ZWQgfHwgbmV4dEl0ZW0uZml4ZWQgPyBTTkFQX1RPTEVSQU5DRSA6IFNOQVBfVE9MRVJBTkNFICogMlxuXG4gIGlmIChNYXRoLmFicyhkaXN0YW5jZUFmdGVyIC0gZGlzdGFuY2VCZWZvcmUpIDwgdG9sZXJhbmNlKSB7XG4gICAgbGV0IGRlbHRhOiBudW1iZXJcbiAgICBsZXQgZGlzdGFuY2U6IG51bWJlclxuICAgIGlmIChwcmV2aW91c0l0ZW0uZml4ZWQgfHwgbmV4dEl0ZW0uZml4ZWQpIHtcbiAgICAgIC8vIHJlc2l6aW5nXG4gICAgICBkZWx0YSA9IGRpc3RhbmNlQWZ0ZXIgLSBkaXN0YW5jZUJlZm9yZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkcmFnZ2luZ1xuICAgICAgZGVsdGEgPSAoZGlzdGFuY2VBZnRlciAtIGRpc3RhbmNlQmVmb3JlKSAvIDJcbiAgICB9XG4gICAgaWYgKHByZXZpb3VzSXRlbS5maXhlZCkge1xuICAgICAgZGlzdGFuY2UgPSBkaXN0YW5jZUJlZm9yZVxuICAgIH0gZWxzZSBpZiAobmV4dEl0ZW0uZml4ZWQpIHtcbiAgICAgIGRpc3RhbmNlID0gZGlzdGFuY2VBZnRlclxuICAgIH0gZWxzZSB7XG4gICAgICBkaXN0YW5jZSA9IGRpc3RhbmNlQmVmb3JlICsgZGVsdGFcbiAgICB9XG4gICAgZHJhd0hvcml6b250YWxHYXAoXG4gICAgICBwcmV2aW91c0l0ZW0uZ3JpZGxpbmUsXG4gICAgICBhY3RpdmVJdGVtLFxuICAgICAgZGlzdGFuY2UsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlLFxuICAgICAgY2FudmFzUGFuZSxcbiAgICAgIGNvbnRhaW5lcldpZHRoLFxuICAgICAgdGhlbWVcbiAgICApXG4gICAgZHJhd0hvcml6b250YWxHYXAoXG4gICAgICBhY3RpdmVJdGVtLFxuICAgICAgbmV4dEl0ZW0uZ3JpZGxpbmUsXG4gICAgICBkaXN0YW5jZSxcbiAgICAgIGZhbHNlLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNhbnZhc1BhbmUsXG4gICAgICBjb250YWluZXJXaWR0aCxcbiAgICAgIHRoZW1lXG4gICAgKVxuICAgIHJldHVybiBkZWx0YVxuICB9XG5cbiAgcmV0dXJuIDBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNuYXBUb05lYXJieVZlcnRpY2FsIChcbiAgYWN0aXZlSXRlbTogQkJveEdyaWRsaW5lLFxuICBwcmV2aW91c0l0ZW06IHsgZ3JpZGxpbmU6IEJCb3hHcmlkbGluZSwgZml4ZWQ6IGJvb2xlYW4gfSxcbiAgbmV4dEl0ZW06IHsgZ3JpZGxpbmU6IEJCb3hHcmlkbGluZSwgZml4ZWQ6IGJvb2xlYW4gfSxcbiAgY2FudmFzUGFuZT86IENhbnZhc1BhbmUsXG4gIGNvbnRhaW5lckhlaWdodD86IG51bWJlcixcbiAgdGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG4pOiBudW1iZXIge1xuICBjb25zdCBpc0JvdGhFZGdlID0gcHJldmlvdXNJdGVtLmdyaWRsaW5lLnJlY3QubGVmdCA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZICYmIG5leHRJdGVtLmdyaWRsaW5lLnJlY3QubGVmdCA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXG4gIGlmIChpc0JvdGhFZGdlIHx8IGFjdGl2ZUl0ZW0udG9wID09IG51bGwgfHwgYWN0aXZlSXRlbS5ib3R0b20gPT0gbnVsbCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgY29uc3QgZGlzdGFuY2VCZWZvcmUgPVxuICAgIGFjdGl2ZUl0ZW0udG9wLnBpeGVsVmFsdWUgLSBwcmV2aW91c0l0ZW0uZ3JpZGxpbmUuYm90dG9tLnBpeGVsVmFsdWVcbiAgY29uc3QgZGlzdGFuY2VBZnRlciA9XG4gICAgbmV4dEl0ZW0uZ3JpZGxpbmUudG9wLnBpeGVsVmFsdWUgLSBhY3RpdmVJdGVtLmJvdHRvbS5waXhlbFZhbHVlXG4gIGNvbnN0IHRvbGVyYW5jZSA9XG4gICAgcHJldmlvdXNJdGVtLmZpeGVkIHx8IG5leHRJdGVtLmZpeGVkID8gU05BUF9UT0xFUkFOQ0UgOiBTTkFQX1RPTEVSQU5DRSAqIDJcblxuICBpZiAoTWF0aC5hYnMoZGlzdGFuY2VBZnRlciAtIGRpc3RhbmNlQmVmb3JlKSA8IHRvbGVyYW5jZSkge1xuICAgIGxldCBkZWx0YTogbnVtYmVyXG4gICAgbGV0IGRpc3RhbmNlOiBudW1iZXJcbiAgICBpZiAocHJldmlvdXNJdGVtLmZpeGVkIHx8IG5leHRJdGVtLmZpeGVkKSB7XG4gICAgICAvLyByZXNpemluZ1xuICAgICAgZGVsdGEgPSBkaXN0YW5jZUFmdGVyIC0gZGlzdGFuY2VCZWZvcmVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZHJhZ2dpbmdcbiAgICAgIGRlbHRhID0gKGRpc3RhbmNlQWZ0ZXIgLSBkaXN0YW5jZUJlZm9yZSkgLyAyXG4gICAgfVxuICAgIGlmIChwcmV2aW91c0l0ZW0uZml4ZWQpIHtcbiAgICAgIGRpc3RhbmNlID0gZGlzdGFuY2VCZWZvcmVcbiAgICB9IGVsc2UgaWYgKG5leHRJdGVtLmZpeGVkKSB7XG4gICAgICBkaXN0YW5jZSA9IGRpc3RhbmNlQWZ0ZXJcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzdGFuY2UgPSBkaXN0YW5jZUJlZm9yZSArIGRlbHRhXG4gICAgfVxuXG4gICAgZHJhd1ZlcnRpY2FsR2FwKFxuICAgICAgcHJldmlvdXNJdGVtLmdyaWRsaW5lLFxuICAgICAgYWN0aXZlSXRlbSxcbiAgICAgIGRpc3RhbmNlLFxuICAgICAgZmFsc2UsXG4gICAgICBmYWxzZSxcbiAgICAgIGNhbnZhc1BhbmUsXG4gICAgICBjb250YWluZXJIZWlnaHQsXG4gICAgICB0aGVtZVxuICAgIClcbiAgICBkcmF3VmVydGljYWxHYXAoXG4gICAgICBhY3RpdmVJdGVtLFxuICAgICAgbmV4dEl0ZW0uZ3JpZGxpbmUsXG4gICAgICBkaXN0YW5jZSxcbiAgICAgIGZhbHNlLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNhbnZhc1BhbmUsXG4gICAgICBjb250YWluZXJIZWlnaHQsXG4gICAgICB0aGVtZVxuICAgIClcblxuICAgIHJldHVybiBkZWx0YVxuICB9XG5cbiAgcmV0dXJuIDBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNuYXBUb1ByZXZpb3VzSG9yaXpvbnRhbCAoXG4gIGFjdGl2ZUl0ZW06IEJCb3hHcmlkbGluZSxcbiAgcHJldmlvdXNOb2RlOiBCQm94R3JpZGxpbmVOb2RlLFxuICBjYW52YXNQYW5lPzogQ2FudmFzUGFuZSxcbiAgY29udGFpbmVyV2lkdGg/OiBudW1iZXIsXG4gIHRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xuKTogbnVtYmVyIHtcbiAgaWYgKHByZXZpb3VzTm9kZT8ubmV4dCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBjb25zdCBzbmFwRGlzdGFuY2UgPSBhY3RpdmVJdGVtLnJlY3QubGVmdCAtIHByZXZpb3VzTm9kZS52YWx1ZS5yZWN0LnJpZ2h0XG4gIGxldCBjdXJyZW50Tm9kZSA9IHByZXZpb3VzTm9kZVxuICBsZXQgc2VsZWN0ZWREaXN0YW5jZSA9IC0xXG5cbiAgd2hpbGUgKGN1cnJlbnROb2RlLm5leHQgIT0gbnVsbCkge1xuICAgIGNvbnN0IG5leHROb2RlID0gY3VycmVudE5vZGUubmV4dFxuICAgIGNvbnN0IGRpc3RhbmNlID0gY3VycmVudE5vZGUudmFsdWUucmVjdC5sZWZ0IC0gbmV4dE5vZGUudmFsdWUucmVjdC5yaWdodFxuICAgIGlmIChzZWxlY3RlZERpc3RhbmNlID09PSAtMSkge1xuICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlIC0gc25hcERpc3RhbmNlKSA8PSBTTkFQX1RPTEVSQU5DRSkge1xuICAgICAgICBzZWxlY3RlZERpc3RhbmNlID0gZGlzdGFuY2VcbiAgICAgICAgZHJhd0hvcml6b250YWxHYXAoXG4gICAgICAgICAgbmV4dE5vZGUudmFsdWUsXG4gICAgICAgICAgY3VycmVudE5vZGUudmFsdWUsXG4gICAgICAgICAgc2VsZWN0ZWREaXN0YW5jZSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGNhbnZhc1BhbmUsXG4gICAgICAgICAgY29udGFpbmVyV2lkdGgsXG4gICAgICAgICAgdGhlbWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlzdGFuY2UgPT09IHNlbGVjdGVkRGlzdGFuY2UpIHtcbiAgICAgIC8vIGRpc3RhbmNlIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgIGRyYXdIb3Jpem9udGFsR2FwKFxuICAgICAgICBuZXh0Tm9kZS52YWx1ZSxcbiAgICAgICAgY3VycmVudE5vZGUudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkRGlzdGFuY2UsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBjYW52YXNQYW5lLFxuICAgICAgICBjb250YWluZXJXaWR0aCxcbiAgICAgICAgdGhlbWVcbiAgICAgIClcbiAgICB9XG4gICAgY3VycmVudE5vZGUgPSBuZXh0Tm9kZVxuICB9XG5cbiAgaWYgKHNlbGVjdGVkRGlzdGFuY2UgPiAwKSB7XG4gICAgY29uc3QgZGVsdGEgPSBzZWxlY3RlZERpc3RhbmNlIC0gc25hcERpc3RhbmNlXG4gICAgZHJhd0hvcml6b250YWxHYXAoXG4gICAgICBwcmV2aW91c05vZGUudmFsdWUsXG4gICAgICBhY3RpdmVJdGVtLFxuICAgICAgc2VsZWN0ZWREaXN0YW5jZSxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2UsXG4gICAgICBjYW52YXNQYW5lLFxuICAgICAgY29udGFpbmVyV2lkdGgsXG4gICAgICB0aGVtZVxuICAgIClcbiAgICByZXR1cm4gZGVsdGFcbiAgfVxuICByZXR1cm4gMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gc25hcFRvTmV4dEhvcml6b250YWwgKFxuICBhY3RpdmVJdGVtOiBCQm94R3JpZGxpbmUsXG4gIG5vZGU6IEJCb3hHcmlkbGluZU5vZGUsXG4gIGNhbnZhc1BhbmU/OiBDYW52YXNQYW5lLFxuICBjb250YWluZXJXaWR0aD86IG51bWJlcixcbiAgdGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG4pOiBudW1iZXIge1xuICBpZiAobm9kZT8ubmV4dCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBjb25zdCBzbmFwRGlzdGFuY2UgPSBub2RlLnZhbHVlLnJlY3QubGVmdCAtIGFjdGl2ZUl0ZW0ucmVjdC5yaWdodFxuICBsZXQgY3VycmVudE5vZGUgPSBub2RlXG4gIGxldCBzZWxlY3RlZERpc3RhbmNlID0gLTFcblxuICB3aGlsZSAoY3VycmVudE5vZGUubmV4dCAhPSBudWxsKSB7XG4gICAgY29uc3QgbmV4dE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0XG4gICAgY29uc3QgZGlzdGFuY2UgPSBuZXh0Tm9kZS52YWx1ZS5yZWN0LmxlZnQgLSBjdXJyZW50Tm9kZS52YWx1ZS5yZWN0LnJpZ2h0XG4gICAgaWYgKHNlbGVjdGVkRGlzdGFuY2UgPT09IC0xKSB7XG4gICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2UgLSBzbmFwRGlzdGFuY2UpIDw9IFNOQVBfVE9MRVJBTkNFKSB7XG4gICAgICAgIHNlbGVjdGVkRGlzdGFuY2UgPSBkaXN0YW5jZVxuICAgICAgICBkcmF3SG9yaXpvbnRhbEdhcChcbiAgICAgICAgICBjdXJyZW50Tm9kZS52YWx1ZSxcbiAgICAgICAgICBuZXh0Tm9kZS52YWx1ZSxcbiAgICAgICAgICBzZWxlY3RlZERpc3RhbmNlLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICBjYW52YXNQYW5lLFxuICAgICAgICAgIGNvbnRhaW5lcldpZHRoLFxuICAgICAgICAgIHRoZW1lXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRpc3RhbmNlID09PSBzZWxlY3RlZERpc3RhbmNlKSB7XG4gICAgICAvLyBkaXN0YW5jZSBhbHJlYWR5IHNlbGVjdGVkXG4gICAgICBkcmF3SG9yaXpvbnRhbEdhcChcbiAgICAgICAgY3VycmVudE5vZGUudmFsdWUsXG4gICAgICAgIG5leHROb2RlLnZhbHVlLFxuICAgICAgICBzZWxlY3RlZERpc3RhbmNlLFxuICAgICAgICB0cnVlLFxuICAgICAgICB0cnVlLFxuICAgICAgICBjYW52YXNQYW5lLFxuICAgICAgICBjb250YWluZXJXaWR0aCxcbiAgICAgICAgdGhlbWVcbiAgICAgIClcbiAgICB9XG4gICAgY3VycmVudE5vZGUgPSBuZXh0Tm9kZVxuICB9XG5cbiAgaWYgKHNlbGVjdGVkRGlzdGFuY2UgPiAwKSB7XG4gICAgY29uc3QgZGVsdGEgPSBzbmFwRGlzdGFuY2UgLSBzZWxlY3RlZERpc3RhbmNlXG4gICAgZHJhd0hvcml6b250YWxHYXAoXG4gICAgICBhY3RpdmVJdGVtLFxuICAgICAgbm9kZS52YWx1ZSxcbiAgICAgIHNlbGVjdGVkRGlzdGFuY2UsXG4gICAgICBmYWxzZSxcbiAgICAgIHRydWUsXG4gICAgICBjYW52YXNQYW5lLFxuICAgICAgY29udGFpbmVyV2lkdGgsXG4gICAgICB0aGVtZVxuICAgIClcbiAgICByZXR1cm4gZGVsdGFcbiAgfVxuICByZXR1cm4gMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gc25hcFRvUHJldmlvdXNWZXJ0aWNhbCAoXG4gIGFjdGl2ZUl0ZW06IEJCb3hHcmlkbGluZSxcbiAgcHJldmlvdXNOb2RlOiBCQm94R3JpZGxpbmVOb2RlLFxuICBjYW52YXNQYW5lPzogQ2FudmFzUGFuZSxcbiAgY29udGFpbmVySGVpZ2h0PzogbnVtYmVyLFxuICB0aGVtZT86IElNVGhlbWVWYXJpYWJsZXNcbik6IG51bWJlciB7XG4gIGlmIChwcmV2aW91c05vZGU/Lm5leHQgPT0gbnVsbCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgY29uc3Qgc25hcERpc3RhbmNlID0gYWN0aXZlSXRlbS5yZWN0LnRvcCAtIHByZXZpb3VzTm9kZS52YWx1ZS5yZWN0LmJvdHRvbVxuICBsZXQgY3VycmVudE5vZGUgPSBwcmV2aW91c05vZGVcbiAgbGV0IHNlbGVjdGVkRGlzdGFuY2UgPSAtMVxuXG4gIHdoaWxlIChjdXJyZW50Tm9kZS5uZXh0ICE9IG51bGwpIHtcbiAgICBjb25zdCBuZXh0Tm9kZSA9IGN1cnJlbnROb2RlLm5leHRcbiAgICBjb25zdCBkaXN0YW5jZSA9IGN1cnJlbnROb2RlLnZhbHVlLnJlY3QudG9wIC0gbmV4dE5vZGUudmFsdWUucmVjdC5ib3R0b21cbiAgICBpZiAoc2VsZWN0ZWREaXN0YW5jZSA9PT0gLTEpIHtcbiAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZSAtIHNuYXBEaXN0YW5jZSkgPD0gU05BUF9UT0xFUkFOQ0UpIHtcbiAgICAgICAgc2VsZWN0ZWREaXN0YW5jZSA9IGRpc3RhbmNlXG4gICAgICAgIGRyYXdWZXJ0aWNhbEdhcChcbiAgICAgICAgICBuZXh0Tm9kZS52YWx1ZSxcbiAgICAgICAgICBjdXJyZW50Tm9kZS52YWx1ZSxcbiAgICAgICAgICBzZWxlY3RlZERpc3RhbmNlLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgY2FudmFzUGFuZSxcbiAgICAgICAgICBjb250YWluZXJIZWlnaHQsXG4gICAgICAgICAgdGhlbWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlzdGFuY2UgPT09IHNlbGVjdGVkRGlzdGFuY2UpIHtcbiAgICAgIC8vIGRpc3RhbmNlIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgIGRyYXdWZXJ0aWNhbEdhcChcbiAgICAgICAgbmV4dE5vZGUudmFsdWUsXG4gICAgICAgIGN1cnJlbnROb2RlLnZhbHVlLFxuICAgICAgICBzZWxlY3RlZERpc3RhbmNlLFxuICAgICAgICB0cnVlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgY2FudmFzUGFuZSxcbiAgICAgICAgY29udGFpbmVySGVpZ2h0LFxuICAgICAgICB0aGVtZVxuICAgICAgKVxuICAgIH1cbiAgICBjdXJyZW50Tm9kZSA9IG5leHROb2RlXG4gIH1cblxuICBpZiAoc2VsZWN0ZWREaXN0YW5jZSA+IDApIHtcbiAgICBjb25zdCBkZWx0YSA9IHNlbGVjdGVkRGlzdGFuY2UgLSBzbmFwRGlzdGFuY2VcbiAgICBkcmF3VmVydGljYWxHYXAoXG4gICAgICBwcmV2aW91c05vZGUudmFsdWUsXG4gICAgICBhY3RpdmVJdGVtLFxuICAgICAgc2VsZWN0ZWREaXN0YW5jZSxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2UsXG4gICAgICBjYW52YXNQYW5lLFxuICAgICAgY29udGFpbmVySGVpZ2h0LFxuICAgICAgdGhlbWVcbiAgICApXG4gICAgcmV0dXJuIGRlbHRhXG4gIH1cbiAgcmV0dXJuIDBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNuYXBUb05leHRWZXJ0aWNhbCAoXG4gIGFjdGl2ZUl0ZW06IEJCb3hHcmlkbGluZSxcbiAgbm9kZTogQkJveEdyaWRsaW5lTm9kZSxcbiAgY2FudmFzUGFuZT86IENhbnZhc1BhbmUsXG4gIGNvbnRhaW5lckhlaWdodD86IG51bWJlcixcbiAgdGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG4pOiBudW1iZXIge1xuICBpZiAobm9kZT8ubmV4dCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBjb25zdCBzbmFwRGlzdGFuY2UgPSBub2RlLnZhbHVlLnJlY3QudG9wIC0gYWN0aXZlSXRlbS5yZWN0LmJvdHRvbVxuICBsZXQgY3VycmVudE5vZGUgPSBub2RlXG4gIGxldCBzZWxlY3RlZERpc3RhbmNlID0gLTFcblxuICB3aGlsZSAoY3VycmVudE5vZGUubmV4dCAhPSBudWxsKSB7XG4gICAgY29uc3QgbmV4dE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0XG4gICAgY29uc3QgZGlzdGFuY2UgPSBuZXh0Tm9kZS52YWx1ZS5yZWN0LnRvcCAtIGN1cnJlbnROb2RlLnZhbHVlLnJlY3QuYm90dG9tXG4gICAgaWYgKHNlbGVjdGVkRGlzdGFuY2UgPT09IC0xKSB7XG4gICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2UgLSBzbmFwRGlzdGFuY2UpIDw9IFNOQVBfVE9MRVJBTkNFKSB7XG4gICAgICAgIHNlbGVjdGVkRGlzdGFuY2UgPSBkaXN0YW5jZVxuICAgICAgICBkcmF3VmVydGljYWxHYXAoXG4gICAgICAgICAgY3VycmVudE5vZGUudmFsdWUsXG4gICAgICAgICAgbmV4dE5vZGUudmFsdWUsXG4gICAgICAgICAgc2VsZWN0ZWREaXN0YW5jZSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgY2FudmFzUGFuZSxcbiAgICAgICAgICBjb250YWluZXJIZWlnaHQsXG4gICAgICAgICAgdGhlbWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlzdGFuY2UgPT09IHNlbGVjdGVkRGlzdGFuY2UpIHtcbiAgICAgIC8vIGRpc3RhbmNlIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgIGRyYXdWZXJ0aWNhbEdhcChcbiAgICAgICAgY3VycmVudE5vZGUudmFsdWUsXG4gICAgICAgIG5leHROb2RlLnZhbHVlLFxuICAgICAgICBzZWxlY3RlZERpc3RhbmNlLFxuICAgICAgICB0cnVlLFxuICAgICAgICB0cnVlLFxuICAgICAgICBjYW52YXNQYW5lLFxuICAgICAgICBjb250YWluZXJIZWlnaHQsXG4gICAgICAgIHRoZW1lXG4gICAgICApXG4gICAgfVxuICAgIGN1cnJlbnROb2RlID0gbmV4dE5vZGVcbiAgfVxuXG4gIGlmIChzZWxlY3RlZERpc3RhbmNlID4gMCkge1xuICAgIGNvbnN0IGRlbHRhID0gc25hcERpc3RhbmNlIC0gc2VsZWN0ZWREaXN0YW5jZVxuICAgIGRyYXdWZXJ0aWNhbEdhcChcbiAgICAgIGFjdGl2ZUl0ZW0sXG4gICAgICBub2RlLnZhbHVlLFxuICAgICAgc2VsZWN0ZWREaXN0YW5jZSxcbiAgICAgIGZhbHNlLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNhbnZhc1BhbmUsXG4gICAgICBjb250YWluZXJIZWlnaHQsXG4gICAgICB0aGVtZVxuICAgIClcbiAgICByZXR1cm4gZGVsdGFcbiAgfVxuICByZXR1cm4gMFxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcHJldmlvdXNJdGVtXG4gKiBAcGFyYW0gbmV4dEl0ZW1cbiAqIEBwYXJhbSBkaXN0YW5jZVxuICogQHBhcmFtIHJldmVyc2UgSWYgdHJ1ZSwgc3RhcnQgZHJhd2luZyBmcm9tIG5leHRJdGVtIHRvIHByZXZpb3VzSXRlbVxuICogQHBhcmFtIGNhbnZhc1BhbmVcbiAqIEBwYXJhbSB0aGVtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd0hvcml6b250YWxHYXAgKFxuICBwcmV2aW91c0l0ZW06IEJCb3hHcmlkbGluZSxcbiAgbmV4dEl0ZW06IEJCb3hHcmlkbGluZSxcbiAgZGlzdGFuY2U6IG51bWJlcixcbiAgZHJhd0xhYmVsOiBib29sZWFuLFxuICByZXZlcnNlOiBib29sZWFuLFxuICBjYW52YXNQYW5lOiBDYW52YXNQYW5lLFxuICBjb250YWluZXJXaWR0aDogbnVtYmVyLFxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuKTogdm9pZCB7XG4gIGlmIChjYW52YXNQYW5lICE9IG51bGwgJiYgdGhlbWUgIT0gbnVsbCkge1xuICAgIGNvbnN0IHltaW4gPSBNYXRoLm1heChwcmV2aW91c0l0ZW0ucmVjdC50b3AsIG5leHRJdGVtLnJlY3QudG9wKVxuICAgIGNvbnN0IHltYXggPSBNYXRoLm1pbihwcmV2aW91c0l0ZW0ucmVjdC5ib3R0b20sIG5leHRJdGVtLnJlY3QuYm90dG9tKVxuXG4gICAgY2FudmFzUGFuZS5zZXRDb2xvcihwb2xpc2hlZC5yZ2JhKHRoZW1lLmNvbG9ycy5wYWxldHRlLmRhbmdlcls4MDBdLCAwLjYpKVxuICAgIGNvbnN0IHJlY3Q6IFBhcnRpYWw8Q2xpZW50UmVjdD4gPSB7XG4gICAgICBsZWZ0OiByZXZlcnNlID8gbmV4dEl0ZW0ucmVjdC5sZWZ0IC0gZGlzdGFuY2UgOiBwcmV2aW91c0l0ZW0ucmVjdC5yaWdodCxcbiAgICAgIHRvcDogeW1pbixcbiAgICAgIHdpZHRoOiBkaXN0YW5jZSxcbiAgICAgIGhlaWdodDogeW1heCAtIHltaW5cbiAgICB9XG4gICAgY2FudmFzUGFuZS5kcmF3UmVjdChyZWN0KVxuXG4gICAgaWYgKGRyYXdMYWJlbCkge1xuICAgICAgY29uc3QgY2VudGVyID0gKHltaW4gKyB5bWF4KSAvIDJcbiAgICAgIGNvbnN0IHVzZVBlcmNlbnRhZ2UgPSBwcmV2aW91c0l0ZW0ucmlnaHQudXNlUGVyY2VudGFnZVxuICAgICAgY29uc3QgbGFiZWwgPSB1c2VQZXJjZW50YWdlXG4gICAgICAgID8gamltdVV0aWxzLmZvcm1hdFBlcmNlbnRhZ2VOdW1iZXIodXRpbHMudG9SYXRpbyhkaXN0YW5jZSwgY29udGFpbmVyV2lkdGgpKVxuICAgICAgICA6IGppbXVVdGlscy5mb3JtYXRQaXhlbE51bWJlcihgJHtkaXN0YW5jZX1weGApXG4gICAgICBjYW52YXNQYW5lLnNldENvbG9yKHRoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNjAwXSlcbiAgICAgIGNhbnZhc1BhbmUuZHJhd0xpbmUoXG4gICAgICAgIHJldmVyc2UgPyBuZXh0SXRlbS5yZWN0LmxlZnQgLSBkaXN0YW5jZSA6IHByZXZpb3VzSXRlbS5yZWN0LnJpZ2h0LFxuICAgICAgICBjZW50ZXIsXG4gICAgICAgIHJldmVyc2UgPyBuZXh0SXRlbS5yZWN0LmxlZnQgOiBwcmV2aW91c0l0ZW0ucmVjdC5yaWdodCArIGRpc3RhbmNlLFxuICAgICAgICBjZW50ZXIsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBsYWJlbFxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0hvcml6b250YWxEaXN0YW5jZSAoXG4gIGFjdGl2ZUl0ZW06IEJCb3hHcmlkbGluZSxcbiAgcHJldmlvdXNJdGVtOiB7IGdyaWRsaW5lOiBCQm94R3JpZGxpbmUsIGZpeGVkOiBib29sZWFuIH0sXG4gIG5leHRJdGVtOiB7IGdyaWRsaW5lOiBCQm94R3JpZGxpbmUsIGZpeGVkOiBib29sZWFuIH0sXG4gIGlzUmVzaXppbmc6IGJvb2xlYW4sXG4gIGR4OiBudW1iZXIsXG4gIGNhbnZhc1BhbmU6IENhbnZhc1BhbmUsXG4gIGNvbnRhaW5lcldpZHRoOiBudW1iZXIsXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4pOiB2b2lkIHtcbiAgaWYgKGNhbnZhc1BhbmUgIT0gbnVsbCAmJiB0aGVtZSAhPSBudWxsKSB7XG4gICAgY2FudmFzUGFuZS5zZXRDb2xvcih0aGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzYwMF0pXG4gICAgbGV0IGlzRWRnZSA9IHByZXZpb3VzSXRlbS5ncmlkbGluZT8ucmVjdC50b3AgPT09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWVxuICAgIGNvbnN0IHByZXZpb3VzUmVjdDogUGFydGlhbDxDbGllbnRSZWN0PiA9IHByZXZpb3VzSXRlbS5ncmlkbGluZS5yZWN0XG4gICAgLy8gRG8gbm90IGRyYXcgZGlzdGFuY2UgdG8gZWRnZSBpZiBpdCBpcyBub3QgcmVzaXppbmdcbiAgICBpZiAocHJldmlvdXNSZWN0ICE9IG51bGwgJiYgYWN0aXZlSXRlbS5sZWZ0ICE9IG51bGwgJiYgKCFpc0VkZ2UgfHwgKGlzUmVzaXppbmcgJiYgIXByZXZpb3VzSXRlbS5maXhlZCkpKSB7XG4gICAgICBjb25zdCB5bWluID0gTWF0aC5tYXgoYWN0aXZlSXRlbS5yZWN0LnRvcCwgcHJldmlvdXNSZWN0LnRvcClcbiAgICAgIGNvbnN0IHltYXggPSBNYXRoLm1pbihcbiAgICAgICAgYWN0aXZlSXRlbS5yZWN0LmJvdHRvbSxcbiAgICAgICAgcHJldmlvdXNSZWN0LmJvdHRvbVxuICAgICAgKVxuXG4gICAgICBjb25zdCBjZW50ZXIgPSAoeW1pbiArIHltYXgpIC8gMlxuICAgICAgY29uc3QgdXNlUGVyY2VudGFnZSA9IGFjdGl2ZUl0ZW0ubGVmdC51c2VQZXJjZW50YWdlXG4gICAgICBsZXQgZGlzdGFuY2UgPSBhY3RpdmVJdGVtLnJlY3QubGVmdCAtIHByZXZpb3VzUmVjdC5yaWdodFxuICAgICAgaWYgKCFwcmV2aW91c0l0ZW0uZml4ZWQpIHtcbiAgICAgICAgZGlzdGFuY2UgKz0gZHhcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxhYmVsID0gdXNlUGVyY2VudGFnZVxuICAgICAgICA/IGppbXVVdGlscy5mb3JtYXRQZXJjZW50YWdlTnVtYmVyKHV0aWxzLnRvUmF0aW8oZGlzdGFuY2UsIGNvbnRhaW5lcldpZHRoKSlcbiAgICAgICAgOiBqaW11VXRpbHMuZm9ybWF0UGl4ZWxOdW1iZXIoYCR7ZGlzdGFuY2V9cHhgKVxuICAgICAgY2FudmFzUGFuZS5kcmF3TGluZShcbiAgICAgICAgcHJldmlvdXNSZWN0LnJpZ2h0LFxuICAgICAgICBjZW50ZXIsXG4gICAgICAgIHByZXZpb3VzUmVjdC5yaWdodCArIGRpc3RhbmNlLFxuICAgICAgICBjZW50ZXIsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBsYWJlbFxuICAgICAgKVxuICAgIH1cblxuICAgIGlzRWRnZSA9IG5leHRJdGVtLmdyaWRsaW5lLnJlY3QudG9wID09PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFlcbiAgICBjb25zdCBuZXh0UmVjdDogUGFydGlhbDxDbGllbnRSZWN0PiA9IG5leHRJdGVtLmdyaWRsaW5lLnJlY3RcbiAgICBpZiAobmV4dFJlY3QgIT0gbnVsbCAmJiBhY3RpdmVJdGVtLnJpZ2h0ICE9IG51bGwgJiYgKCFpc0VkZ2UgfHwgKGlzUmVzaXppbmcgJiYgIW5leHRJdGVtLmZpeGVkKSkpIHtcbiAgICAgIGNvbnN0IHltaW4gPSBNYXRoLm1heChhY3RpdmVJdGVtLnJlY3QudG9wLCBuZXh0UmVjdC50b3ApXG4gICAgICBjb25zdCB5bWF4ID0gTWF0aC5taW4oXG4gICAgICAgIGFjdGl2ZUl0ZW0ucmVjdC5ib3R0b20sXG4gICAgICAgIG5leHRSZWN0LmJvdHRvbVxuICAgICAgKVxuXG4gICAgICBjb25zdCBjZW50ZXIgPSAoeW1pbiArIHltYXgpIC8gMlxuICAgICAgY29uc3QgdXNlUGVyY2VudGFnZSA9IGFjdGl2ZUl0ZW0ucmlnaHQudXNlUGVyY2VudGFnZVxuICAgICAgbGV0IGRpc3RhbmNlID0gbmV4dFJlY3QubGVmdCAtIGFjdGl2ZUl0ZW0ucmVjdC5yaWdodFxuICAgICAgaWYgKCFuZXh0SXRlbS5maXhlZCkge1xuICAgICAgICBkaXN0YW5jZSAtPSBkeFxuICAgICAgfVxuICAgICAgY29uc3QgbGFiZWwgPSB1c2VQZXJjZW50YWdlXG4gICAgICAgID8gamltdVV0aWxzLmZvcm1hdFBlcmNlbnRhZ2VOdW1iZXIodXRpbHMudG9SYXRpbyhkaXN0YW5jZSwgY29udGFpbmVyV2lkdGgpKVxuICAgICAgICA6IGppbXVVdGlscy5mb3JtYXRQaXhlbE51bWJlcihgJHtkaXN0YW5jZX1weGApXG4gICAgICBjYW52YXNQYW5lLmRyYXdMaW5lKFxuICAgICAgICBuZXh0UmVjdC5sZWZ0LFxuICAgICAgICBjZW50ZXIsXG4gICAgICAgIG5leHRSZWN0LmxlZnQgLSBkaXN0YW5jZSxcbiAgICAgICAgY2VudGVyLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgbGFiZWxcbiAgICAgIClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdWZXJ0aWNhbEdhcCAoXG4gIHByZXZpb3VzSXRlbTogQkJveEdyaWRsaW5lLFxuICBuZXh0SXRlbTogQkJveEdyaWRsaW5lLFxuICBkaXN0YW5jZTogbnVtYmVyLFxuICBkcmF3TGFiZWw6IGJvb2xlYW4sXG4gIHJldmVyc2U6IGJvb2xlYW4sXG4gIGNhbnZhc1BhbmU6IENhbnZhc1BhbmUsXG4gIGNvbnRhaW5lckhlaWdodDogbnVtYmVyLFxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuKTogdm9pZCB7XG4gIGlmIChjYW52YXNQYW5lICE9IG51bGwgJiYgdGhlbWUgIT0gbnVsbCkge1xuICAgIGNvbnN0IHhtaW4gPSBNYXRoLm1heChwcmV2aW91c0l0ZW0ucmVjdC5sZWZ0LCBuZXh0SXRlbS5yZWN0LmxlZnQpXG4gICAgY29uc3QgeG1heCA9IE1hdGgubWluKHByZXZpb3VzSXRlbS5yZWN0LnJpZ2h0LCBuZXh0SXRlbS5yZWN0LnJpZ2h0KVxuXG4gICAgY2FudmFzUGFuZS5zZXRDb2xvcihwb2xpc2hlZC5yZ2JhKHRoZW1lLmNvbG9ycy5wYWxldHRlLmRhbmdlcls4MDBdLCAwLjYpKVxuICAgIGNvbnN0IHJlY3Q6IFBhcnRpYWw8Q2xpZW50UmVjdD4gPSB7XG4gICAgICBsZWZ0OiB4bWluLFxuICAgICAgdG9wOiByZXZlcnNlID8gbmV4dEl0ZW0ucmVjdC50b3AgLSBkaXN0YW5jZSA6IHByZXZpb3VzSXRlbS5yZWN0LmJvdHRvbSxcbiAgICAgIHdpZHRoOiB4bWF4IC0geG1pbixcbiAgICAgIGhlaWdodDogZGlzdGFuY2VcbiAgICB9XG4gICAgY2FudmFzUGFuZS5kcmF3UmVjdChyZWN0KVxuXG4gICAgaWYgKGRyYXdMYWJlbCkge1xuICAgICAgY29uc3QgY2VudGVyID0gKHhtaW4gKyB4bWF4KSAvIDJcbiAgICAgIGNvbnN0IHVzZVBlcmNlbnRhZ2UgPSBwcmV2aW91c0l0ZW0uYm90dG9tLnVzZVBlcmNlbnRhZ2VcbiAgICAgIGNvbnN0IGxhYmVsID0gdXNlUGVyY2VudGFnZVxuICAgICAgICA/IGppbXVVdGlscy5mb3JtYXRQZXJjZW50YWdlTnVtYmVyKHV0aWxzLnRvUmF0aW8oZGlzdGFuY2UsIGNvbnRhaW5lckhlaWdodCkpXG4gICAgICAgIDogamltdVV0aWxzLmZvcm1hdFBpeGVsTnVtYmVyKGAke2Rpc3RhbmNlfXB4YClcbiAgICAgIGNhbnZhc1BhbmUuc2V0Q29sb3IodGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs2MDBdKVxuICAgICAgY2FudmFzUGFuZS5kcmF3TGluZShcbiAgICAgICAgY2VudGVyLFxuICAgICAgICByZXZlcnNlID8gbmV4dEl0ZW0ucmVjdC50b3AgLSBkaXN0YW5jZSA6IHByZXZpb3VzSXRlbS5yZWN0LmJvdHRvbSxcbiAgICAgICAgY2VudGVyLFxuICAgICAgICByZXZlcnNlID8gbmV4dEl0ZW0ucmVjdC50b3AgOiBwcmV2aW91c0l0ZW0ucmVjdC5ib3R0b20gKyBkaXN0YW5jZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGxhYmVsXG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VmVydGljYWxEaXN0YW5jZSAoXG4gIGFjdGl2ZUl0ZW06IEJCb3hHcmlkbGluZSxcbiAgcHJldmlvdXNJdGVtOiB7IGdyaWRsaW5lOiBCQm94R3JpZGxpbmUsIGZpeGVkOiBib29sZWFuIH0sXG4gIG5leHRJdGVtOiB7IGdyaWRsaW5lOiBCQm94R3JpZGxpbmUsIGZpeGVkOiBib29sZWFuIH0sXG4gIGlzUmVzaXppbmc6IGJvb2xlYW4sXG4gIGR5OiBudW1iZXIsXG4gIGNhbnZhc1BhbmU6IENhbnZhc1BhbmUsXG4gIGNvbnRhaW5lckhlaWdodDogbnVtYmVyLFxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuKTogdm9pZCB7XG4gIGlmIChjYW52YXNQYW5lICE9IG51bGwgJiYgdGhlbWUgIT0gbnVsbCkge1xuICAgIGNhbnZhc1BhbmUuc2V0Q29sb3IodGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs2MDBdKVxuICAgIGxldCBpc0VkZ2UgPSBwcmV2aW91c0l0ZW0uZ3JpZGxpbmUucmVjdC5sZWZ0ID09PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFlcbiAgICBjb25zdCBwcmV2aW91c1JlY3Q6IFBhcnRpYWw8Q2xpZW50UmVjdD4gPSBwcmV2aW91c0l0ZW0uZ3JpZGxpbmUucmVjdFxuICAgIGlmIChwcmV2aW91c1JlY3QgIT0gbnVsbCAmJiBhY3RpdmVJdGVtLnRvcCAhPSBudWxsICYmICghaXNFZGdlIHx8IChpc1Jlc2l6aW5nICYmICFwcmV2aW91c0l0ZW0uZml4ZWQpKSkge1xuICAgICAgY29uc3QgeG1pbiA9IE1hdGgubWF4KGFjdGl2ZUl0ZW0ucmVjdC5sZWZ0LCBwcmV2aW91c1JlY3QubGVmdClcbiAgICAgIGNvbnN0IHhtYXggPSBNYXRoLm1pbihhY3RpdmVJdGVtLnJlY3QucmlnaHQsIHByZXZpb3VzUmVjdC5yaWdodClcblxuICAgICAgY29uc3QgY2VudGVyID0gKHhtaW4gKyB4bWF4KSAvIDJcbiAgICAgIGNvbnN0IHVzZVBlcmNlbnRhZ2UgPSBhY3RpdmVJdGVtLnRvcC51c2VQZXJjZW50YWdlXG4gICAgICBsZXQgZGlzdGFuY2UgPSBhY3RpdmVJdGVtLnJlY3QudG9wIC0gcHJldmlvdXNSZWN0LmJvdHRvbVxuICAgICAgaWYgKCFwcmV2aW91c0l0ZW0uZml4ZWQpIHtcbiAgICAgICAgZGlzdGFuY2UgKz0gZHlcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxhYmVsID0gdXNlUGVyY2VudGFnZVxuICAgICAgICA/IGppbXVVdGlscy5mb3JtYXRQZXJjZW50YWdlTnVtYmVyKHV0aWxzLnRvUmF0aW8oZGlzdGFuY2UsIGNvbnRhaW5lckhlaWdodCkpXG4gICAgICAgIDogamltdVV0aWxzLmZvcm1hdFBpeGVsTnVtYmVyKGAke2Rpc3RhbmNlfXB4YClcbiAgICAgIGNhbnZhc1BhbmUuZHJhd0xpbmUoXG4gICAgICAgIGNlbnRlcixcbiAgICAgICAgcHJldmlvdXNSZWN0LmJvdHRvbSxcbiAgICAgICAgY2VudGVyLFxuICAgICAgICBwcmV2aW91c1JlY3QuYm90dG9tICsgZGlzdGFuY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBsYWJlbFxuICAgICAgKVxuICAgIH1cblxuICAgIGlzRWRnZSA9IG5leHRJdGVtLmdyaWRsaW5lLnJlY3QubGVmdCA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXG4gICAgY29uc3QgbmV4dFJlY3Q6IFBhcnRpYWw8Q2xpZW50UmVjdD4gPSBuZXh0SXRlbS5ncmlkbGluZS5yZWN0XG4gICAgaWYgKG5leHRSZWN0ICE9IG51bGwgJiYgYWN0aXZlSXRlbS5ib3R0b20gIT0gbnVsbCAmJiAoIWlzRWRnZSB8fCAoaXNSZXNpemluZyAmJiAhbmV4dEl0ZW0uZml4ZWQpKSkge1xuICAgICAgY29uc3QgeG1pbiA9IE1hdGgubWF4KGFjdGl2ZUl0ZW0ucmVjdC5sZWZ0LCBuZXh0UmVjdC5sZWZ0KVxuICAgICAgY29uc3QgeG1heCA9IE1hdGgubWluKGFjdGl2ZUl0ZW0ucmVjdC5yaWdodCwgbmV4dFJlY3QucmlnaHQpXG5cbiAgICAgIGNvbnN0IGNlbnRlciA9ICh4bWluICsgeG1heCkgLyAyXG4gICAgICBjb25zdCB1c2VQZXJjZW50YWdlID0gYWN0aXZlSXRlbS5ib3R0b20udXNlUGVyY2VudGFnZVxuICAgICAgbGV0IGRpc3RhbmNlID0gbmV4dFJlY3QudG9wIC0gYWN0aXZlSXRlbS5yZWN0LmJvdHRvbVxuICAgICAgaWYgKCFuZXh0SXRlbS5maXhlZCkge1xuICAgICAgICBkaXN0YW5jZSAtPSBkeVxuICAgICAgfVxuICAgICAgY29uc3QgbGFiZWwgPSB1c2VQZXJjZW50YWdlXG4gICAgICAgID8gamltdVV0aWxzLmZvcm1hdFBlcmNlbnRhZ2VOdW1iZXIodXRpbHMudG9SYXRpbyhkaXN0YW5jZSwgY29udGFpbmVySGVpZ2h0KSlcbiAgICAgICAgOiBqaW11VXRpbHMuZm9ybWF0UGl4ZWxOdW1iZXIoYCR7ZGlzdGFuY2V9cHhgKVxuICAgICAgY2FudmFzUGFuZS5kcmF3TGluZShcbiAgICAgICAgY2VudGVyLFxuICAgICAgICBuZXh0UmVjdC50b3AsXG4gICAgICAgIGNlbnRlcixcbiAgICAgICAgbmV4dFJlY3QudG9wIC0gZGlzdGFuY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBsYWJlbFxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc25hcEJ5RGlzdGFuY2UgKFxuICBhY3RpdmVJdGVtOiBCQm94R3JpZGxpbmUsXG4gIGJib3hHcmlkbGluZXM6IEJCb3hHcmlkbGluZVtdLFxuICBkZWx0YTogUm5kRGVsdGEsXG4gIGNvbnRhaW5lcldpZHRoOiBudW1iZXIsXG4gIGNvbnRhaW5lckhlaWdodDogbnVtYmVyLFxuICBjYW52YXNQYW5lPzogQ2FudmFzUGFuZSxcbiAgdGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG4pOiB7IGR4OiBudW1iZXIsIGR5OiBudW1iZXIgfSB7XG4gIGxldCBkeCA9IDBcbiAgbGV0IGR5ID0gMFxuICBjb25zdCBpc1Jlc2l6aW5nID0gZGVsdGEudyAhPT0gMCB8fCBkZWx0YS5oICE9PSAwXG5cbiAgaWYgKCFpc1Jlc2l6aW5nIHx8IGRlbHRhLncgIT09IDApIHtcbiAgICAvLyAxLiBob3Jpem9udGFsXG4gICAgbGV0IHByZXZpb3VzSXRlbXMgPSBmaW5kUHJldmlvdXNIb3Jpem9udGFsbHlSZWxhdGVkKGFjdGl2ZUl0ZW0sIGJib3hHcmlkbGluZXMpXG4gICAgcHJldmlvdXNJdGVtcyA9IGFkZExlZnRFZGdlKHByZXZpb3VzSXRlbXMsIGFjdGl2ZUl0ZW0ubGVmdD8udmFsdWUgPT0gbnVsbCB8fCBhY3RpdmVJdGVtLmxlZnQ/LnVzZVBlcmNlbnRhZ2UpXG4gICAgbGV0IG5leHRJdGVtcyA9IGZpbmROZXh0SG9yaXpvbnRhbGx5UmVsYXRlZChhY3RpdmVJdGVtLCBiYm94R3JpZGxpbmVzKVxuICAgIG5leHRJdGVtcyA9IGFkZFJpZ2h0RWRnZShuZXh0SXRlbXMsIGFjdGl2ZUl0ZW0ucmlnaHQ/LnZhbHVlID09IG51bGwgfHwgYWN0aXZlSXRlbS5yaWdodC51c2VQZXJjZW50YWdlLCBjb250YWluZXJXaWR0aClcbiAgICAvLyAxLjEgc25hcCB0byBuZWFyYnkgdHdvIGl0ZW1zXG4gICAgZHggPSBzbmFwVG9OZWFyYnlIb3Jpem9udGFsKFxuICAgICAgYWN0aXZlSXRlbSxcbiAgICAgIHsgZ3JpZGxpbmU6IHByZXZpb3VzSXRlbXMudmFsdWUsIGZpeGVkOiBkZWx0YS53ICE9PSAwICYmIGRlbHRhLnggPT09IDAgfSxcbiAgICAgIHsgZ3JpZGxpbmU6IG5leHRJdGVtcy52YWx1ZSwgZml4ZWQ6IGRlbHRhLncgIT09IDAgJiYgZGVsdGEueCAhPT0gMCB9LFxuICAgICAgY2FudmFzUGFuZSxcbiAgICAgIGNvbnRhaW5lcldpZHRoLFxuICAgICAgdGhlbWVcbiAgICApXG4gICAgLy8gMS4yIHNuYXAgdG8gcHJldmlvdXMgaXRlbXNcbiAgICBpZiAoZHggPT09IDAgJiYgKGRlbHRhLncgPT09IDAgfHwgZGVsdGEueCAhPT0gMCkpIHtcbiAgICAgIGR4ID0gc25hcFRvUHJldmlvdXNIb3Jpem9udGFsKGFjdGl2ZUl0ZW0sIHByZXZpb3VzSXRlbXMsIGNhbnZhc1BhbmUsIGNvbnRhaW5lcldpZHRoLCB0aGVtZSlcbiAgICB9XG4gICAgLy8gMS4zIHNuYXAgdG8gbmV4dCBpdGVtc1xuICAgIGlmIChkeCA9PT0gMCAmJiAoZGVsdGEudyA9PT0gMCB8fCBkZWx0YS54ID09PSAwKSkge1xuICAgICAgZHggPSBzbmFwVG9OZXh0SG9yaXpvbnRhbChhY3RpdmVJdGVtLCBuZXh0SXRlbXMsIGNhbnZhc1BhbmUsIGNvbnRhaW5lcldpZHRoLCB0aGVtZSlcbiAgICB9XG4gICAgZHJhd0hvcml6b250YWxEaXN0YW5jZShcbiAgICAgIGFjdGl2ZUl0ZW0sXG4gICAgICB7IGdyaWRsaW5lOiBwcmV2aW91c0l0ZW1zLnZhbHVlLCBmaXhlZDogZGVsdGEudyAhPT0gMCAmJiBkZWx0YS54ID09PSAwIH0sXG4gICAgICB7IGdyaWRsaW5lOiBuZXh0SXRlbXMudmFsdWUsIGZpeGVkOiBkZWx0YS53ICE9PSAwICYmIGRlbHRhLnggIT09IDAgfSxcbiAgICAgIGRlbHRhLncgIT09IDAsXG4gICAgICBkeCxcbiAgICAgIGNhbnZhc1BhbmUsXG4gICAgICBjb250YWluZXJXaWR0aCxcbiAgICAgIHRoZW1lXG4gICAgKVxuICB9XG5cbiAgaWYgKCFpc1Jlc2l6aW5nIHx8IGRlbHRhLmggIT09IDApIHtcbiAgICAvLyAyLiB2ZXJ0aWNhbFxuICAgIGxldCBwcmV2aW91c0l0ZW1zID0gZmluZFByZXZpb3VzVmVydGljYWxseVJlbGF0ZWQoYWN0aXZlSXRlbSwgYmJveEdyaWRsaW5lcylcbiAgICBwcmV2aW91c0l0ZW1zID0gYWRkVG9wRWRnZShwcmV2aW91c0l0ZW1zLCBhY3RpdmVJdGVtLnRvcD8udmFsdWUgPT0gbnVsbCB8fCBhY3RpdmVJdGVtLnRvcC51c2VQZXJjZW50YWdlKVxuICAgIGxldCBuZXh0SXRlbXMgPSBmaW5kTmV4dFZlcnRpY2FsbHlSZWxhdGVkKGFjdGl2ZUl0ZW0sIGJib3hHcmlkbGluZXMpXG4gICAgbmV4dEl0ZW1zID0gYWRkQm90dG9tRWRnZShuZXh0SXRlbXMsIGFjdGl2ZUl0ZW0uYm90dG9tPy52YWx1ZSA9PSBudWxsIHx8IGFjdGl2ZUl0ZW0uYm90dG9tLnVzZVBlcmNlbnRhZ2UsIGNvbnRhaW5lckhlaWdodClcbiAgICAvLyAyLjEgc25hcCB0byBuZWFyYnkgdHdvIGl0ZW1zXG4gICAgZHkgPSBzbmFwVG9OZWFyYnlWZXJ0aWNhbChcbiAgICAgIGFjdGl2ZUl0ZW0sXG4gICAgICB7IGdyaWRsaW5lOiBwcmV2aW91c0l0ZW1zLnZhbHVlLCBmaXhlZDogZGVsdGEuaCAhPT0gMCAmJiBkZWx0YS55ID09PSAwIH0sXG4gICAgICB7IGdyaWRsaW5lOiBuZXh0SXRlbXMudmFsdWUsIGZpeGVkOiBkZWx0YS5oICE9PSAwICYmIGRlbHRhLnkgIT09IDAgfSxcbiAgICAgIGNhbnZhc1BhbmUsXG4gICAgICBjb250YWluZXJIZWlnaHQsXG4gICAgICB0aGVtZVxuICAgIClcblxuICAgIC8vIDIuMiBzbmFwIHRvIHByZXZpb3VzIGl0ZW1zXG4gICAgaWYgKGR5ID09PSAwICYmIChkZWx0YS5oID09PSAwIHx8IGRlbHRhLnkgIT09IDApKSB7XG4gICAgICBkeSA9IHNuYXBUb1ByZXZpb3VzVmVydGljYWwoYWN0aXZlSXRlbSwgcHJldmlvdXNJdGVtcywgY2FudmFzUGFuZSwgY29udGFpbmVySGVpZ2h0LCB0aGVtZSlcbiAgICB9XG4gICAgLy8gMi4zIHNuYXAgdG8gbmV4dCBpdGVtc1xuICAgIGlmIChkeSA9PT0gMCAmJiAoZGVsdGEuaCA9PT0gMCB8fCBkZWx0YS55ID09PSAwKSkge1xuICAgICAgZHkgPSBzbmFwVG9OZXh0VmVydGljYWwoYWN0aXZlSXRlbSwgbmV4dEl0ZW1zLCBjYW52YXNQYW5lLCBjb250YWluZXJIZWlnaHQsIHRoZW1lKVxuICAgIH1cbiAgICBkcmF3VmVydGljYWxEaXN0YW5jZShcbiAgICAgIGFjdGl2ZUl0ZW0sXG4gICAgICB7IGdyaWRsaW5lOiBwcmV2aW91c0l0ZW1zPy52YWx1ZSwgZml4ZWQ6IGRlbHRhLmggIT09IDAgJiYgZGVsdGEueSA9PT0gMCB9LFxuICAgICAgeyBncmlkbGluZTogbmV4dEl0ZW1zPy52YWx1ZSwgZml4ZWQ6IGRlbHRhLnkgIT09IDAgJiYgZGVsdGEueSAhPT0gMCB9LFxuICAgICAgZGVsdGEuaCAhPT0gMCxcbiAgICAgIGR5LFxuICAgICAgY2FudmFzUGFuZSxcbiAgICAgIGNvbnRhaW5lckhlaWdodCxcbiAgICAgIHRoZW1lXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHsgZHgsIGR5IH1cbn1cbiIsImltcG9ydCB7IHR5cGUgSU1MYXlvdXRKc29uLCBBUFBfRlJBTUVfTkFNRV9JTl9CVUlMREVSIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0R3JpZGxpbmVPZkxheW91dEl0ZW0gfSBmcm9tICcuL21vdmUtZ3VpZGUnXG5pbXBvcnQgeyB0eXBlIEJCb3hHcmlkbGluZSB9IGZyb20gJy4vbW92ZS1ndWlkZS1jb21tb24nXG5pbXBvcnQgeyBpc1JUTCB9IGZyb20gJy4uLy4uL3V0aWxzJ1xuXG5leHBvcnQgZnVuY3Rpb24gc29ydExheW91dEl0ZW1zIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgY29udGFpbmVyV2lkdGg/OiBudW1iZXIsIGNvbnRhaW5lckhlaWdodD86IG51bWJlcik6IElNTGF5b3V0SnNvbiB7XG4gIGNvbnN0IGdyaWRsaW5lczogeyBba2V5OiBzdHJpbmddOiBCQm94R3JpZGxpbmUgfSA9IHt9XG4gIGxldCB3aWR0aCA9IGNvbnRhaW5lcldpZHRoXG4gIGxldCBoZWlnaHQgPSBjb250YWluZXJIZWlnaHRcbiAgaWYgKCF3aWR0aCB8fCAhaGVpZ2h0KSB7XG4gICAgbGV0IGVsZW1lbnRcbiAgICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgICBjb25zdCBhcHBGcmFtZTogSFRNTEZyYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGlmcmFtZVtuYW1lPVwiJHtBUFBfRlJBTUVfTkFNRV9JTl9CVUlMREVSfVwiXWApXG4gICAgICBpZiAoYXBwRnJhbWUpIHtcbiAgICAgICAgY29uc3QgYXBwRnJhbWVEb2MgPSBhcHBGcmFtZS5jb250ZW50RG9jdW1lbnQgfHwgYXBwRnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudFxuICAgICAgICBlbGVtZW50ID0gYXBwRnJhbWVEb2MucXVlcnlTZWxlY3RvcihgZGl2LmZpeGVkLWxheW91dFtkYXRhLWxheW91dGlkPSR7bGF5b3V0LmlkfV1gKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2LmZpeGVkLWxheW91dFtkYXRhLWxheW91dGlkPSR7bGF5b3V0LmlkfV1gKVxuICAgIH1cbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgd2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoXG4gICAgICBoZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodFxuICAgIH0gZWxzZSB7XG4gICAgICB3aWR0aCA9IDEwMFxuICAgICAgaGVpZ2h0ID0gMTAwXG4gICAgfVxuICB9XG4gIE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50ID8/IHt9KS5mb3JFYWNoKGlkID0+IHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgY29uc3QgZ3JpZGxpbmUgPSBnZXRHcmlkbGluZU9mTGF5b3V0SXRlbShcbiAgICAgIGxheW91dEl0ZW0sXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIClcbiAgICBncmlkbGluZXNbaWRdID0gZ3JpZGxpbmVcbiAgfSlcblxuICBjb25zdCBvcmRlciA9IFsuLi5sYXlvdXQub3JkZXJdXG4gIG9yZGVyLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCByYSA9IGdyaWRsaW5lc1thXS5yZWN0XG4gICAgY29uc3QgcmIgPSBncmlkbGluZXNbYl0ucmVjdFxuXG4gICAgaWYgKHJhLnRvcCA+IHJiLnRvcCkge1xuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gICAgaWYgKHJhLnRvcCA8IHJiLnRvcCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuXG4gICAgY29uc3QgbGVmdEEgPSBpc1JUTCgpID8gcmEucmlnaHQgOiByYS5sZWZ0XG4gICAgY29uc3QgbGVmdEIgPSBpc1JUTCgpID8gcmIucmlnaHQgOiByYi5sZWZ0XG5cbiAgICBpZiAobGVmdEEgPiBsZWZ0Qikge1xuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gICAgaWYgKGxlZnRBIDwgbGVmdEIpIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGlmIChyYS53aWR0aCA+IHJiLndpZHRoIHx8IHJhLmhlaWdodCA+IHJiLmhlaWdodCkge1xuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gICAgaWYgKHJhLndpZHRoIDwgcmIud2lkdGggfHwgcmEuaGVpZ2h0IDwgcmIuaGVpZ2h0KSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcblxuICByZXR1cm4gbGF5b3V0LnNldCgnb3JkZXInLCBvcmRlcilcbn1cbiIsImltcG9ydCB7IGNzcywgdHlwZSBTZXJpYWxpemVkU3R5bGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0VmFsdWVPZkJCb3ggfSBmcm9tICcuLi8uLi91dGlscydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvc2l0aW9uU3R5bGUgKG1lcmdlZFN0eWxlKTogW1NlcmlhbGl6ZWRTdHlsZXMsIHN0cmluZ10ge1xuICByZXR1cm4gW1xuICAgIGNzc2BcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6ICR7Z2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdsZWZ0Jyl9O1xuICAgICAgcmlnaHQ6ICR7Z2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdyaWdodCcpfTtcbiAgICAgIHRvcDogJHtnZXRWYWx1ZU9mQkJveChtZXJnZWRTdHlsZSwgJ3RvcCcpfTtcbiAgICAgIGJvdHRvbTogJHtnZXRWYWx1ZU9mQkJveChtZXJnZWRTdHlsZSwgJ2JvdHRvbScpfTtcbiAgICAgIHdpZHRoOiAke2dldFZhbHVlT2ZCQm94KG1lcmdlZFN0eWxlLCAnd2lkdGgnKX07XG4gICAgICBoZWlnaHQ6ICR7Z2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdoZWlnaHQnKX07XG4gICAgYCxcbiAgICBtZXJnZWRTdHlsZS50cmFuc2Zvcm1cbiAgXVxufVxuIiwiaW1wb3J0IHsgdHlwZSBGaXhlZExheW91dFNldHRpbmcsIHR5cGUgRml4ZWRMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IHsgbG9kYXNoIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgREVGQVVMVF9MQVlPVVRfSVRFTV9TRVRUSU5HIH0gZnJvbSAnLi4vZGVmYXVsdC1jb21tb24tc2V0dGluZydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfRklYX0xBWU9VVF9TRVRUSU5HOiBGaXhlZExheW91dFNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCB7XG4gIGdyaWRTaXplOiAxXG59KVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9GSVhfTEFZT1VUX0lURU1fU0VUVElORzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZyA9IGxvZGFzaC5hc3NpZ24oe30sIERFRkFVTFRfTEFZT1VUX0lURU1fU0VUVElORywge1xuICBsb2NrUGFyZW50OiBmYWxzZSxcbiAgbG9ja0xheW91dDogZmFsc2UsXG4gIGF1dG9Qcm9wczoge31cbn0pXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItY29uc3QgKi9cbmltcG9ydCB7IGlzUGVyY2VudGFnZSwgZnJvbVJhdGlvLCB0b1JhdGlvLCBpc1JUTCwgZ2V0TGF5b3V0SXRlbVNpemVNb2RlLCBzaG91bGRVc2VBc3BlY3RSYXRpbyB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHtcbiAgdHlwZSBCb3VuZGluZ0JveCxcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBCcm93c2VyU2l6ZU1vZGUsXG4gIHV0aWxzIGFzIGppbXVVdGlscyxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICB0eXBlIElNQm91bmRpbmdCb3gsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0XG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgRml4ZWRMYXlvdXRJdGVtU2V0dGluZywgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5pbnRlcmZhY2UgUG9zIHtcbiAgeDogbnVtYmVyXG4gIHk6IG51bWJlclxuICB3OiBudW1iZXJcbiAgaDogbnVtYmVyXG59XG5cbnR5cGUgQkJveEl0ZW0gPSBQb3MgJiB7XG4gIGlkOiBzdHJpbmdcbiAgY29udGVudD86IEJCb3hJdGVtW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRMYXlvdXRJdGVtcyAobGF5b3V0OiBJTUxheW91dEpzb24pOiBzdHJpbmdbXSB7XG4gIGlmIChsYXlvdXQuY29udGVudCA9PSBudWxsIHx8IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50KS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBjb25zdCBkZWZhdWx0U2l6ZSA9IDEyODBcblxuICBjb25zdCBwYXJzZVZhbHVlID0gKHZhbHVlKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gaXNQZXJjZW50YWdlKHZhbHVlKSA/IChwYXJzZUZsb2F0KHZhbHVlKSAqIGRlZmF1bHRTaXplKSAvIDEwMCA6ICt2YWx1ZVxuICB9XG5cbiAgY29uc3Qgc29ydEZ1bmMgPSAoaXRlbTE6IElNTGF5b3V0SXRlbUpzb24sIGl0ZW0yOiBJTUxheW91dEl0ZW1Kc29uKTogbnVtYmVyID0+IHtcbiAgICAvLyBjb21wYXJlIHRvcFxuICAgIGNvbnN0IHRvcDEgPSBwYXJzZVZhbHVlKGl0ZW0xLmJib3gudG9wKVxuICAgIGNvbnN0IHRvcDIgPSBwYXJzZVZhbHVlKGl0ZW0yLmJib3gudG9wKVxuICAgIGlmICh0b3AxID4gdG9wMikge1xuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gICAgaWYgKHRvcDEgPCB0b3AyKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgLy8gY29tcGFyZSBsZWZ0XG4gICAgY29uc3QgbGVmdDEgPSBwYXJzZVZhbHVlKGl0ZW0xLmJib3gubGVmdClcbiAgICBjb25zdCBsZWZ0MiA9IHBhcnNlVmFsdWUoaXRlbTIuYmJveC5sZWZ0KVxuICAgIGlmIChsZWZ0MSA+IGxlZnQyKSB7XG4gICAgICByZXR1cm4gMVxuICAgIH1cbiAgICBpZiAobGVmdDEgPCBsZWZ0Mikge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMobGF5b3V0LmNvbnRlbnQpXG4gICAgLm1hcChrZXkgPT4gbGF5b3V0LmNvbnRlbnRba2V5XSlcbiAgICAuc29ydChzb3J0RnVuYylcbiAgICAubWFwKGxheW91dEl0ZW0gPT4gbGF5b3V0SXRlbS5pZClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpeGVkTGF5b3V0VHJhbnNmb3JtIChcbiAgbGF5b3V0OiBJTUxheW91dEpzb24sXG4gIGZyb21TaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICB0b1NpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IElNTGF5b3V0SnNvbiB7XG4gIGNvbnN0IGZyb21TaXplTW9kZVdpZHRoID0gamltdVV0aWxzLmdldFNpemVNb2RlV2lkdGgoZnJvbVNpemVNb2RlKVxuICBjb25zdCB0b1NpemVNb2RlV2lkdGggPSBqaW11VXRpbHMuZ2V0U2l6ZU1vZGVXaWR0aCh0b1NpemVNb2RlKVxuICBpZiAoZnJvbVNpemVNb2RlV2lkdGggPCB0b1NpemVNb2RlV2lkdGgpIHtcbiAgICByZXR1cm4gbGF5b3V0XG4gIH1cblxuICByZXR1cm4gYXV0b1Jlc3BvbnNlVG9EZXZpY2UobGF5b3V0LCB0b1NpemVNb2RlV2lkdGgpXG59XG5cbi8qKlxuICogQ29udmVydCBhIGxheW91dCB0byBhIHNtYWxsIHNpemUod2lkdGgpIGxheW91dC5cbiAqXG4gKiBSZXR1cm4gdGhlIG5ldyBsYXlvdXQuXG4gKlxuICpcbiAqIEBwYXJhbSBsYXlvdXRcbiAqIEBwYXJhbSBjb252ZXJ0VG9Db2x1bW5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF1dG9SZXNwb25zZVRvRGV2aWNlIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgZGV2aWNlV2lkdGg6IG51bWJlcik6IElNTGF5b3V0SnNvbiB7XG4gIGNvbnN0IGRlZmF1bHRXaWR0aCA9IGRldmljZVdpZHRoXG4gIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA4MDBcblxuICBjb25zdCBjb250ZW50ID0gbGF5b3V0Lm9yZGVyXG4gIGlmIChjb250ZW50ID09IG51bGwgfHwgY29udGVudC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbGF5b3V0XG4gIH1cblxuICBsZXQgdXBkYXRlZExheW91dDogSU1MYXlvdXRKc29uID0gSW1tdXRhYmxlKGxheW91dClcbiAgY29uc3QgYmJveGVzOiBCQm94SXRlbVtdID0gW11cbiAgY29udGVudC5mb3JFYWNoKGl0ZW1JZCA9PiB7XG4gICAgYmJveGVzLnB1c2goe1xuICAgICAgaWQ6IGl0ZW1JZCxcbiAgICAgIC4uLmdldEFic29sdXRlUG9zKGxheW91dC5jb250ZW50W2l0ZW1JZF0uYmJveCwgZGVmYXVsdFdpZHRoLCBkZWZhdWx0SGVpZ2h0KVxuICAgIH0pXG4gIH0pXG4gIGJib3hlcy5zb3J0KHNvcnRQb3MpXG4gIC8vIG1lcmdlIHRoZSBpdGVtcyB0aGF0IGFyZSBjb250YWluZWQgYnkgYW5vdGhlclxuICBjb25zdCBncm91cGVkQkJveGVzID0gW2Jib3hlc1swXV1cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBiYm94ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpdGVtID0gYmJveGVzW2ldXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgZ3JvdXBlZCA9IGdyb3VwZWRCQm94ZXMuc29tZShiID0+IHtcbiAgICAgIGlmIChjb250YWlucyhiLCBpdGVtKSkge1xuICAgICAgICAvLyBiIGlzIGFsd2F5cyBhdCB0aGUgdG9wIGxlZnQgb2YgdGhlIGl0ZW0gYWZ0ZXIgc29ydGluZ1xuICAgICAgICBpZiAoYi5jb250ZW50ID09IG51bGwpIHtcbiAgICAgICAgICBiLmNvbnRlbnQgPSBbXVxuICAgICAgICB9XG4gICAgICAgIGIuY29udGVudC5wdXNoKHtcbiAgICAgICAgICAuLi5pdGVtXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBpZiAoIWdyb3VwZWQpIHtcbiAgICAgIGdyb3VwZWRCQm94ZXMucHVzaChpdGVtKVxuICAgIH1cbiAgfVxuXG4gIC8vIHJlc3RyaWN0IHRoZSBiYm94IG9mIGVhY2ggaXRlbSBpbnRvIHRoZSBjb250YWluZXJcbiAgbGV0IGxhc3RUb3AgPSAwXG4gIGxldCB1cGRhdGVkQ29udGVudCA9IFtdXG4gIGdyb3VwZWRCQm94ZXMuZm9yRWFjaChiID0+IHtcbiAgICBsZXQgZGVsdGFZID0gMFxuICAgIHJlc3RyaWN0UG9zKGIsIGRlZmF1bHRXaWR0aClcbiAgICBpZiAoYi55IDwgbGFzdFRvcCkge1xuICAgICAgZGVsdGFZID0gbGFzdFRvcCAtIGIueVxuICAgICAgYi55ID0gbGFzdFRvcFxuICAgIH1cbiAgICBsYXN0VG9wID0gYi55ICsgYi5oXG4gICAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXRcbiAgICAgIC5zZXRJbihbJ2NvbnRlbnQnLCBiLmlkLCAnYmJveCddLCB7XG4gICAgICAgIGxlZnQ6IHRvUmF0aW8oYi54LCBkZWZhdWx0V2lkdGgpLFxuICAgICAgICB0b3A6IGAke2IueX1weGAsXG4gICAgICAgIHdpZHRoOiB0b1JhdGlvKGIudywgZGVmYXVsdFdpZHRoKSxcbiAgICAgICAgaGVpZ2h0OiBgJHtiLmh9cHhgXG4gICAgICB9KVxuICAgICAgLnNldEluKFsnY29udGVudCcsIGIuaWQsICdzZXR0aW5nJywgJ2F1dG9Qcm9wcycsICd3aWR0aCddLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSlcbiAgICB1cGRhdGVkQ29udGVudC5wdXNoKGIuaWQpXG4gICAgaWYgKGIuY29udGVudCAhPSBudWxsKSB7XG4gICAgICBiLmNvbnRlbnQuZm9yRWFjaChzdWJJdGVtID0+IHtcbiAgICAgICAgcmVzdHJpY3RQb3Moc3ViSXRlbSwgZGVmYXVsdFdpZHRoKVxuICAgICAgICBpZiAoZGVsdGFZID4gMCkge1xuICAgICAgICAgIHN1Ykl0ZW0ueSArPSBkZWx0YVlcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dFxuICAgICAgICAgIC5zZXRJbihbJ2NvbnRlbnQnLCBiLmlkLCAnYmJveCddLCB7XG4gICAgICAgICAgICBsZWZ0OiB0b1JhdGlvKGIueCwgZGVmYXVsdFdpZHRoKSxcbiAgICAgICAgICAgIHRvcDogYCR7Yi55fXB4YCxcbiAgICAgICAgICAgIHdpZHRoOiB0b1JhdGlvKGIudywgZGVmYXVsdFdpZHRoKSxcbiAgICAgICAgICAgIGhlaWdodDogYCR7Yi5ofXB4YFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnNldEluKFsnY29udGVudCcsIGIuaWQsICdzZXR0aW5nJywgJ2F1dG9Qcm9wcycsICd3aWR0aCddLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSlcbiAgICAgICAgdXBkYXRlZENvbnRlbnQucHVzaChzdWJJdGVtLmlkKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXQuc2V0KCdvcmRlcicsIHVwZGF0ZWRDb250ZW50KVxuICByZXR1cm4gdXBkYXRlZExheW91dFxufVxuXG5mdW5jdGlvbiByZXN0cmljdFBvcyAoYjogUG9zLCBtYXhXaWR0aDogbnVtYmVyLCBpc0luR3JvdXA/OiBib29sZWFuKTogdm9pZCB7XG4gIC8vIHJlc3RyaWN0IHRoZSBiYm94IG9mIGVhY2ggaXRlbSBpbnRvIHRoZSBjb250YWluZXJcbiAgaWYgKGIueCA+IG1heFdpZHRoKSB7XG4gICAgaWYgKCFpc0luR3JvdXApIHtcbiAgICAgIC8vIHdyYXAgdGhlIGl0ZW1cbiAgICAgIGIueCA9IDBcbiAgICAgIGIueSArPSBiLmhcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbW92ZSBsZWZ0XG4gICAgICBiLnggPSBtYXhXaWR0aCAtIGIud1xuICAgIH1cbiAgfVxuICBpZiAoYi54IDwgMCkge1xuICAgIGIueCA9IDBcbiAgfVxuICBpZiAoYi54ICsgYi53ID4gbWF4V2lkdGgpIHtcbiAgICBpZiAoYi53IDwgbWF4V2lkdGgpIHtcbiAgICAgIGIueCA9IG1heFdpZHRoIC0gYi53XG4gICAgfSBlbHNlIHtcbiAgICAgIGIudyA9IG1heFdpZHRoXG4gICAgICBiLnggPSAwXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNvcnRQb3MgKHAxOiBQb3MsIHAyOiBQb3MpOiBudW1iZXIge1xuICAvLyB0b3AgdG8gYm90dG9tLCBsZWZ0IHRvIHJpZ2h0XG4gIGlmIChwMS55ICE9PSBwMi55KSB7XG4gICAgcmV0dXJuIHAxLnkgPiBwMi55ID8gMSA6IC0xXG4gIH0gZWxzZSBpZiAocDEueCAhPT0gcDIueCkge1xuICAgIHJldHVybiBwMS54ID4gcDIueCA/IDEgOiAtMVxuICB9XG4gIHJldHVybiAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzIChwMTogUG9zLCBwMjogUG9zKTogYm9vbGVhbiB7XG4gIGNvbnN0IHgxID0gTWF0aC5tYXgocDEueCwgcDIueClcbiAgY29uc3QgeDIgPSBNYXRoLm1pbihwMS54ICsgcDEudywgcDIueCArIHAyLncpXG4gIGNvbnN0IHkxID0gTWF0aC5tYXgocDEueSwgcDIueSlcbiAgY29uc3QgeTIgPSBNYXRoLm1pbihwMS55ICsgcDEuaCwgcDIueSArIHAyLmgpXG5cbiAgcmV0dXJuIHgxIDwgeDIgJiYgeTEgPCB5MlxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnMgKHAxOiBQb3MsIHAyOiBQb3MpOiBib29sZWFuIHtcbiAgcmV0dXJuIHAxLnggPD0gcDIueCAmJiBwMS54ICsgcDEudyA+IHAyLnggKyBwMi53ICYmIHAxLnkgPD0gcDIueSAmJiBwMS55ICsgcDEuaCA+IHAyLnkgKyBwMi5oXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVBvcyAocDE6IFBvcywgcDI6IFBvcyk6IFBvcyB7XG4gIGNvbnN0IGxlZnQgPSBNYXRoLm1pbihwMS54LCBwMi54KVxuICBjb25zdCB0b3AgPSBNYXRoLm1pbihwMS55LCBwMi55KVxuICBjb25zdCByaWdodCA9IE1hdGgubWF4KHAxLnggKyBwMS53LCBwMi54ICsgcDIudylcbiAgY29uc3QgYm90dG9tID0gTWF0aC5tYXgocDEueSArIHAxLmgsIHAyLnkgKyBwMi5oKVxuICByZXR1cm4ge1xuICAgIHg6IGxlZnQsXG4gICAgeTogdG9wLFxuICAgIHc6IHJpZ2h0IC0gbGVmdCxcbiAgICBoOiBib3R0b20gLSB0b3BcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWJzb2x1dGVQb3MgKGI6IEJvdW5kaW5nQm94LCBjb250YWluZXJXaWR0aDogbnVtYmVyLCBjb250YWluZXJIZWlnaHQ6IG51bWJlcik6IFBvcyB7XG4gIGNvbnN0IHJlc3VsdDogYW55ID0ge31cbiAgbGV0IHggPSAwXG4gIGxldCB5ID0gMFxuICBsZXQgdyA9IGNvbnRhaW5lcldpZHRoXG4gIGxldCBoID0gY29udGFpbmVySGVpZ2h0ICogMC4yIC8vIGRlZmF1bHQgaXMgMTAwJSB3aWR0aCwgMjAlIGhlaWdodFxuICBpZiAoYiAhPSBudWxsKSB7XG4gICAgWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nLCAnd2lkdGgnLCAnaGVpZ2h0J10uZm9yRWFjaChwcm9wID0+IHtcbiAgICAgIGlmIChiW3Byb3BdICE9PSB1bmRlZmluZWQgJiYgYltwcm9wXSAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBbJ2xlZnQnLCAncmlnaHQnLCAnd2lkdGgnXS5pbmNsdWRlcyhwcm9wKSA/IGNvbnRhaW5lcldpZHRoIDogY29udGFpbmVySGVpZ2h0XG4gICAgICAgIHJlc3VsdFtwcm9wXSA9IGlzUGVyY2VudGFnZShiW3Byb3BdKSA/IGZyb21SYXRpbyhiW3Byb3BdLCBzaXplKSA6IHBhcnNlRmxvYXQoYltwcm9wXSlcbiAgICAgIH1cbiAgICB9KVxuICAgIGlmIChyZXN1bHQubGVmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB4ID0gcmVzdWx0LmxlZnRcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHcgPSByZXN1bHQud2lkdGhcbiAgICAgIGlmIChyZXN1bHQubGVmdCA9PT0gdW5kZWZpbmVkICYmIHJlc3VsdC5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHggPSBjb250YWluZXJXaWR0aCAtIHJlc3VsdC5yaWdodCAtIHdcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdyA9IGNvbnRhaW5lcldpZHRoIC0gKHJlc3VsdC5sZWZ0ID8/IDApIC0gKHJlc3VsdC5yaWdodCA/PyAwKVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQudG9wICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHkgPSByZXN1bHQudG9wXG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaCA9IHJlc3VsdC5oZWlnaHRcbiAgICAgIGlmIChyZXN1bHQudG9wID09PSB1bmRlZmluZWQgJiYgcmVzdWx0LmJvdHRvbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHkgPSBjb250YWluZXJIZWlnaHQgLSByZXN1bHQuYm90dG9tIC0gaFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVzdWx0LnRvcCAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdC5ib3R0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgaCA9IGNvbnRhaW5lckhlaWdodCAtIHJlc3VsdC50b3AgLSByZXN1bHQuYm90dG9tXG4gICAgfVxuICB9XG4gIHJldHVybiB7IHgsIHksIHcsIGggfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSZXNpemluZ0JCb3hTdHlsZSAoXG4gIGluaXRSZWN0OiBET01SZWN0LFxuICBjb250YWluZXJSZWN0OiBET01SZWN0LFxuICBkZWx0YTogeyBkeDogbnVtYmVyLCBkeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyIH0sXG4gIGF1dG9GbGlwID0gZmFsc2Vcbik6IERPTVJlY3Qge1xuICBjb25zdCByZXN1bHQ6IGFueSA9IHt9XG5cbiAgcmVzdWx0LmxlZnQgPSBpbml0UmVjdC5sZWZ0ICsgZGVsdGEuZHhcbiAgcmVzdWx0LndpZHRoID0gaW5pdFJlY3Qud2lkdGggKyBkZWx0YS5kd1xuICBjb25zdCByaWdodCA9IGNvbnRhaW5lclJlY3QucmlnaHQgLSBpbml0UmVjdC5yaWdodFxuICBpZiAoZGVsdGEuZHcgPT09IDApIHtcbiAgICAvLyBtb3ZlXG4gICAgcmVzdWx0LnJpZ2h0ID0gcmlnaHQgLSBkZWx0YS5keFxuICB9IGVsc2UgaWYgKGRlbHRhLmR4ID09PSAwKSB7XG4gICAgLy8gcmVzaXplIGF0IHJpZ2h0XG4gICAgaWYgKGRlbHRhLmR3ID4gMCkge1xuICAgICAgZGVsdGEuZHcgPSBNYXRoLm1pbihyaWdodCwgZGVsdGEuZHcpXG4gICAgfVxuICAgIHJlc3VsdC5yaWdodCA9IHJpZ2h0IC0gZGVsdGEuZHdcbiAgICByZXN1bHQud2lkdGggPSBpbml0UmVjdC53aWR0aCArIGRlbHRhLmR3XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnJpZ2h0ID0gcmlnaHRcbiAgICBpZiAoZGVsdGEuZHggPCAwKSB7XG4gICAgICBkZWx0YS5keCA9IE1hdGgubWF4KC1pbml0UmVjdC5sZWZ0LCBkZWx0YS5keClcbiAgICAgIGRlbHRhLmR3ID0gLWRlbHRhLmR4XG4gICAgICByZXN1bHQubGVmdCA9IGluaXRSZWN0LmxlZnQgKyBkZWx0YS5keFxuICAgICAgcmVzdWx0LndpZHRoID0gaW5pdFJlY3Qud2lkdGggKyBkZWx0YS5kd1xuICAgIH1cbiAgfVxuXG4gIHJlc3VsdC50b3AgPSBpbml0UmVjdC50b3AgKyBkZWx0YS5keVxuICByZXN1bHQuaGVpZ2h0ID0gaW5pdFJlY3QuaGVpZ2h0ICsgZGVsdGEuZGhcbiAgY29uc3QgYm90dG9tID0gY29udGFpbmVyUmVjdC5ib3R0b20gLSBpbml0UmVjdC5ib3R0b21cbiAgaWYgKGRlbHRhLmRoID09PSAwKSB7XG4gICAgLy8gbW92ZVxuICAgIHJlc3VsdC5ib3R0b20gPSBib3R0b20gLSBkZWx0YS5keVxuICB9IGVsc2UgaWYgKGRlbHRhLmR5ID09PSAwKSB7XG4gICAgLy8gcmVzaXplIGF0IGJvdHRvbVxuICAgIGlmIChkZWx0YS5kaCA+IDApIHtcbiAgICAgIGRlbHRhLmRoID0gTWF0aC5taW4oYm90dG9tLCBkZWx0YS5kaClcbiAgICB9XG4gICAgcmVzdWx0LmJvdHRvbSA9IGJvdHRvbSAtIGRlbHRhLmRoXG4gICAgcmVzdWx0LmhlaWdodCA9IGluaXRSZWN0LmhlaWdodCArIGRlbHRhLmRoXG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LmJvdHRvbSA9IGJvdHRvbVxuICAgIGlmIChkZWx0YS5keSA8IDApIHtcbiAgICAgIGRlbHRhLmR5ID0gTWF0aC5tYXgoLWluaXRSZWN0LnRvcCwgZGVsdGEuZHkpXG4gICAgICBkZWx0YS5kaCA9IC1kZWx0YS5keVxuICAgICAgcmVzdWx0LnRvcCA9IGluaXRSZWN0LnRvcCArIGRlbHRhLmR5XG4gICAgICByZXN1bHQuaGVpZ2h0ID0gaW5pdFJlY3QuaGVpZ2h0ICsgZGVsdGEuZGhcbiAgICB9XG4gIH1cblxuICBpZiAoYXV0b0ZsaXAgJiYgaXNSVEwoKSkge1xuICAgIHJldHVybiBmbGlwQkJveChyZXN1bHQpIGFzIGFueVxuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQkJveFN0eWxlIChiYm94OiBJTUJvdW5kaW5nQm94LCBzZXR0aW5nOiBGaXhlZExheW91dEl0ZW1TZXR0aW5nKTogQm91bmRpbmdCb3gge1xuICBjb25zdCByZXN1bHQ6IGFueSA9IHt9XG4gIGxldCBhdXRvUHJvcHMgPSBzZXR0aW5nPy5hdXRvUHJvcHMgPz8ge31cbiAgbGV0IGJveCA9IGJib3hcbiAgY29uc3QgaGVpZ2h0TW9kZSA9IGdldExheW91dEl0ZW1TaXplTW9kZSgnaGVpZ2h0JywgYmJveCwgYXV0b1Byb3BzKVxuICBjb25zdCB3aWR0aE1vZGUgPSBnZXRMYXlvdXRJdGVtU2l6ZU1vZGUoJ3dpZHRoJywgYmJveCwgYXV0b1Byb3BzKVxuXG4gIGlmIChoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICByZXN1bHQudG9wID0gYm94LnRvcFxuICAgIHJlc3VsdC5ib3R0b20gPSBib3guYm90dG9tXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdG9wQXV0byA9IGF1dG9Qcm9wcy50b3AgPz8gZmFsc2VcbiAgICBjb25zdCBib3R0b21BdXRvID0gYXV0b1Byb3BzLmJvdHRvbSA/PyBmYWxzZVxuICAgIGlmIChoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSkge1xuICAgICAgcmVzdWx0LmhlaWdodCA9IGJveC5oZWlnaHRcbiAgICB9XG4gICAgLy8gb25lIGFuZCBvbmx5IG9uZSBvZiB0aGUgdG9wIG9yIGJvdHRvbSBjYW4gYmUgdXNlZFxuICAgIGlmICgodG9wQXV0byA9PT0gYm90dG9tQXV0byB8fCBib3R0b21BdXRvKSAmJiBiYm94LnRvcCAhPSBudWxsKSB7XG4gICAgICByZXN1bHQudG9wID0gYm94LnRvcFxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQuYm90dG9tID0gYm94LmJvdHRvbVxuICAgIH1cblxuICAgIC8vIGFsaWduIGNlbnRlclxuICAgIGlmIChzZXR0aW5nLnZDZW50ZXIgJiYgYm94LnRvcCA9PT0gJzUwJScpIHtcbiAgICAgIHJlc3VsdC50b3AgPSAnNTAlJ1xuICAgIH1cbiAgfVxuXG4gIGlmICh3aWR0aE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIHJlc3VsdC5sZWZ0ID0gYm94LmxlZnRcbiAgICByZXN1bHQucmlnaHQgPSBib3gucmlnaHRcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBsZWZ0QXV0byA9IGF1dG9Qcm9wcy5sZWZ0ID8/IGZhbHNlXG4gICAgY29uc3QgcmlnaHRBdXRvID0gYXV0b1Byb3BzLnJpZ2h0ID8/IGZhbHNlXG4gICAgaWYgKHdpZHRoTW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20pIHtcbiAgICAgIHJlc3VsdC53aWR0aCA9IGJveC53aWR0aFxuICAgIH1cbiAgICAvLyBvbmUgYW5kIG9ubHkgb25lIG9mIHRoZSBsZWZ0IG9yIHJpZ2h0IGNhbiBiZSB1c2VkXG4gICAgaWYgKGxlZnRBdXRvID09PSByaWdodEF1dG8pIHtcbiAgICAgIGlmIChib3gubGVmdCAhPSBudWxsKSB7XG4gICAgICAgIHJlc3VsdC5sZWZ0ID0gYm94LmxlZnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5yaWdodCA9IGJveC5yaWdodFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobGVmdEF1dG8gJiYgYm94LnJpZ2h0ICE9IG51bGwpIHtcbiAgICAgIHJlc3VsdC5yaWdodCA9IGJveC5yaWdodFxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQubGVmdCA9IGJveC5sZWZ0XG4gICAgfVxuXG4gICAgLy8gYWxpZ24gY2VudGVyXG4gICAgaWYgKHNldHRpbmcuaENlbnRlciAmJiBib3gubGVmdCA9PT0gJzUwJScpIHtcbiAgICAgIHJlc3VsdC5sZWZ0ID0gJzUwJSdcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmxpcEF1dG9Qcm9wcyAoYXV0b1Byb3BzOiB7IGxlZnQ/OiBib29sZWFuLCByaWdodD86IGJvb2xlYW4gfSk6IEltbXV0YWJsZU9iamVjdDx7IGxlZnQ/OiBib29sZWFuLCByaWdodD86IGJvb2xlYW4gfT4ge1xuICBjb25zdCByZXN1bHQgPSBJbW11dGFibGUoYXV0b1Byb3BzKVxuICBjb25zdCB0ZW1wID0gYXV0b1Byb3BzLmxlZnRcbiAgcmV0dXJuIHJlc3VsdC5zZXQoJ2xlZnQnLCBhdXRvUHJvcHMucmlnaHQpLnNldCgncmlnaHQnLCB0ZW1wKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmxpcEJCb3ggKGJib3g6IEJvdW5kaW5nQm94KTogSU1Cb3VuZGluZ0JveCB7XG4gIGNvbnN0IHJlc3VsdCA9IEltbXV0YWJsZShiYm94KVxuICBjb25zdCB0ZW1wID0gYmJveC5sZWZ0XG4gIHJldHVybiByZXN1bHQuc2V0KCdsZWZ0JywgYmJveC5yaWdodCkuc2V0KCdyaWdodCcsIHRlbXApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVBvc2l0aW9uU2V0dGluZyAoYmJveDogSU1Cb3VuZGluZ0JveCwgaXRlbVNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmcsIGlzUmVzaXppbmc6IGJvb2xlYW4gPSBmYWxzZSk6IFJlYWN0LkNTU1Byb3BlcnRpZXMge1xuICBjb25zdCBleHRyYVN0eWxlOiBhbnkgPSB7fVxuICBjb25zdCBoQ2VudGVyID0gaXRlbVNldHRpbmcuaENlbnRlciAmJiBiYm94LmxlZnQgPT09ICc1MCUnXG4gIGNvbnN0IHZDZW50ZXIgPSBpdGVtU2V0dGluZy52Q2VudGVyICYmIGJib3gudG9wID09PSAnNTAlJ1xuICBjb25zdCBzaWduID0gaXNSVEwoKSA/IC0xIDogMVxuICBpZiAoaENlbnRlciAmJiB2Q2VudGVyKSB7XG4gICAgZXh0cmFTdHlsZS5yaWdodCA9ICdhdXRvJ1xuICAgIGV4dHJhU3R5bGUuYm90dG9tID0gJ2F1dG8nXG4gICAgZXh0cmFTdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7c2lnbiAqIC01MH0lLCAtNTAlKWBcbiAgfSBlbHNlIGlmIChoQ2VudGVyKSB7XG4gICAgZXh0cmFTdHlsZS5yaWdodCA9ICdhdXRvJ1xuICAgIGV4dHJhU3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtzaWduICogLTUwfSUpYFxuICB9IGVsc2UgaWYgKHZDZW50ZXIpIHtcbiAgICBleHRyYVN0eWxlLmJvdHRvbSA9ICdhdXRvJ1xuICAgIGV4dHJhU3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSknXG4gIH1cbiAgaWYgKCFpc1Jlc2l6aW5nICYmIHNob3VsZFVzZUFzcGVjdFJhdGlvKGl0ZW1TZXR0aW5nKSkge1xuICAgIGV4dHJhU3R5bGUuaGVpZ2h0ID0gJ2F1dG8nXG4gIH1cbiAgcmV0dXJuIGV4dHJhU3R5bGVcbn1cblxuLyoqXG4gKiBEbyBub3QgY2hhbmdlIHRoZSBhdXRvUHJvcHMgdmFsdWUgZXhjZXB0IHRoYXQgdmFsdWUgaXMgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVNuYXBSZXN1bHQgKGJib3g6IElNQm91bmRpbmdCb3gsIHNldHRpbmcsIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsIHNuYXBSZWN0OiBDbGllbnRSZWN0KTogeyBiYm94OiBJTUJvdW5kaW5nQm94LCBzZXR0aW5nOiBhbnkgfSB7XG4gIGxldCBvdXRwdXRCb3ggPSBiYm94XG4gIGxldCBvdXRTZXR0aW5nID0gSW1tdXRhYmxlKHNldHRpbmcgPz8ge30pXG4gIGlmIChzZXR0aW5nPy5hdXRvUHJvcHM/LndpZHRoICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICBpZiAoc25hcFJlY3QubGVmdCA8IHNuYXBSZWN0LnJpZ2h0KSB7XG4gICAgICBpZiAoaXNSVEwoKSkge1xuICAgICAgICBvdXRTZXR0aW5nID0gb3V0U2V0dGluZy5zZXRJbihbJ2F1dG9Qcm9wcycsICdyaWdodCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAnbGVmdCddLCB0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAnbGVmdCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAncmlnaHQnXSwgdHJ1ZSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzUlRMKCkpIHtcbiAgICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAnbGVmdCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAncmlnaHQnXSwgdHJ1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dFNldHRpbmcgPSBvdXRTZXR0aW5nLnNldEluKFsnYXV0b1Byb3BzJywgJ3JpZ2h0J10sIGZhbHNlKS5zZXRJbihbJ2F1dG9Qcm9wcycsICdsZWZ0J10sIHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChzZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgaWYgKHNuYXBSZWN0LnRvcCA8IHNuYXBSZWN0LmJvdHRvbSkge1xuICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAndG9wJ10sIGZhbHNlKS5zZXRJbihbJ2F1dG9Qcm9wcycsICdib3R0b20nXSwgdHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAndG9wJ10sIHRydWUpLnNldEluKFsnYXV0b1Byb3BzJywgJ2JvdHRvbSddLCBmYWxzZSlcbiAgICB9XG4gIH1cbiAgWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nLCAnd2lkdGgnLCAnaGVpZ2h0J10uZm9yRWFjaChwcm9wID0+IHtcbiAgICBjb25zdCBzaXplID0gcHJvcCA9PT0gJ2xlZnQnIHx8IHByb3AgPT09ICdyaWdodCcgfHwgcHJvcCA9PT0gJ3dpZHRoJyA/IGNvbnRhaW5lclJlY3Qud2lkdGggOiBjb250YWluZXJSZWN0LmhlaWdodFxuICAgIGxldCB1c2VQZXJjZW50YWdlID0gaXNQZXJjZW50YWdlKGJib3hbcHJvcF0pXG4gICAgaWYgKGlzUlRMKCkpIHtcbiAgICAgIGlmIChwcm9wID09PSAnbGVmdCcpIHtcbiAgICAgICAgdXNlUGVyY2VudGFnZSA9IGlzUGVyY2VudGFnZShiYm94LnJpZ2h0KVxuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSAncmlnaHQnKSB7XG4gICAgICAgIHVzZVBlcmNlbnRhZ2UgPSBpc1BlcmNlbnRhZ2UoYmJveC5sZWZ0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYmJveFtwcm9wXSA9PSBudWxsIHx8IHVzZVBlcmNlbnRhZ2UpIHtcbiAgICAgIG91dHB1dEJveCA9IG91dHB1dEJveC5zZXQocHJvcCwgdG9SYXRpbyhzbmFwUmVjdFtwcm9wXSwgc2l6ZSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dEJveCA9IG91dHB1dEJveC5zZXQocHJvcCwgYCR7TWF0aC5yb3VuZChzbmFwUmVjdFtwcm9wXSl9cHhgKVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIHsgYmJveDogb3V0cHV0Qm94LCBzZXR0aW5nOiBvdXRTZXR0aW5nIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIGNsYXNzTmFtZXMsIEJyb3dzZXJTaXplTW9kZSwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlLCBBcHBNb2RlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFRlbXBsYXRlU2VsZWN0b3IgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IGFwcEJ1aWxkZXJTeW5jIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IGdldEJsb2NrVGVtcGxhdGVzLCBnZXRTY3JvbGxpbmdQYWdlVGVtcGxhdGVzLCBnZXRTY3JlZW5Hcm91cFRlbXBsYXRlcyB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXIvdGVtcGxhdGVzJ1xuaW1wb3J0IHsgdHlwZSBQYWdlQ29udGV4dFByb3BzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgQmxvY2tPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvYnJhbmQvYmxvY2snXG5pbXBvcnQgeyBTY3JlZW5Hcm91cE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9icmFuZC9zY3JlZW4tZ3JvdXAnXG5pbXBvcnQgeyBUZW1wbGF0ZU91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9hcHBsaWNhdGlvbi90ZW1wbGF0ZSdcbmltcG9ydCB7IFRoZW1lZFRvb2x0aXAgfSBmcm9tICcuLi8uLi9idWlsZGVyL3RoZW1lLXRvb2x0aXAnXG5cbmNvbnN0IGJ1dHRvblN0eWxlID0gY3NzYFxuICBwb2ludGVyLWV2ZW50czogYXV0bztcbmBcblxuZnVuY3Rpb24gZ2V0U3R5bGUgKGJ1aWxkZXJUaGVtZTogSU1UaGVtZVZhcmlhYmxlcykge1xuICByZXR1cm4gY3NzYFxuICAgIGJvZHkubG9jay1sYXlvdXQgJixcbiAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgIH1cblxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgaGVpZ2h0OiAyMDBweDtcbiAgICBwYWRkaW5nOiAxcmVtO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB6LWluZGV4OiAxO1xuICAgIC5idG4tdGV4dCB7XG4gICAgICBsaW5lLWhlaWdodDogMzJweDtcbiAgICB9XG4gICAgLmJ0biB7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDJyZW07XG4gICAgICBiYWNrZ3JvdW5kOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs2MDBdfTtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs4MDBdfTtcbiAgICAgIH1cbiAgICB9XG4gICAgLmFjdGlvbi1pdGVtIHtcbiAgICAgIHdpZHRoOiAzMnB4O1xuICAgIH1cblxuICAgIC5hY3Rpb24tc2VwcmF0b3Ige1xuICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgaGVpZ2h0OiAxcHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzgwMF19O1xuICAgIH1cbiAgYFxufVxuXG5mdW5jdGlvbiBzaXplbW9kZVN1cHBvcnRlZCAoYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUpIHtcbiAgcmV0dXJuIGJyb3dzZXJTaXplTW9kZSA9PT0gQnJvd3NlclNpemVNb2RlLkxhcmdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQmxvY2tQcm9wcyB7XG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFByb3BzXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIGJsb2NrT25seT86IGJvb2xlYW5cbiAgb25QYWdlVGVtcGxhdGVTZWxlY3RlZDogKHRlbXBsYXRlUGFnZUpzb24pID0+IHZvaWRcbiAgb25CbG9ja1RlbXBsYXRlU2VsZWN0ZWQ6ICh0ZW1wbGF0ZUJsb2NrSnNvbikgPT4gdm9pZFxuICBvblNjcmVlblRlbXBsYXRlU2VsZWN0ZWQ6ICh0ZW1wbGF0ZVNjcmVlbkpzb24pID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFjdGlvbkJsb2NrIChwcm9wczogQWN0aW9uQmxvY2tQcm9wcykge1xuICBjb25zdCB7XG4gICAgcGFnZUNvbnRleHQsXG4gICAgYnJvd3NlclNpemVNb2RlLFxuICAgIG9uUGFnZVRlbXBsYXRlU2VsZWN0ZWQsXG4gICAgb25CbG9ja1RlbXBsYXRlU2VsZWN0ZWQsXG4gICAgb25TY3JlZW5UZW1wbGF0ZVNlbGVjdGVkLFxuICAgIGJsb2NrT25seVxuICB9ID0gcHJvcHNcbiAgY29uc3QgeyBidWlsZGVyVGhlbWUsIGZvcm1hdE1lc3NhZ2UsIGlzSGVhZGVyLCBpc0Zvb3RlciB9ID0gcGFnZUNvbnRleHRcbiAgY29uc3QgW3Nob3dUZW1wbGF0ZVBvcHBlciwgc2V0U2hvd1RlbXBsYXRlUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbc2hvd0Jsb2NrUG9wcGVyLCBzZXRTaG93QmxvY2tQb3BwZXJdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtzaG93U2NyZWVuUG9wcGVyLCBzZXRTaG93U2NyZWVuUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBibG9ja1JlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3Qgc2NyZWVuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50PihudWxsKVxuICBjb25zdCB0ZW1wbGF0ZVJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3Qgc2hvdyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbG9ja0xheW91dCA9IHN0YXRlLmFwcENvbmZpZz8uZm9yQnVpbGRlckF0dHJpYnV0ZXM/LmxvY2tMYXlvdXQgPz8gZmFsc2VcbiAgICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBzdGF0ZS5hcHBSdW50aW1lSW5mby5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuICAgIHJldHVybiBpc0Rlc2lnbk1vZGUgJiYgIWxvY2tMYXlvdXRcbiAgfSlcblxuICBjb25zdCBpc1BhZ2VCb2R5ID0gIWlzSGVhZGVyICYmICFpc0Zvb3RlclxuICBsZXQgdGVtcGxhdGVUb29sdGlwXG4gIGlmIChpc0hlYWRlcikge1xuICAgIHRlbXBsYXRlVG9vbHRpcCA9IGZvcm1hdE1lc3NhZ2UoJ2Nob29zZUhlYWRlclRlbXBsYXRlJylcbiAgfSBlbHNlIGlmIChpc0Zvb3Rlcikge1xuICAgIHRlbXBsYXRlVG9vbHRpcCA9IGZvcm1hdE1lc3NhZ2UoJ2Nob29zZUZvb3RlclRlbXBsYXRlJylcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZVRvb2x0aXAgPSBmb3JtYXRNZXNzYWdlKCdjaG9vc2VUZW1wbGF0ZScsIHtcbiAgICAgIHR5cGU6IHBhZ2VDb250ZXh0LmlzRGlhbG9nXG4gICAgICAgID8gZm9ybWF0TWVzc2FnZSgnZGlhbG9nJykudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICA6IGZvcm1hdE1lc3NhZ2UoJ3BhZ2UnKS50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHRvZ2dsZUJsb2NrUG9wcGVyID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgaWYgKGJyb3dzZXJTaXplTW9kZSA9PT0gQnJvd3NlclNpemVNb2RlLlNtYWxsKSB7XG4gICAgICBhcHBCdWlsZGVyU3luYy5wdWJsaXNoU2lkZVBhbmVsVG9BcHAoeyB0eXBlOiAndGVtcGxhdGVCbG9jaycsIHRlbXBsYXRlTWV0aG9kOiAnZ2V0QmxvY2tUZW1wbGF0ZXMnLCBvblNlbGVjdDogb25CbG9ja1RlbXBsYXRlU2VsZWN0ZWQgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBzZXRTaG93QmxvY2tQb3BwZXIoIXNob3dCbG9ja1BvcHBlcilcbiAgfVxuXG4gIGNvbnN0IHRvZ2dsZVNjcmVlblBvcHBlciA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHNldFNob3dTY3JlZW5Qb3BwZXIoIXNob3dTY3JlZW5Qb3BwZXIpXG4gIH1cblxuICBjb25zdCB0b2dnbGVUZW1wbGF0ZVBvcHBlciA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChicm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgICAgYXBwQnVpbGRlclN5bmMucHVibGlzaFNpZGVQYW5lbFRvQXBwKHsgdHlwZTogJ3RlbXBsYXRlJywgdGVtcGxhdGVNZXRob2Q6ICdnZXRTY3JvbGxpbmdQYWdlVGVtcGxhdGVzJywgb25TZWxlY3Q6IG9uUGFnZVRlbXBsYXRlU2VsZWN0ZWQgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBzZXRTaG93VGVtcGxhdGVQb3BwZXIoIXNob3dUZW1wbGF0ZVBvcHBlcilcbiAgfVxuXG4gIGNvbnN0IGNsb3NlQmxvY2tQb3BwZXIgPSAoKSA9PiB7XG4gICAgc2V0U2hvd0Jsb2NrUG9wcGVyKGZhbHNlKVxuICB9XG5cbiAgY29uc3QgY2xvc2VTY3JlZW5Qb3BwZXIgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1NjcmVlblBvcHBlcihmYWxzZSlcbiAgfVxuXG4gIGNvbnN0IGNsb3NlVGVtcGxhdGVQb3BvdmVyID0gKCkgPT4ge1xuICAgIHNldFNob3dUZW1wbGF0ZVBvcHBlcihmYWxzZSlcbiAgfVxuXG4gIGNvbnN0IG9uQmxvY2tTZWxlY3RlZCA9ICh0ZW1wbGF0ZSkgPT4ge1xuICAgIHNldFNob3dCbG9ja1BvcHBlcihmYWxzZSlcbiAgICBvbkJsb2NrVGVtcGxhdGVTZWxlY3RlZCh0ZW1wbGF0ZSlcbiAgfVxuXG4gIGNvbnN0IG9uU2NyZWVuU2VsZWN0ZWQgPSAodGVtcGxhdGUpID0+IHtcbiAgICBzZXRTaG93U2NyZWVuUG9wcGVyKGZhbHNlKVxuICAgIG9uU2NyZWVuVGVtcGxhdGVTZWxlY3RlZCh0ZW1wbGF0ZSlcbiAgfVxuXG4gIGNvbnN0IG9uVGVtcGxhdGVTZWxlY3RlZCA9ICh0ZW1wbGF0ZSkgPT4ge1xuICAgIHNldFNob3dUZW1wbGF0ZVBvcHBlcihmYWxzZSlcbiAgICBvblBhZ2VUZW1wbGF0ZVNlbGVjdGVkKHRlbXBsYXRlKVxuICB9XG5cbiAgaWYgKCFzaG93KSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJyBjc3M9e2dldFN0eWxlKGJ1aWxkZXJUaGVtZSl9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCc+XG4gICAgICAgIHtpc1BhZ2VCb2R5ICYmIChcbiAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICA8VGhlbWVkVG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ2luc2VydEFCbG9jaycpfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FjdGlvbi1pdGVtJz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIHJlZj17YmxvY2tSZWZ9IGljb24gb25DbGljaz17dG9nZ2xlQmxvY2tQb3BwZXJ9IGNzcz17YnV0dG9uU3R5bGV9IGNsYXNzTmFtZT0ncm91bmRlZC1jaXJjbGUnPlxuICAgICAgICAgICAgICAgICAgPEJsb2NrT3V0bGluZWQgc2l6ZT0nbScgY29sb3I9e2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzgwMF19IC8+XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9UaGVtZWRUb29sdGlwPlxuICAgICAgICAgICAge3NpemVtb2RlU3VwcG9ydGVkKGJyb3dzZXJTaXplTW9kZSkgJiYgKFxuICAgICAgICAgICAgICA8VGhlbWVkVG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ2luc2VydEFTY3JlZW5Hcm91cCcpfT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYWN0aW9uLWl0ZW0gbWwtNSc+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIHJlZj17c2NyZWVuUmVmfSBpY29uIG9uQ2xpY2s9e3RvZ2dsZVNjcmVlblBvcHBlcn0gY3NzPXtidXR0b25TdHlsZX0gY2xhc3NOYW1lPSdyb3VuZGVkLWNpcmNsZSc+XG4gICAgICAgICAgICAgICAgICAgIDxTY3JlZW5Hcm91cE91dGxpbmVkIHNpemU9ezE2fSBjb2xvcj17YnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbODAwXX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L1RoZW1lZFRvb2x0aXA+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICl9XG4gICAgICAgIHshYmxvY2tPbmx5ICYmIChcbiAgICAgICAgICA8VGhlbWVkVG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgdGl0bGU9e3RlbXBsYXRlVG9vbHRpcH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYWN0aW9uLWl0ZW0nLCB7ICdtbC01JzogaXNQYWdlQm9keSB9KX0+XG4gICAgICAgICAgICAgIDxCdXR0b24gcmVmPXt0ZW1wbGF0ZVJlZn0gaWNvbiBvbkNsaWNrPXt0b2dnbGVUZW1wbGF0ZVBvcHBlcn0gY3NzPXtidXR0b25TdHlsZX0gY2xhc3NOYW1lPSdyb3VuZGVkLWNpcmNsZSc+XG4gICAgICAgICAgICAgICAgPFRlbXBsYXRlT3V0bGluZWQgYXV0b0ZsaXAgc2l6ZT17MTZ9IGNvbG9yPXtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s4MDBdfSAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvVGhlbWVkVG9vbHRpcD5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2FjdGlvbi1zZXByYXRvciBtdC00JyAvPlxuICAgICAgPGRpdj5cbiAgICAgICAgPGg1IGNsYXNzTmFtZT0nYnRuLXRleHQgbXQtMic+e2Zvcm1hdE1lc3NhZ2UoJ2Ryb3BXaWRnZXRUb0FkZCcpfTwvaDU+XG4gICAgICA8L2Rpdj5cbiAgICAgIHtpc1BhZ2VCb2R5ICYmIHNob3dCbG9ja1BvcHBlciAmJiAoXG4gICAgICAgIDxUZW1wbGF0ZVNlbGVjdG9yXG4gICAgICAgICAgdGVtcGxhdGVzPXtnZXRCbG9ja1RlbXBsYXRlcygpfVxuICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ9e2Jsb2NrUmVmLmN1cnJlbnR9XG4gICAgICAgICAgb25JdGVtU2VsZWN0PXtvbkJsb2NrU2VsZWN0ZWR9XG4gICAgICAgICAgb25DbG9zZT17Y2xvc2VCbG9ja1BvcHBlcn1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICB7aXNQYWdlQm9keSAmJiBzaG93U2NyZWVuUG9wcGVyICYmIHNpemVtb2RlU3VwcG9ydGVkKGJyb3dzZXJTaXplTW9kZSkgJiYgKFxuICAgICAgICA8VGVtcGxhdGVTZWxlY3RvclxuICAgICAgICAgIHRlbXBsYXRlcz17Z2V0U2NyZWVuR3JvdXBUZW1wbGF0ZXMoKX1cbiAgICAgICAgICByZWZlcmVuY2VFbGVtZW50PXtzY3JlZW5SZWYuY3VycmVudH1cbiAgICAgICAgICBvbkl0ZW1TZWxlY3Q9e29uU2NyZWVuU2VsZWN0ZWR9XG4gICAgICAgICAgb25DbG9zZT17Y2xvc2VTY3JlZW5Qb3BwZXJ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAgeyFibG9ja09ubHkgJiYgc2hvd1RlbXBsYXRlUG9wcGVyICYmIChcbiAgICAgICAgPFRlbXBsYXRlU2VsZWN0b3JcbiAgICAgICAgICB0ZW1wbGF0ZXM9e2dldFNjcm9sbGluZ1BhZ2VUZW1wbGF0ZXMoZmFsc2UpfVxuICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ9e3RlbXBsYXRlUmVmLmN1cnJlbnR9XG4gICAgICAgICAgb25JdGVtU2VsZWN0PXtvblRlbXBsYXRlU2VsZWN0ZWR9XG4gICAgICAgICAgb25DbG9zZT17Y2xvc2VUZW1wbGF0ZVBvcG92ZXJ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJleHBvcnQgY29uc3QgRHJvcEluZGljYXRvclNpemUgPSAxMFxuXG5leHBvcnQgZnVuY3Rpb24gY2FsSW5zZXJ0UG9zaXRpb25Gb3JDb2x1bW4gKFxuICBib3VuZGluZ1JlY3Q6IENsaWVudFJlY3QsXG4gIGNlbnRlclk6IG51bWJlcixcbiAgY2hpbGRSZWN0czogQXJyYXk8Q2xpZW50UmVjdCAmIHsgaWQ6IHN0cmluZyB9PixcbiAgaW5kaWNhdG9yU2l6ZTogbnVtYmVyXG4pOiB7IGluc2VydFk6IG51bWJlciwgcmVmSWQ6IHN0cmluZyB9IHtcbiAgLy8gY29uc3QgY2VudGVyWSA9IGl0ZW1SZWN0LnRvcCArIGl0ZW1SZWN0LmhlaWdodCAvIDI7XG4gIGxldCByZXN1bHRcbiAgbGV0IHJlZklkXG4gIGxldCBmb3VuZCA9IGZhbHNlXG4gIGNoaWxkUmVjdHMuc29tZSgocmVjdCwgaSkgPT4ge1xuICAgIGNvbnN0IHJlY3RZID0gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDJcbiAgICBpZiAocmVjdFkgPiBjZW50ZXJZKSB7XG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAvLyBpbnNlcnQgYmVmb3JlIHRoZSBmaXJzdCBpdGVtXG4gICAgICAgIHJlc3VsdCA9IE1hdGgubWF4KHJlY3QudG9wIC8gMiwgcmVjdC50b3AgLSBEcm9wSW5kaWNhdG9yU2l6ZSAvIDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbnNlcnQgYmV0d2VlbiB0aGlzIGFuZCBwcmV2aW91cyBvbmVcbiAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtID0gY2hpbGRSZWN0c1tpIC0gMV1cbiAgICAgICAgcmVzdWx0ID0gKHJlY3QudG9wICsgcHJldmlvdXNJdGVtLnRvcCArIHByZXZpb3VzSXRlbS5oZWlnaHQpIC8gMlxuICAgICAgfVxuICAgICAgZm91bmQgPSB0cnVlXG4gICAgICByZWZJZCA9IHJlY3QuaWRcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kXG4gIH0pXG4gIGlmICghZm91bmQpIHtcbiAgICAvLyBpbnNlcnQgYWZ0ZXIgdGhlIGxhc3Qgb25lXG4gICAgY29uc3QgbGFzdEl0ZW0gPSBjaGlsZFJlY3RzW2NoaWxkUmVjdHMubGVuZ3RoIC0gMV1cbiAgICByZXN1bHQgPSBNYXRoLm1pbihcbiAgICAgIGxhc3RJdGVtLnRvcCArIGxhc3RJdGVtLmhlaWdodCArIERyb3BJbmRpY2F0b3JTaXplIC8gMixcbiAgICAgIChsYXN0SXRlbS50b3AgKyBsYXN0SXRlbS5oZWlnaHQgKyBib3VuZGluZ1JlY3QuaGVpZ2h0KSAvIDJcbiAgICApXG4gIH1cbiAgcmV0dXJuIHtcbiAgICByZWZJZCxcbiAgICBpbnNlcnRZOiByZXN1bHRcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgSW1tdXRhYmxlLFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgbG9kYXNoLFxuICBMYXlvdXRJdGVtVHlwZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIEZsb3dMYXlvdXRJdGVtU2V0dGluZywgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IHR5cGUgTGF5b3V0SXRlbVNldHRpbmdQcm9wcyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvdHlwZXMnXG5pbXBvcnQgeyBERUZBVUxUX0ZMT1dfSVRFTV9TRVRUSU5HIH0gZnJvbSAnLi4vZGVmYXVsdC1zZXR0aW5nJ1xuaW1wb3J0IHtcbiAgU2V0dGluZ1NlY3Rpb24sXG4gIFNldHRpbmdSb3dcbn0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQgQ29tbW9uTGF5b3V0SXRlbVNldHRpbmcgZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tbGF5b3V0LWl0ZW0tc2V0dGluZydcbmltcG9ydCB7IHR5cGUgTGluZWFyVW5pdCwgTnVtZXJpY0lucHV0LCB1dGlscyBhcyB1aVV0aWxzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFNpemVFZGl0b3IgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3N0eWxlLXNldHRpbmctY29tcG9uZW50cydcbmltcG9ydCBTY3JlZW5Hcm91cFNldHRpbmcgZnJvbSAnLi9zY3JlZW4tZ3JvdXAtc2V0dGluZydcblxuLy8gY29uc3QgbWFyZ2luU2lkZXMgPSBbU2lkZXMuVCwgU2lkZXMuUiwgU2lkZXMuQiwgU2lkZXMuTF07XG5jb25zdCBpbnB1dFN0eWxlID0geyB3aWR0aDogMTEwIH1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxvYXRpbmdJdGVtU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVNldHRpbmdQcm9wcz4ge1xuICBpdGVtU2V0dGluZzogRmxvd0xheW91dEl0ZW1TZXR0aW5nXG5cbiAgdXBkYXRlV2lkdGggPSAodmFsdWU6IExpbmVhclVuaXQpID0+IHtcbiAgICBsZXQgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ3dpZHRoJywgdWlVdGlscy5zdHJpbmdPZkxpbmVhclVuaXQodmFsdWUpKVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nXG4gICAgKVxuICB9XG5cbiAgdXBkYXRlQkJveFdpZHRoID0gKHZhbHVlOiBMaW5lYXJVbml0KSA9PiB7XG4gICAgbGV0IGJib3ggPSBJbW11dGFibGUodGhpcy5wcm9wcy5sYXlvdXRJdGVtLmJib3ggfHwge30pXG4gICAgYmJveCA9IGJib3guc2V0KCd3aWR0aCcsIHVpVXRpbHMuc3RyaW5nT2ZMaW5lYXJVbml0KHZhbHVlKSlcbiAgICB0aGlzLnByb3BzLm9uUG9zQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBiYm94XG4gICAgKVxuICB9XG5cbiAgdXBkYXRlSGVpZ2h0ID0gKHZhbHVlOiBMaW5lYXJVbml0KSA9PiB7XG4gICAgbGV0IGJib3ggPSBJbW11dGFibGUodGhpcy5wcm9wcy5sYXlvdXRJdGVtLmJib3ggfHwge30pXG4gICAgYmJveCA9IGJib3guc2V0KCdoZWlnaHQnLCB1aVV0aWxzLnN0cmluZ09mTGluZWFyVW5pdCh2YWx1ZSkpXG4gICAgdGhpcy5wcm9wcy5vblBvc0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgYmJveFxuICAgIClcbiAgfVxuXG4gIHVwZGF0ZU9mZnNldFggPSAodmFsdWU6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHNldHRpbmcgPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uc2V0dGluZyB8fCBJbW11dGFibGUoe30pXG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgIHNldHRpbmcuc2V0KCdvZmZzZXRYJywgdmFsdWUpXG4gICAgKVxuICB9XG5cbiAgdXBkYXRlT2Zmc2V0WSA9ICh2YWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgc2V0dGluZy5zZXQoJ29mZnNldFknLCB2YWx1ZSlcbiAgICApXG4gIH1cblxuICB1cGRhdGVIZWlnaHRNb2RlID0gKG1vZGU6IExheW91dEl0ZW1TaXplTW9kZXMpID0+IHtcbiAgICBsZXQgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ2hlaWdodE1vZGUnLCBtb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSA/ICdmaXhlZCcgOiAnYXV0bycpXG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgIHNldHRpbmdcbiAgICApXG4gIH1cblxuICB1cGRhdGVGbG9hdGluZ0FyZWEgKHZhbHVlOiBudW1iZXIpIHtcbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmcgfHwgSW1tdXRhYmxlKHt9KVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldCgnZmxvYXRpbmdBcmVhJywgdmFsdWUpXG4gICAgKVxuICB9XG5cbiAgZ2V0U3R5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAuZmxvYXRpbmctcG9zaXRpb24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgfVxuXG4gICAgICAuZmxvYXRpbmctYXJlYS1jaG9vc2VyIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgICAgIC5jb250ZW50IHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAxZnI7XG4gICAgICAgICAgZ3JpZC1yb3ctZ2FwOiAwO1xuICAgICAgICAgIGdyaWQtY29sdW1uLWdhcDogMDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodC01MDApO1xuXG4gICAgICAgICAgJiA+IGRpdiB7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgICAgIGhlaWdodDogMzBweDtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAmID4gZGl2Om50aC1vZi10eXBlKDNuKzEpIHtcbiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHZhcigtLWxpZ2h0LTUwMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgICYgPiBkaXY6bnRoLW9mLXR5cGUoM24pIHtcbiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgdmFyKC0tbGlnaHQtNTAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJiA+IGRpdjpudGgtb2YtdHlwZSgxKSwgJiA+IGRpdjpudGgtb2YtdHlwZSgyKSwgJiA+IGRpdjpudGgtb2YtdHlwZSgzKSB7XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tbGlnaHQtNTAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJiA+IGRpdjpudGgtb2YtdHlwZSg3KSwgJiA+IGRpdjpudGgtb2YtdHlwZSg4KSwgJiA+IGRpdjpudGgtb2YtdHlwZSg5KSB7XG4gICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tbGlnaHQtNTAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuc2VsZWN0ZWQ6YWZ0ZXIge1xuICAgICAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktMTAwKTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXByaW1hcnktNjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0sIGZvcm1hdE1lc3NhZ2UsIGlzTG9ja0xheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGF5b3V0SXRlbSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXApIHtcbiAgICAgIHJldHVybiA8U2NyZWVuR3JvdXBTZXR0aW5nIHsuLi50aGlzLnByb3BzfSAvPlxuICAgIH1cblxuICAgIHRoaXMuaXRlbVNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCBERUZBVUxUX0ZMT1dfSVRFTV9TRVRUSU5HLCBsYXlvdXRJdGVtLnNldHRpbmcpXG4gICAgY29uc3QgYmJveCA9IGxheW91dEl0ZW0uYmJveFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxvdy1pdGVtLXNldHRpbmcnIGNzcz17dGhpcy5nZXRTdHlsZSgpfT5cbiAgICAgICAgeyFpc0xvY2tMYXlvdXQgJiYgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgIDxTZXR0aW5nU2VjdGlvbiB0aXRsZT17YCR7Zm9ybWF0TWVzc2FnZSgncG9zaXRpb24nKX0gJiAke2Zvcm1hdE1lc3NhZ2UoJ3NpemUnKX1gfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbG9hdGluZy1wb3NpdGlvbiBkLWZsZXgnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxvYXRpbmctYXJlYS1jaG9vc2VyJz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGVudCc+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndG9wLWxlZnQnLCB7IHNlbGVjdGVkOiB0aGlzLml0ZW1TZXR0aW5nLmZsb2F0aW5nQXJlYSA9PT0gMSB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCAxKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndG9wLWNlbnRlcicsIHsgc2VsZWN0ZWQ6IHRoaXMuaXRlbVNldHRpbmcuZmxvYXRpbmdBcmVhID09PSAyIH0pfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVwZGF0ZUZsb2F0aW5nQXJlYS5iaW5kKHRoaXMsIDIpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd0b3AtcmlnaHQnLCB7IHNlbGVjdGVkOiB0aGlzLml0ZW1TZXR0aW5nLmZsb2F0aW5nQXJlYSA9PT0gMyB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCAzKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbWlkZGxlLWxlZnQnLCB7IHNlbGVjdGVkOiB0aGlzLml0ZW1TZXR0aW5nLmZsb2F0aW5nQXJlYSA9PT0gNCB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCA0KX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbWlkZGxlLWNlbnRlcicsIHsgc2VsZWN0ZWQ6IHRoaXMuaXRlbVNldHRpbmcuZmxvYXRpbmdBcmVhID09PSA1IH0pfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVwZGF0ZUZsb2F0aW5nQXJlYS5iaW5kKHRoaXMsIDUpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdtaWRkbGUtcmlnaHQnLCB7IHNlbGVjdGVkOiB0aGlzLml0ZW1TZXR0aW5nLmZsb2F0aW5nQXJlYSA9PT0gNiB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCA2KX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYm90dG9tLWxlZnQnLCB7IHNlbGVjdGVkOiB0aGlzLml0ZW1TZXR0aW5nLmZsb2F0aW5nQXJlYSA9PT0gNyB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCA3KX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYm90dG9tLWNlbnRlcicsIHsgc2VsZWN0ZWQ6IHRoaXMuaXRlbVNldHRpbmcuZmxvYXRpbmdBcmVhID09PSA4IH0pfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVwZGF0ZUZsb2F0aW5nQXJlYS5iaW5kKHRoaXMsIDgpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdib3R0b20tcmlnaHQnLCB7IHNlbGVjdGVkOiB0aGlzLml0ZW1TZXR0aW5nLmZsb2F0aW5nQXJlYSA9PT0gOSB9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGRhdGVGbG9hdGluZ0FyZWEuYmluZCh0aGlzLCA5KX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGZsZXgtZ3Jvdy0xIGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1iZXR3ZWVuIGFsaWduLWl0ZW1zLWVuZCc+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInIGNzcz17Y3NzYHdpZHRoOiAxMTBweGB9PlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtci0yJz5XPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPFNpemVFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9J1cnXG4gICAgICAgICAgICAgICAgICAgIG1vZGU9e0xheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTW9kZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YmJveD8ud2lkdGh9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUJCb3hXaWR0aH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInIGNzcz17Y3NzYHdpZHRoOiAxMTBweGB9PlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtci0yJz5IPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPFNpemVFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9J0gnXG4gICAgICAgICAgICAgICAgICAgIG1vZGU9e0xheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTW9kZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YmJveD8uaGVpZ2h0fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVIZWlnaHR9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ29mZnNldFgnKX0+XG4gICAgICAgICAgICAgIDxOdW1lcmljSW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17aW5wdXRTdHlsZX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5pdGVtU2V0dGluZy5vZmZzZXRYfVxuICAgICAgICAgICAgICAgIHByZWNpc2lvbj17MH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVPZmZzZXRYfVxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ29mZnNldFknKX0+XG4gICAgICAgICAgICAgIDxOdW1lcmljSW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17aW5wdXRTdHlsZX1cbiAgICAgICAgICAgICAgICBwcmVjaXNpb249ezB9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuaXRlbVNldHRpbmcub2Zmc2V0WX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVPZmZzZXRZfVxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgIDwvU2V0dGluZ1NlY3Rpb24+XG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+fVxuXG4gICAgICAgIHsobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgfHwgbGF5b3V0SXRlbS5zZWN0aW9uSWQpICYmIChcbiAgICAgICAgICA8Q29tbW9uTGF5b3V0SXRlbVNldHRpbmdcbiAgICAgICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgICAgIGxheW91dEl0ZW1JZD17bGF5b3V0SXRlbS5pZH1cbiAgICAgICAgICAgIGlzU2VjdGlvbj17ZmFsc2V9XG4gICAgICAgICAgICBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX1cbiAgICAgICAgICAgIG9uU3R5bGVDaGFuZ2U9e3RoaXMucHJvcHMub25TdHlsZUNoYW5nZX1cbiAgICAgICAgICAgIG9uU2V0dGluZ0NoYW5nZT17dGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2V9XG4gICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBSZWFjdFJlZHV4LFxuICBjbGFzc05hbWVzLFxuICB0eXBlIElNTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgSU1TaXplTW9kZUxheW91dEpzb24sXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcbiAgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24gfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtUHJvcHMsIFBhZ2VDb250ZXh0LCB0eXBlIFBhZ2VDb250ZXh0UHJvcHMsIHR5cGUgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcywgdXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgTGF5b3V0SXRlbSBmcm9tICcuLi8uLi9idWlsZGVyL2xheW91dC1pdGVtJ1xuaW1wb3J0IHsgY2FsY3VsYXRlRmxvYXRpbmdQb3NpdGlvbiB9IGZyb20gJy4uL2xheW91dC11dGlscydcblxuaW50ZXJmYWNlIE93blByb3BzIHtcbiAgbGF5b3V0czogSU1TaXplTW9kZUxheW91dEpzb25cbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvblxuICBidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbiAgaW5kZXg6IG51bWJlclxuICB0b3RhbDogbnVtYmVyXG4gIGd1dHRlcjogbnVtYmVyXG4gIGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmdcbiAgY2hpbGRyZW4/OiBhbnlcbiAgb25Ecm9wQXRCb3VuZGFyeTogKGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsIGl0ZW1SZWN0OiBDbGllbnRSZWN0LCBpbnNlcnRJbmRleDogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGlzUmVzaXppbmc6IGJvb2xlYW5cbiAgZHg6IG51bWJlclxuICBkeTogbnVtYmVyXG4gIGR3OiBudW1iZXJcbiAgZGg6IG51bWJlclxufVxuXG5jbGFzcyBGbG9hdGluZ0xheW91dEl0ZW0gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dEl0ZW1Qcm9wcyAmIFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgJiBPd25Qcm9wcywgU3RhdGU+IHtcbiAgZG9tUmVjdDogQ2xpZW50UmVjdFxuICBzdGF0ZTogU3RhdGUgPSB7XG4gICAgaXNSZXNpemluZzogZmFsc2UsXG4gICAgZHg6IDAsXG4gICAgZHk6IDAsXG4gICAgZHc6IDAsXG4gICAgZGg6IDBcbiAgfVxuXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFByb3BzXG4gIGluaXRXaWR0aDogbnVtYmVyXG4gIGluaXRIZWlnaHQ6IG51bWJlclxuXG4gIG9uUmVzaXplU3RhcnQgPSAoaWQ6IHN0cmluZywgaW5pdFdpZHRoOiBudW1iZXIsIGluaXRIZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNSZXNpemluZzogdHJ1ZVxuICAgIH0pXG4gICAgdGhpcy5pbml0SGVpZ2h0ID0gaW5pdEhlaWdodFxuICAgIHRoaXMuaW5pdFdpZHRoID0gaW5pdFdpZHRoXG4gIH1cblxuICBvblJlc2l6aW5nID0gKGlkOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkeDogeCxcbiAgICAgIGR5OiB5LFxuICAgICAgZHcsXG4gICAgICBkaFxuICAgIH0pXG4gIH1cblxuICBvblJlc2l6ZUVuZCA9IChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk/OiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIGxldCBiYm94ID0gbGF5b3V0SXRlbS5iYm94XG5cbiAgICBiYm94ID0gYmJveC5zZXQoJ2hlaWdodCcsIE1hdGgucm91bmQocGFyc2VJbnQoYmJveC5oZWlnaHQsIDEwKSArIGRoKSlcbiAgICAgIC5zZXQoJ3dpZHRoJywgTWF0aC5yb3VuZChwYXJzZUludChiYm94LndpZHRoLCAxMCkgKyBkdykpXG4gICAgICAuc2V0KCdsZWZ0JywgTWF0aC5yb3VuZChwYXJzZUludChiYm94LmxlZnQsIDEwKSArIHgpKVxuICAgICAgLnNldCgndG9wJywgTWF0aC5yb3VuZChwYXJzZUludChiYm94LnRvcCwgMTApICsgeSkpXG4gICAgICAuc2V0KCdib3R0b20nLCBNYXRoLnJvdW5kKHBhcnNlSW50KGJib3gudG9wLCAxMCkgLSBkaCArIHkpKVxuXG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgICdiYm94JyxcbiAgICAgIGJib3hcbiAgICApLmV4ZWMoKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNSZXNpemluZzogZmFsc2UsXG4gICAgICBkeDogMCxcbiAgICAgIGR5OiAwLFxuICAgICAgZHc6IDAsXG4gICAgICBkaDogMFxuICAgIH0pXG4gIH1cblxuICBjYWxjdWxhdGVQb3NpdGlvbiAoKSB7XG4gICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBkaCwgZHcsIGlzUmVzaXppbmcgfSA9IHRoaXMuc3RhdGVcblxuICAgIHJldHVybiBjYWxjdWxhdGVGbG9hdGluZ1Bvc2l0aW9uKGxheW91dEl0ZW0sIHsgZGgsIGR3LCBpc1Jlc2l6aW5nLCBpbml0V2lkdGg6IHRoaXMuaW5pdFdpZHRoLCBpbml0SGVpZ2h0OiB0aGlzLmluaXRIZWlnaHQgfSlcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3Qge1xuICAgICAgbGF5b3V0SWQsXG4gICAgICBsYXlvdXRJdGVtLFxuICAgICAgc2VsZWN0YWJsZSxcbiAgICAgIHNlbGVjdGVkXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoIWxheW91dEl0ZW0pIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gY29uc3QgeyBkaCwgZHcsIGR4LCBkeSB9ID0gdGhpcy5zdGF0ZTtcbiAgICAvLyBjb25zdCBpdGVtU2V0dGluZzogRmxvd0xheW91dEl0ZW1TZXR0aW5nID0gbG9kYXNoLmFzc2lnbih7fSwgREVGQVVMVF9GTE9XX0lURU1fU0VUVElORywgbGF5b3V0SXRlbS5zZXR0aW5nKTtcbiAgICBjb25zdCBtZXJnZWRDbGFzcyA9IGNsYXNzTmFtZXMoJ2ZsZXhib3gtbGF5b3V0LWl0ZW0gZmxvYXRpbmcgZC1mbGV4Jywge1xuICAgICAgc2VsZWN0ZWRcbiAgICB9KVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgeyhwYWdlQ29udGV4dDogUGFnZUNvbnRleHRQcm9wcykgPT4ge1xuICAgICAgICAgIHRoaXMucGFnZUNvbnRleHQgPSBwYWdlQ29udGV4dFxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TGF5b3V0SXRlbVxuICAgICAgICAgICAgICBjc3M9e3RoaXMuY2FsY3VsYXRlUG9zaXRpb24oKX1cbiAgICAgICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgICAgICAgIG9uUmVzaXplU3RhcnQ9e3RoaXMub25SZXNpemVTdGFydH1cbiAgICAgICAgICAgICAgb25SZXNpemluZz17dGhpcy5vblJlc2l6aW5nfVxuICAgICAgICAgICAgICBvblJlc2l6ZUVuZD17dGhpcy5vblJlc2l6ZUVuZH1cbiAgICAgICAgICAgICAgcmVzdHJpY3RcbiAgICAgICAgICAgICAgZHJhZ2dhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgc2VsZWN0YWJsZT17c2VsZWN0YWJsZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXttZXJnZWRDbGFzc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKVxuICAgICAgICB9fVxuICAgICAgPC9QYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMsIHVua25vd24sIExheW91dEl0ZW1Qcm9wcyAmIE93blByb3BzPih1dGlscy5tYXBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzKShcbiAgRmxvYXRpbmdMYXlvdXRJdGVtXG4pXG4iLCJpbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBUb29sSXRlbUNvbmZpZyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCBDb250ZXh0TWVudSwgeyB0eXBlIENvbnRleHRNZW51UHJvcHMgfSBmcm9tICcuLi8uLi9idWlsZGVyL2NvbnRleHQtbWVudSdcblxuZXhwb3J0IGZ1bmN0aW9uIEZsb3dDb250ZXh0TWVudSAocHJvcHM6IENvbnRleHRNZW51UHJvcHMgJiB7IGlzRmlyc3Q6IGJvb2xlYW4sIGlzTGFzdDogYm9vbGVhbiB9KSB7XG4gIGNvbnN0IHsgaXNGaXJzdCwgaXNMYXN0LCBtZW51SXRlbXMsIC4uLm90aGVyUHJvcHMgfSA9IHByb3BzXG4gIGNvbnN0IFttZW51cywgc2V0TWVudXNdID0gUmVhY3QudXNlU3RhdGUobWVudUl0ZW1zKVxuICBjb25zdCBsb2NrTGF5b3V0ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsb2NrTGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnPy5mb3JCdWlsZGVyQXR0cmlidXRlcz8ubG9ja0xheW91dCA/PyBmYWxzZVxuXG4gICAgcmV0dXJuIGxvY2tMYXlvdXRcbiAgfSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZpbHRlck1lbnUgPSBtZW51SXRlbXMuZmlsdGVyKChpdGVtOiBUb29sSXRlbUNvbmZpZykgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnZpc2libGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0udmlzaWJsZSh7IGxheW91dElkOiBwcm9wcy5sYXlvdXRJZCwgbGF5b3V0SXRlbTogcHJvcHMubGF5b3V0SXRlbSwgY2xpZW50UmVjdDogbnVsbCB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZW0udmlzaWJsZSA/PyB0cnVlXG4gICAgfSlcbiAgICBzZXRNZW51cyhmaWx0ZXJNZW51KVxuICB9LCBbaXNGaXJzdCwgaXNMYXN0LCBtZW51SXRlbXMsIHByb3BzLmxheW91dElkLCBwcm9wcy5sYXlvdXRJdGVtLCBsb2NrTGF5b3V0XSlcblxuICByZXR1cm4gPENvbnRleHRNZW51IG1lbnVJdGVtcz17bWVudXN9IHsuLi5vdGhlclByb3BzfSAvPlxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgSW1tdXRhYmxlLFxuICBqc3gsXG4gIGxvZGFzaCxcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIEFQUF9GUkFNRV9OQU1FX0lOX0JVSUxERVJcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBGbG93TGF5b3V0SXRlbVNldHRpbmcsIExheW91dEl0ZW1TaXplTW9kZXMsIHV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtU2V0dGluZ1Byb3BzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCB7IERFRkFVTFRfRkxPV19JVEVNX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQge1xuICBTZXR0aW5nU2VjdGlvbixcbiAgU2V0dGluZ1Jvd1xufSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCBDb21tb25MYXlvdXRJdGVtU2V0dGluZyBmcm9tICcuLi8uLi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtaXRlbS1zZXR0aW5nJ1xuaW1wb3J0IHsgdHlwZSBMaW5lYXJVbml0LCBEaXN0YW5jZVVuaXRzLCBOdW1lcmljSW5wdXQsIHV0aWxzIGFzIHVpVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgU2l6ZUVkaXRvciB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc3R5bGUtc2V0dGluZy1jb21wb25lbnRzJ1xuaW1wb3J0IHsgZ2V0V2lkdGhGcm9tU2V0dGluZyB9IGZyb20gJy4uL2xheW91dC11dGlscydcbmltcG9ydCBTY3JlZW5Hcm91cFNldHRpbmcgZnJvbSAnLi9zY3JlZW4tZ3JvdXAtc2V0dGluZydcbmltcG9ydCBGbG9hdGluZ0l0ZW1TZXR0aW5nIGZyb20gJy4vZmxvYXRpbmctaXRlbS1zZXR0aW5nJ1xuXG4vLyBjb25zdCBtYXJnaW5TaWRlcyA9IFtTaWRlcy5ULCBTaWRlcy5SLCBTaWRlcy5CLCBTaWRlcy5MXTtcbmNvbnN0IGlucHV0U3R5bGUgPSB7IHdpZHRoOiAxMTAgfVxuY29uc3QgaGVpZ2h0TW9kZXMgPSBbTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbV1cbmNvbnN0IGhlaWdodFVuaXRzID0gW0Rpc3RhbmNlVW5pdHMuUElYRUxdXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsb3dJdGVtU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVNldHRpbmdQcm9wcz4ge1xuICBpdGVtU2V0dGluZzogRmxvd0xheW91dEl0ZW1TZXR0aW5nXG5cbiAgdXBkYXRlV2lkdGggPSAodmFsdWU6IExpbmVhclVuaXQpID0+IHtcbiAgICBsZXQgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ3dpZHRoJywgdWlVdGlscy5zdHJpbmdPZkxpbmVhclVuaXQodmFsdWUpKVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nXG4gICAgKVxuICB9XG5cbiAgdXBkYXRlQkJveFdpZHRoID0gKHZhbHVlOiBMaW5lYXJVbml0KSA9PiB7XG4gICAgbGV0IGJib3ggPSBJbW11dGFibGUodGhpcy5wcm9wcy5sYXlvdXRJdGVtLmJib3ggfHwge30pXG4gICAgYmJveCA9IGJib3guc2V0KCd3aWR0aCcsIHVpVXRpbHMuc3RyaW5nT2ZMaW5lYXJVbml0KHZhbHVlKSlcbiAgICB0aGlzLnByb3BzLm9uUG9zQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBiYm94XG4gICAgKVxuICB9XG5cbiAgdXBkYXRlSGVpZ2h0ID0gKHZhbHVlOiBMaW5lYXJVbml0KSA9PiB7XG4gICAgbGV0IGJib3ggPSBJbW11dGFibGUodGhpcy5wcm9wcy5sYXlvdXRJdGVtLmJib3ggfHwge30pXG4gICAgYmJveCA9IGJib3guc2V0KCdoZWlnaHQnLCB1aVV0aWxzLnN0cmluZ09mTGluZWFyVW5pdCh2YWx1ZSkpXG4gICAgdGhpcy5wcm9wcy5vblBvc0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgYmJveFxuICAgIClcbiAgfVxuXG4gIHVwZGF0ZU9mZnNldFggPSAodmFsdWU6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHNldHRpbmcgPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uc2V0dGluZyB8fCBJbW11dGFibGUoe30pXG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgIHNldHRpbmcuc2V0KCdvZmZzZXRYJywgdmFsdWUpXG4gICAgKVxuICB9XG5cbiAgdXBkYXRlT2Zmc2V0WSA9ICh2YWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nIHx8IEltbXV0YWJsZSh7fSlcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICB9LFxuICAgICAgc2V0dGluZy5zZXQoJ29mZnNldFknLCB2YWx1ZSlcbiAgICApXG4gIH1cblxuICBnZXRTaXplT2ZJdGVtICgpOiBDbGllbnRSZWN0IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgbGF5b3V0RWxlbSA9IHRoaXMucXVlcnlTZWxlY3RvcihcbiAgICAgIGBkaXYuZXhiLXJuZFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW0uaWR9XCJdYClcbiAgICBpZiAobGF5b3V0RWxlbSkge1xuICAgICAgcmV0dXJuIGxheW91dEVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHF1ZXJ5U2VsZWN0b3IgKHNlbGVjdG9yOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgYXBwRnJhbWU6IEhUTUxGcmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBpZnJhbWVbbmFtZT1cIiR7QVBQX0ZSQU1FX05BTUVfSU5fQlVJTERFUn1cIl1gKVxuICAgIGlmIChhcHBGcmFtZSkge1xuICAgICAgY29uc3QgYXBwRnJhbWVEb2MgPSBhcHBGcmFtZS5jb250ZW50RG9jdW1lbnQgfHwgYXBwRnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudFxuICAgICAgcmV0dXJuIGFwcEZyYW1lRG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB1cGRhdGVIZWlnaHRNb2RlID0gKG1vZGU6IExheW91dEl0ZW1TaXplTW9kZXMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICBsZXQgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyA/PyBJbW11dGFibGUoe30pXG4gICAgc2V0dGluZyA9IHNldHRpbmcuc2V0KCdoZWlnaHRNb2RlJywgbW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20gPyAnZml4ZWQnIDogJ2F1dG8nKVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nXG4gICAgKVxuICAgIGlmICghbGF5b3V0SXRlbS5iYm94Py5oZWlnaHQpIHtcbiAgICAgIGNvbnN0IGl0ZW1SZWN0ID0gdGhpcy5nZXRTaXplT2ZJdGVtKClcbiAgICAgIGlmIChpdGVtUmVjdCkge1xuICAgICAgICBsZXQgYmJveCA9IEltbXV0YWJsZShsYXlvdXRJdGVtLmJib3ggPz8ge30pXG4gICAgICAgIGJib3ggPSBiYm94LnNldCgnaGVpZ2h0JywgYCR7TWF0aC5yb3VuZChpdGVtUmVjdC5oZWlnaHQpfXB4YClcbiAgICAgICAgdGhpcy5wcm9wcy5vblBvc0NoYW5nZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtLmlkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBiYm94XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGVGbG9hdGluZ0FyZWEgKHZhbHVlOiBudW1iZXIpIHtcbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmcgfHwgSW1tdXRhYmxlKHt9KVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldCgnZmxvYXRpbmdBcmVhJywgdmFsdWUpXG4gICAgKVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtLCBmb3JtYXRNZXNzYWdlLCBpc0xvY2tMYXlvdXQgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoIWxheW91dEl0ZW0pIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGlmIChsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwKSB7XG4gICAgICByZXR1cm4gPFNjcmVlbkdyb3VwU2V0dGluZyB7Li4udGhpcy5wcm9wc30gLz5cbiAgICB9XG5cbiAgICB0aGlzLml0ZW1TZXR0aW5nID0gbG9kYXNoLmFzc2lnbih7fSwgREVGQVVMVF9GTE9XX0lURU1fU0VUVElORywgbGF5b3V0SXRlbS5zZXR0aW5nKVxuXG4gICAgaWYgKHRoaXMuaXRlbVNldHRpbmcuaXNGbG9hdGluZykge1xuICAgICAgcmV0dXJuIDxGbG9hdGluZ0l0ZW1TZXR0aW5nIHsuLi50aGlzLnByb3BzfSAvPlxuICAgIH1cblxuICAgIGNvbnN0IGJib3ggPSBsYXlvdXRJdGVtLmJib3hcbiAgICBjb25zdCB3aWR0aCA9IHVpVXRpbHMuc3RyaW5nT2ZMaW5lYXJVbml0KGdldFdpZHRoRnJvbVNldHRpbmcodGhpcy5pdGVtU2V0dGluZykpXG4gICAgY29uc3QgaGVpZ2h0ID0gdWlVdGlscy5zdHJpbmdPZkxpbmVhclVuaXQocGFyc2VGbG9hdChsYXlvdXRJdGVtLmJib3g/LmhlaWdodCkgPiAwID8gbGF5b3V0SXRlbS5iYm94Py5oZWlnaHQgOiAxMDApXG4gICAgY29uc3QgaXNBdXRvID0gdGhpcy5pdGVtU2V0dGluZy5oZWlnaHRNb2RlID09PSAnYXV0bycgfHwgdXRpbHMuaXNQZXJjZW50YWdlKGJib3g/LmhlaWdodClcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2Zsb3ctaXRlbS1zZXR0aW5nJz5cbiAgICAgICAgeyFpc0xvY2tMYXlvdXQgJiYgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgIDxTZXR0aW5nU2VjdGlvbiB0aXRsZT17Zm9ybWF0TWVzc2FnZSgnc2l6ZScpfT5cbiAgICAgICAgICAgIDxTZXR0aW5nUm93IGxhYmVsPXtmb3JtYXRNZXNzYWdlKCd3aWR0aCcpfT5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17aW5wdXRTdHlsZX0+XG4gICAgICAgICAgICAgICAgPFNpemVFZGl0b3JcbiAgICAgICAgICAgICAgICAgIGxhYmVsPSdXJ1xuICAgICAgICAgICAgICAgICAgbW9kZT17TGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b219XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlTW9kZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3dpZHRofVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlV2lkdGh9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgICA8U2V0dGluZ1JvdyBsYWJlbD17Zm9ybWF0TWVzc2FnZSgnaGVpZ2h0Jyl9PlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtpbnB1dFN0eWxlfT5cbiAgICAgICAgICAgICAgICA8U2l6ZUVkaXRvclxuICAgICAgICAgICAgICAgICAgbGFiZWw9J0gnXG4gICAgICAgICAgICAgICAgICBtb2RlPXtpc0F1dG8gPyBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG8gOiBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbX1cbiAgICAgICAgICAgICAgICAgIHNpemVNb2Rlcz17aGVpZ2h0TW9kZXN9XG4gICAgICAgICAgICAgICAgICBhdmFpbGFibGVVbml0cz17aGVpZ2h0VW5pdHN9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlTW9kZVNlbGVjdD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17aGVpZ2h0fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlSGVpZ2h0fVxuICAgICAgICAgICAgICAgICAgb25Nb2RlQ2hhbmdlPXt0aGlzLnVwZGF0ZUhlaWdodE1vZGV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cblxuICAgICAgICAgIDxTZXR0aW5nU2VjdGlvbiB0aXRsZT17Zm9ybWF0TWVzc2FnZSgncG9zaXRpb24nKX0+XG4gICAgICAgICAgICA8U2V0dGluZ1JvdyBsYWJlbD17Zm9ybWF0TWVzc2FnZSgnb2Zmc2V0WCcpfT5cbiAgICAgICAgICAgICAgPE51bWVyaWNJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXtpbnB1dFN0eWxlfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLml0ZW1TZXR0aW5nLm9mZnNldFh9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlT2Zmc2V0WH1cbiAgICAgICAgICAgICAgICBwcmVjaXNpb249ezB9XG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgICA8U2V0dGluZ1JvdyBsYWJlbD17Zm9ybWF0TWVzc2FnZSgnb2Zmc2V0WScpfT5cbiAgICAgICAgICAgICAgPE51bWVyaWNJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXtpbnB1dFN0eWxlfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLml0ZW1TZXR0aW5nLm9mZnNldFl9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlT2Zmc2V0WX1cbiAgICAgICAgICAgICAgICBwcmVjaXNpb249ezB9XG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD59XG5cbiAgICAgICAgeyhsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCB8fCBsYXlvdXRJdGVtLnNlY3Rpb25JZCkgJiYgKFxuICAgICAgICAgIDxDb21tb25MYXlvdXRJdGVtU2V0dGluZ1xuICAgICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtLmlkfVxuICAgICAgICAgICAgaXNTZWN0aW9uPXtmYWxzZX1cbiAgICAgICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfVxuICAgICAgICAgICAgb25TdHlsZUNoYW5nZT17dGhpcy5wcm9wcy5vblN0eWxlQ2hhbmdlfVxuICAgICAgICAgICAgb25TZXR0aW5nQ2hhbmdlPXt0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZX1cbiAgICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e3RoaXMucHJvcHMuZm9ybWF0TWVzc2FnZX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgY2xhc3NOYW1lcyxcbiAgbG9kYXNoLFxuICBCcm93c2VyU2l6ZU1vZGUsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBJTVNpemVNb2RlTGF5b3V0SnNvbixcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICBJbW11dGFibGUsXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICB0eXBlIFNlcmlhbGl6ZWRTdHlsZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uLCBhcHBCdWlsZGVyU3luYyB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyBUZW1wbGF0ZVNlbGVjdG9yIH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBnZXRCbG9ja1RlbXBsYXRlcywgZ2V0U2NyZWVuR3JvdXBUZW1wbGF0ZXMgfSBmcm9tICdqaW11LWZvci1idWlsZGVyL3RlbXBsYXRlcydcbmltcG9ydCB7IHR5cGUgTGF5b3V0SXRlbVByb3BzLCBQYWdlQ29udGV4dCwgdHlwZSBQYWdlQ29udGV4dFByb3BzLCB0eXBlIFRvb2xiYXJDb25maWcsIHV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgREVGQVVMVF9GTE9XX0lURU1fU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcbmltcG9ydCB7IHR5cGUgRmxvd0xheW91dEl0ZW1TZXR0aW5nLCBDT05URVhUX01FTlVfSVRFTV9TSVpFLCBDT05URVhUX01FTlVfSUNPTl9TSVpFLCBNSU5fTEFZT1VUX0lURU1fU0laRSB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IExheW91dEl0ZW0gZnJvbSAnLi4vLi4vYnVpbGRlci9sYXlvdXQtaXRlbSdcbi8vIGltcG9ydCB7IERyb3BBcmVhIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1ob29rJztcbmltcG9ydCB7IEZsb3dDb250ZXh0TWVudSB9IGZyb20gJy4vZmxvdy1jb250ZXh0LW1lbnUnXG5pbXBvcnQgeyBtYXBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcywgdHlwZSBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcywgZ2V0V2lkdGhGcm9tU2V0dGluZyB9IGZyb20gJy4uL2xheW91dC11dGlscydcbmltcG9ydCB7IGFkZFRlbXBsYXRlUm93LCBhZGRUZW1wbGF0ZVNjcmVlbkdyb3VwLCBtb3ZlRG93biwgbW92ZVVwIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IGR1cGxpY2F0ZU1lbnVJdGVtLCBpc0xvY2tMYXlvdXQsIGdldExhYmVsT2ZMYXlvdXRJdGVtIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L2NvbW1vbi1tZW51J1xuaW1wb3J0IGRlbGV0ZUljb24gZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcbmltcG9ydCBzZXR0aW5nSWNvbiBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9zZXR0aW5nLnN2ZydcbmltcG9ydCBkcmFnZ2luZ0ljb24gZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL21vdmUuc3ZnJ1xuaW1wb3J0IGFkZEljb24gZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvYnJhbmQvYmxvY2suc3ZnJ1xuaW1wb3J0IHJlY3RJY29uIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2JyYW5kL3NjcmVlbi1ncm91cC5zdmcnXG5pbXBvcnQgdXBJY29uIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3VwLnN2ZydcbmltcG9ydCAqIGFzIGNvbW1vblV0aWxzIGZyb20gJy4uL2NvbW1vbi91dGlsJ1xuXG5pbnRlcmZhY2UgT3duUHJvcHMge1xuICBsYXlvdXRzOiBJTVNpemVNb2RlTGF5b3V0SnNvblxuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uXG4gIGJ1aWxkZXJUaGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuICBpbmRleDogbnVtYmVyXG4gIGlzRmlyc3Q6IGJvb2xlYW5cbiAgaXNMYXN0OiBib29sZWFuXG4gIGd1dHRlcjogbnVtYmVyXG4gIGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nLCB2YWx1ZXM/OiBhbnkpID0+IHN0cmluZ1xuICBjaGlsZHJlbj86IGFueVxuICBvbkRyb3BBdEJvdW5kYXJ5OiAoZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcywgaXRlbVJlY3Q6IENsaWVudFJlY3QsIGluc2VydEluZGV4OiBudW1iZXIpID0+IHZvaWRcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgaXNSZXNpemluZzogYm9vbGVhblxuICBkaDogbnVtYmVyXG4gIHNob3dCbG9ja1RlbXBsYXRlUG9wdXA6IGJvb2xlYW5cbiAgc2hvd1NjcmVlblRlbXBsYXRlUG9wdXA6IGJvb2xlYW5cbiAgcmVmZXJlbmNlRWxlbTogSFRNTEVsZW1lbnRcbn1cblxuY2xhc3MgRmxvd0xheW91dEl0ZW0gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dEl0ZW1Qcm9wcyAmIFN0YXRlVG9GbG93SXRlbVByb3BzICYgT3duUHJvcHMsIFN0YXRlPiB7XG4gIHN0YXRlOiBTdGF0ZSA9IHtcbiAgICBpc1Jlc2l6aW5nOiBmYWxzZSxcbiAgICBkaDogMCxcbiAgICBzaG93QmxvY2tUZW1wbGF0ZVBvcHVwOiBmYWxzZSxcbiAgICBzaG93U2NyZWVuVGVtcGxhdGVQb3B1cDogZmFsc2UsXG4gICAgcmVmZXJlbmNlRWxlbTogbnVsbFxuICB9XG5cbiAgZmFrZVRvcExheW91dHM6IElNU2l6ZU1vZGVMYXlvdXRKc29uXG4gIGZha2VCb3R0b21MYXlvdXRzOiBJTVNpemVNb2RlTGF5b3V0SnNvblxuICBtaW5IZWlnaHQ6IG51bWJlclxuICBpbml0SGVpZ2h0OiBudW1iZXJcbiAgYXV0b0hlaWdodDogYm9vbGVhblxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRQcm9wc1xuICBjb250ZXh0TWVudXM6IFRvb2xiYXJDb25maWdcbiAgcmVmZXJlbmNlOiBIVE1MRGl2RWxlbWVudFxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuZmFrZVRvcExheW91dHMgPSBJbW11dGFibGUoe1xuICAgICAgW0Jyb3dzZXJTaXplTW9kZS5MYXJnZV06IGAke3RoaXMucHJvcHMubGF5b3V0SWR9XyR7dGhpcy5wcm9wcy5sYXlvdXRJdGVtSWR9X3RsYXJnZWAsXG4gICAgICBbQnJvd3NlclNpemVNb2RlLk1lZGl1bV06IGAke3RoaXMucHJvcHMubGF5b3V0SWR9XyR7dGhpcy5wcm9wcy5sYXlvdXRJdGVtSWR9X3RtZWRpdW1gLFxuICAgICAgW0Jyb3dzZXJTaXplTW9kZS5TbWFsbF06IGAke3RoaXMucHJvcHMubGF5b3V0SWR9XyR7dGhpcy5wcm9wcy5sYXlvdXRJdGVtSWR9X3RzbWFsbGBcbiAgICB9KSBhcyB1bmtub3duIGFzIElNU2l6ZU1vZGVMYXlvdXRKc29uXG5cbiAgICB0aGlzLmZha2VCb3R0b21MYXlvdXRzID0gSW1tdXRhYmxlKHtcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuTGFyZ2VdOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV9ibGFyZ2VgLFxuICAgICAgW0Jyb3dzZXJTaXplTW9kZS5NZWRpdW1dOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV9ibWVkaXVtYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuU21hbGxdOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV9ic21hbGxgXG4gICAgfSkgYXMgdW5rbm93biBhcyBJTVNpemVNb2RlTGF5b3V0SnNvblxuICAgIHRoaXMubWluSGVpZ2h0ID0gMFxuICAgIHRoaXMuY29udGV4dE1lbnVzID0gW3tcbiAgICAgIGljb246IGFkZEljb24sXG4gICAgICB0aXRsZTogdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKCdpbnNlcnRBQmxvY2snKSxcbiAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlQmxvY2tUZW1wbGF0ZVBvcHVwLFxuICAgICAgdmlzaWJsZTogKCkgPT4gIWlzTG9ja0xheW91dCgpXG4gICAgfSxcbiAgICB7XG4gICAgICBpY29uOiByZWN0SWNvbixcbiAgICAgIHRpdGxlOiB0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2UoJ2luc2VydEFTY3JlZW5Hcm91cCcpLFxuICAgICAgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW5UZW1wbGF0ZVBvcHVwLFxuICAgICAgdmlzaWJsZTogKCkgPT4gIWlzTG9ja0xheW91dCgpICYmIGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5icm93c2VyU2l6ZU1vZGUgIT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbFxuICAgIH0sXG4gICAgZHVwbGljYXRlTWVudUl0ZW0sXG4gICAge1xuICAgICAgaWNvbjogc2V0dGluZ0ljb24sXG4gICAgICB0aXRsZTogdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKCdzZXR0aW5nJyksXG4gICAgICBvbkNsaWNrOiB0aGlzLnN3aXRjaFNldHRpbmdcbiAgICB9LCB7XG4gICAgICBpY29uOiBkcmFnZ2luZ0ljb24sXG4gICAgICB0aXRsZTogdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKCdkcmFnVG9Nb3ZlJywgeyBsYWJlbDogZ2V0TGFiZWxPZkxheW91dEl0ZW0odGhpcy5wcm9wcy5sYXlvdXRJdGVtKSB9KSxcbiAgICAgIGNsYXNzTmFtZTogJ3Rvb2wtZHJhZy1oYW5kbGVyJyxcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHt9LFxuICAgICAgdmlzaWJsZTogKCkgPT4gIWlzTG9ja0xheW91dCgpXG4gICAgfSwge1xuICAgICAgaWNvbjogdXBJY29uLFxuICAgICAgb25DbGljazogdGhpcy5tb3ZlTGF5b3V0SXRlbVVwLFxuICAgICAgdGl0bGU6IHRoaXMucHJvcHMuZm9ybWF0TWVzc2FnZSgnbW92ZXVwJyksXG4gICAgICB2aXNpYmxlOiAoKSA9PiAhdGhpcy5wcm9wcy5pc0ZpcnN0ICYmICFpc0xvY2tMYXlvdXQoKVxuICAgIH0sIHtcbiAgICAgIGljb246IHVwSWNvbixcbiAgICAgIHJvdGF0ZTogMTgwLFxuICAgICAgb25DbGljazogdGhpcy5tb3ZlTGF5b3V0SXRlbURvd24sXG4gICAgICB0aXRsZTogdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKCdtb3ZlZG93bicpLFxuICAgICAgdmlzaWJsZTogKCkgPT4gIXRoaXMucHJvcHMuaXNMYXN0ICYmICFpc0xvY2tMYXlvdXQoKVxuICAgIH0sIHtcbiAgICAgIGljb246IGRlbGV0ZUljb24sXG4gICAgICB0aXRsZTogdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKCdkZWxldGUnKSxcbiAgICAgIG9uQ2xpY2s6IHRoaXMucmVtb3ZlTGF5b3V0SXRlbSxcbiAgICAgIHZpc2libGU6ICgpID0+ICFpc0xvY2tMYXlvdXQoKVxuICAgIH1dXG4gIH1cblxuICBvblJlc2l6ZVN0YXJ0ID0gKGlkOiBzdHJpbmcsIGluaXRXaWR0aDogbnVtYmVyLCBpbml0SGVpZ2h0OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB7IHBhZGRpbmcgfSA9IHRoaXMucHJvcHNcbiAgICB0aGlzLm1pbkhlaWdodCA9IE1JTl9MQVlPVVRfSVRFTV9TSVpFICsgcGFkZGluZ1xuICAgIHRoaXMuaW5pdEhlaWdodCA9IGluaXRIZWlnaHRcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZGg6IDAsXG4gICAgICBpc1Jlc2l6aW5nOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIG9uUmVzaXppbmcgPSAoaWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIpID0+IHtcbiAgICBsZXQgZGVsdGEgPSBkaFxuICAgIGlmIChkaCA8IDAgJiYgdGhpcy5pbml0SGVpZ2h0ICsgZGggPCB0aGlzLm1pbkhlaWdodCkge1xuICAgICAgZGVsdGEgPSB0aGlzLm1pbkhlaWdodCAtIHRoaXMuaW5pdEhlaWdodFxuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRoOiBkZWx0YSxcbiAgICAgIGlzUmVzaXppbmc6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgb25SZXNpemVFbmQgPSAoaWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIsIHNoaWZ0S2V5PzogYm9vbGVhbikgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICBsZXQgZGVsdGEgPSBkaFxuICAgIGlmIChkaCA8IDAgJiYgdGhpcy5pbml0SGVpZ2h0ICsgZGggPCB0aGlzLm1pbkhlaWdodCkge1xuICAgICAgZGVsdGEgPSB0aGlzLm1pbkhlaWdodCAtIHRoaXMuaW5pdEhlaWdodFxuICAgIH1cbiAgICBjb25zdCBiYm94ID0gSW1tdXRhYmxlKGxheW91dEl0ZW0uYmJveCB8fCB7fSkuc2V0KCdoZWlnaHQnLCBNYXRoLnJvdW5kKHRoaXMuaW5pdEhlaWdodCArIGRlbHRhKSlcblxuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICAnYmJveCcsXG4gICAgICBiYm94XG4gICAgKS5leGVjKClcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzUmVzaXppbmc6IGZhbHNlLFxuICAgICAgZGg6IDBcbiAgICB9KVxuICB9XG5cbiAgLy8gZHJvcEF0VG9wID0gKGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsIGl0ZW1SZWN0OiBDbGllbnRSZWN0KSA9PiB7XG4gIC8vICAgdGhpcy5wcm9wcy5vbkRyb3BBdEJvdW5kYXJ5KGRyYWdnaW5nSXRlbSwgaXRlbVJlY3QsIHRoaXMucHJvcHMuaW5kZXgpO1xuICAvLyB9XG5cbiAgLy8gZHJvcEF0Qm90dG9tID0gKGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsIGl0ZW1SZWN0OiBDbGllbnRSZWN0KSA9PiB7XG4gIC8vICAgdGhpcy5wcm9wcy5vbkRyb3BBdEJvdW5kYXJ5KGRyYWdnaW5nSXRlbSwgaXRlbVJlY3QsIHRoaXMucHJvcHMuaW5kZXggKyAxKTtcbiAgLy8gfVxuXG4gIGNhbEhlaWdodCAoaXRlbVNldHRpbmc6IEZsb3dMYXlvdXRJdGVtU2V0dGluZykge1xuICAgIGlmICh0aGlzLnN0YXRlLmlzUmVzaXppbmcpIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLmluaXRIZWlnaHQgKyB0aGlzLnN0YXRlLmRofXB4YFxuICAgIH1cbiAgICBjb25zdCBoZWlnaHQgPSBjb21tb25VdGlscy5jYWxIZWlnaHQodGhpcy5wcm9wcy5sYXlvdXRJdGVtLCBpdGVtU2V0dGluZylcbiAgICB0aGlzLmF1dG9IZWlnaHQgPSBoZWlnaHQgPT09ICdhdXRvJ1xuICAgIHJldHVybiBoZWlnaHRcbiAgfVxuXG4gIHRvZ2dsZUJsb2NrVGVtcGxhdGVQb3B1cCA9ICgpID0+IHtcbiAgICBpZiAoZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmJyb3dzZXJTaXplTW9kZSA9PT0gQnJvd3NlclNpemVNb2RlLlNtYWxsKSB7XG4gICAgICBhcHBCdWlsZGVyU3luYy5wdWJsaXNoU2lkZVBhbmVsVG9BcHAoeyB0eXBlOiAndGVtcGxhdGVCbG9jaycsIHRlbXBsYXRlTWV0aG9kOiAnZ2V0QmxvY2tUZW1wbGF0ZXMnLCBvblNlbGVjdDogdGhpcy5vblRlbXBsYXRlQmxvY2tTZWxlY3RlZCB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93QmxvY2tUZW1wbGF0ZVBvcHVwOiAhdGhpcy5zdGF0ZS5zaG93QmxvY2tUZW1wbGF0ZVBvcHVwIH0pXG4gIH1cblxuICB0b2dnbGVTY3JlZW5UZW1wbGF0ZVBvcHVwID0gKCkgPT4ge1xuICAgIGlmIChnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYnJvd3NlclNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hTaWRlUGFuZWxUb0FwcCh7IHR5cGU6ICd0ZW1wbGF0ZScsIHRlbXBsYXRlTWV0aG9kOiAnZ2V0U2NyZWVuR3JvdXBUZW1wbGF0ZXMnLCBvblNlbGVjdDogdGhpcy5vblRlbXBsYXRlU2NyZWVuR3JvdXBTZWxlY3RlZCB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93U2NyZWVuVGVtcGxhdGVQb3B1cDogIXRoaXMuc3RhdGUuc2hvd1NjcmVlblRlbXBsYXRlUG9wdXAgfSlcbiAgfVxuXG4gIHJlbW92ZUxheW91dEl0ZW0gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICBhcHBDb25maWdBY3Rpb24ucmVtb3ZlTGF5b3V0SXRlbShcbiAgICAgIHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9LFxuICAgICAgdHJ1ZVxuICAgICkuZXhlYygpXG4gIH1cblxuICBtb3ZlTGF5b3V0SXRlbVVwID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgY29uc3QgYXBwQ29uZmlnID0gbW92ZVVwKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9KVxuICAgIGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpLmV4ZWMoKVxuICB9XG5cbiAgbW92ZUxheW91dEl0ZW1Eb3duID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgY29uc3QgYXBwQ29uZmlnID0gbW92ZURvd24oYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0pXG4gICAgZ2V0QXBwQ29uZmlnQWN0aW9uKGFwcENvbmZpZykuZXhlYygpXG4gIH1cblxuICBjcmVhdGVDb250ZXh0TWVudSAoKSB7XG4gICAgY29uc3QgeyBidWlsZGVyVGhlbWUgfSA9IHRoaXMucGFnZUNvbnRleHRcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtLCBpc0ZpcnN0LCBpc0xhc3QgfSA9IHRoaXMucHJvcHNcbiAgICByZXR1cm4gKFxuICAgICAgPEZsb3dDb250ZXh0TWVudVxuICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgIGxheW91dEl0ZW09e2xheW91dEl0ZW19XG4gICAgICAgIGJ1aWxkZXJUaGVtZT17YnVpbGRlclRoZW1lfVxuICAgICAgICBwb3NpdGlvblR5cGU9J2NlbnRlcidcbiAgICAgICAgc2l6ZT17Q09OVEVYVF9NRU5VX0lURU1fU0laRX1cbiAgICAgICAgaWNvblNpemU9e0NPTlRFWFRfTUVOVV9JQ09OX1NJWkV9XG4gICAgICAgIGNsYXNzTmFtZT0nd2lkZ2V0LWNvbnRleHQtbWVudSdcbiAgICAgICAgbWVudUl0ZW1zPXt0aGlzLmNvbnRleHRNZW51c31cbiAgICAgICAgaXNGaXJzdD17aXNGaXJzdH1cbiAgICAgICAgaXNMYXN0PXtpc0xhc3R9XG4gICAgICA+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICByZWY9e3JlZiA9PiB7IHRoaXMucmVmZXJlbmNlID0gcmVmIH19XG4gICAgICAgICAgY3NzPXtjc3NgcG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7cG9pbnRlci1ldmVudHM6bm9uZTtgfVxuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5zaG93QmxvY2tUZW1wbGF0ZVBvcHVwICYmIChcbiAgICAgICAgICA8VGVtcGxhdGVTZWxlY3RvclxuICAgICAgICAgICAgdGVtcGxhdGVzPXtnZXRCbG9ja1RlbXBsYXRlcygpfVxuICAgICAgICAgICAgcmVmZXJlbmNlRWxlbWVudD17dGhpcy5yZWZlcmVuY2V9XG4gICAgICAgICAgICBvbkl0ZW1TZWxlY3Q9e3RoaXMub25UZW1wbGF0ZUJsb2NrU2VsZWN0ZWR9XG4gICAgICAgICAgICBvbkNsb3NlPXt0aGlzLnRvZ2dsZUJsb2NrVGVtcGxhdGVQb3B1cH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICB7dGhpcy5zdGF0ZS5zaG93U2NyZWVuVGVtcGxhdGVQb3B1cCAmJiAoXG4gICAgICAgICAgPFRlbXBsYXRlU2VsZWN0b3JcbiAgICAgICAgICAgIHRlbXBsYXRlcz17Z2V0U2NyZWVuR3JvdXBUZW1wbGF0ZXMoKX1cbiAgICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ9e3RoaXMucmVmZXJlbmNlfVxuICAgICAgICAgICAgb25JdGVtU2VsZWN0PXt0aGlzLm9uVGVtcGxhdGVTY3JlZW5Hcm91cFNlbGVjdGVkfVxuICAgICAgICAgICAgb25DbG9zZT17dGhpcy50b2dnbGVTY3JlZW5UZW1wbGF0ZVBvcHVwfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8L0Zsb3dDb250ZXh0TWVudT5cbiAgICApXG4gIH1cblxuICBzd2l0Y2hTZXR0aW5nID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgc2VsZWN0ZWQgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoIXNlbGVjdGVkKSB7XG4gICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VsZWN0aW9uQ2hhbmdlZCh7XG4gICAgICAgIGxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWRcbiAgICAgIH0pKVxuICAgIH1cbiAgfVxuXG4gIG9uVGVtcGxhdGVCbG9ja1NlbGVjdGVkID0gKHRlbXBsYXRlKSA9PiB7XG4gICAgYWRkVGVtcGxhdGVSb3codGhpcy5wcm9wcy5sYXlvdXRJZCwgdGhpcy5wcm9wcy5sYXlvdXRJdGVtSWQsIHRlbXBsYXRlKVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dCbG9ja1RlbXBsYXRlUG9wdXA6IGZhbHNlIH0pXG4gIH1cblxuICBvblRlbXBsYXRlU2NyZWVuR3JvdXBTZWxlY3RlZCA9ICh0ZW1wbGF0ZSkgPT4ge1xuICAgIGFkZFRlbXBsYXRlU2NyZWVuR3JvdXAodGhpcy5wcm9wcy5sYXlvdXRJZCwgdGhpcy5wcm9wcy5sYXlvdXRJdGVtSWQsIHRlbXBsYXRlKVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dTY3JlZW5UZW1wbGF0ZVBvcHVwOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0U3R5bGUgKGl0ZW1TZXR0aW5nOiBGbG93TGF5b3V0SXRlbVNldHRpbmcpOiBbU2VyaWFsaXplZFN0eWxlcywgc3RyaW5nXSB7XG4gICAgY29uc3QgeyBidWlsZGVyVGhlbWUgfSA9IHRoaXMucGFnZUNvbnRleHRcbiAgICBjb25zdCB7IGluZGV4LCBndXR0ZXIgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBzaWduID0gdXRpbHMuaXNSVEwoKSA/IC0xIDogMVxuICAgIHJldHVybiBbXG4gICAgICBjc3NgXG4gICAgICAgIG1hcmdpbi10b3A6ICR7aW5kZXggPiAwID8gYCR7Z3V0dGVyfXB4YCA6ICd1bnNldCd9O1xuICAgICAgICB3aWR0aDogJHtnZXRXaWR0aEZyb21TZXR0aW5nKGl0ZW1TZXR0aW5nKX07XG4gICAgICAgIGhlaWdodDogJHt0aGlzLmNhbEhlaWdodChpdGVtU2V0dGluZyl9O1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICAgICYgPiBkaXYud2lkZ2V0LWNvbnRleHQtbWVudSB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6aG92ZXIgPiBkaXYud2lkZ2V0LWNvbnRleHQtbWVudSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgfVxuXG4gICAgICAgIC50ZW1wbGF0ZS1wb3B1cCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLmJsYWNrfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC50b29sLWRyYWctaGFuZGxlciB7XG4gICAgICAgICAgY3Vyc29yOiBtb3ZlO1xuICAgICAgICB9XG4gICAgICBgLFxuICAgICAgaXRlbVNldHRpbmcub2Zmc2V0WCB8fCBpdGVtU2V0dGluZy5vZmZzZXRZID8gYHRyYW5zbGF0ZSgkeyhpdGVtU2V0dGluZy5vZmZzZXRYIHx8IDApICogc2lnbn1weCwgJHtpdGVtU2V0dGluZy5vZmZzZXRZIHx8IDB9cHgpYCA6IG51bGxcbiAgICBdXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGxheW91dElkLFxuICAgICAgbGF5b3V0SXRlbSxcbiAgICAgIGRyYWdnYWJsZSxcbiAgICAgIHNlbGVjdGFibGUsXG4gICAgICBpc0VtcHR5LFxuICAgICAgc2VsZWN0ZWRcbiAgICB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGF5b3V0SXRlbSB8fCBpc0VtcHR5KSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGl0ZW1TZXR0aW5nOiBGbG93TGF5b3V0SXRlbVNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCBERUZBVUxUX0ZMT1dfSVRFTV9TRVRUSU5HLCBsYXlvdXRJdGVtLnNldHRpbmcpXG4gICAgY29uc3QgbWVyZ2VkQ2xhc3MgPSBjbGFzc05hbWVzKCdmbG93LWxheW91dC1pdGVtIGQtZmxleCcsIHtcbiAgICAgIHNlbGVjdGVkXG4gICAgfSlcblxuICAgIGNvbnN0IG9uZUJ5T25lQW5pbWF0aW9uUHJvcHMgPSB1dGlscy5oYW5kbGVPbmVieU9uZUFuaW1hdGlvbih0aGlzLnByb3BzKVxuICAgIHJldHVybiAoXG4gICAgICA8UGFnZUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsocGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHMpID0+IHtcbiAgICAgICAgICB0aGlzLnBhZ2VDb250ZXh0ID0gcGFnZUNvbnRleHRcbiAgICAgICAgICBjb25zdCBbY3NzU3R5bGUsIHRyYW5zZm9ybV0gPSB0aGlzLmdldFN0eWxlKGl0ZW1TZXR0aW5nKVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TGF5b3V0SXRlbVxuICAgICAgICAgICAgICBpZD17YCR7bGF5b3V0SWR9X2Jsb2NrXyR7bGF5b3V0SXRlbS5pZH1gfVxuICAgICAgICAgICAgICBjc3M9e2Nzc1N0eWxlfVxuICAgICAgICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm0gfX1cbiAgICAgICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgICAgICAgIG9uUmVzaXplU3RhcnQ9e3RoaXMub25SZXNpemVTdGFydH1cbiAgICAgICAgICAgICAgb25SZXNpemluZz17dGhpcy5vblJlc2l6aW5nfVxuICAgICAgICAgICAgICBvblJlc2l6ZUVuZD17dGhpcy5vblJlc2l6ZUVuZH1cbiAgICAgICAgICAgICAgLy8gb25EcmFnU3RhcnQ9e3RoaXMucHJvcHMub25EcmFnU3RhcnR9XG4gICAgICAgICAgICAgIGxlZnQ9e2ZhbHNlfVxuICAgICAgICAgICAgICByaWdodD17ZmFsc2V9XG4gICAgICAgICAgICAgIHRvcD17ZmFsc2V9XG4gICAgICAgICAgICAgIGJvdHRvbT17aXRlbVNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ2ZpeGVkJ31cbiAgICAgICAgICAgICAgcmVzdHJpY3RcbiAgICAgICAgICAgICAgdXNlRHJhZ0hhbmRsZXJcbiAgICAgICAgICAgICAgZHJhZ2dhYmxlPXtkcmFnZ2FibGV9XG4gICAgICAgICAgICAgIHNlbGVjdGFibGU9e3NlbGVjdGFibGV9XG4gICAgICAgICAgICAgIGZvcmJpZENvbnRleHRNZW51XG4gICAgICAgICAgICAgIGZvcmJpZFRvb2xiYXJcbiAgICAgICAgICAgICAgaXNCbG9ja1xuICAgICAgICAgICAgICBjbGFzc05hbWU9e21lcmdlZENsYXNzfVxuICAgICAgICAgICAgICBhdXRvSGVpZ2h0PXt0aGlzLmF1dG9IZWlnaHR9XG4gICAgICAgICAgICAgIHsuLi5vbmVCeU9uZUFuaW1hdGlvblByb3BzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7IXBhZ2VDb250ZXh0LnZpZXdPbmx5ICYmIHRoaXMuY3JlYXRlQ29udGV4dE1lbnUoKX1cbiAgICAgICAgICAgIDwvTGF5b3V0SXRlbT5cbiAgICAgICAgICApXG4gICAgICAgIH19XG4gICAgICA8L1BhZ2VDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWFjdFJlZHV4LmNvbm5lY3Q8U3RhdGVUb0Zsb3dJdGVtUHJvcHMsIHVua25vd24sIExheW91dEl0ZW1Qcm9wcyAmIE93blByb3BzPihtYXBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcykoXG4gIEZsb3dMYXlvdXRJdGVtXG4pXG4iLCJpbXBvcnQgeyBMYXlvdXRJdGVtVHlwZSwgdHlwZSBJTUFwcENvbmZpZywgdHlwZSBCcm93c2VyU2l6ZU1vZGUsIHR5cGUgTGF5b3V0SW5mbywgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJhc2VMYXlvdXRTZXJ2aWNlLCBnZXRBcHBDb25maWdBY3Rpb24sIENvbnRlbnRTZXJ2aWNlV3JhcHBlciwgdHlwZSBUb2NOb2RlLCB0eXBlIER1cGxpY2F0ZUNvbnRleHQgfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgdXRpbHMsIHNlYXJjaFV0aWxzLCB0eXBlIFRvb2xJdGVtQ29uZmlnIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgZGVsZXRlTWVudUl0ZW0sIGR1cGxpY2F0ZU1lbnVJdGVtLCBwZW5kaW5nTWVudUl0ZW0sIHNpbmtpbmdNZW51SXRlbSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9jb21tb24tbWVudSdcbmltcG9ydCB7IHZpZXdNZW51SXRlbXMgfSBmcm9tICcuLi8uLi9idWlsZGVyL21lbnUvc2VjdGlvbi1tZW51J1xuaW1wb3J0IHsgc2NyZWVuTWVudUl0ZW1zIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L3NjcmVlbi1tZW51J1xuXG5jb25zdCBibG9ja01lbnUgPSBbZHVwbGljYXRlTWVudUl0ZW0sIHNpbmtpbmdNZW51SXRlbSwgZGVsZXRlTWVudUl0ZW1dXG5jb25zdCBzY3JlZW5Hcm91cE1lbnUgPSBbcGVuZGluZ01lbnVJdGVtLCBkdXBsaWNhdGVNZW51SXRlbSwgZGVsZXRlTWVudUl0ZW1dXG5cbmV4cG9ydCBjbGFzcyBGbG93TGF5b3V0U2VydmljZSBleHRlbmRzIEJhc2VMYXlvdXRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZW1vdmVJdGVtRnJvbU9yZGVyIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICAgIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICAvLyByZW1vdmUgaXQgZnJvbSBvcmRlciBsaXN0XG4gICAgbGV0IG9yZGVyID0gW10uY29uY2F0KGxheW91dEpzb24ub3JkZXIpXG4gICAgb3JkZXIgPSBvcmRlci5maWx0ZXIoaXRlbUlkID0+IGl0ZW1JZCAhPT0gbGF5b3V0SXRlbUlkKVxuICAgIHJldHVybiBhcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgbGF5b3V0SWQsICdvcmRlciddLCBvcmRlcilcbiAgfVxuXG4gIGFmdGVySXRlbU1vdmVkIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUl0ZW1Gcm9tT3JkZXIoYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICB9XG5cbiAgYWZ0ZXJJdGVtUmVtb3ZlZCAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IElNQXBwQ29uZmlnIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVJdGVtRnJvbU9yZGVyKGFwcENvbmZpZywgbGF5b3V0SW5mbylcbiAgfVxuXG4gIGR1cGxpY2F0ZUl0ZW1JblNhbWVMYXlvdXQgKFxuICAgIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gICAgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICAgIGNvbnRleHQ6IER1cGxpY2F0ZUNvbnRleHRcbiAgKTogW2FwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEl0ZW1JZDogc3RyaW5nXSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc3VwZXIuZHVwbGljYXRlSXRlbUluU2FtZUxheW91dChhcHBDb25maWcsIGxheW91dEluZm8sIHNpemVNb2RlLCBjb250ZXh0KVxuICAgIGxldCB1cGRhdGVkQXBwQ29uZmlnID0gcmVzdWx0WzBdXG4gICAgY29uc3QgbmV3SXRlbUlkID0gcmVzdWx0WzFdXG5cbiAgICAvLyBtYWludGFpbiBvcmRlclxuICAgIGNvbnN0IGxheW91dEpzb24gPSB1cGRhdGVkQXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF1cbiAgICBjb25zdCBvcmRlciA9IFtdLmNvbmNhdChsYXlvdXRKc29uLm9yZGVyKVxuICAgIGNvbnN0IGluZGV4ID0gb3JkZXIuaW5kZXhPZihsYXlvdXRJbmZvLmxheW91dEl0ZW1JZClcbiAgICBvcmRlci5zcGxpY2UoaW5kZXgsIDEsIGxheW91dEluZm8ubGF5b3V0SXRlbUlkLCBuZXdJdGVtSWQpXG4gICAgdXBkYXRlZEFwcENvbmZpZyA9IHVwZGF0ZWRBcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgbGF5b3V0SW5mby5sYXlvdXRJZCwgJ29yZGVyJ10sIG9yZGVyKVxuXG4gICAgLy8gb2Zmc2V0XG4gICAgY29uc3QgdGFyZ2V0TGF5b3V0SXRlbSA9IGxheW91dEpzb24uY29udGVudFtuZXdJdGVtSWRdXG4gICAgaWYgKHRhcmdldExheW91dEl0ZW0uc2V0dGluZz8uaXNGbG9hdGluZykge1xuICAgICAgdXBkYXRlZEFwcENvbmZpZyA9IHRoaXMub2Zmc2V0RHVwbGlhdGVJdGVtKHVwZGF0ZWRBcHBDb25maWcsIHsgbGF5b3V0SWQ6IGxheW91dEluZm8ubGF5b3V0SWQsIGxheW91dEl0ZW1JZDogbmV3SXRlbUlkIH0pXG4gICAgfVxuICAgIHJldHVybiBbdXBkYXRlZEFwcENvbmZpZywgbmV3SXRlbUlkXVxuICB9XG5cbiAgZ2V0VG9jU3RydWN0dXJlIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJZDogc3RyaW5nKTogVG9jTm9kZVtdIHtcbiAgICBjb25zdCBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgY29uc3Qgc2l6ZU1vZGUgPSB1dGlscy5nZXRDdXJyZW50U2l6ZU1vZGUoKVxuICAgIGlmIChsYXlvdXRKc29uPy5vcmRlcj8ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgb3JkZXIgPSBbXS5jb25jYXQobGF5b3V0SnNvbi5vcmRlcilcbiAgICAgIHJldHVybiBvcmRlci5maWx0ZXIoaXRlbUlkID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGxheW91dEpzb24uY29udGVudFtpdGVtSWRdXG4gICAgICAgIHJldHVybiAhaXRlbS5pc1BlbmRpbmdcbiAgICAgIH0pLm1hcCgobGF5b3V0SXRlbUlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBsYXlvdXRKc29uLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IENvbnRlbnRTZXJ2aWNlV3JhcHBlcihhcHBDb25maWcsIGl0ZW0pXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLnRvVG9jTm9kZSh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSwgc2l6ZU1vZGUpXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHByb2Nlc3NBZnRlckl0ZW1BZGRlZCAoXG4gICAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGxheW91dEluZm86IExheW91dEluZm8sXG4gICAgY3VycmVudFNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gICAgY29udGFpbmVyUmVjdDogRE9NUmVjdFJlYWRPbmx5LFxuICAgIGl0ZW1SZWN0OiBET01SZWN0UmVhZE9ubHksXG4gICAgaW5zZXJ0SW5kZXg6IG51bWJlclxuICApOiBJTUFwcENvbmZpZyB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKGFwcENvbmZpZylcbiAgICBjb25zdCBiYm94ID0gdXRpbHMucmVwbGFjZUJvdW5kaW5nQm94KG51bGwsIGl0ZW1SZWN0LCBjb250YWluZXJSZWN0KVxuXG4gICAgYXBwQ29uZmlnQWN0aW9uXG4gICAgICAuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvLCAnYmJveCcsIGJib3gpXG4gICAgICAuYWRqdXN0T3JkZXJPZkl0ZW0obGF5b3V0SW5mbywgaW5zZXJ0SW5kZXgpXG5cbiAgICByZXR1cm4gYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZ1xuICB9XG5cbiAgZ2V0VG9vbEl0ZW1zIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLCB0eXBlOiBzdHJpbmcpOiBBcnJheTxUb29sSXRlbUNvbmZpZyB8IFRvb2xJdGVtQ29uZmlnW10+IHtcbiAgICBpZiAodHlwZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3ZpZXcnKSB7XG4gICAgICByZXR1cm4gdmlld01lbnVJdGVtc1xuICAgIH1cbiAgICBpZiAodHlwZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3NjcmVlbicpIHtcbiAgICAgIHJldHVybiBzY3JlZW5NZW51SXRlbXNcbiAgICB9XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZywgbGF5b3V0SW5mbylcbiAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cCkge1xuICAgICAgcmV0dXJuIHNjcmVlbkdyb3VwTWVudVxuICAgIH1cbiAgICByZXR1cm4gYmxvY2tNZW51XG4gIH1cblxuICBwcml2YXRlIG9mZnNldER1cGxpYXRlSXRlbSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IElNQXBwQ29uZmlnIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIGxldCB7IGJib3gsIHNldHRpbmcgfSA9IGxheW91dEl0ZW1cblxuICAgIGNvbnN0IG9mZnNldCA9IHZhbHVlID0+IHtcbiAgICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBgJHtwYXJzZUZsb2F0KHZhbHVlKSArIDV9JWBcbiAgICAgIH1cbiAgICAgIGNvbnN0IHB4VmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApXG4gICAgICBpZiAoIWlzTmFOKHB4VmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBweFZhbHVlICsgMjBcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICBpZiAoc2V0dGluZz8uYXV0b1Byb3BzPy5sZWZ0KSB7XG4gICAgICBiYm94ID0gYmJveC5zZXQoJ3JpZ2h0Jywgb2Zmc2V0KGJib3gucmlnaHQpKVxuICAgIH0gZWxzZSB7XG4gICAgICBiYm94ID0gYmJveC5zZXQoJ2xlZnQnLCBvZmZzZXQoYmJveC5sZWZ0KSlcbiAgICB9XG4gICAgaWYgKHNldHRpbmc/LmF1dG9Qcm9wcz8udG9wKSB7XG4gICAgICBiYm94ID0gYmJveC5zZXQoJ2JvdHRvbScsIG9mZnNldChiYm94LmJvdHRvbSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGJib3ggPSBiYm94LnNldCgndG9wJywgb2Zmc2V0KGJib3gudG9wKSlcbiAgICB9XG5cbiAgICBpZiAoc2V0dGluZz8uaENlbnRlciAmJiBzZXR0aW5nPy52Q2VudGVyKSB7XG4gICAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ3ZDZW50ZXInLCBmYWxzZSlcbiAgICB9XG4gICAgcmV0dXJuIGFwcENvbmZpZ1xuICAgICAgLnNldEluKFsnbGF5b3V0cycsIGxheW91dElkLCAnY29udGVudCcsIGxheW91dEl0ZW1JZCwgJ2Jib3gnXSwgYmJveClcbiAgICAgIC5zZXRJbihbJ2xheW91dHMnLCBsYXlvdXRJZCwgJ2NvbnRlbnQnLCBsYXlvdXRJdGVtSWQsICdzZXR0aW5nJ10sIHNldHRpbmcpXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWNvbnN0ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICBwb2xpc2hlZCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIGxvZGFzaCxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICB0eXBlIElNQXBwQ29uZmlnLFxuICB0eXBlIExheW91dFRyYW5zZm9ybUZ1bmMsXG4gIEV4dGVuc2lvbk1hbmFnZXIsXG4gIGV4dGVuc2lvblNwZWMsXG4gIExheW91dEl0ZW1UeXBlLFxuICBPbmVCeU9uZUFuaW1hdGlvbixcbiAgdHlwZSBTZXJpYWxpemVkU3R5bGVzLFxuICBJbnRlcnNlY3Rpb25Db250ZXh0LFxuICBMYXlvdXRUeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dFNlcnZpY2VQcm92aWRlciwgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IHN0eWxlVXRpbHMsIExvYWRpbmcsIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGNhbEluc2VydFBvc2l0aW9uRm9yQ29sdW1uLCBEcm9wSW5kaWNhdG9yU2l6ZSB9IGZyb20gJy4vZG5kLWhlbHBlcidcbmltcG9ydCBGbG93TGF5b3V0SXRlbSBmcm9tICcuL2xheW91dC1pdGVtJ1xuaW1wb3J0IEZsb2F0aW5nTGF5b3V0SXRlbSBmcm9tICcuL2Zsb2F0aW5nLWxheW91dC1pdGVtJ1xuaW1wb3J0IHsgU2NyZWVuR3JvdXAgfSBmcm9tICcuL3NjcmVlbi1ncm91cCdcbmltcG9ydCB7XG4gIHR5cGUgTGF5b3V0UHJvcHMsXG4gIHR5cGUgU3RhdGVUb0xheW91dFByb3BzLFxuICBQYWdlQ29udGV4dCxcbiAgdHlwZSBQYWdlQ29udGV4dFByb3BzLFxuICBMYXlvdXRaSW5kZXgsXG4gIENMSUNLX1RPTFJFUkFOQ0UsXG4gIHR5cGUgRmxvd0xheW91dEl0ZW1TZXR0aW5nLFxuICB0eXBlIEZsb3dMYXlvdXRTZXR0aW5nLFxuICB1dGlsc1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyB0eXBlIERyb3BIYW5kbGVycyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvdHlwZXMnXG5pbXBvcnQgeyBEcm9wQXJlYSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJvcGFyZWEtaG9vaydcbmltcG9ydCB7IGFkZEl0ZW1Ub0xheW91dCwgYWRkQmxvY2tUb0Zsb3dMYXlvdXQgfSBmcm9tICcuLi8uLi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtYWN0aW9ucydcbmltcG9ydCB7IGlzUmVzaXppbmcgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL3Jlc2l6ZS1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgaXNEcmFnZ2luZyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJhZy1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgaXNEZXNpZ25Nb2RlIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L2NvbW1vbi1tZW51J1xuXG5pbXBvcnQgeyBERUZBVUxUX0ZMT1dfU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcbmltcG9ydCB7IGFkZFRlbXBsYXRlUm93LCBhZGRUZW1wbGF0ZVNjcmVlbkdyb3VwLCBpc0ZpcnN0Tm9uRmxvYXRpbmdJdGVtLCBpc0xhc3ROb25GbG9hdGluZ0l0ZW0gfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgQWN0aW9uQmxvY2sgfSBmcm9tICcuL2FjdGlvbi1ibG9jaydcbmltcG9ydCB7IENhbnZhc1BhbmUgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL2NhbnZhcy1wYW5lJ1xuXG5jb25zdCBkcm9wYXJlYVN0eWxlID0gY3NzYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5gXG5cbmNvbnN0IGd1aWRlT3ZlcmxheSA9IGNzc2BcbiAgJHtkcm9wYXJlYVN0eWxlfTtcbiAgei1pbmRleDogJHtMYXlvdXRaSW5kZXguRHJhZ01vdmVUaXB9O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbmBcblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgaXNEcmFnb3ZlcjogYm9vbGVhblxuICBpc0xvYWRpbmdUZW1wbGF0ZTogYm9vbGVhblxufVxuXG5jbGFzcyBMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzLCBTdGF0ZT4gaW1wbGVtZW50cyBEcm9wSGFuZGxlcnMge1xuICByZWY6IEhUTUxFbGVtZW50XG4gIHdpZGdldExpc3RCdG5SZWY6IEhUTUxFbGVtZW50XG4gIGNhbnZhc1JlZjogSFRNTENhbnZhc0VsZW1lbnRcbiAgY2FudmFzUGFuZTogQ2FudmFzUGFuZVxuICBib3VuZGluZ1JlY3Q6IENsaWVudFJlY3RcbiAgaXNEcmFnZ2luZzogYm9vbGVhblxuICBjaGlsZFJlY3RzOiBBcnJheTxDbGllbnRSZWN0ICYgeyBpZDogc3RyaW5nIH0+XG4gIGRvbVJlY3Q6IENsaWVudFJlY3RcbiAgcmVzaXppbmdSZWN0OiBDbGllbnRSZWN0XG4gIHJlZmVyZW5jZUlkOiBzdHJpbmdcbiAgbWF4UGFnZVdpZHRoOiBudW1iZXJcblxuICBidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHNcblxuICBsYXlvdXRUcmFuc2Zvcm06IExheW91dFRyYW5zZm9ybUZ1bmNcblxuICBzdGF0ZTogU3RhdGUgPSB7XG4gICAgaXNEcmFnb3ZlcjogZmFsc2UsXG4gICAgaXNMb2FkaW5nVGVtcGxhdGU6IGZhbHNlXG4gIH1cblxuICBibG9ja1JlZmVyZW5jZTogSFRNTERpdkVsZW1lbnRcbiAgYmxvY2tSZWZlcmVuY2UyOiBIVE1MRGl2RWxlbWVudFxuICB0ZW1wbGF0ZVJlZmVyZW5jZTogSFRNTERpdkVsZW1lbnRcblxuICBtb3VzZWRvd25YOiBudW1iZXJcbiAgbW91c2Vkb3duWTogbnVtYmVyXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdXRpbHMuYXV0b0JpbmRIYW5kbGVycyh0aGlzLCBbXG4gICAgICAnaGFuZGxlRHJvcCcsXG4gICAgICAnaGFuZGxlRHJhZ092ZXInLFxuICAgICAgJ2hhbmRsZURyYWdFbnRlcicsXG4gICAgICAnaGFuZGxlRHJhZ0xlYXZlJyxcbiAgICAgICdoYW5kbGVUb2dnbGVEcmFnb3ZlckVmZmVjdCdcbiAgICBdKVxuICAgIGNvbnN0IGV4dHMgPSBFeHRlbnNpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RXh0ZW5zaW9ucyhgJHtleHRlbnNpb25TcGVjLkV4dGVuc2lvblBvaW50cy5MYXlvdXRUcmFuc2Zvcm1lcn1gKVxuICAgIGlmIChleHRzPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleHQgPSBleHRzLmZpbmQoaXRlbSA9PiAoaXRlbSBhcyBleHRlbnNpb25TcGVjLkxheW91dFRyYW5zZm9ybWVyRXh0ZW5zaW9uKS5sYXlvdXRUeXBlID09PSB0aGlzLnByb3BzLmxheW91dC50eXBlKVxuICAgICAgdGhpcy5sYXlvdXRUcmFuc2Zvcm0gPSAoZXh0IGFzIGFueSk/LnRyYW5zZm9ybUxheW91dFxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbnZhc1BhbmUgPSBuZXcgQ2FudmFzUGFuZSh0aGlzLmNhbnZhc1JlZilcbiAgICB0aGlzLmNhbnZhc1BhbmUuc2V0U2l6ZSh0aGlzLnJlZi5jbGllbnRXaWR0aCwgdGhpcy5yZWYuY2xpZW50SGVpZ2h0KVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlICgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbnZhc1BhbmUuc2V0U2l6ZSh0aGlzLnJlZi5jbGllbnRXaWR0aCwgdGhpcy5yZWYuY2xpZW50SGVpZ2h0KVxuICB9XG5cbiAgaGFuZGxlQWN0aXZhdGUgPSAoZTogUmVhY3QuTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgIGlmICghaXNEZXNpZ25Nb2RlKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoXG4gICAgICBNYXRoLmFicyhlLnNjcmVlblggLSB0aGlzLm1vdXNlZG93blgpID4gQ0xJQ0tfVE9MUkVSQU5DRSB8fFxuICAgICAgTWF0aC5hYnMoZS5zY3JlZW5ZIC0gdGhpcy5tb3VzZWRvd25ZKSA+IENMSUNLX1RPTFJFUkFOQ0VcbiAgICApIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCB7IGlzSW5TZWN0aW9uLCBpc0luV2lkZ2V0IH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCF0aGlzLnBhZ2VDb250ZXh0LnZpZXdPbmx5ICYmICFpc0luU2VjdGlvbiAmJiAhaXNJbldpZGdldCAmJiAhaXNSZXNpemluZygpICYmICFpc0RyYWdnaW5nKCkpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKG51bGwpKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU1vdXNlRG93biA9IChlKTogdm9pZCA9PiB7XG4gICAgdGhpcy5tb3VzZWRvd25YID0gZS5zY3JlZW5YXG4gICAgdGhpcy5tb3VzZWRvd25ZID0gZS5zY3JlZW5ZXG4gIH1cblxuICBoYW5kbGVEcmFnT3ZlciAoXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBkcmFnZ2luZ0VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIGNvbnRhaW5lclJlY3Q6IFBhcnRpYWw8Q2xpZW50UmVjdD4sXG4gICAgaXRlbVJlY3Q6IFBhcnRpYWw8Q2xpZW50UmVjdD4sXG4gICAgY2xpZW50WDogbnVtYmVyLFxuICAgIGNsaWVudFk6IG51bWJlclxuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGxheW91dEluZm86IExheW91dEluZm8gPSBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbyA/PyB7IGxheW91dElkOiBudWxsIH1cblxuICAgIGxldCByZWN0ID0gaXRlbVJlY3RcblxuICAgIHRoaXMuY2FudmFzUGFuZS5jbGVhcigpXG5cbiAgICBpZiAodGhpcy5jaGlsZFJlY3RzPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB7IGluc2VydFksIHJlZklkIH0gPSBjYWxJbnNlcnRQb3NpdGlvbkZvckNvbHVtbihcbiAgICAgICAgY29udGFpbmVyUmVjdCBhcyBDbGllbnRSZWN0LFxuICAgICAgICBjbGllbnRZLFxuICAgICAgICB0aGlzLmNoaWxkUmVjdHMsXG4gICAgICAgIERyb3BJbmRpY2F0b3JTaXplXG4gICAgICApXG4gICAgICB0aGlzLnJlZmVyZW5jZUlkID0gcmVmSWRcblxuICAgICAgaWYgKGxheW91dEluZm8ubGF5b3V0SWQgPT09IHRoaXMucHJvcHMubGF5b3V0LmlkKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBsYXlvdXQub3JkZXJcbiAgICAgICAgY29uc3QgZHJhZ2dpbmdJbmRleCA9IGNvbnRlbnQuaW5kZXhPZihsYXlvdXRJbmZvLmxheW91dEl0ZW1JZClcbiAgICAgICAgY29uc3QgcmVmSW5kZXggPSBjb250ZW50LmluZGV4T2YocmVmSWQpXG4gICAgICAgIGlmIChsYXlvdXQuY29udGVudFtsYXlvdXRJbmZvLmxheW91dEl0ZW1JZF0uc2V0dGluZz8uaXNGbG9hdGluZyBhcyBib29sZWFuIHx8XG4gICAgICAgICAgZHJhZ2dpbmdJbmRleCA9PT0gcmVmSW5kZXggLSAxIHx8XG4gICAgICAgICAgKHJlZklkID09IG51bGwgJiYgZHJhZ2dpbmdJbmRleCA9PT0gY29udGVudC5sZW5ndGggLSAxKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlY3QgPSB7XG4gICAgICAgIHRvcDogaW5zZXJ0WSAtIERyb3BJbmRpY2F0b3JTaXplIC8gMiArIHRoaXMucmVmLnNjcm9sbFRvcCxcbiAgICAgICAgd2lkdGg6IGNvbnRhaW5lclJlY3Qud2lkdGggLSBEcm9wSW5kaWNhdG9yU2l6ZSxcbiAgICAgICAgbGVmdDogRHJvcEluZGljYXRvclNpemUgLyAyLFxuICAgICAgICBoZWlnaHQ6IERyb3BJbmRpY2F0b3JTaXplXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVmZXJlbmNlSWQgPSBudWxsXG4gICAgICByZWN0ID0ge1xuICAgICAgICB0b3A6IGNvbnRhaW5lclJlY3QuaGVpZ2h0IC8gMiAtIERyb3BJbmRpY2F0b3JTaXplIC8gMixcbiAgICAgICAgd2lkdGg6IGNvbnRhaW5lclJlY3Qud2lkdGggLSBEcm9wSW5kaWNhdG9yU2l6ZSxcbiAgICAgICAgbGVmdDogRHJvcEluZGljYXRvclNpemUgLyAyLFxuICAgICAgICBoZWlnaHQ6IERyb3BJbmRpY2F0b3JTaXplXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jYW52YXNQYW5lLnNldENvbG9yKHBvbGlzaGVkLnJnYmEodGhpcy5idWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs3MDBdLCAwLjQpKVxuICAgIHRoaXMuY2FudmFzUGFuZS5kcmF3UmVjdChyZWN0KVxuICB9XG5cbiAgaGFuZGxlVG9nZ2xlRHJhZ292ZXJFZmZlY3QgKHZhbHVlOiBib29sZWFuLCBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKTogdm9pZCB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnJlZmVyZW5jZUlkID0gbnVsbFxuICAgICAgdGhpcy5jb2xsZWN0Qm91bmRzKGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvID8/IHsgbGF5b3V0SWQ6IG51bGwgfSlcbiAgICB9XG4gICAgdGhpcy5jYW52YXNQYW5lLmNsZWFyKClcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzRHJhZ292ZXI6IHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZURyYWdFbnRlciAoZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyk6IHZvaWQge31cblxuICBoYW5kbGVEcmFnTGVhdmUgKCk6IHZvaWQge31cblxuICBoYW5kbGVEcm9wIChkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLCBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LCBpdGVtUmVjdDogQ2xpZW50UmVjdCk6IHZvaWQge1xuICAgIHRoaXMuY2FudmFzUGFuZS5jbGVhcigpXG4gICAgY29uc3QgeyBsYXlvdXQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBkcmFnZ2luZ0xheW91dEluZm86IExheW91dEluZm8gPSBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbyA/PyB7IGxheW91dElkOiBudWxsIH1cbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGxldCBpbnNlcnRJbmRleCA9IDBcbiAgICBpZiAodGhpcy5yZWZlcmVuY2VJZCAhPSBudWxsKSB7XG4gICAgICBpbnNlcnRJbmRleCA9IGxheW91dC5vcmRlci5pbmRleE9mKHRoaXMucmVmZXJlbmNlSWQpXG4gICAgfSBlbHNlIGlmIChsYXlvdXQub3JkZXIgIT0gbnVsbCkge1xuICAgICAgaW5zZXJ0SW5kZXggPSBsYXlvdXQub3JkZXIubGVuZ3RoXG4gICAgfVxuXG4gICAgdGhpcy5yZWZlcmVuY2VJZCA9IG51bGxcbiAgICB0aGlzLmNoaWxkUmVjdHMgPSBbXVxuXG4gICAgLy8gbW92ZSBpbiB0aGUgc2FtZSBsYXlvdXQgb3IgYWRkIGEgbmV3IHJvdyB3aWRnZXRcbiAgICBpZiAoZHJhZ2dpbmdMYXlvdXRJbmZvLmxheW91dElkID09PSBsYXlvdXQuaWQpIHtcbiAgICAgIGlmIChsYXlvdXQuY29udGVudFtkcmFnZ2luZ0xheW91dEluZm8ubGF5b3V0SXRlbUlkXS5zZXR0aW5nPy5pc0Zsb2F0aW5nIGFzIGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICAgICAgLy8gcGVuZGluZyBpdGVtIGFkZGVkIGJhY2tcbiAgICAgICAgYXBwQ29uZmlnQWN0aW9uLnNldExheW91dEl0ZW1Ub1BlbmRpbmcoZHJhZ2dpbmdMYXlvdXRJbmZvLCBmYWxzZSlcbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgeyAuLi5kcmFnZ2luZ0xheW91dEluZm8sIGF1dG9TY3JvbGw6IGZhbHNlIH0pKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGFkZEl0ZW1Ub0xheW91dChcbiAgICAgICAgYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZyxcbiAgICAgICAgZHJhZ2dpbmdJdGVtLFxuICAgICAgICBsYXlvdXQuaWRcbiAgICAgICkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWcgfSA9IHJlc3VsdFxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkuZ2V0U2VydmljZUJ5VHlwZShMYXlvdXRUeXBlLkZsb3dMYXlvdXQpXG4gICAgICAgIGNvbnN0IG91dEFwcENvbmZpZyA9IHNlcnZpY2UucHJvY2Vzc0FmdGVySXRlbUFkZGVkKFxuICAgICAgICAgIHVwZGF0ZWRBcHBDb25maWcsXG4gICAgICAgICAgZHJhZ2dpbmdJdGVtLFxuICAgICAgICAgIGxheW91dEluZm8sXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBjb250YWluZXJSZWN0LFxuICAgICAgICAgIGl0ZW1SZWN0LFxuICAgICAgICAgIGluc2VydEluZGV4XG4gICAgICAgIClcblxuICAgICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMubGF5b3V0Q2hhbmdlZChvdXRBcHBDb25maWcsIHsgLi4ubGF5b3V0SW5mbywgYXV0b1Njcm9sbDogdHJ1ZSB9KSlcbiAgICAgIH0pLmZpbmFsbHkobnVsbClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIHJvdyB3aWRnZXQsIHRoZW4gYWRkIHRoZSBkcmFnZ2luZyBpdGVtXG4gICAgY29uc3QgdG90YWxDb2xzID0gMTJcbiAgICBjb25zdCByb3dXaWR0aCA9IHRoaXMubWF4UGFnZVdpZHRoID4gMCA/IE1hdGgubWluKHRoaXMubWF4UGFnZVdpZHRoLCBjb250YWluZXJSZWN0LndpZHRoKSA6IGNvbnRhaW5lclJlY3Qud2lkdGhcbiAgICBjb25zdCBjb2xXaWR0aCA9IHJvd1dpZHRoIC8gdG90YWxDb2xzXG4gICAgY29uc3Qgc3BhbiA9IE1hdGgubWluKE1hdGguY2VpbChpdGVtUmVjdC53aWR0aCAvIGNvbFdpZHRoKSwgdG90YWxDb2xzKVxuXG4gICAgaWYgKGRyYWdnaW5nSXRlbS5pdGVtVHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXApIHtcbiAgICAgIGFkZEl0ZW1Ub0xheW91dChcbiAgICAgICAgYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZyxcbiAgICAgICAgZHJhZ2dpbmdJdGVtLFxuICAgICAgICBsYXlvdXQuaWRcbiAgICAgICkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBjb25zdCB7IGxheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWcgfSA9IHJlc3VsdFxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkuZ2V0U2VydmljZUJ5VHlwZShMYXlvdXRUeXBlLkZsb3dMYXlvdXQpXG4gICAgICAgIGNvbnN0IG91dEFwcENvbmZpZyA9IHNlcnZpY2UucHJvY2Vzc0FmdGVySXRlbUFkZGVkKFxuICAgICAgICAgIHVwZGF0ZWRBcHBDb25maWcsXG4gICAgICAgICAgZHJhZ2dpbmdJdGVtLFxuICAgICAgICAgIGxheW91dEluZm8sXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBjb250YWluZXJSZWN0LFxuICAgICAgICAgIGl0ZW1SZWN0LFxuICAgICAgICAgIGluc2VydEluZGV4XG4gICAgICAgIClcbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmxheW91dENoYW5nZWQob3V0QXBwQ29uZmlnLCB7IC4uLmxheW91dEluZm8sIGF1dG9TY3JvbGw6IHRydWUgfSkpXG4gICAgICB9KS5maW5hbGx5KG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkV2lkZ2V0VG9MYXlvdXQoZHJhZ2dpbmdJdGVtLCBjb250YWluZXJSZWN0LCBpdGVtUmVjdCwgc3BhbiwgaW5zZXJ0SW5kZXgpXG4gICAgfVxuICB9XG5cbiAgYWRkV2lkZ2V0VG9MYXlvdXQgKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdCxcbiAgICBpdGVtUmVjdDogQ2xpZW50UmVjdCxcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGluc2VydEluZGV4OiBudW1iZXIsXG4gICAgYXBwQ29uZmlnPzogSU1BcHBDb25maWdcbiAgKTogdm9pZCB7XG4gICAgYWRkQmxvY2tUb0Zsb3dMYXlvdXQoXG4gICAgICBkcmFnZ2luZ0l0ZW0sXG4gICAgICB0aGlzLnByb3BzLmxheW91dC5pZCxcbiAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICBpdGVtUmVjdCxcbiAgICAgIHdpZHRoLFxuICAgICAgaW5zZXJ0SW5kZXgsXG4gICAgICBhcHBDb25maWdcbiAgICApLmZpbmFsbHkobnVsbClcbiAgfVxuXG4gIGhhbmRsZURyb3BBdEJvdW5kYXJ5ID0gKGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsIGl0ZW1SZWN0OiBDbGllbnRSZWN0LCBpbnNlcnRJbmRleDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgaWYgKGluc2VydEluZGV4IDwgdGhpcy5wcm9wcy5sYXlvdXQub3JkZXIubGVuZ3RoKSB7XG4gICAgICB0aGlzLnJlZmVyZW5jZUlkID0gdGhpcy5wcm9wcy5sYXlvdXQub3JkZXJbaW5zZXJ0SW5kZXhdXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVmZXJlbmNlSWQgPSBudWxsXG4gICAgfVxuICAgIGlmICh0aGlzLmRvbVJlY3QgPT0gbnVsbCkge1xuICAgICAgdGhpcy5kb21SZWN0ID0gdGhpcy5yZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB9XG4gICAgdGhpcy5oYW5kbGVEcm9wKGRyYWdnaW5nSXRlbSwgdGhpcy5kb21SZWN0LCBpdGVtUmVjdClcbiAgfVxuXG4gIGNvbGxlY3RCb3VuZHMgKGxheW91dEluZm86IExheW91dEluZm8pOiBBcnJheTxDbGllbnRSZWN0ICYgeyBpZDogc3RyaW5nIH0+IHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuY2hpbGRSZWN0cyA9IFtdXG4gICAgdGhpcy5kb21SZWN0ID0gdGhpcy5yZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCBkcmFnZ2FibGVDaGlsZHJlbiA9IHRoaXMucmVmLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChgZGl2W2RhdGEtbGF5b3V0aWQ9XCIke2xheW91dC5pZH1cIl0gPiBkaXYuZXhiLXJuZGApXG4gICAgaWYgKGRyYWdnYWJsZUNoaWxkcmVuPy5sZW5ndGggPiAwKSB7XG4gICAgICBkcmFnZ2FibGVDaGlsZHJlbi5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICBjb25zdCBpdGVtSWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1sYXlvdXRpdGVtaWQnKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgKGxheW91dEluZm8ubGF5b3V0SWQgIT09IGxheW91dC5pZCB8fCBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZCAhPT0gaXRlbUlkKSAmJlxuICAgICAgICAgIGxheW91dC5vcmRlcj8uaW5jbHVkZXMoaXRlbUlkKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCByZWN0ID0gdXRpbHMucmVsYXRpdmVDbGllbnRSZWN0KG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRoaXMuZG9tUmVjdClcbiAgICAgICAgICByZWN0LmlkID0gaXRlbUlkXG4gICAgICAgICAgdGhpcy5jaGlsZFJlY3RzLnB1c2gocmVjdClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRSZWN0cy5zb3J0KChhLCBiKSA9PiBhLnRvcCAtIGIudG9wKVxuICB9XG5cbiAgY3JlYXRlSXRlbSAoXG4gICAgaXRlbTogSU1MYXlvdXRJdGVtSnNvbixcbiAgICB0b3RhbDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgbGF5b3V0U2V0dGluZzogRmxvd0xheW91dFNldHRpbmdcbiAgKTogSlNYLkVsZW1lbnQge1xuICAgIGlmIChpdGVtPy5pc1BlbmRpbmcpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNvbnN0IHsgbGF5b3V0cywgbGF5b3V0LCBpdGVtRHJhZ2dhYmxlLCBpdGVtU2VsZWN0YWJsZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGlzRmlyc3QgPSBpc0ZpcnN0Tm9uRmxvYXRpbmdJdGVtKHsgbGF5b3V0SWQ6IGxheW91dC5pZCwgbGF5b3V0SXRlbUlkOiBpdGVtLmlkIH0pXG4gICAgY29uc3QgaXNMYXN0ID0gaXNMYXN0Tm9uRmxvYXRpbmdJdGVtKHsgbGF5b3V0SWQ6IGxheW91dC5pZCwgbGF5b3V0SXRlbUlkOiBpdGVtLmlkIH0pXG4gICAgY29uc3QgaXRlbVNldHRpbmc6IEZsb3dMYXlvdXRJdGVtU2V0dGluZyA9IGl0ZW0uc2V0dGluZ1xuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxTY3JlZW5Hcm91cFxuICAgICAgICAgIGtleT17YCR7bGF5b3V0LmlkfV8ke2l0ZW0uaWR9YH1cbiAgICAgICAgICBpdGVtSW5kZXg9e2luZGV4fVxuICAgICAgICAgIGlzRmlyc3Q9e2lzRmlyc3R9XG4gICAgICAgICAgaXNMYXN0PXtpc0xhc3R9XG4gICAgICAgICAgbGF5b3V0SWQ9e2xheW91dC5pZH1cbiAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2l0ZW0uaWR9XG4gICAgICAgICAgbGF5b3V0SXRlbT17aXRlbX1cbiAgICAgICAgICB0aGVtZT17dGhpcy5wYWdlQ29udGV4dC5idWlsZGVyVGhlbWV9XG4gICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5wYWdlQ29udGV4dC5mb3JtYXRNZXNzYWdlfVxuICAgICAgICAvPlxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoaXRlbVNldHRpbmc/LmlzRmxvYXRpbmcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxGbG9hdGluZ0xheW91dEl0ZW1cbiAgICAgICAgICBrZXk9e2Ake2xheW91dC5pZH1fJHtpdGVtLmlkfWB9XG4gICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgIHRvdGFsPXt0b3RhbH1cbiAgICAgICAgICBidWlsZGVyVGhlbWU9e3RoaXMuYnVpbGRlclRoZW1lfVxuICAgICAgICAgIGxheW91dHM9e2xheW91dHN9XG4gICAgICAgICAgbGF5b3V0SWQ9e2xheW91dC5pZH1cbiAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2l0ZW0uaWR9XG4gICAgICAgICAgbGF5b3V0SXRlbT17aXRlbX1cbiAgICAgICAgICBndXR0ZXI9e2xheW91dFNldHRpbmcuZ3V0dGVyfVxuICAgICAgICAgIGRyYWdnYWJsZT17aXRlbURyYWdnYWJsZX1cbiAgICAgICAgICBzZWxlY3RhYmxlPXtpdGVtU2VsZWN0YWJsZX1cbiAgICAgICAgICBvbkRyb3BBdEJvdW5kYXJ5PXt0aGlzLmhhbmRsZURyb3BBdEJvdW5kYXJ5fVxuICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e3RoaXMucGFnZUNvbnRleHQuZm9ybWF0TWVzc2FnZX1cbiAgICAgICAgLz5cbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxGbG93TGF5b3V0SXRlbVxuICAgICAgICBrZXk9e2Ake2xheW91dC5pZH1fJHtpdGVtLmlkfWB9XG4gICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgaXNGaXJzdD17aXNGaXJzdH1cbiAgICAgICAgaXNMYXN0PXtpc0xhc3R9XG4gICAgICAgIGJ1aWxkZXJUaGVtZT17dGhpcy5idWlsZGVyVGhlbWV9XG4gICAgICAgIGxheW91dHM9e2xheW91dHN9XG4gICAgICAgIGxheW91dElkPXtsYXlvdXQuaWR9XG4gICAgICAgIGxheW91dEl0ZW1JZD17aXRlbS5pZH1cbiAgICAgICAgbGF5b3V0SXRlbT17aXRlbX1cbiAgICAgICAgZ3V0dGVyPXtsYXlvdXRTZXR0aW5nLmd1dHRlcn1cbiAgICAgICAgZHJhZ2dhYmxlPXtpdGVtRHJhZ2dhYmxlfVxuICAgICAgICBzZWxlY3RhYmxlPXtpdGVtU2VsZWN0YWJsZX1cbiAgICAgICAgb25Ecm9wQXRCb3VuZGFyeT17dGhpcy5oYW5kbGVEcm9wQXRCb3VuZGFyeX1cbiAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5wYWdlQ29udGV4dC5mb3JtYXRNZXNzYWdlfVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBvbldpZGdldEl0ZW1TZWxlY3RlZCA9IChpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHJlY3QgPSB0aGlzLnJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IGl0ZW1SZWN0ID0ge1xuICAgICAgaGVpZ2h0OiBpdGVtLm1hbmlmZXN0Py5kZWZhdWx0U2l6ZT8uaGVpZ2h0ID8/IDMwMFxuICAgIH1cbiAgICB0aGlzLmFkZFdpZGdldFRvTGF5b3V0KGl0ZW0sIHJlY3QsIGl0ZW1SZWN0IGFzIENsaWVudFJlY3QsIDQsIDApXG4gIH1cblxuICBoYW5kbGVCbG9ja1RlbXBsYXRlU2VsZWN0ZWQgPSAodGVtcGxhdGUpOiB2b2lkID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nVGVtcGxhdGU6IHRydWUgfSlcbiAgICBhZGRUZW1wbGF0ZVJvdyh0aGlzLnByb3BzLmxheW91dC5pZCwgJycsIHRlbXBsYXRlKS5maW5hbGx5KCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogZmFsc2UgfSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlU2NyZWVuVGVtcGxhdGVTZWxlY3RlZCA9ICh0ZW1wbGF0ZSk6IHZvaWQgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogdHJ1ZSB9KVxuICAgIGFkZFRlbXBsYXRlU2NyZWVuR3JvdXAodGhpcy5wcm9wcy5sYXlvdXQuaWQsICcnLCB0ZW1wbGF0ZSkuZmluYWxseSgoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nVGVtcGxhdGU6IGZhbHNlIH0pXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZVBhZ2VUZW1wbGF0ZVNlbGVjdGVkID0gKHRlbXBsYXRlUGFnZUpzb24pOiB2b2lkID0+IHtcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZ1RlbXBsYXRlOiB0cnVlIH0pXG4gICAgaWYgKHRoaXMucGFnZUNvbnRleHQuaXNIZWFkZXIpIHtcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBseUhlYWRlclRlbXBsYXRlKHRlbXBsYXRlUGFnZUpzb24pLnRoZW4oKCkgPT4ge1xuICAgICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZ1RlbXBsYXRlOiBmYWxzZSB9KVxuICAgICAgICB9KVxuICAgICAgfSkuZmluYWxseShudWxsKVxuICAgIH0gZWxzZSBpZiAodGhpcy5wYWdlQ29udGV4dC5pc0Zvb3Rlcikge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uLmFwcGx5Rm9vdGVyVGVtcGxhdGUodGVtcGxhdGVQYWdlSnNvbikudGhlbigoKSA9PiB7XG4gICAgICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbiAgICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nVGVtcGxhdGU6IGZhbHNlIH0pXG4gICAgICAgIH0pXG4gICAgICB9KS5maW5hbGx5KG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBseVBhZ2VCb2R5VGVtcGxhdGUodGhpcy5wYWdlQ29udGV4dC5wYWdlSWQsIHRlbXBsYXRlUGFnZUpzb24pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogZmFsc2UgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KS5maW5hbGx5KG51bGwpXG4gICAgfVxuICB9XG5cbiAgZ2V0QWN0aW9uU3R5bGUgKCk6IFNlcmlhbGl6ZWRTdHlsZXMge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoZWlnaHQ6IDIwMHB4O1xuICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgei1pbmRleDogMTtcbiAgICAgIC5idG4tdGV4dCB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAzMnB4O1xuICAgICAgfVxuICAgICAgLmJ0biB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMnJlbTtcbiAgICAgICAgYmFja2dyb3VuZDogJHt0aGlzLmJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs2MDBdfTtcbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHt0aGlzLmJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs4MDBdfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLmFjdGlvbi1pdGVtIHtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tc2VwcmF0b3Ige1xuICAgICAgICAuc2VwIHtcbiAgICAgICAgICB3aWR0aDogNjVweDtcbiAgICAgICAgICBoZWlnaHQ6IDFweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuYnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbODAwXX07XG4gICAgICAgIH1cbiAgICAgICAgLmJ0bi10ZXh0IHtcbiAgICAgICAgICBtYXJnaW46IDAgMTNweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGdldFN0eWxlICgpOiBTZXJpYWxpemVkU3R5bGVzIHtcbiAgICBjb25zdCB7IGJ1aWxkZXJUaGVtZSB9ID0gdGhpcy5wYWdlQ29udGV4dFxuICAgIHJldHVybiBjc3NgXG4gICAgICAmID4gLnRyYWlsLWNvbnRhaW5lciA+IC5idWlsZGVyLWxheW91dC1pdGVtIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IGRhc2hlZCAke3BvbGlzaGVkLnJnYmEoYnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbNjAwXSwgMC42KX07XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgJHtwb2xpc2hlZC5yZ2JhKGJ1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzYwMF0sIDAuNil9O1xuICAgICAgICB6LWluZGV4OiAwO1xuXG4gICAgICAgIC53aWRnZXQtY29udGV4dC1tZW51IHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgJi5zZWxlY3RlZCwgJi5mbG9hdGluZyB7XG4gICAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICAmID4gLnRyYWlsLWNvbnRhaW5lciA+IC5idWlsZGVyLWxheW91dC1pdGVtIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICAgIGJvcmRlci10b3A6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGNyZWF0ZUFjdGlvbnMgKGJsb2NrT25seTogYm9vbGVhbik6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IHZpZXdPbmx5LCByb290TGF5b3V0SWQgfSA9IHRoaXMucGFnZUNvbnRleHRcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGlzUGFnZUJvZHkgPSAhdGhpcy5wYWdlQ29udGV4dC5pc0hlYWRlciAmJiAhdGhpcy5wYWdlQ29udGV4dC5pc0Zvb3RlclxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZS5pc0xvYWRpbmdUZW1wbGF0ZSB8fFxuICAgICAgIWlzUGFnZUJvZHkgfHxcbiAgICAgIHZpZXdPbmx5IHx8XG4gICAgICBsYXlvdXQuaWQgIT09IHJvb3RMYXlvdXRJZFxuICAgICkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEFjdGlvbkJsb2NrXG4gICAgICAgIHBhZ2VDb250ZXh0PXt0aGlzLnBhZ2VDb250ZXh0fVxuICAgICAgICBicm93c2VyU2l6ZU1vZGU9e3RoaXMucHJvcHMuYnJvd3NlclNpemVNb2RlfVxuICAgICAgICBibG9ja09ubHk9e2Jsb2NrT25seX1cbiAgICAgICAgb25QYWdlVGVtcGxhdGVTZWxlY3RlZD17dGhpcy5oYW5kbGVQYWdlVGVtcGxhdGVTZWxlY3RlZH1cbiAgICAgICAgb25CbG9ja1RlbXBsYXRlU2VsZWN0ZWQ9e3RoaXMuaGFuZGxlQmxvY2tUZW1wbGF0ZVNlbGVjdGVkfVxuICAgICAgICBvblNjcmVlblRlbXBsYXRlU2VsZWN0ZWQ9e3RoaXMuaGFuZGxlU2NyZWVuVGVtcGxhdGVTZWxlY3RlZH1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyICgpOiBKU1guRWxlbWVudCB7XG4gICAgY29uc3QgeyBsYXlvdXQsIGNsYXNzTmFtZSwgaXNQYWdlSXRlbSwgbGF5b3V0cywgbWFpblNpemVNb2RlLCBicm93c2VyU2l6ZU1vZGUgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAobGF5b3V0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNvbnN0IG91dENsYXNzID0gY2xhc3NOYW1lcygnbGF5b3V0IGZsb3ctbGF5b3V0IHctMTAwJywgY2xhc3NOYW1lKVxuICAgIGNvbnN0IGd1aWRlVmlzaWJsZVN0eWxlID0ge1xuICAgICAgZGlzcGxheTogdGhpcy5zdGF0ZS5pc0RyYWdvdmVyID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPFBhZ2VDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICB7KHByb3BzOiBQYWdlQ29udGV4dFByb3BzKSA9PiB7XG4gICAgICAgICAgdGhpcy5idWlsZGVyVGhlbWUgPSBwcm9wcy5idWlsZGVyVGhlbWVcbiAgICAgICAgICB0aGlzLm1heFBhZ2VXaWR0aCA9IHByb3BzLm1heFdpZHRoXG4gICAgICAgICAgdGhpcy5wYWdlQ29udGV4dCA9IHByb3BzXG4gICAgICAgICAgbGV0IHRhcmdldExheW91dCA9IGxheW91dFxuICAgICAgICAgIGNvbnN0IHZpZXdPbmx5ID0gbGF5b3V0c1ticm93c2VyU2l6ZU1vZGVdICE9PSBsYXlvdXQuaWRcbiAgICAgICAgICBpZiAodmlld09ubHkgJiYgdGhpcy5sYXlvdXRUcmFuc2Zvcm0gIT0gbnVsbCkge1xuICAgICAgICAgICAgdGFyZ2V0TGF5b3V0ID0gdGhpcy5sYXlvdXRUcmFuc2Zvcm0obGF5b3V0LCBtYWluU2l6ZU1vZGUsIGJyb3dzZXJTaXplTW9kZSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gdGFyZ2V0TGF5b3V0Lm9yZGVyID8/IFtdXG4gICAgICAgICAgY29uc3QgbGF5b3V0U2V0dGluZyA9IGxvZGFzaC5hc3NpZ24oe30sIERFRkFVTFRfRkxPV19TRVRUSU5HLCB0YXJnZXRMYXlvdXQuc2V0dGluZylcblxuICAgICAgICAgIGNvbnN0IG1lcmdlZFN0eWxlOiBhbnkgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgIC4uLnN0eWxlVXRpbHMudG9DU1NTdHlsZShsYXlvdXRTZXR0aW5nLnN0eWxlKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e291dENsYXNzfVxuICAgICAgICAgICAgICByZWY9e2VsID0+ICh0aGlzLnJlZiA9IGVsKX1cbiAgICAgICAgICAgICAgY3NzPXt0aGlzLmdldFN0eWxlKCl9XG4gICAgICAgICAgICAgIHN0eWxlPXttZXJnZWRTdHlsZX1cbiAgICAgICAgICAgICAgZGF0YS1sYXlvdXRpZD17bGF5b3V0LmlkfVxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUFjdGl2YXRlfVxuICAgICAgICAgICAgICBvbk1vdXNlRG93bj17dGhpcy5oYW5kbGVNb3VzZURvd259XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJbnRlcnNlY3Rpb25Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IG1vbml0b3I6IHRydWUgfX0+XG4gICAgICAgICAgICAgICAgPE9uZUJ5T25lQW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICBvaWQ9e3RhcmdldExheW91dC5pZH1cbiAgICAgICAgICAgICAgICAgIGRhdGEtbGF5b3V0aWQ9e3RhcmdldExheW91dC5pZH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndHJhaWwtY29udGFpbmVyIGQtZmxleCBmbGV4LWNvbHVtbiBhbGlnbi1pdGVtcy1jZW50ZXInXG4gICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHshcHJvcHMudmlld09ubHkgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8RHJvcEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Ryb3BhcmVhU3R5bGV9XG4gICAgICAgICAgICAgICAgICAgICAgbGF5b3V0cz17dGhpcy5wcm9wcy5sYXlvdXRzfVxuICAgICAgICAgICAgICAgICAgICAgIGlzUmVwZWF0PXt0aGlzLnByb3BzLmlzUmVwZWF0fVxuICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodERyYWdvdmVyPXshaXNQYWdlSXRlbX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbnRlcj17dGhpcy5oYW5kbGVEcmFnRW50ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgb25EcmFnTGVhdmU9e3RoaXMuaGFuZGxlRHJhZ0xlYXZlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3RoaXMuaGFuZGxlRHJhZ092ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXt0aGlzLmhhbmRsZURyb3B9XG4gICAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGVEcmFnb3ZlckVmZmVjdD17dGhpcy5oYW5kbGVUb2dnbGVEcmFnb3ZlckVmZmVjdH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7Y29udGVudC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgIChjb250ZW50IGFzIGFueSkubWFwKChsYXlvdXRJdGVtSWQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSXRlbShcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExheW91dC5jb250ZW50W2xheW91dEl0ZW1JZF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0U2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9PbmVCeU9uZUFuaW1hdGlvbj5cbiAgICAgICAgICAgICAgPC9JbnRlcnNlY3Rpb25Db250ZXh0LlByb3ZpZGVyPlxuXG4gICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5pc0xvYWRpbmdUZW1wbGF0ZSAmJlxuICAgICAgICAgICAgICAgICFwcm9wcy52aWV3T25seSAmJlxuICAgICAgICAgICAgICAgIHV0aWxzLmlzRW1wdHlMYXlvdXQodGFyZ2V0TGF5b3V0KSAmJlxuICAgICAgICAgICAgICAgIGxheW91dC5pZCA9PT0gcHJvcHMucm9vdExheW91dElkICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVBY3Rpb25zKGZhbHNlKX1cbiAgICAgICAgICAgICAge2NvbnRlbnQubGVuZ3RoID4gMCAmJiB0aGlzLmNyZWF0ZUFjdGlvbnModHJ1ZSl9XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzTG9hZGluZ1RlbXBsYXRlICYmIDxMb2FkaW5nIHR5cGU9e0xvYWRpbmdUeXBlLlByaW1hcnl9IC8+fVxuICAgICAgICAgICAgICA8Y2FudmFzIGNzcz17Z3VpZGVPdmVybGF5fSBzdHlsZT17Z3VpZGVWaXNpYmxlU3R5bGV9IHJlZj17ZWwgPT4gKHRoaXMuY2FudmFzUmVmID0gZWwpfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKVxuICAgICAgICB9fVxuICAgICAgPC9QYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgTGF5b3V0UHJvcHM+KHV0aWxzLm1hcFN0YXRlVG9MYXlvdXRQcm9wcykoTGF5b3V0KVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgQnJvd3NlclNpemVNb2RlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiwgYXBwQnVpbGRlclN5bmMgfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgQ09OVEVYVF9NRU5VX0lURU1fU0laRSwgQ09OVEVYVF9NRU5VX0lDT05fU0laRSB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFRlbXBsYXRlU2VsZWN0b3IgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IGdldEJsb2NrVGVtcGxhdGVzLCBnZXRTY3JlZW5Hcm91cFRlbXBsYXRlcyB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXIvdGVtcGxhdGVzJ1xuaW1wb3J0IHsgYWRkVGVtcGxhdGVSb3csIGFkZFRlbXBsYXRlU2NyZWVuR3JvdXAsIG1vdmVVcCwgbW92ZURvd24gfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgRmxvd0NvbnRleHRNZW51IH0gZnJvbSAnLi9mbG93LWNvbnRleHQtbWVudSdcbmltcG9ydCB7IHBlbmRpbmdNZW51SXRlbSwgZHVwbGljYXRlTWVudUl0ZW0sIGlzTG9ja0xheW91dCwgZ2V0TGFiZWxPZkxheW91dEl0ZW0gfSBmcm9tICcuLi8uLi9idWlsZGVyL21lbnUvY29tbW9uLW1lbnUnXG5pbXBvcnQgZGVsZXRlSWNvbiBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xuaW1wb3J0IHNldHRpbmdJY29uIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL3NldHRpbmcuc3ZnJ1xuaW1wb3J0IGRyYWdnaW5nSWNvbiBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvbW92ZS5zdmcnXG5pbXBvcnQgYWRkSWNvbiBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9icmFuZC9ibG9jay5zdmcnXG5pbXBvcnQgcmVjdEljb24gZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvYnJhbmQvc2NyZWVuLWdyb3VwLnN2ZydcbmltcG9ydCB1cEljb24gZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAuc3ZnJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbiAgaXNGaXJzdDogYm9vbGVhblxuICBpc0xhc3Q6IGJvb2xlYW5cbiAgYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4gIGZvcm1hdE1lc3NhZ2U6IChzdHJpbmcsIHZhbHVlcz86IGFueSkgPT4gc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTY3JlZW5Db250ZXh0TWVudSAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgYnVpbGRlclRoZW1lLCBsYXlvdXRJdGVtLCBmb3JtYXRNZXNzYWdlLCBpc0ZpcnN0LCBpc0xhc3QgfSA9IHByb3BzXG5cbiAgY29uc3QgW3Nob3dCbG9ja1BvcHBlciwgc2V0U2hvd0Jsb2NrUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbc2hvd1NjcmVlbkdyb3VwUG9wcGVyLCBzZXRTaG93U2NyZWVuR3JvdXBQb3BwZXJdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgY29udGV4dE1lbnVSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcblxuICBjb25zdCBvblRlbXBsYXRlQmxvY2tTZWxlY3RlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCh0ZW1wbGF0ZSkgPT4ge1xuICAgIGFkZFRlbXBsYXRlUm93KGxheW91dElkLCBsYXlvdXRJdGVtSWQsIHRlbXBsYXRlKVxuXG4gICAgc2V0U2hvd0Jsb2NrUG9wcGVyKGZhbHNlKVxuICB9LCBbbGF5b3V0SWQsIGxheW91dEl0ZW1JZF0pXG5cbiAgY29uc3QgdG9nZ2xlQmxvY2tQb3BwZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5icm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgICAgYXBwQnVpbGRlclN5bmMucHVibGlzaFNpZGVQYW5lbFRvQXBwKHsgdHlwZTogJ3RlbXBsYXRlQmxvY2snLCB0ZW1wbGF0ZU1ldGhvZDogJ2dldEJsb2NrVGVtcGxhdGVzJywgb25TZWxlY3Q6IG9uVGVtcGxhdGVCbG9ja1NlbGVjdGVkIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgc2V0U2hvd0Jsb2NrUG9wcGVyKCFzaG93QmxvY2tQb3BwZXIpXG4gIH0sIFtzaG93QmxvY2tQb3BwZXIsIG9uVGVtcGxhdGVCbG9ja1NlbGVjdGVkXSlcblxuICBjb25zdCB0b2dnbGVTY3JlZW5Hcm91cFBvcHBlciA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93U2NyZWVuR3JvdXBQb3BwZXIoIXNob3dTY3JlZW5Hcm91cFBvcHBlcilcbiAgfSwgW3Nob3dTY3JlZW5Hcm91cFBvcHBlcl0pXG5cbiAgY29uc3Qgb25UZW1wbGF0ZVNjcmVlbkdyb3VwU2VsZWN0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygodGVtcGxhdGUpID0+IHtcbiAgICBhZGRUZW1wbGF0ZVNjcmVlbkdyb3VwKGxheW91dElkLCBsYXlvdXRJdGVtSWQsIHRlbXBsYXRlKVxuXG4gICAgc2V0U2hvd1NjcmVlbkdyb3VwUG9wcGVyKGZhbHNlKVxuICB9LCBbbGF5b3V0SWQsIGxheW91dEl0ZW1JZF0pXG5cbiAgY29uc3QgbW92ZUxheW91dEl0ZW1VcCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGNvbnN0IGFwcENvbmZpZyA9IG1vdmVVcChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSlcbiAgICBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKS5leGVjKClcbiAgfSwgW2xheW91dElkLCBsYXlvdXRJdGVtSWRdKVxuXG4gIGNvbnN0IG1vdmVMYXlvdXRJdGVtRG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGNvbnN0IGFwcENvbmZpZyA9IG1vdmVEb3duKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9KVxuICAgIGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpLmV4ZWMoKVxuICB9LCBbbGF5b3V0SWQsIGxheW91dEl0ZW1JZF0pXG5cbiAgY29uc3QgcmVtb3ZlTGF5b3V0SXRlbSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBhcHBCdWlsZGVyU3luYy5wdWJsaXNoQ29uZmlybURlbGV0ZVRvQXBwKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9KVxuICB9LCBbbGF5b3V0SWQsIGxheW91dEl0ZW1JZF0pXG5cbiAgY29uc3Qgc3dpdGNoU2V0dGluZyA9ICgpID0+IHtcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VsZWN0aW9uQ2hhbmdlZCh7XG4gICAgICBsYXlvdXRJZCxcbiAgICAgIGxheW91dEl0ZW1JZFxuICAgIH0pKVxuICB9XG5cbiAgY29uc3Qgc2l6ZW1vZGVTdXBwb3J0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5icm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5MYXJnZVxuICB9LCBbXSlcblxuICBjb25zdCBjb250ZXh0TWVudXMgPSBbe1xuICAgIGljb246IGFkZEljb24sXG4gICAgdGl0bGU6IGZvcm1hdE1lc3NhZ2UoJ2luc2VydEFCbG9jaycpLFxuICAgIG9uQ2xpY2s6IHRvZ2dsZUJsb2NrUG9wcGVyLFxuICAgIHZpc2libGU6ICgpID0+ICFpc0xvY2tMYXlvdXQoKVxuICB9LFxuICB7XG4gICAgaWNvbjogcmVjdEljb24sXG4gICAgdGl0bGU6IGZvcm1hdE1lc3NhZ2UoJ2luc2VydEFTY3JlZW5Hcm91cCcpLFxuICAgIG9uQ2xpY2s6IHRvZ2dsZVNjcmVlbkdyb3VwUG9wcGVyLFxuICAgIHZpc2libGU6ICgpID0+IHNpemVtb2RlU3VwcG9ydGVkKCkgJiYgIWlzTG9ja0xheW91dCgpXG4gIH0sXG4gIHBlbmRpbmdNZW51SXRlbSxcbiAge1xuICAgIC4uLmR1cGxpY2F0ZU1lbnVJdGVtLFxuICAgIHZpc2libGU6ICgpID0+IHNpemVtb2RlU3VwcG9ydGVkKCkgJiYgIWlzTG9ja0xheW91dCgpXG4gIH0sXG4gIHtcbiAgICBpY29uOiBzZXR0aW5nSWNvbixcbiAgICB0aXRsZTogZm9ybWF0TWVzc2FnZSgnc2V0dGluZycpLFxuICAgIG9uQ2xpY2s6IHN3aXRjaFNldHRpbmdcbiAgfSwge1xuICAgIGljb246IGRyYWdnaW5nSWNvbixcbiAgICB0aXRsZTogZm9ybWF0TWVzc2FnZSgnZHJhZ1RvTW92ZScsIHsgbGFiZWw6IGdldExhYmVsT2ZMYXlvdXRJdGVtKGxheW91dEl0ZW0pIH0pLFxuICAgIGNsYXNzTmFtZTogJ3Rvb2wtZHJhZy1oYW5kbGVyJyxcbiAgICBvbkNsaWNrOiAoKSA9PiB7fSxcbiAgICB2aXNpYmxlOiAoKSA9PiAhaXNMb2NrTGF5b3V0KClcbiAgfSwge1xuICAgIGljb246IHVwSWNvbixcbiAgICBvbkNsaWNrOiBtb3ZlTGF5b3V0SXRlbVVwLFxuICAgIHRpdGxlOiBmb3JtYXRNZXNzYWdlKCdtb3ZldXAnKSxcbiAgICB2aXNpYmxlOiAoKSA9PiAhaXNGaXJzdCAmJiAhaXNMb2NrTGF5b3V0KClcbiAgfSwge1xuICAgIGljb246IHVwSWNvbixcbiAgICByb3RhdGU6IDE4MCxcbiAgICBvbkNsaWNrOiBtb3ZlTGF5b3V0SXRlbURvd24sXG4gICAgdGl0bGU6IGZvcm1hdE1lc3NhZ2UoJ21vdmVkb3duJyksXG4gICAgdmlzaWJsZTogKCkgPT4gIWlzTGFzdCAmJiAhaXNMb2NrTGF5b3V0KClcbiAgfSwge1xuICAgIGljb246IGRlbGV0ZUljb24sXG4gICAgdGl0bGU6IGZvcm1hdE1lc3NhZ2UoJ2RlbGV0ZScpLFxuICAgIG9uQ2xpY2s6IHJlbW92ZUxheW91dEl0ZW0sXG4gICAgdmlzaWJsZTogKCkgPT4gIWlzTG9ja0xheW91dCgpXG4gIH1dXG5cbiAgcmV0dXJuIChcbiAgICA8Rmxvd0NvbnRleHRNZW51XG4gICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICBsYXlvdXRJdGVtPXtsYXlvdXRJdGVtfVxuICAgICAgYnVpbGRlclRoZW1lPXtidWlsZGVyVGhlbWV9XG4gICAgICBwb3NpdGlvblR5cGU9J2NlbnRlcidcbiAgICAgIHNpemU9e0NPTlRFWFRfTUVOVV9JVEVNX1NJWkV9XG4gICAgICBpY29uU2l6ZT17Q09OVEVYVF9NRU5VX0lDT05fU0laRX1cbiAgICAgIGNsYXNzTmFtZT0nd2lkZ2V0LWNvbnRleHQtbWVudSdcbiAgICAgIG1lbnVJdGVtcz17Y29udGV4dE1lbnVzfVxuICAgICAgaXNGaXJzdD17aXNGaXJzdH1cbiAgICAgIGlzTGFzdD17aXNMYXN0fVxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgcmVmPXtjb250ZXh0TWVudVJlZn1cbiAgICAgICAgY3NzPXtjc3NgcG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7cG9pbnRlci1ldmVudHM6bm9uZTtgfVxuICAgICAgLz5cbiAgICAgIHtzaG93QmxvY2tQb3BwZXIgJiYgKFxuICAgICAgICA8VGVtcGxhdGVTZWxlY3RvclxuICAgICAgICAgIHRlbXBsYXRlcz17Z2V0QmxvY2tUZW1wbGF0ZXMoKX1cbiAgICAgICAgICByZWZlcmVuY2VFbGVtZW50PXtjb250ZXh0TWVudVJlZi5jdXJyZW50fVxuICAgICAgICAgIG9uSXRlbVNlbGVjdD17b25UZW1wbGF0ZUJsb2NrU2VsZWN0ZWR9XG4gICAgICAgICAgb25DbG9zZT17dG9nZ2xlQmxvY2tQb3BwZXJ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAge3Nob3dTY3JlZW5Hcm91cFBvcHBlciAmJiAoXG4gICAgICAgIDxUZW1wbGF0ZVNlbGVjdG9yXG4gICAgICAgICAgdGVtcGxhdGVzPXtnZXRTY3JlZW5Hcm91cFRlbXBsYXRlcygpfVxuICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ9e2NvbnRleHRNZW51UmVmLmN1cnJlbnR9XG4gICAgICAgICAgb25JdGVtU2VsZWN0PXtvblRlbXBsYXRlU2NyZWVuR3JvdXBTZWxlY3RlZH1cbiAgICAgICAgICBvbkNsb3NlPXt0b2dnbGVTY3JlZW5Hcm91cFBvcHBlcn1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgPC9GbG93Q29udGV4dE1lbnU+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBTY3JlZW5UcmFuc2l0aW9uVHlwZSxcbiAgY2xhc3NOYW1lc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uLCBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBTZXR0aW5nU2VjdGlvbiwgU2V0dGluZ1JvdyB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc2V0dGluZy1jb21wb25lbnRzJ1xuXG5pbnRlcmZhY2UgT3duUHJvcHMge1xuICB0cmFuc2l0aW9uVHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGVcbiAgcGFuZWxUcmFuc2l0aW9uVHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGVcbiAgb25UcmFuc2l0aW9uVHlwZUNoYW5nZTogKHR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlKSA9PiB2b2lkXG4gIG9uUGFuZWxUcmFuc2l0aW9uVHlwZUNoYW5nZTogKHR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlKSA9PiB2b2lkXG4gIGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBzdHJpbmdcbn1cblxuZXhwb3J0IGNvbnN0IGljb25zID0ge1xuICBbU2NyZWVuVHJhbnNpdGlvblR5cGUuUHVzaF06IHJlcXVpcmUoJ2ppbXUtdWkvYWR2YW5jZWQvbGliL2Fzc2V0cy9pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX3B1c2guc3ZnJyksXG4gIFtTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlXTogcmVxdWlyZSgnamltdS11aS9hZHZhbmNlZC9saWIvYXNzZXRzL2ljb25fYW5pbWF0aW9uX3RyYW5zaXRpb25fZmFkZS5zdmcnKSxcbiAgW1NjcmVlblRyYW5zaXRpb25UeXBlLkNvdmVyXTogcmVxdWlyZSgnamltdS11aS9hZHZhbmNlZC9saWIvYXNzZXRzL2ljb25fYW5pbWF0aW9uX3RyYW5zaXRpb25fcHVzaC5zdmcnKVxufVxuXG5leHBvcnQgY2xhc3MgVHJhbnNpdGlvblBvcHBlckNvbnRlbnQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PE93blByb3BzPiB7XG4gIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmFuaW1hdGlvbi1jYXJkcyB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgZ3JpZC1yb3ctZ2FwOiAxMnB4O1xuICAgICAgICBncmlkLWNvbHVtbi1nYXA6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWl0ZW0ge1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGZsZXg6IDAgMCA0NSU7XG5cbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgICAgIC5jYXJkLWNvbnRlbnQge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogNXJlbTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodC0yMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgJi5zZWxlY3RlZCAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0tcHJpbWFyeS03MDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNhcmQtaW1hZ2Uge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJkLW5hbWUge1xuICAgICAgICAgIG1heC13aWR0aDogOTBweDtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICBjb2xvcjogdmFyKC0tZGFyay04MDApO1xuICAgICAgICAgIC5jYXJkLW5hbWUtY29udGVudCB7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMXJlbTtcbiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIG9uVHlwZUNoYW5nZWQgPSAoZSwgdHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGUsIGlzUGFuZWw6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNQYW5lbCkge1xuICAgICAgdGhpcy5wcm9wcy5vblBhbmVsVHJhbnNpdGlvblR5cGVDaGFuZ2UodHlwZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wcm9wcy5vblRyYW5zaXRpb25UeXBlQ2hhbmdlKHR5cGUpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlRmlyc3RQYW5lbCA9IChlKSA9PiB7XG4gICAgLy8gZS50YXJnZXQuY2hlY2tlZDtcbiAgfVxuXG4gIGNyZWF0ZUFuaW1hdGlvbkNhcmQgKHR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlLCBpbmRleDogbnVtYmVyLCBpc1BhbmVsID0gZmFsc2UpIHtcbiAgICBjb25zdCB7IHRyYW5zaXRpb25UeXBlLCBwYW5lbFRyYW5zaXRpb25UeXBlIH0gPSB0aGlzLnByb3BzXG4gICAgbGV0IGVmZmVjdFR5cGVcbiAgICBpZiAoaXNQYW5lbCkge1xuICAgICAgZWZmZWN0VHlwZSA9IHBhbmVsVHJhbnNpdGlvblR5cGUgPz8gU2NyZWVuVHJhbnNpdGlvblR5cGUuUHVzaFxuICAgIH0gZWxzZSB7XG4gICAgICBlZmZlY3RUeXBlID0gdHJhbnNpdGlvblR5cGUgPz8gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2QtZmxleCBmbGV4LWNvbHVtbiBhbGlnbi1pdGVtcy1jZW50ZXIgY2FyZC1pdGVtJywge1xuICAgICAgICAgIHNlbGVjdGVkOiB0eXBlID09PSBlZmZlY3RUeXBlXG4gICAgICAgIH0pfVxuICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICBvbkNsaWNrPXsoZSkgPT4geyB0aGlzLm9uVHlwZUNoYW5nZWQoZSwgdHlwZSwgaXNQYW5lbCkgfX1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGNhcmQtY29udGVudCc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NhcmQtaW1hZ2UnPlxuICAgICAgICAgICAgPEljb24gY2xhc3NOYW1lPSd3LTEwMCcgY3VycmVudENvbG9yPXtmYWxzZX0gaWNvbj17aWNvbnNbdHlwZV19IHNpemU9ezcyfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NhcmQtbmFtZSBmbGV4LWdyb3ctMSBkLWZsZXggYWxpZ24taXRlbXMtc3RhcnQgbXQtMSc+XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC1jZW50ZXIgdGV4dC10cnVuY2F0ZSBjYXJkLW5hbWUtY29udGVudCdcbiAgICAgICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2UodHlwZS50b0xvd2VyQ2FzZSgpKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKHR5cGUudG9Mb3dlckNhc2UoKSl9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBmb3JtYXRNZXNzYWdlIH0gPSB0aGlzLnByb3BzXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9J2JnLWxpZ2h0LTMwMCBib3JkZXItY29sb3ItZ3JheS00MDAnIGNzcz17dGhpcy5nZXRTdHlsZSgpfVxuICAgICAgPlxuICAgICAgICA8U2V0dGluZ1NlY3Rpb24gdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ21haW5TdGFnZScpfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWF0aW9uLWNhcmRzJz5cbiAgICAgICAgICAgIHtbU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZSwgU2NyZWVuVHJhbnNpdGlvblR5cGUuQ292ZXIsIFNjcmVlblRyYW5zaXRpb25UeXBlLlB1c2hdXG4gICAgICAgICAgICAgIC5tYXAoKGluZm8sIGluZGV4KSA9PiB0aGlzLmNyZWF0ZUFuaW1hdGlvbkNhcmQoaW5mbywgaW5kZXgpKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgICAgPFNldHRpbmdTZWN0aW9uIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdzY3JvbGxpbmdQYW5lbCcpfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWF0aW9uLWNhcmRzJz5cbiAgICAgICAgICAgIHtbU2NyZWVuVHJhbnNpdGlvblR5cGUuUHVzaCwgU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZV1cbiAgICAgICAgICAgICAgLm1hcCgoaW5mbywgaW5kZXgpID0+IHRoaXMuY3JlYXRlQW5pbWF0aW9uQ2FyZChpbmZvLCBpbmRleCwgdHJ1ZSkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L1NldHRpbmdTZWN0aW9uPlxuICAgICAgICA8U2V0dGluZ1NlY3Rpb24+XG4gICAgICAgICAgPFNldHRpbmdSb3c+XG4gICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlRmlyc3RQYW5lbH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtci0yJ1xuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHtmb3JtYXRNZXNzYWdlKCdhcHBseVRvRmlyc3RQYW5lbCcpfVxuICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgUmVhY3RSZWR1eCxcbiAgU2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gIGNyZWF0ZVNlbGVjdG9yXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNldHRpbmdTZWN0aW9uLCBTaWRlUG9wcGVyIH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBJY29uLCBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24gfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtU2V0dGluZ1Byb3BzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCB7IFRyYW5zaXRpb25Qb3BwZXJDb250ZW50LCBpY29ucyB9IGZyb20gJy4vc2NyZWVuLWdyb3VwLXNldHRpbmctcG9wcGVyJ1xuXG5pbnRlcmZhY2UgU3RhdGVUb1Byb3BzIHtcbiAgdHJhbnNpdGlvblR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlXG4gIHBhbmVsVHJhbnNpdGlvblR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIHNob3dTaWRlUGFuZWw6IGJvb2xlYW5cbn1cblxuY29uc3QgYW5pbWF0aW9uSWNvbiA9IHJlcXVpcmUoJ2ppbXUtdWkvYWR2YW5jZWQvbGliL2Fzc2V0cy9pY29uX2FuaW1hdGlvbl9pbl9ub25lLnN2ZycpXG5cbmNsYXNzIFNjcmVlbkdyb3VwU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVNldHRpbmdQcm9wcyAmIFN0YXRlVG9Qcm9wcywgU3RhdGU+IHtcbiAgc2lkZVBvcHBlclRyaWdnZXIgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNob3dTaWRlUGFuZWw6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgb25UcmFuc2l0aW9uVHlwZUNoYW5nZSA9ICh0eXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZSkgPT4ge1xuICAgIGNvbnN0IHsgc2NyZWVuR3JvdXBJZCB9ID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtXG4gICAgZ2V0QXBwQ29uZmlnQWN0aW9uKCkuZWRpdFNjcmVlbkdyb3VwUHJvcGVydHkoc2NyZWVuR3JvdXBJZCwgJ3RyYW5zaXRpb25UeXBlJywgdHlwZSkuZXhlYygpXG4gIH1cblxuICBvblBhbmVsVHJhbnNpdGlvblR5cGVDaGFuZ2UgPSAodHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGUpID0+IHtcbiAgICBjb25zdCB7IHNjcmVlbkdyb3VwSWQgfSA9IHRoaXMucHJvcHMubGF5b3V0SXRlbVxuICAgIGdldEFwcENvbmZpZ0FjdGlvbigpLmVkaXRTY3JlZW5Hcm91cFByb3BlcnR5KHNjcmVlbkdyb3VwSWQsICdwYW5lbFRyYW5zaXRpb25UeXBlJywgdHlwZSkuZXhlYygpXG4gIH1cblxuICBnZXRBbmltQm94U3R5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiA3MnB4O1xuXG4gICAgICAuaW1nLXRpcCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgbWluLXdpZHRoOiA5MHB4O1xuICAgICAgICBoZWlnaHQ6IDcycHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQtMjAwKTtcblxuICAgICAgICAuaGFzLXNpYmxpbmcge1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAmLmZpcnN0IHtcbiAgICAgICAgICAgIGxlZnQ6IDVweDtcbiAgICAgICAgICAgIHRvcDogNXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAmLnNlY29uZCB7XG4gICAgICAgICAgICBib3R0b206IDVweDtcbiAgICAgICAgICAgIHJpZ2h0OiA1cHg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLmRpYWctc2VwIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgaGVpZ2h0OiAxcHg7XG4gICAgICAgICAgd2lkdGg6IDgwcHg7XG4gICAgICAgICAgdG9wOiAzNnB4O1xuICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlWigtNDVkZWcpO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LTUwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmFuaW0tbGFiZWwge1xuICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGdldFNpZGVQb3BwZXJTdHlsZSAoKSB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIC5oZWFkZXIge1xuICAgICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICAgIHBhZGRpbmc6IDAgMC41cmVtO1xuICAgICAgfVxuICAgICAgLnNpZGUtcG9wcGVyLXRpdGxlIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWRhcmstNjAwKTtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgfVxuICAgICAgLnNpZGUtY29udGVudCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gNjBweCk7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIHRvZ2dsZVNpZGVQYW5lbCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1NpZGVQYW5lbDogIXRoaXMuc3RhdGUuc2hvd1NpZGVQYW5lbCB9KVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGZvcm1hdE1lc3NhZ2UgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB0cmFuc2l0aW9uVHlwZSA9IHRoaXMucHJvcHMudHJhbnNpdGlvblR5cGUgPz8gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZVxuICAgIGNvbnN0IHBhbmVsVHJhbnNpdGlvblR5cGUgPSB0aGlzLnByb3BzLnBhbmVsVHJhbnNpdGlvblR5cGUgPz8gU2NyZWVuVHJhbnNpdGlvblR5cGUuUHVzaFxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTZXR0aW5nU2VjdGlvbiB0aXRsZT17Zm9ybWF0TWVzc2FnZSgndHJhbnNpdGlvbicpfT5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT0nYW5pbWEtYm94IGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXInXG4gICAgICAgICAgY3NzPXt0aGlzLmdldEFuaW1Cb3hTdHlsZSgpfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ltZy10aXAgZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJyBvbkNsaWNrPXt0aGlzLnRvZ2dsZVNpZGVQYW5lbH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbS1pY29uIGZpcnN0IGhhcy1zaWJsaW5nJz5cbiAgICAgICAgICAgICAgPEljb24gaWNvbj17aWNvbnNbdHJhbnNpdGlvblR5cGVdID8/IGFuaW1hdGlvbkljb259IHNpemU9ezMyfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGlhZy1zZXAnIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbS1pY29uIHNlY29uZCBoYXMtc2libGluZyc+XG4gICAgICAgICAgICAgIDxJY29uIGljb249e2ljb25zW3BhbmVsVHJhbnNpdGlvblR5cGVdID8/IGFuaW1hdGlvbkljb259IHNpemU9ezMyfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1lbmQgaC0xMDAnPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FuaW0tbGFiZWwnPlxuICAgICAgICAgICAgICA8c3Bhbj57Zm9ybWF0TWVzc2FnZSh0cmFuc2l0aW9uVHlwZS50b0xvd2VyQ2FzZSgpKX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXgtMSc+Lzwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4+e2Zvcm1hdE1lc3NhZ2UocGFuZWxUcmFuc2l0aW9uVHlwZS50b0xvd2VyQ2FzZSgpKX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhbWluLWljb25zIHctMTAwJyByZWY9e3RoaXMuc2lkZVBvcHBlclRyaWdnZXJ9PlxuICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBvbkNsaWNrPXt0aGlzLnRvZ2dsZVNpZGVQYW5lbH0gY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJyB0aXRsZT17Zm9ybWF0TWVzc2FnZSgnY2hhbmdlJyl9PlxuICAgICAgICAgICAgICAgIHtmb3JtYXRNZXNzYWdlKCdjaGFuZ2UnKX1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHt0aGlzLnN0YXRlLnNob3dTaWRlUGFuZWwgJiYgKFxuICAgICAgICAgIDxTaWRlUG9wcGVyIGlzT3BlbiB0aXRsZT17Zm9ybWF0TWVzc2FnZSgndHJhbnNpdGlvbicpfSBjc3M9e3RoaXMuZ2V0U2lkZVBvcHBlclN0eWxlKCl9IHBvc2l0aW9uPSdyaWdodCcgdG9nZ2xlPXt0aGlzLnRvZ2dsZVNpZGVQYW5lbH0gdHJpZ2dlcj17dGhpcy5zaWRlUG9wcGVyVHJpZ2dlcj8uY3VycmVudH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZS1jb250ZW50Jz5cbiAgICAgICAgICAgICAgPFRyYW5zaXRpb25Qb3BwZXJDb250ZW50XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvblR5cGU9e3RyYW5zaXRpb25UeXBlfVxuICAgICAgICAgICAgICAgIHBhbmVsVHJhbnNpdGlvblR5cGU9e3BhbmVsVHJhbnNpdGlvblR5cGV9XG4gICAgICAgICAgICAgICAgb25UcmFuc2l0aW9uVHlwZUNoYW5nZT17dGhpcy5vblRyYW5zaXRpb25UeXBlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uUGFuZWxUcmFuc2l0aW9uVHlwZUNoYW5nZT17dGhpcy5vblBhbmVsVHJhbnNpdGlvblR5cGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZm9ybWF0TWVzc2FnZT17Zm9ybWF0TWVzc2FnZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvU2lkZVBvcHBlcj5cbiAgICAgICAgKX1cbiAgICAgIDwvU2V0dGluZ1NlY3Rpb24+XG4gICAgKVxuICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IGNyZWF0ZVNlbGVjdG9yKFtcbiAgKHN0YXRlOiBJTVN0YXRlLCBwcm9wczogTGF5b3V0SXRlbVNldHRpbmdQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgc2NyZWVuR3JvdXBJZCB9ID0gcHJvcHMubGF5b3V0SXRlbVxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlclxuICAgIHJldHVybiBhcHBDb25maWcuc2NyZWVuR3JvdXBzW3NjcmVlbkdyb3VwSWRdLnRyYW5zaXRpb25UeXBlXG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgcHJvcHM6IExheW91dEl0ZW1TZXR0aW5nUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHNjcmVlbkdyb3VwSWQgfSA9IHByb3BzLmxheW91dEl0ZW1cbiAgICBjb25zdCB7IGFwcENvbmZpZyB9ID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgICByZXR1cm4gYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tzY3JlZW5Hcm91cElkXS5wYW5lbFRyYW5zaXRpb25UeXBlXG4gIH1cbl0sICh0cmFuc2l0aW9uVHlwZSwgcGFuZWxUcmFuc2l0aW9uVHlwZSkgPT4gKHsgdHJhbnNpdGlvblR5cGUsIHBhbmVsVHJhbnNpdGlvblR5cGUgfSkpXG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxTdGF0ZVRvUHJvcHMsIHVua25vd24sIExheW91dEl0ZW1TZXR0aW5nUHJvcHM+KG1hcFN0YXRlVG9Qcm9wcykoU2NyZWVuR3JvdXBTZXR0aW5nKVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgdHlwZSBJTVN0YXRlLFxuICB1dGlscyBhcyBqaW11VXRpbHMsXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgU2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgSU1TY3JlZW5Hcm91cEpzb24sXG4gIFNjcmVlblRyaWdnZXJUeXBlLFxuICBLZXlib2FyZCxcbiAgQXBwTW9kZSxcbiAgUmVhY3RSZXNpemVEZXRlY3RvcixcbiAgbG9kYXNoLFxuICB0eXBlIFNlcmlhbGl6ZWRTdHlsZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgaW50ZXJhY3QgfSBmcm9tICdqaW11LWNvcmUvZG5kJ1xuaW1wb3J0IHsgYnVpbGRlckFjdGlvbnMgfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtUHJvcHMsIFBhZ2VDb250ZXh0IH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgU2NyZWVuR3JvdXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vYnVpbGRlci9wYWdlLWNvbnRleHQnXG5pbXBvcnQgeyBTY3JlZW5Hcm91cE1lbnUgfSBmcm9tICcuL3NjcmVlbi1tZW51J1xuaW1wb3J0IHsgU2NyZWVuTWFpblBhbmVsTGlzdCB9IGZyb20gJy4uL2NvbW1vbidcbmltcG9ydCB7IFNjcmVlblNpZGVQYW5lbCB9IGZyb20gJy4vc2NyZWVuLXNpZGUtcGFuZWwnXG5pbXBvcnQgeyBiaW5kRHJhZ0hhbmRsZXIsIHNldElzRHJhZ2dpbmcgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL2RyYWctZXZlbnQtaGFuZGxlcidcbmltcG9ydCBMYXlvdXRFbnRyeSBmcm9tICcuLi8uLi9idWlsZGVyL2xheW91dC1lbnRyeSdcbmltcG9ydCB7IGlzTG9ja0xheW91dCB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9jb21tb24tbWVudSdcbmltcG9ydCB7IFNjcmVlbkNvbnRleHRNZW51IH0gZnJvbSAnLi9zY3JlZW4tY29udGV4dC1tZW51J1xuaW1wb3J0IHsgU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkUsIERFRkFVTFRfSEVBREVSX0hFSUdIVCB9IGZyb20gJy4uL2NvbW1vbi90eXBlJ1xuaW1wb3J0IHsgdXBkYXRlU2NyZWVuSGVpZ2h0IH0gZnJvbSAnLi4vY29tbW9uL3V0aWwnXG5cbmludGVyZmFjZSBPd25Qcm9wcyB7XG4gIGl0ZW1JbmRleDogbnVtYmVyXG4gIGlzRmlyc3Q6IGJvb2xlYW5cbiAgaXNMYXN0OiBib29sZWFuXG4gIC8vIGluZGV4OiBudW1iZXI7XG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbiAgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xufVxuXG5mdW5jdGlvbiBnZXRTdHlsZSAoXG4gIHZpZXdIZWlnaHQ6IG51bWJlcixcbiAgYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzLFxuICBpc0ZpcnN0OiBib29sZWFuLFxuICBpc0xhc3Q6IGJvb2xlYW4sXG4gIHNlbGVjdGVkOiBib29sZWFuLFxuICBpc092ZXJsYXk6IGJvb2xlYW5cbik6IFNlcmlhbGl6ZWRTdHlsZXMge1xuICByZXR1cm4gY3NzYFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMTAwJTtcblxuICAgICYgPiBkaXYud2lkZ2V0LWNvbnRleHQtbWVudSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgICY6aG92ZXIgPiBkaXYud2lkZ2V0LWNvbnRleHQtbWVudSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cblxuICAgIGJvZHkubG9jay1sYXlvdXQgJiB7XG4gICAgICAuc2NyZWVuLW1lbnUge1xuICAgICAgICBib3R0b206ICR7aXNGaXJzdCA/IChpc0xhc3QgPyAnLTEwcHgnIDogJy0zMnB4JykgOiAnYXV0byd9O1xuICAgICAgICB6LWluZGV4OiAke2lzRmlyc3QgJiYgaXNMYXN0ID8gMTAgOiBudWxsfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuc2NyZWVuLW1lbnUge1xuICAgICAgZGlzcGxheTogJHtzZWxlY3RlZCA/ICdibG9jaycgOiAnbm9uZSd9O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgb3BhY2l0eTogJHtzZWxlY3RlZCA/IDAuOCA6IDAuNX07XG4gICAgICBsZWZ0OiAwO1xuICAgICAgdG9wOiAke2lzRmlyc3QgPyAnYXV0bycgOiAnLTMycHgnfTtcbiAgICAgIGJvdHRvbTogJHtpc0ZpcnN0ID8gJy0zMnB4JyA6ICdhdXRvJ307XG4gICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7YnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzIwMF19O1xuICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG5cbiAgICAgIC5pbmZvIHtcbiAgICAgICAgY29sb3I6ICR7YnVpbGRlclRoZW1lLmNvbG9ycy5ibGFja307XG4gICAgICB9XG5cbiAgICAgIC5qaW11LWJ0biBzdmcge1xuICAgICAgICBjb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s2MDBdfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuc2NyZWVuLWdyb3VwIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGhlaWdodDogJHt2aWV3SGVpZ2h0fXB4O1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAgICB9XG5cbiAgICAubWFpbi1wYW5lbHMge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgdG9wOiAwO1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICB6LWluZGV4OiAwO1xuICAgIH1cblxuICAgICYuc21hbGwtc2l6ZSAubWFpbi1wYW5lbHMge1xuICAgICAgei1pbmRleDogJHtpc092ZXJsYXkgPyAwIDogMX07XG4gICAgfVxuXG4gICAgJi5zbWFsbC1zaXplIC5zaWRlLXBhbmVscyB7XG4gICAgICB6LWluZGV4OiAke2lzT3ZlcmxheSA/IDEgOiAwfTtcbiAgICB9XG5cbiAgICAuc2lkZS1wYW5lbHMge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgei1pbmRleDogMTtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gICAgICA+IGRpdjpmaXJzdC1vZi10eXBlID4gZGl2LnBhbmVsLWNvbnRlbnQge1xuICAgICAgICBwYWRkaW5nLXRvcDogJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSl9cHg7XG4gICAgICB9XG5cbiAgICAgIC8qID4gZGl2Om50aC1sYXN0LW9mLXR5cGUoMikge1xuICAgICAgICBtaW4taGVpZ2h0OiAke3ZpZXdIZWlnaHR9cHg7XG4gICAgICB9ICovXG4gICAgfVxuXG4gICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgIC5zY3JlZW4tZ3JvdXAge1xuICAgICAgICBwb3NpdGlvbjogc3RhdGljO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIG92ZXJmbG93LXk6IHVuc2V0O1xuICAgICAgICBvdmVyZmxvdy14OiB1bnNldDtcbiAgICAgIH1cbiAgICAgIC5zaWRlLXBhbmVscyB7XG4gICAgICAgID4gZGl2OmZpcnN0LW9mLXR5cGUgPiBkaXYucGFuZWwtY29udGVudCB7XG4gICAgICAgICAgcGFkZGluZy10b3A6ICR7MTAwICogU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkV9dmg7XG4gICAgICAgICAgcGFkZGluZy10b3A6IGNhbGModmFyKC0tdmgpICogJHsxMDAgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRX0pO1xuICAgICAgICB9XG4gICAgICAgIC8qID4gZGl2Om50aC1sYXN0LW9mLXR5cGUoMikge1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoO1xuICAgICAgICB9ICovXG4gICAgICB9XG4gICAgICAuc2NyZWVuLW1lbnUge1xuICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmdyb3VwLXRpcCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgcGFkZGluZzogaW5oZXJpdDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICBib3R0b206IDA7XG4gICAgICB0b3A6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgLnRpcC1jb250ZW50IHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBwYWRkaW5nOiAycHg7XG4gICAgICAgICY6YWZ0ZXIge1xuICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBvdXRsaW5lOiAycHggc29saWQgJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs3MDBdfTtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICY6aG92ZXIgLmdyb3VwLXRpcCB7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG4gIGBcbn1cblxuZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25JblNjcmVlbiAoc2NyZWVuR3JvdXBJZDogc3RyaW5nLCBzY3JlZW5JbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbiAgY29uc3Qgc2l6ZU1vZGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYnJvd3NlclNpemVNb2RlXG4gIGNvbnN0IHNlbGVjdGlvbiA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBSdW50aW1lSW5mbz8uc2VsZWN0aW9uXG4gIGlmIChzZWxlY3Rpb24gIT0gbnVsbCkge1xuICAgIGNvbnN0IHNjcmVlbkdyb3VwID0gYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tzY3JlZW5Hcm91cElkXVxuICAgIGNvbnN0IHNjcmVlbklkID0gc2NyZWVuR3JvdXAuc2NyZWVuc1tzY3JlZW5JbmRleF1cbiAgICBjb25zdCBzY3JlZW5Kc29uID0gYXBwQ29uZmlnLnNjcmVlbnNbc2NyZWVuSWRdXG4gICAgaWYgKHNjcmVlbkpzb24pIHsgLy8gdGhlIGFjdGl2ZSBzY3JlZW4gbWF5IGJlaW5nIHJlbW92ZWRcbiAgICAgIGNvbnN0IHNjcmVlbkxheW91dElkID0gc2NyZWVuSnNvbi5tYWluLmxheW91dFtzaXplTW9kZV1cbiAgICAgIC8vIHNlbGVjdGlvbiBpcyBpbiB0aGUgbGF5b3V0XG4gICAgICBpZiAoc2VsZWN0aW9uLmxheW91dElkID09PSBzY3JlZW5MYXlvdXRJZCkge1xuICAgICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VsZWN0aW9uQ2hhbmdlZChudWxsKSlcbiAgICAgIH1cbiAgICAgIC8vIHNlbGVjdGlvbiBpbiBkZXNjZW5kYW50IG9mIHRoZSBsYXlvdXRcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgZGl2W2RhdGEtbGF5b3V0aWQ9XCIke3NjcmVlbkxheW91dElkfVwiXSBkaXZbZGF0YS1sYXlvdXRpZD1cIiR7c2VsZWN0aW9uLmxheW91dElkfVwiXVtkYXRhLWxheW91dGl0ZW1pZD1cIiR7c2VsZWN0aW9uLmxheW91dEl0ZW1JZH1cIl1gXG4gICAgICApXG4gICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKG51bGwpKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2NyZWVuR3JvdXAgKHByb3BzOiBMYXlvdXRJdGVtUHJvcHMgJiBPd25Qcm9wcyk6IEpTWC5FbGVtZW50IHtcbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBsYXlvdXRJdGVtLCBmb3JtYXRNZXNzYWdlLCBpdGVtSW5kZXgsIGlzRmlyc3QsIGlzTGFzdCB9ID0gcHJvcHNcbiAgY29uc3QgeyBzY3JlZW5Hcm91cElkIH0gPSBsYXlvdXRJdGVtXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uc2VsZWN0aW9uXG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgcmV0dXJuIHNlbGVjdGlvbi5sYXlvdXRJZCA9PT0gbGF5b3V0SWQgJiYgc2VsZWN0aW9uLmxheW91dEl0ZW1JZCA9PT0gbGF5b3V0SXRlbUlkXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9KVxuICBjb25zdCBzY3JlZW5Hcm91cDogSU1TY3JlZW5Hcm91cEpzb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcuc2NyZWVuR3JvdXBzW2xheW91dEl0ZW0uc2NyZWVuR3JvdXBJZF1cbiAgfSlcbiAgY29uc3QgaGFzUGFuZWw6IGJvb2xlYW4gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIC8vIHNjcmVlbiB3aXRoIHBhbmVsIGFuZCB3aXRob3V0IHBhbmVsIGNhbiBiZSBtaXhlZFxuICAgIGNvbnN0IHNjcmVlbklkcyA9IHN0YXRlLmFwcENvbmZpZy5zY3JlZW5Hcm91cHNbbGF5b3V0SXRlbS5zY3JlZW5Hcm91cElkXS5zY3JlZW5zXG4gICAgcmV0dXJuIHNjcmVlbklkcy5zb21lKHNjcmVlbklkID0+IHtcbiAgICAgIGNvbnN0IHNjcmVlbiA9IHN0YXRlLmFwcENvbmZpZy5zY3JlZW5zW3NjcmVlbklkXVxuICAgICAgcmV0dXJuIHNjcmVlbi5wYW5lbCAhPSBudWxsXG4gICAgfSlcbiAgfSlcbiAgY29uc3QgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5icm93c2VyU2l6ZU1vZGVcbiAgfSlcbiAgY29uc3Qge1xuICAgIHNjcmVlbnMsXG4gICAgc3RyZXRjaFBhbmVsID0gdHJ1ZSxcbiAgICB0cmlnZ2VyVHlwZSA9IFNjcmVlblRyaWdnZXJUeXBlLkJvdHRvbSxcbiAgICB2ZXJ0aWNhbFNwYWNlID0gJzAnLFxuICAgIHBhbmVsVHJhbnNpdGlvblR5cGUgPSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5QdXNoXG4gIH0gPSBzY3JlZW5Hcm91cFxuICBsZXQgdHJhbnNpdGlvblR5cGUgPSBzY3JlZW5Hcm91cC50cmFuc2l0aW9uVHlwZSA/PyBTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlXG4gIGlmIChicm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCAmJiAhaGFzUGFuZWwpIHtcbiAgICB0cmFuc2l0aW9uVHlwZSA9IFNjcmVlblRyYW5zaXRpb25UeXBlLkNvdmVyXG4gIH1cbiAgY29uc3QgbmF2SW5mbyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcFJ1bnRpbWVJbmZvLnNjcmVlbkdyb3VwTmF2SW5mb3M/LltzY3JlZW5Hcm91cElkXVxuICB9KVxuICBjb25zdCB2aWV3cG9ydFNpemUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBqaW11VXRpbHMuZmluZFZpZXdwb3J0U2l6ZShzdGF0ZS5hcHBDb25maWcsIHN0YXRlLmJyb3dzZXJTaXplTW9kZSB8fCBCcm93c2VyU2l6ZU1vZGUuTGFyZ2UpXG4gIH0pXG4gIGNvbnN0IGlzRGVzaWduTW9kZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ24pXG4gIGNvbnN0IHsgdmlld09ubHksIGJ1aWxkZXJUaGVtZSwgcGFnZUlkIH0gPSBSZWFjdC51c2VDb250ZXh0KFBhZ2VDb250ZXh0KVxuICBjb25zdCBoZWFkZXJIZWlnaHQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHBhZ2VKc29uID0gc3RhdGUuYXBwQ29uZmlnLnBhZ2VzW3BhZ2VJZF1cbiAgICBpZiAocGFnZUpzb24/LmhlYWRlcikge1xuICAgICAgY29uc3QgaGVhZGVySnNvbiA9IHN0YXRlLmFwcENvbmZpZy5oZWFkZXJcbiAgICAgIGlmIChoZWFkZXJKc29uPy5zdGlja3kpIHtcbiAgICAgICAgY29uc3QgYnJvd3NlclNpemVNb2RlID0gc3RhdGUuYnJvd3NlclNpemVNb2RlXG4gICAgICAgIGNvbnN0IG1haW5TaXplTW9kZSA9IHN0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGVcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gaGVhZGVySnNvbi5oZWlnaHRbYnJvd3NlclNpemVNb2RlXSB8fCBoZWFkZXJKc29uLmhlaWdodFttYWluU2l6ZU1vZGVdIHx8IERFRkFVTFRfSEVBREVSX0hFSUdIVFxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoaGVpZ2h0IGFzIHN0cmluZywgMTApXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIGNvbnN0IGRvbVJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBzY3JlZW5Hcm91cFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBtYWluUGFuZWxSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3QgbW9uaXRvclNjcm9sbFJlZiA9IFJlYWN0LnVzZVJlZih0cnVlKVxuICBjb25zdCBzY3JvbGxMaXN0ZW5lclJlZiA9IFJlYWN0LnVzZVJlZjwoKSA9PiB2b2lkPigpXG4gIGNvbnN0IGludGVyYWN0YWJsZVJlZiA9IFJlYWN0LnVzZVJlZjxJbnRlcmFjdC5JbnRlcmFjdGFibGU+KClcbiAgY29uc3QgW2FjdGl2ZUluZGV4LCBzZXRBY3RpdmVJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBkaXYuZXhiLXJuZFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW1JZH1cIl1gXG4gICAgICApXG4gICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ2F1dG8nLCBibG9jazogJ2NlbnRlcicgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzZWxlY3RlZCwgbGF5b3V0SWQsIGxheW91dEl0ZW1JZF0pXG5cbiAgY29uc3QgaXNPdmVybGF5ID0gUmVhY3QudXNlTWVtbygoKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKGJyb3dzZXJTaXplTW9kZSAhPT0gQnJvd3NlclNpemVNb2RlLlNtYWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xuICAgIGNvbnN0IHNjcmVlbnMgPSBhcHBDb25maWcuc2NyZWVuR3JvdXBzPy5bc2NyZWVuR3JvdXBJZF0/LnNjcmVlbnNcbiAgICBpZiAoc2NyZWVucz8uW2FjdGl2ZUluZGV4XSkge1xuICAgICAgY29uc3Qgc2NyZWVuID0gYXBwQ29uZmlnLnNjcmVlbnNbc2NyZWVuc1thY3RpdmVJbmRleF1dXG4gICAgICByZXR1cm4gc2NyZWVuLnBhbmVsPy5vdmVybGF5XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9LCBbc2NyZWVuR3JvdXBJZCwgYWN0aXZlSW5kZXgsIGJyb3dzZXJTaXplTW9kZV0pXG5cbiAgY29uc3Qgc2Nyb2xsSW50b1ZpZXcgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXgpID0+IHtcbiAgICAvLyBjaGVjayBpZiBzaWRlIHBhbmVsIG9mIGluZGV4IGlzIGluIGN1cnJlbnQgdmlldyBleHRlbnRcbiAgICBjb25zdCBzaWRlRWxlbWVudHMgPSBzY3JlZW5Hcm91cFJlZi5jdXJyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5zY3JlZW4tc2lkZS1wYW5lbCcpXG4gICAgbGV0IHByZXZpb3VzSXRlbXNIZWlnaHQgPSAwXG4gICAgLy8gbGV0IHRhcmdldEhlaWdodCA9IDA7XG4gICAgc2lkZUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50SW5kZXggPSArZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnKVxuICAgICAgaWYgKGVsZW1lbnRJbmRleCA8IGluZGV4KSB7XG4gICAgICAgIHByZXZpb3VzSXRlbXNIZWlnaHQgKz0gZWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgc2NyZWVuR3JvdXBSZWYuY3VycmVudC5zY3JvbGxUb3AgPSBwcmV2aW91c0l0ZW1zSGVpZ2h0XG4gICAgaWYgKHRyYW5zaXRpb25UeXBlICE9PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlKSB7XG4gICAgICBjb25zdCBzY3JlZW5Db250YWluZXJFbGVtID0gKG1haW5QYW5lbFJlZi5jdXJyZW50Py5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudClcbiAgICAgIGlmIChzY3JlZW5Db250YWluZXJFbGVtKSB7XG4gICAgICAgIHNjcmVlbkNvbnRhaW5lckVsZW0uc2Nyb2xsVG9wID0gc2NyZWVuR3JvdXBSZWYuY3VycmVudC5zY3JvbGxUb3BcbiAgICAgIH1cbiAgICB9XG4gIH0sIFt0cmFuc2l0aW9uVHlwZV0pXG5cbiAgY29uc3Qgb25JdGVtRHJhZ1N0YXJ0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzRHJhZ2dpbmcodHJ1ZSlcbiAgfSwgW10pXG5cbiAgY29uc3Qgb25JdGVtRHJhZ0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKVxuICB9LCBbXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChkb21SZWYuY3VycmVudCAmJiAhaW50ZXJhY3RhYmxlUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gaW50ZXJhY3QoZG9tUmVmLmN1cnJlbnQpLm9yaWdpbigncGFyZW50JylcbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gYmluZERyYWdIYW5kbGVyKGludGVyYWN0YWJsZVJlZi5jdXJyZW50IGFzIGFueSwge1xuICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkLFxuICAgICAgICAvLyBvbkRyYWdnaW5nLFxuICAgICAgICBvbkRyYWdTdGFydDogb25JdGVtRHJhZ1N0YXJ0LFxuICAgICAgICBvbkRyYWdFbmQ6IG9uSXRlbURyYWdFbmQsXG4gICAgICAgIHVzZURyYWdIYW5kbGVyOiB0cnVlLFxuICAgICAgICBpdGVtVHlwZTogbGF5b3V0SXRlbS50eXBlLFxuICAgICAgICByb290TGF5b3V0SWQ6ICgpID0+IGxheW91dElkLFxuICAgICAgICByZXN0cmljdDogKCkgPT4gdHJ1ZVxuICAgICAgfSlcbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50LmRyYWdnYWJsZSh7XG4gICAgICAgIG1vZGlmaWVyczogW2ludGVyYWN0Lm1vZGlmaWVycy5yZXN0cmljdFJlY3Qoe1xuICAgICAgICAgIHJlc3RyaWN0aW9uOiAncGFyZW50J1xuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpbnRlcmFjdGFibGVSZWYuY3VycmVudCkge1xuICAgICAgICBpbnRlcmFjdGFibGVSZWYuY3VycmVudC51bnNldCgpXG4gICAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgfSwgW10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobmF2SW5mbz8uYWN0aXZlSW5kZXggIT0gbnVsbCAmJiBuYXZJbmZvLmFjdGl2ZUluZGV4ICE9PSBhY3RpdmVJbmRleCkge1xuICAgICAgLy8gY2xlYXIgc2VsZWN0aW9uIGlmIGl0IGlzIGEgY2hpbGQgb2YgdGhlIGxhc3Qgc2NyZWVuXG4gICAgICBjbGVhclNlbGVjdGlvbkluU2NyZWVuKHNjcmVlbkdyb3VwSWQsIGFjdGl2ZUluZGV4KVxuICAgICAgc2V0QWN0aXZlSW5kZXgobmF2SW5mby5hY3RpdmVJbmRleClcbiAgICAgIGlmIChuYXZJbmZvLnNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgIG1vbml0b3JTY3JvbGxSZWYuY3VycmVudCA9IGZhbHNlIC8vIGRvIG5vdCBtb25pdG9yIHNjcm9sbCBldmVudCB3aGVuIHVzZXIganVtcHMgdG8gYW5vdGhlciBzY3JlZW5cbiAgICAgICAgc2Nyb2xsSW50b1ZpZXcobmF2SW5mby5hY3RpdmVJbmRleClcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgbW9uaXRvclNjcm9sbFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICB9LCAyMDApXG4gICAgICB9XG4gICAgfVxuICB9LCBbbmF2SW5mbywgYWN0aXZlSW5kZXgsIHNjcm9sbEludG9WaWV3LCBzY3JlZW5Hcm91cElkXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzY3JvbGxMaXN0ZW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBzY3JlZW5Hcm91cFJlZi5jdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbExpc3RlbmVyUmVmLmN1cnJlbnQpXG4gICAgICBzY3JvbGxMaXN0ZW5lclJlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cblxuICAgIHNjcm9sbExpc3RlbmVyUmVmLmN1cnJlbnQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzY3JlZW5Db250YWluZXJFbGVtID0gKG1haW5QYW5lbFJlZi5jdXJyZW50Py5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudClcbiAgICAgIGlmICghc2NyZWVuQ29udGFpbmVyRWxlbSB8fCB0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIC8vIGZvciBjb3ZlciBlZmZlY3RcbiAgICAgIHNjcmVlbkNvbnRhaW5lckVsZW0uc2Nyb2xsVG9wID0gc2NyZWVuR3JvdXBSZWYuY3VycmVudC5zY3JvbGxUb3BcbiAgICB9XG4gICAgc2NyZWVuR3JvdXBSZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxMaXN0ZW5lclJlZi5jdXJyZW50KVxuICB9LCBbdHJhbnNpdGlvblR5cGVdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlbkdyb3VwTmF2SW5mb0NoYW5nZWQoc2NyZWVuR3JvdXBJZCwgMCkpXG4gIH0sIFtpc0Rlc2lnbk1vZGUsIHNjcmVlbkdyb3VwSWRdKVxuXG4gIGNvbnN0IG9uSW50ZXJjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChpbmRleDogbnVtYmVyLCBpc0ludGVyc2VjdGluZzogYm9vbGVhbikgPT4ge1xuICAgICAgaWYgKCFtb25pdG9yU2Nyb2xsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoaXNJbnRlcnNlY3RpbmcgJiYgaW5kZXggIT09IGFjdGl2ZUluZGV4KSB7XG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zY3JlZW5Hcm91cE5hdkluZm9DaGFuZ2VkKHNjcmVlbkdyb3VwSWQsIGluZGV4LCBmYWxzZSkpXG4gICAgICB9IGVsc2UgaWYgKCFpc0ludGVyc2VjdGluZyAmJiBpbmRleCA+IDApIHtcbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlbkdyb3VwTmF2SW5mb0NoYW5nZWQoc2NyZWVuR3JvdXBJZCwgaW5kZXggLSAxLCBmYWxzZSkpXG4gICAgICB9XG4gICAgfSxcbiAgICBbYWN0aXZlSW5kZXgsIHNjcmVlbkdyb3VwSWRdXG4gIClcblxuICBjb25zdCBzZWxlY3RJdGVtID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgaWYgKCFpc0xvY2tMYXlvdXQoKSAmJiAhdmlld09ubHkgJiYgYnJvd3NlclNpemVNb2RlICE9PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9KSlcbiAgICB9XG4gIH0sIFt2aWV3T25seSwgYnJvd3NlclNpemVNb2RlLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkXSlcblxuICBjb25zdCBzaWRlcGFuZWxSZXNpemVIYW5kbGVyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghc2NyZWVuR3JvdXBSZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1haW5QYW5lbENvbnRhaW5lciA9IHNjcmVlbkdyb3VwUmVmLmN1cnJlbnQuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzaWRlUGFuZWxDb250YWluZXIgPSBzY3JlZW5Hcm91cFJlZi5jdXJyZW50LmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50XG4gICAgbWFpblBhbmVsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3NpZGVQYW5lbENvbnRhaW5lci5jbGllbnRIZWlnaHR9cHhgXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGRlYm91bmNlUmVzaXplSGFuZGxlciA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gbG9kYXNoLmRlYm91bmNlKHNpZGVwYW5lbFJlc2l6ZUhhbmRsZXIsIDIwMCksIFtzaWRlcGFuZWxSZXNpemVIYW5kbGVyXSlcblxuICBjb25zdCBvblNpZGVQYW5lbEhlaWdodENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleCwgaGVpZ2h0KSA9PiB7XG4gICAgaWYgKCFzY3JlZW5Hcm91cFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbWFpblBhbmVsQ29udGFpbmVyID0gc2NyZWVuR3JvdXBSZWYuY3VycmVudC5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNpZGVQYW5lbENvbnRhaW5lciA9IHNjcmVlbkdyb3VwUmVmLmN1cnJlbnQuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAodHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGUpIHtcbiAgICAgIG1haW5QYW5lbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtzaWRlUGFuZWxDb250YWluZXIuY2xpZW50SGVpZ2h0fXB4YFxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuQ292ZXIpIHtcbiAgICAgIHVwZGF0ZVNjcmVlbkhlaWdodChtYWluUGFuZWxDb250YWluZXIsIHNpZGVQYW5lbENvbnRhaW5lciwgYnJvd3NlclNpemVNb2RlKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuUHVzaCkge1xuICAgICAgY29uc3QgcmVsYXRlZEVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gbWFpblBhbmVsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBkaXYuc2NyZWVuLW1haW4tcGFuZWxbZGF0YS1pbmRleD1cIiR7aW5kZXh9XCJdYFxuICAgICAgKVxuICAgICAgY29uc3QgcGFuZWxFbGVtZW50ID0gc2lkZVBhbmVsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBkaXYuc2NyZWVuLXNpZGUtcGFuZWxbZGF0YS1pbmRleD1cIiR7aW5kZXh9XCJdYFxuICAgICAgKVxuICAgICAgcmVsYXRlZEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7cGFuZWxFbGVtZW50LmNsaWVudEhlaWdodH1weGBcbiAgICAgIG1haW5QYW5lbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtzaWRlUGFuZWxDb250YWluZXIuY2xpZW50SGVpZ2h0fXB4YFxuICAgIH1cbiAgfSwgW2Jyb3dzZXJTaXplTW9kZSwgdHJhbnNpdGlvblR5cGVdKVxuXG4gIGNvbnN0IGRlbGV0ZVNlbGVjdGVkSXRlbSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGJ1aWxkZXJBY3Rpb25zLmNvbmZpcm1EZWxldGVDb250ZW50Q2hhbmdlZCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSkpXG4gIH0sIFtsYXlvdXRJZCwgbGF5b3V0SXRlbUlkXSlcblxuICBjb25zdCBrZXlCaW5kaW5ncyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBkZWxldGU6IGRlbGV0ZVNlbGVjdGVkSXRlbSxcbiAgICAgIGJhY2tzcGFjZTogZGVsZXRlU2VsZWN0ZWRJdGVtXG4gICAgfVxuICB9LCBbZGVsZXRlU2VsZWN0ZWRJdGVtXSlcblxuICBpZiAoc2NyZWVucy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTY3JlZW5Hcm91cENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYnVpbGRlci1sYXlvdXQtaXRlbSBleGItcm5kJywge1xuICAgICAgICAgICAgc2VsZWN0ZWQsXG4gICAgICAgICAgICAnc21hbGwtc2l6ZSc6IGJyb3dzZXJTaXplTW9kZSA9PT0gQnJvd3NlclNpemVNb2RlLlNtYWxsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgY3NzPXtnZXRTdHlsZSh2aWV3cG9ydFNpemUuaGVpZ2h0LCBidWlsZGVyVGhlbWUsIGlzRmlyc3QsIGlzTGFzdCwgc2VsZWN0ZWQsIGlzT3ZlcmxheSl9XG4gICAgICAgICAgZGF0YS1sYXlvdXRpdGVtaWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgICBkYXRhLWxheW91dGlkPXtsYXlvdXRJZH1cbiAgICAgICAgICBvbkNsaWNrPXtzZWxlY3RJdGVtfVxuICAgICAgICAgIHJlZj17ZG9tUmVmfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NjcmVlbi1tZW51Jz5cbiAgICAgICAgICAgIDxTY3JlZW5Hcm91cE1lbnVcbiAgICAgICAgICAgICAgYWN0aXZlU2NyZWVuSW5kZXg9e2FjdGl2ZUluZGV4fVxuICAgICAgICAgICAgICBpdGVtSW5kZXg9e2l0ZW1JbmRleH1cbiAgICAgICAgICAgICAgdG90YWw9e3NjcmVlbnMubGVuZ3RofVxuICAgICAgICAgICAgICBzY3JlZW5Hcm91cElkPXtzY3JlZW5Hcm91cElkfVxuICAgICAgICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICAgIGxheW91dEl0ZW1JZD17bGF5b3V0SXRlbUlkfVxuICAgICAgICAgICAgICBicm93c2VyU2l6ZU1vZGU9e2Jyb3dzZXJTaXplTW9kZX1cbiAgICAgICAgICAgICAgaGFzUGFuZWw9e2hhc1BhbmVsfVxuICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXtmb3JtYXRNZXNzYWdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2NyZWVuLWdyb3VwJyByZWY9e3NjcmVlbkdyb3VwUmVmfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYWluLXBhbmVscycgcmVmPXttYWluUGFuZWxSZWZ9PlxuICAgICAgICAgICAgICA8U2NyZWVuTWFpblBhbmVsTGlzdFxuICAgICAgICAgICAgICAgIHJvb3RMYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICAgICAgYWN0aXZlSW5kZXg9e2FjdGl2ZUluZGV4fVxuICAgICAgICAgICAgICAgIHZpZXdIZWlnaHQ9e3ZpZXdwb3J0U2l6ZS5oZWlnaHR9XG4gICAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0PXtoZWFkZXJIZWlnaHR9XG4gICAgICAgICAgICAgICAgc2NyZWVucz17c2NyZWVuc31cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uVHlwZT17dHJhbnNpdGlvblR5cGV9XG4gICAgICAgICAgICAgICAgbGF5b3V0RW50cnk9e0xheW91dEVudHJ5fVxuICAgICAgICAgICAgICAgIGlzU21hbGxTaXplPXticm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbH1cbiAgICAgICAgICAgICAgICBpc0Rlc2lnbk1vZGU9e2lzRGVzaWduTW9kZX1cbiAgICAgICAgICAgICAgICBidWlsZGVyVGhlbWU9e2J1aWxkZXJUaGVtZX1cbiAgICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXtmb3JtYXRNZXNzYWdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZS1wYW5lbHMnPlxuICAgICAgICAgICAgICB7c2NyZWVucy5tYXAoKHNjcmVlbklkLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFNjcmVlblNpZGVQYW5lbFxuICAgICAgICAgICAgICAgICAgICBrZXk9e3NjcmVlbklkfVxuICAgICAgICAgICAgICAgICAgICBpbmRleD17aWR4fVxuICAgICAgICAgICAgICAgICAgICBpc0xhc3Q9e2lkeCA9PT0gc2NyZWVucy5sZW5ndGggLSAxfVxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5JZD17c2NyZWVuSWR9XG4gICAgICAgICAgICAgICAgICAgIHZpZXdIZWlnaHQ9e3ZpZXdwb3J0U2l6ZS5oZWlnaHR9XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckhlaWdodD17aGVhZGVySGVpZ2h0fVxuICAgICAgICAgICAgICAgICAgICByZWZFbGVtZW50PXtpc0Rlc2lnbk1vZGUgPyBkb21SZWYuY3VycmVudCA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIGxheW91dEVudHJ5PXtMYXlvdXRFbnRyeX1cbiAgICAgICAgICAgICAgICAgICAgdmlld09ubHk9e3ZpZXdPbmx5fVxuICAgICAgICAgICAgICAgICAgICBidWlsZGVyVGhlbWU9e2J1aWxkZXJUaGVtZX1cbiAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmU9e2lkeCA9PT0gYWN0aXZlSW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIGlzU21hbGxTaXplPXticm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbH1cbiAgICAgICAgICAgICAgICAgICAgaXNEZXNpZ25Nb2RlPXtpc0Rlc2lnbk1vZGV9XG4gICAgICAgICAgICAgICAgICAgIHN0cmV0Y2hlZD17c3RyZXRjaFBhbmVsfVxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyVHlwZT17dHJpZ2dlclR5cGV9XG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsU3BhY2U9e3ZlcnRpY2FsU3BhY2V9XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25UeXBlPXtwYW5lbFRyYW5zaXRpb25UeXBlfVxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5UcmFuc2l0aW9uVHlwZT17dHJhbnNpdGlvblR5cGV9XG4gICAgICAgICAgICAgICAgICAgIG9uSGVpZ2h0Q2hhbmdlPXtvblNpZGVQYW5lbEhlaWdodENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgb25JbnRlcmN0aW9uQ2hhbmdlPXtvbkludGVyY3Rpb25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e2Zvcm1hdE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDxSZWFjdFJlc2l6ZURldGVjdG9yIGhhbmRsZUhlaWdodCBvblJlc2l6ZT17ZGVib3VuY2VSZXNpemVIYW5kbGVyfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgeyF2aWV3T25seSAmJiAoXG4gICAgICAgICAgICA8U2NyZWVuQ29udGV4dE1lbnVcbiAgICAgICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgICAgICAgbGF5b3V0SXRlbT17bGF5b3V0SXRlbX1cbiAgICAgICAgICAgICAgaXNGaXJzdD17aXNGaXJzdH1cbiAgICAgICAgICAgICAgaXNMYXN0PXtpc0xhc3R9XG4gICAgICAgICAgICAgIGJ1aWxkZXJUaGVtZT17YnVpbGRlclRoZW1lfVxuICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXtmb3JtYXRNZXNzYWdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtpc0Rlc2lnbk1vZGUgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyb3VwLXRpcCc+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0aXAtY29udGVudCcgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge2lzRGVzaWduTW9kZSAmJiBzZWxlY3RlZCAmJiA8S2V5Ym9hcmQgYmluZGluZ3M9e2tleUJpbmRpbmdzfSAvPn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1NjcmVlbkdyb3VwQ29udGV4dC5Qcm92aWRlcj5cbiAgICApXG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAganN4LFxuICBjc3MsXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICBCcm93c2VyU2l6ZU1vZGUsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgQXBwTW9kZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIEljb24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IFRlbXBsYXRlU2VsZWN0b3IgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IGdldFNjcmVlblRlbXBsYXRlcyB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXIvdGVtcGxhdGVzJ1xuaW1wb3J0IHsgZ2V0VGhlbWUyIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCBkZWxldGVJY29uIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmcnXG5pbXBvcnQgYWRkSWNvbiBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvcGx1cy5zdmcnXG5pbXBvcnQgdXBJY29uIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3VwLnN2ZydcbmltcG9ydCBkdXBsaWNhdGVJY29uIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9kdXBsaWNhdGUtcGFnZS5zdmcnXG5pbXBvcnQgeyBUaGVtZWRUb29sdGlwIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90aGVtZS10b29sdGlwJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBpdGVtSW5kZXg6IG51bWJlclxuICBhY3RpdmVTY3JlZW5JbmRleDogbnVtYmVyXG4gIHRvdGFsOiBudW1iZXJcbiAgc2NyZWVuR3JvdXBJZDogc3RyaW5nXG4gIGxheW91dElkOiBzdHJpbmdcbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmdcbiAgaGFzUGFuZWw6IGJvb2xlYW5cbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU2NyZWVuR3JvdXBNZW51IChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBmb3JtYXRNZXNzYWdlLCBhY3RpdmVTY3JlZW5JbmRleCwgdG90YWwsIGxheW91dElkLCBsYXlvdXRJdGVtSWQsIHNjcmVlbkdyb3VwSWQsIGJyb3dzZXJTaXplTW9kZSwgaGFzUGFuZWwgfSA9IHByb3BzXG4gIGNvbnN0IGVkaXRhYmxlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsb2NrTGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmZvckJ1aWxkZXJBdHRyaWJ1dGVzPy5sb2NrTGF5b3V0ID8/IGZhbHNlXG4gICAgY29uc3QgYXBwTW9kZSA9IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5hcHBNb2RlXG4gICAgcmV0dXJuIGFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduICYmICFsb2NrTGF5b3V0XG4gIH0pXG4gIGNvbnN0IHJlYWRvbmx5ID0gIWVkaXRhYmxlIHx8IGJyb3dzZXJTaXplTW9kZSAhPT0gQnJvd3NlclNpemVNb2RlLkxhcmdlXG4gIGNvbnN0IFtzaG93UG9wcGVyLCBzZXRTaG93UG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBwb3BwZXJSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcblxuICBjb25zdCBjbG9zZVNjcmVlblBvcHBlciA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93UG9wcGVyKGZhbHNlKVxuICB9LCBbXSlcblxuICBjb25zdCB0b29sdGlwU3R5bGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgdGhlbWUgPSBnZXRUaGVtZTIoKVxuICAgIHJldHVybiBjc3NgXG4gICAgICBib3JkZXI6IG5vbmU7XG5cbiAgICAgIC50b29sdGlwIHtcbiAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmJsYWNrfTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs2MDBdfTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzMwMF19O1xuICAgICAgfVxuICAgIGBcbiAgfSwgW10pXG5cbiAgY29uc3QgYWRkU2NyZWVuID0gUmVhY3QudXNlQ2FsbGJhY2soKHRlbXBsYXRlSnNvbikgPT4ge1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgY29uc3Qgc2NyZWVuR3JvdXBJZCA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdLnNjcmVlbkdyb3VwSWRcbiAgICBhcHBDb25maWdBY3Rpb24uY3JlYXRlU2NyZWVuRnJvbVRlbXBsYXRlKG51bGwsIHRlbXBsYXRlSnNvbikudGhlbigobmV3U2NyZWVuSWQpID0+IHtcbiAgICAgIGxldCBhcHBDb25maWcgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG5cbiAgICAgIGFwcENvbmZpZyA9IGFwcENvbmZpZy5zZXRJbihcbiAgICAgICAgWydzY3JlZW5Hcm91cHMnLCBzY3JlZW5Hcm91cElkLCAnc2NyZWVucyddLFxuICAgICAgICBbXS5jb25jYXQoYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tzY3JlZW5Hcm91cElkXS5zY3JlZW5zLCBuZXdTY3JlZW5JZClcbiAgICAgICkuc2V0SW4oXG4gICAgICAgIFsnc2NyZWVucycsIG5ld1NjcmVlbklkLCAncGFyZW50J10sXG4gICAgICAgIHNjcmVlbkdyb3VwSWRcbiAgICAgIClcblxuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmFwcENvbmZpZ0NoYW5nZWQoYXBwQ29uZmlnKSlcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zY3JlZW5Hcm91cE5hdkluZm9DaGFuZ2VkKHNjcmVlbkdyb3VwSWQsIGFwcENvbmZpZy5zY3JlZW5Hcm91cHNbc2NyZWVuR3JvdXBJZF0uc2NyZWVucy5sZW5ndGggLSAxKSlcbiAgICB9KVxuICAgIGNsb3NlU2NyZWVuUG9wcGVyKClcbiAgfSwgW2Nsb3NlU2NyZWVuUG9wcGVyLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkXSlcblxuICBjb25zdCB0b2dnbGVTY3JlZW5Qb3BwZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGhhc1BhbmVsKSB7XG4gICAgICBzZXRTaG93UG9wcGVyKCFzaG93UG9wcGVyKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZXMgPSBnZXRTY3JlZW5UZW1wbGF0ZXMoKVxuICAgICAgY29uc3QgdGVtcGxhdGVKc29uID0gdGVtcGxhdGVzLmZpbmQoaXRlbSA9PiBpdGVtLm5hbWUgPT09ICdub3BhbmVsJylcbiAgICAgIGlmICh0ZW1wbGF0ZUpzb24pIHtcbiAgICAgICAgYWRkU2NyZWVuKHRlbXBsYXRlSnNvbilcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzaG93UG9wcGVyLCBoYXNQYW5lbCwgYWRkU2NyZWVuXSlcblxuICBjb25zdCBtb3ZldXAgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlbkdyb3VwTmF2SW5mb0NoYW5nZWQoc2NyZWVuR3JvdXBJZCwgYWN0aXZlU2NyZWVuSW5kZXggLSAxKSlcbiAgfSwgW3NjcmVlbkdyb3VwSWQsIGFjdGl2ZVNjcmVlbkluZGV4XSlcblxuICBjb25zdCBtb3ZlZG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2NyZWVuR3JvdXBOYXZJbmZvQ2hhbmdlZChzY3JlZW5Hcm91cElkLCBhY3RpdmVTY3JlZW5JbmRleCArIDEpKVxuICB9LCBbc2NyZWVuR3JvdXBJZCwgYWN0aXZlU2NyZWVuSW5kZXhdKVxuXG4gIGNvbnN0IHJlbW92ZVNjcmVlbiA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGFwcENvbmZpZ0FjdGlvbi5yZW1vdmVTY3JlZW5CeUluZGV4KGFjdGl2ZVNjcmVlbkluZGV4LCBzY3JlZW5Hcm91cElkKS5leGVjKClcbiAgICBpZiAoYWN0aXZlU2NyZWVuSW5kZXggPT09IHRvdGFsIC0gMSkge1xuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlbkdyb3VwTmF2SW5mb0NoYW5nZWQoc2NyZWVuR3JvdXBJZCwgYWN0aXZlU2NyZWVuSW5kZXggLSAxKSlcbiAgICB9XG4gIH0sIFthY3RpdmVTY3JlZW5JbmRleCwgdG90YWwsIHNjcmVlbkdyb3VwSWRdKVxuXG4gIGNvbnN0IGR1cGxpY2F0ZVNjcmVlbiA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGFwcENvbmZpZ0FjdGlvbi5kdXBsaWNhdGVTY3JlZW5CeUluZGV4KGFjdGl2ZVNjcmVlbkluZGV4LCBzY3JlZW5Hcm91cElkKVxuICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2NyZWVuR3JvdXBOYXZJbmZvQ2hhbmdlZChzY3JlZW5Hcm91cElkLCBhY3RpdmVTY3JlZW5JbmRleCArIDEpKVxuICB9LCBbYWN0aXZlU2NyZWVuSW5kZXgsIHNjcmVlbkdyb3VwSWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J21lbnUtYmFyIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBqdXN0aWZ5LWNvbnRlbnQtc3RhcnQgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2luZm8gbWwtMic+XG4gICAgICAgICAge2Zvcm1hdE1lc3NhZ2UoJ3NjcmVlbicpfToge2FjdGl2ZVNjcmVlbkluZGV4ICsgMX0gLyB7dG90YWx9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8VGhlbWVkVG9vbHRpcCB0aXRsZT17YWN0aXZlU2NyZWVuSW5kZXggPT09IDAgPyAnJyA6IGZvcm1hdE1lc3NhZ2UoJ3ByZXZpb3VzJyl9IHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e3Rvb2x0aXBTdHlsZSgpfT5cbiAgICAgICAgICA8QnV0dG9uIGljb24gY2xhc3NOYW1lPSdyb3VuZGVkLWNpcmNsZScgZGlzYWJsZWQ9e2FjdGl2ZVNjcmVlbkluZGV4ID09PSAwfSB0eXBlPSd0ZXJ0aWFyeScgb25DbGljaz17bW92ZXVwfT5cbiAgICAgICAgICAgIDxJY29uIGljb249e3VwSWNvbn0gc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvVGhlbWVkVG9vbHRpcD5cbiAgICAgICAgPFRoZW1lZFRvb2x0aXAgdGl0bGU9e2FjdGl2ZVNjcmVlbkluZGV4ID09PSB0b3RhbCAtIDEgPyAnJyA6IGZvcm1hdE1lc3NhZ2UoJ25leHQnKX0gcGxhY2VtZW50PSdib3R0b20nIGNzcz17dG9vbHRpcFN0eWxlKCl9PlxuICAgICAgICAgIDxCdXR0b24gaWNvbiBjbGFzc05hbWU9J3JvdW5kZWQtY2lyY2xlJyBkaXNhYmxlZD17YWN0aXZlU2NyZWVuSW5kZXggPT09IHRvdGFsIC0gMX0gdHlwZT0ndGVydGlhcnknIG9uQ2xpY2s9e21vdmVkb3dufT5cbiAgICAgICAgICAgIDxJY29uIGljb249e3VwSWNvbn0gcm90YXRlPXsxODB9IHNpemU9ezE2fSAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L1RoZW1lZFRvb2x0aXA+XG4gICAgICAgIHshcmVhZG9ubHkgJiYgKFxuICAgICAgICAgIDxkaXYgcmVmPXtwb3BwZXJSZWZ9PlxuICAgICAgICAgICAgPFRoZW1lZFRvb2x0aXAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ25ld1NjcmVlbicpfSBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXt0b29sdGlwU3R5bGUoKX0+XG4gICAgICAgICAgICAgIDxCdXR0b24gaWNvbiBvbkNsaWNrPXt0b2dnbGVTY3JlZW5Qb3BwZXJ9IGNsYXNzTmFtZT0ncm91bmRlZC1jaXJjbGUnIHR5cGU9J3RlcnRpYXJ5JyBkYXRhLXRlc3RpZD0nYWRkQnRuJz5cbiAgICAgICAgICAgICAgICA8SWNvbiBpY29uPXthZGRJY29ufSBzaXplPXsxNn0gLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1RoZW1lZFRvb2x0aXA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHshcmVhZG9ubHkgJiYgc2hvd1BvcHBlciAmJiAoXG4gICAgICAgICAgPFRlbXBsYXRlU2VsZWN0b3JcbiAgICAgICAgICAgIHRlbXBsYXRlcz17Z2V0U2NyZWVuVGVtcGxhdGVzKCl9XG4gICAgICAgICAgICByZWZlcmVuY2VFbGVtZW50PXtwb3BwZXJSZWYuY3VycmVudH1cbiAgICAgICAgICAgIG9uSXRlbVNlbGVjdD17YWRkU2NyZWVufVxuICAgICAgICAgICAgb25DbG9zZT17Y2xvc2VTY3JlZW5Qb3BwZXJ9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgeyFyZWFkb25seSAmJiAoXG4gICAgICAgICAgPFRoZW1lZFRvb2x0aXAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ2R1cGxpY2F0ZVNjcmVlbicpfSBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXt0b29sdGlwU3R5bGUoKX0+XG4gICAgICAgICAgICA8QnV0dG9uIGljb24gY2xhc3NOYW1lPSdyb3VuZGVkLWNpcmNsZScgdHlwZT0ndGVydGlhcnknIG9uQ2xpY2s9e2R1cGxpY2F0ZVNjcmVlbn0gZGF0YS10ZXN0aWQ9J2R1cGxpY2F0ZUJ0bic+XG4gICAgICAgICAgICAgIDxJY29uIGljb249e2R1cGxpY2F0ZUljb259IHNpemU9ezE2fSAvPlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9UaGVtZWRUb29sdGlwPlxuICAgICAgICApfVxuICAgICAgICB7IXJlYWRvbmx5ICYmIHRvdGFsID4gMSAmJiAoXG4gICAgICAgICAgPFRoZW1lZFRvb2x0aXAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ2RlbGV0ZVNjcmVlbicpfSBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXt0b29sdGlwU3R5bGUoKX0+XG4gICAgICAgICAgICA8QnV0dG9uIGljb24gY2xhc3NOYW1lPSdyb3VuZGVkLWNpcmNsZScgdHlwZT0ndGVydGlhcnknIG9uQ2xpY2s9e3JlbW92ZVNjcmVlbn0gZGF0YS10ZXN0aWQ9J3JlbW92ZUJ0bic+XG4gICAgICAgICAgICAgIDxJY29uIGljb249e2RlbGV0ZUljb259IHNpemU9ezE2fSAvPlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9UaGVtZWRUb29sdGlwPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIElNVGhlbWVWYXJpYWJsZXMsXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICB0eXBlIFNpemVNb2RlTGF5b3V0SnNvbixcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICBwb2xpc2hlZCxcbiAgQnJvd3NlclNpemVNb2RlLFxuICB0eXBlIElNU2l6ZU1vZGVMYXlvdXRKc29uLFxuICBMYXlvdXRUeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24sIGFwcEJ1aWxkZXJTeW5jLCBMYXlvdXRTZXJ2aWNlUHJvdmlkZXIgfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgV2lkZ2V0TGlzdFBvcHBlciB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc2V0dGluZy1jb21wb25lbnRzJ1xuaW1wb3J0IHsgTGF5b3V0Q29udGV4dCB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGFkZEl0ZW1Ub0xheW91dCB9IGZyb20gJy4uLy4uL2J1aWxkZXIvY29tbW9uLWxheW91dC1hY3Rpb25zJ1xuaW1wb3J0IHsgRHJvcEFyZWEgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL2Ryb3BhcmVhLWhvb2snXG5pbXBvcnQgeyBQbHVzT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9wbHVzJ1xuXG5jb25zdCBidXR0b25TdHlsZSA9IGNzc2BcbiAgd2lkdGg6IDM2cHg7XG4gIGhlaWdodDogMzZweDtcbiAgcGFkZGluZzogMC41cmVtO1xuYFxuXG5jb25zdCBkcm9wYXJlYVN0eWxlID0gY3NzYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5gXG5cbmZ1bmN0aW9uIGdldFN0eWxlIChidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXMpIHtcbiAgcmV0dXJuIGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGhlaWdodDogMjAwcHg7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHotaW5kZXg6IDE7XG4gICAgYm9yZGVyOiAxcHggZGFzaGVkICR7cG9saXNoZWQucmdiYShidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s2MDBdLCAwLjYpfTtcblxuICAgIGJvZHkubG9jay1sYXlvdXQgJixcbiAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgIH1cblxuICAgIC5hY3Rpb24taXRlbSB7XG4gICAgICB6LWluZGV4OiAxO1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcbiAgbGF5b3V0czogU2l6ZU1vZGVMYXlvdXRKc29uXG4gIGJ1aWxkZXJUaGVtZTogSU1UaGVtZVZhcmlhYmxlc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUGxhY2Vob2xkZXIgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IGxheW91dHMsIGJ1aWxkZXJUaGVtZSB9ID0gcHJvcHNcbiAgY29uc3QgbGF5b3V0SWQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBsYXlvdXRzW3N0YXRlLmJyb3dzZXJTaXplTW9kZV0gfHwgbGF5b3V0c1tzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlXVxuICB9KVxuICBjb25zdCBbc2hvd1BvcHBlciwgc2V0U2hvd1BvcHBlcl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgdGVtcGxhdGVSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgY29uc3QgdG9nZ2xlUG9wcGVyID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgaWYgKGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5icm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgICAgYXBwQnVpbGRlclN5bmMucHVibGlzaFNpZGVQYW5lbFRvQXBwKHsgdHlwZTogJ3dpZGdldCcsIGlzUGxhY2Vob2xkZXI6IHRydWUsIGlzSXRlbUFjY2VwdGVkOiBpc0l0ZW1BY2NlcHRlZCwgb25TZWxlY3Q6IGFkZFdpZGdldCB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHNldFNob3dQb3BwZXIoIXNob3dQb3BwZXIpXG4gIH1cblxuICBjb25zdCBjbG9zZVBvcHBlciA9ICgpID0+IHtcbiAgICBzZXRTaG93UG9wcGVyKGZhbHNlKVxuICB9XG5cbiAgY29uc3QgYWRkV2lkZ2V0ID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKGl0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKSA9PiB7XG4gICAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgICAgYWRkSXRlbVRvTGF5b3V0KFxuICAgICAgICBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLFxuICAgICAgICBpdGVtLFxuICAgICAgICBsYXlvdXRJZFxuICAgICAgKS50aGVuKCh7IGxheW91dEluZm8sIHVwZGF0ZWRBcHBDb25maWcgfSkgPT4ge1xuICAgICAgICBjb25zdCBjb2x1bW5TZXJ2aWNlID0gTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkuZ2V0U2VydmljZUJ5VHlwZShMYXlvdXRUeXBlLkNvbHVtbkxheW91dClcbiAgICAgICAgY29uc3Qgb3V0QXBwQ29uZmlnID0gY29sdW1uU2VydmljZS5wcm9jZXNzQWZ0ZXJJdGVtQWRkZWQoXG4gICAgICAgICAgdXBkYXRlZEFwcENvbmZpZyxcbiAgICAgICAgICBpdGVtLFxuICAgICAgICAgIGxheW91dEluZm8sXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICB7IHdpZHRoOiAxMDAsIGhlaWdodDogMTAwIH0gYXMgRE9NUmVjdFJlYWRPbmx5LFxuICAgICAgICAgIHsgbGVmdDogMCwgdG9wOiAwIH0gYXMgRE9NUmVjdFJlYWRPbmx5LFxuICAgICAgICAgIG51bGxcbiAgICAgICAgKVxuICAgICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMubGF5b3V0Q2hhbmdlZChvdXRBcHBDb25maWcsIGxheW91dEluZm8pKVxuICAgICAgfSlcbiAgICAgIHNldFNob3dQb3BwZXIoZmFsc2UpXG4gICAgfSxcbiAgICBbbGF5b3V0SWRdXG4gIClcblxuICBjb25zdCBvbkRyb3AgPSBSZWFjdC51c2VDYWxsYmFjaygoZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcywgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdCwgaXRlbVJlY3Q6IENsaWVudFJlY3QpID0+IHtcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGFkZEl0ZW1Ub0xheW91dChcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsXG4gICAgICBkcmFnZ2luZ0l0ZW0sXG4gICAgICBsYXlvdXRJZFxuICAgICkudGhlbigoeyBsYXlvdXRJbmZvLCB1cGRhdGVkQXBwQ29uZmlnIH0pID0+IHtcbiAgICAgIGNvbnN0IGNvbHVtblNlcnZpY2UgPSBMYXlvdXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW5zdGFuY2UoKS5nZXRTZXJ2aWNlQnlUeXBlKExheW91dFR5cGUuQ29sdW1uTGF5b3V0KVxuICAgICAgY29uc3Qgb3V0QXBwQ29uZmlnID0gY29sdW1uU2VydmljZS5wcm9jZXNzQWZ0ZXJJdGVtQWRkZWQoXG4gICAgICAgIHVwZGF0ZWRBcHBDb25maWcsXG4gICAgICAgIGRyYWdnaW5nSXRlbSxcbiAgICAgICAgbGF5b3V0SW5mbyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgY29udGFpbmVyUmVjdCxcbiAgICAgICAgaXRlbVJlY3QsXG4gICAgICAgIG51bGxcbiAgICAgIClcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5sYXlvdXRDaGFuZ2VkKG91dEFwcENvbmZpZywgbGF5b3V0SW5mbykpXG4gICAgfSlcbiAgfSwgW2xheW91dElkXSlcblxuICBjb25zdCBpc0l0ZW1BY2NlcHRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcykgPT4ge1xuICAgIGlmIChpdGVtLmxheW91dEluZm8pIHtcbiAgICAgIHJldHVybiBpdGVtLmxheW91dEluZm8ubGF5b3V0SWQgIT09IGxheW91dElkXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH0sIFtsYXlvdXRJZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBpc0l0ZW1BY2NlcHRlZCB9fT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwbGFjZWhvbGRlci1idG4gdy0xMDAganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInIGNzcz17Z2V0U3R5bGUoYnVpbGRlclRoZW1lKX0+XG4gICAgICAgIDxEcm9wQXJlYVxuICAgICAgICAgIGNzcz17ZHJvcGFyZWFTdHlsZX1cbiAgICAgICAgICBsYXlvdXRzPXtsYXlvdXRzIGFzIElNU2l6ZU1vZGVMYXlvdXRKc29ufVxuICAgICAgICAgIG9uRHJvcD17b25Ecm9wfVxuICAgICAgICAvPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhY3Rpb24taXRlbScgcmVmPXt0ZW1wbGF0ZVJlZn0+XG4gICAgICAgICAgPEJ1dHRvbiBpY29uIGNzcz17YnV0dG9uU3R5bGV9IG9uQ2xpY2s9e3RvZ2dsZVBvcHBlcn0+XG4gICAgICAgICAgICA8UGx1c091dGxpbmVkIHNpemU9J20nLz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAge3Nob3dQb3BwZXIgJiYgKFxuICAgICAgICAgIDxXaWRnZXRMaXN0UG9wcGVyXG4gICAgICAgICAgICByZWZlcmVuY2VFbGVtZW50PXt0ZW1wbGF0ZVJlZi5jdXJyZW50fVxuICAgICAgICAgICAgaXNBY2NlcHRlZD17aXNJdGVtQWNjZXB0ZWR9XG4gICAgICAgICAgICBvblNlbGVjdD17YWRkV2lkZ2V0fVxuICAgICAgICAgICAgb25DbG9zZT17Y2xvc2VQb3BwZXJ9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvTGF5b3V0Q29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgUmVhY3RSZXNpemVEZXRlY3RvcixcbiAgdHlwZSBJTVNjcmVlbkpzb24sXG4gIHR5cGUgU2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gIFNjcmVlblRyaWdnZXJUeXBlLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIElNVGhlbWVWYXJpYWJsZXMsXG4gIHNwcmluZyxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgaW50ZXJhY3QgfSBmcm9tICdqaW11LWNvcmUvZG5kJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyB1dGlscyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGJpbmRSZXNpemVIYW5kbGVyIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9yZXNpemUtZXZlbnQtaGFuZGxlcidcbmltcG9ydCB7IHR5cGUgUHJvcHMsIGdldFNpZGVQYW5lbFN0eWxlIH0gZnJvbSAnLi4vY29tbW9uL3NjcmVlbi1zaWRlLXBhbmVsJ1xuaW1wb3J0IHsgdXNlSW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vdXNlLWludGVyc2VjdGlvbidcbmltcG9ydCB7IFBsYWNlaG9sZGVyIH0gZnJvbSAnLi9zY3JlZW4tc2lkZS1hY3Rpb24tYmxvY2snXG5pbXBvcnQgeyBJbnZpc2libGVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvYXBwbGljYXRpb24vaW52aXNpYmxlJ1xuaW1wb3J0IHsgVGhlbWVkVG9vbHRpcCB9IGZyb20gJy4uLy4uL2J1aWxkZXIvdGhlbWUtdG9vbHRpcCdcblxuY29uc3QgYW5pbWF0ZWQgPSBzcHJpbmcuYW5pbWF0ZWRcblxuZnVuY3Rpb24gZ2V0U3R5bGUgKFxuICBwcm9wczogSU1TY3JlZW5Kc29uLFxuICB2aWV3SGVpZ2h0OiBudW1iZXIsXG4gIGhlYWRlckhlaWdodDogbnVtYmVyLFxuICBpc0FjdGl2ZTogYm9vbGVhbixcbiAgdmVydGljYWxTcGFjZTogc3RyaW5nLFxuICBzdHJldGNoZWQ6IGJvb2xlYW4sXG4gIHRyYW5zaXRpb25UeXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZSxcbiAgc2NyZWVuVHJhbnNpdGlvblR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlLFxuICBpc1NtYWxsU2l6ZTogYm9vbGVhbixcbiAgcGFuZWxWaXNpYmxlOiBib29sZWFuLFxuICBidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXMsXG4gIGlzUmVzaXppbmc/OiBib29sZWFuLFxuICB3aWR0aD86IG51bWJlclxuKSB7XG4gIGNvbnN0IHsgc2lkZSwgc2l6ZSB9ID0gcHJvcHMucGFuZWwgfHwge31cbiAgY29uc3QgdmlzaWJsZUJ1dHRvblN0eWxlID0gY3NzYFxuICAgIGNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzkwMF19O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7YnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzQwMF19O1xuICAgIGJvcmRlci1jb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNjAwXX07XG4gICAgJjpob3ZlciB7XG4gICAgICBjb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLmJsYWNrfTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7YnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzYwMF19O1xuICAgIH1cbiAgYFxuXG4gIGlmIChpc1NtYWxsU2l6ZSkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAke2dldFNpZGVQYW5lbFN0eWxlKHByb3BzLCB2aWV3SGVpZ2h0LCBoZWFkZXJIZWlnaHQsIGlzQWN0aXZlLCB2ZXJ0aWNhbFNwYWNlLCBzdHJldGNoZWQsIHRyYW5zaXRpb25UeXBlLCBzY3JlZW5UcmFuc2l0aW9uVHlwZSwgaXNTbWFsbFNpemUpfTtcblxuICAgICAgLnBhbmVsLWNvbnRlbnQge1xuICAgICAgICB0cmFuc2Zvcm06IG5vbmUgIWltcG9ydGFudDtcblxuICAgICAgICAmOm5vdCgudmlzaWJsZSkge1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgID4gLmxheW91dC13cmFwcGVyID4gLmxheW91dCxcbiAgICAgICAgICA+IC5sYXlvdXQtd3JhcHBlciA+IC5wbGFjZWhvbGRlci1idG4ge1xuICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYubWluaW1pemVkIC5leGItZHJvcC1hcmVhLCAmLm1pbmltaXplZCAudG9nZ2xlLXZpc2libGUtYnRuIHtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnJlc2l6ZS1oYW5kbGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuXG4gICAgICAubGF5b3V0LXdyYXBwZXIge1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCBib3R0b207XG4gICAgICB9XG5cbiAgICAgIC50b2dnbGUtdmlzaWJsZS1idG4ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcblxuICAgICAgICA+IGJ1dHRvbiB7XG4gICAgICAgICAgJHt2aXNpYmxlQnV0dG9uU3R5bGV9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYgLnRvZ2dsZS12aXNpYmxlLWJ0biB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICByZXR1cm4gY3NzYFxuICAgICR7Z2V0U2lkZVBhbmVsU3R5bGUocHJvcHMsIHZpZXdIZWlnaHQsIGhlYWRlckhlaWdodCwgaXNBY3RpdmUsIHZlcnRpY2FsU3BhY2UsIHN0cmV0Y2hlZCwgdHJhbnNpdGlvblR5cGUsIHNjcmVlblRyYW5zaXRpb25UeXBlLCBpc1NtYWxsU2l6ZSl9O1xuXG4gICAgLnBhbmVsLWNvbnRlbnQge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdG91Y2gtYWN0aW9uOiBub25lO1xuICAgICAgd2lkdGg6ICR7aXNSZXNpemluZyA/IGAke3dpZHRofXB4YCA6IHNpemV9O1xuXG4gICAgICAmOm5vdCgudmlzaWJsZSkge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgPiAubGF5b3V0LXdyYXBwZXIgPiAubGF5b3V0LFxuICAgICAgICA+IC5sYXlvdXQtd3JhcHBlciA+IC5wbGFjZWhvbGRlci1idG4ge1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYuc2ltcGxlLW1vZGUge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAubGF5b3V0LXdyYXBwZXIge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IGJvdHRvbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAudG9nZ2xlLXZpc2libGUtYnRuIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICA+IGJ1dHRvbiB7XG4gICAgICAgICR7dmlzaWJsZUJ1dHRvblN0eWxlfTtcbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLm1pbmltaXplZCAuZXhiLWRyb3AtYXJlYSwgJi5taW5pbWl6ZWQgLnRvZ2dsZS12aXNpYmxlLWJ0biB7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAucGFuZWwtY29udGVudDpob3ZlciB7XG4gICAgICAucmVzaXplLWhhbmRsZSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuICAgIH1cbiAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYgLnJlc2l6ZS1oYW5kbGUsXG4gICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIC50b2dnbGUtdmlzaWJsZS1idG4sXG4gICAgYm9keS5sb2NrLWxheW91dCAmIC5yZXNpemUtaGFuZGxlIHtcbiAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICB9XG4gICAgLnJlc2l6ZS1oYW5kbGUge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgY3Vyc29yOiBldy1yZXNpemU7XG4gICAgICB0b3A6IDA7XG4gICAgICBib3R0b206IDA7XG4gICAgICBkaXNwbGF5OiAke2lzUmVzaXppbmcgPyAnYmxvY2snIDogJ25vbmUnfTtcbiAgICAgIHRvdWNoLWFjdGlvbjogbm9uZTtcbiAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS1saWdodC00MDApO1xuICAgICAgd2lkdGg6IDVweDtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgJjphZnRlciB7XG4gICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHotaW5kZXg6IC0xO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICBib3JkZXItbGVmdDogMXB4IGRvdHRlZCB2YXIoLS1saWdodC00MDApO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlKTtcbiAgICAgIH1cblxuICAgICAgJi5sZWZ0IHtcbiAgICAgICAgbGVmdDogLTVweDtcbiAgICAgICAgZGlzcGxheTogJHtzaWRlICE9PSAnbGVmdCcgPyAnbm9uZScgOiAnbm9uZSAhaW1wb3J0YW50J307XG4gICAgICB9XG4gICAgICAmLnJpZ2h0IHtcbiAgICAgICAgcmlnaHQ6IC01cHg7XG4gICAgICAgIGRpc3BsYXk6ICR7c2lkZSAhPT0gJ3JpZ2h0JyA/ICdub25lJyA6ICdub25lICFpbXBvcnRhbnQnfTtcbiAgICAgIH1cbiAgICB9XG4gIGBcbn1cblxuZnVuY3Rpb24gdXBkYXRlU2NyZWVuU2l6ZSAoc2NyZWVuSWQ6IHN0cmluZywgc2l6ZTogbnVtYmVyKSB7XG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gIGNvbnN0IHNjcmVlbkpzb24gPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLnNjcmVlbnNbc2NyZWVuSWRdXG4gIGxldCBuZXdTaXplXG4gIGlmICh1dGlscy5pc1BlcmNlbnRhZ2Uoc2NyZWVuSnNvbi5wYW5lbD8uc2l6ZSkpIHtcbiAgICBuZXdTaXplID0gdXRpbHMudG9SYXRpbyhzaXplLCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKVxuICB9IGVsc2Uge1xuICAgIG5ld1NpemUgPSBgJHtNYXRoLnJvdW5kKHNpemUpfXB4YFxuICB9XG5cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRTY3JlZW5Qcm9wZXJ0eShzY3JlZW5JZCwgJ3BhbmVsLnNpemUnLCBuZXdTaXplKS5leGVjKClcbn1cblxuaW50ZXJmYWNlIEV4dHJhUHJvcHMge1xuICBidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbiAgdmlld09ubHk6IGJvb2xlYW5cbiAgaXNEZXNpZ25Nb2RlOiBib29sZWFuXG4gIHVzZUFuaW1hdGlvbj86IGJvb2xlYW5cbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU2NyZWVuU2lkZVBhbmVsIChwcm9wczogUHJvcHMgJiBFeHRyYVByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpbmRleCxcbiAgICBzY3JlZW5JZCxcbiAgICBvbkludGVyY3Rpb25DaGFuZ2UsXG4gICAgb25IZWlnaHRDaGFuZ2UsXG4gICAgYnVpbGRlclRoZW1lLFxuICAgIHZpZXdIZWlnaHQsXG4gICAgaGVhZGVySGVpZ2h0LFxuICAgIGxheW91dEVudHJ5OiBMYXlvdXRFbnRyeSxcbiAgICBpc0FjdGl2ZSxcbiAgICBpc1NtYWxsU2l6ZSxcbiAgICBpc0Rlc2lnbk1vZGUsXG4gICAgdHJhbnNpdGlvblR5cGUsXG4gICAgc2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gICAgdHJpZ2dlclR5cGUsXG4gICAgc3RyZXRjaGVkLFxuICAgIHZpZXdPbmx5LFxuICAgIHZlcnRpY2FsU3BhY2UgPSAnMCcsXG4gICAgdXNlQW5pbWF0aW9uID0gdHJ1ZSxcbiAgICBmb3JtYXRNZXNzYWdlXG4gIH0gPSBwcm9wc1xuICBjb25zdCBzY3JlZW5Kc29uOiBJTVNjcmVlbkpzb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcuc2NyZWVuc1tzY3JlZW5JZF1cbiAgfSlcbiAgY29uc3QgcGFuZWxWaXNpYmxlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwUnVudGltZUluZm8/LnNjcmVlblBhbmVsU3RhdGVzPy5bc2NyZWVuSWRdID8/IHRydWVcbiAgfSlcbiAgY29uc3QgeyBwYW5lbCB9ID0gc2NyZWVuSnNvblxuICBjb25zdCBkb21SZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3QgZWxlbWVudFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBpbnRlcmFjdGFibGVSZWYgPSBSZWFjdC51c2VSZWY8SW50ZXJhY3QuSW50ZXJhY3RhYmxlPigpXG4gIGNvbnN0IFtpc1Jlc2l6aW5nLCBzZXRJc1Jlc2l6aW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbZGVsdGFXaWR0aCwgc2V0RGVsdGFXaWR0aF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICBjb25zdCBwYW5lbFZpc2libGVSZWYgPSBSZWFjdC51c2VSZWYocGFuZWxWaXNpYmxlKVxuICBjb25zdCBkZXNpZ25Nb2RlUmVmID0gUmVhY3QudXNlUmVmKGlzRGVzaWduTW9kZSlcbiAgY29uc3QgaW5pdFdpZHRoID0gUmVhY3QudXNlUmVmPG51bWJlcj4oKVxuICBjb25zdCBpbml0aWFsT2Zmc2V0ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHBhbmVsICYmIHBhbmVsLm92ZXJsYXkgJiYgTWF0aC5hYnMocGFyc2VGbG9hdChwYW5lbC5vZmZzZXQpKSA+IDApIHtcbiAgICAgIGNvbnN0IGlzUlRMID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbnRleHQuaXNSVExcbiAgICAgIGNvbnN0IGZhY3RvciA9IGlzUlRMID8gKHBhbmVsLnNpZGUgPT09ICdsZWZ0JyA/IC0xIDogMSkgOiAocGFuZWwuc2lkZSA9PT0gJ3JpZ2h0JyA/IC0xIDogMSlcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHBhbmVsLm9mZnNldCkgKiBmYWN0b3JcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSwgW3BhbmVsXSlcblxuICBjb25zdCBbYW5pbWF0aW9uUHJvcHMsIGFwaV0gPSBzcHJpbmcudXNlU3ByaW5nKCgpID0+ICh7IG9wYWNpdHk6IDEsIHNpemU6IDEsIHg6IDAsIHk6IDAgfSkpXG5cbiAgY29uc3Qgb25SZXNpemVTdGFydCA9IFJlYWN0LnVzZUNhbGxiYWNrKChpZDogc3RyaW5nLCB3aWR0aDogbnVtYmVyKSA9PiB7XG4gICAgaW5pdFdpZHRoLmN1cnJlbnQgPSB3aWR0aFxuICAgIHNldElzUmVzaXppbmcodHJ1ZSlcbiAgICBzZXREZWx0YVdpZHRoKDApXG4gIH0sIFtdKVxuXG4gIGNvbnN0IG9uUmVzaXppbmcgPSBSZWFjdC51c2VDYWxsYmFjaygoaWQsIGR4LCBkeSwgZHcsIGRoKSA9PiB7XG4gICAgc2V0RGVsdGFXaWR0aChkdylcbiAgfSwgW10pXG5cbiAgY29uc3Qgb25SZXNpemVFbmQgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAoaWQsIGR4LCBkeSwgZHcsIGRoKSA9PiB7XG4gICAgICB1cGRhdGVTY3JlZW5TaXplKHNjcmVlbklkLCBpbml0V2lkdGguY3VycmVudCArIGR3KVxuICAgICAgc2V0SXNSZXNpemluZyhmYWxzZSlcbiAgICB9LFxuICAgIFtzY3JlZW5JZF1cbiAgKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRlc2lnbk1vZGVSZWYuY3VycmVudCAhPT0gaXNEZXNpZ25Nb2RlKSB7XG4gICAgICBkZXNpZ25Nb2RlUmVmLmN1cnJlbnQgPSBpc0Rlc2lnbk1vZGVcbiAgICAgIGlmICghaXNEZXNpZ25Nb2RlKSB7XG4gICAgICAgIGFwaS5zdGFydCh7IG9wYWNpdHk6IDEsIHg6IDAsIHk6IDAsIGltbWVkaWF0ZTogdHJ1ZSwgb25SZXN0OiBudWxsIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocGFuZWxWaXNpYmxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBhcGkuc3RhcnQoeyBvcGFjaXR5OiAxLCB4OiAwLCB5OiAwLCBpbW1lZGlhdGU6IHRydWUsIG9uUmVzdDogbnVsbCB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwaS5zdGFydCh7IG9wYWNpdHk6IDAsIGltbWVkaWF0ZTogdHJ1ZSwgb25SZXN0OiBudWxsIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpc0Rlc2lnbk1vZGUsIGFwaV0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWludGVyYWN0YWJsZVJlZi5jdXJyZW50ICYmIGVsZW1lbnRSZWYuY3VycmVudCkge1xuICAgICAgaW50ZXJhY3RhYmxlUmVmLmN1cnJlbnQgPSBpbnRlcmFjdChlbGVtZW50UmVmLmN1cnJlbnQpXG4gICAgICBiaW5kUmVzaXplSGFuZGxlcihpbnRlcmFjdGFibGVSZWYuY3VycmVudCwge1xuICAgICAgICBsYXlvdXRJdGVtSWQ6IHNjcmVlbklkLFxuICAgICAgICBvblJlc2l6ZVN0YXJ0OiBvblJlc2l6ZVN0YXJ0LFxuICAgICAgICBvblJlc2l6aW5nOiBvblJlc2l6aW5nLFxuICAgICAgICBvblJlc2l6ZUVuZDogb25SZXNpemVFbmRcbiAgICAgIH0pXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoaW50ZXJhY3RhYmxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBpbnRlcmFjdGFibGVSZWYuY3VycmVudC51bnNldCgpXG4gICAgICAgICAgaW50ZXJhY3RhYmxlUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzY3JlZW5JZCwgb25SZXNpemVTdGFydCwgb25SZXNpemluZywgb25SZXNpemVFbmRdKVxuXG4gIGNvbnN0IGludGVyc2VjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChpc0ludGVyc2VjdGluZzogYm9vbGVhbikgPT4ge1xuICAgICAgb25JbnRlcmN0aW9uQ2hhbmdlKGluZGV4LCBpc0ludGVyc2VjdGluZylcbiAgICB9LFxuICAgIFtpbmRleCwgb25JbnRlcmN0aW9uQ2hhbmdlXVxuICApXG5cbiAgY29uc3Qgb25TaXplQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAgIG9uSGVpZ2h0Q2hhbmdlKGluZGV4LCBoZWlnaHQpXG4gICAgfSxcbiAgICBbaW5kZXgsIG9uSGVpZ2h0Q2hhbmdlXVxuICApXG5cbiAgY29uc3QgaGlkZVBhbmVsID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBjb25zdCBidXR0b25SZWN0ID0gKGUudGFyZ2V0IGFzIEhUTUxEaXZFbGVtZW50KS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHBhcmVudFJlY3QgPSBkb21SZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IGlzUlRMID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbnRleHQuaXNSVExcbiAgICBkb21SZWYuY3VycmVudC5jbGFzc0xpc3QuYWRkKCdtaW5pbWl6ZWQnKVxuICAgIGFwaS5zdGFydCh7XG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgc2l6ZTogMCxcbiAgICAgIHg6IGlzUlRMID8gcGFyZW50UmVjdC5sZWZ0IC0gYnV0dG9uUmVjdC5sZWZ0IDogcGFyZW50UmVjdC5yaWdodCAtIGJ1dHRvblJlY3QucmlnaHQsXG4gICAgICB5OiBwYXJlbnRSZWN0LmJvdHRvbSAtIGJ1dHRvblJlY3QuYm90dG9tLFxuICAgICAgaW1tZWRpYXRlOiAhdXNlQW5pbWF0aW9uLFxuICAgICAgb25SZXN0OiAoKSA9PiB7XG4gICAgICAgIHBhbmVsVmlzaWJsZVJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlblBhbmVsVmlzaWJsZUNoYW5nZWQoc2NyZWVuSWQsIGZhbHNlKSlcbiAgICAgIH1cbiAgICB9KVxuICB9LCBbYXBpLCBzY3JlZW5JZCwgdXNlQW5pbWF0aW9uXSlcblxuICBjb25zdCBzaG93UGFuZWwgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZG9tUmVmLmN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnbWluaW1pemVkJylcbiAgICBhcGkuc3RhcnQoe1xuICAgICAgb3BhY2l0eTogMSxcbiAgICAgIHNpemU6IDEsXG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIGltbWVkaWF0ZTogIXVzZUFuaW1hdGlvbixcbiAgICAgIG9uUmVzdDogbnVsbFxuICAgIH0pXG4gIH0sIFthcGksIHVzZUFuaW1hdGlvbl0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocGFuZWxWaXNpYmxlUmVmLmN1cnJlbnQgIT09IHBhbmVsVmlzaWJsZSAmJiBwYW5lbFZpc2libGUpIHtcbiAgICAgIHNob3dQYW5lbCgpXG4gICAgICBwYW5lbFZpc2libGVSZWYuY3VycmVudCA9IHBhbmVsVmlzaWJsZVxuICAgIH1cbiAgfSwgW3BhbmVsVmlzaWJsZSwgc2hvd1BhbmVsXSlcblxuICB1c2VJbnRlcnNlY3Rpb24oXG4gICAgZG9tUmVmLmN1cnJlbnQsXG4gICAgcHJvcHMucmVmRWxlbWVudCxcbiAgICBpc1NtYWxsU2l6ZSA/IFNjcmVlblRyaWdnZXJUeXBlLkxvd2VyIDogdHJpZ2dlclR5cGUgPz8gU2NyZWVuVHJpZ2dlclR5cGUuQm90dG9tLFxuICAgIGludGVyc2VjdGlvbkNoYW5nZVxuICApXG5cbiAgY29uc3QgYW5pbWF0aW9uU3R5bGUgPSB7XG4gICAgb3BhY2l0eTogYW5pbWF0aW9uUHJvcHMub3BhY2l0eSxcbiAgICB0cmFuc2xhdGVYOiBpbml0aWFsT2Zmc2V0LFxuICAgIHg6IGFuaW1hdGlvblByb3BzLngsXG4gICAgeTogYW5pbWF0aW9uUHJvcHMueVxuICB9XG5cbiAgY29uc3QgdG9nZ2xhYmxlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiAhdmlld09ubHkgJiYgaXNBY3RpdmUgJiYgcGFuZWw/Lm92ZXJsYXlcbiAgfSwgW3BhbmVsLCBpc0FjdGl2ZSwgdmlld09ubHldKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzY3JlZW4tc2lkZS1wYW5lbCcsIHtcbiAgICAgICAgJ3RvcC1zcGFjaW5nJzogaW5kZXggPT09IDAgJiYgKHBhbmVsPy5vdmVybGF5IHx8IGlzU21hbGxTaXplKVxuICAgICAgfSl9XG4gICAgICBkYXRhLXNjcmVlbmlkPXtzY3JlZW5JZH1cbiAgICAgIGRhdGEtaW5kZXg9e2luZGV4fVxuICAgICAgcmVmPXtkb21SZWZ9XG4gICAgICBjc3M9e2dldFN0eWxlKFxuICAgICAgICBzY3JlZW5Kc29uLFxuICAgICAgICB2aWV3SGVpZ2h0LFxuICAgICAgICBoZWFkZXJIZWlnaHQsXG4gICAgICAgIGlzQWN0aXZlLFxuICAgICAgICB2ZXJ0aWNhbFNwYWNlLFxuICAgICAgICBzdHJldGNoZWQgfHwgcGFuZWwgPT0gbnVsbCxcbiAgICAgICAgdHJhbnNpdGlvblR5cGUsXG4gICAgICAgIHNjcmVlblRyYW5zaXRpb25UeXBlLFxuICAgICAgICBpc1NtYWxsU2l6ZSxcbiAgICAgICAgcGFuZWxWaXNpYmxlLFxuICAgICAgICBidWlsZGVyVGhlbWUsXG4gICAgICAgIGlzUmVzaXppbmcsXG4gICAgICAgIGluaXRXaWR0aC5jdXJyZW50ICsgZGVsdGFXaWR0aFxuICAgICAgKX1cbiAgICA+XG4gICAgICB7cGFuZWwgJiYgKFxuICAgICAgICA8YW5pbWF0ZWQuZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncGFuZWwtY29udGVudCcsIHsgdmlzaWJsZTogcGFuZWxWaXNpYmxlIH0pfSByZWY9e2VsZW1lbnRSZWZ9IHN0eWxlPXthbmltYXRpb25TdHlsZX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2xheW91dC13cmFwcGVyJz5cbiAgICAgICAgICAgIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXtwYW5lbC5sYXlvdXR9IC8+XG4gICAgICAgICAgICB7IXZpZXdPbmx5ICYmIDxQbGFjZWhvbGRlciBsYXlvdXRzPXtwYW5lbC5sYXlvdXR9IGJ1aWxkZXJUaGVtZT17YnVpbGRlclRoZW1lfSAvPn1cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ncmVzaXplLWhhbmRsZSBsZWZ0IHJuZC1yZXNpemUtbGVmdCcgLz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ncmVzaXplLWhhbmRsZSByaWdodCBybmQtcmVzaXplLXJpZ2h0JyAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHt0b2dnbGFibGUoKSAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndG9nZ2xlLXZpc2libGUtYnRuJyBvbkNsaWNrPXtoaWRlUGFuZWx9IGRhdGEtdGVzdGlkPXtgdG9nZ2xlQnRuLSR7cGFuZWxWaXNpYmxlfWB9PlxuICAgICAgICAgICAgICA8VGhlbWVkVG9vbHRpcCBwbGFjZW1lbnQ9J2F1dG8nIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdoaWRlSW5EZXNpZ25WaWV3Jyl9PlxuICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT0nZGVmYXVsdCcgc2l6ZT0nc20nIGNsYXNzTmFtZT0ncm91bmRlZCc+XG4gICAgICAgICAgICAgICAgICA8SW52aXNpYmxlT3V0bGluZWQgc2l6ZT0nbScvPlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L1RoZW1lZFRvb2x0aXA+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdwYW5lbC1zcGFjaW5nJywgeyAnbGFzdC1pdGVtJzogcHJvcHMuaXNMYXN0IH0pfSAvPlxuICAgICAgICA8L2FuaW1hdGVkLmRpdj5cbiAgICAgICl9XG4gICAgICB7IXBhbmVsICYmIHBhbmVsVmlzaWJsZSAmJiA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtY29udGVudC1wbGFjZWhvbGRlcicgLz59XG4gICAgICA8UmVhY3RSZXNpemVEZXRlY3RvciBoYW5kbGVIZWlnaHQgb25SZXNpemU9e29uU2l6ZUNoYW5nZX0gLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgTGF5b3V0SXRlbVR5cGUsIHR5cGUgTGF5b3V0SW5mbywgZ2V0QXBwU3RvcmUsIGFwcEFjdGlvbnMsIHR5cGUgSU1BcHBDb25maWcgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24sIHNjcmVlbkdyb3VwU2VydmljZSwgd2lkZ2V0U2VydmljZSB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyB0eXBlIFRlbXBsYXRlIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlci90ZW1wbGF0ZXMnXG5pbXBvcnQgeyB1dGlscyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcblxuLy8gQWRkIHRlbXBsYXRlIGJlbG93IHRoZSBsYXlvdXQgaXRlbVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFRlbXBsYXRlUm93IChcbiAgbGF5b3V0SWQ6IHN0cmluZyxcbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmcsXG4gIGxheW91dFRlbXBsYXRlOiBUZW1wbGF0ZVxuKTogUHJvbWlzZTxMYXlvdXRJbmZvPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpZGdldFNlcnZpY2UuY3JlYXRlRnJvbVRlbXBsYXRlKFxuICAgIGdldEFwcENvbmZpZ0FjdGlvbigpLmFwcENvbmZpZyxcbiAgICBsYXlvdXRUZW1wbGF0ZSxcbiAgICBudWxsLFxuICAgIFt1dGlscy5nZXRDdXJyZW50U2l6ZU1vZGUoKV0sXG4gICAge30sXG4gICAgeyBpc0Jsb2NrOiB0cnVlIH1cbiAgKVxuICBjb25zdCBhcHBDb25maWcgPSByZXN1bHRbMF1cbiAgY29uc3QgbmV3V2lkZ2V0SWQgPSByZXN1bHRbMV1cblxuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuICBjb25zdCBsYXlvdXRJbmZvID0gYXBwQ29uZmlnQWN0aW9uLmFkZFRlbXBsYXRlQ29udGVudFRvTGF5b3V0KGxheW91dElkLCBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsIG5ld1dpZGdldElkKVxuICBjb25zdCBsYXlvdXQgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGNvbnN0IG9yZGVyID0gbGF5b3V0Lm9yZGVyIHx8IFtdXG4gIGNvbnN0IGluc2VydEluZGV4ID0gb3JkZXIuaW5kZXhPZihsYXlvdXRJdGVtSWQpXG5cbiAgYXBwQ29uZmlnQWN0aW9uLmFkanVzdE9yZGVyT2ZJdGVtKGxheW91dEluZm8sIGluc2VydEluZGV4ID49IDAgPyBpbnNlcnRJbmRleCArIDEgOiBOYU4pXG5cbiAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgeyAuLi5sYXlvdXRJbmZvLCBhdXRvU2Nyb2xsOiB0cnVlIH0pKVxuXG4gIHJldHVybiBsYXlvdXRJbmZvXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRUZW1wbGF0ZVNjcmVlbkdyb3VwIChcbiAgbGF5b3V0SWQ6IHN0cmluZyxcbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmcsXG4gIHNjcmVlbkdyb3VwVGVtcGxhdGU6IFRlbXBsYXRlXG4pOiBQcm9taXNlPExheW91dEluZm8+IHtcbiAgY29uc3QgY29udGV4dCA9IHt9XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNjcmVlbkdyb3VwU2VydmljZS5jcmVhdGVGcm9tVGVtcGxhdGUoZ2V0QXBwQ29uZmlnQWN0aW9uKCkuYXBwQ29uZmlnLCBzY3JlZW5Hcm91cFRlbXBsYXRlLCBudWxsLCBbdXRpbHMuZ2V0Q3VycmVudFNpemVNb2RlKCldLCBjb250ZXh0KVxuICBjb25zdCBhcHBDb25maWcgPSByZXN1bHRbMF1cbiAgY29uc3QgbmV3U2NyZWVuR3JvdXBJZCA9IHJlc3VsdFsxXVxuXG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gIGNvbnN0IGxheW91dEluZm8gPSBhcHBDb25maWdBY3Rpb24uYWRkVGVtcGxhdGVDb250ZW50VG9MYXlvdXQobGF5b3V0SWQsIExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwLCBuZXdTY3JlZW5Hcm91cElkKVxuXG4gIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgY29uc3Qgb3JkZXIgPSBsYXlvdXQub3JkZXIgfHwgW11cbiAgY29uc3QgaW5zZXJ0SW5kZXggPSBvcmRlci5pbmRleE9mKGxheW91dEl0ZW1JZClcblxuICBhcHBDb25maWdBY3Rpb24uYWRqdXN0T3JkZXJPZkl0ZW0obGF5b3V0SW5mbywgaW5zZXJ0SW5kZXggPj0gMCA/IGluc2VydEluZGV4ICsgMSA6IE5hTilcbiAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmxheW91dENoYW5nZWQoYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgeyAuLi5sYXlvdXRJbmZvLCBhdXRvU2Nyb2xsOiB0cnVlIH0pKVxuXG4gIHJldHVybiBsYXlvdXRJbmZvXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0ZpcnN0Tm9uRmxvYXRpbmdJdGVtIChsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBDb25maWdBY3Rpb24oKS5hcHBDb25maWdcbiAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGxldCByZXN1bHQgPSBmYWxzZVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBsYXlvdXQub3JkZXIuc29tZShpZCA9PiB7XG4gICAgY29uc3QgaXRlbSA9IGxheW91dC5jb250ZW50W2lkXVxuICAgIGlmICghaXRlbS5zZXR0aW5nPy5pc0Zsb2F0aW5nICYmICFpdGVtLmlzUGVuZGluZykge1xuICAgICAgcmVzdWx0ID0gaWQgPT09IGxheW91dEl0ZW1JZFxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH0pXG4gIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTGFzdE5vbkZsb2F0aW5nSXRlbSAobGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IGJvb2xlYW4ge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwQ29uZmlnQWN0aW9uKCkuYXBwQ29uZmlnXG4gIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICBsZXQgcmVzdWx0ID0gZmFsc2VcblxuICBmb3IgKGxldCBpID0gbGF5b3V0Lm9yZGVyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgaWQgPSBsYXlvdXQub3JkZXJbaV1cbiAgICBjb25zdCBpdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgaWYgKCFpdGVtLnNldHRpbmc/LmlzRmxvYXRpbmcgJiYgIWl0ZW0uaXNQZW5kaW5nKSB7XG4gICAgICByZXN1bHQgPSBpZCA9PT0gbGF5b3V0SXRlbUlkXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8qKlxuICogTW92ZSBhIGxheW91dCBpdGVtIGRvd24gaW4gdGhlIHNjcm9sbGluZyBwYWdlLCB0YWtlIHRoZSBmbG9hdGluZyBpdGVtIGludG8gYWNjb3VudC5cbiAqIEBwYXJhbSBsYXlvdXRJbmZvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlRG93biAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IElNQXBwQ29uZmlnIHtcbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBsYXlvdXRJbmZvXG4gIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgY29uc3Qgb3JkZXIgPSBsYXlvdXQub3JkZXJcbiAgY29uc3QgcmVzdWx0ID0gW10uY29uY2F0KG9yZGVyKVxuICBjb25zdCBpbmRleCA9IG9yZGVyLmluZGV4T2YobGF5b3V0SXRlbUlkKVxuICBsZXQgdGFyZ2V0ID0gb3JkZXIubGVuZ3RoIC0gMVxuXG4gIGZvciAobGV0IGkgPSBpbmRleCArIDE7IGkgPCBvcmRlci5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGlkID0gb3JkZXJbaV1cbiAgICBjb25zdCBpdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgaWYgKCFpdGVtLnNldHRpbmc/LmlzRmxvYXRpbmcpIHtcbiAgICAgIHRhcmdldCA9IGlcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG4gIHJlc3VsdC5zcGxpY2UodGFyZ2V0ICsgMSwgMCwgbGF5b3V0SXRlbUlkKVxuICByZXN1bHQuc3BsaWNlKGluZGV4LCAxKVxuXG4gIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0UHJvcGVydHkobGF5b3V0SWQsICdvcmRlcicsIHJlc3VsdClcbiAgcmV0dXJuIGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcbn1cblxuLyoqXG4gKiBNb3ZlIGEgbGF5b3V0IGl0ZW0gdXAgaW4gdGhlIHNjcm9sbGluZyBwYWdlLCB0YWtlIHRoZSBmbG9hdGluZyBpdGVtIGludG8gYWNjb3VudC5cbiAqIEBwYXJhbSBsYXlvdXRJbmZvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlVXAgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8pOiBJTUFwcENvbmZpZyB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuICBjb25zdCBsYXlvdXQgPSBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGNvbnN0IG9yZGVyID0gbGF5b3V0Lm9yZGVyXG4gIGNvbnN0IHJlc3VsdCA9IFtdLmNvbmNhdChvcmRlcilcbiAgY29uc3QgaW5kZXggPSBvcmRlci5pbmRleE9mKGxheW91dEl0ZW1JZClcbiAgbGV0IHRhcmdldCA9IDBcblxuICBmb3IgKGxldCBpID0gaW5kZXggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IGlkID0gb3JkZXJbaV1cbiAgICBjb25zdCBpdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgaWYgKCFpdGVtLnNldHRpbmc/LmlzRmxvYXRpbmcpIHtcbiAgICAgIHRhcmdldCA9IGlcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG4gIHJlc3VsdC5zcGxpY2UoaW5kZXgsIDEpXG4gIHJlc3VsdC5zcGxpY2UodGFyZ2V0LCAwLCBsYXlvdXRJdGVtSWQpXG5cbiAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXRJZCwgJ29yZGVyJywgcmVzdWx0KVxuICByZXR1cm4gYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZ1xufVxuIiwiZXhwb3J0IHsgU2NyZWVuU2lkZVBhbmVsIH0gZnJvbSAnLi9zY3JlZW4tc2lkZS1wYW5lbCdcbmV4cG9ydCB7IFNjcmVlbk1haW5QYW5lbCB9IGZyb20gJy4vc2NyZWVuLW1haW4tcGFuZWwnXG5leHBvcnQgeyBTY3JlZW5NYWluUGFuZWxMaXN0IH0gZnJvbSAnLi9zY3JlZW4tbWFpbi1wYW5lbC1saXN0J1xuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MsIFNjcmVlblRyYW5zaXRpb25UeXBlLCB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIElNVGhlbWVWYXJpYWJsZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTY3JlZW5NYWluUGFuZWwgfSBmcm9tICcuL3NjcmVlbi1tYWluLXBhbmVsJ1xuaW1wb3J0IHR5cGUgeyBMYXlvdXRQcm9wcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbi8vIGltcG9ydCB7IFNDUkVFTl9SQVRJT19JTl9TTUFMTF9TSVpFIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XG4gIHJvb3RMYXlvdXRJZDogc3RyaW5nXG4gIGFjdGl2ZUluZGV4OiBudW1iZXJcbiAgdmlld0hlaWdodD86IG51bWJlclxuICBoZWFkZXJIZWlnaHQ6IG51bWJlclxuICBzY3JlZW5zOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XG4gIGlzU21hbGxTaXplOiBib29sZWFuXG4gIHRyYW5zaXRpb25UeXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZVxuICBsYXlvdXRFbnRyeTogUmVhY3QuQ29tcG9uZW50VHlwZTxMYXlvdXRQcm9wcz5cbiAgaXNEZXNpZ25Nb2RlPzogYm9vbGVhblxuICBmb3JtYXRNZXNzYWdlPzogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xuICBidWlsZGVyVGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG59XG5cbmZ1bmN0aW9uIGdldENvbnRhaW5lclN0eWxlIChcbiAgdHJhbnNpdGlvblR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlLFxuICB2aWV3SGVpZ2h0OiBudW1iZXIsXG4gIGhlYWRlckhlaWdodDogbnVtYmVyLFxuICBpc1NtYWxsU2l6ZTogYm9vbGVhbixcbiAgbnVtT2ZTY3JlZW5zOiBudW1iZXJcbikge1xuICBpZiAodHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGUpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgcG9zaXRpb246IHN0aWNreTtcbiAgICAgIGhlaWdodDogJHt2aWV3SGVpZ2h0fXB4O1xuICAgICAgdG9wOiAwO1xuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICBoZWlnaHQ6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKDEwMHZoIC0gJHtoZWFkZXJIZWlnaHR9cHgpYCA6ICcxMDB2aCd9O1xuICAgICAgICBoZWlnaHQ6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKHZhcigtLXZoKSAqIDEwMCAtICR7aGVhZGVySGVpZ2h0fXB4KWAgOiAnY2FsYyh2YXIoLS12aCkgKiAxMDApJ307XG4gICAgICAgIHRvcDogJHtoZWFkZXJIZWlnaHQgPiAwID8gYCR7aGVhZGVySGVpZ2h0fXB4YCA6IDB9O1xuICAgICAgICAubGF5b3V0IC5leGItZHJvcC1hcmVhIHtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5zY3JlZW4tbWFpbi1wYW5lbCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICB0cmFuc2l0aW9uOiAke2lzU21hbGxTaXplID8gbnVsbCA6ICdvcGFjaXR5IDQwMG1zJ307XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgLyogaGVpZ2h0OiAke2lzU21hbGxTaXplID8gJ3Vuc2V0JyA6ICcxMDAlICFpbXBvcnRhbnQnfTsgKi9cblxuICAgICAgICAubGF5b3V0IC5leGItZHJvcC1hcmVhIHtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgICYuaXMtYWN0aXZlIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgei1pbmRleDogMTtcblxuICAgICAgICAgIC5sYXlvdXQgLmV4Yi1kcm9wLWFyZWEge1xuICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgaWYgKHRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5Db3Zlcikge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgaGVpZ2h0OiAke3ZpZXdIZWlnaHR9cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdG9wOiAwO1xuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIG92ZXJmbG93OiB1bnNldDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgICAgIC5zY3JlZW4tbWFpbi1wYW5lbCB7XG4gICAgICAgICAgdG9wOiAke2hlYWRlckhlaWdodCA+IDAgPyBgJHtoZWFkZXJIZWlnaHR9cHhgIDogMH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJiA+IGRpdjpmaXJzdC1vZi10eXBlIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAuc2NyZWVuLW1haW4tcGFuZWwge1xuICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIG1hcmdpbi10b3A6ICR7bnVtT2ZTY3JlZW5zID09PSAxID8gJzAgIWltcG9ydGFudCcgOiBudWxsfTtcblxuICAgICAgICAuc3BhY2luZy1hcmVhIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgaWYgKHRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5QdXNoKSB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgICBoZWlnaHQ6ICR7dmlld0hlaWdodH1weDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB0b3A6IDA7XG5cbiAgICAgIGJvZHk6bm90KC5kZXNpZ24tbW9kZSkgJiB7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgb3ZlcmZsb3c6IHVuc2V0O1xuXG4gICAgICAgIC5zY3JlZW4tbWFpbi1wYW5lbCA+IC5sYXlvdXQge1xuICAgICAgICAgIHRvcDogJHtoZWFkZXJIZWlnaHQgPiAwID8gYCR7aGVhZGVySGVpZ2h0fXB4YCA6IDB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5zY3JlZW4tbWFpbi1wYW5lbCA+IC5sYXlvdXQge1xuICAgICAgICBwb3NpdGlvbjogc3RpY2t5ICFpbXBvcnRhbnQ7XG4gICAgICAgIHRvcDogMDtcbiAgICAgIH1cbiAgICBgXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UGxhY2Vob2xkZXJTdHlsZSAodHJhbnNpdGlvblR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlLCB2aWV3SGVpZ2h0OiBudW1iZXIsIGlzU21hbGxTaXplOiBib29sZWFuKSB7XG4gIGlmICh0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZSkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtICR7dmlld0hlaWdodH1weCk7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDEwMHZoKTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSB2YXIoLS12aCkgKiAxMDApO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGlmICh0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuQ292ZXIgfHwgdHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLlB1c2gpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAke3ZpZXdIZWlnaHR9cHgpO1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDEwMHZoKTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSB2YXIoLS12aCkgKiAxMDApO1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgIGBcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2NyZWVuTWFpblBhbmVsTGlzdCAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgcm9vdExheW91dElkLCBhY3RpdmVJbmRleCwgdmlld0hlaWdodCwgaGVhZGVySGVpZ2h0LCBzY3JlZW5zLCB0cmFuc2l0aW9uVHlwZSwgaXNTbWFsbFNpemUsIGxheW91dEVudHJ5LCBpc0Rlc2lnbk1vZGUsIGZvcm1hdE1lc3NhZ2UsIGJ1aWxkZXJUaGVtZSB9ID0gcHJvcHNcbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nc2NyZWVuLWNvbnRhaW5lcicgY3NzPXtnZXRDb250YWluZXJTdHlsZSh0cmFuc2l0aW9uVHlwZSwgdmlld0hlaWdodCwgaGVhZGVySGVpZ2h0LCBpc1NtYWxsU2l6ZSwgc2NyZWVucy5sZW5ndGgpfT5cbiAgICAgICAge3NjcmVlbnMubWFwKChzY3JlZW5JZCwgaWR4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTY3JlZW5NYWluUGFuZWxcbiAgICAgICAgICAgICAga2V5PXtzY3JlZW5JZH1cbiAgICAgICAgICAgICAgcm9vdExheW91dElkPXtyb290TGF5b3V0SWR9XG4gICAgICAgICAgICAgIGluZGV4PXtpZHh9XG4gICAgICAgICAgICAgIGlzQWN0aXZlPXthY3RpdmVJbmRleCA9PT0gaWR4fVxuICAgICAgICAgICAgICBzY3JlZW5JZD17c2NyZWVuSWR9XG4gICAgICAgICAgICAgIHZpZXdIZWlnaHQ9e3ZpZXdIZWlnaHR9XG4gICAgICAgICAgICAgIGhlYWRlckhlaWdodD17aGVhZGVySGVpZ2h0fVxuICAgICAgICAgICAgICBpc0Fic29sdXRlPXt0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZX1cbiAgICAgICAgICAgICAgaXNMYXN0PXtpZHggPT09IHNjcmVlbnMubGVuZ3RoIC0gMX1cbiAgICAgICAgICAgICAgaXNTbWFsbFNpemU9e2lzU21hbGxTaXplfVxuICAgICAgICAgICAgICBsYXlvdXRFbnRyeT17bGF5b3V0RW50cnl9XG4gICAgICAgICAgICAgIGlzRGVzaWduTW9kZT17aXNEZXNpZ25Nb2RlfVxuICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXtmb3JtYXRNZXNzYWdlfVxuICAgICAgICAgICAgICBidWlsZGVyVGhlbWU9e2J1aWxkZXJUaGVtZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKVxuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3NjcmVlbi1wbGFjZWhvbGRlcicgY3NzPXtnZXRQbGFjZWhvbGRlclN0eWxlKHRyYW5zaXRpb25UeXBlLCB2aWV3SGVpZ2h0LCBpc1NtYWxsU2l6ZSl9IC8+XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlLCBqc3gsIGNzcywgY2xhc3NOYW1lcywgZ2V0QXBwU3RvcmUsIGFwcEFjdGlvbnMsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHN0eWxlVXRpbHMsIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IExheW91dFByb3BzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgUGFnZVZpc2liaWxpdHlDb250ZXh0IH0gZnJvbSAnLi4vLi4vYnVpbGRlci9wYWdlLWNvbnRleHQnXG5pbXBvcnQgeyBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSB9IGZyb20gJy4vdHlwZSdcbmltcG9ydCB7IFZpc2libGVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvYXBwbGljYXRpb24vdmlzaWJsZSdcbmltcG9ydCB7IFRoZW1lZFRvb2x0aXAgfSBmcm9tICcuLi8uLi9idWlsZGVyL3RoZW1lLXRvb2x0aXAnXG5cbmludGVyZmFjZSBPd25Qcm9wcyB7XG4gIHJvb3RMYXlvdXRJZDogc3RyaW5nXG4gIGluZGV4OiBudW1iZXJcbiAgaXNBY3RpdmU6IGJvb2xlYW5cbiAgaXNBYnNvbHV0ZT86IGJvb2xlYW4gLy8gaWYgdXNlcyBhYnNvbHV0ZSBwb3NpdGlvbi4gZS5nLiB1c2UgZmFkZSB0cmFuc2l0aW9uXG4gIHZpZXdIZWlnaHQ6IG51bWJlclxuICBoZWFkZXJIZWlnaHQ6IG51bWJlclxuICBzY3JlZW5JZDogc3RyaW5nXG4gIGlzTGFzdDogYm9vbGVhblxuICBpc1NtYWxsU2l6ZTogYm9vbGVhblxuICBsYXlvdXRFbnRyeTogUmVhY3QuQ29tcG9uZW50VHlwZTxMYXlvdXRQcm9wcz5cbiAgaXNEZXNpZ25Nb2RlPzogYm9vbGVhblxuICBmb3JtYXRNZXNzYWdlPzogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xuICBidWlsZGVyVGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTY3JlZW5NYWluUGFuZWwgKHByb3BzOiBPd25Qcm9wcykge1xuICBjb25zdCB7IHJvb3RMYXlvdXRJZCwgdmlld0hlaWdodCwgaGVhZGVySGVpZ2h0LCBzY3JlZW5JZCwgaXNBY3RpdmUsIGlzQWJzb2x1dGUsIGlzTGFzdCwgaXNTbWFsbFNpemUsIGxheW91dEVudHJ5OiBMYXlvdXRFbnRyeSwgaXNEZXNpZ25Nb2RlLCBmb3JtYXRNZXNzYWdlLCBidWlsZGVyVGhlbWUgfSA9IHByb3BzXG4gIGNvbnN0IHNjcmVlbkpzb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcuc2NyZWVuc1tzY3JlZW5JZF1cbiAgfSlcbiAgY29uc3QgcGFuZWxWaXNpYmxlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwUnVudGltZUluZm8/LnNjcmVlblBhbmVsU3RhdGVzPy5bc2NyZWVuSWRdID8/IHRydWVcbiAgfSlcbiAgY29uc3QgeyBtYWluIH0gPSBzY3JlZW5Kc29uXG4gIGNvbnN0IHsgc2lkZSwgc2l6ZSwgb3ZlcmxheSA9IHRydWUgfSA9IHNjcmVlbkpzb24ucGFuZWwgfHwge31cbiAgY29uc3QgZWxlbWVudFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuXG4gIGNvbnN0IHNob3dQYW5lbCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2NyZWVuUGFuZWxWaXNpYmxlQ2hhbmdlZChzY3JlZW5JZCwgdHJ1ZSkpXG4gIH0sIFtzY3JlZW5JZF0pXG5cbiAgZnVuY3Rpb24gZ2V0U3R5bGUgKCkge1xuICAgIGlmIChpc1NtYWxsU2l6ZSkge1xuICAgICAgY29uc3QgaXNEb2NrZWQgPSAhb3ZlcmxheSAmJiBzY3JlZW5Kc29uLnBhbmVsICE9IG51bGwgLy8gb3ZlcmxheSA9PT0gZmFsc2VcbiAgICAgIGNvbnN0IGhlaWdodEluRGVzaWduTW9kZSA9IGlzRG9ja2VkXG4gICAgICAgID8gYCR7TWF0aC5yb3VuZCh2aWV3SGVpZ2h0ICogU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkUpfXB4YFxuICAgICAgICA6IGAke3ZpZXdIZWlnaHR9cHhgXG4gICAgICBjb25zdCBoZWlnaHRJblJ1bnRpbWUgPSBpc0RvY2tlZFxuICAgICAgICA/IGAke01hdGgucm91bmQoMTAwICogU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkUpfWBcbiAgICAgICAgOiAnMTAwJ1xuICAgICAgcmV0dXJuIGNzc2BcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogJHt2aWV3SGVpZ2h0fXB4O1xuXG4gICAgICAgID4gLmxheW91dCB7XG4gICAgICAgICAgJHtzdHlsZVV0aWxzLnRvQmFja2dyb3VuZEVtb3Rpb25TdHlsZShzY3JlZW5Kc29uLm1haW4/LmJhY2tncm91bmQgPz8gKHt9IGFzIGFueSkpfTtcbiAgICAgICAgICBoZWlnaHQ6ICR7aGVpZ2h0SW5EZXNpZ25Nb2RlfSAhaW1wb3J0YW50O1xuICAgICAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICB9XG5cbiAgICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgICBoZWlnaHQ6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKDEwMHZoIC0gJHtoZWFkZXJIZWlnaHR9cHgpYCA6ICcxMDB2aCd9O1xuICAgICAgICAgIGhlaWdodDogJHtoZWFkZXJIZWlnaHQgPiAwID8gYGNhbGModmFyKC0tdmgpICogMTAwIC0gJHtoZWFkZXJIZWlnaHR9cHgpYCA6ICdjYWxjKHZhcigtLXZoKSAqIDEwMCknfTtcbiAgICAgICAgICA+IC5sYXlvdXQge1xuICAgICAgICAgICAgaGVpZ2h0OiAke2hlaWdodEluUnVudGltZX12aCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLXZoKSAqICR7aGVpZ2h0SW5SdW50aW1lfSkgIWltcG9ydGFudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAuc3BhY2luZy1hcmVhIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLnRvZ2dsZS12aXNpYmxlLWJ0biB7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICByaWdodDogbGVmdDtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgfVxuICAgICAgYFxuICAgIH1cblxuICAgIGxldCBsZWZ0ID0gJzBweCdcbiAgICBsZXQgcmlnaHQgPSAnMHB4J1xuXG4gICAgaWYgKHNpZGUgIT09ICdub25lJykge1xuICAgICAgaWYgKCFvdmVybGF5ICYmIHNpZGUgIT09ICdyaWdodCcpIHtcbiAgICAgICAgbGVmdCA9IHNpemVcbiAgICAgIH1cbiAgICAgIGlmICghb3ZlcmxheSAmJiBzaWRlID09PSAncmlnaHQnKSB7XG4gICAgICAgIHJpZ2h0ID0gc2l6ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJ0blN0eWxlID0gYnVpbGRlclRoZW1lXG4gICAgICA/IGNzc2BcbiAgICAgIGNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzkwMF19O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNDAwXX07XG4gICAgICBib3JkZXItY29sb3I6ICR7YnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzYwMF19O1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMuYmxhY2t9O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs2MDBdfTtcbiAgICAgIH1cbiAgICBgXG4gICAgICA6IG51bGxcblxuICAgIHJldHVybiBjc3NgXG4gICAgICAke3N0eWxlVXRpbHMudG9CYWNrZ3JvdW5kRW1vdGlvblN0eWxlKHNjcmVlbkpzb24ubWFpbj8uYmFja2dyb3VuZCA/PyB7fSBhcyBhbnkpfTtcbiAgICAgIGxlZnQ6ICR7aXNBYnNvbHV0ZSA/IGxlZnQgOiBudWxsfTtcbiAgICAgIHJpZ2h0OiAke2lzQWJzb2x1dGUgPyByaWdodCA6IG51bGx9O1xuICAgICAgbWFyZ2luLWxlZnQ6ICR7IWlzQWJzb2x1dGUgPyBsZWZ0IDogbnVsbH07XG4gICAgICBtYXJnaW4tcmlnaHQ6ICR7IWlzQWJzb2x1dGUgPyByaWdodCA6IG51bGx9O1xuICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgICAgPiAubGF5b3V0IHtcbiAgICAgICAgaGVpZ2h0OiAke3ZpZXdIZWlnaHR9cHggIWltcG9ydGFudDtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICA+IC5sYXlvdXQge1xuICAgICAgICAgIGhlaWdodDogJHtoZWFkZXJIZWlnaHQgPiAwID8gYGNhbGMoMTAwdmggLSAke2hlYWRlckhlaWdodH1weClgIDogJzEwMHZoJ30gIWltcG9ydGFudDtcbiAgICAgICAgICBoZWlnaHQ6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKHZhcigtLXZoKSAqIDEwMCAtICR7aGVhZGVySGVpZ2h0fXB4KWAgOiAnY2FsYyh2YXIoLS12aCkgKiAxMDApJ30gIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuc3BhY2luZy1hcmVhIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuXG4gICAgICAudG9nZ2xlLXZpc2libGUtYnRuIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuXG4gICAgICAgID4gYnV0dG9uIHtcbiAgICAgICAgICAke2J0blN0eWxlfTtcbiAgICAgICAgICBzdmcge1xuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwO1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgY29uc3QgY2xhenpOYW1lID0gY2xhc3NOYW1lcygnc2NyZWVuLW1haW4tcGFuZWwnLCB7XG4gICAgJ2lzLWFjdGl2ZSc6IGlzQWN0aXZlLFxuICAgICdsYXN0LW9uZSc6IGlzTGFzdFxuICB9KVxuICByZXR1cm4gKFxuICAgIDxQYWdlVmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2lzQWJzb2x1dGUgPyBpc0FjdGl2ZSA6IHRydWV9PlxuICAgICAgPGRpdlxuICAgICAgICBpZD17YCR7cm9vdExheW91dElkfV9zY3JlZW5fJHtzY3JlZW5JZH1gfVxuICAgICAgICBjbGFzc05hbWU9e2NsYXp6TmFtZX1cbiAgICAgICAgY3NzPXtnZXRTdHlsZSgpfVxuICAgICAgICByZWY9e2VsZW1lbnRSZWZ9XG4gICAgICAgIGRhdGEtc2NyZWVuaWQ9e3NjcmVlbklkfVxuICAgICAgICBkYXRhLWluZGV4PXtwcm9wcy5pbmRleH1cbiAgICAgID5cbiAgICAgICAgey8qIHNldCBpc0luV2lkZ2V0IHRvIHRydWUgaW4gb3JkZXIgdG8gbGV0IHRoZSBjbGljayBldmVudCBwcm9wYWdhdGUgKi99XG4gICAgICAgIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXttYWluLmxheW91dH0gaXNJbldpZGdldCAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2luZy1hcmVhJyAvPlxuICAgICAgICB7aXNEZXNpZ25Nb2RlICYmICFwYW5lbFZpc2libGUgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0b2dnbGUtdmlzaWJsZS1idG4nIG9uQ2xpY2s9e3Nob3dQYW5lbH0gZGF0YS10ZXN0aWQ9J3RvZ2dsZUJ0bic+XG4gICAgICAgICAgICA8VGhlbWVkVG9vbHRpcCBwbGFjZW1lbnQ9J2F1dG8nIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdzaG93SW5EZXNpZ25WaWV3Jyl9PlxuICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9J2RlZmF1bHQnIHNpemU9J3NtJyBjbGFzc05hbWU9J3JvdW5kZWQnPlxuICAgICAgICAgICAgICAgIDxWaXNpYmxlT3V0bGluZWQgc2l6ZT0nbScvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVGhlbWVkVG9vbHRpcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvUGFnZVZpc2liaWxpdHlDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJTVN0YXRlLFxuICBSZWFjdFJlc2l6ZURldGVjdG9yLFxuICB0eXBlIElNU2NyZWVuSnNvbixcbiAgU2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gIFNjcmVlblRyaWdnZXJUeXBlLFxuICBjbGFzc05hbWVzLFxuICBnZXRBcHBTdG9yZSxcbiAgbG9kYXNoXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHN0eWxlVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBMYXlvdXRQcm9wcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IHVzZUludGVyc2VjdGlvbiB9IGZyb20gJy4uL3VzZS1pbnRlcnNlY3Rpb24nXG5pbXBvcnQgeyBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSB9IGZyb20gJy4vdHlwZSdcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XG4gIGluZGV4OiBudW1iZXJcbiAgaXNMYXN0OiBib29sZWFuXG4gIHZpZXdIZWlnaHQ/OiBudW1iZXJcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXJcbiAgc2NyZWVuSWQ6IHN0cmluZ1xuICByZWZFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBsYXlvdXRFbnRyeTogUmVhY3QuQ29tcG9uZW50VHlwZTxMYXlvdXRQcm9wcz5cbiAgaXNBY3RpdmU6IGJvb2xlYW5cbiAgdHJhbnNpdGlvblR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlXG4gIHNjcmVlblRyYW5zaXRpb25UeXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZVxuICB0cmlnZ2VyVHlwZTogU2NyZWVuVHJpZ2dlclR5cGVcbiAgc3RyZXRjaGVkOiBib29sZWFuXG4gIHZlcnRpY2FsU3BhY2U6IHN0cmluZ1xuICBpc1NtYWxsU2l6ZTogYm9vbGVhblxuICBvbkhlaWdodENoYW5nZTogKGluZGV4OiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uSW50ZXJjdGlvbkNoYW5nZTogKGluZGV4OiBudW1iZXIsIGlzSW50ZXJzZWN0aW5nOiBib29sZWFuKSA9PiB2b2lkXG59XG5cbmNvbnN0IE1JTl9QQU5FTF9SQVRJTyA9IDAuMjVcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpZGVQYW5lbFN0eWxlIChcbiAgcHJvcHM6IElNU2NyZWVuSnNvbixcbiAgdmlld0hlaWdodDogbnVtYmVyLFxuICBoZWFkZXJIZWlnaHQ6IG51bWJlcixcbiAgaXNBY3RpdmU6IGJvb2xlYW4sXG4gIHZlcnRpY2FsU3BhY2U6IHN0cmluZyxcbiAgc3RyZXRjaGVkOiBib29sZWFuLFxuICB0cmFuc2l0aW9uVHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gIHNjcmVlblRyYW5zaXRpb25UeXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZSxcbiAgaXNTbWFsbFNpemU6IGJvb2xlYW5cbikge1xuICBjb25zdCB7IHNpZGUsIHNpemUsIG9mZnNldCwgYmFja2dyb3VuZCwgb3ZlcmxheSA9IHRydWUsIHBhZGRpbmcgfSA9IHByb3BzLnBhbmVsIHx8IHt9XG4gIGNvbnN0IGlzUlRMID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbnRleHQuaXNSVExcbiAgY29uc3QgZmFjdG9yID0gaXNSVEwgPyAoc2lkZSA9PT0gJ2xlZnQnID8gJy0nIDogJycpIDogKHNpZGUgPT09ICdyaWdodCcgPyAnLScgOiAnJylcbiAgY29uc3QgYmFja2dyb3VuZFN0eWxlID0gc3R5bGVVdGlscy50b0JhY2tncm91bmRFbW90aW9uU3R5bGUoYmFja2dyb3VuZCA/PyAoe30gYXMgYW55KSlcbiAgY29uc3Qgc3BhY2luZyA9IHBhcnNlRmxvYXQodmVydGljYWxTcGFjZSlcblxuICBpZiAoaXNTbWFsbFNpemUpIHtcbiAgICAvLyBvdmVybGF5ID09PSBmYWxzZVxuICAgIGNvbnN0IGRvY2tlZCA9ICFvdmVybGF5XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIG9wYWNpdHk6ICR7dHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGUgPyAoaXNBY3RpdmUgPyAnMScgOiAnMC41JykgOiBudWxsfTtcbiAgICAgIG1pbi1oZWlnaHQ6ICR7c2NyZWVuVHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkNvdmVyID8gYCR7dmlld0hlaWdodH1weGAgOiBudWxsfTtcbiAgICAgIHBhZGRpbmctdG9wOiAke3NjcmVlblRyYW5zaXRpb25UeXBlICE9PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlICYmIGRvY2tlZCA/IGAke01hdGgucm91bmQodmlld0hlaWdodCAqIFNDUkVFTl9SQVRJT19JTl9TTUFMTF9TSVpFKX1weGAgOiBudWxsfTtcblxuICAgICAgJi50b3Atc3BhY2luZyA+IC5wYW5lbC1jb250ZW50IHtcbiAgICAgICAgLyogbWFyZ2luLXRvcDogJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSl9cHg7ICovXG4gICAgICB9XG5cbiAgICAgIC5wYW5lbC1jb250ZW50IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICR7b3ZlcmxheSA/ICcnIDogYmFja2dyb3VuZFN0eWxlfTtcbiAgICAgICAgLyogbWFyZ2luLXRvcDogJHt0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuUHVzaCA/ICcke01hdGgucm91bmQodmlld0hlaWdodCAqIFNDUkVFTl9SQVRJT19JTl9TTUFMTF9TSVpFKX1weCcgOiAndW5zZXQnfTsgKi9cblxuICAgICAgICA+IC5sYXlvdXQsID4gLmxheW91dC13cmFwcGVyID4gLmxheW91dCB7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgJHtvdmVybGF5ID8gYmFja2dyb3VuZFN0eWxlIDogJyd9O1xuICAgICAgICAgIG1pbi1oZWlnaHQ6ICR7TWF0aC5yb3VuZCh2aWV3SGVpZ2h0ICogTUlOX1BBTkVMX1JBVElPKX1weDtcbiAgICAgICAgICBwYWRkaW5nOiAke3N0eWxlVXRpbHMudG9DU1NQYWRkaW5nKHBhZGRpbmcpfTtcbiAgICAgICAgfVxuXG4gICAgICAgID4gLmxheW91dC13cmFwcGVyID4gLmNvbHVtbi1sYXlvdXQgPiAudHJhaWwtY29udGFpbmVyLFxuICAgICAgICA+IC5jb2x1bW4tbGF5b3V0ID4gLnRyYWlsLWNvbnRhaW5lciB7XG4gICAgICAgICAgb3ZlcmZsb3cteTogaGlkZGVuO1xuICAgICAgICB9XG5cbiAgICAgICAgPiAubGF5b3V0LXdyYXBwZXIgPiAucGxhY2Vob2xkZXItYnRuIHtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgICAke292ZXJsYXkgPyBiYWNrZ3JvdW5kU3R5bGUgOiAnJ307XG4gICAgICAgIH1cblxuICAgICAgICAucGFuZWwtc3BhY2luZyB7XG4gICAgICAgICAgaGVpZ2h0OiAke01hdGgucm91bmQodmlld0hlaWdodCAqIHNwYWNpbmcgLyAxMDApfXB4O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5wYW5lbC1jb250ZW50LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgd2lkdGg6IDFweDtcbiAgICAgICAgbWluLWhlaWdodDogJHt2aWV3SGVpZ2h0fXB4O1xuICAgICAgfVxuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICBtaW4taGVpZ2h0OiAke3NjcmVlblRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5Db3ZlciA/ICcxMDB2aCcgOiBudWxsfTtcbiAgICAgICAgbWluLWhlaWdodDogJHtzY3JlZW5UcmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuQ292ZXIgPyAnY2FsYyh2YXIoLS12aCkgKiAxMDApJyA6IG51bGx9O1xuICAgICAgICBwYWRkaW5nLXRvcDogJHtzY3JlZW5UcmFuc2l0aW9uVHlwZSAhPT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZSAmJiBkb2NrZWQgPyBgJHsxMDAgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRX12aGAgOiBudWxsfTtcbiAgICAgICAgcGFkZGluZy10b3A6ICR7c2NyZWVuVHJhbnNpdGlvblR5cGUgIT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGUgJiYgZG9ja2VkID8gYGNhbGModmFyKC0tdmgpICogJHsxMDAgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRX0pYCA6IG51bGx9O1xuXG4gICAgICAgID4gLmxheW91dCwgPiAubGF5b3V0LXdyYXBwZXIgPiAubGF5b3V0IHtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAke01hdGgucm91bmQoMTAwICogTUlOX1BBTkVMX1JBVElPKX12aDtcbiAgICAgICAgICBtaW4taGVpZ2h0OiBjYWxjKHZhcigtLXZoKSAqICR7TWF0aC5yb3VuZCgxMDAgKiBNSU5fUEFORUxfUkFUSU8pfSk7XG4gICAgICAgIH1cblxuICAgICAgICAucGFuZWwtY29udGVudC1wbGFjZWhvbGRlciB7XG4gICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgICAgICAgbWluLWhlaWdodDogY2FsYyh2YXIoLS12aCkgKiAxMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLXNwYWNpbmcge1xuICAgICAgICAgIGhlaWdodDogJHtzcGFjaW5nfXZoO1xuICAgICAgICAgIGhlaWdodDogY2FsYyh2YXIoLS12aCkgKiAke3NwYWNpbmd9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIHJldHVybiBjc3NgXG4gICAgd2lkdGg6IDEwMCU7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogJHtzaWRlID09PSAncmlnaHQnID8gJ3Jvdy1yZXZlcnNlJyA6ICdyb3cnfTtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6ICR7c2lkZSA9PT0gJ2NlbnRlcicgJiYgb3ZlcmxheSA/ICdjZW50ZXInIDogJ2ZsZXgtc3RhcnQnfTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgb3BhY2l0eTogJHt0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZSA/IChpc0FjdGl2ZSA/ICcxJyA6ICcwLjUnKSA6IG51bGx9O1xuXG4gICAgJi50b3Atc3BhY2luZyA+IC5wYW5lbC1jb250ZW50IHtcbiAgICAgIC8qIG1hcmdpbi10b3A6ICR7TWF0aC5yb3VuZCh2aWV3SGVpZ2h0ICogMiAvIDMpfXB4OyAqL1xuICAgIH1cblxuICAgIC5wYW5lbC1jb250ZW50IHtcbiAgICAgIHdpZHRoOiAke3NpemV9O1xuICAgICAgdHJhbnNmb3JtOiAke292ZXJsYXkgJiYgTWF0aC5hYnMocGFyc2VGbG9hdChvZmZzZXQpKSA+IDAgPyBgdHJhbnNsYXRlWCgke2ZhY3Rvcn0ke29mZnNldH0pYCA6IG51bGx9O1xuICAgICAgZmxleDogMCBhdXRvO1xuICAgICAgbWluLWhlaWdodDogJHtzdHJldGNoZWQgPyBgJHt2aWV3SGVpZ2h0fXB4YCA6ICd1bnNldCd9O1xuICAgICAgJHtvdmVybGF5ID8gJycgOiBiYWNrZ3JvdW5kU3R5bGV9O1xuXG4gICAgICA+IC5sYXlvdXQsXG4gICAgICA+IC5sYXlvdXQtd3JhcHBlciA+IC5sYXlvdXQge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgJHtvdmVybGF5ID8gYmFja2dyb3VuZFN0eWxlIDogJyd9O1xuICAgICAgICBtaW4taGVpZ2h0OiAke01hdGgucm91bmQodmlld0hlaWdodCAqIE1JTl9QQU5FTF9SQVRJTyl9cHg7XG4gICAgICAgIHBhZGRpbmc6ICR7c3R5bGVVdGlscy50b0NTU1BhZGRpbmcocGFkZGluZyl9O1xuICAgICAgfVxuXG4gICAgICA+IC5sYXlvdXQtd3JhcHBlciA+IC5jb2x1bW4tbGF5b3V0ID4gLnRyYWlsLWNvbnRhaW5lcixcbiAgICAgID4gLmNvbHVtbi1sYXlvdXQgPiAudHJhaWwtY29udGFpbmVyIHtcbiAgICAgICAgb3ZlcmZsb3cteTogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICA+IC5sYXlvdXQtd3JhcHBlciA+IC5wbGFjZWhvbGRlci1idG4ge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgJHtvdmVybGF5ID8gYmFja2dyb3VuZFN0eWxlIDogJyd9O1xuICAgICAgfVxuXG4gICAgICAucGFuZWwtc3BhY2luZyB7XG4gICAgICAgIGhlaWdodDogJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBzcGFjaW5nIC8gMTAwKX1weDtcblxuICAgICAgICAmLmxhc3QtaXRlbSB7XG4gICAgICAgICAgaGVpZ2h0OiAke3N0cmV0Y2hlZCA/IGAke01hdGgucm91bmQodmlld0hlaWdodCAqIHNwYWNpbmcgLyAxMDApfWAgOiB2aWV3SGVpZ2h0fXB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnBhbmVsLWNvbnRlbnQtcGxhY2Vob2xkZXIge1xuICAgICAgd2lkdGg6IDFweDtcbiAgICAgIG1pbi1oZWlnaHQ6ICR7c3RyZXRjaGVkID8gdmlld0hlaWdodCA6IE1hdGgucm91bmQodmlld0hlaWdodCAqIE1JTl9QQU5FTF9SQVRJTyl9cHg7XG4gICAgfVxuXG4gICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICYudG9wLXNwYWNpbmcgPiAucGFuZWwtY29udGVudCB7XG4gICAgICAgIC8qIG1hcmdpbi10b3A6ICR7NjYuN312aDsgKi9cbiAgICAgIH1cblxuICAgICAgLnBhbmVsLWNvbnRlbnQge1xuICAgICAgICBtaW4taGVpZ2h0OiAke3N0cmV0Y2hlZCA/IChoZWFkZXJIZWlnaHQgPiAwID8gYGNhbGMoMTAwdmggLSAke2hlYWRlckhlaWdodH1weClgIDogJzEwMHZoJykgOiAndW5zZXQnfTtcbiAgICAgICAgbWluLWhlaWdodDogJHtzdHJldGNoZWQgPyAoaGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKHZhcigtLXZoKSAqIDEwMCAtICR7aGVhZGVySGVpZ2h0fXB4KWAgOiAnY2FsYyh2YXIoLS12aCkgKiAxMDApJykgOiAndW5zZXQnfTtcbiAgICAgICAgPiAubGF5b3V0LCA+IC5sYXlvdXQtd3JhcHBlciA+IC5sYXlvdXQge1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IHVuc2V0O1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLXNwYWNpbmcge1xuICAgICAgICAgIGhlaWdodDogJHtzcGFjaW5nfXZoO1xuICAgICAgICAgIGhlaWdodDogY2FsYyh2YXIoLS12aCkgKiAke3NwYWNpbmd9KTtcblxuICAgICAgICAgICYubGFzdC1pdGVtIHtcbiAgICAgICAgICAgIGhlaWdodDogJHtzdHJldGNoZWQgPyBzcGFjaW5nIDogMTAwfXZoO1xuICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLXZoKSAqICR7c3RyZXRjaGVkID8gc3BhY2luZyA6IDEwMH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLnBhbmVsLWNvbnRlbnQtcGxhY2Vob2xkZXIge1xuICAgICAgICBtaW4taGVpZ2h0OiAke3N0cmV0Y2hlZCA/ICcxMDAnIDogTWF0aC5yb3VuZCgxMDAgKiBNSU5fUEFORUxfUkFUSU8pfXZoO1xuICAgICAgICBtaW4taGVpZ2h0OiBjYWxjKHZhcigtLXZoKSAqICR7c3RyZXRjaGVkID8gJzEwMCcgOiBNYXRoLnJvdW5kKDEwMCAqIE1JTl9QQU5FTF9SQVRJTyl9KTtcbiAgICAgIH1cbiAgICB9XG4gIGBcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzICovXG5leHBvcnQgZnVuY3Rpb24gU2NyZWVuU2lkZVBhbmVsIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGluZGV4LFxuICAgIHNjcmVlbklkLFxuICAgIG9uSW50ZXJjdGlvbkNoYW5nZSxcbiAgICBvbkhlaWdodENoYW5nZSxcbiAgICB2aWV3SGVpZ2h0LFxuICAgIGhlYWRlckhlaWdodCxcbiAgICBsYXlvdXRFbnRyeTogTGF5b3V0RW50cnksXG4gICAgaXNBY3RpdmUsXG4gICAgaXNTbWFsbFNpemUsXG4gICAgdHJhbnNpdGlvblR5cGUsXG4gICAgc2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gICAgdHJpZ2dlclR5cGUsXG4gICAgc3RyZXRjaGVkLFxuICAgIHZlcnRpY2FsU3BhY2UgPSAnMCdcbiAgfSA9IHByb3BzXG4gIGNvbnN0IHNjcmVlbkpzb246IElNU2NyZWVuSnNvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy5zY3JlZW5zW3NjcmVlbklkXVxuICB9KVxuICBjb25zdCB7IHBhbmVsIH0gPSBzY3JlZW5Kc29uXG4gIGNvbnN0IGVsZW1lbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3QgW2xvYWRlZCwgc2V0TG9hZGVkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBoYW5kbGVIZWlnaHRDaGFuZ2VSZWYgPSBSZWFjdC51c2VSZWY8KGluZGV4OiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB2b2lkPigpXG5cbiAgY29uc3QgaW50ZXJzZWN0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKGlzSW50ZXJzZWN0aW5nOiBib29sZWFuKSA9PiB7XG4gICAgICBvbkludGVyY3Rpb25DaGFuZ2UoaW5kZXgsIGlzSW50ZXJzZWN0aW5nKVxuICAgIH0sXG4gICAgW2luZGV4LCBvbkludGVyY3Rpb25DaGFuZ2VdXG4gIClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGhhbmRsZUhlaWdodENoYW5nZVJlZi5jdXJyZW50ID0gbG9kYXNoLmRlYm91bmNlKG9uSGVpZ2h0Q2hhbmdlLCAyMDApXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIChoYW5kbGVIZWlnaHRDaGFuZ2VSZWYuY3VycmVudCBhcyBhbnkpPy5jYW5jZWwoKVxuICAgIH1cbiAgfSwgW29uSGVpZ2h0Q2hhbmdlXSlcblxuICBjb25zdCBvblNpemVDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAod2lkdGgsIGhlaWdodCkgPT4ge1xuICAgICAgaGFuZGxlSGVpZ2h0Q2hhbmdlUmVmLmN1cnJlbnQ/LihpbmRleCwgaGVpZ2h0KVxuICAgIH0sXG4gICAgW2luZGV4XVxuICApXG5cbiAgdXNlSW50ZXJzZWN0aW9uKFxuICAgIGVsZW1lbnRSZWYuY3VycmVudCxcbiAgICBwcm9wcy5yZWZFbGVtZW50LFxuICAgIGlzU21hbGxTaXplID8gU2NyZWVuVHJpZ2dlclR5cGUuTG93ZXIgOiAodHJpZ2dlclR5cGUgPz8gU2NyZWVuVHJpZ2dlclR5cGUuQm90dG9tKSxcbiAgICBpbnRlcnNlY3Rpb25DaGFuZ2VcbiAgKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0TG9hZGVkKHRydWUpXG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzY3JlZW4tc2lkZS1wYW5lbCcsIHtcbiAgICAgICAgJ3RvcC1zcGFjaW5nJzogaW5kZXggPT09IDAgJiYgKHNjcmVlbkpzb24ucGFuZWw/Lm92ZXJsYXkgfHwgaXNTbWFsbFNpemUpXG4gICAgICB9KX1cbiAgICAgIGRhdGEtc2NyZWVuaWQ9e3NjcmVlbklkfVxuICAgICAgZGF0YS1pbmRleD17aW5kZXh9XG4gICAgICByZWY9e2VsZW1lbnRSZWZ9XG4gICAgICBjc3M9e2dldFNpZGVQYW5lbFN0eWxlKHNjcmVlbkpzb24sIHZpZXdIZWlnaHQsIGhlYWRlckhlaWdodCwgaXNBY3RpdmUsIHZlcnRpY2FsU3BhY2UsIHN0cmV0Y2hlZCB8fCBwYW5lbCA9PSBudWxsLCB0cmFuc2l0aW9uVHlwZSwgc2NyZWVuVHJhbnNpdGlvblR5cGUsIGlzU21hbGxTaXplKX1cbiAgICA+XG4gICAgICB7cGFuZWwgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtY29udGVudCc+XG4gICAgICAgICAgPExheW91dEVudHJ5IGxheW91dHM9e3BhbmVsLmxheW91dH0gLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncGFuZWwtc3BhY2luZycsIHsgJ2xhc3QtaXRlbSc6IHByb3BzLmlzTGFzdCB9KX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgeyFwYW5lbCAmJiA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtY29udGVudC1wbGFjZWhvbGRlcicgLz59XG4gICAgICA8UmVhY3RSZXNpemVEZXRlY3RvciBoYW5kbGVIZWlnaHQgb25SZXNpemU9e29uU2l6ZUNoYW5nZX0gLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiZXhwb3J0IGNvbnN0IFNDUkVFTl9SQVRJT19JTl9TTUFMTF9TSVpFID0gMC4zM1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfSEVBREVSX0hFSUdIVCA9IDc1XG4iLCJpbXBvcnQgeyBCcm93c2VyU2l6ZU1vZGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIEZsb3dMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgZ2V0VmFsdWVPZkJCb3gsIGlzUGVyY2VudGFnZSB9IGZyb20gJy4uLy4uL3V0aWxzJ1xuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2NyZWVuSGVpZ2h0IChcbiAgbWFpblBhbmVsQ29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgc2lkZVBhbmVsQ29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbikge1xuICBjb25zdCBzY3JlZW5FbGVtZW50czogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gPSBtYWluUGFuZWxDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnZGl2LnNjcmVlbi1tYWluLXBhbmVsJylcbiAgY29uc3QgcGFuZWxFbGVtZW50cyA9IHNpZGVQYW5lbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdkaXYuc2NyZWVuLXNpZGUtcGFuZWwnKVxuXG4gIGNvbnN0IHNpemUgPSBzY3JlZW5FbGVtZW50cy5sZW5ndGhcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaXplOyBpKyspIHtcbiAgICBjb25zdCBzY3JlZW5JdGVtID0gc2NyZWVuRWxlbWVudHMuaXRlbShpKVxuICAgIGNvbnN0IHByZXZpb3VzSXRlbSA9IHNjcmVlbkVsZW1lbnRzLml0ZW0oaSAtIDEpXG4gICAgY29uc3QgcHJldmlvdXNQYW5lbEl0ZW0gPSBwYW5lbEVsZW1lbnRzLml0ZW0oaSAtIDEpXG4gICAgc2NyZWVuSXRlbS5zdHlsZS5tYXJnaW5Ub3AgPSBgJHtwcmV2aW91c1BhbmVsSXRlbS5jbGllbnRIZWlnaHQgLSBwcmV2aW91c0l0ZW0uY2xpZW50SGVpZ2h0fXB4YFxuICB9XG5cbiAgaWYgKGJyb3dzZXJTaXplTW9kZSAhPT0gQnJvd3NlclNpemVNb2RlLlNtYWxsKSB7XG4gICAgbWFpblBhbmVsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3NpZGVQYW5lbENvbnRhaW5lci5jbGllbnRIZWlnaHR9cHhgXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbEhlaWdodCAobGF5b3V0SXRlbSwgaXRlbVNldHRpbmc6IEZsb3dMYXlvdXRJdGVtU2V0dGluZykge1xuICBjb25zdCBiYm94ID0gbGF5b3V0SXRlbS5iYm94IHx8IHt9IGFzIGFueVxuICBjb25zdCBoZWlnaHQgPSBnZXRWYWx1ZU9mQkJveChiYm94LCAnaGVpZ2h0JylcbiAgaWYgKCFoZWlnaHQgfHwgaXNQZXJjZW50YWdlKGhlaWdodCkpIHtcbiAgICByZXR1cm4gJ2F1dG8nXG4gIH1cbiAgc3dpdGNoIChpdGVtU2V0dGluZy5oZWlnaHRNb2RlKSB7XG4gICAgY2FzZSAnYXV0byc6XG4gICAgICByZXR1cm4gJ2F1dG8nXG4gICAgY2FzZSAnZml4ZWQnOlxuICAgICAgcmV0dXJuIGhlaWdodFxuICB9XG59XG4iLCJpbXBvcnQgeyBEaXN0YW5jZVVuaXRzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgRmxvd0xheW91dFNldHRpbmcsIHR5cGUgRmxvd0xheW91dEl0ZW1TZXR0aW5nIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0ZMT1dfU0VUVElORzogRmxvd0xheW91dFNldHRpbmcgPSB7XG4gIGd1dHRlcjogMCxcbiAgc3R5bGU6IHtcbiAgICBwYWRkaW5nOiB7XG4gICAgICBudW1iZXI6IFswXSxcbiAgICAgIHVuaXQ6ICdweCdcbiAgICB9LFxuICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1zdGFydCcsXG4gICAgYWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuICAgIGJvcmRlclJhZGl1czoge1xuICAgICAgbnVtYmVyOiBbMF0sXG4gICAgICB1bml0OiBEaXN0YW5jZVVuaXRzLlBJWEVMXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0ZMT1dfSVRFTV9TRVRUSU5HOiBGbG93TGF5b3V0SXRlbVNldHRpbmcgPSB7XG4gIGxvY2tQYXJlbnQ6IHRydWUsXG4gIGhlaWdodE1vZGU6ICdhdXRvJyxcbiAgb2Zmc2V0WDogMCxcbiAgb2Zmc2V0WTogMFxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUsIGNyZWF0ZVNlbGVjdG9yIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IFNldHRpbmdTZWN0aW9uLCBTZXR0aW5nUm93IH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBERUZBVUxUX0ZMT1dfU0VUVElORyB9IGZyb20gJy4vZGVmYXVsdC1zZXR0aW5nJ1xuaW1wb3J0IHsgUGFkZGluZywgSW5wdXRVbml0IH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zdHlsZS1zZXR0aW5nLWNvbXBvbmVudHMnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGxheW91dElkOiBzdHJpbmdcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3RhdGVUb1Byb3BzIHtcbiAgc2V0dGluZz86IGFueVxufVxuXG5jb25zdCBpbnB1dFN0eWxlID0geyB3aWR0aDogMTEwIH1cblxuY2xhc3MgRmxvd0xheW91dFNldHRpbmcgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgU3RhdGVUb1Byb3BzPiB7XG4gIHVwZGF0ZVNwYWNlID0gdmFsdWUgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoIWlzTmFOKHZhbHVlLmRpc3RhbmNlKSkge1xuICAgICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0UHJvcGVydHkobGF5b3V0SWQsICdzZXR0aW5nLmd1dHRlcicsIHZhbHVlLmRpc3RhbmNlKS5leGVjKClcbiAgICB9XG4gIH1cblxuICB1cGRhdGVQYWRkaW5nID0gdmFsdWUgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0UHJvcGVydHkobGF5b3V0SWQsICdzZXR0aW5nLnN0eWxlLnBhZGRpbmcnLCB2YWx1ZSkuZXhlYygpXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgZm9ybWF0TWVzc2FnZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHNldHRpbmcgPSB0aGlzLnByb3BzLnNldHRpbmcgfHwge31cbiAgICBjb25zdCBzdHlsZSA9IHNldHRpbmcuc3R5bGUgfHwge31cbiAgICBjb25zdCBndXR0ZXIgPSBzZXR0aW5nLmd1dHRlciA+PSAwID8gc2V0dGluZy5ndXR0ZXIgOiBERUZBVUxUX0ZMT1dfU0VUVElORy5ndXR0ZXJcbiAgICByZXR1cm4gKFxuICAgICAgPFNldHRpbmdTZWN0aW9uXG4gICAgICAgIHJvbGU9J2dyb3VwJ1xuICAgICAgICBjbGFzc05hbWU9J2Zsb3ctbGF5b3V0LXNldHRpbmcnXG4gICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdsYXlvdXQnKX1cbiAgICAgICAgYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZSgnbGF5b3V0Jyl9XG4gICAgICA+XG4gICAgICAgIDxTZXR0aW5nUm93IGxhYmVsPXtmb3JtYXRNZXNzYWdlKCdnYXAnKX0+XG4gICAgICAgICAgPElucHV0VW5pdFxuICAgICAgICAgICAgc3R5bGU9e2lucHV0U3R5bGV9XG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCdnYXAnKX1cbiAgICAgICAgICAgIG1pbj17MH1cbiAgICAgICAgICAgIHZhbHVlPXt7IGRpc3RhbmNlOiBndXR0ZXIsIHVuaXQ6IHVuZGVmaW5lZCB9fVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlU3BhY2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICA8U2V0dGluZ1JvdyBmbG93PSd3cmFwJyByb2xlPSdncm91cCcgbGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ3BhZGRpbmcnKX0gYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZSgncGFkZGluZycpfT5cbiAgICAgICAgICA8UGFkZGluZyB2YWx1ZT17c3R5bGUucGFkZGluZ30gb25DaGFuZ2U9e3RoaXMudXBkYXRlUGFkZGluZ30gLz5cbiAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICApXG4gIH1cbn1cblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gY3JlYXRlU2VsZWN0b3IoXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IFByb3BzKSA9PiBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnPy5sYXlvdXRzPy5bb3duUHJvcHMubGF5b3V0SWRdPy5zZXR0aW5nLFxuICBzZXR0aW5nID0+ICh7IHNldHRpbmcgfSlcbilcblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9Qcm9wcywgdW5rbm93biwgUHJvcHM+KG1hcFN0YXRlVG9Qcm9wcykoRmxvd0xheW91dFNldHRpbmcpXG4iLCJpbXBvcnQge1xuICB0eXBlIGV4dGVuc2lvblNwZWMsXG4gIExheW91dFR5cGUsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgQnJvd3NlclNpemVNb2RlLFxuICBJbW11dGFibGUsXG4gIHR5cGUgSU1MYXlvdXRKc29uXG59IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNsYXNzIEZsb3dMYXlvdXRUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIGV4dGVuc2lvblNwZWMuTGF5b3V0VHJhbnNmb3JtZXJFeHRlbnNpb24ge1xuICBpZCA9ICdmbG93LWxheW91dC10cmFuc2Zvcm1lcidcblxuICBsYXlvdXRUeXBlID0gTGF5b3V0VHlwZS5GbG93TGF5b3V0XG5cbiAgdHJhbnNmb3JtTGF5b3V0IChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgZnJvbVNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSk6IElNTGF5b3V0SnNvbiB7XG4gICAgaWYgKGZyb21TaXplTW9kZSAhPT0gdG9TaXplTW9kZSAmJiB0b1NpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGxldCB1cGRhdGVkTGF5b3V0OiBJTUxheW91dEpzb24gPSBJbW11dGFibGUobGF5b3V0KTtcblxuICAgICAgKGxheW91dC5vcmRlciB8fCBbXSkuZm9yRWFjaCgoaXRlbUlkKSA9PiB7XG4gICAgICAgIHVwZGF0ZWRMYXlvdXQgPSB1cGRhdGVkTGF5b3V0LnNldEluKFsnY29udGVudCcsIGl0ZW1JZCwgJ3NldHRpbmcnLCAnaGVpZ2h0TW9kZSddLCAnYXV0bycpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHVwZGF0ZWRMYXlvdXRcbiAgICB9XG5cbiAgICByZXR1cm4gbGF5b3V0XG4gIH1cblxuICB0cmFuc2Zvcm1MYXlvdXRJdGVtIChcbiAgICBpdGVtOiBJTUxheW91dEl0ZW1Kc29uLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgZnJvbUxheW91dElkOiBzdHJpbmcsXG4gICAgdG9MYXlvdXRJZDogc3RyaW5nLFxuICAgIGZyb21TaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICAgIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuICApOiB7IGl0ZW06IElNTGF5b3V0SXRlbUpzb24sIGluZGV4OiBudW1iZXIgfSB7XG4gICAgcmV0dXJuIHsgaW5kZXgsIGl0ZW0gfVxuICB9XG59XG4iLCJpbXBvcnQgeyB0eXBlIElNU3RhdGUsIHR5cGUgSU1MYXlvdXRJdGVtSnNvbiwgTGF5b3V0SXRlbVR5cGUsIHR5cGUgTGF5b3V0SXRlbUpzb24sIGNzcywgdHlwZSBSZWFjdCwgdHlwZSBTZXJpYWxpemVkU3R5bGVzLCBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHN0eWxlVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgaXNSVEwsIGdldFZhbHVlT2ZCQm94IH0gZnJvbSAnLi4vdXRpbHMnXG5pbXBvcnQgeyBmaW5kTGF5b3V0SWQgfSBmcm9tICcuLi9zZWFyY2gvY29udGVudHMnXG5pbXBvcnQgeyB0eXBlIEZsb3dMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVG9GbG93SXRlbVByb3BzIHtcbiAgaXNFbXB0eTogYm9vbGVhblxuICBwYWRkaW5nOiBudW1iZXJcbiAgc2VsZWN0ZWQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNvbnN0IG1hcFN0YXRlVG9GbG93SXRlbVByb3BzOiAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiB7IGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb24sIGxheW91dElkOiBzdHJpbmcgfSkgPT4gU3RhdGVUb0Zsb3dJdGVtUHJvcHMgPSBjcmVhdGVTZWxlY3RvcihbXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IG93blByb3BzXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gc3RhdGUuYXBwUnVudGltZUluZm8/LnNlbGVjdGlvblxuICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBzZWxlY3Rpb24ubGF5b3V0SWQgPT09IG93blByb3BzLmxheW91dElkICYmIHNlbGVjdGlvbi5sYXlvdXRJdGVtSWQgPT09IGxheW91dEl0ZW0uaWRcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IG93blByb3BzXG4gICAgbGV0IHBhZGRpbmcgPSBbMCwgMCwgMCwgMF1cbiAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgIGNvbnN0IHdpZGdldElkID0gbGF5b3V0SXRlbS53aWRnZXRJZFxuICAgICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgICAgaWYgKHdpZGdldEpzb24pIHtcbiAgICAgICAgcGFkZGluZyA9IHN0eWxlVXRpbHMuZXhwYW5kU3R5bGVBcnJheSh3aWRnZXRKc29uLmNvbmZpZz8uc3R5bGU/LnBhZGRpbmc/Lm51bWJlcilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhZGRpbmdbMF0gKyBwYWRkaW5nWzJdIC8vIHRvcCBhbmQgYm90dG9tIHBhZGRpbmcgb2YgaW5uZXIgcm93IHdpZGdldFxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBvd25Qcm9wc1xuICAgIGxldCBpc0VtcHR5ID0gdHJ1ZVxuICAgIGlmIChsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgICAgY29uc3Qgd2lkZ2V0SWQgPSBsYXlvdXRJdGVtLndpZGdldElkXG4gICAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG5cbiAgICAgIGlmICh3aWRnZXRKc29uKSB7XG4gICAgICAgIGNvbnN0IGxheW91dE5hbWUgPSBPYmplY3Qua2V5cyh3aWRnZXRKc29uLmxheW91dHMpWzBdXG4gICAgICAgIGNvbnN0IGxheW91dElkID0gZmluZExheW91dElkKFxuICAgICAgICAgIHdpZGdldEpzb24ubGF5b3V0c1tsYXlvdXROYW1lXSxcbiAgICAgICAgICBzdGF0ZS5icm93c2VyU2l6ZU1vZGUsXG4gICAgICAgICAgc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcblxuICAgICAgICBjb25zdCBsYXlvdXQgPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICAgICAgaWYgKGxheW91dCAmJiBPYmplY3Qua2V5cyhsYXlvdXQuY29udGVudCB8fCBbXSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgIE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50IHx8IFtdKS5zb21lKChpdGVtSWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtpdGVtSWRdXG4gICAgICAgICAgICBpZiAoIWxheW91dEl0ZW0uaXNQZW5kaW5nKSB7XG4gICAgICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZVxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlzRW1wdHlcbiAgfVxuXSwgKHNlbGVjdGVkLCBwYWRkaW5nLCBpc0VtcHR5KSA9PiAoeyBzZWxlY3RlZCwgcGFkZGluZywgaXNFbXB0eSB9KSlcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdpZHRoRnJvbVNldHRpbmcgKHNldHRpbmcpIHtcbiAgY29uc3QgdmFsdWUgPSBwYXJzZUZsb2F0KHNldHRpbmc/LndpZHRoKVxuICBpZiAodmFsdWUgPiAwKSB7XG4gICAgaWYgKGAke3NldHRpbmcud2lkdGh9YC5pbmNsdWRlcygncHgnKSkge1xuICAgICAgcmV0dXJuIGAke01hdGgucm91bmQodmFsdWUpfXB4YFxuICAgIH1cbiAgICByZXR1cm4gYCR7TWF0aC5yb3VuZCh2YWx1ZSl9JWBcbiAgfVxuICByZXR1cm4gJzEwMCUnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVGbG9hdGluZ1Bvc2l0aW9uIChcbiAgbGF5b3V0SXRlbTogTGF5b3V0SXRlbUpzb24gfCBJTUxheW91dEl0ZW1Kc29uLFxuICByZXNpemluZ1Byb3BzOiB7IGRoOiBudW1iZXIsIGR3OiBudW1iZXIsIGlzUmVzaXppbmc6IGJvb2xlYW4sIGluaXRXaWR0aDogbnVtYmVyLCBpbml0SGVpZ2h0OiBudW1iZXIgfSA9IHt9IGFzIGFueVxuKTogU2VyaWFsaXplZFN0eWxlcyB7XG4gIGNvbnN0IHNldHRpbmc6IEZsb3dMYXlvdXRJdGVtU2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZ1xuICBjb25zdCBmbG9hdGluZ0FyZWEgPSBzZXR0aW5nPy5mbG9hdGluZ0FyZWEgPz8gMVxuICBjb25zdCBvZmZzZXRYID0gYCR7c2V0dGluZz8ub2Zmc2V0WCA/PyAwfXB4YFxuICBjb25zdCBvZmZzZXRZID0gYCR7c2V0dGluZz8ub2Zmc2V0WSA/PyAwfXB4YFxuXG4gIGNvbnN0IHsgZGgsIGR3LCBpbml0V2lkdGgsIGluaXRIZWlnaHQsIGlzUmVzaXppbmcgfSA9IHJlc2l6aW5nUHJvcHNcbiAgLy8gdHJhbnNsYXRlWCB3aWxsIG5vdCBiZSBtb2RpZmllZCBieSB0aGUgZW1vdGlvbiBpZiBpdCB1c2VzIGNhbGMoKVxuICBjb25zdCB0cmFuc2xhdGVYID0gaXNSVEwoKSA/IGB0cmFuc2xhdGVYKGNhbGMoNTAlICsgJHtvZmZzZXRYfSkpYCA6IGB0cmFuc2xhdGVYKGNhbGMoLTUwJSArICR7b2Zmc2V0WH0pKWBcblxuICBjb25zdCBwb3M6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB7fVxuICBzd2l0Y2ggKGZsb2F0aW5nQXJlYSkge1xuICAgIGNhc2UgMTogLy8gdG9wLWxlZnRcbiAgICAgIHBvcy5sZWZ0ID0gb2Zmc2V0WFxuICAgICAgcG9zLnRvcCA9IG9mZnNldFlcbiAgICAgIHBvcy50cmFuc2Zvcm0gPSBudWxsXG4gICAgICBicmVha1xuICAgIGNhc2UgMjogLy8gdG9wLWNlbnRlclxuICAgICAgcG9zLmxlZnQgPSAnNTAlJ1xuICAgICAgcG9zLnRvcCA9IG9mZnNldFlcbiAgICAgIHBvcy50cmFuc2Zvcm0gPSB0cmFuc2xhdGVYXG4gICAgICBicmVha1xuICAgIGNhc2UgMzogLy8gdG9wLXJpZ2h0XG4gICAgICBwb3MucmlnaHQgPSBvZmZzZXRYXG4gICAgICBwb3MudG9wID0gb2Zmc2V0WVxuICAgICAgcG9zLnRyYW5zZm9ybSA9IG51bGxcbiAgICAgIGJyZWFrXG4gICAgY2FzZSA0OiAvLyBtaWRkbGUtbGVmdFxuICAgICAgcG9zLmxlZnQgPSBvZmZzZXRYXG4gICAgICBwb3MudG9wID0gJzUwJSdcbiAgICAgIHBvcy50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWShjYWxjKC01MCUgKyAke29mZnNldFl9KSlgXG4gICAgICBicmVha1xuICAgIGNhc2UgNTogLy8gbWlkZGxlLWNlbnRlclxuICAgICAgcG9zLmxlZnQgPSAnNTAlJ1xuICAgICAgcG9zLnRvcCA9ICc1MCUnXG4gICAgICBwb3MudHJhbnNmb3JtID0gYCR7dHJhbnNsYXRlWH0gdHJhbnNsYXRlWShjYWxjKC01MCUgKyAke29mZnNldFl9KSlgXG4gICAgICBicmVha1xuICAgIGNhc2UgNjogLy8gbWlkZGxlLXJpZ2h0XG4gICAgICBwb3MucmlnaHQgPSBvZmZzZXRYXG4gICAgICBwb3MudG9wID0gJzUwJSdcbiAgICAgIHBvcy50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWShjYWxjKC01MCUgKyAke29mZnNldFl9KSlgXG4gICAgICBicmVha1xuICAgIGNhc2UgNzogLy8gYm90dG9tLWxlZnRcbiAgICAgIHBvcy5sZWZ0ID0gb2Zmc2V0WFxuICAgICAgcG9zLmJvdHRvbSA9IG9mZnNldFlcbiAgICAgIHBvcy50cmFuc2Zvcm0gPSBudWxsXG4gICAgICBicmVha1xuICAgIGNhc2UgODogLy8gYm90dG9tLWNlbnRlclxuICAgICAgcG9zLmxlZnQgPSAnNTAlJ1xuICAgICAgcG9zLmJvdHRvbSA9IG9mZnNldFlcbiAgICAgIHBvcy50cmFuc2Zvcm0gPSB0cmFuc2xhdGVYXG4gICAgICBicmVha1xuICAgIGNhc2UgOTogLy8gYm90dG9tLXJpZ2h0XG4gICAgICBwb3MucmlnaHQgPSBvZmZzZXRYXG4gICAgICBwb3MuYm90dG9tID0gb2Zmc2V0WVxuICAgICAgcG9zLnRyYW5zZm9ybSA9IG51bGxcbiAgICAgIGJyZWFrXG4gIH1cbiAgcmV0dXJuIGNzc2BcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgei1pbmRleDogMTtcbiAgICB3aWR0aDogJHtpc1Jlc2l6aW5nID8gYCR7aW5pdFdpZHRoICsgZHd9cHhgIDogZ2V0VmFsdWVPZkJCb3gobGF5b3V0SXRlbS5iYm94LCAnd2lkdGgnKX07XG4gICAgaGVpZ2h0OiAke2lzUmVzaXppbmcgPyBgJHtpbml0SGVpZ2h0ICsgZGh9cHhgIDogZ2V0VmFsdWVPZkJCb3gobGF5b3V0SXRlbS5iYm94LCAnaGVpZ2h0Jyl9O1xuICAgIGxlZnQ6ICR7cG9zLmxlZnR9O1xuICAgIHJpZ2h0OiAke3Bvcy5yaWdodH07XG4gICAgdG9wOiAke3Bvcy50b3B9O1xuICAgIGJvdHRvbTogJHtwb3MuYm90dG9tfTtcbiAgICB0cmFuc2Zvcm06ICR7cG9zLnRyYW5zZm9ybX07XG4gIGBcbn1cbiIsImltcG9ydCB7IFJlYWN0LCBTY3JlZW5UcmlnZ2VyVHlwZSB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IElOVEVSU0VDVElPTl9IRUlHSFQgPSAyIC8vIGluIHBlcmNlbnRhZ2VcblxuZnVuY3Rpb24gYnVpbGRUaHJlc2hvbGRMaXN0ICgpIHtcbiAgY29uc3Qgc3RlcCA9IDEwMFxuICBjb25zdCByZXN1bHQgPSBbMF1cbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gc3RlcDsgaSsrKSB7XG4gICAgcmVzdWx0LnB1c2goaSAvIHN0ZXApXG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5mdW5jdGlvbiBnZXRSb290TWFyZ2luICh0cmlnZ2VyVHlwZTogU2NyZWVuVHJpZ2dlclR5cGUpIHtcbiAgc3dpdGNoICh0cmlnZ2VyVHlwZSkge1xuICAgIGNhc2UgU2NyZWVuVHJpZ2dlclR5cGUuVG9wOlxuICAgICAgcmV0dXJuIGAwJSAwJSAtJHsxMDAgLSBJTlRFUlNFQ1RJT05fSEVJR0hUfSUgMCVgXG4gICAgY2FzZSBTY3JlZW5UcmlnZ2VyVHlwZS5Cb3R0b206XG4gICAgICAvLyBtYWtlIGEgbGl0dGxlIHNwYWNlIGJldHdlZW4gdGhlIGJvdHRvbSBpbiBvcmRlciB0byB0cmlnZ2VyIHNjcmVlbiBvdXRcbiAgICAgIHJldHVybiBgLSR7MTAwIC0gSU5URVJTRUNUSU9OX0hFSUdIVH0lIDAlIC0ycHggMCVgXG4gICAgY2FzZSBTY3JlZW5UcmlnZ2VyVHlwZS5VcHBlcjpcbiAgICAgIHJldHVybiBgLSR7MTAwIC8gMyAtIElOVEVSU0VDVElPTl9IRUlHSFQgLyAyfSUgMCUgLSR7MjAwIC8gMyAtIElOVEVSU0VDVElPTl9IRUlHSFQgLyAyfSUgMCVgXG4gICAgY2FzZSBTY3JlZW5UcmlnZ2VyVHlwZS5Mb3dlcjpcbiAgICAgIHJldHVybiBgLSR7MjAwIC8gMyAtIElOVEVSU0VDVElPTl9IRUlHSFQgLyAyfSUgMCUgLSR7MTAwIC8gMyAtIElOVEVSU0VDVElPTl9IRUlHSFQgLyAyfSUgMCVgXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcmVmXG4gKiBAcGFyYW0gcm9vdEVsZW1lbnRcbiAqIEBwYXJhbSBvbkludGVyc2VjdGlvbkNoYW5nZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlSW50ZXJzZWN0aW9uIChcbiAgcmVmOiBIVE1MRWxlbWVudCxcbiAgcm9vdEVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICB0cmlnZ2VyVHlwZTogU2NyZWVuVHJpZ2dlclR5cGUsXG4gIG9uSW50ZXJzZWN0aW9uQ2hhbmdlOiAoaXNJbnRlcnNlY3Rpbmc6IGJvb2xlYW4pID0+IHZvaWRcbikge1xuICBjb25zdCBvYnNlcnZlclJlZiA9IFJlYWN0LnVzZVJlZjxJbnRlcnNlY3Rpb25PYnNlcnZlcj4oKVxuICBjb25zdCBsYXN0SW50ZXJzZWN0aW5nID0gUmVhY3QudXNlUmVmPGJvb2xlYW4+KClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChvYnNlcnZlclJlZi5jdXJyZW50KSB7XG4gICAgICBvYnNlcnZlclJlZi5jdXJyZW50LnVub2JzZXJ2ZShyZWYpXG4gICAgICBvYnNlcnZlclJlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUludGVyc2VjdGlvbkNoYW5nZSA9IChlbnRyeTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSkgPT4ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGlzIGV2ZW50IG1heSBiZSB0cmlnZ2VkIGxhdGVyIHRoYW4gdGhlIGludGVyc2VjdGluZyB0aW1lLlxuICAgICAgICogRm9yIGV4YW1wbGUsIHRoZSB0d28gcmVjdHMgbWF5IGxvb2tzIGxpa2UgdGhlIGZvbGxvd2luZyB3aGVuXG4gICAgICAgKiBpbnRlcmN0aW9uIGNoYW5nZSBldmVudCBpcyBmaXJlZC5cbiAgICAgICAqICAgICAgICAgICAgICAgLS0tLS0tLS0tLS0tIHJlY3QudG9wXG4gICAgICAgKiAgICAgICAgICAgICAgIHwgICAgICAgICAgfFxuICAgICAgICogICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcm9vdFJlY3QudG9wXG4gICAgICAgKiAgICAgICAgICB8ICAgIHwgICAgICAgICAgfCAgICAgfFxuICAgICAgICogICAgICAgICAgfCAgICB8ICAgICAgICAgIHwgICAgIHxcbiAgICAgICAqICAgICAgICAgIHwgICAgfCAgICAgICAgICB8ICAgICB8XG4gICAgICAgKiAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSByb290UmVjdC5ib3R0b21cbiAgICAgICAqICAgICAgICAgICAgICAgfCAgICAgICAgICB8XG4gICAgICAgKiAgICAgICAgICAgICAgIHwgICAgICAgICAgfFxuICAgICAgICogICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0gcmVjdC5ib3R0b21cbiAgICAgICAqL1xuICAgICAgY29uc3QgcmVjdCA9IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdFxuICAgICAgY29uc3Qgcm9vdFJlY3QgPSBlbnRyeS5yb290Qm91bmRzXG4gICAgICBjb25zdCBpc1RvcEludGVyc2VjdGluZyA9IE1hdGguYWJzKHJlY3QuYm90dG9tIC0gcm9vdFJlY3QudG9wKSA+PSBNYXRoLmFicyhyZWN0LnRvcCAtIHJvb3RSZWN0LnRvcClcblxuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgIGxhc3RJbnRlcnNlY3RpbmcuY3VycmVudCA9IHRydWVcbiAgICAgICAgaWYgKGlzVG9wSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgb25JbnRlcnNlY3Rpb25DaGFuZ2UodHJ1ZSlcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChsYXN0SW50ZXJzZWN0aW5nLmN1cnJlbnQpIHtcbiAgICAgICAgbGFzdEludGVyc2VjdGluZy5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgaWYgKGlzVG9wSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgb25JbnRlcnNlY3Rpb25DaGFuZ2UoZmFsc2UpXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVmICYmIHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc3QgaGFuZGxlciA9IChlbnRyaWVzOiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5W10pID0+IHtcbiAgICAgICAgaGFuZGxlSW50ZXJzZWN0aW9uQ2hhbmdlKGVudHJpZXNbMF0pXG4gICAgICB9XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgaGFuZGxlcixcbiAgICAgICAge1xuICAgICAgICAgIHRocmVzaG9sZDogYnVpbGRUaHJlc2hvbGRMaXN0KCksXG4gICAgICAgICAgcm9vdDogcm9vdEVsZW1lbnQgfHwgZG9jdW1lbnQsXG4gICAgICAgICAgcm9vdE1hcmdpbjogZ2V0Um9vdE1hcmdpbih0cmlnZ2VyVHlwZSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShyZWYpXG4gICAgICBvYnNlcnZlclJlZi5jdXJyZW50ID0gb2JzZXJ2ZXJcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudC51bm9ic2VydmUocmVmKVxuICAgICAgICBvYnNlcnZlclJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfSwgW3JlZiwgcm9vdEVsZW1lbnQsIG9uSW50ZXJzZWN0aW9uQ2hhbmdlLCB0cmlnZ2VyVHlwZV0pXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICBBcHBNb2RlLFxuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICBnZXRBcHBTdG9yZSxcbiAgQnJvd3NlclNpemVNb2RlLFxuICBob29rcyxcbiAgTGF5b3V0SXRlbVR5cGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFRlbXBsYXRlU2VsZWN0b3IsIFdpZGdldExpc3RQb3BwZXIgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiwgYXBwQnVpbGRlclN5bmMgfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgZ2V0R3JpZFRlbXBsYXRlcywgZ2V0RnVsbFNjcmVlbkdyaWRQYWdlVGVtcGxhdGVzIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlci90ZW1wbGF0ZXMnXG5pbXBvcnQgeyB0eXBlIFBhZ2VDb250ZXh0UHJvcHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBUaGVtZWRUb29sdGlwIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90aGVtZS10b29sdGlwJ1xuaW1wb3J0IHsgdXBkYXRlTGF5b3V0QW5kU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tbGF5b3V0LWFjdGlvbnMnXG5pbXBvcnQgeyBQbHVzT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9wbHVzJ1xuaW1wb3J0IHsgR3JpZFRlbXBsYXRlT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2FwcGxpY2F0aW9uL2dyaWQtdGVtcGxhdGUnXG5cbmNvbnN0IGJ1dHRvblN0eWxlID0gY3NzYFxuICBwb2ludGVyLWV2ZW50czogYXV0bztcbmBcblxuZnVuY3Rpb24gZ2V0U3R5bGUgKGlzR3JpZFBhZ2U6IGJvb2xlYW4pIHtcbiAgcmV0dXJuIGNzc2BcbiAgICBib2R5LmxvY2stbGF5b3V0ICYsXG4gICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGhlaWdodDogJHtpc0dyaWRQYWdlID8gJzIwMHB4JyA6ICcxMDAlJ307XG4gICAgcGFkZGluZzogMXJlbTtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMTtcbiAgICAuYnRuLXRleHQge1xuICAgICAgbGluZS1oZWlnaHQ6IDMycHg7XG4gICAgfVxuICAgIC5idG4ge1xuICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgfVxuICAgIC5hY3Rpb24taXRlbSB7XG4gICAgICB3aWR0aDogMzJweDtcbiAgICB9XG4gICAgLmFjdGlvbi1zZXByYXRvciB7XG4gICAgICB3aWR0aDogMzAwcHg7XG4gICAgICBoZWlnaHQ6IDFweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0LTMwMCk7XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQmxvY2tQcm9wcyB7XG4gIGxheW91dElkOiBzdHJpbmdcbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHNcbiAgb25UZW1wbGF0ZVNlbGVjdGVkOiAodGVtcGxhdGVCbG9ja0pzb24pID0+IHZvaWRcbiAgb25QYWdlVGVtcGxhdGVTZWxlY3RlZDogKHRlbXBsYXRlUGFnZUpzb24pID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFjdGlvbkJsb2NrIChwcm9wczogQWN0aW9uQmxvY2tQcm9wcykge1xuICBjb25zdCB7XG4gICAgbGF5b3V0SWQsXG4gICAgcGFnZUNvbnRleHQsXG4gICAgb25UZW1wbGF0ZVNlbGVjdGVkLFxuICAgIG9uUGFnZVRlbXBsYXRlU2VsZWN0ZWRcbiAgfSA9IHByb3BzXG4gIGNvbnN0IHsgZm9ybWF0TWVzc2FnZSwgcm9vdExheW91dElkIH0gPSBwYWdlQ29udGV4dFxuICBjb25zdCBbc2hvd1RlbXBsYXRlUG9wcGVyLCBzZXRTaG93VGVtcGxhdGVQb3BwZXJdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtzaG93UGFnZVRlbXBsYXRlUG9wcGVyLCBzZXRTaG93UGFnZVRlbXBsYXRlUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbc2hvd1dpZGdldFBvcHBlciwgc2V0U2hvd1dpZGdldFBvcHBlcl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgaXNHcmlkUGFnZSA9IGxheW91dElkID09PSByb290TGF5b3V0SWRcblxuICBjb25zdCBwbGFjZWhvbGRlclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgdGVtcGxhdGVSZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IHBhZ2VUZW1wbGF0ZVJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3Qgc2hvdyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbG9ja0xheW91dCA9IHN0YXRlLmFwcENvbmZpZz8uZm9yQnVpbGRlckF0dHJpYnV0ZXM/LmxvY2tMYXlvdXQgPz8gZmFsc2VcbiAgICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBzdGF0ZS5hcHBSdW50aW1lSW5mby5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuICAgIHJldHVybiBpc0Rlc2lnbk1vZGUgJiYgIWxvY2tMYXlvdXRcbiAgfSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBpZiAoIWlzR3JpZFBhZ2UgJiYgZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmJyb3dzZXJTaXplTW9kZSAhPT0gQnJvd3NlclNpemVNb2RlLlNtYWxsKSB7XG4gICAgICBzZXRTaG93VGVtcGxhdGVQb3BwZXIodHJ1ZSlcbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgdGVtcGxhdGVUb29sdGlwID0gZm9ybWF0TWVzc2FnZSgnY2hvb3NlVGVtcGxhdGUnLCB7XG4gICAgdHlwZTogZm9ybWF0TWVzc2FnZSgnZ3JpZCcpLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgfSlcblxuICBjb25zdCBwYWdlVGVtcGxhdGVUb29sdGlwID0gZm9ybWF0TWVzc2FnZSgnY2hvb3NlVGVtcGxhdGUnLCB7XG4gICAgdHlwZTogZm9ybWF0TWVzc2FnZSgncGFnZScpLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgfSlcblxuICBjb25zdCB0b2dnbGVUZW1wbGF0ZVBvcHBlciA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYnJvd3NlclNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hTaWRlUGFuZWxUb0FwcCh7IHR5cGU6ICd0ZW1wbGF0ZScsIHRlbXBsYXRlTWV0aG9kOiAnZ2V0R3JpZFRlbXBsYXRlcycsIG9uU2VsZWN0OiBoYW5kbGVUZW1wbGF0ZVNlbGVjdGVkIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgc2V0U2hvd1RlbXBsYXRlUG9wcGVyKCFzaG93VGVtcGxhdGVQb3BwZXIpXG4gIH1cblxuICBjb25zdCBjbG9zZVRlbXBsYXRlUG9wcGVyID0gKCkgPT4ge1xuICAgIHNldFNob3dUZW1wbGF0ZVBvcHBlcihmYWxzZSlcbiAgfVxuXG4gIGNvbnN0IHRvZ2dsZVBhZ2VUZW1wbGF0ZVBvcHBlciA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYnJvd3NlclNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hTaWRlUGFuZWxUb0FwcCh7IHR5cGU6ICd0ZW1wbGF0ZScsIHRlbXBsYXRlTWV0aG9kOiAnZ2V0RnVsbFNjcmVlbkdyaWRQYWdlVGVtcGxhdGVzJywgb25TZWxlY3Q6IGhhbmRsZVBhZ2VUZW1wbGF0ZVNlbGVjdGVkIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgc2V0U2hvd1BhZ2VUZW1wbGF0ZVBvcHBlcighc2hvd1BhZ2VUZW1wbGF0ZVBvcHBlcilcbiAgfVxuXG4gIGNvbnN0IGNsb3NlUGFnZVRlbXBsYXRlUG9wcGVyID0gKCkgPT4ge1xuICAgIHNldFNob3dQYWdlVGVtcGxhdGVQb3BwZXIoZmFsc2UpXG4gIH1cblxuICBjb25zdCB0b2dnbGVXaWRnZXRQb3BwZXIgPSAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBpZiAoZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmJyb3dzZXJTaXplTW9kZSA9PT0gQnJvd3NlclNpemVNb2RlLlNtYWxsKSB7XG4gICAgICBhcHBCdWlsZGVyU3luYy5wdWJsaXNoU2lkZVBhbmVsVG9BcHAoeyB0eXBlOiAnd2lkZ2V0JywgaXNQbGFjZWhvbGRlcjogZmFsc2UsIGlzSXRlbUFjY2VwdGVkOiAoKSA9PiB0cnVlLCBvblNlbGVjdDogaGFuZGxlV2lkZ2V0U2VsZWN0ZWQgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBzZXRTaG93V2lkZ2V0UG9wcGVyKCFzaG93V2lkZ2V0UG9wcGVyKVxuICB9XG5cbiAgY29uc3QgY2xvc2VXaWRnZXRQb3BwZXIgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1dpZGdldFBvcHBlcihmYWxzZSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVRlbXBsYXRlU2VsZWN0ZWQgPSAodGVtcGxhdGUpID0+IHtcbiAgICBzZXRTaG93VGVtcGxhdGVQb3BwZXIoZmFsc2UpXG4gICAgb25UZW1wbGF0ZVNlbGVjdGVkKHRlbXBsYXRlKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlUGFnZVRlbXBsYXRlU2VsZWN0ZWQgPSAodGVtcGxhdGUpID0+IHtcbiAgICBzZXRTaG93UGFnZVRlbXBsYXRlUG9wcGVyKGZhbHNlKVxuICAgIG9uUGFnZVRlbXBsYXRlU2VsZWN0ZWQodGVtcGxhdGUpXG4gIH1cblxuICBjb25zdCBoYW5kbGVXaWRnZXRTZWxlY3RlZCA9IChpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcykgPT4ge1xuICAgIHNldFNob3dXaWRnZXRQb3BwZXIoZmFsc2UpXG5cbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGxldCByZXM6IFByb21pc2U8c3RyaW5nPlxuICAgIGlmIChpdGVtLml0ZW1UeXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICByZXMgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgcmVzb2x2ZShhcHBDb25maWdBY3Rpb24uYWRkTmV3U2VjdGlvblRvTGF5b3V0KGxheW91dElkKSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcyA9IGFwcENvbmZpZ0FjdGlvbi5hZGROZXdXaWRnZXRUb0xheW91dChsYXlvdXRJZCwgeyB1cmk6IGl0ZW0udXJpLCBpdGVtSWQ6IGl0ZW0uaXRlbUlkIH0pXG4gICAgfVxuICAgIHJlcy50aGVuKGxheW91dEl0ZW1JZCA9PiB7XG4gICAgICBjb25zdCByb290TGF5b3V0SW5mbyA9IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9XG4gICAgICBhcHBDb25maWdBY3Rpb25cbiAgICAgICAgLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXRJZCwgJ3NldHRpbmcucm9vdEl0ZW0nLCBsYXlvdXRJdGVtSWQpXG4gICAgICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHJvb3RMYXlvdXRJbmZvLCAnYmJveCcsIHsgd2lkdGg6IDEwMCB9KVxuXG4gICAgICB1cGRhdGVMYXlvdXRBbmRTZWxlY3Rpb24oYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgcm9vdExheW91dEluZm8pXG4gICAgfSlcbiAgfVxuXG4gIGlmICghc2hvdykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcicgY3NzPXtnZXRTdHlsZShpc0dyaWRQYWdlKX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgeyFpc0dyaWRQYWdlICYmIChcbiAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICA8VGhlbWVkVG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ2FkZFdpZGdldCcpfT5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICByZWY9e3BsYWNlaG9sZGVyUmVmfVxuICAgICAgICAgICAgICAgIGNzcz17YnV0dG9uU3R5bGV9XG4gICAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlV2lkZ2V0UG9wcGVyfVxuICAgICAgICAgICAgICAgIGFyaWEtaGFzcG9wdXBcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxQbHVzT3V0bGluZWQgc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9UaGVtZWRUb29sdGlwPlxuICAgICAgICAgICAgPFRoZW1lZFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIHRpdGxlPXt0ZW1wbGF0ZVRvb2x0aXB9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYWN0aW9uLWl0ZW0nPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gcmVmPXt0ZW1wbGF0ZVJlZn0gaWNvbiBvbkNsaWNrPXt0b2dnbGVUZW1wbGF0ZVBvcHBlcn0gY3NzPXtidXR0b25TdHlsZX0gYXJpYS1oYXNwb3B1cD5cbiAgICAgICAgICAgICAgICAgIDxHcmlkVGVtcGxhdGVPdXRsaW5lZCBhdXRvRmxpcCBzaXplPXsxNn0gLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L1RoZW1lZFRvb2x0aXA+XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgICAge2lzR3JpZFBhZ2UgJiYgKFxuICAgICAgICAgIDxUaGVtZWRUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyB0aXRsZT17cGFnZVRlbXBsYXRlVG9vbHRpcH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYWN0aW9uLWl0ZW0nPlxuICAgICAgICAgICAgICA8QnV0dG9uIHJlZj17cGFnZVRlbXBsYXRlUmVmfSBpY29uIG9uQ2xpY2s9e3RvZ2dsZVBhZ2VUZW1wbGF0ZVBvcHBlcn0gY3NzPXtidXR0b25TdHlsZX0gY2xhc3NOYW1lPSdyb3VuZGVkLWNpcmNsZScgYXJpYS1oYXNwb3B1cD5cbiAgICAgICAgICAgICAgICA8R3JpZFRlbXBsYXRlT3V0bGluZWQgYXV0b0ZsaXAgc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9UaGVtZWRUb29sdGlwPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7aXNHcmlkUGFnZSAmJiAoXG4gICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYWN0aW9uLXNlcHJhdG9yIG10LTQnIC8+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9J2J0bi10ZXh0IG10LTInPntmb3JtYXRNZXNzYWdlKCdkcm9wV2lkZ2V0VG9BZGQnKX08L2g1PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgKX1cbiAgICAgIHtzaG93VGVtcGxhdGVQb3BwZXIgJiYgKFxuICAgICAgICA8VGVtcGxhdGVTZWxlY3RvclxuICAgICAgICAgIHRlbXBsYXRlcz17Z2V0R3JpZFRlbXBsYXRlcygpfVxuICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ9e3RlbXBsYXRlUmVmLmN1cnJlbnR9XG4gICAgICAgICAgb25JdGVtU2VsZWN0PXtoYW5kbGVUZW1wbGF0ZVNlbGVjdGVkfVxuICAgICAgICAgIG9uQ2xvc2U9e2Nsb3NlVGVtcGxhdGVQb3BwZXJ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAge3Nob3dXaWRnZXRQb3BwZXIgJiYgKFxuICAgICAgICA8V2lkZ2V0TGlzdFBvcHBlclxuICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ9e3BsYWNlaG9sZGVyUmVmLmN1cnJlbnR9XG4gICAgICAgICAgaXNBY2NlcHRlZD17KCkgPT4gdHJ1ZX1cbiAgICAgICAgICBvblNlbGVjdD17aGFuZGxlV2lkZ2V0U2VsZWN0ZWR9XG4gICAgICAgICAgb25DbG9zZT17Y2xvc2VXaWRnZXRQb3BwZXJ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAge3Nob3dQYWdlVGVtcGxhdGVQb3BwZXIgJiYgKFxuICAgICAgICA8VGVtcGxhdGVTZWxlY3RvclxuICAgICAgICAgIHRlbXBsYXRlcz17Z2V0RnVsbFNjcmVlbkdyaWRQYWdlVGVtcGxhdGVzKGZhbHNlKX1cbiAgICAgICAgICByZWZlcmVuY2VFbGVtZW50PXtwYWdlVGVtcGxhdGVSZWYuY3VycmVudH1cbiAgICAgICAgICBvbkl0ZW1TZWxlY3Q9e2hhbmRsZVBhZ2VUZW1wbGF0ZVNlbGVjdGVkfVxuICAgICAgICAgIG9uQ2xvc2U9e2Nsb3NlUGFnZVRlbXBsYXRlUG9wcGVyfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgQnJvd3NlclNpemVNb2RlLFxuICBJbW11dGFibGUsXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICBob29rc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBpbnRlcmFjdCB9IGZyb20gJ2ppbXUtY29yZS9kbmQnXG5pbXBvcnQgeyBUYWIsIHR5cGUgVGFiUHJvcHMsIGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBQYWdlQ29udGV4dCwgTGF5b3V0Q29udGV4dCwgdXRpbHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24gfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgYmluZERyYWdIYW5kbGVyIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcmFnLWV2ZW50LWhhbmRsZXInXG5pbXBvcnQgeyBpbml0SW50ZXJhY3RpdmUgfSBmcm9tICcuLi8uLi9idWlsZGVyL2ludGVyYWN0aXZlL2Ryb3BhcmVhLWVmZmVjdC1pbnRlcmFjdGpzJ1xuaW1wb3J0IHsgaW5pdEg1IH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1lZmZlY3QtaDUnXG5pbXBvcnQgeyBhZGRJdGVtVG9HcmlkIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IFNpZGVUeXBlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IGdldExhYmVsT2ZHcmlkVGFiIH0gZnJvbSAnLi4vY29tbW9uL3V0aWxzJ1xuXG5pbnRlcmZhY2UgRHJhZ2dhYmxlVGFiUHJvcHMge1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIG9uRHJhZ1N0YXJ0OiAobGF5b3V0SXRlbUlkOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIC5uYXYtbGluay5ncmlkLXRhYi5oaWdobGlnaHQtcHJlIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgJjphZnRlciB7XG4gICAgICBjb250ZW50OiAnJztcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICB0b3A6IDA7XG4gICAgICB3aWR0aDogNTAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS0zMDApO1xuICAgIH1cbiAgfVxuXG4gIC5uYXYtbGluay5ncmlkLXRhYi5oaWdobGlnaHQtbmV4dCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICY6YWZ0ZXIge1xuICAgICAgY29udGVudDogJyc7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICByaWdodDogMDtcbiAgICAgIHRvcDogMDtcbiAgICAgIHdpZHRoOiA1MCU7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LTMwMCk7XG4gICAgfVxuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBEcmFnZ2FibGVUYWIgKHByb3BzOiBEcmFnZ2FibGVUYWJQcm9wcyAmIFRhYlByb3BzKSB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgb25EcmFnU3RhcnQsIHRpdGxlLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wc1xuICBjb25zdCBidG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KClcbiAgY29uc3QgaXNJblJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2VzKVxuICBjb25zdCBwYWdlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUGFnZUNvbnRleHQpXG4gIGNvbnN0IGxheW91dENvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KExheW91dENvbnRleHQpXG4gIGNvbnN0IGl0ZW1UeXBlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBhcHBDb25maWcgPSBzdGF0ZS5hcHBDb25maWdcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIHJldHVybiBsYXlvdXRJdGVtPy50eXBlXG4gIH0pXG5cbiAgY29uc3QgbGFiZWwgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBnZXRMYWJlbE9mR3JpZFRhYihzdGF0ZS5hcHBDb25maWcsIHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9LCB0cmFuc2xhdGUpXG4gIH0pXG5cbiAgY29uc3QgZ2V0Q3VycmVudFJvb3RMYXlvdXRJZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHBhZ2VDb250ZXh0LnJvb3RMYXlvdXRJZCwgW3BhZ2VDb250ZXh0LnJvb3RMYXlvdXRJZF0pXG5cbiAgY29uc3QgaGFuZGxlRHJhZ1N0YXJ0ID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoKSA9PiB7XG4gICAgb25EcmFnU3RhcnQobGF5b3V0SXRlbUlkKVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZU9uRHJhZ092ZXIgPSBob29rcy51c2VFdmVudENhbGxiYWNrKFxuICAgIChcbiAgICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgICBkcmFnZ2luZ0VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgY29udGFpbmVyUmVjdDogRE9NUmVjdCxcbiAgICAgIGl0ZW1SZWN0OiBET01SZWN0LFxuICAgICAgY2xpZW50WDogbnVtYmVyLFxuICAgICAgY2xpZW50WTogbnVtYmVyXG4gICAgKSA9PiB7XG4gICAgICBpZiAoIWlzSW5SZWYuY3VycmVudCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChjbGllbnRYIDw9IGNvbnRhaW5lclJlY3Qud2lkdGggLyAyKSB7XG4gICAgICAgIGJ0blJlZi5jdXJyZW50LmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodC1wcmUnKVxuICAgICAgICBidG5SZWYuY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQtbmV4dCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG5SZWYuY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQtcHJlJylcbiAgICAgICAgYnRuUmVmLmN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0LW5leHQnKVxuICAgICAgfVxuICAgIH1cbiAgKVxuXG4gIGNvbnN0IGhhbmRsZU9uRHJvcCA9IGhvb2tzLnVzZUV2ZW50Q2FsbGJhY2soXG4gICAgKFxuICAgICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICAgIGNvbnRhaW5lclJlY3Q6IERPTVJlY3QsXG4gICAgICBpdGVtUmVjdDogRE9NUmVjdCxcbiAgICAgIGNsaWVudFg6IG51bWJlcixcbiAgICAgIGNsaWVudFk6IG51bWJlclxuICAgICkgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SW5mbyA9IHtcbiAgICAgICAgbGF5b3V0SWRcbiAgICAgIH1cbiAgICAgIGxldCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgICAgbGV0IGlzQmVmb3JlUmVmZXJlbmNlSXRlbSA9IGZhbHNlXG4gICAgICBpZiAoY2xpZW50WCA8PSBjb250YWluZXJSZWN0LndpZHRoIC8gMikge1xuICAgICAgICBpc0JlZm9yZVJlZmVyZW5jZUl0ZW0gPSAhdXRpbHMuaXNSVEwoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNCZWZvcmVSZWZlcmVuY2VJdGVtID0gdXRpbHMuaXNSVEwoKVxuICAgICAgfVxuICAgICAgLy8gaW5zZXJ0IGFmdGVyIHRoaXMgaXRlbVxuICAgICAgYWRkSXRlbVRvR3JpZChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCBkcmFnZ2luZ0l0ZW0sIGxheW91dEluZm8sIGxheW91dEl0ZW1JZCwgU2lkZVR5cGUuQ2VudGVyKS50aGVuKFxuICAgICAgICAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBhcHBDb25maWcsIGxheW91dEluZm86IG5ld0xheW91dEluZm8gfSA9IHJlc3VsdFxuICAgICAgICAgIGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG5cbiAgICAgICAgICBpZiAoaXNCZWZvcmVSZWZlcmVuY2VJdGVtKSB7XG4gICAgICAgICAgICBjb25zdCByZWZJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgICAgICAgICAgY29uc3QgcGFyZW50SWQgPSByZWZJdGVtLnBhcmVudFxuICAgICAgICAgICAgY29uc3QgcGFyZW50SXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W3BhcmVudElkXVxuICAgICAgICAgICAgY29uc3QgY2hpbGRJZHMgPSBbLi4ucGFyZW50SXRlbS5jaGlsZHJlbl1cbiAgICAgICAgICAgIGNoaWxkSWRzLnNwbGljZShjaGlsZElkcy5pbmRleE9mKGxheW91dEl0ZW1JZCksIDIsIG5ld0xheW91dEluZm8ubGF5b3V0SXRlbUlkLCBsYXlvdXRJdGVtSWQpXG5cbiAgICAgICAgICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZDogcGFyZW50SWQgfSwgJ2NoaWxkcmVuJywgY2hpbGRJZHMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbiAgICAgICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VsZWN0aW9uQ2hhbmdlZChuZXdMYXlvdXRJbmZvKSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cbiAgKVxuXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZURyYWdvdmVyRWZmZWN0ID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoaXNJbjogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgIGlzSW5SZWYuY3VycmVudCA9IGlzSW5cbiAgICBpZiAoIWlzSW4pIHtcbiAgICAgIGJ0blJlZi5jdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodC1wcmUnKVxuICAgICAgYnRuUmVmLmN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0LW5leHQnKVxuICAgIH1cbiAgfSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGJ0blJlZi5jdXJyZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1sYXlvdXRpZCcsIGxheW91dElkKVxuICAgIGJ0blJlZi5jdXJyZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1sYXlvdXRpdGVtaWQnLCBsYXlvdXRJdGVtSWQpXG4gICAgY29uc3QgZHJhZ0ludGVyYXRhYmxlID0gaW50ZXJhY3QoYnRuUmVmLmN1cnJlbnQpLm9yaWdpbigncGFyZW50JylcbiAgICBjb25zdCBpbnRlcmFjdGFibGUgPSBiaW5kRHJhZ0hhbmRsZXIoZHJhZ0ludGVyYXRhYmxlLCB7XG4gICAgICBsYXlvdXRJZCxcbiAgICAgIGxheW91dEl0ZW1JZCxcbiAgICAgIGl0ZW1UeXBlLFxuICAgICAgdXNlRHJhZ0hhbmRsZXI6IGZhbHNlLFxuICAgICAgb25EcmFnU3RhcnQ6IGhhbmRsZURyYWdTdGFydCxcbiAgICAgIHJvb3RMYXlvdXRJZDogZ2V0Q3VycmVudFJvb3RMYXlvdXRJZCxcbiAgICAgIHJlc3RyaWN0OiAoKSA9PiB0cnVlXG4gICAgfSlcblxuICAgIGludGVyYWN0YWJsZS5kcmFnZ2FibGUoe1xuICAgICAgbW9kaWZpZXJzOiBbXG4gICAgICAgIGludGVyYWN0Lm1vZGlmaWVycy5yZXN0cmljdFJlY3Qoe1xuICAgICAgICAgIHJlc3RyaWN0aW9uOiBidG5SZWYuY3VycmVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQgLy9gZGl2LmdyaWQtbGF5b3V0W2RhdGEtbGF5b3V0aWQ9JHtsYXlvdXRJZH1dYFxuICAgICAgICB9KVxuICAgICAgXVxuICAgIH0pXG5cbiAgICBjb25zdCBjb250ZXh0UmVmID0ge1xuICAgICAgY3VycmVudDoge1xuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIGxheW91dHM6IEltbXV0YWJsZSh7XG4gICAgICAgICAgICBbQnJvd3NlclNpemVNb2RlLkxhcmdlXTogYCR7bGF5b3V0SWR9XyR7bGF5b3V0SXRlbUlkfV90bGFyZ2VgLFxuICAgICAgICAgICAgW0Jyb3dzZXJTaXplTW9kZS5NZWRpdW1dOiBgJHtsYXlvdXRJZH1fJHtsYXlvdXRJdGVtSWR9X3RtZWRpdW1gLFxuICAgICAgICAgICAgW0Jyb3dzZXJTaXplTW9kZS5TbWFsbF06IGAke2xheW91dElkfV8ke2xheW91dEl0ZW1JZH1fdHNtYWxsYFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGhpZ2hsaWdodERyYWdvdmVyOiB0cnVlLFxuICAgICAgICAgIG9uRHJhZ092ZXI6IGhhbmRsZU9uRHJhZ092ZXIsXG4gICAgICAgICAgb25Ecm9wOiBoYW5kbGVPbkRyb3AsXG4gICAgICAgICAgb25Ub2dnbGVEcmFnb3ZlckVmZmVjdDogaGFuZGxlVG9nZ2xlRHJhZ292ZXJFZmZlY3RcbiAgICAgICAgfSxcbiAgICAgICAgbGF5b3V0SWQsXG4gICAgICAgIHBhZ2VDb250ZXh0LFxuICAgICAgICBsYXlvdXRDb250ZXh0XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGRyb3BJbnRlcmFjdGJsZSA9IGluaXRJbnRlcmFjdGl2ZShidG5SZWYuY3VycmVudCwgY29udGV4dFJlZiBhcyBhbnksICcuZ3JpZC10YWInKVxuICAgIGluaXRINShidG5SZWYuY3VycmVudCwgY29udGV4dFJlZiBhcyBhbnkpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZHJhZ0ludGVyYXRhYmxlLnVuc2V0KClcbiAgICAgIGRyb3BJbnRlcmFjdGJsZS51bnNldCgpXG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2xheW91dElkLCBsYXlvdXRJdGVtSWRdKSAvLyByZWJpbmQgZXZlbnQgaGFuZGxlciBpZiBsYXlvdXRJZC9sYXlvdXRJdGVtSWQgY2hhbmdlcywgZS5nLiB1c2UgY3VzdG9tIHNtYWxsIHNpemUgbW9kZVxuXG4gIHJldHVybiA8VGFiIHsuLi5vdGhlclByb3BzfSB0aXRsZT17bGFiZWx9IGlubmVyUmVmPXtidG5SZWZ9IGlubm5lckNsYXNzTmFtZT0nZ3JpZC10YWInIGNzcz17c3R5bGV9PjwvVGFiPlxufVxuIiwiaW1wb3J0IHsgdHlwZSBMYXlvdXRDb250ZXh0VG9vbFByb3BzLCBBcHBNb2RlLCBMYXlvdXRJdGVtVHlwZSwgdHlwZSBMYXlvdXRJdGVtSnNvbiB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgVG9vbGJhckNvbmZpZyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGFwcEJ1aWxkZXJTeW5jIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IGlzTG9ja0xheW91dCwgZ2V0QXBwTW9kZSwgaXNOb3JtYWxXaWRnZXQsIGZsb2F0aW5nTWVudUl0ZW0gfSBmcm9tICcuLi8uLi9idWlsZGVyL21lbnUvY29tbW9uLW1lbnUnXG5pbXBvcnQgeyBkdXBsaWNhdGVJdGVtLCBwZW5kR3JpZExheW91dEl0ZW0sIHNwbGl0R3JpZENlbGwgfSBmcm9tICcuL2dyaWQtaXRlbS11dGlsJ1xuaW1wb3J0IHRyYXNoT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcbmltcG9ydCBwZW5kaW5nT3V0bGluZWQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3BlbmRpbmcuc3ZnJ1xuaW1wb3J0IGR1cGxpY2F0ZU91dGxpbmVkIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9kdXBsaWNhdGUuc3ZnJ1xuaW1wb3J0IHNwbGl0SG9yaXpvbnRhbCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc3BsaXQtaG9yaXpvbnRhbC5zdmcnXG5pbXBvcnQgc3BsaXRWZXJ0aWNhbCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc3BsaXQtdmVydGljYWwuc3ZnJ1xuXG5leHBvcnQgY29uc3QgZ3JpZEl0ZW1NZW51OiBUb29sYmFyQ29uZmlnID0gW1xuICB7XG4gICAgaWNvbjogc3BsaXRIb3Jpem9udGFsLFxuICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnc3BsaXRIb3Jpem9udGFsbHknKVxuICAgIH0sXG4gICAgdmlzaWJsZTogKCkgPT4ge1xuICAgICAgcmV0dXJuICFpc0xvY2tMYXlvdXQoKVxuICAgIH0sXG4gICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgc3BsaXRHcmlkQ2VsbCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSwgJ2gnKVxuICAgIH1cbiAgfSxcbiAge1xuICAgIGljb246IHNwbGl0VmVydGljYWwsXG4gICAgdGl0bGU6IChwcm9wczogeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgIHJldHVybiBwcm9wcy5mb3JtYXRNZXNzYWdlKCdzcGxpdFZlcnRpY2FsbHknKVxuICAgIH0sXG4gICAgdmlzaWJsZTogKCkgPT4ge1xuICAgICAgcmV0dXJuICFpc0xvY2tMYXlvdXQoKVxuICAgIH0sXG4gICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgc3BsaXRHcmlkQ2VsbCh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSwgJ3YnKVxuICAgIH1cbiAgfSxcbiAge1xuICAgIGljb246IGR1cGxpY2F0ZU91dGxpbmVkLFxuICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnZHVwbGljYXRlJylcbiAgICB9LFxuICAgIHZpc2libGU6ICgpID0+IHtcbiAgICAgIHJldHVybiAhaXNMb2NrTGF5b3V0KClcbiAgICB9LFxuICAgIG9uQ2xpY2s6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICAgIGR1cGxpY2F0ZUl0ZW0oeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0pXG4gICAgfVxuICB9LFxuICBmbG9hdGluZ01lbnVJdGVtLFxuICB7XG4gICAgaWNvbjogcGVuZGluZ091dGxpbmVkLFxuICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgncGVuZGluZ1RpcCcpXG4gICAgfSxcbiAgICB2aXNpYmxlOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgICAgIGNvbnN0IGlzUGxhY2Vob2xkZXIgPSBsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCAmJiBsYXlvdXRJdGVtLndpZGdldElkID09IG51bGxcbiAgICAgIHJldHVybiBnZXRBcHBNb2RlKCkgPT09IEFwcE1vZGUuRGVzaWduICYmICFpc0xvY2tMYXlvdXQoKSAmJiAhaXNQbGFjZWhvbGRlclxuICAgIH0sXG4gICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgcGVuZEdyaWRMYXlvdXRJdGVtKHtcbiAgICAgICAgbGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZFxuICAgICAgfSlcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBpY29uOiB0cmFzaE91dGxpbmVkLFxuICAgIHRpdGxlOiAocHJvcHM6IHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZyB9KSA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMuZm9ybWF0TWVzc2FnZSgnZGVsZXRlJylcbiAgICB9LFxuICAgIHZpc2libGU6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgcmV0dXJuIGdldEFwcE1vZGUoKSA9PT0gQXBwTW9kZS5EZXNpZ24gJiZcbiAgICAgICAgKCFpc0xvY2tMYXlvdXQoKSB8fCBpc05vcm1hbFdpZGdldChwcm9wcy5sYXlvdXRJdGVtIGFzIHVua25vd24gYXMgTGF5b3V0SXRlbUpzb24pKVxuICAgIH0sXG4gICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgY29uc3QgbGF5b3V0SW5mbyA9IHtcbiAgICAgICAgbGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0SXRlbS5pZFxuICAgICAgfVxuICAgICAgYXBwQnVpbGRlclN5bmMucHVibGlzaENvbmZpcm1EZWxldGVUb0FwcChsYXlvdXRJbmZvKVxuICAgIH1cbiAgfVxuXVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgR3JpZEl0ZW1UeXBlLFxuICB0eXBlIEdyaWRMYXlvdXRJdGVtSnNvbixcbiAgSW1tdXRhYmxlLFxuICBqc3gsXG4gIGNzcyxcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTUdyaWRMYXlvdXRJdGVtSnNvbixcbiAgaG9va3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IGRlZmF1bHRNZXNzYWdlcywgVGV4dElucHV0LCBMYWJlbCwgQ2hlY2tib3ggfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgU2V0dGluZ1JvdywgU2V0dGluZ1NlY3Rpb24gfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCBDb21tb25MYXlvdXRJdGVtU2V0dGluZyBmcm9tICcuLi8uLi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtaXRlbS1zZXR0aW5nJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtU2V0dGluZ1Byb3BzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdyaWRJdGVtU2V0dGluZyAocHJvcHM6IExheW91dEl0ZW1TZXR0aW5nUHJvcHMpIHtcbiAgY29uc3QgeyBsYXlvdXRJdGVtLCBsYXlvdXRJZCB9ID0gcHJvcHNcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2VzKVxuICBjb25zdCBbbGFiZWwsIHNldExhYmVsXSA9IFJlYWN0LnVzZVN0YXRlKChsYXlvdXRJdGVtIGFzIEdyaWRMYXlvdXRJdGVtSnNvbikubGFiZWwgPz8gJycpXG5cbiAgY29uc3QgaXNJblRhYiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0ID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXIuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgaWYgKGxheW91dEl0ZW0ucGFyZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnRJdGVtID0gbGF5b3V0LmNvbnRlbnRbbGF5b3V0SXRlbS5wYXJlbnRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gICAgICByZXR1cm4gcGFyZW50SXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlRhYlxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfSlcblxuICBjb25zdCBpbm5lckxhYmVsID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsYXlvdXQgPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlci5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICBjb25zdCBncmlkSXRlbSA9IGxheW91dC5jb250ZW50W2xheW91dEl0ZW0uaWRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gICAgaWYgKCFpc0luVGFiIHx8IChncmlkSXRlbS5ncmlkVHlwZSAhPT0gR3JpZEl0ZW1UeXBlLlJvdyAmJiBncmlkSXRlbS5ncmlkVHlwZSAhPT0gR3JpZEl0ZW1UeXBlLkNvbHVtbikpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gZ3JpZEl0ZW0ubGFiZWxcbiAgfSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldExhYmVsKGlubmVyTGFiZWwpXG4gIH0sIFtpbm5lckxhYmVsXSlcblxuICBjb25zdCBoYW5kbGVMYWJlbENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBsYXlvdXRJdGVtLmlkIH0sICdsYWJlbCcsIHZhbHVlICE9PSAnJyA/IHZhbHVlIDogdW5kZWZpbmVkKS5leGVjKClcbiAgICB9LFxuICAgIFtsYXlvdXRJZCwgbGF5b3V0SXRlbS5pZF1cbiAgKVxuXG4gIGNvbnN0IGhhbmRsZUV4cGFuZGFibGVDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eSh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSwgJ2V4cGFuZGFibGUnLCB2YWx1ZSkuZXhlYygpXG4gICAgfSxcbiAgICBbbGF5b3V0SWQsIGxheW91dEl0ZW0uaWRdXG4gIClcblxuICBjb25zdCB1cGRhdGVMYWJlbCA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgc2V0TGFiZWwoZS50YXJnZXQudmFsdWUpXG4gIH0sIFtdKVxuXG4gIGlmICghbGF5b3V0SXRlbSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb25zdCBncmlkSXRlbSA9IGxheW91dEl0ZW0gYXMgR3JpZExheW91dEl0ZW1Kc29uXG5cbiAgaWYgKGlzSW5UYWIgJiYgKGdyaWRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuUm93IHx8IGdyaWRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuQ29sdW1uKSkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZC1pdGVtLXNldHRpbmcgaC0xMDAnPlxuICAgICAgICA8U2V0dGluZ1NlY3Rpb24+XG4gICAgICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e3RyYW5zbGF0ZSgnbGFiZWwnKX0gZmxvdz0nd3JhcCc+XG4gICAgICAgICAgICA8VGV4dElucHV0XG4gICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICB2YWx1ZT17bGFiZWx9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt1cGRhdGVMYWJlbH1cbiAgICAgICAgICAgICAgb25BY2NlcHRWYWx1ZT17aGFuZGxlTGFiZWxDaGFuZ2V9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy0xMDAnXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIGlmIChncmlkSXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlBsYWluKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkLWl0ZW0tc2V0dGluZyBoLTEwMCc+XG4gICAgICAgIDxTZXR0aW5nU2VjdGlvbiB0aXRsZT17dHJhbnNsYXRlKCdncmlkSXRlbScpfT5cbiAgICAgICAgICA8U2V0dGluZ1Jvdz5cbiAgICAgICAgICAgIDxMYWJlbCBjZW50cmljPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXt0cmFuc2xhdGUoJ2FsbG93RXhwYW5zaW9uJyl9XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17KGxheW91dEl0ZW0gYXMgR3JpZExheW91dEl0ZW1Kc29uKS5leHBhbmRhYmxlID8/IHRydWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlLCBjaGVja2VkKSA9PiB7IGhhbmRsZUV4cGFuZGFibGVDaGFuZ2UoZS50YXJnZXQuY2hlY2tlZCkgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtbC0yIHRleHQtdHJ1bmNhdGUnPnt0cmFuc2xhdGUoJ2FsbG93RXhwYW5zaW9uJyl9PC9zcGFuPlxuICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgIDwvU2V0dGluZ1NlY3Rpb24+XG4gICAgICAgIDxDb21tb25MYXlvdXRJdGVtU2V0dGluZ1xuICAgICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgICAgc3R5bGU9e3Byb3BzLnN0eWxlfVxuICAgICAgICAgIGlzU2VjdGlvbj17bGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9ufVxuICAgICAgICAgIG9uU3R5bGVDaGFuZ2U9e3Byb3BzLm9uU3R5bGVDaGFuZ2V9XG4gICAgICAgICAgZm9ybWF0TWVzc2FnZT17cHJvcHMuZm9ybWF0TWVzc2FnZX1cbiAgICAgICAgICBzZXR0aW5nPXtsYXlvdXRJdGVtLnNldHRpbmcgfHwgSW1tdXRhYmxlKHt9KX1cbiAgICAgICAgICBvblNldHRpbmdDaGFuZ2U9e3Byb3BzLm9uU2V0dGluZ0NoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2dyaWQtaXRlbS1zZXR0aW5nIGgtMTAwJz5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPSdoLTEwMCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlciBkLWZsZXggZmxleC1jb2x1bW4nXG4gICAgICAgIGNzcz17Y3NzYGNvbG9yOiB2YXIoLS1kYXJrLTUwMClgfVxuICAgICAgPlxuICAgICAgICA8ZGl2PjxJbmZvT3V0bGluZWQgc2l6ZT17NDh9Lz48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J210LTQnPnt0cmFuc2xhdGUoJ25vQ29uZmlnTmVlZGVkJyl9PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBqc3gsXG4gIGNzcyxcbiAgZXh0ZW5zaW9uU3BlYyxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgTGF5b3V0Q29udGV4dFRvb2xQcm9wcyxcbiAgR3JpZEl0ZW1UeXBlLFxuICB0eXBlIElNR3JpZExheW91dEl0ZW1Kc29uLFxuICBob29rc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBfUG9wcGVyIGFzIFBvcHBlciwgZ2V0RmFsbGJhY2tQbGFjZW1lbnRzTW9kaWZpZXIsIGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24gfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgdHlwZSBUb29sYmFyQ29uZmlnIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgaXNMb2NrTGF5b3V0IH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L2NvbW1vbi1tZW51J1xuaW1wb3J0IHsgVG9vbGJhciB9IGZyb20gJy4uLy4uL2J1aWxkZXIvdG9vbGJhcidcbmltcG9ydCB7IGdldFRoZW1lMiB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgcm93SWNvbiBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kYXRhL3Jvdy5zdmcnXG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZEl0ZW1Ub29sYmFyUHJvcHMge1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbiAgcmVmRWxlbWVudDogSFRNTEVsZW1lbnRcbn1cblxubGV0IGNvdW50ID0gMFxuXG5jb25zdCBtb2RpZmllcnMgPSBbXG4gIHtcbiAgICBuYW1lOiAncHJldmVudE92ZXJmbG93JyxcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGJvdW5kYXJ5OiAndmlld3BvcnQnLFxuICAgICAgYWx0QXhpczogdHJ1ZSAvLyBhbGxvdyB0aGUgcG9wcGVyIHRvIG92ZXJsYXAgaXRzIHJlZmVyZW5jZSBlbGVtZW50LlxuICAgIH1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdmbGlwJyxcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGJvdW5kYXJ5OiAndmlld3BvcnQnLFxuICAgICAgZmFsbGJhY2tQbGFjZW1lbnRzOiBnZXRGYWxsYmFja1BsYWNlbWVudHNNb2RpZmllcihbJ3RvcC1zdGFydCcsICdib3R0b20tc3RhcnQnXSwgdHJ1ZSkub3B0aW9ucy5mYWxsYmFja1BsYWNlbWVudHNcbiAgICB9XG4gIH1cbl1cblxuZXhwb3J0IGNvbnN0IGdyaWRSb3dDb2xUb29sczogVG9vbGJhckNvbmZpZyA9IFtcbiAge1xuICAgIGljb246IHJvd0ljb24sXG4gICAgdGl0bGU6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcyAmIHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcsIHZhbHVlcz86IGFueSkgPT4gc3RyaW5nIH0pID0+IHtcbiAgICAgIGNvbnN0IHsgbGF5b3V0SXRlbSwgZm9ybWF0TWVzc2FnZSB9ID0gcHJvcHNcbiAgICAgIGNvbnN0IHR5cGUgPSAobGF5b3V0SXRlbSBhcyBJTUdyaWRMYXlvdXRJdGVtSnNvbikuZ3JpZFR5cGVcbiAgICAgIGxldCBsYWJlbElkXG4gICAgICBpZiAodHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlJvdykge1xuICAgICAgICBsYWJlbElkID0gJ2Rpc3RyaWJ1dGVTcGFjZUgnXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEdyaWRJdGVtVHlwZS5Db2x1bW4pIHtcbiAgICAgICAgbGFiZWxJZCA9ICdkaXN0cmlidXRlU3BhY2VWJ1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZvcm1hdE1lc3NhZ2UobGFiZWxJZClcbiAgICB9LFxuICAgIHZpc2libGU6IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4ge1xuICAgICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgY29uc3QgdHlwZSA9IChsYXlvdXRJdGVtIGFzIElNR3JpZExheW91dEl0ZW1Kc29uKS5ncmlkVHlwZVxuICAgICAgcmV0dXJuICh0eXBlID09PSBHcmlkSXRlbVR5cGUuUm93IHx8IHR5cGUgPT09IEdyaWRJdGVtVHlwZS5Db2x1bW4pICYmICFpc0xvY2tMYXlvdXQoKVxuICAgIH0sXG4gICAgb25DbGljazogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dElkIH0gPSBwcm9wc1xuICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IHByb3BzLmxheW91dEl0ZW0gYXMgSU1HcmlkTGF5b3V0SXRlbUpzb25cbiAgICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgICBjb25zdCBudW0gPSBsYXlvdXRJdGVtLmNoaWxkcmVuLmxlbmd0aFxuICAgICAgY29uc3Qgc2l6ZSA9IDEwMCAvIG51bVxuXG4gICAgICBsYXlvdXRJdGVtLmNoaWxkcmVuLmZvckVhY2goY2hpbGRJZCA9PiB7XG4gICAgICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KHsgbGF5b3V0SWQ6IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGNoaWxkSWQgfSwgJ2Jib3gnLCB7IHdpZHRoOiBzaXplIH0pXG4gICAgICB9KVxuICAgICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuICAgIH0sXG4gICAgb25Nb3VzZUVudGVyOiAocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0gfSA9IHByb3BzXG4gICAgICBjb25zdCBncmlkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdi5ncmlkLWxheW91dFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1gKVxuICAgICAgY29uc3QgZ3JvdXBFbGVtZW50ID0gZ3JpZEVsZW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W2RhdGEtbGF5b3V0aWQ9XCIke2xheW91dElkfVwiXVtkYXRhLWxheW91dGl0ZW1pZD1cIiR7bGF5b3V0SXRlbS5pZH1cIl1gKVxuICAgICAgZ3JvdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtYWN0aXZlJylcbiAgICB9LFxuICAgIG9uTW91c2VMZWF2ZTogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiB7XG4gICAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtIH0gPSBwcm9wc1xuICAgICAgY29uc3QgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXYuZ3JpZC1sYXlvdXRbZGF0YS1sYXlvdXRpZD1cIiR7bGF5b3V0SWR9XCJdYClcbiAgICAgIGNvbnN0IGdyb3VwRWxlbWVudCA9IGdyaWRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdltkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW0uaWR9XCJdYClcbiAgICAgIGdyb3VwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtZW51LWFjdGl2ZScpXG4gICAgfVxuICB9XG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBHcmlkSXRlbVRvb2xiYXIgKHByb3BzOiBHcmlkSXRlbVRvb2xiYXJQcm9wcykge1xuICBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuZXh0ZW5zaW9uc0luZm9bZXh0ZW5zaW9uU3BlYy5FeHRlbnNpb25Qb2ludHMuQ29udGV4dFRvb2xdKVxuXG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0sIHJlZkVsZW1lbnQgfSA9IHByb3BzXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlcylcblxuICBpZiAoIXJlZkVsZW1lbnQpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8UG9wcGVyXG4gICAgICBwbGFjZW1lbnQ9J3RvcC1zdGFydCdcbiAgICAgIHJlZmVyZW5jZT17cmVmRWxlbWVudH1cbiAgICAgIG9wZW5cbiAgICAgIG1vZGlmaWVycz17bW9kaWZpZXJzfVxuICAgICAgdmVyc2lvbj17Y291bnQrK31cbiAgICAgIHRyYXBGb2N1cz17ZmFsc2V9XG4gICAgICBhdXRvRm9jdXM9e2ZhbHNlfVxuICAgICAgY3NzPXtjc3NgXG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBib3gtc2hhZG93OiBub25lO1xuICAgICAgYH1cbiAgICA+XG4gICAgICA8ZGl2PlxuICAgICAgICA8VG9vbGJhclxuICAgICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgICBsYXlvdXRJdGVtPXtsYXlvdXRJdGVtfVxuICAgICAgICAgIHRoZW1lPXtnZXRUaGVtZTIoKX1cbiAgICAgICAgICBwYXJlbnRSZWY9e3JlZkVsZW1lbnR9XG4gICAgICAgICAgdG9vbHM9e2dyaWRSb3dDb2xUb29sc31cbiAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0cmFuc2xhdGV9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L1BvcHBlcj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgdHlwZSBJTUxheW91dEpzb24sIHR5cGUgTGF5b3V0SW5mbywgTGF5b3V0SXRlbVR5cGUsIEdyaWRJdGVtVHlwZSwgdHlwZSBHcmlkTGF5b3V0SXRlbUpzb24sIHR5cGUgSU1HcmlkTGF5b3V0SXRlbUpzb24gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB1dGlscyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyBTaWRlVHlwZSB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBnZXRHcmlkSXRlbSB9IGZyb20gJy4uL2NvbW1vbi91dGlscydcbmltcG9ydCB7IHVwZGF0ZUxheW91dEFuZFNlbGVjdGlvbiB9IGZyb20gJy4uLy4uL2J1aWxkZXIvY29tbW9uLWxheW91dC1hY3Rpb25zJ1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRW1wdHlHcmlkSXRlbSAobGF5b3V0OiBJTUxheW91dEpzb24sIHR5cGU6IEdyaWRJdGVtVHlwZSk6IHsgb3V0TGF5b3V0OiBJTUxheW91dEpzb24sIG91dEl0ZW06IEdyaWRMYXlvdXRJdGVtSnNvbiB9IHtcbiAgY29uc3Qgb3V0SXRlbSA9IHtcbiAgICBpZDogYCR7dXRpbHMuZ2V0TWF4aW11bUlkKGxheW91dCkgKyAxfWAsXG4gICAgZ3JpZFR5cGU6IHR5cGVcbiAgfVxuICBjb25zdCBvdXRMYXlvdXQgPSBsYXlvdXQuc2V0SW4oWydjb250ZW50Jywgb3V0SXRlbS5pZF0sIG91dEl0ZW0pXG4gIHJldHVybiB7IG91dExheW91dCwgb3V0SXRlbSB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhdHRhY2hUb0dyaWRJdGVtIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgc291cmNlOiBzdHJpbmcsIHRhcmdldDogc3RyaW5nLCBzaWRlOiBTaWRlVHlwZSk6IElNTGF5b3V0SnNvbiB7XG4gIHN3aXRjaCAoc2lkZSkge1xuICAgIGNhc2UgU2lkZVR5cGUuQ2VudGVyOlxuICAgICAgcmV0dXJuIGF0dGFjaChsYXlvdXQsIHNvdXJjZSwgdGFyZ2V0LCBHcmlkSXRlbVR5cGUuVGFiLCBmYWxzZSwgdHJ1ZSlcbiAgICBjYXNlIFNpZGVUeXBlLlRvcDpcbiAgICAgIHJldHVybiBhdHRhY2gobGF5b3V0LCBzb3VyY2UsIHRhcmdldCwgR3JpZEl0ZW1UeXBlLkNvbHVtbiwgdHJ1ZSwgZmFsc2UpXG4gICAgY2FzZSBTaWRlVHlwZS5Cb3R0b206XG4gICAgICByZXR1cm4gYXR0YWNoKGxheW91dCwgc291cmNlLCB0YXJnZXQsIEdyaWRJdGVtVHlwZS5Db2x1bW4sIGZhbHNlLCBmYWxzZSlcbiAgICBjYXNlIFNpZGVUeXBlLkxlZnQ6XG4gICAgICByZXR1cm4gYXR0YWNoKGxheW91dCwgc291cmNlLCB0YXJnZXQsIEdyaWRJdGVtVHlwZS5Sb3csIHRydWUsIGZhbHNlKVxuICAgIGNhc2UgU2lkZVR5cGUuUmlnaHQ6XG4gICAgICByZXR1cm4gYXR0YWNoKGxheW91dCwgc291cmNlLCB0YXJnZXQsIEdyaWRJdGVtVHlwZS5Sb3csIGZhbHNlLCBmYWxzZSlcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2l6ZSAobGF5b3V0OiBJTUxheW91dEpzb24sIGl0ZW1JZDogc3RyaW5nLCBzaXplOiBudW1iZXIpOiBJTUxheW91dEpzb24ge1xuICByZXR1cm4gbGF5b3V0LnNldEluKFsnY29udGVudCcsIGl0ZW1JZCwgJ2Jib3gnXSwgeyB3aWR0aDogc2l6ZSB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlR3JpZEl0ZW0gKGxheW91dDogSU1MYXlvdXRKc29uLCBpdGVtSWQ6IHN0cmluZywgcHJvcE5hbWU6IHN0cmluZywgdmFsdWU6IGFueSk6IElNTGF5b3V0SnNvbiB7XG4gIHJldHVybiBsYXlvdXQuc2V0SW4oWydjb250ZW50JywgaXRlbUlkLCBwcm9wTmFtZV0sIHZhbHVlKVxufVxuXG5mdW5jdGlvbiBhZGRDaGlsZCAobGF5b3V0OiBJTUxheW91dEpzb24sIGl0ZW1JZFRvQWRkOiBzdHJpbmcsIHRhcmdldEl0ZW1JZDogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBpbnNlcnRCZWZvcmU6IGJvb2xlYW4pOiBJTUxheW91dEpzb24ge1xuICBjb25zdCB0YXJnZXRMYXlvdXRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCB0YXJnZXRJdGVtSWQpXG4gIGNvbnN0IGl0ZW1zID0gW10uY29uY2F0KHRhcmdldExheW91dEl0ZW0uY2hpbGRyZW4pXG4gIGNvbnN0IHBvc2l0aW9uID0gaW5zZXJ0QmVmb3JlID8gaW5kZXggOiBpbmRleCArIDFcbiAgaXRlbXMuc3BsaWNlKHBvc2l0aW9uLCAwLCBpdGVtSWRUb0FkZClcblxuICByZXR1cm4gdXBkYXRlR3JpZEl0ZW0obGF5b3V0LCB0YXJnZXRJdGVtSWQsICdjaGlsZHJlbicsIGl0ZW1zKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZHVwbGljYXRlSXRlbSAobGF5b3V0SW5mbzogTGF5b3V0SW5mbykge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgY29uc3QgbmV3SXRlbUlkID0gYXBwQ29uZmlnQWN0aW9uLmR1cGxpY2F0ZUxheW91dEl0ZW1JblNhbWVMYXlvdXQoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0pXG4gIGNvbnN0IG5ld0xheW91dEluZm8gPSB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQ6IG5ld0l0ZW1JZCB9XG5cbiAgdXBkYXRlTGF5b3V0QW5kU2VsZWN0aW9uKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIG5ld0xheW91dEluZm8pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwZW5kR3JpZExheW91dEl0ZW0gKGxheW91dEluZm86IExheW91dEluZm8pIHtcbiAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgYXBwQ29uZmlnQWN0aW9uLnNldExheW91dEl0ZW1Ub1BlbmRpbmcobGF5b3V0SW5mbywgdHJ1ZSlcblxuICB1cGRhdGVMYXlvdXRBbmRTZWxlY3Rpb24oYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZywgbnVsbClcbn1cblxuZnVuY3Rpb24gcmVwbGFjZUNoaWxkIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgaXRlbUlkVG9BZGQ6IHN0cmluZywgdGFyZ2V0SXRlbUlkOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOiBJTUxheW91dEpzb24ge1xuICBjb25zdCB0YXJnZXRMYXlvdXRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCB0YXJnZXRJdGVtSWQpXG4gIGNvbnN0IGl0ZW1zID0gWy4uLnRhcmdldExheW91dEl0ZW0uY2hpbGRyZW5dXG4gIGl0ZW1zLnNwbGljZShpbmRleCwgMSwgaXRlbUlkVG9BZGQpXG5cbiAgcmV0dXJuIHVwZGF0ZUdyaWRJdGVtKGxheW91dCwgdGFyZ2V0SXRlbUlkLCAnY2hpbGRyZW4nLCBpdGVtcylcbn1cblxuZnVuY3Rpb24gbWVyZ2VJbnRvQU5ld0dyb3VwIChcbiAgbGF5b3V0OiBJTUxheW91dEpzb24sXG4gIHNvdXJjZTogc3RyaW5nLFxuICB0YXJnZXQ6IHN0cmluZyxcbiAgdHlwZTogR3JpZEl0ZW1UeXBlLFxuICBiZWZvcmVUYXJnZXQ6IGJvb2xlYW4sXG4gIHNoYXJlU3BhY2U6IGJvb2xlYW5cbikge1xuICBjb25zdCB0YXJnZXRMYXlvdXRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCB0YXJnZXQpXG4gIGNvbnN0IHsgcGFyZW50IH0gPSB0YXJnZXRMYXlvdXRJdGVtXG4gIGNvbnN0IHNpemUgPSArdGFyZ2V0TGF5b3V0SXRlbS5iYm94LndpZHRoXG4gIGNvbnN0IHBhcmVudExheW91dEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIHBhcmVudClcblxuICBjb25zdCByID0gY3JlYXRlRW1wdHlHcmlkSXRlbShsYXlvdXQsIHR5cGUpXG4gIGxldCBvdXRMYXlvdXQgPSByLm91dExheW91dFxuICBjb25zdCBncm91cCA9IHIub3V0SXRlbVxuXG4gIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgZ3JvdXAuaWQsICdwYXJlbnQnLCBwYXJlbnQpXG4gIG91dExheW91dCA9IHVwZGF0ZVNpemUob3V0TGF5b3V0LCBncm91cC5pZCwgc2l6ZSlcbiAgaWYgKHBhcmVudExheW91dEl0ZW0pIHtcbiAgICAvLyB1c2UgZ3JvdXAgdG8gcmVwbGFjZSB0aGUgdGFyZ2V0XG4gICAgY29uc3QgaW5kZXggPSBwYXJlbnRMYXlvdXRJdGVtLmNoaWxkcmVuLmluZGV4T2YodGFyZ2V0KVxuICAgIG91dExheW91dCA9IHJlcGxhY2VDaGlsZChvdXRMYXlvdXQsIGdyb3VwLmlkLCBwYXJlbnQsIGluZGV4KVxuICB9XG4gIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgc291cmNlLCAncGFyZW50JywgZ3JvdXAuaWQpXG4gIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgdGFyZ2V0LCAncGFyZW50JywgZ3JvdXAuaWQpXG4gIG91dExheW91dCA9IHVwZGF0ZVNpemUob3V0TGF5b3V0LCBzb3VyY2UsIHNoYXJlU3BhY2UgPyAxMDAgOiA1MClcbiAgb3V0TGF5b3V0ID0gdXBkYXRlU2l6ZShvdXRMYXlvdXQsIHRhcmdldCwgc2hhcmVTcGFjZSA/IDEwMCA6IDUwKVxuICBvdXRMYXlvdXQgPSB1cGRhdGVHcmlkSXRlbShvdXRMYXlvdXQsIGdyb3VwLmlkLCAnY2hpbGRyZW4nLCBiZWZvcmVUYXJnZXQgPyBbc291cmNlLCB0YXJnZXRdIDogW3RhcmdldCwgc291cmNlXSlcblxuICBpZiAodHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlRhYikge1xuICAgIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgZ3JvdXAuaWQsICdhY3RpdmVUYWInLCAxKVxuICB9XG5cbiAgaWYgKHRhcmdldCA9PT0gb3V0TGF5b3V0LnNldHRpbmcucm9vdEl0ZW0pIHtcbiAgICBvdXRMYXlvdXQgPSBvdXRMYXlvdXQuc2V0SW4oWydzZXR0aW5nJywgJ3Jvb3RJdGVtJ10sIGdyb3VwLmlkKVxuICB9XG4gIHJldHVybiBvdXRMYXlvdXRcbn1cblxuZnVuY3Rpb24gYXR0YWNoUGxhaW4gKFxuICBsYXlvdXQ6IElNTGF5b3V0SnNvbixcbiAgc291cmNlSXRlbTogSU1HcmlkTGF5b3V0SXRlbUpzb24sXG4gIHRhcmdldDogc3RyaW5nLFxuICB0eXBlOiBHcmlkSXRlbVR5cGUsXG4gIGJlZm9yZVRhcmdldDogYm9vbGVhbixcbiAgc2hhcmVTcGFjZTogYm9vbGVhblxuKTogSU1MYXlvdXRKc29uIHtcbiAgY29uc3QgdGFyZ2V0TGF5b3V0SXRlbSA9IGdldEdyaWRJdGVtKGxheW91dCwgdGFyZ2V0KVxuICBjb25zdCB7IHBhcmVudCB9ID0gdGFyZ2V0TGF5b3V0SXRlbVxuICBjb25zdCBzaXplID0gK3RhcmdldExheW91dEl0ZW0uYmJveC53aWR0aFxuICBjb25zdCBwYXJlbnRMYXlvdXRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCBwYXJlbnQpXG4gIC8vIGNvbnN0IHBhcmVudFNldHRpbmcgPSBwYXJlbnRMYXlvdXRJdGVtPy5zZXR0aW5nXG4gIGxldCBvdXRMYXlvdXQgPSBsYXlvdXRcblxuICBpZiAocGFyZW50TGF5b3V0SXRlbT8uZ3JpZFR5cGUgPT09IHR5cGUpIHtcbiAgICAvLyBhZGQgYXMgYSBuZXcgaXRlbSBvZiB0aGUgcGFyZW50XG4gICAgY29uc3QgaW5kZXggPSBwYXJlbnRMYXlvdXRJdGVtLmNoaWxkcmVuLmluZGV4T2YodGFyZ2V0KVxuXG4gICAgb3V0TGF5b3V0ID0gYWRkQ2hpbGQob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCBwYXJlbnQsIGluZGV4LCBiZWZvcmVUYXJnZXQpXG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCAncGFyZW50JywgcGFyZW50KVxuICAgIG91dExheW91dCA9IHVwZGF0ZVNpemUob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCBzaGFyZVNwYWNlID8gMTAwIDogc2l6ZSAvIDIpXG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlU2l6ZShvdXRMYXlvdXQsIHRhcmdldCwgc2hhcmVTcGFjZSA/IDEwMCA6IHNpemUgLyAyKVxuXG4gICAgaWYgKHR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICAgIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgcGFyZW50LCAnYWN0aXZlVGFiJywgaW5kZXggKyAxKVxuICAgIH1cblxuICAgIHJldHVybiBvdXRMYXlvdXRcbiAgfVxuXG4gIHJldHVybiBtZXJnZUludG9BTmV3R3JvdXAoXG4gICAgb3V0TGF5b3V0LFxuICAgIHNvdXJjZUl0ZW0uaWQsXG4gICAgdGFyZ2V0LFxuICAgIHR5cGUsXG4gICAgYmVmb3JlVGFyZ2V0LFxuICAgIHNoYXJlU3BhY2VcbiAgKVxufVxuXG5mdW5jdGlvbiBhdHRhY2hDb2x1bW5PclJvdyAoXG4gIGxheW91dDogSU1MYXlvdXRKc29uLFxuICBzb3VyY2VJdGVtOiBJTUdyaWRMYXlvdXRJdGVtSnNvbixcbiAgdGFyZ2V0OiBzdHJpbmcsXG4gIHR5cGU6IEdyaWRJdGVtVHlwZSxcbiAgYmVmb3JlVGFyZ2V0OiBib29sZWFuLFxuICBzaGFyZVNwYWNlOiBib29sZWFuXG4pOiBJTUxheW91dEpzb24ge1xuICBjb25zdCBzb3VyY2VUeXBlID0gc291cmNlSXRlbS5ncmlkVHlwZVxuICBjb25zdCB0YXJnZXRMYXlvdXRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCB0YXJnZXQpXG4gIGNvbnN0IHsgcGFyZW50IH0gPSB0YXJnZXRMYXlvdXRJdGVtXG4gIGNvbnN0IHNpemUgPSArdGFyZ2V0TGF5b3V0SXRlbS5iYm94LndpZHRoXG4gIGNvbnN0IHBhcmVudExheW91dEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIHBhcmVudClcbiAgLy8gY29uc3QgcGFyZW50U2V0dGluZyA9IHBhcmVudExheW91dEl0ZW0/LnNldHRpbmdcbiAgbGV0IG91dExheW91dCA9IGxheW91dFxuXG4gIGlmIChwYXJlbnRMYXlvdXRJdGVtPy5ncmlkVHlwZSA9PT0gdHlwZSkge1xuICAgIC8vIGFkZCBhcyBhIG5ldyBpdGVtIG9mIHRoZSBwYXJlbnRcbiAgICBjb25zdCBpbmRleCA9IHBhcmVudExheW91dEl0ZW0uY2hpbGRyZW4uaW5kZXhPZih0YXJnZXQpXG4gICAgaWYgKHNvdXJjZVR5cGUgPT09IHR5cGUpIHtcbiAgICAgIC8vIGV4dHJhY3QgdGhlIHNvdXJjZSBjb250ZW50IHRvIHRoZSBwYXJlbnRcbiAgICAgIGNvbnN0IHNvdXJjZUNvbnRlbnQgPSBzb3VyY2VJdGVtLmNoaWxkcmVuXG4gICAgICBjb25zdCBwYXJlbnRDb250ZW50ID0gWy4uLnBhcmVudExheW91dEl0ZW0uY2hpbGRyZW5dXG4gICAgICBpZiAoYmVmb3JlVGFyZ2V0KSB7XG4gICAgICAgIHBhcmVudENvbnRlbnQuc3BsaWNlKGluZGV4LCAwLCAuLi5zb3VyY2VDb250ZW50KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50Q29udGVudC5zcGxpY2UoaW5kZXggKyAxLCAwLCAuLi5zb3VyY2VDb250ZW50KVxuICAgICAgfVxuICAgICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBwYXJlbnQsICdjaGlsZHJlbicsIHBhcmVudENvbnRlbnQpXG4gICAgICBvdXRMYXlvdXQgPSBvdXRMYXlvdXQuc2V0KCdjb250ZW50Jywgb3V0TGF5b3V0LmNvbnRlbnQud2l0aG91dChzb3VyY2VJdGVtLmlkKSkgLy8gcmVtb3ZlIHRoZSBzb3VyY2VcblxuICAgICAgc291cmNlQ29udGVudC5mb3JFYWNoKGNoaWxkSWQgPT4ge1xuICAgICAgICBjb25zdCBjaGlsZEl0ZW0gPSBvdXRMYXlvdXQuY29udGVudFtjaGlsZElkXVxuICAgICAgICBjb25zdCBjaGlsZFNpemUgPSArY2hpbGRJdGVtLmJib3gud2lkdGhcbiAgICAgICAgb3V0TGF5b3V0ID0gdXBkYXRlU2l6ZShvdXRMYXlvdXQsIGNoaWxkSWQsIGNoaWxkU2l6ZSAqIHNpemUgLyAyMDApXG4gICAgICAgIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgY2hpbGRJZCwgJ3BhcmVudCcsIHBhcmVudClcbiAgICAgIH0pXG4gICAgICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgdGFyZ2V0LCBzaXplIC8gMilcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0TGF5b3V0ID0gYWRkQ2hpbGQob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCBwYXJlbnQsIGluZGV4LCBiZWZvcmVUYXJnZXQpXG4gICAgICBvdXRMYXlvdXQgPSB1cGRhdGVHcmlkSXRlbShvdXRMYXlvdXQsIHNvdXJjZUl0ZW0uaWQsICdwYXJlbnQnLCBwYXJlbnQpXG4gICAgICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgc291cmNlSXRlbS5pZCwgc2hhcmVTcGFjZSA/IDEwMCA6IHNpemUgLyAyKVxuICAgICAgb3V0TGF5b3V0ID0gdXBkYXRlU2l6ZShvdXRMYXlvdXQsIHRhcmdldCwgc2hhcmVTcGFjZSA/IDEwMCA6IHNpemUgLyAyKVxuXG4gICAgICBpZiAodHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlRhYikge1xuICAgICAgICBvdXRMYXlvdXQgPSB1cGRhdGVHcmlkSXRlbShvdXRMYXlvdXQsIHBhcmVudCwgJ2FjdGl2ZVRhYicsIGluZGV4ICsgMSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dExheW91dFxuICB9XG5cbiAgaWYgKHNvdXJjZVR5cGUgPT09IHR5cGUpIHtcbiAgICAvLyBwdXQgdGhlIHJlZmVyZW5jZSBpdGVtIGludG8gdGhlIHNvdXJjZSBpdGVtJ3MgZ3JvdXAsIGFuZCB1c2UgdGhlIHNvdXJjZSBpdGVtIHRvIHJlcGxhY2UgdGhlIHJlZmVyZW5jZVxuICAgIGNvbnN0IGluZGV4ID0gcGFyZW50TGF5b3V0SXRlbS5jaGlsZHJlbi5pbmRleE9mKHRhcmdldClcbiAgICBvdXRMYXlvdXQgPSBhZGRDaGlsZChcbiAgICAgIG91dExheW91dCxcbiAgICAgIHRhcmdldCxcbiAgICAgIHNvdXJjZUl0ZW0uaWQsXG4gICAgICBiZWZvcmVUYXJnZXQgPyBzb3VyY2VJdGVtLmNoaWxkcmVuLmxlbmd0aCA6IDAsXG4gICAgICAhYmVmb3JlVGFyZ2V0XG4gICAgKVxuICAgIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgdGFyZ2V0LCAncGFyZW50Jywgc291cmNlSXRlbS5pZClcbiAgICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgdGFyZ2V0LCA1MClcbiAgICBzb3VyY2VJdGVtLmNoaWxkcmVuLmZvckVhY2goY2hpbGRJZCA9PiB7XG4gICAgICBjb25zdCBjaGlsZEl0ZW0gPSBvdXRMYXlvdXQuY29udGVudFtjaGlsZElkXVxuICAgICAgY29uc3QgY2hpbGRTaXplID0gK2NoaWxkSXRlbS5iYm94LndpZHRoXG4gICAgICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgY2hpbGRJZCwgY2hpbGRTaXplICogMC41KVxuICAgIH0pXG5cbiAgICBjb25zdCBwYXJlbnRDb250ZW50ID0gWy4uLnBhcmVudExheW91dEl0ZW0uY2hpbGRyZW5dXG4gICAgcGFyZW50Q29udGVudC5zcGxpY2UoaW5kZXgsIDEsIHNvdXJjZUl0ZW0uaWQpXG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBwYXJlbnQsICdjaGlsZHJlbicsIHBhcmVudENvbnRlbnQpXG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCAncGFyZW50JywgcGFyZW50KVxuXG4gICAgcmV0dXJuIG91dExheW91dFxuICB9XG5cbiAgcmV0dXJuIG1lcmdlSW50b0FOZXdHcm91cChcbiAgICBvdXRMYXlvdXQsXG4gICAgc291cmNlSXRlbS5pZCxcbiAgICB0YXJnZXQsXG4gICAgdHlwZSxcbiAgICBiZWZvcmVUYXJnZXQsXG4gICAgc2hhcmVTcGFjZVxuICApXG59XG5cbmZ1bmN0aW9uIGF0dGFjaFRhYiAoXG4gIGxheW91dDogSU1MYXlvdXRKc29uLFxuICBzb3VyY2VJdGVtOiBJTUdyaWRMYXlvdXRJdGVtSnNvbixcbiAgdGFyZ2V0OiBzdHJpbmcsXG4gIHR5cGU6IEdyaWRJdGVtVHlwZSxcbiAgYmVmb3JlVGFyZ2V0OiBib29sZWFuLFxuICBzaGFyZVNwYWNlOiBib29sZWFuXG4pOiBJTUxheW91dEpzb24ge1xuICBjb25zdCB0YXJnZXRMYXlvdXRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCB0YXJnZXQpXG4gIGNvbnN0IHsgcGFyZW50IH0gPSB0YXJnZXRMYXlvdXRJdGVtXG4gIGNvbnN0IHNpemUgPSArdGFyZ2V0TGF5b3V0SXRlbS5iYm94LndpZHRoXG4gIGNvbnN0IHBhcmVudExheW91dEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIHBhcmVudClcbiAgLy8gY29uc3QgcGFyZW50U2V0dGluZyA9IHBhcmVudExheW91dEl0ZW0/LnNldHRpbmdcbiAgbGV0IG91dExheW91dCA9IGxheW91dFxuXG4gIC8vIGFkZCB0YWIgdG8gZm9ybSB0YWJcbiAgaWYgKHR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICBpZiAocGFyZW50TGF5b3V0SXRlbT8uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICAgIC8vIGV4dHJhY3Qgc291cmNlJ3MgY2hpbGRyZW4gdG8gcGFyZW50XG4gICAgICBjb25zdCBpbmRleCA9IHBhcmVudExheW91dEl0ZW0uY2hpbGRyZW4uaW5kZXhPZih0YXJnZXQpXG4gICAgICBjb25zdCBpdGVtcyA9IFtdLmNvbmNhdChwYXJlbnRMYXlvdXRJdGVtLmNoaWxkcmVuKVxuICAgICAgaXRlbXMuc3BsaWNlKGluZGV4ICsgMSwgMCwgLi4uc291cmNlSXRlbS5jaGlsZHJlbilcbiAgICAgIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKGxheW91dCwgcGFyZW50LCAnY2hpbGRyZW4nLCBpdGVtcylcbiAgICAgIHNvdXJjZUl0ZW0uY2hpbGRyZW4uZm9yRWFjaChjaGlsZElkID0+IHtcbiAgICAgICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBjaGlsZElkLCAncGFyZW50JywgcGFyZW50KVxuICAgICAgfSlcbiAgICAgIG91dExheW91dCA9IG91dExheW91dC5zZXQoJ2NvbnRlbnQnLCBvdXRMYXlvdXQuY29udGVudC53aXRob3V0KHNvdXJjZUl0ZW0uaWQpKVxuICAgICAgcmV0dXJuIG91dExheW91dFxuICAgIH1cbiAgICAvLyBhZGQgdGhlIHRhcmdldCBhcyBmaXJzdCBjaGlsZCBvZiB0aGUgc291cmNlIHRhYlxuICAgIGNvbnN0IGluZGV4ID0gcGFyZW50TGF5b3V0SXRlbS5jaGlsZHJlbi5pbmRleE9mKHRhcmdldClcbiAgICBjb25zdCBpdGVtcyA9IFtdLmNvbmNhdChwYXJlbnRMYXlvdXRJdGVtLmNoaWxkcmVuKVxuICAgIGl0ZW1zLnNwbGljZShpbmRleCwgMSwgc291cmNlSXRlbS5pZClcbiAgICBvdXRMYXlvdXQgPSB1cGRhdGVHcmlkSXRlbShsYXlvdXQsIHBhcmVudCwgJ2NoaWxkcmVuJywgaXRlbXMpXG4gICAgb3V0TGF5b3V0ID0gYWRkQ2hpbGQob3V0TGF5b3V0LCB0YXJnZXQsIHNvdXJjZUl0ZW0uaWQsIDAsIHRydWUpXG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCB0YXJnZXQsICdwYXJlbnQnLCBzb3VyY2VJdGVtLmlkKVxuICAgIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgc291cmNlSXRlbS5pZCwgJ3BhcmVudCcsIHBhcmVudClcbiAgICByZXR1cm4gb3V0TGF5b3V0XG4gIH1cblxuICAvLyBhZGQgdGFiIHRvIGZvcm0gcm93L2NvbHVtblxuICBpZiAocGFyZW50TGF5b3V0SXRlbT8uZ3JpZFR5cGUgPT09IHR5cGUpIHtcbiAgICAvLyBhZGQgYXMgYSBuZXcgaXRlbSBvZiB0aGUgcGFyZW50XG4gICAgY29uc3QgaW5kZXggPSBwYXJlbnRMYXlvdXRJdGVtLmNoaWxkcmVuLmluZGV4T2YodGFyZ2V0KVxuXG4gICAgb3V0TGF5b3V0ID0gYWRkQ2hpbGQob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCBwYXJlbnQsIGluZGV4LCBiZWZvcmVUYXJnZXQpXG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCAncGFyZW50JywgcGFyZW50KVxuICAgIG91dExheW91dCA9IHVwZGF0ZVNpemUob3V0TGF5b3V0LCBzb3VyY2VJdGVtLmlkLCBzaGFyZVNwYWNlID8gMTAwIDogc2l6ZSAvIDIpXG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlU2l6ZShvdXRMYXlvdXQsIHRhcmdldCwgc2hhcmVTcGFjZSA/IDEwMCA6IHNpemUgLyAyKVxuXG4gICAgcmV0dXJuIG91dExheW91dFxuICB9XG5cbiAgcmV0dXJuIG1lcmdlSW50b0FOZXdHcm91cChcbiAgICBvdXRMYXlvdXQsXG4gICAgc291cmNlSXRlbS5pZCxcbiAgICB0YXJnZXQsXG4gICAgdHlwZSxcbiAgICBiZWZvcmVUYXJnZXQsXG4gICAgc2hhcmVTcGFjZVxuICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhdHRhY2ggKFxuICBsYXlvdXQ6IElNTGF5b3V0SnNvbixcbiAgc291cmNlOiBzdHJpbmcsXG4gIHRhcmdldDogc3RyaW5nLFxuICB0eXBlOiBHcmlkSXRlbVR5cGUsXG4gIGJlZm9yZVRhcmdldDogYm9vbGVhbixcbiAgc2hhcmVTcGFjZTogYm9vbGVhblxuKTogSU1MYXlvdXRKc29uIHtcbiAgY29uc3Qgc291cmNlTGF5b3V0SXRlbSA9IGdldEdyaWRJdGVtKGxheW91dCwgc291cmNlKVxuICBjb25zdCB7IGdyaWRUeXBlOiBzb3VyY2VUeXBlIH0gPSBzb3VyY2VMYXlvdXRJdGVtXG5cbiAgc3dpdGNoIChzb3VyY2VUeXBlKSB7XG4gICAgY2FzZSBHcmlkSXRlbVR5cGUuQ29sdW1uOlxuICAgIGNhc2UgR3JpZEl0ZW1UeXBlLlJvdzpcbiAgICAgIHJldHVybiBhdHRhY2hDb2x1bW5PclJvdyhsYXlvdXQsIHNvdXJjZUxheW91dEl0ZW0sIHRhcmdldCwgdHlwZSwgYmVmb3JlVGFyZ2V0LCBzaGFyZVNwYWNlKVxuICAgIGNhc2UgR3JpZEl0ZW1UeXBlLlRhYjpcbiAgICAgIHJldHVybiBhdHRhY2hUYWIobGF5b3V0LCBzb3VyY2VMYXlvdXRJdGVtLCB0YXJnZXQsIHR5cGUsIGJlZm9yZVRhcmdldCwgc2hhcmVTcGFjZSlcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGF0dGFjaFBsYWluKGxheW91dCwgc291cmNlTGF5b3V0SXRlbSwgdGFyZ2V0LCB0eXBlLCBiZWZvcmVUYXJnZXQsIHNoYXJlU3BhY2UpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0R3JpZENlbGwgKGxheW91dEluZm86IExheW91dEluZm8sIGRpcmVjdGlvbjogJ2gnIHwgJ3YnKSB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICBjb25zdCB7IGxheW91dHMgfSA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWdcblxuICBsZXQgb3V0TGF5b3V0ID0gbGF5b3V0c1tsYXlvdXRJZF1cbiAgY29uc3QgciA9IGNyZWF0ZUVtcHR5R3JpZEl0ZW0ob3V0TGF5b3V0LCBHcmlkSXRlbVR5cGUuUGxhaW4pXG4gIG91dExheW91dCA9IHIub3V0TGF5b3V0XG4gIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCByLm91dEl0ZW0uaWQsICd0eXBlJ10sIExheW91dEl0ZW1UeXBlLldpZGdldClcbiAgY29uc3QgbmV3SXRlbSA9IG91dExheW91dC5jb250ZW50W3Iub3V0SXRlbS5pZF1cblxuICBpZiAoZGlyZWN0aW9uID09PSAnaCcpIHtcbiAgICBvdXRMYXlvdXQgPSBhdHRhY2gob3V0TGF5b3V0LCBuZXdJdGVtLmlkLCBsYXlvdXRJdGVtSWQsIEdyaWRJdGVtVHlwZS5Sb3csIGZhbHNlLCBmYWxzZSlcbiAgfSBlbHNlIHtcbiAgICBvdXRMYXlvdXQgPSBhdHRhY2gob3V0TGF5b3V0LCBuZXdJdGVtLmlkLCBsYXlvdXRJdGVtSWQsIEdyaWRJdGVtVHlwZS5Db2x1bW4sIGZhbHNlLCBmYWxzZSlcbiAgfVxuXG4gIGNvbnN0IGFwcENvbmZpZyA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgbGF5b3V0SWRdLCBvdXRMYXlvdXQpXG4gIGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpLmV4ZWMoKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIEFwcE1vZGUsXG4gIEFuaW1hdGlvbkNvbnRleHQsXG4gIFBhcmVudEFuaW1hdGlvbk1vZGUsXG4gIExheW91dEl0ZW1UeXBlLFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICBHcmlkSXRlbVR5cGUsXG4gIGhvb2tzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGludGVyYWN0IH0gZnJvbSAnamltdS1jb3JlL2RuZCdcbmltcG9ydCB7IFRhYnMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IEdyaWRMYXlvdXRJdGVtIH0gZnJvbSAnLi9sYXlvdXQtaXRlbSdcbmltcG9ydCB7IFNwbGl0dGVyIH0gZnJvbSAnLi4vY29tbW9uL3NwbGl0dGVyJ1xuaW1wb3J0IHsgY3JlYXRlRHJhZ2dpbmdQbGFjZWhvbGRlciwgYmluZERyYWdIYW5kbGVyIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcmFnLWV2ZW50LWhhbmRsZXInXG5pbXBvcnQgeyBEcmFnZ2FibGVUYWIgfSBmcm9tICcuL2RyYWdnYWJsZS10YWInXG5pbXBvcnQgeyBpbmRleE9mUGxhaW5Db250ZW50LCBpc0xhc3RDaGlsZE9mUm9vdEl0ZW0sIGdldEdyaWRJdGVtIH0gZnJvbSAnLi4vY29tbW9uL3V0aWxzJ1xuaW1wb3J0IHsgR3JpZEl0ZW1Ub29sYmFyIH0gZnJvbSAnLi9ncmlkLWl0ZW0tdG9vbGJhcidcbmltcG9ydCB7IGdldFRoZW1lMiB9IGZyb20gJ2ppbXUtdGhlbWUnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGxheW91dDogSU1MYXlvdXRKc29uXG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIGlzTGFzdD86IGJvb2xlYW5cbiAgb25EcmFnU3RhcnQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZFxuICBvbkRyYWdnaW5nPzogKGlkOiBzdHJpbmcsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpID0+IHZvaWRcbiAgb25EcmFnRW5kPzogKGlkOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuaW50ZXJmYWNlIENvbnRhaW5lclByb3BzIHtcbiAgbGF5b3V0OiBJTUxheW91dEpzb25cbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmdcbiAgaXRlbXM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cbn1cblxuaW50ZXJmYWNlIFRhYkRyYWdIYW5kbGVyIHtcbiAgb25EcmFnU3RhcnQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZFxuICBvbkRyYWdnaW5nPzogKGlkOiBzdHJpbmcsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpID0+IHZvaWRcbiAgb25EcmFnRW5kPzogKGlkOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdyaWRJdGVtQ29tcG9uZW50IChwcm9wczogUHJvcHMgJiBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4pIHtcbiAgY29uc3QgeyBsYXlvdXQsIGxheW91dEl0ZW1JZCwgaXNMYXN0LCBvbkRyYWdTdGFydCwgb25EcmFnZ2luZywgb25EcmFnRW5kLCBjbGFzc05hbWUgfSA9IHByb3BzXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0R3JpZEl0ZW0obGF5b3V0LCBsYXlvdXRJdGVtSWQpXG4gIH0sIFtsYXlvdXQsIGxheW91dEl0ZW1JZF0pXG4gIGNvbnN0IHBhcmVudFR5cGUgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobGF5b3V0SXRlbT8ucGFyZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCBsYXlvdXRJdGVtLnBhcmVudClcbiAgICAgIHJldHVybiBwYXJlbnRJdGVtLmdyaWRUeXBlXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sIFtsYXlvdXRJdGVtLCBsYXlvdXRdKVxuXG4gIGNvbnN0IHNwbGl0U3BhY2UgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHNpemUgPSBsYXlvdXQuc2V0dGluZz8uc3BsaXRTaXplID8/IDhcbiAgICBsZXQgbnVtT2ZDaGlsZHJlbiA9IDBcblxuICAgIGlmIChsYXlvdXRJdGVtPy5wYXJlbnQpIHtcbiAgICAgIGNvbnN0IHBhcmVudEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIGxheW91dEl0ZW0ucGFyZW50KVxuICAgICAgbnVtT2ZDaGlsZHJlbiA9IHBhcmVudEl0ZW0uY2hpbGRyZW4ubGVuZ3RoXG4gICAgfVxuICAgIGNvbnN0IHRvdGFsID0gc2l6ZSAqIChudW1PZkNoaWxkcmVuIC0gMSlcbiAgICByZXR1cm4gdG90YWwgLyBudW1PZkNoaWxkcmVuXG4gIH0pXG5cbiAgY29uc3QgYW5pbWF0aW9uQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoQW5pbWF0aW9uQ29udGV4dClcbiAgY29uc3QgaW50ZXJ2YWwgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoYW5pbWF0aW9uQ29udGV4dD8uc2V0dGluZz8ub3B0aW9uPy5wYXJlbnRNb2RlID09PSBQYXJlbnRBbmltYXRpb25Nb2RlLkFsbEF0T25jZSkge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIDI1MFxuICB9LCBbYW5pbWF0aW9uQ29udGV4dF0pXG5cbiAgY29uc3QgZ2V0U3R5bGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgbGV0IHNpemVcbiAgICBpZiAoc3BsaXRTcGFjZSA+IDApIHtcbiAgICAgIHNpemUgPSBgY2FsYygkeytsYXlvdXRJdGVtLmJib3gud2lkdGh9JSAtICR7c3BsaXRTcGFjZS50b0ZpeGVkKDIpfXB4KWBcbiAgICB9IGVsc2Uge1xuICAgICAgc2l6ZSA9IGAkeytsYXlvdXRJdGVtLmJib3gud2lkdGh9JWBcbiAgICB9XG4gICAgaWYgKHBhcmVudFR5cGUgPT09IEdyaWRJdGVtVHlwZS5Sb3cpIHtcbiAgICAgIHJldHVybiBjc3NgXG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgd2lkdGg6ICR7c2l6ZX07XG4gICAgICBgXG4gICAgfVxuICAgIGlmIChwYXJlbnRUeXBlID09PSBHcmlkSXRlbVR5cGUuQ29sdW1uKSB7XG4gICAgICByZXR1cm4gY3NzYFxuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAke3NpemV9O1xuICAgICAgYFxuICAgIH1cbiAgICByZXR1cm4gY3NzYFxuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYFxuICB9LCBbbGF5b3V0SXRlbS5iYm94LndpZHRoLCBzcGxpdFNwYWNlLCBwYXJlbnRUeXBlXSlcblxuICBpZiAobGF5b3V0SXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlJvdykge1xuICAgIHJldHVybiAoXG4gICAgICA8Um93Q29udGFpbmVyXG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICBjc3M9e2dldFN0eWxlKCl9XG4gICAgICAgIGxheW91dD17bGF5b3V0fVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgaXRlbXM9e2xheW91dEl0ZW0uY2hpbGRyZW59XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIGlmIChsYXlvdXRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuQ29sdW1uKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDb2xDb250YWluZXJcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgIGNzcz17Z2V0U3R5bGUoKX1cbiAgICAgICAgbGF5b3V0PXtsYXlvdXR9XG4gICAgICAgIGxheW91dEl0ZW1JZD17bGF5b3V0SXRlbUlkfVxuICAgICAgICBpdGVtcz17bGF5b3V0SXRlbS5jaGlsZHJlbn1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgaWYgKGxheW91dEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRhYkNvbnRhaW5lclxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgY3NzPXtnZXRTdHlsZSgpfVxuICAgICAgICBsYXlvdXQ9e2xheW91dH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtSWR9XG4gICAgICAgIGl0ZW1zPXtsYXlvdXRJdGVtLmNoaWxkcmVufVxuICAgICAgICBvbkRyYWdTdGFydD17b25EcmFnU3RhcnR9XG4gICAgICAgIG9uRHJhZ0VuZD17b25EcmFnRW5kfVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBjb25zdCBpZHggPSBpbmRleE9mUGxhaW5Db250ZW50KGxheW91dCwgbGF5b3V0SXRlbUlkKVxuICBjb25zdCBpc0xhc3RDaGlsZCA9IGlzTGFzdENoaWxkT2ZSb290SXRlbShsYXlvdXQsIGxheW91dEl0ZW1JZClcbiAgcmV0dXJuIChcbiAgICA8R3JpZExheW91dEl0ZW1cbiAgICAgIGNzcz17Z2V0U3R5bGUoKX1cbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhgZC1mbGV4ICR7Y2xhc3NOYW1lfWAsIHsgJ2lzLWxhc3QnOiBpc0xhc3QgfSl9XG4gICAgICBsYXlvdXRJZD17bGF5b3V0LmlkfVxuICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtSWR9XG4gICAgICBkZWxheT17aWR4ICogaW50ZXJ2YWx9XG4gICAgICBpc0xhc3RDaGlsZD17aXNMYXN0Q2hpbGR9XG4gICAgICBvbkRyYWdTdGFydD17b25EcmFnU3RhcnR9XG4gICAgICBvbkRyYWdnaW5nPXtvbkRyYWdnaW5nfVxuICAgICAgb25EcmFnRW5kPXtvbkRyYWdFbmR9XG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBSb3dDb250YWluZXIgKHByb3BzOiBDb250YWluZXJQcm9wcyAmIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pikge1xuICBjb25zdCB7IGxheW91dCwgbGF5b3V0SXRlbUlkLCBpdGVtcywgY2xhc3NOYW1lIH0gPSBwcm9wc1xuICBjb25zdCBkb21SZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3QgaXNEZXNpZ25Nb2RlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwUnVudGltZUluZm8/LmFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduXG4gIH0pXG5cbiAgY29uc3Qgc2VsZWN0ZWQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHN0YXRlLmFwcFJ1bnRpbWVJbmZvLnNlbGVjdGlvblxuICAgIHJldHVybiBzZWxlY3Rpb24/LmxheW91dElkID09PSBsYXlvdXQuaWQgJiYgc2VsZWN0aW9uPy5sYXlvdXRJdGVtSWQgPT09IGxheW91dEl0ZW1JZFxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZVJlc2l6ZUVuZCA9IGhvb2tzLnVzZUV2ZW50Q2FsbGJhY2soKGlkLCBkeCkgPT4ge1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgY29uc3QgaW5kZXggPSBpdGVtcy5pbmRleE9mKGlkKVxuICAgIGNvbnN0IG5leHRJZCA9IGl0ZW1zW2luZGV4ICsgMV1cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgY29uc3QgbmV4dExheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtuZXh0SWRdXG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiBsYXlvdXQuaWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogaWRcbiAgICAgIH0sXG4gICAgICAnYmJveCcsXG4gICAgICB7IHdpZHRoOiArbGF5b3V0SXRlbS5iYm94LndpZHRoICsgZHggfVxuICAgICkuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IGxheW91dC5pZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiBuZXh0SWRcbiAgICAgIH0sXG4gICAgICAnYmJveCcsXG4gICAgICB7IHdpZHRoOiArbmV4dExheW91dEl0ZW0uYmJveC53aWR0aCAtIGR4IH1cbiAgICApLmV4ZWMoKVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZURyYWdTdGFydCA9IGhvb2tzLnVzZUV2ZW50Q2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvbVJlZi5jdXJyZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdltkYXRhLWxheW91dGl0ZW1pZD1cIiR7aWR9XCJdYClcbiAgICBsZXQgc3BsaXR0ZXI6IEhUTUxFbGVtZW50XG4gICAgbGV0IG5laWdoYm9ySXRlbTogSFRNTEVsZW1lbnRcbiAgICBpZiAodGFyZ2V0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc/LmNsYXNzTGlzdC5jb250YWlucygnZ3JpZC1zcGxpdCcpKSB7XG4gICAgICBzcGxpdHRlciA9IHRhcmdldEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50XG4gICAgICBuZWlnaGJvckl0ZW0gPSBzcGxpdHRlci5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnRcbiAgICB9IGVsc2Uge1xuICAgICAgc3BsaXR0ZXIgPSB0YXJnZXRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnRcbiAgICAgIG5laWdoYm9ySXRlbSA9IHNwbGl0dGVyLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnRcbiAgICB9XG4gICAgY29uc3QgcGFyZW50UmVjdCA9IHRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHRhcmdldFJlY3QgPSB0YXJnZXRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdGFyZ2V0RWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3RhcmdldEVsZW1lbnQuY2xpZW50V2lkdGh9cHhgXG4gICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0YXJnZXRFbGVtZW50LmNsaWVudEhlaWdodH1weGBcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmxlZnQgPSBgJHt0YXJnZXRSZWN0LmxlZnQgLSBwYXJlbnRSZWN0LmxlZnR9cHhgXG4gICAgdGFyZ2V0RWxlbWVudC5zdHlsZS50b3AgPSBgJHt0YXJnZXRSZWN0LnRvcCAtIHBhcmVudFJlY3QudG9wfXB4YFxuICAgIHRhcmdldEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXG4gICAgbmVpZ2hib3JJdGVtLnN0eWxlLndpZHRoID0gYCR7dGFyZ2V0RWxlbWVudC5jbGllbnRXaWR0aCArIHNwbGl0dGVyLmNsaWVudFdpZHRoICsgbmVpZ2hib3JJdGVtLmNsaWVudFdpZHRofXB4YFxuICAgIHNwbGl0dGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgfSlcblxuICBjb25zdCBoYW5kbGVEcmFnRW5kID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9tUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcihgZGl2W2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtpZH1cIl1gKVxuICAgIGxldCBzcGxpdHRlcjogSFRNTEVsZW1lbnRcbiAgICBsZXQgbmVpZ2hib3JJdGVtOiBIVE1MRWxlbWVudFxuICAgIGlmICh0YXJnZXRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKCdncmlkLXNwbGl0JykpIHtcbiAgICAgIHNwbGl0dGVyID0gdGFyZ2V0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnRcbiAgICAgIG5laWdoYm9ySXRlbSA9IHNwbGl0dGVyLm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGxpdHRlciA9IHRhcmdldEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgICAgbmVpZ2hib3JJdGVtID0gc3BsaXR0ZXIucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgIH1cbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLndpZHRoID0gbnVsbFxuICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gbnVsbFxuICAgIHRhcmdldEVsZW1lbnQuc3R5bGUubGVmdCA9IG51bGxcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRvcCA9IG51bGxcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gbnVsbFxuICAgIG5laWdoYm9ySXRlbS5zdHlsZS53aWR0aCA9IG51bGxcbiAgICBzcGxpdHRlci5zdHlsZS5kaXNwbGF5ID0gbnVsbFxuICB9KVxuXG4gIGNvbnN0IGNyZWF0ZUl0ZW0gPSAoaXRlbUlkOiBzdHJpbmcsIGlzTGFzdDogYm9vbGVhbikgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtpdGVtSWR9PlxuICAgICAgICA8R3JpZEl0ZW1Db21wb25lbnRcbiAgICAgICAgICBrZXk9e2l0ZW1JZH1cbiAgICAgICAgICBjbGFzc05hbWU9J2dyaWQtcm93LWl0ZW0nXG4gICAgICAgICAgbGF5b3V0PXtsYXlvdXR9XG4gICAgICAgICAgbGF5b3V0SXRlbUlkPXtpdGVtSWR9XG4gICAgICAgICAgb25EcmFnU3RhcnQ9e2hhbmRsZURyYWdTdGFydH1cbiAgICAgICAgICBvbkRyYWdFbmQ9e2hhbmRsZURyYWdFbmR9XG4gICAgICAgIC8+XG4gICAgICAgIHshaXNMYXN0ICYmIChcbiAgICAgICAgICA8U3BsaXR0ZXIgcmVmZXJlbmNlSXRlbUlkPXtpdGVtSWR9IGxheW91dElkPXtsYXlvdXQuaWR9IGRpcmVjdGlvbj0ncm93JyBvblJlc2l6ZUVuZD17aGFuZGxlUmVzaXplRW5kfSAvPlxuICAgICAgICApfVxuICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICApXG4gIH1cblxuICBjb25zdCB0aGVtZTIgPSBnZXRUaGVtZTIoKVxuICAvLyBwb3NpdGlvbiByZWxhdGl2ZSBvbmx5IHdvcmtzIHdoZW4gYW4gaXRlbSBuZWVkIHRvIGJlIGRyYWdnZWQsIHNvIHRoYXQgaXRzIG9yaWdpbiBpcyB0b3AgbGVmdCBvZiB0aGUgcm93XG4gIC8vIG90aGVyd2lzZSwgcG9zaXRpb24gc2hvdWxkIG5vdCBzZXQgaW4gb3JkZXIgdG8gbWFrZSB0aGUgbWF4aW1pemUgd29yay5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2BkLWZsZXggJHtjbGFzc05hbWV9YH1cbiAgICAgIGNzcz17Y3NzYFxuICAgICAgICBwb3NpdGlvbjogJHtpc0Rlc2lnbk1vZGUgPyAncmVsYXRpdmUnIDogJ2luaXRpYWwnfTtcbiAgICAgICAgLmlzLWxhc3Qge1xuICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICBmbGV4LXNocmluazogMTtcbiAgICAgICAgICBmbGV4LWJhc2lzOiAwO1xuICAgICAgICB9XG4gICAgICAgICYubWVudS1hY3RpdmUgPiAuZ3JpZC1yb3ctaXRlbSB7XG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMztcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICR7dGhlbWUyLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNjAwXX07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICYubWVudS1hY3RpdmUgPiAuZ3JpZC1yb3ctaXRlbTpudGgtb2YtdHlwZSg0bi0xKTphZnRlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHt0aGVtZTIuY29sb3JzLnBhbGV0dGUuZGFuZ2VyWzgwMF19O1xuICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgfVxuICAgICAgYH1cbiAgICAgIGRhdGEtbGF5b3V0aWQ9e2xheW91dC5pZH1cbiAgICAgIGRhdGEtbGF5b3V0aXRlbWlkPXtsYXlvdXRJdGVtSWR9XG4gICAgICByZWY9e2RvbVJlZn1cbiAgICA+XG4gICAgICB7aXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gY3JlYXRlSXRlbShpdGVtLCBpbmRleCA9PT0gaXRlbXMubGVuZ3RoIC0gMSkpfVxuICAgICAge3NlbGVjdGVkICYmIChcbiAgICAgICAgPEdyaWRJdGVtVG9vbGJhciBsYXlvdXRJZD17bGF5b3V0LmlkfSBsYXlvdXRJdGVtPXtsYXlvdXQuY29udGVudFtsYXlvdXRJdGVtSWRdfSByZWZFbGVtZW50PXtkb21SZWYuY3VycmVudH0gLz5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZnVuY3Rpb24gQ29sQ29udGFpbmVyIChwcm9wczogQ29udGFpbmVyUHJvcHMgJiBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4pIHtcbiAgY29uc3QgeyBsYXlvdXQsIGxheW91dEl0ZW1JZCwgaXRlbXMsIGNsYXNzTmFtZSB9ID0gcHJvcHNcbiAgY29uc3QgZG9tUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIGNvbnN0IGlzRGVzaWduTW9kZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuICB9KVxuXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBzdGF0ZS5hcHBSdW50aW1lSW5mby5zZWxlY3Rpb25cbiAgICByZXR1cm4gc2VsZWN0aW9uPy5sYXlvdXRJZCA9PT0gbGF5b3V0LmlkICYmIHNlbGVjdGlvbj8ubGF5b3V0SXRlbUlkID09PSBsYXlvdXRJdGVtSWRcbiAgfSlcblxuICBjb25zdCBoYW5kbGVSZXNpemVFbmQgPSBob29rcy51c2VFdmVudENhbGxiYWNrKChpZCwgZHgsIGR5KSA9PiB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICBjb25zdCBpbmRleCA9IGl0ZW1zLmluZGV4T2YoaWQpXG4gICAgY29uc3QgbmV4dElkID0gaXRlbXNbaW5kZXggKyAxXVxuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtpZF1cbiAgICBjb25zdCBuZXh0TGF5b3V0SXRlbSA9IGxheW91dC5jb250ZW50W25leHRJZF1cbiAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IGxheW91dC5pZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiBpZFxuICAgICAgfSxcbiAgICAgICdiYm94JyxcbiAgICAgIHsgd2lkdGg6ICtsYXlvdXRJdGVtLmJib3gud2lkdGggKyBkeSB9XG4gICAgKS5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogbGF5b3V0LmlkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IG5leHRJZFxuICAgICAgfSxcbiAgICAgICdiYm94JyxcbiAgICAgIHsgd2lkdGg6ICtuZXh0TGF5b3V0SXRlbS5iYm94LndpZHRoIC0gZHkgfVxuICAgICkuZXhlYygpXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlRHJhZ1N0YXJ0ID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9tUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcihgZGl2W2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtpZH1cIl1gKVxuICAgIGxldCBzcGxpdHRlcjogSFRNTEVsZW1lbnRcbiAgICBsZXQgbmVpZ2hib3JJdGVtOiBIVE1MRWxlbWVudFxuICAgIGlmICh0YXJnZXRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKCdncmlkLXNwbGl0JykpIHtcbiAgICAgIHNwbGl0dGVyID0gdGFyZ2V0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnRcbiAgICAgIG5laWdoYm9ySXRlbSA9IHNwbGl0dGVyLm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGxpdHRlciA9IHRhcmdldEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgICAgbmVpZ2hib3JJdGVtID0gc3BsaXR0ZXIucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgIH1cbiAgICBjb25zdCBwYXJlbnRSZWN0ID0gdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3QgdGFyZ2V0UmVjdCA9IHRhcmdldEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGFyZ2V0RWxlbWVudC5jbGllbnRXaWR0aH1weGBcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RhcmdldEVsZW1lbnQuY2xpZW50SGVpZ2h0fXB4YFxuICAgIHRhcmdldEVsZW1lbnQuc3R5bGUubGVmdCA9IGAke3RhcmdldFJlY3QubGVmdCAtIHBhcmVudFJlY3QubGVmdH1weGBcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRvcCA9IGAke3RhcmdldFJlY3QudG9wIC0gcGFyZW50UmVjdC50b3B9cHhgXG4gICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcbiAgICBuZWlnaGJvckl0ZW0uc3R5bGUuaGVpZ2h0ID0gYCR7dGFyZ2V0RWxlbWVudC5jbGllbnRIZWlnaHQgKyBzcGxpdHRlci5jbGllbnRIZWlnaHQgKyBuZWlnaGJvckl0ZW0uY2xpZW50SGVpZ2h0fXB4YFxuICAgIHNwbGl0dGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgfSlcblxuICBjb25zdCBoYW5kbGVEcmFnRW5kID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9tUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcihgZGl2W2RhdGEtbGF5b3V0aXRlbWlkPVwiJHtpZH1cIl1gKVxuICAgIGxldCBzcGxpdHRlcjogSFRNTEVsZW1lbnRcbiAgICBsZXQgbmVpZ2hib3JJdGVtOiBIVE1MRWxlbWVudFxuICAgIGlmICh0YXJnZXRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKCdncmlkLXNwbGl0JykpIHtcbiAgICAgIHNwbGl0dGVyID0gdGFyZ2V0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnRcbiAgICAgIG5laWdoYm9ySXRlbSA9IHNwbGl0dGVyLm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGxpdHRlciA9IHRhcmdldEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgICAgbmVpZ2hib3JJdGVtID0gc3BsaXR0ZXIucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgIH1cbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLndpZHRoID0gbnVsbFxuICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gbnVsbFxuICAgIHRhcmdldEVsZW1lbnQuc3R5bGUubGVmdCA9IG51bGxcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRvcCA9IG51bGxcbiAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gbnVsbFxuICAgIG5laWdoYm9ySXRlbS5zdHlsZS5oZWlnaHQgPSBudWxsXG4gICAgc3BsaXR0ZXIuc3R5bGUuZGlzcGxheSA9IG51bGxcbiAgfSlcblxuICBjb25zdCBjcmVhdGVJdGVtID0gKGl0ZW1JZDogc3RyaW5nLCBpc0xhc3Q6IGJvb2xlYW4pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPFJlYWN0LkZyYWdtZW50IGtleT17aXRlbUlkfT5cbiAgICAgICAgPEdyaWRJdGVtQ29tcG9uZW50XG4gICAgICAgICAga2V5PXtpdGVtSWR9XG4gICAgICAgICAgY2xhc3NOYW1lPSdncmlkLWNvbC1pdGVtJ1xuICAgICAgICAgIGxheW91dD17bGF5b3V0fVxuICAgICAgICAgIGxheW91dEl0ZW1JZD17aXRlbUlkfVxuICAgICAgICAgIG9uRHJhZ1N0YXJ0PXtoYW5kbGVEcmFnU3RhcnR9XG4gICAgICAgICAgb25EcmFnRW5kPXtoYW5kbGVEcmFnRW5kfVxuICAgICAgICAvPlxuICAgICAgICB7IWlzTGFzdCAmJiAoXG4gICAgICAgICAgPFNwbGl0dGVyIHJlZmVyZW5jZUl0ZW1JZD17aXRlbUlkfSBsYXlvdXRJZD17bGF5b3V0LmlkfSBkaXJlY3Rpb249J2NvbCcgb25SZXNpemVFbmQ9e2hhbmRsZVJlc2l6ZUVuZH0gLz5cbiAgICAgICAgKX1cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKVxuICB9XG5cbiAgY29uc3QgdGhlbWUyID0gZ2V0VGhlbWUyKClcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17YGQtZmxleCBmbGV4LWNvbHVtbiAke2NsYXNzTmFtZX1gfVxuICAgICAgY3NzPXtjc3NgXG4gICAgICAgIHBvc2l0aW9uOiAke2lzRGVzaWduTW9kZSA/ICdyZWxhdGl2ZScgOiAnaW5pdGlhbCd9O1xuICAgICAgICAuaXMtbGFzdCB7XG4gICAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICBmbGV4LXNocmluazogMTtcbiAgICAgICAgICBmbGV4LWJhc2lzOiAwO1xuICAgICAgICB9XG4gICAgICAgICYubWVudS1hY3RpdmUgPiAuZ3JpZC1jb2wtaXRlbSB7XG4gICAgICAgICAgJjphZnRlciB7XG4gICAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMztcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICR7dGhlbWUyLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNjAwXX07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICYubWVudS1hY3RpdmUgPiAuZ3JpZC1jb2wtaXRlbTpudGgtb2YtdHlwZSg0bi0xKTphZnRlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHt0aGVtZTIuY29sb3JzLnBhbGV0dGUuZGFuZ2VyWzgwMF19O1xuICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgfVxuICAgICAgYH1cbiAgICAgIGRhdGEtbGF5b3V0aWQ9e2xheW91dC5pZH1cbiAgICAgIGRhdGEtbGF5b3V0aXRlbWlkPXtsYXlvdXRJdGVtSWR9XG4gICAgICByZWY9e2RvbVJlZn1cbiAgICA+XG4gICAgICB7aXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gY3JlYXRlSXRlbShpdGVtLCBpbmRleCA9PT0gaXRlbXMubGVuZ3RoIC0gMSkpfVxuICAgICAge3NlbGVjdGVkICYmIChcbiAgICAgICAgPEdyaWRJdGVtVG9vbGJhciBsYXlvdXRJZD17bGF5b3V0LmlkfSBsYXlvdXRJdGVtPXtsYXlvdXQuY29udGVudFtsYXlvdXRJdGVtSWRdfSByZWZFbGVtZW50PXtkb21SZWYuY3VycmVudH0gLz5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZnVuY3Rpb24gVGFiQ29udGFpbmVyIChwcm9wczogQ29udGFpbmVyUHJvcHMgJiBUYWJEcmFnSGFuZGxlciAmIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pikge1xuICBjb25zdCB7IGxheW91dCwgbGF5b3V0SXRlbUlkLCBpdGVtcywgY2xhc3NOYW1lLCBvbkRyYWdTdGFydCwgb25EcmFnRW5kIH0gPSBwcm9wc1xuICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ25cbiAgfSlcbiAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IFJlYWN0LnVzZVN0YXRlKDApXG4gIGNvbnN0IGRvbVJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBvcmlnaW5SZWN0UmVmID0gUmVhY3QudXNlUmVmPERPTVJlY3Q+KClcbiAgY29uc3QgZHJhZ1BsYWNlaG9sZGVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIGNvbnN0IGlzUm9vdEl0ZW0gPSBsYXlvdXQuc2V0dGluZz8ucm9vdEl0ZW0gPT09IGxheW91dEl0ZW1JZFxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGxldCBpbnRlcmFjdGFibGUgPSBpbnRlcmFjdChkb21SZWYuY3VycmVudCkub3JpZ2luKCdwYXJlbnQnKVxuICAgIGludGVyYWN0YWJsZSA9IGJpbmREcmFnSGFuZGxlcihpbnRlcmFjdGFibGUsIHtcbiAgICAgIGxheW91dElkOiBsYXlvdXQuaWQsXG4gICAgICBsYXlvdXRJdGVtSWQsXG4gICAgICB1c2VEcmFnSGFuZGxlcjogZmFsc2UsXG4gICAgICBpdGVtVHlwZTogTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LFxuICAgICAgcm9vdExheW91dElkOiBudWxsLFxuICAgICAgcmVzdHJpY3Q6IG51bGwsXG4gICAgICBvbkRyYWdTdGFydCxcbiAgICAgIG9uRHJhZ0VuZFxuICAgIH0pXG4gICAgaW50ZXJhY3RhYmxlLmRyYWdnYWJsZSh7XG4gICAgICBtb2RpZmllcnM6IFtcbiAgICAgICAgaW50ZXJhY3QubW9kaWZpZXJzLnJlc3RyaWN0UmVjdCh7XG4gICAgICAgICAgcmVzdHJpY3Rpb246IGBkaXYuZ3JpZC1sYXlvdXRbZGF0YS1sYXlvdXRpZD1cIiR7bGF5b3V0LmlkfVwiXWBcbiAgICAgICAgfSlcbiAgICAgIF1cbiAgICB9KVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaW50ZXJhY3RhYmxlKSB7XG4gICAgICAgIGludGVyYWN0YWJsZS51bnNldCgpXG4gICAgICAgIGludGVyYWN0YWJsZSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZG9tUmVmLmN1cnJlbnQpIHtcbiAgICAgIGlmIChpc1Jvb3RJdGVtKSB7XG4gICAgICAgIGludGVyYWN0KGRvbVJlZi5jdXJyZW50KS5kcmFnZ2FibGUoZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnRlcmFjdChkb21SZWYuY3VycmVudCkuZHJhZ2dhYmxlKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbaXNSb290SXRlbV0pXG5cbiAgY29uc3QgYWN0aXZlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IGdldEdyaWRJdGVtKGxheW91dCwgbGF5b3V0SXRlbUlkKVxuICAgIHJldHVybiBsYXlvdXRJdGVtLmFjdGl2ZVRhYiA/PyAwXG4gIH0sIFtsYXlvdXQsIGxheW91dEl0ZW1JZF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRBY3RpdmVUYWIoYWN0aXZlKVxuICB9LCBbYWN0aXZlXSlcblxuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBob29rcy51c2VFdmVudENhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaW5kZXggPSBpdGVtcy5pbmRleE9mKGlkKVxuICAgIHNldEFjdGl2ZVRhYihpbmRleClcbiAgfSlcblxuICBjb25zdCBoYW5kbGVUYWJEcmFnU3RhcnQgPSBob29rcy51c2VFdmVudENhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaWR4ID0gaXRlbXMuaW5kZXhPZihpZClcbiAgICBpZiAoaWR4ID09PSBpdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICBzZXRBY3RpdmVUYWIoaXRlbXMubGVuZ3RoIC0gMilcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0QWN0aXZlVGFiKGlkeCArIDEpXG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZURyYWdTdGFydCA9IGhvb2tzLnVzZUV2ZW50Q2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvbVJlZi5jdXJyZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdltkYXRhLWxheW91dGl0ZW1pZD1cIiR7aWR9XCJdYClcbiAgICBjb25zdCB0YXJnZXRSZWN0ID0gdGFyZ2V0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIG9yaWdpblJlY3RSZWYuY3VycmVudCA9IHRhcmdldFJlY3RcbiAgICBjb25zdCBlbGVtID0gY3JlYXRlRHJhZ2dpbmdQbGFjZWhvbGRlcih0YXJnZXRSZWN0KVxuICAgIGRyYWdQbGFjZWhvbGRlclJlZi5jdXJyZW50ID0gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtKVxuXG4gICAgY29uc3QgaWR4ID0gaXRlbXMuaW5kZXhPZihpZClcbiAgICBpZiAoaWR4ID09PSBpdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICBzZXRBY3RpdmVUYWIoaXRlbXMubGVuZ3RoIC0gMilcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0QWN0aXZlVGFiKGlkeCArIDEpXG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZURyYWdnaW5nID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoaWQ6IHN0cmluZywgZHg6IG51bWJlciwgZHk6IG51bWJlcikgPT4ge1xuICAgIC8vIHNldCBkaXNwbGF5IHRvIG5vbmUgd2lsbCBjYXVzZSB0aGUgbW92aW5nIGl0ZW0gb3V0IG9mIHZpZXdcbiAgICBjb25zdCBveCA9IGR4IC0gb3JpZ2luUmVjdFJlZi5jdXJyZW50LmxlZnRcbiAgICBjb25zdCBveSA9IGR5IC0gb3JpZ2luUmVjdFJlZi5jdXJyZW50LnRvcFxuICAgIGRyYWdQbGFjZWhvbGRlclJlZi5jdXJyZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtNYXRoLnJvdW5kKG94KX1weCwgJHtNYXRoLnJvdW5kKG95KX1weCkgdHJhbnNsYXRlWigwKWBcbiAgfSlcblxuICBjb25zdCBoYW5kbGVEcmFnRW5kID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZHJhZ1BsYWNlaG9sZGVyUmVmLmN1cnJlbnQpXG4gICAgZHJhZ1BsYWNlaG9sZGVyUmVmLmN1cnJlbnQgPSBudWxsXG4gIH0pXG5cbiAgY29uc3QgY3JlYXRlSXRlbSA9IChpdGVtSWQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8RHJhZ2dhYmxlVGFiXG4gICAgICAgIGtleT17aXRlbUlkfVxuICAgICAgICBpZD17aXRlbUlkfVxuICAgICAgICB0aXRsZT17YCR7aW5kZXh9YH1cbiAgICAgICAgbGF5b3V0SWQ9e2xheW91dC5pZH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtpdGVtSWR9XG4gICAgICAgIG9uRHJhZ1N0YXJ0PXtoYW5kbGVUYWJEcmFnU3RhcnR9XG4gICAgICA+XG4gICAgICAgIDxHcmlkSXRlbUNvbXBvbmVudFxuICAgICAgICAgIGxheW91dD17bGF5b3V0fVxuICAgICAgICAgIGxheW91dEl0ZW1JZD17aXRlbUlkfVxuICAgICAgICAgIG9uRHJhZ1N0YXJ0PXtoYW5kbGVEcmFnU3RhcnR9XG4gICAgICAgICAgb25EcmFnZ2luZz17aGFuZGxlRHJhZ2dpbmd9XG4gICAgICAgICAgb25EcmFnRW5kPXtoYW5kbGVEcmFnRW5kfVxuICAgICAgICAvPlxuICAgICAgPC9EcmFnZ2FibGVUYWI+XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoY2xhc3NOYW1lLCAnZXhiLXJuZCcpfVxuICAgICAgZGF0YS1sYXlvdXRpZD17bGF5b3V0LmlkfVxuICAgICAgZGF0YS1sYXlvdXRpdGVtaWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgIGNzcz17Y3NzYCR7aXNEZXNpZ25Nb2RlID8gJ3JlbGF0aXZlJyA6ICdpbml0aWFsJ307YH1cbiAgICAgIHJlZj17ZG9tUmVmfVxuICAgID5cbiAgICAgIDxUYWJzXG4gICAgICAgIHR5cGU9J3RhYnMnXG4gICAgICAgIGZpbGxcbiAgICAgICAgc2Nyb2xsYWJsZVxuICAgICAgICBjbGFzc05hbWU9J3ctMTAwIGgtMTAwJ1xuICAgICAgICB2YWx1ZT17aXRlbXNbYWN0aXZlVGFiXX1cbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVRhYkNoYW5nZX1cbiAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgJiA+IC50YWItY29udGVudCB7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAge1suLi5pdGVtc10ubWFwKChpdGVtLCBpbmRleCkgPT4gY3JlYXRlSXRlbShpdGVtLCBpbmRleCkpfVxuICAgICAgPC9UYWJzPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgZ2V0QXBwU3RvcmUsXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIGFwcEFjdGlvbnMsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgUmVhY3RSZXNpemVEZXRlY3RvcixcbiAgQnJvd3NlclNpemVNb2RlLFxuICB0eXBlIElNU2l6ZU1vZGVMYXlvdXRKc29uLFxuICBJbW11dGFibGUsXG4gIHBvbGlzaGVkLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgV2lkZ2V0VHlwZSxcbiAgY2xhc3NOYW1lcyxcbiAgQXBwTW9kZSxcbiAgaG9va3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFdpZGdldExpc3RQb3BwZXIgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IGdldEFwcENvbmZpZ0FjdGlvbiwgYXBwQnVpbGRlclN5bmMgfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgYWRkSXRlbVRvR3JpZCB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyB0eXBlIExheW91dEl0ZW1Qcm9wcyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IExheW91dEl0ZW0gZnJvbSAnLi4vLi4vYnVpbGRlci9sYXlvdXQtaXRlbSdcbmltcG9ydCB7IERyb3BBcmVhIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1ob29rJ1xuaW1wb3J0IHsgQ2FudmFzUGFuZSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvY2FudmFzLXBhbmUnXG5pbXBvcnQgeyBUaGVtZWRUb29sdGlwIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90aGVtZS10b29sdGlwJ1xuaW1wb3J0IHsgY2FuRHJvcEF0UGxhY2Vob2xkZXIsIGRyb3BBdFBsYWNlaG9sZGVyLCBhZGRXaWRnZXRJblBsYWNlaG9sZGVyLCBhZGRTZWN0aW9uSW5QbGFjZWhvbGRlciB9IGZyb20gJy4uLy4uL2J1aWxkZXIvdXRpbCdcbmltcG9ydCB7IGdyaWRJdGVtTWVudSB9IGZyb20gJy4vZ3JpZC1pdGVtLW1lbnUnXG5pbXBvcnQgeyBzZWN0aW9uTWVudUl0ZW1zIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L3NlY3Rpb24tbWVudSdcbmltcG9ydCB7IFNpZGVUeXBlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IE1heGdyaWRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvYXBwbGljYXRpb24vbWF4Z3JpZCdcbmltcG9ydCB7IGdldFRoZW1lLCBnZXRUaGVtZTIgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IHsgTG9ja091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvbG9jaydcbmltcG9ydCB7IFVubG9ja091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdW5sb2NrJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4uLy4uL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgQ2xvc2VPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL2Nsb3NlJ1xuaW1wb3J0IHsgUGx1c091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvcGx1cydcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0ICogYXMgY29tbW9uVXRpbHMgZnJvbSAnLi4vY29tbW9uL3V0aWxzJ1xuXG5jb25zdCBzZWN0aW9uTWVudSA9IFtdLmNvbmNhdChzZWN0aW9uTWVudUl0ZW1zLCBncmlkSXRlbU1lbnUpXG5cbmNvbnN0IGRyb3BhcmVhU3R5bGUgPSBjc3NgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICB6LWluZGV4OiAxMDtcbiAgZGlzcGxheTogZmxleDtcbmBcblxuY29uc3QgZ3VpZGVPdmVybGF5ID0gY3NzYFxuICAke2Ryb3BhcmVhU3R5bGV9O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbmBcblxuY29uc3QgZ2V0U3R5bGUgPSAoaXNQbGFjZWhvbGRlcjogYm9vbGVhbikgPT4ge1xuICBjb25zdCB0aGVtZSA9IGdldFRoZW1lMigpXG5cbiAgcmV0dXJuIGNzc2BcbiAgICAmID4gLm1heC1ncmlkLWl0ZW0tYnRuIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodC01MDApO1xuICAgICAgd2lkdGg6IDI2cHg7XG4gICAgICBoZWlnaHQ6IDI2cHg7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDA7XG4gICAgICByaWdodDogMDtcbiAgICB9XG5cbiAgICAmID4gLmxheW91dC13aWRnZXQgPiAuYWRkLWJ0biB7XG4gICAgICBkaXNwbGF5OiAke2lzUGxhY2Vob2xkZXIgPyAnbm9uZScgOiAnYmxvY2snfTtcbiAgICB9XG5cbiAgICAmID4gLmFkZC1idG4ge1xuICAgICAgei1pbmRleDogMjA7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIH1cblxuICAgIC5sb2NrLW1hc2sge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICBib3R0b206IDA7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHotaW5kZXg6IDIwO1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICB0cmFuc2l0aW9uOiBhbGwgNDAwbXM7XG5cbiAgICAgIC5tYXNrIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogJHt0aGVtZS5jb2xvcnMud2hpdGV9O1xuICAgICAgICBvcGFjaXR5OiAwLjE7XG4gICAgICB9XG5cbiAgICAgIC5sb2NrLWJ0biB7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnMud2hpdGUsIDAuNil9O1xuICAgICAgICBib3JkZXItY29sb3I6ICR7dGhlbWUuY29sb3JzLmJsYWNrfSAhaW1wb3J0YW50O1xuICAgICAgICBib3gtc2hhZG93OiAwcHggMHB4IDhweCAwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICAgICAgICB3aWR0aDogMzhweDtcbiAgICAgICAgaGVpZ2h0OiAzOHB4O1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgNDAwbXM7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gICAgICB9XG5cbiAgICAgICYudW5sb2NrIHtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcblxuICAgICAgICAubWFzayB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAubG9jay1idG4ge1xuICAgICAgICAgIHdpZHRoOiAyNnB4O1xuICAgICAgICAgIGhlaWdodDogMjZweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGJvZHk6bm90KC5kZXNpZ24tbW9kZSkgJjpob3ZlciA+IC5tYXgtZ3JpZC1pdGVtLWJ0biB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cbiAgYFxufVxuXG5jb25zdCBtYXhpbWl6ZWRTdHlsZSA9IGNzc2BcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xuICB6LWluZGV4OiAzMDtcbiAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuYFxuXG5leHBvcnQgZnVuY3Rpb24gR3JpZExheW91dEl0ZW0gKHByb3BzOiBMYXlvdXRJdGVtUHJvcHMgJiB7XG4gIGRlbGF5OiBudW1iZXJcbiAgaXNMYXN0Q2hpbGQ6IGJvb2xlYW5cbiAgb25EcmFnU3RhcnQ6IChpZDogc3RyaW5nKSA9PiB2b2lkXG4gIG9uRHJhZ2dpbmc6IChpZDogc3RyaW5nLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA9PiB2b2lkXG4gIG9uRHJhZ0VuZDogKGlkOiBzdHJpbmcpID0+IHZvaWRcbn0pIHtcbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBvbkRyYWdTdGFydCwgb25EcmFnZ2luZywgb25EcmFnRW5kLCBkZWxheSwgaXNMYXN0Q2hpbGQsIGNsYXNzTmFtZSB9ID0gcHJvcHNcblxuICBjb25zdCBbbWF4aW1pemVkLCBzZXRNYXhpbWl6ZWRdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtzaG93V2lkZ2V0TGlzdFBvcHBlciwgc2V0U2hvd1dpZGdldExpc3RQb3BwZXJdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtsb2NrZWQsIHNldExvY2tlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBjYW52YXNQYW5lUmVmID0gUmVhY3QudXNlUmVmPENhbnZhc1BhbmU+KClcbiAgY29uc3QgY2FudmFzUmVmID0gUmVhY3QudXNlUmVmPEhUTUxDYW52YXNFbGVtZW50PigpXG4gIGNvbnN0IGlzRW50ZXIgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIGNvbnN0IGJ0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4oKVxuICBjb25zdCB0aGVtZTIgPSBnZXRUaGVtZTIoKVxuICBjb25zdCB0cmFuc2xhdGUgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcblxuICBjb25zdCBleHBhbmRhYmxlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gY29tbW9uVXRpbHMuaXNFeHBhbmRhYmxlKHN0YXRlLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkKVxuICB9KVxuXG4gIGNvbnN0IGlzTG9ja0xheW91dCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbG9ja0xheW91dCA9IHN0YXRlLmFwcENvbmZpZz8uZm9yQnVpbGRlckF0dHJpYnV0ZXM/LmxvY2tMYXlvdXQgPz8gZmFsc2VcbiAgICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBzdGF0ZS5hcHBSdW50aW1lSW5mby5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuXG4gICAgcmV0dXJuICFpc0Rlc2lnbk1vZGUgfHwgbG9ja0xheW91dFxuICB9KVxuXG4gIGNvbnN0IGhhc0VtYmVkZGVkTGF5b3V0ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgICAgIGlmICh3aWRnZXRKc29uPy5tYW5pZmVzdD8ud2lkZ2V0VHlwZSA9PT0gV2lkZ2V0VHlwZS5MYXlvdXQgfHwgd2lkZ2V0SnNvbj8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/Lmhhc0VtYmVkZGVkTGF5b3V0KSB7XG4gICAgICAgIHJldHVybiB3aWRnZXRKc29uLmxheW91dHMgIT0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfSlcblxuICBjb25zdCBpc1BsYWNlaG9sZGVyID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIHJldHVybiBsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgbGF5b3V0SXRlbT8ud2lkZ2V0SWQgPT0gbnVsbFxuICB9KVxuXG4gIGNvbnN0IGlzU2VjdGlvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICByZXR1cm4gbGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvblxuICB9KVxuXG4gIGNvbnN0IGZha2VMYXlvdXRzOiBJTVNpemVNb2RlTGF5b3V0SnNvbiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBJbW11dGFibGUoe1xuICAgICAgW0Jyb3dzZXJTaXplTW9kZS5MYXJnZV06IGAke2xheW91dElkfV8ke2xheW91dEl0ZW1JZH1fdGxhcmdlYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuTWVkaXVtXTogYCR7bGF5b3V0SWR9XyR7bGF5b3V0SXRlbUlkfV90bWVkaXVtYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuU21hbGxdOiBgJHtsYXlvdXRJZH1fJHtsYXlvdXRJdGVtSWR9X3RzbWFsbGBcbiAgICB9KSBhcyBhbnlcbiAgfSwgW2xheW91dElkLCBsYXlvdXRJdGVtSWRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnN0IHRoZW1lID0gZ2V0VGhlbWUoKVxuICAgIGNhbnZhc1BhbmVSZWYuY3VycmVudCA9IG5ldyBDYW52YXNQYW5lKGNhbnZhc1JlZi5jdXJyZW50LCB0aGVtZSlcbiAgfSlcblxuICBjb25zdCBoYW5kbGVSZXNpemUgPSBob29rcy51c2VFdmVudENhbGxiYWNrKCh3aWR0aCwgaGVpZ2h0KSA9PiB7XG4gICAgaWYgKCF3aWR0aCB8fCAhaGVpZ2h0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjYW52YXNQYW5lUmVmLmN1cnJlbnQuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0LCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbylcbiAgfSlcblxuICBjb25zdCBoYW5kbGVUb2dnbGVEcmFnb3ZlckVmZmVjdCA9IGhvb2tzLnVzZUV2ZW50Q2FsbGJhY2soKGlzSW46IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICBpc0VudGVyLmN1cnJlbnQgPSBpc0luXG4gICAgLy8gdG8gbWFrZSBzdXJlIG9ubHkgb25lIGdyaWQgbGF5b3V0IGNhbiBoYXZlIGRyb3AtdGFyZ2V0XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmdyaWQtbGF5b3V0JykuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGNvbnN0IGdyaWRJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxheW91dGlkJylcbiAgICAgIGlmIChncmlkSWQgPT09IGxheW91dElkKSB7XG4gICAgICAgIGlmIChpc0luICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZHJvcC10YXJnZXQnKSkge1xuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJvcC10YXJnZXQnKVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wLXRhcmdldCcpKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC10YXJnZXQnKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjYW52YXNQYW5lUmVmLmN1cnJlbnQuY2xlYXIoKVxuICB9KVxuXG4gIGNvbnN0IG9uRHJhZ092ZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBkcmFnZ2luZ0VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsXG4gICAgaXRlbVJlY3Q6IENsaWVudFJlY3QsXG4gICAgY2xpZW50WDogbnVtYmVyLFxuICAgIGNsaWVudFk6IG51bWJlclxuICApID0+IHtcbiAgICBpZiAoIWlzRW50ZXIuY3VycmVudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBjb250YWluZXJSZWN0XG4gICAgY2FudmFzUGFuZVJlZi5jdXJyZW50LmNsZWFyKClcbiAgICBjb25zdCB0aGVtZSA9IGdldFRoZW1lKClcbiAgICBjYW52YXNQYW5lUmVmLmN1cnJlbnQuc2V0Q29sb3IocG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzcwMF0sIDAuMikpXG5cbiAgICBpZiAoaXNQbGFjZWhvbGRlciAmJiBjYW5Ecm9wQXRQbGFjZWhvbGRlcihkcmFnZ2luZ0l0ZW0pKSB7XG4gICAgICAvLyBub3JtYWwgd2lkZ2V077yMZHJvcCBhdCB0aGlzIHBsYWNlaG9sZGVyIGRpcmVjdGx5XG4gICAgICBjYW52YXNQYW5lUmVmLmN1cnJlbnQuZHJhd1JlY3QoeyBsZWZ0OiAwLCB0b3A6IDAsIHdpZHRoLCBoZWlnaHQgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCByZWN0OiBQYXJ0aWFsPENsaWVudFJlY3Q+XG4gICAgaWYgKGNsaWVudFkgPD0gaGVpZ2h0ICogMC4yKSB7XG4gICAgICByZWN0ID0geyBsZWZ0OiAwLCB0b3A6IDAsIHdpZHRoLCBoZWlnaHQ6IGhlaWdodCAvIDIgfVxuICAgIH0gZWxzZSBpZiAoY2xpZW50WSA+PSBoZWlnaHQgKiAwLjgpIHtcbiAgICAgIHJlY3QgPSB7IGxlZnQ6IDAsIHRvcDogaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodDogaGVpZ2h0IC8gMiB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjbGllbnRYIDw9IHdpZHRoICogMC4yKSB7XG4gICAgICAgIHJlY3QgPSB7IGxlZnQ6IDAsIHRvcDogMCwgd2lkdGg6IHdpZHRoIC8gMiwgaGVpZ2h0IH1cbiAgICAgIH0gZWxzZSBpZiAoY2xpZW50WCA+PSB3aWR0aCAqIDAuOCkge1xuICAgICAgICByZWN0ID0geyBsZWZ0OiB3aWR0aCAvIDIsIHRvcDogMCwgd2lkdGg6IHdpZHRoIC8gMiwgaGVpZ2h0IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlY3QgPSB7IGxlZnQ6IHdpZHRoICogMC4yLCB0b3A6IGhlaWdodCAqIDAuMiwgd2lkdGg6IHdpZHRoICogMC42LCBoZWlnaHQ6IGhlaWdodCAqIDAuNiB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FudmFzUGFuZVJlZi5jdXJyZW50LmRyYXdSZWN0KHJlY3QpXG4gIH0sIFtpc1BsYWNlaG9sZGVyXSlcblxuICBjb25zdCBvbkRyb3AgPSBSZWFjdC51c2VDYWxsYmFjaygoXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LFxuICAgIGl0ZW1SZWN0OiBDbGllbnRSZWN0LFxuICAgIGNsaWVudFg6IG51bWJlcixcbiAgICBjbGllbnRZOiBudW1iZXJcbiAgKSA9PiB7XG4gICAgbGV0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgaWYgKGlzUGxhY2Vob2xkZXIgJiYgY2FuRHJvcEF0UGxhY2Vob2xkZXIoZHJhZ2dpbmdJdGVtKSkge1xuICAgICAgLy8gbm9ybWFsIHdpZGdldO+8jGRyb3AgYXQgdGhpcyBwbGFjZWhvbGRlciBkaXJlY3RseVxuICAgICAgZHJvcEF0UGxhY2Vob2xkZXIoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0sIGRyYWdnaW5nSXRlbSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gY29udGFpbmVyUmVjdFxuICAgIGxldCBzaWRlOiBTaWRlVHlwZVxuICAgIGlmIChjbGllbnRZIDw9IGhlaWdodCAqIDAuMikge1xuICAgICAgc2lkZSA9IFNpZGVUeXBlLlRvcFxuICAgIH0gZWxzZSBpZiAoY2xpZW50WSA+PSBoZWlnaHQgKiAwLjgpIHtcbiAgICAgIHNpZGUgPSBTaWRlVHlwZS5Cb3R0b21cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNsaWVudFggPD0gd2lkdGggKiAwLjIpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzUlRMKCkpIHtcbiAgICAgICAgICBzaWRlID0gU2lkZVR5cGUuUmlnaHRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaWRlID0gU2lkZVR5cGUuTGVmdFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNsaWVudFggPj0gd2lkdGggKiAwLjgpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzUlRMKCkpIHtcbiAgICAgICAgICBzaWRlID0gU2lkZVR5cGUuTGVmdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNpZGUgPSBTaWRlVHlwZS5SaWdodFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaWRlID0gU2lkZVR5cGUuQ2VudGVyXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbGF5b3V0SW5mbyA9IHtcbiAgICAgIGxheW91dElkXG4gICAgfVxuXG4gICAgYWRkSXRlbVRvR3JpZChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCBkcmFnZ2luZ0l0ZW0sIGxheW91dEluZm8sIGxheW91dEl0ZW1JZCwgc2lkZSkudGhlbihcbiAgICAgIChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgeyBhcHBDb25maWcsIGxheW91dEluZm86IG5ld0xheW91dEluZm8gfSA9IHJlc3VsdFxuICAgICAgICBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuICAgICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKG5ld0xheW91dEluZm8pKVxuICAgICAgfVxuICAgIClcbiAgfSwgW2lzUGxhY2Vob2xkZXIsIGxheW91dElkLCBsYXlvdXRJdGVtSWRdKVxuXG4gIGNvbnN0IHNldFdpZGdldCA9IFJlYWN0LnVzZUNhbGxiYWNrKChpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcykgPT4ge1xuICAgIGlmIChpdGVtLml0ZW1UeXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICBhZGRTZWN0aW9uSW5QbGFjZWhvbGRlcih7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkV2lkZ2V0SW5QbGFjZWhvbGRlcih7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSwgaXRlbSlcbiAgICB9XG4gICAgc2V0U2hvd1dpZGdldExpc3RQb3BwZXIoZmFsc2UpXG4gIH0sIFtsYXlvdXRJZCwgbGF5b3V0SXRlbUlkXSlcblxuICBjb25zdCB0b2dnbGVTaG93V2lkZ2V0TGlzdFBvcHBlciA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGlmIChnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYnJvd3NlclNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGFwcEJ1aWxkZXJTeW5jLnB1Ymxpc2hTaWRlUGFuZWxUb0FwcCh7IHR5cGU6ICd3aWRnZXQnLCBpc1BsYWNlaG9sZGVyOiB0cnVlLCBpc0l0ZW1BY2NlcHRlZDogY2FuRHJvcEF0UGxhY2Vob2xkZXIsIG9uU2VsZWN0OiBzZXRXaWRnZXQgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBzZXRTaG93V2lkZ2V0TGlzdFBvcHBlcighc2hvd1dpZGdldExpc3RQb3BwZXIpXG4gIH0sIFtzaG93V2lkZ2V0TGlzdFBvcHBlciwgc2V0V2lkZ2V0XSlcblxuICBjb25zdCB0b2dnbGVNYXhpbWl6ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRNYXhpbWl6ZWQoIW1heGltaXplZClcbiAgfSwgW21heGltaXplZF0pXG5cbiAgY29uc3QgdG9nZ2xlTG9ja01vZGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0TG9ja2VkKCFsb2NrZWQpXG4gIH0sIFtsb2NrZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPExheW91dEl0ZW1cbiAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgIGxheW91dEl0ZW1JZD17bGF5b3V0SXRlbUlkfVxuICAgICAgcmVzaXphYmxlPXtmYWxzZX1cbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgc2hvd0RlZmF1bHRUb29scz17ZmFsc2V9XG4gICAgICB0b29sSXRlbXM9e2lzU2VjdGlvbiA/IHNlY3Rpb25NZW51IDogZ3JpZEl0ZW1NZW51fVxuICAgICAgZGVsYXk9e2RlbGF5fVxuICAgICAgaXNMYXN0Q2hpbGQ9e2lzTGFzdENoaWxkfVxuICAgICAgb25EcmFnU3RhcnQ9e29uRHJhZ1N0YXJ0fVxuICAgICAgb25EcmFnZ2luZz17b25EcmFnZ2luZ31cbiAgICAgIG9uRHJhZ0VuZD17b25EcmFnRW5kfVxuICAgICAgY3NzPXtjc3NgJHtnZXRTdHlsZShpc1BsYWNlaG9sZGVyKX07JHttYXhpbWl6ZWQgPyBtYXhpbWl6ZWRTdHlsZSA6ICcnfWB9XG4gICAgPlxuICAgICAgeyghaGFzRW1iZWRkZWRMYXlvdXQgfHwgbG9ja2VkKSAmJiAhaXNMb2NrTGF5b3V0ICYmIChcbiAgICAgICAgPERyb3BBcmVhXG4gICAgICAgICAgY3NzPXtkcm9wYXJlYVN0eWxlfVxuICAgICAgICAgIGxheW91dHM9e2Zha2VMYXlvdXRzfVxuICAgICAgICAgIGhpZ2hsaWdodERyYWdvdmVyPXt0cnVlfVxuICAgICAgICAgIG9uRHJhZ092ZXI9e29uRHJhZ092ZXJ9XG4gICAgICAgICAgb25Ecm9wPXtvbkRyb3B9XG4gICAgICAgICAgb25Ub2dnbGVEcmFnb3ZlckVmZmVjdD17aGFuZGxlVG9nZ2xlRHJhZ292ZXJFZmZlY3R9XG4gICAgICAgID5cbiAgICAgICAgPC9Ecm9wQXJlYT5cbiAgICAgICl9XG4gICAgICB7aXNQbGFjZWhvbGRlciAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhZGQtYnRuJz5cbiAgICAgICAgICA8VGhlbWVkVG9vbHRpcCB0aXRsZT17dHJhbnNsYXRlKCdhZGRXaWRnZXQnKX0+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgcmVmPXtidG5SZWZ9XG4gICAgICAgICAgICAgIGNzcz17Y3NzYHdpZHRoOiAzNnB4OyBoZWlnaHQ6IDM2cHg7IHBhZGRpbmc6IDAuNXJlbTtgfVxuICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVTaG93V2lkZ2V0TGlzdFBvcHBlcn1cbiAgICAgICAgICAgICAgYXJpYS1oYXNwb3B1cFxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UGx1c091dGxpbmVkIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L1RoZW1lZFRvb2x0aXA+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIHtpc1BsYWNlaG9sZGVyICYmIHNob3dXaWRnZXRMaXN0UG9wcGVyICYmXG4gICAgICAgIDxXaWRnZXRMaXN0UG9wcGVyXG4gICAgICAgICAgcmVmZXJlbmNlRWxlbWVudD17YnRuUmVmLmN1cnJlbnR9XG4gICAgICAgICAgaXNBY2NlcHRlZD17Y2FuRHJvcEF0UGxhY2Vob2xkZXJ9XG4gICAgICAgICAgb25TZWxlY3Q9e3NldFdpZGdldH1cbiAgICAgICAgICBvbkNsb3NlPXsoKSA9PiB7IHNldFNob3dXaWRnZXRMaXN0UG9wcGVyKGZhbHNlKSB9fVxuICAgICAgICAvPn1cbiAgICAgIDxjYW52YXMgY3NzPXtndWlkZU92ZXJsYXl9IHJlZj17Y2FudmFzUmVmfSAvPlxuICAgICAgPFJlYWN0UmVzaXplRGV0ZWN0b3IgaGFuZGxlV2lkdGggaGFuZGxlSGVpZ2h0IG9uUmVzaXplPXtoYW5kbGVSZXNpemV9Lz5cbiAgICAgIHtleHBhbmRhYmxlICYmIChcbiAgICAgICAgPEJ1dHRvbiBpY29uIHR5cGU9J3RlcnRpYXJ5JyBjbGFzc05hbWU9J21heC1ncmlkLWl0ZW0tYnRuIHAtMCcgb25DbGljaz17dG9nZ2xlTWF4aW1pemV9IHRpdGxlPXttYXhpbWl6ZWQgPyB0cmFuc2xhdGUoJ3Jlc3RvcmUnKSA6IHRyYW5zbGF0ZSgnbWF4aW1pemUnKX0+XG4gICAgICAgICAge21heGltaXplZCAmJiA8Q2xvc2VPdXRsaW5lZC8+fVxuICAgICAgICAgIHshbWF4aW1pemVkICYmIDxNYXhncmlkT3V0bGluZWQgLz59XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKX1cbiAgICAgIHtoYXNFbWJlZGRlZExheW91dCAmJiAhaXNMb2NrTGF5b3V0ICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2xvY2stbWFzaycsIHsgdW5sb2NrOiAhbG9ja2VkIH0pfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWFzayc+PC9kaXY+XG4gICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2xvY2tlZCA/IHRyYW5zbGF0ZSgndW5sb2NrR3JpZEl0ZW0nKSA6IHRyYW5zbGF0ZSgnbG9ja0dyaWRJdGVtJyl9PlxuICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J2xvY2stYnRuIHJvdW5kZWQtY2lyY2xlJyBzaXplPSdzbScgdHlwZT0ndGVydGlhcnknIGljb24gb25DbGljaz17dG9nZ2xlTG9ja01vZGV9PlxuICAgICAgICAgICAgICB7IWxvY2tlZCAmJiA8VW5sb2NrT3V0bGluZWQgc2l6ZT17MTR9IGNvbG9yPXt0aGVtZTIuY29sb3JzLmJsYWNrfS8+fVxuICAgICAgICAgICAgICB7bG9ja2VkICYmIDxMb2NrT3V0bGluZWQgc2l6ZT17MjB9IGNvbG9yPXt0aGVtZTIuY29sb3JzLmJsYWNrfS8+fVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9MYXlvdXRJdGVtPlxuICApXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIElNQXBwQ29uZmlnLFxuICB0eXBlIElNTGF5b3V0SnNvbixcbiAgdHlwZSBCcm93c2VyU2l6ZU1vZGUsXG4gIHR5cGUgSU1HcmlkTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIEdyaWRJdGVtVHlwZSxcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIGkxOG4sXG4gIHR5cGUgTGF5b3V0SW5mb1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCYXNlTGF5b3V0U2VydmljZSwgQ29udGVudFNlcnZpY2VXcmFwcGVyLCB0eXBlIER1cGxpY2F0ZUNvbnRleHQsIHR5cGUgVG9jTm9kZSB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgeyBhdHRhY2gsIHVwZGF0ZUdyaWRJdGVtLCB1cGRhdGVTaXplIH0gZnJvbSAnLi9ncmlkLWl0ZW0tdXRpbCdcbmltcG9ydCB7IGdldEdyaWRJdGVtIH0gZnJvbSAnLi4vY29tbW9uL3V0aWxzJ1xuaW1wb3J0IHsgZGV0YWNoR3JpZEl0ZW0gfSBmcm9tICcuL3V0aWxzJ1xuaW1wb3J0IHsgc2VhcmNoVXRpbHMsIHV0aWxzLCB0eXBlIFRvb2xJdGVtQ29uZmlnIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgZ3JpZEl0ZW1NZW51IH0gZnJvbSAnLi9ncmlkLWl0ZW0tbWVudSdcbmltcG9ydCB7IGdyaWRSb3dDb2xUb29scyB9IGZyb20gJy4vZ3JpZC1pdGVtLXRvb2xiYXInXG5pbXBvcnQgeyBzZWN0aW9uTWVudUl0ZW1zLCB2aWV3TWVudUl0ZW1zIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L3NlY3Rpb24tbWVudSdcbmltcG9ydCB7IHNjcmVlbk1lbnVJdGVtcyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9zY3JlZW4tbWVudSdcblxuY29uc3Qgc2VjdGlvbk1lbnUgPSBbXS5jb25jYXQoc2VjdGlvbk1lbnVJdGVtcywgZ3JpZEl0ZW1NZW51KVxuXG5leHBvcnQgY2xhc3MgR3JpZExheW91dFNlcnZpY2UgZXh0ZW5kcyBCYXNlTGF5b3V0U2VydmljZSB7XG4gIGJlZm9yZUl0ZW1SZW1vdmVkIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICAgIGxldCBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgbGF5b3V0SnNvbiA9IGRldGFjaEdyaWRJdGVtKGxheW91dEpzb24sIGxheW91dEl0ZW1JZClcbiAgICByZXR1cm4gYXBwQ29uZmlnLnNldEluKFsnbGF5b3V0cycsIGxheW91dElkXSwgbGF5b3V0SnNvbilcbiAgfVxuXG4gIHBlbmRJdGVtIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIGxldCB1cGRhdGVkQXBwQ29uZmlnID0gYXBwQ29uZmlnXG5cbiAgICBsZXQgbGF5b3V0ID0gdXBkYXRlZEFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdXG4gICAgbGF5b3V0ID0gZGV0YWNoR3JpZEl0ZW0obGF5b3V0LCBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZClcbiAgICB1cGRhdGVkQXBwQ29uZmlnID0gdXBkYXRlZEFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBsYXlvdXRJbmZvLmxheW91dElkXSwgbGF5b3V0KVxuICAgIC8vIGNsZWFyIHJvb3RJdGVtIGlmIGl0IGlzIHRoZSBsYXN0IGl0ZW0gaW4gZ3JpZFxuICAgIGlmIChsYXlvdXQuc2V0dGluZy5yb290SXRlbSA9PT0gbGF5b3V0SW5mby5sYXlvdXRJdGVtSWQpIHtcbiAgICAgIHVwZGF0ZWRBcHBDb25maWcgPSB1cGRhdGVkQXBwQ29uZmlnLnNldEluKFxuICAgICAgICBbJ2xheW91dHMnLCBsYXlvdXRJbmZvLmxheW91dElkLCAnc2V0dGluZyddLFxuICAgICAgICBsYXlvdXQuc2V0dGluZy53aXRob3V0KCdyb290SXRlbScpXG4gICAgICApXG4gICAgfVxuXG4gICAgdXBkYXRlZEFwcENvbmZpZyA9IHN1cGVyLnBlbmRJdGVtKHVwZGF0ZWRBcHBDb25maWcsIGxheW91dEluZm8pXG5cbiAgICByZXR1cm4gdXBkYXRlZEFwcENvbmZpZ1xuICB9XG5cbiAgZHVwbGljYXRlSXRlbUluU2FtZUxheW91dCAoXG4gICAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgICBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLFxuICAgIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gICAgY29udGV4dDogRHVwbGljYXRlQ29udGV4dFxuICApOiBbYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SXRlbUlkOiBzdHJpbmddIHtcbiAgICBjb25zdCByZXN1bHQgPSBzdXBlci5kdXBsaWNhdGVJdGVtSW5TYW1lTGF5b3V0KGFwcENvbmZpZywgbGF5b3V0SW5mbywgc2l6ZU1vZGUsIGNvbnRleHQpXG4gICAgbGV0IHVwZGF0ZWRBcHBDb25maWcgPSByZXN1bHRbMF1cbiAgICBjb25zdCBuZXdJdGVtSWQgPSByZXN1bHRbMV1cblxuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICAgIGxldCBsYXlvdXQgPSB1cGRhdGVkQXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dC5jb250ZW50W2xheW91dEl0ZW1JZF1cblxuICAgIGlmICghbGF5b3V0SXRlbS5wYXJlbnQpIHtcbiAgICAgIGxheW91dCA9IGF0dGFjaChsYXlvdXQsIG5ld0l0ZW1JZCwgbGF5b3V0SXRlbUlkLCBHcmlkSXRlbVR5cGUuUm93LCBmYWxzZSwgZmFsc2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBhcmVudEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIGxheW91dEl0ZW0ucGFyZW50KVxuICAgICAgY29uc3QgY2hpbGRyZW4gPSBbLi4ucGFyZW50SXRlbS5jaGlsZHJlbl1cbiAgICAgIGNvbnN0IGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihsYXlvdXRJdGVtSWQpXG4gICAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIG5ld0l0ZW1JZClcbiAgICAgIGxheW91dCA9IHVwZGF0ZUdyaWRJdGVtKGxheW91dCwgbGF5b3V0SXRlbS5wYXJlbnQsICdjaGlsZHJlbicsIGNoaWxkcmVuKVxuICAgICAgbGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0obGF5b3V0LCBuZXdJdGVtSWQsICdwYXJlbnQnLCBsYXlvdXRJdGVtLnBhcmVudClcblxuICAgICAgaWYgKHBhcmVudEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICAgICAgbGF5b3V0ID0gdXBkYXRlU2l6ZShsYXlvdXQsIG5ld0l0ZW1JZCwgK2xheW91dEl0ZW0uYmJveC53aWR0aClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGhhbGZTaXplID0gK2xheW91dEl0ZW0uYmJveC53aWR0aCAvIDJcblxuICAgICAgICBsYXlvdXQgPSB1cGRhdGVTaXplKGxheW91dCwgbmV3SXRlbUlkLCBoYWxmU2l6ZSlcbiAgICAgICAgbGF5b3V0ID0gdXBkYXRlU2l6ZShsYXlvdXQsIGxheW91dEl0ZW1JZCwgaGFsZlNpemUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlZEFwcENvbmZpZyA9IHVwZGF0ZWRBcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgbGF5b3V0SWRdLCBsYXlvdXQpXG5cbiAgICByZXR1cm4gW3VwZGF0ZWRBcHBDb25maWcsIG5ld0l0ZW1JZF1cbiAgfVxuXG4gIGdldFRvY1N0cnVjdHVyZSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SWQ6IHN0cmluZyk6IFRvY05vZGVbXSB7XG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgIGNvbnN0IHJvb3RJdGVtSWQgPSBsYXlvdXRKc29uLnNldHRpbmc/LnJvb3RJdGVtXG4gICAgY29uc3Qgcm9vdE5vZGUgPSB0aGlzLmZldGNoR3JpZE5vZGUoYXBwQ29uZmlnLCBsYXlvdXRKc29uLCBgJHtyb290SXRlbUlkfWAsIHV0aWxzLmdldEN1cnJlbnRTaXplTW9kZSgpKVxuICAgIHJldHVybiByb290Tm9kZSAhPSBudWxsID8gW3Jvb3ROb2RlXSA6IFtdXG4gIH1cblxuICBnZXRUb29sSXRlbXMgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8sIHR5cGU6IHN0cmluZyk6IEFycmF5PFRvb2xJdGVtQ29uZmlnIHwgVG9vbEl0ZW1Db25maWdbXT4ge1xuICAgIGlmICh0eXBlPy50b0xvd2VyQ2FzZSgpID09PSAndmlldycpIHtcbiAgICAgIHJldHVybiB2aWV3TWVudUl0ZW1zXG4gICAgfVxuICAgIGlmICh0eXBlPy50b0xvd2VyQ2FzZSgpID09PSAnc2NyZWVuJykge1xuICAgICAgcmV0dXJuIHNjcmVlbk1lbnVJdGVtc1xuICAgIH1cblxuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG5cbiAgICBpZiAobGF5b3V0SXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlJvdyB8fCBsYXlvdXRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuQ29sdW1uKSB7XG4gICAgICByZXR1cm4gZ3JpZFJvd0NvbFRvb2xzXG4gICAgfVxuICAgIGlmIChsYXlvdXRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuVGFiKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG5cbiAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICByZXR1cm4gc2VjdGlvbk1lbnVcbiAgICB9XG4gICAgcmV0dXJuIGdyaWRJdGVtTWVudVxuICB9XG5cbiAgcHJvY2Vzc0FmdGVySXRlbUFkZGVkIChcbiAgICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgICBjdXJyZW50U2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgICBjb250YWluZXJSZWN0OiBET01SZWN0UmVhZE9ubHksXG4gICAgaXRlbVJlY3Q6IERPTVJlY3RSZWFkT25seSxcbiAgICBpbnNlcnRJbmRleDogbnVtYmVyLFxuICAgIG9wdGlvbnM/OiBhbnlcbiAgKTogSU1BcHBDb25maWcge1xuICAgIHJldHVybiBhcHBDb25maWdcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNsYXRlIChpZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaTE4bi5nZXRJbnRsKCkuZm9ybWF0TWVzc2FnZSh7IGlkIH0pXG4gIH1cblxuICBwcml2YXRlIGZldGNoR3JpZE5vZGUgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dDogSU1MYXlvdXRKc29uLCBpdGVtSWQ6IHN0cmluZywgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUpOiBUb2NOb2RlIHtcbiAgICBjb25zdCBpdGVtID0gbGF5b3V0LmNvbnRlbnQ/LltpdGVtSWRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gICAgaWYgKGl0ZW0gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgeyBncmlkVHlwZSA9IEdyaWRJdGVtVHlwZS5QbGFpbiwgY2hpbGRyZW4gfSA9IGl0ZW1cblxuICAgIGlmIChncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlBsYWluKSB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IENvbnRlbnRTZXJ2aWNlV3JhcHBlcihhcHBDb25maWcsIGl0ZW0pXG4gICAgICByZXR1cm4gc2VydmljZS50b1RvY05vZGUoeyBsYXlvdXRJZDogbGF5b3V0LmlkLCBsYXlvdXRJdGVtSWQ6IGl0ZW1JZCB9LCBicm93c2VyU2l6ZU1vZGUpXG4gICAgfVxuXG4gICAgbGV0IGxhYmVsXG4gICAgaWYgKGdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuUm93KSB7XG4gICAgICBsYWJlbCA9IGl0ZW0ubGFiZWwgPz8gdGhpcy50cmFuc2xhdGUoJ2dyaWRSb3cnKVxuICAgIH0gZWxzZSBpZiAoZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5Db2x1bW4pIHtcbiAgICAgIGxhYmVsID0gaXRlbS5sYWJlbCA/PyB0aGlzLnRyYW5zbGF0ZSgnZ3JpZENvbCcpXG4gICAgfSBlbHNlIGlmIChncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlRhYikge1xuICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsID8/IHRoaXMudHJhbnNsYXRlKCd0YWJzJylcbiAgICB9XG4gICAgbGV0IGlzSW5UYWIgPSBmYWxzZVxuICAgIGlmIChpdGVtLnBhcmVudCkge1xuICAgICAgY29uc3QgcGFyZW50SXRlbSA9IGxheW91dC5jb250ZW50W2l0ZW0ucGFyZW50XSBhcyBJTUdyaWRMYXlvdXRJdGVtSnNvblxuICAgICAgaXNJblRhYiA9IHBhcmVudEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWJcbiAgICB9XG4gICAgY29uc3QgZWRpdGFibGUgPSBpc0luVGFiICYmIChncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlJvdyB8fCBncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLkNvbHVtbilcbiAgICBjb25zdCByZXN1bHQ6IFRvY05vZGUgPSB7XG4gICAgICBsYWJlbCxcbiAgICAgIHR5cGU6ICdsYXlvdXRJdGVtJyxcbiAgICAgIGxheW91dElkOiBsYXlvdXQuaWQsXG4gICAgICBsYXlvdXRJdGVtSWQ6IGl0ZW1JZCxcbiAgICAgIGlzTGFiZWxSZWFkT25seTogIWVkaXRhYmxlXG4gICAgfVxuXG4gICAgaWYgKGNoaWxkcmVuPy5sZW5ndGggPiAwKSB7XG4gICAgICByZXN1bHQuY2hpbGRyZW4gPSBbLi4uY2hpbGRyZW5dLm1hcCgoaXRlbUlkKSA9PiB0aGlzLmZldGNoR3JpZE5vZGUoYXBwQ29uZmlnLCBsYXlvdXQsIGl0ZW1JZCwgYnJvd3NlclNpemVNb2RlKSlcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGNsYXNzTmFtZXMsXG4gIGpzeCxcbiAgY3NzLFxuICBwb2xpc2hlZCxcbiAgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgSW1tdXRhYmxlLFxuICB0eXBlIElNU2l6ZU1vZGVMYXlvdXRKc29uLFxuICBPbmVCeU9uZUFuaW1hdGlvbixcbiAgRXh0ZW5zaW9uTWFuYWdlcixcbiAgZXh0ZW5zaW9uU3BlYyxcbiAgdHlwZSBMYXlvdXRUcmFuc2Zvcm1GdW5jLFxuICBMYXlvdXRUeXBlLFxuICBsb2Rhc2gsXG4gIEludGVyc2VjdGlvbkNvbnRleHRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7XG4gIHR5cGUgR3JpZExheW91dFNldHRpbmcsXG4gIHR5cGUgTGF5b3V0UHJvcHMsXG4gIHR5cGUgU3RhdGVUb0xheW91dFByb3BzLFxuICB1dGlscyxcbiAgUGFnZUNvbnRleHQsXG4gIHR5cGUgUGFnZUNvbnRleHRQcm9wc1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBEcm9wQXJlYSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJvcGFyZWEtaG9vaydcbmltcG9ydCB7IEdMT0JBTF9EUkFHR0lOR19DTEFTU19OQU1FLCBHTE9CQUxfSDVfRFJBR0dJTkdfQ0xBU1NfTkFNRSB9IGZyb20gJy4uLy4uL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJhZy1ldmVudC1oYW5kbGVyJ1xuaW1wb3J0IHsgdHlwZSBEcm9wSGFuZGxlcnMgfSBmcm9tICcuLi8uLi9idWlsZGVyL3R5cGVzJ1xuaW1wb3J0IHsgYWRkSXRlbVRvR3JpZCwgc3BsaXRHcmlkIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IGdldEdyaWRJdGVtLCBjYWxQYWRkaW5nU3R5bGUgfSBmcm9tICcuLi9jb21tb24vdXRpbHMnXG5pbXBvcnQgeyBHcmlkSXRlbUNvbXBvbmVudCB9IGZyb20gJy4vZ3JpZC1pdGVtJ1xuaW1wb3J0IHsgU2lkZVR5cGUgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgQWN0aW9uQmxvY2sgfSBmcm9tICcuL2FjdGlvbi1ibG9jaydcbmltcG9ydCB7IGdldFRoZW1lMiB9IGZyb20gJ2ppbXUtdGhlbWUnXG5cbmNvbnN0IGRyb3BhcmVhU3R5bGUgPSBjc3NgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgZGlzcGxheTogZmxleDtcbmBcblxuY29uc3QgZ2V0U3R5bGUgPSAobGF5b3V0U2V0dGluZykgPT4ge1xuICBjb25zdCB0aGVtZTIgPSBnZXRUaGVtZTIoKVxuICBjb25zdCBwYWRkaW5nID0gY2FsUGFkZGluZ1N0eWxlKGxheW91dFNldHRpbmcpXG4gIHJldHVybiBjc3NgXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgJHtwYWRkaW5nfVxuXG4gICAgLmdyaWQtcm9vdC1kcm9wLWFyZWEge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjQpO1xuICAgICAgYm9yZGVyOiAycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA0KTtcbiAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggOHB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDdweDtcbiAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIHotaW5kZXg6IDMwO1xuXG4gICAgICAmLnRvcCB7XG4gICAgICAgIHRvcDogMnB4O1xuICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgIHdpZHRoOiA2MHB4O1xuICAgICAgICBoZWlnaHQ6IDEwcHg7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgICAgIH1cblxuICAgICAgJi5ib3R0b20ge1xuICAgICAgICBib3R0b206IDJweDtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICB3aWR0aDogNjBweDtcbiAgICAgICAgaGVpZ2h0OiAxMHB4O1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgICB9XG5cbiAgICAgICYucmlnaHQge1xuICAgICAgICByaWdodDogMnB4O1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgaGVpZ2h0OiA2MHB4O1xuICAgICAgICB3aWR0aDogMTBweDtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuICAgICAgfVxuXG4gICAgICAmLmxlZnQge1xuICAgICAgICBsZWZ0OiAycHg7XG4gICAgICAgIHRvcDogNTAlO1xuICAgICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLiR7R0xPQkFMX0g1X0RSQUdHSU5HX0NMQVNTX05BTUV9ICYuZHJvcC10YXJnZXQgPiAuZ3JpZC1yb290LWRyb3AtYXJlYSxcbiAgICAuJHtHTE9CQUxfRFJBR0dJTkdfQ0xBU1NfTkFNRX0gJi5kcm9wLXRhcmdldCA+IC5ncmlkLXJvb3QtZHJvcC1hcmVhIHtcbiAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICAuaGlnaGxpZ2h0LWFyZWEge1xuICAgICAgYmFja2dyb3VuZDogJHtwb2xpc2hlZC5yZ2JhKFxuICAgICAgICB0aGVtZTIuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs3MDBdLFxuICAgICAgICAwLjJcbiAgICAgICl9O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICBkaXNwbGF5OiBub25lO1xuXG4gICAgICAmLmFjdGl2ZSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuXG4gICAgICAmLnRvcCB7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogNTAlO1xuICAgICAgfVxuICAgICAgJi5ib3R0b20ge1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDUwJTtcbiAgICAgIH1cbiAgICAgICYubGVmdCB7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiA1MCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cbiAgICAgICYucmlnaHQge1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgd2lkdGg6IDUwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgfVxuICAgICAgJi5jZW50ZXIge1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgfVxuICBgXG59XG5cbmNsYXNzIEdyaWRMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzPiBpbXBsZW1lbnRzIERyb3BIYW5kbGVycyB7XG4gIGZha2VMYXlvdXRzOiBJTVNpemVNb2RlTGF5b3V0SnNvblxuICB0aXBSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD5cbiAgbGF5b3V0VHJhbnNmb3JtOiBMYXlvdXRUcmFuc2Zvcm1GdW5jXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFByb3BzXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdXRpbHMuYXV0b0JpbmRIYW5kbGVycyh0aGlzLCBbJ2hhbmRsZURyb3AnXSlcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuZmFrZUxheW91dHMgPSBJbW11dGFibGUoe1xuICAgICAgW0Jyb3dzZXJTaXplTW9kZS5MYXJnZV06IGAke2xheW91dC5pZH1fdGxhcmdlYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuTWVkaXVtXTogYCR7bGF5b3V0LmlkfV90bWVkaXVtYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuU21hbGxdOiBgJHtsYXlvdXQuaWR9X3RzbWFsbGBcbiAgICB9KSBhcyBhbnlcbiAgICB0aGlzLnRpcFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpXG4gIH1cblxuICBmaW5kRXh0ZW5zaW9uICgpOiB2b2lkIHtcbiAgICBjb25zdCBleHRzID0gRXh0ZW5zaW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldEV4dGVuc2lvbnMoXG4gICAgICBgJHtleHRlbnNpb25TcGVjLkV4dGVuc2lvblBvaW50cy5MYXlvdXRUcmFuc2Zvcm1lcn1gXG4gICAgKVxuICAgIGlmIChleHRzPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleHQgPSBleHRzLmZpbmQoaXRlbSA9PiAoaXRlbSBhcyBleHRlbnNpb25TcGVjLkxheW91dFRyYW5zZm9ybWVyRXh0ZW5zaW9uKS5sYXlvdXRUeXBlID09PSBMYXlvdXRUeXBlLkdyaWRMYXlvdXQpXG4gICAgICB0aGlzLmxheW91dFRyYW5zZm9ybSA9IChleHQgYXMgYW55KT8udHJhbnNmb3JtTGF5b3V0XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlRHJhZ092ZXIgKCkge31cblxuICBoYW5kbGVEcmFnRW50ZXIgKCkge31cblxuICBoYW5kbGVEcmFnTGVhdmUgKCkge31cblxuICBoYW5kbGVEcm9wIChkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLCBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LCBpdGVtUmVjdDogQ2xpZW50UmVjdCkge1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgbGF5b3V0SW5mbyA9IHtcbiAgICAgIGxheW91dElkOiBsYXlvdXQuaWRcbiAgICB9XG5cbiAgICBsZXQgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICBhZGRJdGVtVG9HcmlkKGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsIGRyYWdnaW5nSXRlbSwgbGF5b3V0SW5mbywgbnVsbCwgU2lkZVR5cGUuQ2VudGVyKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnN0IHsgYXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBuZXdMYXlvdXRJbmZvIH0gPSByZXN1bHRcbiAgICAgIGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbihhcHBDb25maWcpXG4gICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VsZWN0aW9uQ2hhbmdlZChuZXdMYXlvdXRJbmZvKSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlRHJvcEF0U2lkZSAoZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcywgc2lkZTogU2lkZVR5cGUpIHtcbiAgICB0aGlzLmNsZWFySGlnaGxpZ2h0KHNpZGUpXG4gICAgY29uc3QgbGF5b3V0SWQgPSB0aGlzLnByb3BzLmxheW91dC5pZFxuXG4gICAgbGV0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgdGhpcy50aXBSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3AtdGFyZ2V0JylcblxuICAgIHNwbGl0R3JpZChhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnLCBkcmFnZ2luZ0l0ZW0sIGxheW91dElkLCBzaWRlKS50aGVuKFxuICAgICAgKHsgYXBwQ29uZmlnLCBpdGVtSWQgfSkgPT4ge1xuICAgICAgICBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuICAgICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKHtcbiAgICAgICAgICBsYXlvdXRJZCxcbiAgICAgICAgICBsYXlvdXRJdGVtSWQ6IGl0ZW1JZFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBoYW5kbGVUZW1wbGF0ZVNlbGVjdGVkID0gYXN5bmMgKHRlbXBsYXRlR3JpZEpzb24pID0+IHtcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG5cbiAgICBhd2FpdCBhcHBDb25maWdBY3Rpb24uYXBwbHlHcmlkVGVtcGxhdGUoXG4gICAgICBsYXlvdXQucGFyZW50LmlkLFxuICAgICAgdGVtcGxhdGVHcmlkSnNvblxuICAgIClcbiAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gIH1cblxuICBoYW5kbGVQYWdlVGVtcGxhdGVTZWxlY3RlZCA9ICh0ZW1wbGF0ZVBhZ2VKc29uKTogdm9pZCA9PiB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogdHJ1ZSB9KVxuXG4gICAgYXBwQ29uZmlnQWN0aW9uLmFwcGx5UGFnZUJvZHlUZW1wbGF0ZSh0aGlzLnBhZ2VDb250ZXh0LnBhZ2VJZCwgdGVtcGxhdGVQYWdlSnNvbilcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuICAgICAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdUZW1wbGF0ZTogZmFsc2UgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pLmZpbmFsbHkobnVsbClcbiAgfVxuXG4gIGhpZ2hsaWdodCA9IChzaWRlOiBTaWRlVHlwZSkgPT4ge1xuICAgIHRoaXMudGlwUmVmLmN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJywgc2lkZSlcbiAgfVxuXG4gIGNsZWFySGlnaGxpZ2h0ID0gKHNpZGU6IFNpZGVUeXBlKTogdm9pZCA9PiB7XG4gICAgdGhpcy50aXBSZWYuY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnLCBzaWRlKVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGxheW91dHMsIGxheW91dCwgYnJvd3NlclNpemVNb2RlLCBtYWluU2l6ZU1vZGUsIGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHZpZXdPbmx5ID0gbGF5b3V0c1ticm93c2VyU2l6ZU1vZGVdICE9PSBsYXlvdXQuaWRcbiAgICBsZXQgZmluYWxMYXlvdXQgPSBsYXlvdXRcblxuICAgIGlmICh2aWV3T25seSkge1xuICAgICAgaWYgKHRoaXMubGF5b3V0VHJhbnNmb3JtID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5maW5kRXh0ZW5zaW9uKClcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxheW91dFRyYW5zZm9ybSAhPSBudWxsKSB7XG4gICAgICAgIGZpbmFsTGF5b3V0ID0gdGhpcy5sYXlvdXRUcmFuc2Zvcm0obGF5b3V0LCBtYWluU2l6ZU1vZGUsIGJyb3dzZXJTaXplTW9kZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgeyByb290SXRlbTogcm9vdEl0ZW1JZCB9ID0gZmluYWxMYXlvdXQuc2V0dGluZyA/PyB7fSBhcyBHcmlkTGF5b3V0U2V0dGluZ1xuICAgIGNvbnN0IHJvb3RJdGVtID0gZ2V0R3JpZEl0ZW0oZmluYWxMYXlvdXQsIHJvb3RJdGVtSWQpXG5cbiAgICBjb25zdCBvdXRDbGFzcyA9IGNsYXNzTmFtZXMoJ2xheW91dCBncmlkLWxheW91dCBkLWZsZXggdy0xMDAgaC0xMDAnLCBjbGFzc05hbWUpXG4gICAgY29uc3QgY2hpbGRyZW5TaXplID0gcm9vdEl0ZW0/LmNoaWxkcmVuPy5sZW5ndGggPz8gMFxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgeyhwcm9wczogUGFnZUNvbnRleHRQcm9wcykgPT4ge1xuICAgICAgICAgIHRoaXMucGFnZUNvbnRleHQgPSBwcm9wc1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17b3V0Q2xhc3N9IGNzcz17Z2V0U3R5bGUoZmluYWxMYXlvdXQuc2V0dGluZyl9IGRhdGEtbGF5b3V0aWQ9e2ZpbmFsTGF5b3V0LmlkfT5cbiAgICAgICAgICAgICAgPEludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgbW9uaXRvcjogZmFsc2UgfX0+XG4gICAgICAgICAgICAgICAgPE9uZUJ5T25lQW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICBvaWQ9e2ZpbmFsTGF5b3V0LmlkfVxuICAgICAgICAgICAgICAgICAgZGF0YS1sYXlvdXRpZD17ZmluYWxMYXlvdXQuaWR9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RyYWlsLWNvbnRhaW5lciBkLWZsZXggdy0xMDAgaC0xMDAnXG4gICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtyb290SXRlbSA9PSBudWxsICYmIChcbiAgICAgICAgICAgICAgICAgICAgPERyb3BBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgY3NzPXtkcm9wYXJlYVN0eWxlfVxuICAgICAgICAgICAgICAgICAgICAgIGxheW91dHM9e3RoaXMucHJvcHMubGF5b3V0c31cbiAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHREcmFnb3Zlcj17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbnRlcj17dGhpcy5oYW5kbGVEcmFnRW50ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgb25EcmFnTGVhdmU9e3RoaXMuaGFuZGxlRHJhZ0xlYXZlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3RoaXMuaGFuZGxlRHJhZ092ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXt0aGlzLmhhbmRsZURyb3B9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWN5YW4tNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Ryb3BBcmVhPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtyb290SXRlbSA9PSBudWxsICYmICF2aWV3T25seSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25CbG9ja1xuICAgICAgICAgICAgICAgICAgICAgIGxheW91dElkPXtsYXlvdXQuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgcGFnZUNvbnRleHQ9e3Byb3BzfVxuICAgICAgICAgICAgICAgICAgICAgIG9uVGVtcGxhdGVTZWxlY3RlZD17dGhpcy5oYW5kbGVUZW1wbGF0ZVNlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgICAgIG9uUGFnZVRlbXBsYXRlU2VsZWN0ZWQ9e3RoaXMuaGFuZGxlUGFnZVRlbXBsYXRlU2VsZWN0ZWR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge3Jvb3RJdGVtXG4gICAgICAgICAgICAgICAgICAgID8gPEdyaWRJdGVtQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCdcbiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQ9e2ZpbmFsTGF5b3V0fVxuICAgICAgICAgICAgICAgICAgICAgIGxheW91dEl0ZW1JZD17cm9vdEl0ZW1JZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPC9PbmVCeU9uZUFuaW1hdGlvbj5cbiAgICAgICAgICAgICAgPC9JbnRlcnNlY3Rpb25Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgICAgICB7Y2hpbGRyZW5TaXplID4gMSAmJiAoXG4gICAgICAgICAgICAgICAgW1NpZGVUeXBlLlRvcCwgU2lkZVR5cGUuUmlnaHQsIFNpZGVUeXBlLkJvdHRvbSwgU2lkZVR5cGUuTGVmdF0ubWFwKHNpZGUgPT4gKFxuICAgICAgICAgICAgICAgICAgPERyb3BBcmVhXG4gICAgICAgICAgICAgICAgICAgIGtleT17c2lkZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzaWRlfSBncmlkLXJvb3QtZHJvcC1hcmVhIHNoYWRvdy1zbWB9XG4gICAgICAgICAgICAgICAgICAgIGxheW91dHM9e3RoaXMuZmFrZUxheW91dHN9XG4gICAgICAgICAgICAgICAgICAgIG9uRHJvcD17KGRyYWdnaW5nSXRlbSkgPT4geyB0aGlzLmhhbmRsZURyb3BBdFNpZGUoZHJhZ2dpbmdJdGVtLCBzaWRlKSB9fVxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbnRlcj17ICgpID0+IHsgdGhpcy5oaWdobGlnaHQoc2lkZSkgfSB9XG4gICAgICAgICAgICAgICAgICAgIG9uRHJhZ0xlYXZlPXsgKCkgPT4geyB0aGlzLmNsZWFySGlnaGxpZ2h0KHNpZGUpIH0gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPC9Ecm9wQXJlYT5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8ZGl2IHJlZj17dGhpcy50aXBSZWZ9IGNsYXNzTmFtZT0naGlnaGxpZ2h0LWFyZWEnPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKVxuICAgICAgICB9fVxuICAgICAgPC9QYWdlQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgTGF5b3V0UHJvcHM+KHV0aWxzLm1hcFN0YXRlVG9MYXlvdXRQcm9wcykoR3JpZExheW91dClcbiIsImV4cG9ydCBlbnVtIFNpZGVUeXBlIHtcbiAgVG9wID0gJ3RvcCcsXG4gIEJvdHRvbSA9ICdib3R0b20nLFxuICBMZWZ0ID0gJ2xlZnQnLFxuICBSaWdodCA9ICdyaWdodCcsXG4gIENlbnRlciA9ICdjZW50ZXInXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICB0eXBlIExheW91dEluZm8sXG4gIHR5cGUgSU1BcHBDb25maWcsXG4gIEdyaWRJdGVtVHlwZSxcbiAgdHlwZSBJTUdyaWRMYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIHR5cGUgR3JpZExheW91dEl0ZW1Kc29uXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHNlYXJjaFV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgYWRkSXRlbVRvTGF5b3V0IH0gZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tbGF5b3V0LWFjdGlvbnMnXG5pbXBvcnQgeyBTaWRlVHlwZSB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBhdHRhY2hUb0dyaWRJdGVtLCBjcmVhdGVFbXB0eUdyaWRJdGVtLCB1cGRhdGVHcmlkSXRlbSwgdXBkYXRlU2l6ZSB9IGZyb20gJy4vZ3JpZC1pdGVtLXV0aWwnXG5cbmFzeW5jIGZ1bmN0aW9uIGFkZEl0ZW0gKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgcGFyZW50TGF5b3V0SW5mbzogTGF5b3V0SW5mb1xuKTogUHJvbWlzZTx7IG5ld0xheW91dEl0ZW1JZDogc3RyaW5nLCB1cGRhdGVkQXBwQ29uZmlnOiBJTUFwcENvbmZpZyB9PiB7XG4gIGNvbnN0IHsgbGF5b3V0SW5mbzogeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0sIHVwZGF0ZWRBcHBDb25maWcgfSA9IGF3YWl0IGFkZEl0ZW1Ub0xheW91dChcbiAgICBhcHBDb25maWcsXG4gICAgaXRlbSxcbiAgICBwYXJlbnRMYXlvdXRJbmZvLmxheW91dElkXG4gIClcbiAgbGV0IG91dEFwcENvbmZpZyA9IHVwZGF0ZWRBcHBDb25maWdcbiAgaWYgKGl0ZW0ubGF5b3V0SW5mbz8ubGF5b3V0SWQgIT09IHBhcmVudExheW91dEluZm8ubGF5b3V0SWQpIHtcbiAgICBvdXRBcHBDb25maWcgPSB1cGRhdGVkQXBwQ29uZmlnLnNldEluKFsnbGF5b3V0cycsIGxheW91dElkLCAnY29udGVudCcsIGxheW91dEl0ZW1JZCwgJ2dyaWRUeXBlJ10sIEdyaWRJdGVtVHlwZS5QbGFpbilcbiAgfVxuICByZXR1cm4geyBuZXdMYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW1JZCwgdXBkYXRlZEFwcENvbmZpZzogb3V0QXBwQ29uZmlnIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEl0ZW1Ub0dyaWQgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgcGFyZW50TGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgcmVmZXJlbmNlSXRlbUlkOiBzdHJpbmcsXG4gIHNpZGU6IFNpZGVUeXBlXG4pOiBQcm9taXNlPHsgYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyB9PiB7XG4gIC8vIGNvbnN0IHsgbGF5b3V0SW5mbyB9ID0gaXRlbVxuICBjb25zdCB7IGxheW91dElkOiBwTGF5b3V0SWQgfSA9IHBhcmVudExheW91dEluZm9cbiAgbGV0IG91dEFwcENvbmZpZyA9IGFwcENvbmZpZ1xuICAvLyBsZXQgbmV3TGF5b3V0SXRlbUlkXG5cbiAgLy8gaWYgKGxheW91dEluZm8/LmxheW91dElkID09PSBwTGF5b3V0SWQpIHtcbiAgLy8gICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbcExheW91dElkXS5jb250ZW50W2xheW91dEluZm8ubGF5b3V0SXRlbUlkXVxuICAvLyAgIGlmIChsYXlvdXRJdGVtLmlzUGVuZGluZykge1xuICAvLyAgICAgb3V0QXBwQ29uZmlnID0gb3V0QXBwQ29uZmlnLnNldEluKFsnbGF5b3V0cycsIHBMYXlvdXRJZCwgJ2NvbnRlbnQnLCBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZF0sIGxheW91dEl0ZW0ud2l0aG91dCgnaXNQZW5kaW5nJykpXG4gIC8vICAgfSBlbHNlIHtcbiAgLy8gICAgIC8vIG1vdmUgaW4gdGhlIHNhbWUgZ3JpZFxuICAvLyAgICAgY29uc3QgdXBkYXRlTGF5b3V0ID0gZ2V0QXBwQ29uZmlnQWN0aW9uKCkuZGV0YWNoR3JpZEl0ZW0oYXBwQ29uZmlnLmxheW91dHNbcExheW91dElkXSwgbGF5b3V0SW5mby5sYXlvdXRJdGVtSWQpXG4gIC8vICAgICBvdXRBcHBDb25maWcgPSBvdXRBcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgcExheW91dElkXSwgdXBkYXRlTGF5b3V0KVxuICAvLyAgIH1cbiAgLy8gICBuZXdMYXlvdXRJdGVtSWQgPSBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZFxuICAvLyB9IGVsc2Uge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGRJdGVtKGFwcENvbmZpZywgaXRlbSwgcGFyZW50TGF5b3V0SW5mbylcbiAgY29uc3QgbmV3TGF5b3V0SXRlbUlkID0gcmVzdWx0Lm5ld0xheW91dEl0ZW1JZFxuICBvdXRBcHBDb25maWcgPSByZXN1bHQudXBkYXRlZEFwcENvbmZpZ1xuICAvLyB9XG5cbiAgaWYgKCFyZWZlcmVuY2VJdGVtSWQpIHtcbiAgICBvdXRBcHBDb25maWcgPSBvdXRBcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgcExheW91dElkLCAnY29udGVudCcsIG5ld0xheW91dEl0ZW1JZCwgJ2Jib3gnXSwgeyB3aWR0aDogMTAwIH0pXG4gICAgICAuc2V0SW4oWydsYXlvdXRzJywgcExheW91dElkLCAnY29udGVudCcsIG5ld0xheW91dEl0ZW1JZCwgJ2dyaWRUeXBlJ10sIEdyaWRJdGVtVHlwZS5QbGFpbilcbiAgICAgIC5zZXRJbihbJ2xheW91dHMnLCBwTGF5b3V0SWQsICdzZXR0aW5nJywgJ3Jvb3RJdGVtJ10sIG5ld0xheW91dEl0ZW1JZClcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBvdXRMYXlvdXQgPSBhdHRhY2hUb0dyaWRJdGVtKG91dEFwcENvbmZpZy5sYXlvdXRzW3BMYXlvdXRJZF0sIG5ld0xheW91dEl0ZW1JZCwgcmVmZXJlbmNlSXRlbUlkLCBzaWRlKVxuICAgIG91dEFwcENvbmZpZyA9IG91dEFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBwTGF5b3V0SWRdLCBvdXRMYXlvdXQpXG4gIH1cblxuICByZXR1cm4geyBhcHBDb25maWc6IG91dEFwcENvbmZpZywgbGF5b3V0SW5mbzogeyBsYXlvdXRJZDogcExheW91dElkLCBsYXlvdXRJdGVtSWQ6IG5ld0xheW91dEl0ZW1JZCB9IH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNwbGl0R3JpZCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGl0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICBncmlkTGF5b3V0SWQ6IHN0cmluZyxcbiAgc2lkZTogU2lkZVR5cGVcbik6IFByb21pc2U8eyBhcHBDb25maWc6IElNQXBwQ29uZmlnLCBpdGVtSWQ6IHN0cmluZyB9PiB7XG4gIGNvbnN0IHsgbGF5b3V0SW5mbyB9ID0gaXRlbVxuICBsZXQgb3V0QXBwQ29uZmlnID0gYXBwQ29uZmlnXG4gIGxldCBuZXdMYXlvdXRJdGVtSWRcblxuICBpZiAobGF5b3V0SW5mbz8ubGF5b3V0SWQgPT09IGdyaWRMYXlvdXRJZCkge1xuICAgIC8vIG1vdmUgaW4gdGhlIHNhbWUgZ3JpZFxuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pXG4gICAgaWYgKGxheW91dEl0ZW0uaXNQZW5kaW5nKSB7IC8vIGFscmVhZHkgZGV0YWNoZWRcbiAgICAgIG91dEFwcENvbmZpZyA9IG91dEFwcENvbmZpZy5zZXRJbihcbiAgICAgICAgWydsYXlvdXRzJywgZ3JpZExheW91dElkLCAnY29udGVudCcsIGxheW91dEluZm8ubGF5b3V0SXRlbUlkXSxcbiAgICAgICAgbGF5b3V0SXRlbS53aXRob3V0KCdpc1BlbmRpbmcnKVxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB1cGRhdGVMYXlvdXQgPSBkZXRhY2hHcmlkSXRlbShvdXRBcHBDb25maWcubGF5b3V0c1tncmlkTGF5b3V0SWRdLCBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZClcbiAgICAgIG91dEFwcENvbmZpZyA9IG91dEFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBncmlkTGF5b3V0SWRdLCB1cGRhdGVMYXlvdXQpXG4gICAgfVxuICAgIG5ld0xheW91dEl0ZW1JZCA9IGxheW91dEluZm8ubGF5b3V0SXRlbUlkXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRkSXRlbShhcHBDb25maWcsIGl0ZW0sIHsgbGF5b3V0SWQ6IGdyaWRMYXlvdXRJZCB9KVxuICAgIG5ld0xheW91dEl0ZW1JZCA9IHJlc3VsdC5uZXdMYXlvdXRJdGVtSWRcbiAgICBvdXRBcHBDb25maWcgPSByZXN1bHQudXBkYXRlZEFwcENvbmZpZ1xuICB9XG5cbiAgY29uc3QgbGF5b3V0ID0gb3V0QXBwQ29uZmlnLmxheW91dHNbZ3JpZExheW91dElkXVxuICBjb25zdCByb290TGF5b3V0SXRlbUlkID0gbGF5b3V0LnNldHRpbmcucm9vdEl0ZW1cbiAgY29uc3Qgcm9vdEl0ZW0gPSBsYXlvdXQuY29udGVudFtyb290TGF5b3V0SXRlbUlkXSBhcyBJTUdyaWRMYXlvdXRJdGVtSnNvblxuICBsZXQgbmV3Um9vdEl0ZW1cbiAgaWYgKHNpZGUgPT09IFNpZGVUeXBlLkxlZnQgfHwgc2lkZSA9PT0gU2lkZVR5cGUuUmlnaHQpIHtcbiAgICBpZiAocm9vdEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5Sb3cpIHtcbiAgICAgIC8vIGFwcGVuZCB0byBleGlzdGluZyByb3dcbiAgICAgIGxldCBvdXRMYXlvdXQgPSBsYXlvdXRcbiAgICAgIG91dExheW91dCA9IHVwZGF0ZVNpemUob3V0TGF5b3V0LCByb290TGF5b3V0SXRlbUlkLCAxMDApXG4gICAgICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgbmV3TGF5b3V0SXRlbUlkLCA1MClcbiAgICAgIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgbmV3TGF5b3V0SXRlbUlkLCAncGFyZW50Jywgcm9vdExheW91dEl0ZW1JZClcbiAgICAgIHJvb3RJdGVtLmNoaWxkcmVuLmZvckVhY2goaWQgPT4ge1xuICAgICAgICBjb25zdCBjaGlsZEl0ZW0gPSBvdXRMYXlvdXQuY29udGVudFtpZF1cbiAgICAgICAgb3V0TGF5b3V0ID0gdXBkYXRlU2l6ZShvdXRMYXlvdXQsIGlkLCArY2hpbGRJdGVtLmJib3gud2lkdGggLyAyKVxuICAgICAgfSlcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBbLi4ucm9vdEl0ZW0uY2hpbGRyZW5dXG4gICAgICBpZiAoc2lkZSA9PT0gU2lkZVR5cGUuTGVmdCkge1xuICAgICAgICBjb250ZW50LnVuc2hpZnQobmV3TGF5b3V0SXRlbUlkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5wdXNoKG5ld0xheW91dEl0ZW1JZClcbiAgICAgIH1cbiAgICAgIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCByb290TGF5b3V0SXRlbUlkLCAnY2hpbGRyZW4nXSwgY29udGVudClcbiAgICAgIG91dEFwcENvbmZpZyA9IG91dEFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBncmlkTGF5b3V0SWRdLCBvdXRMYXlvdXQpXG4gICAgICByZXR1cm4geyBhcHBDb25maWc6IG91dEFwcENvbmZpZywgaXRlbUlkOiBuZXdMYXlvdXRJdGVtSWQgfVxuICAgIH1cbiAgICBuZXdSb290SXRlbSA9IGNyZWF0ZUVtcHR5R3JpZEl0ZW0obGF5b3V0LCBHcmlkSXRlbVR5cGUuUm93KVxuICB9IGVsc2Uge1xuICAgIGlmIChyb290SXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLkNvbHVtbikge1xuICAgICAgLy8gYXBwZW5kIHRvIGV4aXN0aW5nIGNvbHVtblxuICAgICAgbGV0IG91dExheW91dCA9IGxheW91dFxuICAgICAgb3V0TGF5b3V0ID0gdXBkYXRlU2l6ZShvdXRMYXlvdXQsIHJvb3RMYXlvdXRJdGVtSWQsIDEwMClcbiAgICAgIG91dExheW91dCA9IHVwZGF0ZVNpemUob3V0TGF5b3V0LCBuZXdMYXlvdXRJdGVtSWQsIDUwKVxuICAgICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBuZXdMYXlvdXRJdGVtSWQsICdwYXJlbnQnLCByb290TGF5b3V0SXRlbUlkKVxuICAgICAgcm9vdEl0ZW0uY2hpbGRyZW4uZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIGNvbnN0IGNoaWxkSXRlbSA9IG91dExheW91dC5jb250ZW50W2lkXVxuICAgICAgICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgaWQsICtjaGlsZEl0ZW0uYmJveC53aWR0aCAvIDIpXG4gICAgICB9KVxuICAgICAgY29uc3QgY29udGVudCA9IFsuLi5yb290SXRlbS5jaGlsZHJlbl1cbiAgICAgIGlmIChzaWRlID09PSBTaWRlVHlwZS5Ub3ApIHtcbiAgICAgICAgY29udGVudC51bnNoaWZ0KG5ld0xheW91dEl0ZW1JZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQucHVzaChuZXdMYXlvdXRJdGVtSWQpXG4gICAgICB9XG4gICAgICBvdXRMYXlvdXQgPSBvdXRMYXlvdXQuc2V0SW4oWydjb250ZW50Jywgcm9vdExheW91dEl0ZW1JZCwgJ2NoaWxkcmVuJ10sIGNvbnRlbnQpXG4gICAgICBvdXRBcHBDb25maWcgPSBvdXRBcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgZ3JpZExheW91dElkXSwgb3V0TGF5b3V0KVxuICAgICAgcmV0dXJuIHsgYXBwQ29uZmlnOiBvdXRBcHBDb25maWcsIGl0ZW1JZDogbmV3TGF5b3V0SXRlbUlkIH1cbiAgICB9XG4gICAgbmV3Um9vdEl0ZW0gPSBjcmVhdGVFbXB0eUdyaWRJdGVtKGxheW91dCwgR3JpZEl0ZW1UeXBlLkNvbHVtbilcbiAgfVxuICBsZXQgeyBvdXRMYXlvdXQsIG91dEl0ZW0gfSA9IG5ld1Jvb3RJdGVtXG5cbiAgb3V0TGF5b3V0ID0gb3V0TGF5b3V0LnNldEluKFsnc2V0dGluZycsICdyb290SXRlbSddLCBvdXRJdGVtLmlkKVxuICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgb3V0SXRlbS5pZCwgMTAwKVxuICBvdXRMYXlvdXQgPSB1cGRhdGVTaXplKG91dExheW91dCwgcm9vdExheW91dEl0ZW1JZCwgNTApXG4gIG91dExheW91dCA9IHVwZGF0ZUdyaWRJdGVtKG91dExheW91dCwgcm9vdExheW91dEl0ZW1JZCwgJ3BhcmVudCcsIG91dEl0ZW0uaWQpXG4gIG91dExheW91dCA9IHVwZGF0ZVNpemUob3V0TGF5b3V0LCBuZXdMYXlvdXRJdGVtSWQsIDUwKVxuICBvdXRMYXlvdXQgPSB1cGRhdGVHcmlkSXRlbShvdXRMYXlvdXQsIG5ld0xheW91dEl0ZW1JZCwgJ3BhcmVudCcsIG91dEl0ZW0uaWQpXG5cbiAgaWYgKHNpZGUgPT09IFNpZGVUeXBlLkxlZnQgfHwgc2lkZSA9PT0gU2lkZVR5cGUuVG9wKSB7XG4gICAgb3V0TGF5b3V0ID0gdXBkYXRlR3JpZEl0ZW0ob3V0TGF5b3V0LCBvdXRJdGVtLmlkLCAnY2hpbGRyZW4nLCBbbmV3TGF5b3V0SXRlbUlkLCByb290TGF5b3V0SXRlbUlkXSlcbiAgfSBlbHNlIHtcbiAgICBvdXRMYXlvdXQgPSB1cGRhdGVHcmlkSXRlbShvdXRMYXlvdXQsIG91dEl0ZW0uaWQsICdjaGlsZHJlbicsIFtyb290TGF5b3V0SXRlbUlkLCBuZXdMYXlvdXRJdGVtSWRdKVxuICB9XG5cbiAgb3V0QXBwQ29uZmlnID0gb3V0QXBwQ29uZmlnLnNldEluKFsnbGF5b3V0cycsIGdyaWRMYXlvdXRJZF0sIG91dExheW91dClcblxuICByZXR1cm4geyBhcHBDb25maWc6IG91dEFwcENvbmZpZywgaXRlbUlkOiBuZXdMYXlvdXRJdGVtSWQgfVxufVxuXG4vLyBkZXRhY2ggYSBncmlkIGl0ZW0gZnJvbSBpdHMgcGFyZW50IGJ1dCBkbyBub3QgcmVtb3ZlIHRoZSBsYXlvdXQgaXRlbVxuZXhwb3J0IGZ1bmN0aW9uIGRldGFjaEdyaWRJdGVtIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgbGF5b3V0SXRlbUlkOiBzdHJpbmcpOiBJTUxheW91dEpzb24ge1xuICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbbGF5b3V0SXRlbUlkXSBhcyBhbnlcbiAgY29uc3QgeyBwYXJlbnQgfSA9IGxheW91dEl0ZW1cbiAgaWYgKCFwYXJlbnQpIHtcbiAgICAvLyBkZXRhY2ggcm9vdCBvciBhbHJlYWR5IGRldGFjaGVkXG4gICAgaWYgKGxheW91dC5zZXR0aW5nLnJvb3RJdGVtID09PSBsYXlvdXRJdGVtSWQpIHtcbiAgICAgIHJldHVybiBsYXlvdXQuc2V0SW4oWydzZXR0aW5nJywgJ3Jvb3RJdGVtJ10sIG51bGwpXG4gICAgfVxuICAgIHJldHVybiBsYXlvdXRcbiAgfVxuICBsZXQgb3V0TGF5b3V0ID0gbGF5b3V0LnNldEluKFsnY29udGVudCcsIGxheW91dEl0ZW1JZF0sIGxheW91dEl0ZW0ud2l0aG91dCgncGFyZW50JykpXG4gIGNvbnN0IHBhcmVudExheW91dEl0ZW06IEdyaWRMYXlvdXRJdGVtSnNvbiA9IGxheW91dC5jb250ZW50W3BhcmVudF0gYXMgYW55XG4gIGlmICghcGFyZW50TGF5b3V0SXRlbSB8fCBwYXJlbnRMYXlvdXRJdGVtPy5jaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGxheW91dFxuICB9XG4gIGNvbnN0IGluZGV4ID0gcGFyZW50TGF5b3V0SXRlbS5jaGlsZHJlbi5pbmRleE9mKGxheW91dEl0ZW1JZClcbiAgY29uc3QgcmVtYWluSXRlbXMgPSBwYXJlbnRMYXlvdXRJdGVtLmNoaWxkcmVuLmZpbHRlcigoaXRlbUlkKSA9PiBpdGVtSWQgIT09IGxheW91dEl0ZW1JZClcbiAgaWYgKHJlbWFpbkl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgIGNvbnN0IGNoaWxkID0gcmVtYWluSXRlbXNbMF1cbiAgICAvLyByZW1vdmUgcGFyZW50LCBhbmQgcmVzZXQgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGdyYW5kcGFyZW50IGFuZCBjaGlsZFxuICAgIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCBjaGlsZCwgJ2Jib3gnLCAnd2lkdGgnXSwgcGFyZW50TGF5b3V0SXRlbS5iYm94LndpZHRoKVxuICAgIGlmIChwYXJlbnRMYXlvdXRJdGVtLnBhcmVudCAhPSBudWxsKSB7XG4gICAgICBvdXRMYXlvdXQgPSBvdXRMYXlvdXQuc2V0SW4oWydjb250ZW50JywgY2hpbGQsICdwYXJlbnQnXSwgcGFyZW50TGF5b3V0SXRlbS5wYXJlbnQpXG4gICAgICBjb25zdCBncmFuZFBhcmVudEl0ZW06IEdyaWRMYXlvdXRJdGVtSnNvbiA9IGxheW91dC5jb250ZW50W3BhcmVudExheW91dEl0ZW0ucGFyZW50XSBhcyBhbnlcbiAgICAgIGlmIChncmFuZFBhcmVudEl0ZW0pIHtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBbLi4uZ3JhbmRQYXJlbnRJdGVtLmNoaWxkcmVuXVxuICAgICAgICBjb25zdCBpbmRleCA9IG9yZGVyLmluZGV4T2YocGFyZW50KVxuICAgICAgICBvcmRlci5zcGxpY2UoaW5kZXgsIDEsIGNoaWxkKVxuICAgICAgICBvdXRMYXlvdXQgPSBvdXRMYXlvdXQuc2V0SW4oWydjb250ZW50JywgcGFyZW50TGF5b3V0SXRlbS5wYXJlbnQsICdjaGlsZHJlbiddLCBvcmRlcilcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcGFyZW50IGlzIHJvb3RcbiAgICAgIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCBjaGlsZF0sIG91dExheW91dC5jb250ZW50W2NoaWxkXS53aXRob3V0KCdwYXJlbnQnKSlcbiAgICAgIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihbJ3NldHRpbmcnLCAncm9vdEl0ZW0nXSwgY2hpbGQpXG4gICAgfVxuXG4gICAgb3V0TGF5b3V0ID0gb3V0TGF5b3V0LnNldCgnY29udGVudCcsIG91dExheW91dC5jb250ZW50LndpdGhvdXQocGFyZW50KSlcbiAgfSBlbHNlIHtcbiAgICBpZiAoaW5kZXggPCByZW1haW5JdGVtcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IG91dExheW91dC5jb250ZW50W3JlbWFpbkl0ZW1zW2luZGV4XV1cbiAgICAgIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihcbiAgICAgICAgWydjb250ZW50JywgcmVtYWluSXRlbXNbaW5kZXhdLCAnYmJveCcsICd3aWR0aCddLFxuICAgICAgICBpdGVtVG9VcGRhdGUuYmJveC53aWR0aCArIGxheW91dEl0ZW0uYmJveC53aWR0aFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpdGVtVG9VcGRhdGUgPSBvdXRMYXlvdXQuY29udGVudFtyZW1haW5JdGVtc1tyZW1haW5JdGVtcy5sZW5ndGggLSAxXV1cbiAgICAgIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihcbiAgICAgICAgWydjb250ZW50JywgcmVtYWluSXRlbXNbcmVtYWluSXRlbXMubGVuZ3RoIC0gMV0sICdiYm94JywgJ3dpZHRoJ10sXG4gICAgICAgIGl0ZW1Ub1VwZGF0ZS5iYm94LndpZHRoICsgbGF5b3V0SXRlbS5iYm94LndpZHRoXG4gICAgICApXG4gICAgfVxuICAgIG91dExheW91dCA9IG91dExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCBwYXJlbnQsICdjaGlsZHJlbiddLCByZW1haW5JdGVtcylcbiAgfVxuICByZXR1cm4gb3V0TGF5b3V0XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IHR5cGUgSW50ZXJhY3RhYmxlIH0gZnJvbSAnQGludGVyYWN0anMvdHlwZXMnXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwganN4LCBjc3MsIGNsYXNzTmFtZXMsIGdldEFwcFN0b3JlLCB0eXBlIElNU3RhdGUsIEFwcE1vZGUsIG1vZHVsZUxvYWRlciwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHJlZmVyZW5jZUl0ZW1JZDogc3RyaW5nXG4gIGRpcmVjdGlvbjogJ3JvdycgfCAnY29sJ1xuICBsYXlvdXRJZDogc3RyaW5nXG4gIG9uUmVzaXplRW5kPzogKGlkOiBzdHJpbmcsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpID0+IHZvaWRcbn1cblxuY29uc3QgTUlOX1NJWkUgPSAzMlxuXG5mdW5jdGlvbiByZXN0cmljdFJlc2l6aW5nIChcbiAgcHJldkl0ZW1SZWN0OiBET01SZWN0LFxuICBuZXh0SXRlbVJlY3Q6IERPTVJlY3QsXG4gIGRpcmVjdGlvbjogJ3JvdycgfCAnY29sJyxcbiAgZHg6IG51bWJlcixcbiAgZHk6IG51bWJlcixcbiAgaXNSVEw6IGJvb2xlYW5cbik6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSB7XG4gIGxldCB4ID0gZHhcbiAgbGV0IHkgPSBkeVxuICBpZiAoZGlyZWN0aW9uID09PSAncm93Jykge1xuICAgIGNvbnN0IHByZXZXaWR0aCA9IGlzUlRMID8gbmV4dEl0ZW1SZWN0LndpZHRoIDogcHJldkl0ZW1SZWN0LndpZHRoXG4gICAgY29uc3QgbmV4dFdpZHRoID0gaXNSVEwgPyBwcmV2SXRlbVJlY3Qud2lkdGggOiBuZXh0SXRlbVJlY3Qud2lkdGhcbiAgICBpZiAoZHggPCAwKSB7XG4gICAgICBpZiAocHJldldpZHRoID4gTUlOX1NJWkUpIHtcbiAgICAgICAgeCA9IC1NYXRoLm1pbihNYXRoLmFicyhkeCksIHByZXZXaWR0aCAtIE1JTl9TSVpFKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeCA9IDBcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGR4ID4gMCkge1xuICAgICAgaWYgKG5leHRXaWR0aCA+IE1JTl9TSVpFKSB7XG4gICAgICAgIHggPSBNYXRoLm1pbihkeCwgbmV4dFdpZHRoIC0gTUlOX1NJWkUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gMFxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZHkgPCAwKSB7XG4gICAgICBpZiAocHJldkl0ZW1SZWN0LmhlaWdodCA+IE1JTl9TSVpFKSB7XG4gICAgICAgIHkgPSAtTWF0aC5taW4oTWF0aC5hYnMoZHkpLCBwcmV2SXRlbVJlY3QuaGVpZ2h0IC0gTUlOX1NJWkUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5ID0gMFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZHkgPiAwKSB7XG4gICAgICBpZiAobmV4dEl0ZW1SZWN0LmhlaWdodCA+IE1JTl9TSVpFKSB7XG4gICAgICAgIHkgPSBNYXRoLm1pbihkeSwgbmV4dEl0ZW1SZWN0LmhlaWdodCAtIE1JTl9TSVpFKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeSA9IDBcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgeCwgeSB9XG59XG5cbmZ1bmN0aW9uIGdldFNpemUgKGxheW91dEl0ZW1FbGVtZW50OiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG4gIGNvbnN0IGxheW91dElkID0gbGF5b3V0SXRlbUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxheW91dGlkJylcbiAgY29uc3QgbGF5b3V0SXRlbUlkID0gbGF5b3V0SXRlbUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxheW91dGl0ZW1pZCcpXG4gIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcblxuICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICByZXR1cm4gK2xheW91dEl0ZW0uYmJveC53aWR0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gU3BsaXR0ZXIgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IHJlZmVyZW5jZUl0ZW1JZCwgZGlyZWN0aW9uLCBsYXlvdXRJZCwgb25SZXNpemVFbmQgfSA9IHByb3BzXG4gIGNvbnN0IGRvbVJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBpbnRlcmFjdGFibGVSZWYgPSBSZWFjdC51c2VSZWY8SW50ZXJhY3RhYmxlPigpXG4gIGNvbnN0IGludGVyYWN0UmVmID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IGlzUlRMID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbnRleHQ/LmlzUlRMID8/IGZhbHNlXG5cbiAgY29uc3QgaXNEZXNpZ25Nb2RlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwUnVudGltZUluZm8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ25cbiAgfSlcblxuICBjb25zdCBsYXlvdXRSZXNpemFibGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW3Byb3BzLmxheW91dElkXVxuICAgIHJldHVybiBsYXlvdXQuc2V0dGluZz8ucmVzaXphYmxlID8/IHRydWVcbiAgfSlcblxuICBjb25zdCBzaXplID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsYXlvdXQgPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICByZXR1cm4gbGF5b3V0LnNldHRpbmc/LnNwbGl0U2l6ZSA/PyA4XG4gIH0pXG5cbiAgY29uc3QgY29sb3IgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgIHJldHVybiBsYXlvdXQuc2V0dGluZz8uc3BsaXRDb2xvciA/PyAndmFyKC0tbGlnaHQtNTAwKSdcbiAgfSlcblxuICBjb25zdCBzdHlsZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHB4U2l6ZSA9IGAke3NpemV9cHhgXG4gICAgY29uc3QgY2FuUmVzaXplID0gaXNEZXNpZ25Nb2RlID8gdHJ1ZSA6IGxheW91dFJlc2l6YWJsZVxuICAgIHJldHVybiBjc3NgXG4gICAgICB3aWR0aDogJHtkaXJlY3Rpb24gPT09ICdjb2wnID8gJzEwMCUnIDogcHhTaXplfTtcbiAgICAgIGhlaWdodDogJHtkaXJlY3Rpb24gPT09ICdjb2wnID8gcHhTaXplIDogJzEwMCUnfTtcbiAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3J9O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgei1pbmRleDogMTA7XG4gICAgICBmbGV4LXNocmluazogMDtcblxuICAgICAgLmhvcml6b250YWwtc3BsaXR0ZXIge1xuICAgICAgICBjdXJzb3I6ICR7Y2FuUmVzaXplID8gJ2NvbC1yZXNpemUnIDogJ2RlZmF1bHQnfTtcbiAgICAgIH1cblxuICAgICAgLnZlcnRpY2FsLXNwbGl0dGVyIHtcbiAgICAgICAgY3Vyc29yOiAke2NhblJlc2l6ZSA/ICdyb3ctcmVzaXplJyA6ICdkZWZhdWx0J307XG4gICAgICB9XG4gICAgYFxuICB9LCBbZGlyZWN0aW9uLCBsYXlvdXRSZXNpemFibGUsIGlzRGVzaWduTW9kZSwgc2l6ZSwgY29sb3JdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGxldCBkeFxuICAgIGxldCBkeVxuICAgIGxldCBwYXJlbnRSZWN0OiBET01SZWN0XG4gICAgbGV0IHByZXZJdGVtOiBIVE1MRWxlbWVudFxuICAgIGxldCBwcmV2SXRlbVJlY3Q6IERPTVJlY3RcbiAgICBsZXQgcHJldlNpemVcbiAgICBsZXQgb3JpZ2luUHJldkl0ZW1XaWR0aFxuICAgIGxldCBvcmlnaW5QcmV2SXRlbUhlaWdodFxuICAgIGxldCBuZXh0SXRlbTogSFRNTEVsZW1lbnRcbiAgICBsZXQgbmV4dEl0ZW1SZWN0OiBET01SZWN0XG4gICAgbGV0IG5leHRTaXplXG4gICAgbGV0IG9yaWdpbk5leHRJdGVtV2lkdGhcbiAgICBsZXQgb3JpZ2luTmV4dEl0ZW1IZWlnaHRcblxuICAgIG1vZHVsZUxvYWRlci5sb2FkTW9kdWxlKCdqaW11LWNvcmUvZG5kJykudGhlbihtb2R1bGUgPT4ge1xuICAgICAgY29uc3QgaW50ZXJhY3QgPSBtb2R1bGUuaW50ZXJhY3RcbiAgICAgIGludGVyYWN0UmVmLmN1cnJlbnQgPSBpbnRlcmFjdFxuXG4gICAgICBpZiAoIWRvbVJlZi5jdXJyZW50KSB7IC8vIG1heWJlIHVubW91bnRlZCBpbiB0aGlzIGFzeW5jIGNhbGxiYWNrXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpbnRlcmFjdGFibGVSZWYuY3VycmVudCA9IGludGVyYWN0KGRvbVJlZi5jdXJyZW50KVxuICAgICAgICAub3JpZ2luKCdwYXJlbnQnKVxuICAgICAgICAuZHJhZ2dhYmxlKHtcbiAgICAgICAgICBpbmVydGlhOiBmYWxzZSxcbiAgICAgICAgICBhdXRvU2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgICBlbmFibGVkOiBpc0Rlc2lnbk1vZGUgPyB0cnVlIDogbGF5b3V0UmVzaXphYmxlLFxuICAgICAgICAgIG1vZGlmaWVyczogW1xuICAgICAgICAgICAgaW50ZXJhY3QubW9kaWZpZXJzLnJlc3RyaWN0KHtcbiAgICAgICAgICAgICAgcmVzdHJpY3Rpb246ICdwYXJlbnQnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIF0sXG4gICAgICAgICAgbG9ja0F4aXM6IGRpcmVjdGlvbiA9PT0gJ3JvdycgPyAneCcgOiAneScsXG4gICAgICAgICAgb25zdGFydDogKGV2ZW50OiBJbnRlcmFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICBkeCA9IDBcbiAgICAgICAgICAgIGR5ID0gMFxuICAgICAgICAgICAgcGFyZW50UmVjdCA9IGRvbVJlZi5jdXJyZW50LnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAgICAgICAgICAgcHJldkl0ZW0gPSBkb21SZWYuY3VycmVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50XG4gICAgICAgICAgICBwcmV2SXRlbVJlY3QgPSBwcmV2SXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgICAgb3JpZ2luUHJldkl0ZW1XaWR0aCA9IHByZXZJdGVtLnN0eWxlLndpZHRoXG4gICAgICAgICAgICBvcmlnaW5QcmV2SXRlbUhlaWdodCA9IHByZXZJdGVtLnN0eWxlLmhlaWdodFxuICAgICAgICAgICAgcHJldlNpemUgPSBnZXRTaXplKHByZXZJdGVtKVxuXG4gICAgICAgICAgICBuZXh0SXRlbSA9IGRvbVJlZi5jdXJyZW50Lm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudFxuICAgICAgICAgICAgbmV4dEl0ZW1SZWN0ID0gbmV4dEl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgICAgIG9yaWdpbk5leHRJdGVtV2lkdGggPSBuZXh0SXRlbS5zdHlsZS53aWR0aFxuICAgICAgICAgICAgb3JpZ2luTmV4dEl0ZW1IZWlnaHQgPSBuZXh0SXRlbS5zdHlsZS5oZWlnaHRcbiAgICAgICAgICAgIG5leHRTaXplID0gZ2V0U2l6ZShuZXh0SXRlbSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9ubW92ZTogKGV2ZW50OiBJbnRlcmFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICBkeCArPSBldmVudC5keFxuICAgICAgICAgICAgZHkgKz0gZXZlbnQuZHlcblxuICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSByZXN0cmljdFJlc2l6aW5nKHByZXZJdGVtUmVjdCwgbmV4dEl0ZW1SZWN0LCBkaXJlY3Rpb24sIGR4LCBkeSwgaXNSVEwpXG4gICAgICAgICAgICBjb25zdCBmYWN0b3IgPSBpc1JUTCA/IC0xIDogMVxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3JvdycpIHtcbiAgICAgICAgICAgICAgcHJldkl0ZW0uc3R5bGUud2lkdGggPSBgY2FsYygke3ByZXZTaXplfSUgKyAke3ggKiBmYWN0b3J9cHgpYFxuICAgICAgICAgICAgICBuZXh0SXRlbS5zdHlsZS53aWR0aCA9IGBjYWxjKCR7bmV4dFNpemV9JSAtICR7eCAqIGZhY3Rvcn1weClgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwcmV2SXRlbS5zdHlsZS5oZWlnaHQgPSBgY2FsYygke3ByZXZTaXplfSUgKyAke3l9cHgpYFxuICAgICAgICAgICAgICBuZXh0SXRlbS5zdHlsZS5oZWlnaHQgPSBgY2FsYygke25leHRTaXplfSUgLSAke3l9cHgpYFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25lbmQ6IChldmVudDogSW50ZXJhY3QuRHJhZ0V2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgZHggKz0gZXZlbnQuZHhcbiAgICAgICAgICAgIGR5ICs9IGV2ZW50LmR5XG5cbiAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gcmVzdHJpY3RSZXNpemluZyhwcmV2SXRlbVJlY3QsIG5leHRJdGVtUmVjdCwgZGlyZWN0aW9uLCBkeCwgZHksIGlzUlRMKVxuICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gaXNSVEwgPyAtMSA6IDFcbiAgICAgICAgICAgIC8vIHJlc3RvcmUgc3R5bGUgb2YgaXRlbXNcbiAgICAgICAgICAgIHByZXZJdGVtLnN0eWxlLndpZHRoID0gb3JpZ2luUHJldkl0ZW1XaWR0aFxuICAgICAgICAgICAgbmV4dEl0ZW0uc3R5bGUud2lkdGggPSBvcmlnaW5OZXh0SXRlbVdpZHRoXG4gICAgICAgICAgICBwcmV2SXRlbS5zdHlsZS5oZWlnaHQgPSBvcmlnaW5QcmV2SXRlbUhlaWdodFxuICAgICAgICAgICAgbmV4dEl0ZW0uc3R5bGUuaGVpZ2h0ID0gb3JpZ2luTmV4dEl0ZW1IZWlnaHRcbiAgICAgICAgICAgIG9uUmVzaXplRW5kKHJlZmVyZW5jZUl0ZW1JZCwgTWF0aC5yb3VuZCh4ICogZmFjdG9yICogMTAwMDAgLyBwYXJlbnRSZWN0LndpZHRoKSAvIDEwMCwgTWF0aC5yb3VuZCh5ICogMTAwMDAgLyBwYXJlbnRSZWN0LmhlaWdodCkgLyAxMDApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50Py51bnNldCgpXG4gICAgICBpbnRlcmFjdGFibGVSZWYuY3VycmVudCA9IG51bGxcbiAgICB9XG4gIH0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaW50ZXJhY3RhYmxlUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgaW50ZXJhY3RSZWYuY3VycmVudChkb21SZWYuY3VycmVudCkuZHJhZ2dhYmxlKGlzRGVzaWduTW9kZSA/IHRydWUgOiBsYXlvdXRSZXNpemFibGUpXG4gICAgfVxuICB9LCBbbGF5b3V0UmVzaXphYmxlLCBpc0Rlc2lnbk1vZGVdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e2RvbVJlZn0gY3NzPXtzdHlsZX0gY2xhc3NOYW1lPSdncmlkLXNwbGl0IGZsZXgtc2hyaW5rLTAnPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3ctMTAwIGgtMTAwJywge1xuICAgICAgICAgICdob3Jpem9udGFsLXNwbGl0dGVyJzogZGlyZWN0aW9uID09PSAncm93JyxcbiAgICAgICAgICAndmVydGljYWwtc3BsaXR0ZXInOiBkaXJlY3Rpb24gPT09ICdjb2wnXG4gICAgICAgIH0pfT48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIHR5cGUgSU1BcHBDb25maWcsXG4gIGNzcyxcbiAgTGF5b3V0VHlwZSxcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgR3JpZEl0ZW1UeXBlLFxuICB0eXBlIElNR3JpZExheW91dEl0ZW1Kc29uLFxuICB0eXBlIExheW91dEluZm9cbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc3R5bGVVdGlscyB9IGZyb20gJ2ppbXUtdWknXG5cbmV4cG9ydCBmdW5jdGlvbiBpbmRleE9mUGxhaW5Db250ZW50IChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgbGF5b3V0SXRlbUlkOiBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgc3RhcnQgPSAwXG5cbiAgY29uc3Qgcm9vdEl0ZW1JZCA9IGxheW91dC5zZXR0aW5nLnJvb3RJdGVtXG4gIGNvbnN0IHJvb3RJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCByb290SXRlbUlkKVxuICBpZiAocm9vdEl0ZW0gJiYgcm9vdEl0ZW0uY2hpbGRyZW4/Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBjYW5kaWRhdGVzID0gWy4uLnJvb3RJdGVtLmNoaWxkcmVuXVxuICAgIHdoaWxlIChjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZpcnN0SXRlbUlkID0gY2FuZGlkYXRlcy5zaGlmdCgpXG4gICAgICBjb25zdCBmaXJzdEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIGZpcnN0SXRlbUlkKVxuICAgICAgY29uc3QgcGFyZW50SWQgPSBmaXJzdEl0ZW0ucGFyZW50XG4gICAgICBjb25zdCBwYXJlbnRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCBwYXJlbnRJZClcblxuICAgICAgaWYgKFxuICAgICAgICBgJHtmaXJzdEl0ZW0uaWR9YCA9PT0gbGF5b3V0SXRlbUlkIHx8XG4gICAgICAgIChwYXJlbnRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuVGFiICYmIHBhcmVudEl0ZW0uY2hpbGRyZW4uaW5jbHVkZXMobGF5b3V0SXRlbUlkKSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gc3RhcnRcbiAgICAgIH1cblxuICAgICAgaWYgKGZpcnN0SXRlbS5jaGlsZHJlbj8ubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBpdCBpcyBhIGdyb3VwXG4gICAgICAgIGNhbmRpZGF0ZXMudW5zaGlmdCguLi5maXJzdEl0ZW0uY2hpbGRyZW4pXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICAvLyB0YWIgb25seSBpbmNyZWFzZSBpbmRleCBvbmNlXG4gICAgICBpZiAoXG4gICAgICAgIHBhcmVudEl0ZW0uZ3JpZFR5cGUgIT09IEdyaWRJdGVtVHlwZS5UYWIgfHxcbiAgICAgICAgKHBhcmVudEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIgJiYgcGFyZW50SXRlbS5jaGlsZHJlbi5pbmRleE9mKGZpcnN0SXRlbUlkKSA9PT0gMClcbiAgICAgICkge1xuICAgICAgICBzdGFydCArPSAxXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBzdGFydFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNMYXN0Q2hpbGRPZlJvb3RJdGVtIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgbGF5b3V0SXRlbUlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgbGV0IGN1cnJlbnRJdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCBsYXlvdXRJdGVtSWQpXG4gIGlmIChjdXJyZW50SXRlbT8uY2hpbGRyZW4/Lmxlbmd0aCA+IDApIHtcbiAgICAvLyBjaGlsZHJlbidzIGlzIGJlaGluZCBjdXJyZW50SXRlbVxuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHdoaWxlIChjdXJyZW50SXRlbSAhPSBudWxsKSB7XG4gICAgY29uc3QgcGFyZW50SWQgPSBjdXJyZW50SXRlbS5wYXJlbnRcbiAgICBpZiAocGFyZW50SWQgPT0gbnVsbCkge1xuICAgICAgYnJlYWtcbiAgICB9XG4gICAgLy8gY2hlY2sgaWYgaXQgdGhlIGxhc3QgY2hpbGQgb2YgaXRzIHBhcmVudFxuICAgIGNvbnN0IHBhcmVudEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIHBhcmVudElkKVxuICAgIGNvbnN0IGxlbiA9IHBhcmVudEl0ZW0uY2hpbGRyZW4ubGVuZ3RoXG4gICAgY29uc3QgbGFzdElkID0gcGFyZW50SXRlbS5jaGlsZHJlbltsZW4gLSAxXVxuICAgIGlmICgrbGFzdElkICE9PSArY3VycmVudEl0ZW0uaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjdXJyZW50SXRlbSA9IHBhcmVudEl0ZW1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFeHBhbmRhYmxlIChzdGF0ZTogSU1TdGF0ZSwgbGF5b3V0SWQ6IHN0cmluZywgbGF5b3V0SXRlbUlkOiBzdHJpbmcpIHtcbiAgY29uc3QgbGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtsYXlvdXRJdGVtSWRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gIGNvbnN0IGNhbkV4cGFuZCA9IGxheW91dEl0ZW0uZXhwYW5kYWJsZSA/PyB0cnVlXG4gIGlmICghY2FuRXhwYW5kKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgLy8gc2V0IGV4cGFuZGFibGUgdG8gZmFsc2UgaWYgaXQgaXMgdGhlIG9ubHkgaXRlbSBpbiBncmlkXG4gIGNvbnN0IHJvb3RJdGVtID0gbGF5b3V0Py5zZXR0aW5nPy5yb290SXRlbVxuICBsZXQgaXNPbmx5SXRlbSA9IGZhbHNlXG4gIGlmIChyb290SXRlbSA9PT0gbGF5b3V0SXRlbUlkKSB7XG4gICAgY29uc3Qgcm9vdExheW91dEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIHJvb3RJdGVtKVxuICAgIGlmIChyb290TGF5b3V0SXRlbS5jaGlsZHJlbiA9PSBudWxsIHx8IHJvb3RMYXlvdXRJdGVtLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaXNPbmx5SXRlbSA9IHRydWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuICFpc09ubHlJdGVtXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZE5vZGUge1xuICBsYXlvdXRJdGVtSWQ6IHN0cmluZ1xuICB0eXBlOiBHcmlkSXRlbVR5cGVcbiAgY2hpbGRyZW4/OiBHcmlkTm9kZVtdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcmlkSXRlbSAobGF5b3V0OiBJTUxheW91dEpzb24sIGxheW91dEl0ZW1JZDogc3RyaW5nKTogSU1HcmlkTGF5b3V0SXRlbUpzb24ge1xuICByZXR1cm4gbGF5b3V0LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG59XG5cbmZ1bmN0aW9uIGZldGNoR3JpZE5vZGUgKGxheW91dDogSU1MYXlvdXRKc29uLCBsYXlvdXRJdGVtSWQ6IHN0cmluZyk6IEdyaWROb2RlIHtcbiAgY29uc3QgaXRlbSA9IGdldEdyaWRJdGVtKGxheW91dCwgbGF5b3V0SXRlbUlkKVxuICBpZiAoaXRlbSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCB7IGdyaWRUeXBlID0gR3JpZEl0ZW1UeXBlLlBsYWluLCBjaGlsZHJlbiB9ID0gaXRlbVxuICBjb25zdCByZXN1bHQ6IEdyaWROb2RlID0geyBsYXlvdXRJdGVtSWQsIHR5cGU6IGdyaWRUeXBlIH1cblxuICBpZiAoY2hpbGRyZW4/Lmxlbmd0aCA+IDApIHtcbiAgICByZXN1bHQuY2hpbGRyZW4gPSBbLi4uY2hpbGRyZW5dLm1hcCgoaXRlbUlkKSA9PiBmZXRjaEdyaWROb2RlKGxheW91dCwgaXRlbUlkKSlcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyaWRMYXlvdXRTdHJ1Y3R1cmUgKGxheW91dDogSU1MYXlvdXRKc29uKTogR3JpZE5vZGUge1xuICBpZiAobGF5b3V0LnR5cGUgIT09IExheW91dFR5cGUuR3JpZExheW91dCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb25zdCByb290SXRlbUlkID0gbGF5b3V0LnNldHRpbmc/LnJvb3RJdGVtXG4gIHJldHVybiBmZXRjaEdyaWROb2RlKGxheW91dCwgYCR7cm9vdEl0ZW1JZH1gKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFiZWxPZkdyaWRUYWIgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLFxuICB0cmFuc2xhdGU6IChpZDogc3RyaW5nKSA9PiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXSBhcyBJTUdyaWRMYXlvdXRJdGVtSnNvblxuICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgY29uc3Qgd2lkZ2V0ID0gYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgICBpZiAoIXdpZGdldCkge1xuICAgICAgcmV0dXJuIHRyYW5zbGF0ZSgncGxhY2Vob2xkZXInKVxuICAgIH1cbiAgICByZXR1cm4gd2lkZ2V0Py5sYWJlbCA/PyBsYXlvdXRJdGVtLmxhYmVsID8/IGxheW91dEl0ZW0uaWQgLy8gbWF5IGJlIGEgcGxhY2Vob2xkZXJcbiAgfVxuICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbikge1xuICAgIGNvbnN0IHNlY3Rpb24gPSBhcHBDb25maWcuc2VjdGlvbnNbbGF5b3V0SXRlbS5zZWN0aW9uSWRdXG4gICAgcmV0dXJuIHNlY3Rpb24ubGFiZWxcbiAgfVxuICBpZiAobGF5b3V0SXRlbT8uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5Sb3cpIHtcbiAgICByZXR1cm4gbGF5b3V0SXRlbS5sYWJlbCA/PyB0cmFuc2xhdGUoJ2dyaWRSb3cnKVxuICB9XG4gIGlmIChsYXlvdXRJdGVtPy5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLkNvbHVtbikge1xuICAgIHJldHVybiBsYXlvdXRJdGVtLmxhYmVsID8/IHRyYW5zbGF0ZSgnZ3JpZENvbCcpXG4gIH1cbiAgaWYgKGxheW91dEl0ZW0/LmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuVGFiKSB7XG4gICAgcmV0dXJuIGxheW91dEl0ZW0ubGFiZWwgPz8gdHJhbnNsYXRlKCd0YWJzJylcbiAgfVxuICByZXR1cm4gbGF5b3V0SXRlbT8ubGFiZWwgPz8gbGF5b3V0SXRlbT8uaWQgPz8gJydcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbFBhZGRpbmdTdHlsZSAobGF5b3V0U2V0dGluZykge1xuICBjb25zdCBwYWRkaW5nID0gc3R5bGVVdGlscy50b0NTU1BhZGRpbmcobGF5b3V0U2V0dGluZz8uc3R5bGU/LnBhZGRpbmcpXG4gIGlmIChwYWRkaW5nKSB7XG4gICAgaWYgKGxheW91dFNldHRpbmcucGFkZGluZ0NvbG9yKSB7XG4gICAgICBjb25zdCBwYWRkaW5nVG9rZW5zID0gcGFkZGluZy5zcGxpdCgnICcpXG4gICAgICBjb25zdCBwYWRkaW5nQ29sb3IgPSBsYXlvdXRTZXR0aW5nLnBhZGRpbmdDb2xvclxuICAgICAgbGV0IHByZWZpeCA9ICcnXG4gICAgICBjb25zdCB1YSA9IHdpbmRvdy5qaW11VUEuYnJvd3Nlci5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIGlmICh1YSA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgIHByZWZpeCA9ICctbW96LSdcbiAgICAgIH0gZWxzZSBpZiAodWEgPT09ICdzYWZhcmknIHx8IHVhID09PSAnY2hyb21lJykge1xuICAgICAgICBwcmVmaXggPSAnLXdlYmtpdC0nXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjc3NgXG4gICAgICAgIHBhZGRpbmc6ICR7cGFkZGluZ307XG4gICAgICAgIGJhY2tncm91bmQtaW1hZ2U6XG4gICAgICAgICR7cHJlZml4fWxpbmVhci1ncmFkaWVudCgyNzBkZWcsICR7cGFkZGluZ0NvbG9yfSAke3BhZGRpbmdUb2tlbnNbMF19LCB0cmFuc3BhcmVudCAke3BhZGRpbmdUb2tlbnNbMF19KSxcbiAgICAgICAgJHtwcmVmaXh9bGluZWFyLWdyYWRpZW50KDE4MGRlZywgJHtwYWRkaW5nQ29sb3J9ICR7cGFkZGluZ1Rva2Vuc1sxXX0sIHRyYW5zcGFyZW50ICR7cGFkZGluZ1Rva2Vuc1sxXX0pLFxuICAgICAgICAke3ByZWZpeH1saW5lYXItZ3JhZGllbnQoOTBkZWcsICR7cGFkZGluZ0NvbG9yfSAke3BhZGRpbmdUb2tlbnNbMl19LCB0cmFuc3BhcmVudCAke3BhZGRpbmdUb2tlbnNbMl19KSxcbiAgICAgICAgJHtwcmVmaXh9bGluZWFyLWdyYWRpZW50KDBkZWcsICR7cGFkZGluZ0NvbG9yfSAke3BhZGRpbmdUb2tlbnNbM119LCB0cmFuc3BhcmVudCAke3BhZGRpbmdUb2tlbnNbM119KTtcbiAgICAgIGBcbiAgICB9XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIHBhZGRpbmc6ICR7cGFkZGluZ307XG4gICAgYFxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCBqc3gsIGNzcywgdHlwZSBJTVN0YXRlLCB0eXBlIElNU2l6ZU1vZGVMYXlvdXRKc29uLCB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIGNyZWF0ZVNlbGVjdG9yLCB0eXBlIElNR3JpZExheW91dEl0ZW1Kc29uLCBHcmlkSXRlbVR5cGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBnZXRBcHBDb25maWdBY3Rpb24gfSBmcm9tICdqaW11LWZvci1idWlsZGVyJ1xuaW1wb3J0IHsgU2V0dGluZ1NlY3Rpb24sIFNldHRpbmdSb3cgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IFBhZGRpbmcsIElucHV0VW5pdCB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc3R5bGUtc2V0dGluZy1jb21wb25lbnRzJ1xuaW1wb3J0IHsgVGhlbWVDb2xvclBpY2tlciB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvY29sb3ItcGlja2VyJ1xuaW1wb3J0IHsgRGlzdGFuY2VVbml0cywgQ2hlY2tib3gsIExhYmVsLCBUb29sdGlwLCBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbGF5b3V0czogSU1TaXplTW9kZUxheW91dEpzb25cbiAgYXBwVGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3RhdGVUb1Byb3BzIHtcbiAgbGF5b3V0SWQ6IHN0cmluZ1xuICBsYXlvdXRTZXR0aW5nOiBhbnlcbiAgYWxsSXRlbXNFeHBhbmRhYmxlOiBib29sZWFuXG4gIGFsbEl0ZW1zTm90RXhwYW5kYWJsZTogYm9vbGVhblxufVxuXG5jb25zdCBhdmFpbGFibGVVbml0cyA9IFtEaXN0YW5jZVVuaXRzLlBJWEVMXVxuXG5jbGFzcyBfU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMgJiBTdGF0ZVRvUHJvcHM+IHtcbiAgaGFuZGxlUGFkZGluZ0NoYW5nZSA9ICh2YWx1ZSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgdGhpcy5nZXRMYXlvdXRJZHMoKS5mb3JFYWNoKGxheW91dElkID0+IHtcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0UHJvcGVydHkobGF5b3V0SWQsICdzZXR0aW5nLnN0eWxlLnBhZGRpbmcnLCB2YWx1ZSlcbiAgICB9KVxuICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcbiAgfVxuXG4gIGhhbmRsZVNldHRpbmdDaGFuZ2UgPSAocHJvcDogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCA9PiB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICB0aGlzLmdldExheW91dElkcygpLmZvckVhY2gobGF5b3V0SWQgPT4ge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRQcm9wZXJ0eShsYXlvdXRJZCwgYHNldHRpbmcuJHtwcm9wfWAsIHZhbHVlKVxuICAgIH0pXG4gICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuICB9XG5cbiAgdG9nZ2xlRXhwYW5kYWJsZSA9ICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBhbGxJdGVtc0V4cGFuZGFibGUgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oKVxuICAgIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICBPYmplY3Qua2V5cyhsYXlvdXQuY29udGVudCA/PyB7fSkuZm9yRWFjaChpdGVtSWQgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dC5jb250ZW50W2l0ZW1JZF0gYXMgSU1HcmlkTGF5b3V0SXRlbUpzb25cbiAgICAgIGlmIChsYXlvdXRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuUGxhaW4pIHtcbiAgICAgICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBpdGVtSWQgfSwgJ2V4cGFuZGFibGUnLCAhYWxsSXRlbXNFeHBhbmRhYmxlKVxuICAgICAgfVxuICAgIH0pXG4gICAgYXBwQ29uZmlnQWN0aW9uLmV4ZWMoKVxuICB9XG5cbiAgZ2V0TGF5b3V0SWRzICgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW11cblxuICAgIGNvbnN0IHsgbGF5b3V0cyB9ID0gdGhpcy5wcm9wc1xuICAgIGlmIChsYXlvdXRzICE9IG51bGwpIHtcbiAgICAgIE9iamVjdC5rZXlzKGxheW91dHMpLmZvckVhY2goc2l6ZW1vZGUgPT4ge1xuICAgICAgICByZXN1bHQucHVzaChsYXlvdXRzW3NpemVtb2RlXSlcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIHJlbmRlciAoKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHsgbGF5b3V0U2V0dGluZywgYWxsSXRlbXNFeHBhbmRhYmxlLCBhbGxJdGVtc05vdEV4cGFuZGFibGUsIGZvcm1hdE1lc3NhZ2UsIGFwcFRoZW1lIH0gPSB0aGlzLnByb3BzXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXhib3gtbGF5b3V0LXNldHRpbmcnPlxuICAgICAgICA8U2V0dGluZ1NlY3Rpb24gcm9sZT0nZ3JvdXAnIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdsYXlvdXQnKX0gYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZSgnbGF5b3V0Jyl9PlxuICAgICAgICAgIDxTZXR0aW5nUm93IGxhYmVsPXtmb3JtYXRNZXNzYWdlKCdwYWRkaW5nJyl9IHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCdwYWRkaW5nJyl9IGZsb3c9J3dyYXAnPlxuICAgICAgICAgICAgPFBhZGRpbmcgdmFsdWU9e2xheW91dFNldHRpbmcuc3R5bGU/LnBhZGRpbmd9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVBhZGRpbmdDaGFuZ2V9Lz5cbiAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ3BhZGRpbmdDb2xvcicpfT5cbiAgICAgICAgICAgIDxUaGVtZUNvbG9yUGlja2VyXG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ3BhZGRpbmdDb2xvcicpfVxuICAgICAgICAgICAgICBzcGVjaWZpY1RoZW1lPXthcHBUaGVtZX1cbiAgICAgICAgICAgICAgdmFsdWU9e2xheW91dFNldHRpbmcucGFkZGluZ0NvbG9yfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7IHRoaXMuaGFuZGxlU2V0dGluZ0NoYW5nZSgncGFkZGluZ0NvbG9yJywgdmFsdWUpIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgICA8U2V0dGluZ1JvdyBsYWJlbD17Zm9ybWF0TWVzc2FnZSgnZ2FwJyl9IHRydW5jYXRlTGFiZWw+XG4gICAgICAgICAgICA8VGhlbWVDb2xvclBpY2tlclxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCdnYXAnKX1cbiAgICAgICAgICAgICAgc3BlY2lmaWNUaGVtZT17YXBwVGhlbWV9XG4gICAgICAgICAgICAgIHZhbHVlPXtsYXlvdXRTZXR0aW5nLnNwbGl0Q29sb3IgPz8gJ3ZhcigtLWxpZ2h0LTUwMCknfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7IHRoaXMuaGFuZGxlU2V0dGluZ0NoYW5nZSgnc3BsaXRDb2xvcicsIHZhbHVlKSB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxJbnB1dFVuaXRcbiAgICAgICAgICAgICAgY3NzPXtjc3Ngd2lkdGg6IDc0cHggIWltcG9ydGFudDtgfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J21sLTInXG4gICAgICAgICAgICAgIHVuaXRzPXthdmFpbGFibGVVbml0c31cbiAgICAgICAgICAgICAgbWluPXsxfVxuICAgICAgICAgICAgICBtYXg9ezEwMH1cbiAgICAgICAgICAgICAgcHJlY2lzaW9uPXswfVxuICAgICAgICAgICAgICB2YWx1ZT17eyBkaXN0YW5jZTogbGF5b3V0U2V0dGluZy5zcGxpdFNpemUgPz8gOCwgdW5pdDogRGlzdGFuY2VVbml0cy5QSVhFTCB9fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7IHRoaXMuaGFuZGxlU2V0dGluZ0NoYW5nZSgnc3BsaXRTaXplJywgdmFsdWUuZGlzdGFuY2UpIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgICAgPFNldHRpbmdTZWN0aW9uIHJvbGU9J2dyb3VwJyB0aXRsZT17Zm9ybWF0TWVzc2FnZSgnZ3JpZEl0ZW1zJyl9IGFyaWEtbGFiZWw9e2Zvcm1hdE1lc3NhZ2UoJ2dyaWRJdGVtcycpfT5cbiAgICAgICAgICA8U2V0dGluZ1Jvdz5cbiAgICAgICAgICAgIDxMYWJlbCBjZW50cmljPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtmb3JtYXRNZXNzYWdlKCdhbGxvd1Jlc2l6ZScpfVxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2xheW91dFNldHRpbmcucmVzaXphYmxlID8/IHRydWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhfLCBjaGVja2VkKSA9PiB7IHRoaXMuaGFuZGxlU2V0dGluZ0NoYW5nZSgncmVzaXphYmxlJywgY2hlY2tlZCkgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtbC0yJz57Zm9ybWF0TWVzc2FnZSgnYWxsb3dSZXNpemUnKX08L3NwYW4+XG4gICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgICA8U2V0dGluZ1Jvdz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggdy0xMDAgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICAgICAgPExhYmVsIGNzcz17Y3NzYHdpZHRoOiA4MCU7YH0gY2xhc3NOYW1lPSdqdXN0aWZ5LWNvbnRlbnQtc3RhcnQnPlxuICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZSgnYWxsb3dFeHBhbnNpb24nKX1cbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2FsbEl0ZW1zRXhwYW5kYWJsZX1cbiAgICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU9eyFhbGxJdGVtc0V4cGFuZGFibGUgJiYgIWFsbEl0ZW1zTm90RXhwYW5kYWJsZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRXhwYW5kYWJsZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbWwtMiB0ZXh0LXRydW5jYXRlJz57Zm9ybWF0TWVzc2FnZSgnYWxsb3dFeHBhbnNpb24nKX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdncmlkU2V0dGluZ092ZXJyaWRlVGlwJyl9IHBsYWNlbWVudD0nYm90dG9tJz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtYXV0bycgdHlwZT0ndGVydGlhcnknIGljb24+XG4gICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICA8L1NldHRpbmdTZWN0aW9uPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9TZXR0aW5nUHJvcHMgPSBjcmVhdGVTZWxlY3RvcihcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogUHJvcHMpID0+IHtcbiAgICBjb25zdCBhcHBTdGF0ZSA9IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyXG4gICAgaWYgKCFhcHBTdGF0ZSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gb3duUHJvcHMubGF5b3V0c1thcHBTdGF0ZS5icm93c2VyU2l6ZU1vZGVdIHx8IG93blByb3BzLmxheW91dHNbYXBwU3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZV1cbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogUHJvcHMpID0+IHtcbiAgICBjb25zdCBhcHBTdGF0ZSA9IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyXG4gICAgaWYgKCFhcHBTdGF0ZSkge1xuICAgICAgcmV0dXJuIHt9XG4gICAgfVxuXG4gICAgY29uc3QgbGF5b3V0SWQgPSBvd25Qcm9wcy5sYXlvdXRzW2FwcFN0YXRlLmJyb3dzZXJTaXplTW9kZV0gfHwgb3duUHJvcHMubGF5b3V0c1thcHBTdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlXVxuICAgIGNvbnN0IHsgbGF5b3V0cyB9ID0gYXBwU3RhdGUuYXBwQ29uZmlnXG5cbiAgICByZXR1cm4gbGF5b3V0c1tsYXlvdXRJZF0/LnNldHRpbmcgPz8ge31cbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogUHJvcHMpID0+IHtcbiAgICBjb25zdCBhcHBTdGF0ZSA9IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyXG4gICAgaWYgKCFhcHBTdGF0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgbGF5b3V0SWQgPSBvd25Qcm9wcy5sYXlvdXRzW2FwcFN0YXRlLmJyb3dzZXJTaXplTW9kZV0gfHwgb3duUHJvcHMubGF5b3V0c1thcHBTdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlXVxuICAgIGNvbnN0IHsgbGF5b3V0cyB9ID0gYXBwU3RhdGUuYXBwQ29uZmlnXG4gICAgY29uc3QgbGF5b3V0ID0gbGF5b3V0c1tsYXlvdXRJZF1cbiAgICBjb25zdCBpZExpc3QgPSBPYmplY3Qua2V5cyhsYXlvdXQuY29udGVudCA/PyB7fSlcbiAgICBpZiAoaWRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBpZExpc3QuZXZlcnkoaXRlbUlkID0+IHtcbiAgICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dC5jb250ZW50W2l0ZW1JZF0gYXMgSU1HcmlkTGF5b3V0SXRlbUpzb25cbiAgICAgICAgaWYgKGxheW91dEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5QbGFpbikge1xuICAgICAgICAgIHJldHVybiBsYXlvdXRJdGVtLmV4cGFuZGFibGUgPz8gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBQcm9wcykgPT4ge1xuICAgIGNvbnN0IGFwcFN0YXRlID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgICBpZiAoIWFwcFN0YXRlKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBsYXlvdXRJZCA9IG93blByb3BzLmxheW91dHNbYXBwU3RhdGUuYnJvd3NlclNpemVNb2RlXSB8fCBvd25Qcm9wcy5sYXlvdXRzW2FwcFN0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGVdXG4gICAgY29uc3QgeyBsYXlvdXRzIH0gPSBhcHBTdGF0ZS5hcHBDb25maWdcbiAgICBjb25zdCBsYXlvdXQgPSBsYXlvdXRzW2xheW91dElkXVxuICAgIGNvbnN0IGlkTGlzdCA9IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50ID8/IHt9KVxuICAgIGlmIChpZExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGlkTGlzdC5ldmVyeShpdGVtSWQgPT4ge1xuICAgICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaXRlbUlkXSBhcyBJTUdyaWRMYXlvdXRJdGVtSnNvblxuICAgICAgICBpZiAobGF5b3V0SXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlBsYWluKSB7XG4gICAgICAgICAgcmV0dXJuIGxheW91dEl0ZW0uZXhwYW5kYWJsZSAhPSBudWxsICYmICFsYXlvdXRJdGVtLmV4cGFuZGFibGVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfSxcbiAgKGxheW91dElkLCBsYXlvdXRTZXR0aW5nLCBhbGxJdGVtc0V4cGFuZGFibGUsIGFsbEl0ZW1zTm90RXhwYW5kYWJsZSkgPT4gKHsgbGF5b3V0SWQsIGxheW91dFNldHRpbmcsIGFsbEl0ZW1zRXhwYW5kYWJsZSwgYWxsSXRlbXNOb3RFeHBhbmRhYmxlIH0pXG4pXG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxTdGF0ZVRvUHJvcHMsIHVua25vd24sIFByb3BzPihtYXBTdGF0ZVRvU2V0dGluZ1Byb3BzKShfU2V0dGluZylcbiIsImltcG9ydCB7XG4gIHR5cGUgZXh0ZW5zaW9uU3BlYyxcbiAgTGF5b3V0VHlwZSxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBCcm93c2VyU2l6ZU1vZGUsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIEdyaWRJdGVtVHlwZSxcbiAgdHlwZSBJTUdyaWRMYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBJbW11dGFibGVBcnJheVxufSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjbGFzcyBHcmlkTGF5b3V0VHJhbnNmb3JtZXIgaW1wbGVtZW50cyBleHRlbnNpb25TcGVjLkxheW91dFRyYW5zZm9ybWVyRXh0ZW5zaW9uIHtcbiAgaWQgPSAnZ3JpZC1sYXlvdXQtdHJhbnNmb3JtZXInXG5cbiAgbGF5b3V0VHlwZSA9IExheW91dFR5cGUuR3JpZExheW91dFxuXG4gIHRyYW5zZm9ybUxheW91dCA9IChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgZnJvbVNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSk6IElNTGF5b3V0SnNvbiA9PiB7XG4gICAgaWYgKGZyb21TaXplTW9kZSAhPT0gdG9TaXplTW9kZSAmJiB0b1NpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGxldCB1cGRhdGVkTGF5b3V0OiBJTUxheW91dEpzb24gPSBJbW11dGFibGUobGF5b3V0KVxuICAgICAgY29uc3Qgcm9vdElkID0gbGF5b3V0LnNldHRpbmc/LnJvb3RJdGVtXG4gICAgICBpZiAocm9vdElkICYmIGxheW91dC5jb250ZW50Py5bcm9vdElkXSkge1xuICAgICAgICBjb25zdCBjb250ZW50SWRzID0gW11cbiAgICAgICAgY29uc3Qgcm9vdEl0ZW0gPSBsYXlvdXQuY29udGVudFtyb290SWRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gICAgICAgIHVwZGF0ZWRMYXlvdXQgPSB0aGlzLmNvbGxlY3RJdGVtKGxheW91dCwgcm9vdElkLCByb290SXRlbS5jaGlsZHJlbiwgY29udGVudElkcylcblxuICAgICAgICBpZiAoY29udGVudElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXQuc2V0SW4oWydjb250ZW50Jywgcm9vdElkLCAnZ3JpZFR5cGUnXSwgR3JpZEl0ZW1UeXBlLlRhYilcbiAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCByb290SWQsICdjaGlsZHJlbiddLCBjb250ZW50SWRzKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdXBkYXRlZExheW91dFxuICAgIH1cblxuICAgIHJldHVybiBsYXlvdXRcbiAgfVxuXG4gIGNvbGxlY3RJdGVtID0gKGxheW91dDogSU1MYXlvdXRKc29uLCByb290SWQ6IHN0cmluZywgY2hpbGRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz4sIGl0ZW1MaXN0OiBzdHJpbmdbXSk6IElNTGF5b3V0SnNvbiA9PiB7XG4gICAgbGV0IHVwZGF0ZWRMYXlvdXQgPSBsYXlvdXRcbiAgICBjaGlsZElkcz8uZm9yRWFjaChpdGVtSWQgPT4ge1xuICAgICAgaWYgKCFsYXlvdXQuY29udGVudFtpdGVtSWRdLmlzUGVuZGluZykge1xuICAgICAgICBjb25zdCBpdGVtID0gbGF5b3V0LmNvbnRlbnRbaXRlbUlkXSBhcyBJTUdyaWRMYXlvdXRJdGVtSnNvblxuICAgICAgICBpZiAoaXRlbS5ncmlkVHlwZSAhPT0gR3JpZEl0ZW1UeXBlLkNvbHVtbiAmJiBpdGVtLmdyaWRUeXBlICE9PSBHcmlkSXRlbVR5cGUuUm93ICYmIGl0ZW0uZ3JpZFR5cGUgIT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICAgICAgICBpdGVtTGlzdC5wdXNoKGl0ZW1JZClcbiAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCBpdGVtSWQsICdwYXJlbnQnXSwgcm9vdElkKVxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY2hpbGRyZW4/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdGhpcy5jb2xsZWN0SXRlbSh1cGRhdGVkTGF5b3V0LCByb290SWQsIGl0ZW0uY2hpbGRyZW4sIGl0ZW1MaXN0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdXBkYXRlZExheW91dFxuICB9XG5cbiAgdHJhbnNmb3JtTGF5b3V0SXRlbSAoXG4gICAgaXRlbTogSU1MYXlvdXRJdGVtSnNvbixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGZyb21MYXlvdXRJZDogc3RyaW5nLFxuICAgIHRvTGF5b3V0SWQ6IHN0cmluZyxcbiAgICBmcm9tU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgICB0b1NpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgKTogeyBpdGVtOiBJTUxheW91dEl0ZW1Kc29uLCBpbmRleDogbnVtYmVyIH0ge1xuICAgIHJldHVybiB7IGluZGV4LCBpdGVtIH1cbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgdHlwZSBJTVRoZW1lVmFyaWFibGVzLCBwb2xpc2hlZCB9IGZyb20gJ2ppbXUtY29yZSdcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgYnVpbGRlclRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4gIHZpc2libGU6IGJvb2xlYW5cbiAgZ3V0dGVyOiBudW1iZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENvbHVtbkhpbnQgKHByb3BzOiBQcm9wcyk6IEpTWC5FbGVtZW50IHtcbiAgY29uc3QgeyBidWlsZGVyVGhlbWUsIHZpc2libGUsIGd1dHRlciA9IDAgfSA9IHByb3BzXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY3NzPXtjc3NgXG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIGxlZnQ6IDBweDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBkaXNwbGF5OiAke3Zpc2libGUgPyAnZmxleCcgOiAnbm9uZSd9O1xuICAgICAgYH1cbiAgICA+XG4gICAgICB7WzAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMV0ubWFwKGtleSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgd2lkdGg6IDguMzMzMzMzJTtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6ICR7Z3V0dGVyIC8gMn1weDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAke2d1dHRlciAvIDJ9cHg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNSUpO1xuICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggZGFzaGVkICR7cG9saXNoZWQucmdiYShidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1szMDBdLCAwLjYpfTtcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogMTEwJTtcbiAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgfSl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgdHlwZSBMYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBsb2Rhc2gsXG4gIGdldEFwcFN0b3JlLFxuICBXaWRnZXRUeXBlLFxuICB0eXBlIElNVGhlbWVWYXJpYWJsZXMsXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIHR5cGUgSU1TaXplTW9kZUxheW91dEpzb24sXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgSW1tdXRhYmxlLFxuICB0eXBlIFNlcmlhbGl6ZWRTdHlsZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgdHlwZSBMYXlvdXRJdGVtUHJvcHMsXG4gIExheW91dFpJbmRleCxcbiAgdXRpbHMsXG4gIExheW91dEl0ZW1TaXplTW9kZXMsXG4gIHR5cGUgUm93TGF5b3V0SXRlbVNldHRpbmdcbn0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgZ2V0QXBwQ29uZmlnQWN0aW9uIH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IGNhbEl0ZW1IZWlnaHQgfSBmcm9tICcuLi91dGlscydcbmltcG9ydCB7IG1lcmdlV2lkZ2V0c0ludG9Db2x1bW4gfSBmcm9tICcuLi8uLi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtYWN0aW9ucydcbmltcG9ydCB7IERyb3BBcmVhIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1ob29rJ1xuaW1wb3J0IExheW91dEl0ZW1JbkJ1aWxkZXIgZnJvbSAnLi4vLi4vYnVpbGRlci9sYXlvdXQtaXRlbSdcbmltcG9ydCB7IERFRkFVTFRfUk9XX0lURU1fU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcbmltcG9ydCAqIGFzIGNvbW1vblV0aWxzIGZyb20gJy4uL2NvbW1vbi91dGlsJ1xuXG5pbnRlcmZhY2UgT3duUHJvcHMge1xuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uXG4gIGlzTXVsdGlSb3c6IGJvb2xlYW5cbiAgb2Zmc2V0OiBudW1iZXJcbiAgc3BhbjogbnVtYmVyXG4gIG9yZGVyOiBudW1iZXJcbiAgZ3V0dGVyOiBudW1iZXJcbiAgYWxpZ25JdGVtcz86IHN0cmluZ1xuICBidWlsZGVyVGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcbiAgY2hpbGRyZW4/OiBhbnlcbiAgb25SZXNpemVTdGFydDogKGlkOiBzdHJpbmcpID0+IHZvaWRcbiAgb25SZXNpemluZzogKGlkOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uUmVzaXplRW5kOiAoaWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGR3OiBudW1iZXIsIGRoOiBudW1iZXIsIGxheW91dEl0ZW06IExheW91dEl0ZW1Kc29uIHwgSU1MYXlvdXRJdGVtSnNvbikgPT4gdm9pZFxufVxuXG5jb25zdCBkcm9wYXJlYVN0eWxlID0gY3NzYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIG1heC1oZWlnaHQ6IDQwcHg7XG4gIGhlaWdodDogMjAlO1xuICByaWdodDogMDtcbiAgei1pbmRleDogJHtMYXlvdXRaSW5kZXguQm91bmRhcnlEcm9wQXJlYX07XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gIGRpc3BsYXk6IGZsZXg7XG5cbiAgJi5kcm9wLWFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbiAgfVxuXG4gIGJvZHk6bm90KC5kZXNpZ24tbW9kZSkgJiB7XG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICB9XG5gXG5cbmNvbnN0IHRvcERyb3BhcmVhU3R5bGUgPSBjc3NgXG4gICR7ZHJvcGFyZWFTdHlsZX07XG4gIHRvcDogMDtcbmBcblxuY29uc3QgYm90dG9tRHJvcGFyZWFTdHlsZSA9IGNzc2BcbiAgJHtkcm9wYXJlYVN0eWxlfTtcbiAgYm90dG9tOiAwO1xuYFxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBpc1Jlc2l6aW5nOiBib29sZWFuXG4gIGRoOiBudW1iZXJcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm93SXRlbSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVByb3BzICYgT3duUHJvcHMsIFN0YXRlPiB7XG4gIGluaXRIZWlnaHQ6IG51bWJlclxuICBpbml0V2lkdGg6IG51bWJlclxuICBmYWtlVG9wTGF5b3V0czogSU1TaXplTW9kZUxheW91dEpzb25cbiAgZmFrZUJvdHRvbUxheW91dHM6IElNU2l6ZU1vZGVMYXlvdXRKc29uXG5cbiAgc3RhdGU6IFN0YXRlID0ge1xuICAgIGlzUmVzaXppbmc6IGZhbHNlLFxuICAgIGRoOiAwXG4gIH1cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLmZha2VUb3BMYXlvdXRzID0gSW1tdXRhYmxlKHtcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuTGFyZ2VdOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV90bGFyZ2VgLFxuICAgICAgW0Jyb3dzZXJTaXplTW9kZS5NZWRpdW1dOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV90bWVkaXVtYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuU21hbGxdOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV90c21hbGxgXG4gICAgfSkgYXMgYW55XG5cbiAgICB0aGlzLmZha2VCb3R0b21MYXlvdXRzID0gSW1tdXRhYmxlKHtcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuTGFyZ2VdOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV9ibGFyZ2VgLFxuICAgICAgW0Jyb3dzZXJTaXplTW9kZS5NZWRpdW1dOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV9ibWVkaXVtYCxcbiAgICAgIFtCcm93c2VyU2l6ZU1vZGUuU21hbGxdOiBgJHt0aGlzLnByb3BzLmxheW91dElkfV8ke3RoaXMucHJvcHMubGF5b3V0SXRlbUlkfV9ic21hbGxgXG4gICAgfSkgYXMgYW55XG4gIH1cblxuICBoYW5kbGVSZXNpemVTdGFydCA9IChpZDogc3RyaW5nLCBpbml0VzogbnVtYmVyLCBpbml0SDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgdGhpcy5pbml0V2lkdGggPSBpbml0V1xuICAgIHRoaXMuaW5pdEhlaWdodCA9IGluaXRIXG4gICAgdGhpcy5wcm9wcy5vblJlc2l6ZVN0YXJ0KGlkKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNSZXNpemluZzogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVSZXNpemluZyA9IChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIHRoaXMucHJvcHMub25SZXNpemluZyhpZCwgeCwgeSwgZHcsIGRoKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZGgsXG4gICAgICBpc1Jlc2l6aW5nOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZVJlc2l6ZUVuZCA9IChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgc2hpZnRLZXk/OiBib29sZWFuKTogdm9pZCA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSB0aGlzLnByb3BzXG4gICAgdGhpcy5wcm9wcy5vblJlc2l6ZUVuZChpZCwgeCwgeSwgZHcsIGRoLCBsYXlvdXRJdGVtKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNSZXNpemluZzogZmFsc2UsXG4gICAgICBkaDogMFxuICAgIH0pXG4gIH1cblxuICBpc0Z1bmN0aW9uYWxXaWRnZXQgKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIGlmIChsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgICAgbGV0IGlzTGF5b3V0V2lkZ2V0ID0gZmFsc2VcbiAgICAgIGNvbnN0IHdpZGdldCA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWc/LndpZGdldHM/LltsYXlvdXRJdGVtLndpZGdldElkXVxuICAgICAgaWYgKHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXMgIT0gbnVsbCkge1xuICAgICAgICBpc0xheW91dFdpZGdldCA9XG4gICAgICAgICAgd2lkZ2V0Lm1hbmlmZXN0LndpZGdldFR5cGUgPT09IFdpZGdldFR5cGUuTGF5b3V0IHx8XG4gICAgICAgICAgd2lkZ2V0Lm1hbmlmZXN0LnByb3BlcnRpZXMuaGFzRW1iZWRkZWRMYXlvdXRcbiAgICAgIH1cbiAgICAgIHJldHVybiAhaXNMYXlvdXRXaWRnZXRcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlIC8vIGxheW91dEl0ZW0udHlwZSBpcyBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uXG4gIH1cblxuICBoYW5kbGVEcm9wQXRUb3AgPSAoXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LFxuICAgIGl0ZW1SZWN0OiBDbGllbnRSZWN0XG4gICk6IHZvaWQgPT4ge1xuICAgIHRoaXMuZHJvcEF0Qm91bmRhcnkoZHJhZ2dpbmdJdGVtLCBjb250YWluZXJSZWN0LCBpdGVtUmVjdCwgJ3RvcCcpXG4gIH1cblxuICBoYW5kbGVEcm9wQXRCb3R0b20gPSAoXG4gICAgZHJhZ2dpbmdJdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgICBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0LFxuICAgIGl0ZW1SZWN0OiBDbGllbnRSZWN0XG4gICk6IHZvaWQgPT4ge1xuICAgIHRoaXMuZHJvcEF0Qm91bmRhcnkoZHJhZ2dpbmdJdGVtLCBjb250YWluZXJSZWN0LCBpdGVtUmVjdCwgJ2JvdHRvbScpXG4gIH1cblxuICBkcm9wQXRCb3VuZGFyeSA9IChcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsXG4gICAgaXRlbVJlY3Q6IENsaWVudFJlY3QsXG4gICAgc2lkZTogJ3RvcCcgfCAnYm90dG9tJ1xuICApOiB2b2lkID0+IHtcbiAgICBsZXQgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKClcbiAgICBtZXJnZVdpZGdldHNJbnRvQ29sdW1uKFxuICAgICAgYXBwQ29uZmlnQWN0aW9uLmFwcENvbmZpZyxcbiAgICAgIGRyYWdnaW5nSXRlbSxcbiAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICBpdGVtUmVjdCxcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogdGhpcy5wcm9wcy5sYXlvdXRJdGVtSWRcbiAgICAgIH0sXG4gICAgICBzaWRlXG4gICAgKS50aGVuKCh7IHVwZGF0ZWRBcHBDb25maWcgfSkgPT4ge1xuICAgICAgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKHVwZGF0ZWRBcHBDb25maWcpXG4gICAgICBhcHBDb25maWdBY3Rpb24uZXhlYygpXG4gICAgfSkuZmluYWxseShudWxsKVxuICB9XG5cbiAgZ2V0U3R5bGUgKGl0ZW1TZXR0aW5nOiBSb3dMYXlvdXRJdGVtU2V0dGluZyk6IFtTZXJpYWxpemVkU3R5bGVzLCBzdHJpbmddIHtcbiAgICBjb25zdCB7IGd1dHRlciwgbGF5b3V0SXRlbSwgaXNNdWx0aVJvdyB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgZGgsIGlzUmVzaXppbmcgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCBiYm94ID0gbGF5b3V0SXRlbS5iYm94XG4gICAgY29uc3Qgc2lnbiA9IHV0aWxzLmlzUlRMKCkgPyAtMSA6IDFcblxuICAgIGNvbnN0IG1lcmdlZFN0eWxlOiBhbnkgPSBjYWxJdGVtSGVpZ2h0KGl0ZW1TZXR0aW5nLCBiYm94LCBpc011bHRpUm93KVxuXG4gICAgaWYgKGlzUmVzaXppbmcgJiYgZGggIT09IDApIHtcbiAgICAgIG1lcmdlZFN0eWxlLmhlaWdodCA9IHRoaXMuaW5pdEhlaWdodCArIGRoXG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbW1vblV0aWxzLmdldEl0ZW1TdHlsZShpc011bHRpUm93LCBzaWduLCBndXR0ZXIsIG1lcmdlZFN0eWxlLCBpdGVtU2V0dGluZylcbiAgfVxuXG4gIHJlbmRlciAoKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHtcbiAgICAgIG9yZGVyLFxuICAgICAgc3BhbixcbiAgICAgIG9mZnNldCxcbiAgICAgIGxheW91dElkLFxuICAgICAgbGF5b3V0SXRlbSxcbiAgICAgIGRyYWdnYWJsZSxcbiAgICAgIHJlc2l6YWJsZSxcbiAgICAgIHNlbGVjdGFibGVcbiAgICB9ID0gdGhpcy5wcm9wc1xuICAgIGlmIChsYXlvdXRJdGVtID09IG51bGwgfHwgbGF5b3V0SXRlbS5pc1BlbmRpbmcpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgaXRlbVNldHRpbmc6IFJvd0xheW91dEl0ZW1TZXR0aW5nID0gbG9kYXNoLmFzc2lnbih7fSwgREVGQVVMVF9ST1dfSVRFTV9TRVRUSU5HLCBsYXlvdXRJdGVtLnNldHRpbmcpXG4gICAgY29uc3QgaXNSYXRpbyA9IHV0aWxzLnNob3VsZFVzZUFzcGVjdFJhdGlvKGl0ZW1TZXR0aW5nKVxuICAgIGNvbnN0IGhlaWdodE1vZGUgPSBpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodFxuICAgIGNvbnN0IG1lcmdlZENsYXNzID0gY2xhc3NOYW1lcygncm93LWxheW91dC1pdGVtIGQtZmxleCcsIGBjb2wtJHtzcGFufWAsIGBvZmZzZXQtJHtvZmZzZXR9YCwgYG9yZGVyLSR7b3JkZXJ9YCwge1xuICAgICAgJ2ZpeC1oZWlnaHQnOiBoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbVxuICAgIH0pXG5cbiAgICBjb25zdCBjYW5Ecm9wQXRCb3VuZGFyeSA9IHRoaXMuaXNGdW5jdGlvbmFsV2lkZ2V0KClcblxuICAgIGNvbnN0IGhpZ2hsaWdodFN0eWxlID0gY3NzYFxuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDEwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiAke3RoaXMucHJvcHMuYnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNzAwXX07XG4gICAgYFxuICAgIGNvbnN0IHJhdGlvID0gdXRpbHMucGFyc2VBc3BlY3RSYXRpbyhpdGVtU2V0dGluZy5hc3BlY3RSYXRpbylcbiAgICBjb25zdCBvbmVCeU9uZUFuaW1hdGlvblByb3BzID0gdXRpbHMuaGFuZGxlT25lYnlPbmVBbmltYXRpb24odGhpcy5wcm9wcylcbiAgICBjb25zdCBbY3NzU3R5bGUsIHRyYW5zZm9ybV0gPSB0aGlzLmdldFN0eWxlKGl0ZW1TZXR0aW5nKVxuICAgIHJldHVybiAoXG4gICAgICA8TGF5b3V0SXRlbUluQnVpbGRlclxuICAgICAgICBjc3M9e2Nzc1N0eWxlfVxuICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm0gfX1cbiAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgIG9uUmVzaXplU3RhcnQ9e3RoaXMuaGFuZGxlUmVzaXplU3RhcnR9XG4gICAgICAgIG9uUmVzaXppbmc9e3RoaXMuaGFuZGxlUmVzaXppbmd9XG4gICAgICAgIG9uUmVzaXplRW5kPXt0aGlzLmhhbmRsZVJlc2l6ZUVuZH1cbiAgICAgICAgbGVmdFxuICAgICAgICByaWdodFxuICAgICAgICB0b3A9e2ZhbHNlfVxuICAgICAgICBib3R0b209e2hlaWdodE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tICYmICFpc1JhdGlvfVxuICAgICAgICBkcmFnZ2FibGU9e2RyYWdnYWJsZX1cbiAgICAgICAgcmVzaXphYmxlPXtyZXNpemFibGV9XG4gICAgICAgIHNlbGVjdGFibGU9e3NlbGVjdGFibGV9XG4gICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGlja31cbiAgICAgICAgY2xhc3NOYW1lPXttZXJnZWRDbGFzc31cbiAgICAgICAgZm9yY2VBc3BlY3RSYXRpbz17aXNSYXRpb31cbiAgICAgICAgYXNwZWN0UmF0aW89e3JhdGlvfVxuICAgICAgICBhdXRvSGVpZ2h0PXtoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG99XG4gICAgICAgIHsuLi5vbmVCeU9uZUFuaW1hdGlvblByb3BzfVxuICAgICAgPlxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAge2NhbkRyb3BBdEJvdW5kYXJ5ICYmXG4gICAgICAgICAgICA8RHJvcEFyZWFcbiAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgJHt0b3BEcm9wYXJlYVN0eWxlfTtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgbGF5b3V0cz17dGhpcy5mYWtlVG9wTGF5b3V0c31cbiAgICAgICAgICAgICAgaGlnaGxpZ2h0RHJhZ292ZXJcbiAgICAgICAgICAgICAgb25Ecm9wPXt0aGlzLmhhbmRsZURyb3BBdFRvcH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2hpZ2hsaWdodFN0eWxlfSAvPlxuICAgICAgICAgICAgPC9Ecm9wQXJlYT59XG4gICAgICAgICAge2NhbkRyb3BBdEJvdW5kYXJ5ICYmXG4gICAgICAgICAgICA8RHJvcEFyZWFcbiAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgJHtib3R0b21Ecm9wYXJlYVN0eWxlfTtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgbGF5b3V0cz17dGhpcy5mYWtlQm90dG9tTGF5b3V0c31cbiAgICAgICAgICAgICAgaGlnaGxpZ2h0RHJhZ292ZXJcbiAgICAgICAgICAgICAgb25Ecm9wPXt0aGlzLmhhbmRsZURyb3BBdEJvdHRvbX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2Ake2hpZ2hsaWdodFN0eWxlfTtwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTowO2B9IC8+XG4gICAgICAgICAgICA8L0Ryb3BBcmVhPn1cbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgIDwvTGF5b3V0SXRlbUluQnVpbGRlcj5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IHR5cGUgSU1BcHBDb25maWcsIHR5cGUgTGF5b3V0SW5mbywgdHlwZSBCcm93c2VyU2l6ZU1vZGUsIExheW91dFR5cGUsIExheW91dEl0ZW1UeXBlLCB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQmFzZUxheW91dFNlcnZpY2UsIExheW91dFNlcnZpY2VQcm92aWRlciwgd2lkZ2V0U2VydmljZSwgZ2V0QXBwQ29uZmlnQWN0aW9uLCBDb250ZW50U2VydmljZVdyYXBwZXIsIHR5cGUgVG9jTm9kZSwgdHlwZSBEdXBsaWNhdGVDb250ZXh0IH0gZnJvbSAnamltdS1mb3ItYnVpbGRlcidcbmltcG9ydCB7IHNlYXJjaFV0aWxzLCB1dGlscywgTGF5b3V0SXRlbVNpemVNb2RlcywgdHlwZSBUb29sSXRlbUNvbmZpZyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IGRlbGV0ZU1lbnVJdGVtLCBwZW5kaW5nTWVudUl0ZW0sIGR1cGxpY2F0ZU1lbnVJdGVtLCBmbG9hdGluZ01lbnVJdGVtIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9tZW51L2NvbW1vbi1tZW51J1xuaW1wb3J0IHsgc2VjdGlvbk1lbnVJdGVtcywgdmlld01lbnVJdGVtcyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvbWVudS9zZWN0aW9uLW1lbnUnXG5pbXBvcnQgeyBzY3JlZW5NZW51SXRlbXMgfSBmcm9tICcuLi8uLi9idWlsZGVyL21lbnUvc2NyZWVuLW1lbnUnXG5cbmNvbnN0IGNvbW1vbk1lbnUgPSBbZHVwbGljYXRlTWVudUl0ZW0sIGZsb2F0aW5nTWVudUl0ZW0sIHBlbmRpbmdNZW51SXRlbSwgZGVsZXRlTWVudUl0ZW1dXG5jb25zdCBzZWN0aW9uTWVudSA9IFtdLmNvbmNhdChzZWN0aW9uTWVudUl0ZW1zLCBjb21tb25NZW51KVxuXG5leHBvcnQgY2xhc3MgUm93TGF5b3V0U2VydmljZSBleHRlbmRzIEJhc2VMYXlvdXRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZW1vdmVJdGVtRnJvbU9yZGVyIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICAgIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICBpZiAoIWxheW91dEpzb24/Lm9yZGVyKSB7XG4gICAgICByZXR1cm4gYXBwQ29uZmlnXG4gICAgfVxuICAgIC8vIHJlbW92ZSBpdCBmcm9tIG9yZGVyIGxpc3RcbiAgICBsZXQgb3JkZXIgPSBbXS5jb25jYXQobGF5b3V0SnNvbi5vcmRlcilcbiAgICBvcmRlciA9IG9yZGVyLmZpbHRlcihpdGVtSWQgPT4gaXRlbUlkICE9PSBsYXlvdXRJdGVtSWQpXG4gICAgcmV0dXJuIGFwcENvbmZpZy5zZXRJbihbJ2xheW91dHMnLCBsYXlvdXRJZCwgJ29yZGVyJ10sIG9yZGVyKVxuICB9XG5cbiAgYWZ0ZXJJdGVtTW92ZWQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8sIHRvTGF5b3V0SWQ6IHN0cmluZyk6IElNQXBwQ29uZmlnIHtcbiAgICBsZXQgdXBkYXRlZEFwcENvbmZpZyA9IHN1cGVyLmFmdGVySXRlbU1vdmVkKGFwcENvbmZpZywgbGF5b3V0SW5mbywgdG9MYXlvdXRJZClcbiAgICB1cGRhdGVkQXBwQ29uZmlnID0gdGhpcy5yZW1vdmVJdGVtRnJvbU9yZGVyKHVwZGF0ZWRBcHBDb25maWcsIGxheW91dEluZm8pXG4gICAgcmV0dXJuIHRoaXMuY2xlYXJFbXB0eVJvd0luRmxvd0xheW91dCh1cGRhdGVkQXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICB9XG5cbiAgYWZ0ZXJJdGVtUmVtb3ZlZCAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IElNQXBwQ29uZmlnIHtcbiAgICBsZXQgdXBkYXRlZEFwcENvbmZpZyA9IHN1cGVyLmFmdGVySXRlbVJlbW92ZWQoYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICAgIHVwZGF0ZWRBcHBDb25maWcgPSB0aGlzLnJlbW92ZUl0ZW1Gcm9tT3JkZXIodXBkYXRlZEFwcENvbmZpZywgbGF5b3V0SW5mbylcbiAgICByZXR1cm4gdGhpcy5jbGVhckVtcHR5Um93SW5GbG93TGF5b3V0KHVwZGF0ZWRBcHBDb25maWcsIGxheW91dEluZm8pXG4gIH1cblxuICBkdXBsaWNhdGVJdGVtSW5TYW1lTGF5b3V0IChcbiAgICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICAgIGxheW91dEluZm86IExheW91dEluZm8sXG4gICAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgICBjb250ZXh0OiBEdXBsaWNhdGVDb250ZXh0XG4gICk6IFthcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJdGVtSWQ6IHN0cmluZ10ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHN1cGVyLmR1cGxpY2F0ZUl0ZW1JblNhbWVMYXlvdXQoYXBwQ29uZmlnLCBsYXlvdXRJbmZvLCBzaXplTW9kZSwgY29udGV4dClcbiAgICBsZXQgdXBkYXRlZEFwcENvbmZpZyA9IHJlc3VsdFswXVxuICAgIGNvbnN0IG5ld0l0ZW1JZCA9IHJlc3VsdFsxXVxuXG4gICAgLy8gbWFpbnRhaW4gb3JkZXJcbiAgICBjb25zdCBsYXlvdXRKc29uID0gdXBkYXRlZEFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdXG4gICAgY29uc3Qgb3JkZXIgPSBbXS5jb25jYXQobGF5b3V0SnNvbi5vcmRlcilcbiAgICBjb25zdCBpbmRleCA9IG9yZGVyLmluZGV4T2YobGF5b3V0SW5mby5sYXlvdXRJdGVtSWQpXG4gICAgb3JkZXIuc3BsaWNlKGluZGV4LCAxLCBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZCwgbmV3SXRlbUlkKVxuICAgIHVwZGF0ZWRBcHBDb25maWcgPSB1cGRhdGVkQXBwQ29uZmlnLnNldEluKFsnbGF5b3V0cycsIGxheW91dEluZm8ubGF5b3V0SWQsICdvcmRlciddLCBvcmRlcilcblxuICAgIC8vIG9mZnNldFxuICAgIHVwZGF0ZWRBcHBDb25maWcgPSB0aGlzLm9mZnNldER1cGxpYXRlSXRlbSh1cGRhdGVkQXBwQ29uZmlnLCBsYXlvdXRJbmZvLmxheW91dElkKVxuICAgIHJldHVybiBbdXBkYXRlZEFwcENvbmZpZywgbmV3SXRlbUlkXVxuICB9XG5cbiAgZ2V0VG9jU3RydWN0dXJlIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJZDogc3RyaW5nKTogVG9jTm9kZVtdIHtcbiAgICBjb25zdCBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgY29uc3Qgc2l6ZU1vZGUgPSB1dGlscy5nZXRDdXJyZW50U2l6ZU1vZGUoKVxuICAgIGlmIChsYXlvdXRKc29uPy5vcmRlcj8ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgb3JkZXIgPSBbXS5jb25jYXQobGF5b3V0SnNvbi5vcmRlcilcbiAgICAgIHJldHVybiBvcmRlci5maWx0ZXIoaXRlbUlkID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGxheW91dEpzb24uY29udGVudFtpdGVtSWRdXG4gICAgICAgIHJldHVybiAhaXRlbS5pc1BlbmRpbmdcbiAgICAgIH0pLm1hcCgobGF5b3V0SXRlbUlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBsYXlvdXRKc29uLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IENvbnRlbnRTZXJ2aWNlV3JhcHBlcihhcHBDb25maWcsIGl0ZW0pXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLnRvVG9jTm9kZSh7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSwgc2l6ZU1vZGUpXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHByb2Nlc3NBZnRlckl0ZW1BZGRlZCAoXG4gICAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGxheW91dEluZm86IExheW91dEluZm8sXG4gICAgY3VycmVudFNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gICAgY29udGFpbmVyUmVjdDogRE9NUmVjdFJlYWRPbmx5LFxuICAgIGl0ZW1SZWN0OiBET01SZWN0UmVhZE9ubHksXG4gICAgaW5zZXJ0SW5kZXg6IG51bWJlclxuICApOiBJTUFwcENvbmZpZyB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uKGFwcENvbmZpZylcbiAgICAvLyBvbmx5IGxlZnQsIHdpZHRoIGFuZCBoZWlnaHQgYXJlIG5lY2Vzc2FyeVxuICAgIGNvbnN0IGJib3ggPSB7XG4gICAgICBsZWZ0OiBpdGVtUmVjdC5sZWZ0LFxuICAgICAgd2lkdGg6IGl0ZW1SZWN0LndpZHRoLFxuICAgICAgaGVpZ2h0OiBpdGVtUmVjdC5oZWlnaHRcbiAgICB9XG5cbiAgICBpZiAoZHJhZ2dpbmdJdGVtLmxheW91dEluZm8/LmxheW91dElkICE9PSBsYXlvdXRJbmZvLmxheW91dElkKSB7XG4gICAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShsYXlvdXRJbmZvLCAnc2V0dGluZy5hdXRvUHJvcHMuaGVpZ2h0JywgTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKVxuICAgIH1cbiAgICBhcHBDb25maWdBY3Rpb25cbiAgICAgIC5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KGxheW91dEluZm8sICdiYm94JywgYmJveClcbiAgICAgIC5hZGp1c3RPcmRlck9mSXRlbShsYXlvdXRJbmZvLCBpbnNlcnRJbmRleClcblxuICAgIHJldHVybiBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnXG4gIH1cblxuICBnZXRUb29sSXRlbXMgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8sIHR5cGU6IHN0cmluZyk6IEFycmF5PFRvb2xJdGVtQ29uZmlnIHwgVG9vbEl0ZW1Db25maWdbXT4ge1xuICAgIGlmICh0eXBlPy50b0xvd2VyQ2FzZSgpID09PSAndmlldycpIHtcbiAgICAgIHJldHVybiB2aWV3TWVudUl0ZW1zXG4gICAgfVxuICAgIGlmICh0eXBlPy50b0xvd2VyQ2FzZSgpID09PSAnc2NyZWVuJykge1xuICAgICAgcmV0dXJuIHNjcmVlbk1lbnVJdGVtc1xuICAgIH1cblxuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pXG5cbiAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICByZXR1cm4gc2VjdGlvbk1lbnVcbiAgICB9XG4gICAgcmV0dXJuIGNvbW1vbk1lbnVcbiAgfVxuXG4gIHByaXZhdGUgb2Zmc2V0RHVwbGlhdGVJdGVtIChcbiAgICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICAgIGxheW91dElkOiBzdHJpbmdcbiAgKTogSU1BcHBDb25maWcge1xuICAgIGxldCB1cGRhdGVkQXBwQ29uZmlnID0gYXBwQ29uZmlnXG4gICAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgY29uc3QgZ2V0VmFsdWUgPSAobGF5b3V0SXRlbUlkLCBwcm9wKSA9PlxuICAgICAgcGFyc2VJbnQodXBkYXRlZEFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF0uYmJveFtwcm9wXSwgMTApXG4gICAgY29uc3QgdXBkYXRlVmFsdWUgPSAobGF5b3V0SXRlbUlkLCBwcm9wLCB2YWx1ZSkgPT4ge1xuICAgICAgdXBkYXRlZEFwcENvbmZpZyA9IHVwZGF0ZWRBcHBDb25maWcuc2V0SW4oWydsYXlvdXRzJywgbGF5b3V0SWQsICdjb250ZW50JywgbGF5b3V0SXRlbUlkLCAnYmJveCcsIHByb3BdLCB2YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBvcmRlciA9IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50KS5zb3J0KChhLCBiKSA9PiBnZXRWYWx1ZShhLCAnbGVmdCcpIC0gZ2V0VmFsdWUoYiwgJ2xlZnQnKSlcblxuICAgIC8vIGNvbXByZXNzIHJvdyBpdGVtc1xuICAgIGxldCB0b3RhbFdpZHRoID0gMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRvdGFsV2lkdGggKz0gZ2V0VmFsdWUob3JkZXJbaV0sICd3aWR0aCcpXG4gICAgfVxuICAgIHVwZGF0ZVZhbHVlKG9yZGVyWzBdLCAnbGVmdCcsIDApXG4gICAgaWYgKHRvdGFsV2lkdGggPD0gMTIpIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdXBkYXRlVmFsdWUob3JkZXJbaV0sICdsZWZ0JywgZ2V0VmFsdWUob3JkZXJbaSAtIDFdLCAnbGVmdCcpICsgZ2V0VmFsdWUob3JkZXJbaSAtIDFdLCAnd2lkdGgnKSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc2NhbGUgZG93blxuICAgICAgY29uc3QgcmF0aW8gPSB0b3RhbFdpZHRoIC8gMTJcbiAgICAgIHVwZGF0ZVZhbHVlKG9yZGVyWzBdLCAnd2lkdGgnLCBNYXRoLm1heCgxLCBNYXRoLmZsb29yKGdldFZhbHVlKG9yZGVyWzBdLCAnd2lkdGgnKSAvIHJhdGlvKSkpXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwZGF0ZVZhbHVlKG9yZGVyW2ldLCAnbGVmdCcsIGdldFZhbHVlKG9yZGVyW2kgLSAxXSwgJ2xlZnQnKSArIGdldFZhbHVlKG9yZGVyW2kgLSAxXSwgJ3dpZHRoJykpXG4gICAgICAgIHVwZGF0ZVZhbHVlKG9yZGVyW2ldLCAnd2lkdGgnLCBNYXRoLm1heCgxLCBNYXRoLmZsb29yKGdldFZhbHVlKG9yZGVyW2ldLCAnd2lkdGgnKSAvIHJhdGlvKSkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVwZGF0ZWRBcHBDb25maWdcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiByb3cgbGF5b3V0IGlzIGluIHRoZSBmbG93IHBhZ2UsIGFuZCB0aGUgbGFzdCBpdGVtIG9mIHRoaXMgcm93IGlzIHJlbW92ZWQuIFRoZSByb3cgbmVlZHMgdG8gYmUgcmVtb3ZlZCB0b28uXG4gICAqIEBwYXJhbSBhcHBDb25maWdcbiAgICogQHBhcmFtIHJlbW92ZWRMYXlvdXRJbmZvXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBwcml2YXRlIGNsZWFyRW1wdHlSb3dJbkZsb3dMYXlvdXQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIHJlbW92ZWRMYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1BcHBDb25maWcge1xuICAgIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzW3JlbW92ZWRMYXlvdXRJbmZvLmxheW91dElkXVxuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSBsYXlvdXQ/Lm9yZGVyPy5sZW5ndGggPz8gMFxuICAgIGlmIChjb250ZW50TGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGFwcENvbmZpZ1xuICAgIH1cblxuICAgIGNvbnN0IHdpZGdldElkID0gc2VhcmNoVXRpbHMuZ2V0V2lkZ2V0SWRUaGF0VXNlVGhlTGF5b3V0SWQoYXBwQ29uZmlnLCByZW1vdmVkTGF5b3V0SW5mby5sYXlvdXRJZClcbiAgICBpZiAod2lkZ2V0SWQpIHtcbiAgICAgIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICAgIGNvbnN0IHdpZGdldE5hbWUgPSB3aWRnZXRKc29uPy5tYW5pZmVzdD8ubmFtZVxuICAgICAgaWYgKHdpZGdldE5hbWUgPT09ICdyb3cnKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgcm93IHdpZGdldCBpcyBhIGNoaWxkIG9mIEZsb3cgbGF5b3V0XG4gICAgICAgIGNvbnN0IHNpemVNb2RlID0gdXRpbHMuZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgICAgICAgY29uc3QgcGFyZW50TGF5b3V0SW5mbyA9IHdpZGdldFNlcnZpY2UuZmluZFBhcmVudChhcHBDb25maWcsIHdpZGdldElkLCBzaXplTW9kZSlcbiAgICAgICAgaWYgKHBhcmVudExheW91dEluZm8pIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnRMYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbcGFyZW50TGF5b3V0SW5mby5sYXlvdXRJZF1cbiAgICAgICAgICBpZiAocGFyZW50TGF5b3V0SnNvbj8udHlwZSA9PT0gTGF5b3V0VHlwZS5GbG93TGF5b3V0KSB7XG4gICAgICAgICAgICBjb25zdCBsYXlvdXRTZXJ2aWNlID0gTGF5b3V0U2VydmljZVByb3ZpZGVyLmdldEluc3RhbmNlKCkuZ2V0U2VydmljZUJ5VHlwZShwYXJlbnRMYXlvdXRKc29uLnR5cGUpXG4gICAgICAgICAgICByZXR1cm4gbGF5b3V0U2VydmljZS5yZW1vdmVJdGVtKGFwcENvbmZpZywgcGFyZW50TGF5b3V0SW5mbywgc2l6ZU1vZGUsIHRydWUsIGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXBwQ29uZmlnXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGNsYXNzTmFtZXMsXG4gIGpzeCxcbiAgY3NzLFxuICBFeHRlbnNpb25NYW5hZ2VyLFxuICBleHRlbnNpb25TcGVjLFxuICB0eXBlIExheW91dFRyYW5zZm9ybUZ1bmMsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBSZWFjdFJlc2l6ZURldGVjdG9yLFxuICBsb2Rhc2hcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc3R5bGVVdGlscyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQge1xuICB0eXBlIExheW91dFByb3BzLFxuICB0eXBlIFN0YXRlVG9MYXlvdXRQcm9wcyxcbiAgdXRpbHNcbn0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgREVGQVVMVF9ST1dfTEFZT1VUX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQgeyBUT1RBTF9DT0xTIH0gZnJvbSAnLi4vdHlwZXMnXG5pbXBvcnQgeyBSb3cgfSBmcm9tICcuL3JvdydcblxudHlwZSBSb3dMYXlvdXRQcm9wcyA9IExheW91dFByb3BzICYge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHBhcmVudExheW91dElkPzogc3RyaW5nXG4gIHBhcmVudExheW91dEl0ZW1JZD86IHN0cmluZ1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxufVxuXG5jbGFzcyBSb3dMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFJvd0xheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzPiB7XG4gIGxheW91dFRyYW5zZm9ybTogTGF5b3V0VHJhbnNmb3JtRnVuY1xuICBmaW5hbExheW91dDogSU1MYXlvdXRKc29uXG4gIG51bU9mUm93czogbnVtYmVyXG4gIGhhbmRsZURlYm91bmNlUmVzaXplXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5oYW5kbGVEZWJvdW5jZVJlc2l6ZSA9IGxvZGFzaC5kZWJvdW5jZSh0aGlzLm9uUmVzaXplLCAyMDApXG4gIH1cblxuICBmaW5kRXh0ZW5zaW9uICgpOiB2b2lkIHtcbiAgICBjb25zdCBleHRzID0gRXh0ZW5zaW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldEV4dGVuc2lvbnMoXG4gICAgICBgJHtleHRlbnNpb25TcGVjLkV4dGVuc2lvblBvaW50cy5MYXlvdXRUcmFuc2Zvcm1lcn1gXG4gICAgKVxuICAgIGlmIChleHRzPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleHQgPSBleHRzLmZpbmQoaXRlbSA9PiAoaXRlbSBhcyBleHRlbnNpb25TcGVjLkxheW91dFRyYW5zZm9ybWVyRXh0ZW5zaW9uKS5sYXlvdXRUeXBlID09PSAnUk9XJylcbiAgICAgIHRoaXMubGF5b3V0VHJhbnNmb3JtID0gKGV4dCBhcyBhbnkpPy50cmFuc2Zvcm1MYXlvdXRcbiAgICB9XG4gIH1cblxuICBjb2xsZWN0Um93SXRlbXMgKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB7IGxheW91dCwgbGF5b3V0cywgYnJvd3NlclNpemVNb2RlLCBtYWluU2l6ZU1vZGUgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAodGhpcy5sYXlvdXRUcmFuc2Zvcm0gPT0gbnVsbCkge1xuICAgICAgdGhpcy5maW5kRXh0ZW5zaW9uKClcbiAgICB9XG4gICAgbGV0IHRhcmdldExheW91dCA9IGxheW91dFxuICAgIGNvbnN0IHZpZXdPbmx5ID0gbGF5b3V0c1ticm93c2VyU2l6ZU1vZGVdICE9PSBsYXlvdXQuaWRcbiAgICBpZiAodmlld09ubHkgJiYgdGhpcy5sYXlvdXRUcmFuc2Zvcm0gIT0gbnVsbCkge1xuICAgICAgdGFyZ2V0TGF5b3V0ID0gdGhpcy5sYXlvdXRUcmFuc2Zvcm0obGF5b3V0LCBtYWluU2l6ZU1vZGUsIGJyb3dzZXJTaXplTW9kZSwgdXRpbHMuZ2V0QXBwQ29uZmlnKCkpXG4gICAgfVxuICAgIHRoaXMuZmluYWxMYXlvdXQgPSB0YXJnZXRMYXlvdXRcblxuICAgIGNvbnN0IGNvbnRlbnQgPSB0YXJnZXRMYXlvdXQub3JkZXIgPz8gW11cblxuICAgIGNvbnN0IHJvd3MgPSBbXVxuICAgIGxldCByb3cgPSBbXVxuICAgIGxldCByb3dJbmRleCA9IDBcbiAgICByb3dzLnB1c2gocm93KVxuICAgIGNvbnRlbnQuZm9yRWFjaCgoaXRlbUlkKSA9PiB7XG4gICAgICBpZiAodGFyZ2V0TGF5b3V0LmNvbnRlbnRbaXRlbUlkXS5pc1BlbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBiYm94ID0gdGFyZ2V0TGF5b3V0LmNvbnRlbnRbaXRlbUlkXS5iYm94XG4gICAgICBjb25zdCBsZWZ0ID0gcGFyc2VJbnQoYmJveC5sZWZ0LCAxMClcbiAgICAgIGNvbnN0IHJvd051bSA9IE1hdGguZmxvb3IobGVmdCAvIFRPVEFMX0NPTFMpXG4gICAgICBpZiAocm93TnVtID4gcm93SW5kZXgpIHtcbiAgICAgICAgcm93ID0gW11cbiAgICAgICAgcm93SW5kZXggPSByb3dOdW1cbiAgICAgICAgcm93cy5wdXNoKHJvdylcbiAgICAgIH1cbiAgICAgIHJvdy5wdXNoKGl0ZW1JZClcbiAgICB9KVxuICAgIHJldHVybiByb3dzXG4gIH1cblxuICBjcmVhdGVSb3cgKCk6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IGxheW91dCwgbGF5b3V0cyB9ID0gdGhpcy5wcm9wc1xuICAgIHJldHVybiAoXG4gICAgICA8Um93XG4gICAgICAgIGxheW91dHM9e2xheW91dHN9XG4gICAgICAgIGxheW91dD17bGF5b3V0fVxuICAgICAgICB0cmFuc2Zvcm1lZExheW91dD17dGhpcy5maW5hbExheW91dH1cbiAgICAgICAgaXNNdWx0aVJvdz17dGhpcy5udW1PZlJvd3MgPiAxfVxuICAgICAgPnt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgPC9Sb3c+XG4gICAgKVxuICB9XG5cbiAgb25SZXNpemUgPSAod2lkdGgsIGhlaWdodCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLmJyb3dzZXJTaXplTW9kZSAhPT0gdGhpcy5wcm9wcy5tYWluU2l6ZU1vZGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoaGVpZ2h0ID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgeyB3aWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICh3aW5kb3cucnVudGltZUluZm8ud2lkZ2V0cz8uW3dpZGdldElkXSAhPSBudWxsKSB7XG4gICAgICB3aW5kb3cucnVudGltZUluZm8ud2lkZ2V0c1t3aWRnZXRJZF0uaGVpZ2h0ID0gaGVpZ2h0XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5ydW50aW1lSW5mby53aWRnZXRzW3dpZGdldElkXSA9IHsgaGVpZ2h0IH1cbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCk6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IGxheW91dCwgY2xhc3NOYW1lIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgbGF5b3V0U2V0dGluZyA9IGxheW91dC5zZXR0aW5nID8/IERFRkFVTFRfUk9XX0xBWU9VVF9TRVRUSU5HXG4gICAgY29uc3Qgc3R5bGUgPSBsYXlvdXRTZXR0aW5nLnN0eWxlID8/IERFRkFVTFRfUk9XX0xBWU9VVF9TRVRUSU5HLnN0eWxlXG4gICAgdGhpcy5udW1PZlJvd3MgPSB0aGlzLmNvbGxlY3RSb3dJdGVtcygpLmxlbmd0aFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbGF5b3V0IGQtZmxleCcsIGNsYXNzTmFtZSl9XG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6ICR7c3R5bGVVdGlscy50b0NTU1BhZGRpbmcoc3R5bGUucGFkZGluZyl9O1xuICAgICAgICBgfVxuICAgICAgICBkYXRhLWxheW91dGlkPXtsYXlvdXQuaWR9XG4gICAgICA+XG4gICAgICAgIHt0aGlzLmNyZWF0ZVJvdygpfVxuICAgICAgICA8UmVhY3RSZXNpemVEZXRlY3RvciBoYW5kbGVIZWlnaHQgb25SZXNpemU9e3RoaXMuaGFuZGxlRGVib3VuY2VSZXNpemV9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgUm93TGF5b3V0UHJvcHM+KHV0aWxzLm1hcFN0YXRlVG9MYXlvdXRQcm9wcykoXG4gIFJvd0xheW91dCBhcyBhbnlcbilcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIEltbXV0YWJsZSxcbiAganN4LFxuICBjc3MsXG4gIGxvZGFzaCxcbiAgQVBQX0ZSQU1FX05BTUVfSU5fQlVJTERFUixcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIHR5cGUgSU1Cb3VuZGluZ0JveCxcbiAgdHlwZSBTZXJpYWxpemVkU3R5bGVzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNldHRpbmdTZWN0aW9uLCBTZXR0aW5nUm93IH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQge1xuICB0eXBlIExpbmVhclVuaXQsXG4gIFNlbGVjdCxcbiAgTnVtZXJpY0lucHV0LFxuICB1dGlscyxcbiAgRGlzdGFuY2VVbml0cyxcbiAgQ2hlY2tib3hcbn0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7XG4gIFNpemVFZGl0b3IsXG4gIElucHV0UmF0aW9cbn0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9zdHlsZS1zZXR0aW5nLWNvbXBvbmVudHMnXG5pbXBvcnQge1xuICBMYXlvdXRJdGVtU2l6ZU1vZGVzLFxuICB1dGlscyBhcyBsYXlvdXRVdGlscyxcbiAgdHlwZSBSb3dMYXlvdXRJdGVtU2V0dGluZ1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyB0eXBlIExheW91dEl0ZW1TZXR0aW5nUHJvcHMgfSBmcm9tICcuLi8uLi9idWlsZGVyL3R5cGVzJ1xuaW1wb3J0IENvbW1vblRyYW5zZm9ybVNldHRpbmcgZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tdHJhbnNmb3JtLXNldHRpbmcnXG5pbXBvcnQgQ29tbW9uTGF5b3V0SXRlbVNldHRpbmcgZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tbGF5b3V0LWl0ZW0tc2V0dGluZydcbmltcG9ydCB7IERFRkFVTFRfUk9XX0lURU1fU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcblxuY29uc3QgaW5wdXRTdHlsZSA9IGNzc2B3aWR0aDogNzJweGBcbmNvbnN0IHNpemVFZGl0b3JTdHlsZSA9IGNzc2B3aWR0aDogMTAwcHg7YFxuXG5jb25zdCBoZWlnaHRNb2RlcyA9IFtcbiAgTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvLFxuICBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gsXG4gIExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXG5dXG5jb25zdCBoZWlnaHRNb2Rlc1dpdGhvdXRBdXRvID0gW1xuICBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gsXG4gIExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXG5dXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvd0l0ZW1TZXR0aW5nIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRJdGVtU2V0dGluZ1Byb3BzPiB7XG4gIHVwZGF0ZVN0eWxlIChrZXksIHZhbHVlKTogdm9pZCB7XG4gICAgY29uc3QgeyBsYXlvdXRJdGVtIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3Qgc2V0dGluZyA9IEltbXV0YWJsZShsYXlvdXRJdGVtPy5zZXR0aW5nID8/IHt9KVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldEluKFsnc3R5bGUnLCBrZXldLCB2YWx1ZSlcbiAgICApXG4gIH1cblxuICBoYW5kbGVBbGlnbkNoYW5nZSA9IChlKTogdm9pZCA9PiB7XG4gICAgdGhpcy51cGRhdGVTdHlsZSgnYWxpZ25TZWxmJywgZS50YXJnZXQudmFsdWUpXG4gIH1cblxuICBoYW5kbGVIZWlnaHRDaGFuZ2UgPSAodmFsdWU6IExpbmVhclVuaXQpOiB2b2lkID0+IHtcbiAgICBsZXQgYmJveCA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3hcbiAgICBjb25zdCB7IGRpc3RhbmNlLCB1bml0IH0gPSB2YWx1ZVxuICAgIGNvbnN0IG9yaWdpbmFsVmFsdWUgPSBiYm94LmhlaWdodFxuICAgIGNvbnN0IGNvbnRhaWVuclJlY3QgPSB0aGlzLmdldFNpemVPZkNvbnRhaW5lcigpXG4gICAgbGV0IG5ld1ZhbHVlOiBzdHJpbmcgfCBudW1iZXIgPSBkaXN0YW5jZS50b0ZpeGVkKDIpXG5cbiAgICBpZiAobGF5b3V0VXRpbHMuaXNQZXJjZW50YWdlKG9yaWdpbmFsVmFsdWUpICYmIHVuaXQgPT09IERpc3RhbmNlVW5pdHMuUElYRUwpIHtcbiAgICAgIC8vIGNoYW5nZSBmcm9tIHBlcmNlbnRhZ2UgdG8gcGl4ZWxcbiAgICAgIGlmIChjb250YWllbnJSZWN0ICE9IG51bGwpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBNYXRoLnJvdW5kKFxuICAgICAgICAgIChwYXJzZUZsb2F0KG9yaWdpbmFsVmFsdWUpICogY29udGFpZW5yUmVjdC5oZWlnaHQpIC8gMTAwXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFxuICAgICAgIWxheW91dFV0aWxzLmlzUGVyY2VudGFnZShvcmlnaW5hbFZhbHVlKSAmJlxuICAgICAgdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFXG4gICAgKSB7XG4gICAgICAvLyBjaGFuZ2UgZnJvbSBwaXhlbCB0byBwZXJjZW50YWdlXG4gICAgICBpZiAoY29udGFpZW5yUmVjdCAhPSBudWxsKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gKFxuICAgICAgICAgIChwYXJzZUZsb2F0KG9yaWdpbmFsVmFsdWUpICogMTAwKSAvXG4gICAgICAgICAgY29udGFpZW5yUmVjdC5oZWlnaHRcbiAgICAgICAgKS50b0ZpeGVkKDQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgYmJveCA9IGJib3guc2V0KFxuICAgICAgJ2hlaWdodCcsXG4gICAgICB1bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UgPyBgJHtuZXdWYWx1ZX0lYCA6IGAke25ld1ZhbHVlfXB4YFxuICAgIClcblxuICAgIHRoaXMucHJvcHMub25Qb3NDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgIGJib3hcbiAgICApXG4gIH1cblxuICBoYW5kbGVIZWlnaHRNb2RlQ2hhbmdlID0gKG1vZGU6IExheW91dEl0ZW1TaXplTW9kZXMpOiB2b2lkID0+IHtcbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmcgPz8gSW1tdXRhYmxlKHt9KVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldEluKFsnYXV0b1Byb3BzJywgJ2hlaWdodCddLCBtb2RlKVxuICAgIClcbiAgfVxuXG4gIHVwZGF0ZUFzcGVjdFNldHRpbmcgPSAoaGVpZ2h0TW9kZT86IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgIGxldCBzZXR0aW5nID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmcgPz8gSW1tdXRhYmxlKHt9KVxuICAgIGlmIChzZXR0aW5nLmhlaWdodE1vZGUgPT09ICdmaXQnKSB7IC8vIGJhY2sgY29tcGF0aWJsZSwgc2F2ZSB0aGlzIHNldHRpbmcgaW4gYXV0b1Byb3BzXG4gICAgICBzZXR0aW5nID0gc2V0dGluZy5zZXRJbihbJ2F1dG9Qcm9wcycsICdoZWlnaHQnXSwgTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKVxuICAgIH1cbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ2hlaWdodE1vZGUnLCBoZWlnaHRNb2RlKVxuICAgIGlmIChoZWlnaHRNb2RlID09PSAncmF0aW8nKSB7XG4gICAgICBjb25zdCBpdGVtUmVjdCA9IHRoaXMuZ2V0U2l6ZU9mSXRlbSgpXG4gICAgICBpZiAoaXRlbVJlY3QgIT0gbnVsbCkge1xuICAgICAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoXG4gICAgICAgICAgJ2FzcGVjdFJhdGlvJyxcbiAgICAgICAgICBOdW1iZXIoKGl0ZW1SZWN0LmhlaWdodCAvIGl0ZW1SZWN0LndpZHRoKS50b0ZpeGVkKDIpKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJib3ggPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uYmJveCBhcyBJTUJvdW5kaW5nQm94XG4gICAgICBjb25zdCByZWN0ID0gdGhpcy5nZXRTaXplT2ZJdGVtKClcbiAgICAgIGlmIChsYXlvdXRVdGlscy5pc1BlcmNlbnRhZ2UoYmJveC5oZWlnaHQpKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaWVuclJlY3QgPSB0aGlzLmdldFNpemVPZkNvbnRhaW5lcigpXG4gICAgICAgIHRoaXMucHJvcHMub25Qb3NDaGFuZ2UoXG4gICAgICAgICAge1xuICAgICAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYmJveC5zZXQoXG4gICAgICAgICAgICAnaGVpZ2h0JyxcbiAgICAgICAgICAgIGAkeygocmVjdC5oZWlnaHQgKiAxMDApIC8gY29udGFpZW5yUmVjdC5oZWlnaHQpLnRvRml4ZWQoNCl9JWBcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Qb3NDaGFuZ2UoXG4gICAgICAgICAge1xuICAgICAgICAgICAgbGF5b3V0SWQ6IHRoaXMucHJvcHMubGF5b3V0SWQsXG4gICAgICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYmJveC5zZXQoJ2hlaWdodCcsIGAke01hdGgucm91bmQocmVjdC5oZWlnaHQpfXB4YClcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nXG4gICAgKVxuICB9XG5cbiAgaGFuZGxlQXNwZWN0UmF0aW9DaGFuZ2UgPSAobmV3UmF0aW8pOiB2b2lkID0+IHtcbiAgICBsZXQgc2V0dGluZyA9IHRoaXMucHJvcHMubGF5b3V0SXRlbS5zZXR0aW5nID8/IEltbXV0YWJsZSh7fSlcbiAgICBzZXR0aW5nID0gc2V0dGluZy5zZXQoJ2FzcGVjdFJhdGlvJywgbmV3UmF0aW8pXG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgIHNldHRpbmdcbiAgICApXG4gIH1cblxuICBoYW5kbGVPZmZzZXRYQ2hhbmdlID0gKHZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5wcm9wcy5sYXlvdXRJdGVtLnNldHRpbmcgPz8gSW1tdXRhYmxlKHt9KVxuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKFxuICAgICAge1xuICAgICAgICBsYXlvdXRJZDogdGhpcy5wcm9wcy5sYXlvdXRJZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiB0aGlzLnByb3BzLmxheW91dEl0ZW0uaWRcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nLnNldCgnb2Zmc2V0WCcsIHZhbHVlKVxuICAgIClcbiAgfVxuXG4gIGhhbmRsZU9mZnNldFlDaGFuZ2UgPSAodmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHNldHRpbmcgPSB0aGlzLnByb3BzLmxheW91dEl0ZW0uc2V0dGluZyA/PyBJbW11dGFibGUoe30pXG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2UoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiB0aGlzLnByb3BzLmxheW91dElkLFxuICAgICAgICBsYXlvdXRJdGVtSWQ6IHRoaXMucHJvcHMubGF5b3V0SXRlbS5pZFxuICAgICAgfSxcbiAgICAgIHNldHRpbmcuc2V0KCdvZmZzZXRZJywgdmFsdWUpXG4gICAgKVxuICB9XG5cbiAgZm9ybWF0TWVzc2FnZSA9IChpZDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5mb3JtYXRNZXNzYWdlKGlkKVxuICB9XG5cbiAgZ2V0U2l6ZU9mQ29udGFpbmVyICgpOiBDbGllbnRSZWN0IHtcbiAgICBjb25zdCBsYXlvdXRFbGVtID0gdGhpcy5xdWVyeVNlbGVjdG9yKFxuICAgICAgYGRpdi5yb3ctbGF5b3V0W2RhdGEtbGF5b3V0aWQ9XCIke3RoaXMucHJvcHMubGF5b3V0SWR9XCJdYFxuICAgIClcbiAgICBpZiAobGF5b3V0RWxlbSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gbGF5b3V0RWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0U2l6ZU9mSXRlbSAoKTogQ2xpZW50UmVjdCB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIC8vIG5vdCBvbmx5IHdpZGdldCwgYnV0IGFsc28gZm9yIHNlY3Rpb24gYW5kIHBsYWNlaG9sZGVyXG4gICAgY29uc3QgbGF5b3V0RWxlbSA9IHRoaXMucXVlcnlTZWxlY3RvcihcbiAgICAgIGBkaXYuZXhiLXJuZFtkYXRhLWxheW91dGlkPVwiJHtsYXlvdXRJZH1cIl1bZGF0YS1sYXlvdXRpdGVtaWQ9XCIke2xheW91dEl0ZW0uaWR9XCJdID4gZGl2LmxheW91dC1pdGVtLWNvbnRlbnRgXG4gICAgKVxuICAgIGlmIChsYXlvdXRFbGVtICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBsYXlvdXRFbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBxdWVyeVNlbGVjdG9yIChzZWxlY3Rvcjogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGFwcEZyYW1lOiBIVE1MRnJhbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGBpZnJhbWVbbmFtZT1cIiR7QVBQX0ZSQU1FX05BTUVfSU5fQlVJTERFUn1cIl1gXG4gICAgKVxuICAgIGlmIChhcHBGcmFtZSAhPSBudWxsKSB7XG4gICAgICBjb25zdCBhcHBGcmFtZURvYyA9XG4gICAgICAgIGFwcEZyYW1lLmNvbnRlbnREb2N1bWVudCA/PyBhcHBGcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50XG4gICAgICByZXR1cm4gYXBwRnJhbWVEb2MucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldFN0eWxlICgpOiBTZXJpYWxpemVkU3R5bGVzIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmFsaWduLXNlbGVjdCB7XG4gICAgICAgIC5kcm9wZG93bi1idXR0b24sXG4gICAgICAgIC5kcm9wZG93bi1idXR0b246aG92ZXIge1xuICAgICAgICAgIGhlaWdodDogMjZweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIHJlbmRlciAoKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0sIGlzTG9ja0xheW91dCwgc3VwcG9ydEF1dG9TaXplIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKGxheW91dEl0ZW0gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgaXRlbVNldHRpbmc6IFJvd0xheW91dEl0ZW1TZXR0aW5nID0gbG9kYXNoLmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgREVGQVVMVF9ST1dfSVRFTV9TRVRUSU5HLFxuICAgICAgbGF5b3V0SXRlbS5zZXR0aW5nXG4gICAgKVxuICAgIGNvbnN0IGJib3ggPSBsYXlvdXRJdGVtLmJib3hcbiAgICBjb25zdCBzdHlsZSA9IGl0ZW1TZXR0aW5nLnN0eWxlID8/ICh7fSBhcyBhbnkpXG4gICAgY29uc3QgaGVpZ2h0TW9kZSA9XG4gICAgICBpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA/PyBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2hcbiAgICBjb25zdCBrZWVwQXNwZWN0UmF0aW8gPSBpdGVtU2V0dGluZy5oZWlnaHRNb2RlID09PSAncmF0aW8nXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J3Jvdy1pdGVtLXNldHRpbmcnIGNzcz17dGhpcy5nZXRTdHlsZSgpfT5cbiAgICAgICAgeyFpc0xvY2tMYXlvdXQgJiYgKFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIDxTZXR0aW5nU2VjdGlvbiByb2xlPSdncm91cCcgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnc2l6ZScpfSBhcmlhLWxhYmVsPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3NpemUnKX0+XG4gICAgICAgICAgICAgIDxTZXR0aW5nUm93IHJvbGU9J2dyb3VwJyBsYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdoZWlnaHQnKX0gYXJpYS1sYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdoZWlnaHQnKX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e3NpemVFZGl0b3JTdHlsZX0+XG4gICAgICAgICAgICAgICAgICA8U2l6ZUVkaXRvclxuICAgICAgICAgICAgICAgICAgICBsYWJlbD0nSCdcbiAgICAgICAgICAgICAgICAgICAgbW9kZT17aGVpZ2h0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgc2l6ZU1vZGVzPXtzdXBwb3J0QXV0b1NpemUgPyBoZWlnaHRNb2RlcyA6IGhlaWdodE1vZGVzV2l0aG91dEF1dG99XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1dGlscy5zdHJpbmdPZkxpbmVhclVuaXQoYmJveC5oZWlnaHQpfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVIZWlnaHRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIG9uTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVIZWlnaHRNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17a2VlcEFzcGVjdFJhdGlvfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgICA8U2V0dGluZ1Jvdz5cbiAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgna2VlcEFzcGVjdFJhdGlvJyl9XG4gICAgICAgICAgICAgICAgICBjaGVja2VkPXtrZWVwQXNwZWN0UmF0aW99XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXNwZWN0U2V0dGluZyhcbiAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID8gJ3JhdGlvJyA6ICdmaXhlZCdcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbXItMidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2tlZXBBc3BlY3RSYXRpbycpfVxuICAgICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgICAgIHtrZWVwQXNwZWN0UmF0aW8gJiYgKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nUm93IGxhYmVsPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2FzcGVjdFJhdGlvJyl9IGFyaWEtbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgnYXNwZWN0UmF0aW8nKX0+XG4gICAgICAgICAgICAgICAgICA8SW5wdXRSYXRpb1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aXRlbVNldHRpbmcuYXNwZWN0UmF0aW99XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAxMDAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQXNwZWN0UmF0aW9DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2hlaWdodE1vZGUgIT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCAmJiAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgnYWxpZ24nKX0+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgnYWxpZ24nKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdhbGlnbi1zZWxlY3QnXG4gICAgICAgICAgICAgICAgICAgIGNzcz17c2l6ZUVkaXRvclN0eWxlfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c3R5bGUuYWxpZ25TZWxmID8/ICdmbGV4LXN0YXJ0J31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQWxpZ25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2ZsZXgtc3RhcnQnPlxuICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ1QnKX1cbiAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2ZsZXgtZW5kJz57dGhpcy5mb3JtYXRNZXNzYWdlKCdCJyl9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2NlbnRlcic+XG4gICAgICAgICAgICAgICAgICAgICAge3RoaXMuZm9ybWF0TWVzc2FnZSgnY2VudGVyJyl9XG4gICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9TZXR0aW5nU2VjdGlvbj5cbiAgICAgICAgICAgIDxTZXR0aW5nU2VjdGlvbiByb2xlPSdncm91cCcgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgncG9zaXRpb24nKX0gYXJpYS1sYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdwb3NpdGlvbicpfT5cbiAgICAgICAgICAgICAgPENvbW1vblRyYW5zZm9ybVNldHRpbmdcbiAgICAgICAgICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtLmlkfVxuICAgICAgICAgICAgICAgIHNldHRpbmc9e2xheW91dEl0ZW0uc2V0dGluZ31cbiAgICAgICAgICAgICAgICBvblNldHRpbmdDaGFuZ2U9e3RoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e3RoaXMucHJvcHMuZm9ybWF0TWVzc2FnZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPFNldHRpbmdSb3cgbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgnb2Zmc2V0WCcpfSBhcmlhLWxhYmVsPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ29mZnNldFgnKX0+XG4gICAgICAgICAgICAgICAgPE51bWVyaWNJbnB1dFxuICAgICAgICAgICAgICAgICAgY3NzPXtpbnB1dFN0eWxlfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2l0ZW1TZXR0aW5nLm9mZnNldFh9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVPZmZzZXRYQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uPXswfVxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9TZXR0aW5nUm93PlxuICAgICAgICAgICAgICA8U2V0dGluZ1JvdyBsYWJlbD17dGhpcy5mb3JtYXRNZXNzYWdlKCdvZmZzZXRZJyl9IGFyaWEtbGFiZWw9e3RoaXMuZm9ybWF0TWVzc2FnZSgnb2Zmc2V0WScpfT5cbiAgICAgICAgICAgICAgICA8TnVtZXJpY0lucHV0XG4gICAgICAgICAgICAgICAgICBjc3M9e2lucHV0U3R5bGV9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17aXRlbVNldHRpbmcub2Zmc2V0WX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZU9mZnNldFlDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICBwcmVjaXNpb249ezB9XG4gICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgICA8L1NldHRpbmdTZWN0aW9uPlxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICl9XG4gICAgICAgIHsobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgfHwgbGF5b3V0SXRlbS5zZWN0aW9uSWQgIT0gbnVsbCkgJiYgKFxuICAgICAgICAgIDxDb21tb25MYXlvdXRJdGVtU2V0dGluZ1xuICAgICAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtLmlkfVxuICAgICAgICAgICAgaXNTZWN0aW9uPXtsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb259XG4gICAgICAgICAgICBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX1cbiAgICAgICAgICAgIG9uU3R5bGVDaGFuZ2U9e3RoaXMucHJvcHMub25TdHlsZUNoYW5nZX1cbiAgICAgICAgICAgIG9uU2V0dGluZ0NoYW5nZT17dGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2V9XG4gICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICBwb2xpc2hlZCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICB0eXBlIElNTGF5b3V0SnNvbixcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxuICB0eXBlIEJvdW5kaW5nQm94LFxuICB0eXBlIElNQXBwQ29uZmlnLFxuICBPbmVCeU9uZUFuaW1hdGlvbixcbiAgSW50ZXJzZWN0aW9uQ29udGV4dCxcbiAgTGF5b3V0VHlwZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMYXlvdXRTZXJ2aWNlUHJvdmlkZXIsIGdldEFwcENvbmZpZ0FjdGlvbiB9IGZyb20gJ2ppbXUtZm9yLWJ1aWxkZXInXG5pbXBvcnQgUm93SXRlbUZvckJ1aWxkZXIgZnJvbSAnLi9sYXlvdXQtaXRlbSdcbmltcG9ydCB7XG4gIHR5cGUgTGF5b3V0UHJvcHMsXG4gIFBhZ2VDb250ZXh0LFxuICB0eXBlIFBhZ2VDb250ZXh0UHJvcHMsXG4gIHV0aWxzLFxuICBMYXlvdXRaSW5kZXgsXG4gIHR5cGUgUm93TGF5b3V0U2V0dGluZ1xufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBERUZBVUxUX1JPV19MQVlPVVRfU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcbmltcG9ydCB7IHR5cGUgRHJvcEhhbmRsZXJzIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90eXBlcydcbmltcG9ydCB7IERyb3BBcmVhIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1ob29rJ1xuaW1wb3J0IHsgYWRkSXRlbVRvTGF5b3V0IH0gZnJvbSAnLi4vLi4vYnVpbGRlci9jb21tb24tbGF5b3V0LWFjdGlvbnMnXG5pbXBvcnQgeyBDYW52YXNQYW5lIH0gZnJvbSAnLi4vLi4vYnVpbGRlci9pbnRlcmFjdGl2ZS9jYW52YXMtcGFuZSdcbmltcG9ydCB7IHNuYXBMZWZ0LCByZXNpemVJdGVtLCBtb3ZlSXRlbSwgaW5zZXJ0SXRlbSB9IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgeyB0eXBlIENoaWxkUmVjdCwgdHlwZSBJTUNoaWxkUmVjdCwgVE9UQUxfQ09MUyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IHsgZmxpcFJvd0l0ZW1Qb3MsIFJPV19TVFlMRSB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgQ29sdW1uSGludCB9IGZyb20gJy4vY29sdW1uLWhpbnQnXG5cbnR5cGUgUm93TGF5b3V0UHJvcHMgPSBMYXlvdXRQcm9wcyAmIHtcbiAgbGF5b3V0OiBJTUxheW91dEpzb25cbiAgdHJhbnNmb3JtZWRMYXlvdXQ6IElNTGF5b3V0SnNvblxuICBpc011bHRpUm93OiBib29sZWFuXG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlXG59XG5cbmNvbnN0IGRyb3BhcmVhU3R5bGUgPSBjc3NgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuYFxuXG5jb25zdCBndWlkZU92ZXJsYXkgPSBjc3NgXG4gICR7ZHJvcGFyZWFTdHlsZX07XG4gIGJvdHRvbTogMDtcbiAgdG9wOiAwO1xuICB6LWluZGV4OiAke0xheW91dFpJbmRleC5EcmFnTW92ZVRpcH07XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuYFxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICAvLyBkcmFnRW50ZXJyZWQ6IGJvb2xlYW47XG4gIGlzUmVzaXppbmc6IGJvb2xlYW5cbiAgdXBkYXRpbmdSZWN0czogSU1DaGlsZFJlY3RbXVxuICBpc0RyYWdvdmVyQ2VudGVyOiBib29sZWFuXG59XG5cbmV4cG9ydCBjbGFzcyBSb3cgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFJvd0xheW91dFByb3BzLCBTdGF0ZT4gaW1wbGVtZW50cyBEcm9wSGFuZGxlcnMge1xuICByZWY6IEhUTUxFbGVtZW50XG4gIGd1aWRlRHJhZ092ZXJSZWY6IEhUTUxDYW52YXNFbGVtZW50XG4gIGNhbnZhc1BhbmU6IENhbnZhc1BhbmVcbiAgYm91bmRpbmdSZWN0OiBDbGllbnRSZWN0XG4gIC8vIGNoaWxkcmVuUmVmOiB7IFtrZXk6IHN0cmluZ106IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD4gfTtcbiAgY2hpbGRSZWN0czogQ2hpbGRSZWN0W11cbiAgZmxpcHBlZENoaWxkUmVjdHM6IENoaWxkUmVjdFtdXG4gIGRvbVJlY3Q6IENsaWVudFJlY3RcbiAgcmVzaXppbmdSZWN0OiBDbGllbnRSZWN0XG4gIHJlZmVyZW5jZUlkOiBzdHJpbmdcbiAgY29sV2lkdGg6IG51bWJlclxuICBkcmFnSW5zZXJ0UG9zOiBudW1iZXJcbiAgLy8gcGFkZGluZ3M6IG51bWJlcltdO1xuICBzcGFjZTogbnVtYmVyXG4gIGZsb3dMYXlvdXRJZDogc3RyaW5nXG4gIG1heFBhZ2VXaWR0aDogbnVtYmVyXG4gIGJ1aWxkZXJUaGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuICBmbGlwTGVmdFJpZ2h0OiBib29sZWFuXG5cbiAgc3RhdGU6IFN0YXRlID0ge1xuICAgIC8vIGRyYWdFbnRlcnJlZDogZmFsc2UsXG4gICAgaXNSZXNpemluZzogZmFsc2UsXG4gICAgdXBkYXRpbmdSZWN0czogbnVsbCxcbiAgICBpc0RyYWdvdmVyQ2VudGVyOiBmYWxzZVxuICB9XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgLy8gdGhpcy5jaGlsZHJlblJlZiA9IHt9O1xuICAgIHV0aWxzLmF1dG9CaW5kSGFuZGxlcnModGhpcywgW1xuICAgICAgJ2hhbmRsZUl0ZW1SZXNpemVTdGFydCcsXG4gICAgICAnaGFuZGxlSXRlbVJlc2l6aW5nJyxcbiAgICAgICdoYW5kbGVJdGVtUmVzaXplRW5kJyxcbiAgICAgICdoYW5kbGVEcm9wJyxcbiAgICAgICdoYW5kbGVEcmFnT3ZlcicsXG4gICAgICAnaGFuZGxlRHJhZ0VudGVyJyxcbiAgICAgICdoYW5kbGVEcmFnTGVhdmUnLFxuICAgICAgJ2hhbmRsZVRvZ2dsZURyYWdvdmVyQ2VudGVyRWZmZWN0J1xuICAgIF0pXG4gICAgdGhpcy5mbGlwTGVmdFJpZ2h0ID0gdXRpbHMuaXNSVEwoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCk6IHZvaWQge1xuICAgIHRoaXMuY2FudmFzUGFuZSA9IG5ldyBDYW52YXNQYW5lKHRoaXMuZ3VpZGVEcmFnT3ZlclJlZilcbiAgfVxuXG4gIGhhbmRsZUl0ZW1SZXNpemVTdGFydCAoaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuZG9tUmVjdCA9IHRoaXMucmVmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzUmVzaXppbmc6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlSXRlbVJlc2l6aW5nIChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGNvbFdpZHRoID0gdGhpcy5kb21SZWN0LndpZHRoIC8gVE9UQUxfQ09MU1xuICAgIGNvbnN0IGRlbHRhWCA9IE1hdGgucm91bmQoeCAvIGNvbFdpZHRoKVxuICAgIGNvbnN0IGRlbHRhVyA9IE1hdGgucm91bmQoZHcgLyBjb2xXaWR0aClcblxuICAgIGNvbnN0IHJlc2l6aW5nUmVjdHMgPSByZXNpemVJdGVtKGlkLCBkZWx0YVgsIGRlbHRhVywgdGhpcy5jaGlsZFJlY3RzKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdXBkYXRpbmdSZWN0czogcmVzaXppbmdSZWN0c1xuICAgIH0pXG4gIH1cblxuICBoYW5kbGVJdGVtUmVzaXplRW5kIChpZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZHc6IG51bWJlciwgZGg6IG51bWJlciwgbGF5b3V0SXRlbTogTGF5b3V0SXRlbUpzb24pOiB2b2lkIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGNvbFdpZHRoID0gdGhpcy5kb21SZWN0LndpZHRoIC8gVE9UQUxfQ09MU1xuICAgIGNvbnN0IGRlbHRhWCA9IE1hdGgucm91bmQoeCAvIGNvbFdpZHRoKVxuICAgIGNvbnN0IGRlbHRhVyA9IE1hdGgucm91bmQoZHcgLyBjb2xXaWR0aClcblxuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgY29uc3QgcmVzaXppbmdSZWN0cyA9IHJlc2l6ZUl0ZW0oaWQsIGRlbHRhWCwgZGVsdGFXLCB0aGlzLmNoaWxkUmVjdHMpXG4gICAgcmVzaXppbmdSZWN0cy5mb3JFYWNoKChyZWN0SXRlbSkgPT4ge1xuICAgICAgY29uc3QgYmJveCA9IGxheW91dC5jb250ZW50W3JlY3RJdGVtLmlkXS5iYm94XG4gICAgICBsZXQgdXBkYXRlZEhlaWdodCA9IGJib3guaGVpZ2h0XG4gICAgICBpZiAocmVjdEl0ZW0uaWQgPT09IGlkKSB7XG4gICAgICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UoYmJveC5oZWlnaHQpKSB7XG4gICAgICAgICAgdXBkYXRlZEhlaWdodCA9IGAkeyhwYXJzZUZsb2F0KHJlY3RJdGVtLmhlaWdodCBhcyBhbnkpICsgKGRoICogMTAwIC8gdGhpcy5kb21SZWN0LmhlaWdodCkpLnRvRml4ZWQoNCl9JWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVkSGVpZ2h0ID0gYCR7TWF0aC5yb3VuZChwYXJzZUZsb2F0KHJlY3RJdGVtLmhlaWdodCBhcyBhbnkpICsgZGgpfXB4YFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCByZWN0OiBhbnkgPSB7XG4gICAgICAgIGxlZnQ6IHJlY3RJdGVtLmxlZnQsXG4gICAgICAgIHdpZHRoOiByZWN0SXRlbS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB1cGRhdGVkSGVpZ2h0XG4gICAgICB9XG4gICAgICBhcHBDb25maWdBY3Rpb24uZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgICAge1xuICAgICAgICAgIGxheW91dElkOiBsYXlvdXQuaWQsXG4gICAgICAgICAgbGF5b3V0SXRlbUlkOiByZWN0SXRlbS5pZFxuICAgICAgICB9LFxuICAgICAgICAnYmJveCcsXG4gICAgICAgIHJlY3RcbiAgICAgIClcbiAgICB9KVxuICAgIGFwcENvbmZpZ0FjdGlvbi5leGVjKClcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNSZXNpemluZzogZmFsc2UsXG4gICAgICB1cGRhdGluZ1JlY3RzOiBudWxsXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZVRvZ2dsZURyYWdvdmVyQ2VudGVyRWZmZWN0ICh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMucmVmZXJlbmNlSWQgPSBudWxsXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLmNvbGxlY3RCb3VuZHMoKVxuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzRHJhZ292ZXJDZW50ZXI6IHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZURyYWdPdmVyIChcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGRyYWdnaW5nRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgY29udGFpbmVyUmVjdDogUGFydGlhbDxDbGllbnRSZWN0PixcbiAgICBpdGVtUmVjdDogUGFydGlhbDxDbGllbnRSZWN0PixcbiAgICBjbGllbnRYOiBudW1iZXIsXG4gICAgY2xpZW50WTogbnVtYmVyXG4gICk6IHZvaWQge1xuICAgIC8vIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGxheW91dEluZm86IExheW91dEluZm8gPSBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbyA/PyB7IGxheW91dElkOiBudWxsIH1cblxuICAgIGNvbnN0IHVwZGF0ZWRSZWN0czogSU1DaGlsZFJlY3RbXSA9IHRoaXMucmVDYWxjdWxhdGVSZWN0cyhcbiAgICAgIGRyYWdnaW5nSXRlbSxcbiAgICAgIGNvbnRhaW5lclJlY3QsXG4gICAgICBpdGVtUmVjdCxcbiAgICAgIGNsaWVudFhcbiAgICApXG4gICAgbGV0IHRhcmdldFJlY3Q6IElNQ2hpbGRSZWN0XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB1cGRhdGVkUmVjdHMuc29tZSgoY2hpbGRSZWN0KSA9PiB7XG4gICAgICBpZiAoY2hpbGRSZWN0LmlkID09IG51bGwgfHwgKGNoaWxkUmVjdC5sYXlvdXRJZCA9PT0gbGF5b3V0SW5mby5sYXlvdXRJZCAmJiBjaGlsZFJlY3QuaWQgPT09IGxheW91dEluZm8ubGF5b3V0SXRlbUlkKSkge1xuICAgICAgICB0YXJnZXRSZWN0ID0gY2hpbGRSZWN0XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBsZXQgYXZhaWxhYmxlID0gdHJ1ZVxuICAgIGxldCBpbnNlcnRQb3MgPSB0YXJnZXRSZWN0LmxlZnRcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB0aGlzLmZsaXBwZWRDaGlsZFJlY3RzLnNvbWUoKGNoaWxkUmVjdCkgPT4ge1xuICAgICAgaWYgKGNoaWxkUmVjdC5sYXlvdXRJZCA9PT0gdGFyZ2V0UmVjdC5sYXlvdXRJZCAmJiBjaGlsZFJlY3QuaWQgPT09IHRhcmdldFJlY3QuaWQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGNoaWxkUmVjdC5sZWZ0IDw9IHRhcmdldFJlY3QubGVmdCAmJiAoY2hpbGRSZWN0LmxlZnQgKyBjaGlsZFJlY3Qud2lkdGgpID4gdGFyZ2V0UmVjdC5sZWZ0KSB7XG4gICAgICAgIGF2YWlsYWJsZSA9IGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAoIWF2YWlsYWJsZSkge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ2hpbGRSZWN0ID0gdXBkYXRlZFJlY3RzLmZpbmQoaXRlbSA9PiBpdGVtLmxheW91dElkID09PSBjaGlsZFJlY3QubGF5b3V0SWQgJiYgaXRlbS5pZCA9PT0gY2hpbGRSZWN0LmlkKVxuICAgICAgICBpZiAodXBkYXRlZENoaWxkUmVjdC5sZWZ0ICsgdXBkYXRlZENoaWxkUmVjdC53aWR0aCA8PSB0YXJnZXRSZWN0LmxlZnQpIHtcbiAgICAgICAgICBpbnNlcnRQb3MgPSBjaGlsZFJlY3QubGVmdCArIGNoaWxkUmVjdC53aWR0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluc2VydFBvcyA9IGNoaWxkUmVjdC5sZWZ0XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMuZHJhZ0luc2VydFBvcyA9IGluc2VydFBvc1xuXG4gICAgdGhpcy5jYW52YXNQYW5lLmNsZWFyKClcbiAgICBpZiAoYXZhaWxhYmxlKSB7XG4gICAgICB0aGlzLmNhbnZhc1BhbmUuZHJhd1JlY3Qoe1xuICAgICAgICBsZWZ0OiBpbnNlcnRQb3MgKiB0aGlzLmNvbFdpZHRoICsgdGhpcy5zcGFjZSAvIDIsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgd2lkdGg6IHRhcmdldFJlY3Qud2lkdGggKiB0aGlzLmNvbFdpZHRoIC0gdGhpcy5zcGFjZSxcbiAgICAgICAgaGVpZ2h0OiBpdGVtUmVjdC5oZWlnaHQgLy8gdXNlIHRoZSByZWFsIGhlaWdodCBvZiBkcmFnZ2luZyBpdGVtXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXN0cmFpbmVkSW5zZXJ0UG9zID0gTWF0aC5taW4oXG4gICAgICAgIGNvbnRhaW5lclJlY3Qud2lkdGggLSB0aGlzLnNwYWNlIC8gMixcbiAgICAgICAgTWF0aC5tYXgoMCwgaW5zZXJ0UG9zICogdGhpcy5jb2xXaWR0aCAtIHRoaXMuc3BhY2UgLyAyKVxuICAgICAgKVxuICAgICAgdGhpcy5jYW52YXNQYW5lLmRyYXdSZWN0KHtcbiAgICAgICAgbGVmdDogcmVzdHJhaW5lZEluc2VydFBvcyxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICB3aWR0aDogMTAsXG4gICAgICAgIGhlaWdodDogY29udGFpbmVyUmVjdC5oZWlnaHRcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlRHJhZ0VudGVyICgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbnZhc1BhbmUuc2V0U2l6ZSh0aGlzLnJlZi5jbGllbnRXaWR0aCwgdGhpcy5yZWYuY2xpZW50SGVpZ2h0KVxuICAgIHRoaXMuY2FudmFzUGFuZS5zZXRDb2xvcihwb2xpc2hlZC5yZ2JhKHRoaXMuYnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNzAwXSwgMC41KSlcbiAgfVxuXG4gIGhhbmRsZURyYWdMZWF2ZSAoKTogdm9pZCB7XG4gICAgdGhpcy5jYW52YXNQYW5lLmNsZWFyKClcbiAgfVxuXG4gIGdldENvbmZpZyAoKTogUm93TGF5b3V0U2V0dGluZyB7XG4gICAgY29uc3QgeyBsYXlvdXQgfSA9IHRoaXMucHJvcHNcbiAgICByZXR1cm4gbGF5b3V0LnNldHRpbmcgPz8gREVGQVVMVF9ST1dfTEFZT1VUX1NFVFRJTkdcbiAgfVxuXG4gIHJlQ2FsY3VsYXRlUmVjdHMgKFxuICAgIGRyYWdnaW5nSXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gICAgY29udGFpbmVyUmVjdDogUGFydGlhbDxDbGllbnRSZWN0PixcbiAgICBpdGVtUmVjdDogUGFydGlhbDxDbGllbnRSZWN0PixcbiAgICBjbGllbnRYOiBudW1iZXJcbiAgKTogSU1DaGlsZFJlY3RbXSB7XG4gICAgY29uc3QgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyA9IGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvID8/IHsgbGF5b3V0SWQ6IG51bGwgfVxuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKVxuICAgIHRoaXMuc3BhY2UgPSBjb25maWcuc3BhY2UgPz8gMFxuICAgIC8vIHRoaXMucGFkZGluZ3MgPSBzdHlsZVV0aWxzLmV4cGFuZFN0eWxlQXJyYXkobG9kYXNoLmdldFZhbHVlKGNvbmZpZywgJ3N0eWxlLnBhZGRpbmcubnVtYmVyJywgWzBdKSk7XG4gICAgLy8gd2lkdGggc2hvdWxkIGFkZCB0aGUgbWFyZ2luTGVmdCBhbmQgbWFyZ2luUmlnaHQsIHdoaWNoIGVxdWFscyB0byB0aGlzLnNwYWNlXG4gICAgY29uc3Qgcm93V2lkdGggPSB0aGlzLm1heFBhZ2VXaWR0aCA+IDAgPyBNYXRoLm1pbih0aGlzLm1heFBhZ2VXaWR0aCwgY29udGFpbmVyUmVjdC53aWR0aCkgOiBjb250YWluZXJSZWN0LndpZHRoXG4gICAgY29uc3QgY3Vyc29yTGVmdCA9IGNsaWVudFggLSAoY29udGFpbmVyUmVjdC53aWR0aCAtIHJvd1dpZHRoKSAvIDJcbiAgICBjb25zdCBpdGVtTGVmdCA9IGl0ZW1SZWN0LmxlZnQgLSAoY29udGFpbmVyUmVjdC53aWR0aCAtIHJvd1dpZHRoKSAvIDJcbiAgICB0aGlzLmNvbFdpZHRoID0gcm93V2lkdGggLyBUT1RBTF9DT0xTXG4gICAgY29uc3QgY3Vyc29yTGVmdEluUm93MSA9IE1hdGgucm91bmQoY3Vyc29yTGVmdCAvIHRoaXMuY29sV2lkdGgpXG4gICAgY29uc3QgaXRlbUxlZnRJblJvdyA9IE1hdGgucm91bmQoaXRlbUxlZnQgLyB0aGlzLmNvbFdpZHRoKVxuICAgIGNvbnN0IHNwYW4gPSBNYXRoLm1heCgxLCBNYXRoLmNlaWwoaXRlbVJlY3Qud2lkdGggLyB0aGlzLmNvbFdpZHRoKSkgLy8gYXQgbGVhc3QgMVxuXG4gICAgY29uc3QgY3Vyc29yTGVmdEluUm93ID0gc25hcExlZnQobGF5b3V0LmlkLCBkcmFnZ2luZ0l0ZW0sIGl0ZW1MZWZ0SW5Sb3csIHNwYW4sIGN1cnNvckxlZnRJblJvdzEsIHRoaXMuZmxpcHBlZENoaWxkUmVjdHMpXG5cbiAgICBpZiAoZHJhZ2dpbmdJdGVtLmlkID09IG51bGwgJiYgdGhpcy5pc0luUm93KGxheW91dEluZm8pKSB7IC8vIG1vdmUgaW4gdGhlIHNhbWUgbGF5b3V0LCBleGNsdWRlIHRoZSBwZW5kaW5nIGl0ZW1cbiAgICAgIHJldHVybiBtb3ZlSXRlbShsYXlvdXRJbmZvLmxheW91dEl0ZW1JZCwgY3Vyc29yTGVmdEluUm93LCB0aGlzLmZsaXBwZWRDaGlsZFJlY3RzKVxuICAgIH1cbiAgICAvLyBkcmFnIGZyb20gZGlmZmVyZW50IGxheW91dCBvciBmcm9tIHdpZGdldCBsaXN0XG4gICAgcmV0dXJuIGluc2VydEl0ZW0oXG4gICAgICB7XG4gICAgICAgIHdpZHRoOiBzcGFuLFxuICAgICAgICBoZWlnaHQ6IGl0ZW1SZWN0LmhlaWdodCxcbiAgICAgICAgbGF5b3V0SWQ6IGxheW91dEluZm8ubGF5b3V0SWQsXG4gICAgICAgIGlkOiBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZFxuICAgICAgfSxcbiAgICAgIGN1cnNvckxlZnRJblJvdyxcbiAgICAgIHRoaXMuZmxpcHBlZENoaWxkUmVjdHNcbiAgICApXG4gIH1cblxuICBoYW5kbGVEcm9wIChcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsXG4gICAgaXRlbVJlY3Q6IENsaWVudFJlY3RcbiAgICAvLyBjbGllbnRYOiBudW1iZXIsXG4gICAgLy8gY2xpZW50WTogbnVtYmVyLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGFwcENvbmZpZ0FjdGlvbiA9IGdldEFwcENvbmZpZ0FjdGlvbigpXG4gICAgY29uc3QgeyBhZGRlZEl0ZW1SZWN0LCBpbnNlcnRJbmRleCwgYXBwQ29uZmlnIH0gPSB0aGlzLmNhbERyb3BQb3NpdGlvbihcbiAgICAgIGFwcENvbmZpZ0FjdGlvbi5hcHBDb25maWcsXG4gICAgICBkcmFnZ2luZ0l0ZW0sXG4gICAgICBjb250YWluZXJSZWN0LFxuICAgICAgaXRlbVJlY3QsXG4gICAgICBmYWxzZVxuICAgIClcblxuICAgIGlmIChhZGRlZEl0ZW1SZWN0ICE9IG51bGwpIHtcbiAgICAgIGFkZEl0ZW1Ub0xheW91dChcbiAgICAgICAgYXBwQ29uZmlnLFxuICAgICAgICBkcmFnZ2luZ0l0ZW0sXG4gICAgICAgIGxheW91dC5pZFxuICAgICAgKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgeyBsYXlvdXRJbmZvLCB1cGRhdGVkQXBwQ29uZmlnIH0gPSByZXN1bHRcbiAgICAgICAgY29uc3Qgc2VydmljZSA9IExheW91dFNlcnZpY2VQcm92aWRlci5nZXRJbnN0YW5jZSgpLmdldFNlcnZpY2VCeVR5cGUoTGF5b3V0VHlwZS5Sb3dMYXlvdXQpXG4gICAgICAgIGNvbnN0IG91dEFwcENvbmZpZyA9IHNlcnZpY2UucHJvY2Vzc0FmdGVySXRlbUFkZGVkKFxuICAgICAgICAgIHVwZGF0ZWRBcHBDb25maWcsXG4gICAgICAgICAgZHJhZ2dpbmdJdGVtLFxuICAgICAgICAgIGxheW91dEluZm8sXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBjb250YWluZXJSZWN0LFxuICAgICAgICAgIGFkZGVkSXRlbVJlY3QsXG4gICAgICAgICAgaW5zZXJ0SW5kZXhcbiAgICAgICAgKVxuXG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5sYXlvdXRDaGFuZ2VkKG91dEFwcENvbmZpZywgbGF5b3V0SW5mbykpXG4gICAgICB9KS5maW5hbGx5KG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5sYXlvdXRDaGFuZ2VkKGFwcENvbmZpZywgZHJhZ2dpbmdJdGVtLmxheW91dEluZm8pKVxuICAgIH1cblxuICAgIHRoaXMuY2FudmFzUGFuZS5jbGVhcigpXG4gICAgLy8gdGhpcy5oaWRlQ29sR3VpZGUoKTtcbiAgfVxuXG4gIGNhbERyb3BQb3NpdGlvbiAoXG4gICAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICAgIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsXG4gICAgaXRlbVJlY3Q6IENsaWVudFJlY3QsXG4gICAgaXNQYXN0ZTogYm9vbGVhblxuICApOiB7IGFkZGVkSXRlbVJlY3Q6IENsaWVudFJlY3QsIGluc2VydEluZGV4OiBudW1iZXIsIGFwcENvbmZpZzogSU1BcHBDb25maWcgfSB7XG4gICAgLy8gY29uc3QgY2xpZW50WCA9IGl0ZW1SZWN0LmxlZnQ7XG4gICAgY29uc3Qgcm93V2lkdGggPSB0aGlzLm1heFBhZ2VXaWR0aCA+IDAgPyBNYXRoLm1pbih0aGlzLm1heFBhZ2VXaWR0aCwgY29udGFpbmVyUmVjdC53aWR0aCkgOiBjb250YWluZXJSZWN0LndpZHRoXG4gICAgLy8gY29uc3QgY3Vyc29yTGVmdCA9IGNsaWVudFggLSAoY29udGFpbmVyUmVjdC53aWR0aCAtIHJvd1dpZHRoKSAvIDI7XG4gICAgLy8gY29uc3QgaXRlbUxlZnQgPSBpdGVtUmVjdC5sZWZ0IC0gKGNvbnRhaW5lclJlY3Qud2lkdGggLSByb3dXaWR0aCkgLyAyO1xuXG4gICAgY29uc3QgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyA9IGRyYWdnaW5nSXRlbS5sYXlvdXRJbmZvID8/IHsgbGF5b3V0SWQ6IG51bGwgfVxuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgY29sV2lkdGggPSByb3dXaWR0aCAvIFRPVEFMX0NPTFNcbiAgICAvLyBsZXQgY3Vyc29yTGVmdEluUm93ID0gTWF0aC5yb3VuZChjdXJzb3JMZWZ0IC8gY29sV2lkdGgpO1xuICAgIGNvbnN0IGN1cnNvckxlZnRJblJvdyA9IHRoaXMuZHJhZ0luc2VydFBvc1xuICAgIC8vIGNvbnN0IGl0ZW1MZWZ0SW5Sb3cgPSBNYXRoLnJvdW5kKGl0ZW1MZWZ0IC8gdGhpcy5jb2xXaWR0aCk7XG4gICAgY29uc3Qgc3BhbiA9IE1hdGgubWF4KDEsIE1hdGguY2VpbChpdGVtUmVjdC53aWR0aCAvIGNvbFdpZHRoKSkgLy8gYXQgbGVhc3QgMVxuXG4gICAgLy8gY3Vyc29yTGVmdEluUm93ID0gc25hcExlZnQobGF5b3V0LmlkLCBkcmFnZ2luZ0l0ZW0sIGl0ZW1MZWZ0SW5Sb3csIHNwYW4sIGN1cnNvckxlZnRJblJvdywgdGhpcy5mbGlwcGVkQ2hpbGRSZWN0cyk7XG5cbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSBnZXRBcHBDb25maWdBY3Rpb24oYXBwQ29uZmlnKVxuXG4gICAgbGV0IHVwZGF0ZWRSZWN0czogSU1DaGlsZFJlY3RbXVxuICAgIGlmICghaXNQYXN0ZSAmJiBkcmFnZ2luZ0l0ZW0uaWQgPT0gbnVsbCAmJiB0aGlzLmlzSW5Sb3cobGF5b3V0SW5mbykpIHsgLy8gbW92ZSBpbiB0aGUgc2FtZSByb3dcbiAgICAgIHVwZGF0ZWRSZWN0cyA9IG1vdmVJdGVtKGxheW91dEluZm8ubGF5b3V0SXRlbUlkLCBjdXJzb3JMZWZ0SW5Sb3csIHRoaXMuZmxpcHBlZENoaWxkUmVjdHMpXG4gICAgfSBlbHNlIHsgLy8gZHJhZyBmcm9tIGRpZmZlcmVudCBsYXlvdXQgb3IgZnJvbSB3aWRnZXQgbGlzdFxuICAgICAgdXBkYXRlZFJlY3RzID0gaW5zZXJ0SXRlbShcbiAgICAgICAge1xuICAgICAgICAgIHdpZHRoOiBzcGFuLFxuICAgICAgICAgIGhlaWdodDogaXRlbVJlY3QuaGVpZ2h0LFxuICAgICAgICAgIGxheW91dElkOiBsYXlvdXRJbmZvLmxheW91dElkLFxuICAgICAgICAgIGlkOiBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZFxuICAgICAgICB9LFxuICAgICAgICBjdXJzb3JMZWZ0SW5Sb3csXG4gICAgICAgIHRoaXMuZmxpcHBlZENoaWxkUmVjdHNcbiAgICAgIClcbiAgICB9XG5cbiAgICBsZXQgYWRkZWRJdGVtUmVjdFxuICAgIGxldCBpbnNlcnRJbmRleFxuICAgIHVwZGF0ZWRSZWN0cy5mb3JFYWNoKChyZWN0SXRlbSwgaW5kZXgpID0+IHtcbiAgICAgIGxldCByZWN0OiBhbnkgPSB7XG4gICAgICAgIGxlZnQ6IHJlY3RJdGVtLmxlZnQsXG4gICAgICAgIHdpZHRoOiByZWN0SXRlbS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiByZWN0SXRlbS5oZWlnaHRcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZsaXBMZWZ0UmlnaHQpIHtcbiAgICAgICAgcmVjdCA9IGZsaXBSb3dJdGVtUG9zKHJlY3QgYXMgQm91bmRpbmdCb3gpXG4gICAgICB9XG4gICAgICBpZiAocmVjdEl0ZW0ubGF5b3V0SWQgPT09IGxheW91dC5pZCkgeyAvLyBpdGVtIHRoYXQgaXMgaW4gdGhlIHNhbWUgbGF5b3V0XG4gICAgICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0TGF5b3V0SXRlbVByb3BlcnR5KFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxheW91dElkOiByZWN0SXRlbS5sYXlvdXRJZCxcbiAgICAgICAgICAgIGxheW91dEl0ZW1JZDogcmVjdEl0ZW0uaWRcbiAgICAgICAgICB9LFxuICAgICAgICAgICdiYm94JyxcbiAgICAgICAgICByZWN0XG4gICAgICAgIClcbiAgICAgICAgaWYgKHJlY3RJdGVtLmlkID09PSBkcmFnZ2luZ0l0ZW0ubGF5b3V0SW5mbz8ubGF5b3V0SXRlbUlkICYmIGRyYWdnaW5nSXRlbS5pZCAhPSBudWxsKSB7XG4gICAgICAgICAgLy8gc2V0IHBlbmRpbmcgdG8gZmFsc2VcbiAgICAgICAgICBhcHBDb25maWdBY3Rpb24uc2V0TGF5b3V0SXRlbVRvUGVuZGluZyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGF5b3V0SWQ6IHJlY3RJdGVtLmxheW91dElkLFxuICAgICAgICAgICAgICBsYXlvdXRJdGVtSWQ6IHJlY3RJdGVtLmlkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZpcnN0SW5kZXhJblJvdyA9IDBcbiAgICAgICAgYWRkZWRJdGVtUmVjdCA9IHJlY3RcbiAgICAgICAgaW5zZXJ0SW5kZXggPSBmaXJzdEluZGV4SW5Sb3cgKyBpbmRleFxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4geyBhZGRlZEl0ZW1SZWN0LCBpbnNlcnRJbmRleCwgYXBwQ29uZmlnOiBhcHBDb25maWdBY3Rpb24uYXBwQ29uZmlnIH1cbiAgfVxuXG4gIGlzSW5Sb3cgKGxheW91dEluZm86IExheW91dEluZm8pOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIHJldHVybiBsYXlvdXRJbmZvPy5sYXlvdXRJZCA9PT0gbGF5b3V0LmlkXG4gIH1cblxuICBjb2xsZWN0Qm91bmRzICgpOiBDaGlsZFJlY3RbXSB7XG4gICAgY29uc3QgeyB0cmFuc2Zvcm1lZExheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0cmFuc2Zvcm1lZExheW91dC5vcmRlciA/PyBbXVxuICAgIHRoaXMuY2hpbGRSZWN0cyA9IFtdXG5cbiAgICBjb250ZW50LmZvckVhY2goKGl0ZW1JZCkgPT4ge1xuICAgICAgaWYgKHRyYW5zZm9ybWVkTGF5b3V0LmNvbnRlbnRbaXRlbUlkXS5pc1BlbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBiYm94ID0gdHJhbnNmb3JtZWRMYXlvdXQuY29udGVudD8uW2l0ZW1JZF0/LmJib3hcbiAgICAgIGlmIChiYm94ICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5jaGlsZFJlY3RzLnB1c2goe1xuICAgICAgICAgIGxheW91dElkOiB0cmFuc2Zvcm1lZExheW91dC5pZCxcbiAgICAgICAgICBpZDogaXRlbUlkLFxuICAgICAgICAgIGxlZnQ6IHBhcnNlSW50KGJib3gubGVmdCwgMTApLFxuICAgICAgICAgIHdpZHRoOiBwYXJzZUludChiYm94LndpZHRoLCAxMCksXG4gICAgICAgICAgaGVpZ2h0OiBiYm94LmhlaWdodCBhcyBhbnlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMuY2hpbGRSZWN0cy5zb3J0KChhLCBiKSA9PiBhLmxlZnQgLSBiLmxlZnQpXG5cbiAgICBpZiAodGhpcy5mbGlwTGVmdFJpZ2h0KSB7XG4gICAgICB0aGlzLmZsaXBwZWRDaGlsZFJlY3RzID0gW11cbiAgICAgIHRoaXMuY2hpbGRSZWN0cy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGxldCByZWN0OiBhbnkgPSB7XG4gICAgICAgICAgbGVmdDogaXRlbS5sZWZ0LFxuICAgICAgICAgIHdpZHRoOiBpdGVtLndpZHRoLFxuICAgICAgICAgIGhlaWdodDogaXRlbS5oZWlnaHRcbiAgICAgICAgfVxuICAgICAgICByZWN0ID0gZmxpcFJvd0l0ZW1Qb3MocmVjdCBhcyBCb3VuZGluZ0JveClcbiAgICAgICAgdGhpcy5mbGlwcGVkQ2hpbGRSZWN0cy5wdXNoKHtcbiAgICAgICAgICBsYXlvdXRJZDogaXRlbS5sYXlvdXRJZCxcbiAgICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgICBsZWZ0OiByZWN0LmxlZnQsXG4gICAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIHRoaXMuZmxpcHBlZENoaWxkUmVjdHMuc29ydCgoYSwgYikgPT4gYS5sZWZ0IC0gYi5sZWZ0KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZsaXBwZWRDaGlsZFJlY3RzID0gdGhpcy5jaGlsZFJlY3RzXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2hpbGRSZWN0c1xuICB9XG5cbiAgY3JlYXRlSXRlbSAoY2hpbGRSZWN0czogQ2hpbGRSZWN0W10sIGluZGV4OiBudW1iZXIpOiBKU1guRWxlbWVudCB7XG4gICAgY29uc3QgeyB0cmFuc2Zvcm1lZExheW91dCwgaXRlbURyYWdnYWJsZSwgaXRlbVJlc2l6YWJsZSwgaXRlbVNlbGVjdGFibGUsIGlzTXVsdGlSb3cgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpXG4gICAgY29uc3QgY2hpbGRSZWN0ID0gY2hpbGRSZWN0c1tpbmRleF1cbiAgICBjb25zdCBndXR0ZXIgPSBjb25maWcuc3BhY2UgPz8gMFxuXG4gICAgbGV0IG9mZnNldFxuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgb2Zmc2V0ID0gY2hpbGRSZWN0LmxlZnRcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJldmlvdXNCQm94ID0gY2hpbGRSZWN0c1tpbmRleCAtIDFdXG4gICAgICBvZmZzZXQgPSBjaGlsZFJlY3QubGVmdCAtIHByZXZpb3VzQkJveC5sZWZ0IC0gcHJldmlvdXNCQm94LndpZHRoXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxSb3dJdGVtRm9yQnVpbGRlclxuICAgICAgICBrZXk9e2Ake2NoaWxkUmVjdC5sYXlvdXRJZH1fJHtjaGlsZFJlY3QuaWR9YH1cbiAgICAgICAgb3JkZXI9e2luZGV4ICsgMX1cbiAgICAgICAgb2Zmc2V0PXtvZmZzZXR9XG4gICAgICAgIHNwYW49e2NoaWxkUmVjdC53aWR0aH1cbiAgICAgICAgZ3V0dGVyPXtndXR0ZXJ9XG4gICAgICAgIGlzTXVsdGlSb3c9e2lzTXVsdGlSb3d9XG4gICAgICAgIGJ1aWxkZXJUaGVtZT17dGhpcy5idWlsZGVyVGhlbWV9XG4gICAgICAgIGxheW91dElkPXt0cmFuc2Zvcm1lZExheW91dC5pZH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtjaGlsZFJlY3QuaWR9XG4gICAgICAgIGxheW91dEl0ZW09e3RyYW5zZm9ybWVkTGF5b3V0LmNvbnRlbnRbY2hpbGRSZWN0LmlkXX1cbiAgICAgICAgZHJhZ2dhYmxlPXtpdGVtRHJhZ2dhYmxlfVxuICAgICAgICByZXNpemFibGU9e2l0ZW1SZXNpemFibGV9XG4gICAgICAgIHNlbGVjdGFibGU9e2l0ZW1TZWxlY3RhYmxlfVxuICAgICAgICAvLyBpdGVtRGlzcGxheVNldHRpbmc9e2l0ZW1EaXNwbGF5U2V0dGluZ31cbiAgICAgICAgb25SZXNpemVTdGFydD17dGhpcy5oYW5kbGVJdGVtUmVzaXplU3RhcnR9XG4gICAgICAgIG9uUmVzaXppbmc9e3RoaXMuaGFuZGxlSXRlbVJlc2l6aW5nfVxuICAgICAgICBvblJlc2l6ZUVuZD17dGhpcy5oYW5kbGVJdGVtUmVzaXplRW5kfVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICByZW5kZXIgKCk6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IHRyYW5zZm9ybWVkTGF5b3V0LCBjbGFzc05hbWUgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IGlzUmVzaXppbmcsIGlzRHJhZ292ZXJDZW50ZXIgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpXG4gICAgY29uc3QgaXNEcmFnb3ZlciA9IGlzRHJhZ292ZXJDZW50ZXJcbiAgICBsZXQgY29udGVudDogQ2hpbGRSZWN0W11cbiAgICBpZiAoaXNSZXNpemluZyAmJiB0aGlzLnN0YXRlLnVwZGF0aW5nUmVjdHMgIT0gbnVsbCkge1xuICAgICAgY29udGVudCA9IHRoaXMuc3RhdGUudXBkYXRpbmdSZWN0c1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbGxlY3RCb3VuZHMoKVxuICAgICAgY29udGVudCA9IHRoaXMuY2hpbGRSZWN0c1xuICAgIH1cblxuICAgIGNvbnN0IGd1dHRlciA9IGNvbmZpZy5zcGFjZSA/PyAwXG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhZ2VDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICB7KHByb3BzOiBQYWdlQ29udGV4dFByb3BzKSA9PiB7XG4gICAgICAgICAgdGhpcy5tYXhQYWdlV2lkdGggPSBwcm9wcy5tYXhXaWR0aFxuICAgICAgICAgIHRoaXMuYnVpbGRlclRoZW1lID0gcHJvcHMuYnVpbGRlclRoZW1lXG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3Jvdy1sYXlvdXQnLCBjbGFzc05hbWUsIHsgJ3Jvdy1ydGwnOiB0aGlzLmZsaXBMZWZ0UmlnaHQgfSl9XG4gICAgICAgICAgICAgIGNzcz17Uk9XX1NUWUxFfSBkYXRhLWxheW91dGlkPXt0cmFuc2Zvcm1lZExheW91dC5pZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6ICR7cHJvcHMubWF4V2lkdGggPiAwID8gYCR7cHJvcHMubWF4V2lkdGh9cHhgIDogJ25vbmUnfTtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIHJlZj17ZWwgPT4gKHRoaXMucmVmID0gZWwpfVxuICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogJHstZ3V0dGVyIC8gMn1weDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAkey1ndXR0ZXIgLyAyfXB4O1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgICAgICAucm93IHtcbiAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJHt0aGlzLnByb3BzLmlzTXVsdGlSb3cgPyAnYXV0bycgOiAndW5zZXQnfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAmID4gLmppbXUtd2lkZ2V0LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gJHtndXR0ZXJ9cHgpO1xuICAgICAgICAgICAgICAgICAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8SW50ZXJzZWN0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBtb25pdG9yOiBmYWxzZSB9fT5cbiAgICAgICAgICAgICAgICAgICAgPE9uZUJ5T25lQW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdyb3cgbS0wJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZsZXgtbm93cmFwJzogIXRoaXMucHJvcHMuaXNNdWx0aVJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoLTEwMCc6IGNvbnRlbnQubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgIG9pZD17dHJhbnNmb3JtZWRMYXlvdXQuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1sYXlvdXRpZD17dHJhbnNmb3JtZWRMYXlvdXQuaWR9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8RHJvcEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17ZHJvcGFyZWFTdHlsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHM9e3RoaXMucHJvcHMubGF5b3V0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodERyYWdvdmVyPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VudGVyPXt0aGlzLmhhbmRsZURyYWdFbnRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0xlYXZlPXt0aGlzLmhhbmRsZURyYWdMZWF2ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3RoaXMuaGFuZGxlRHJhZ092ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyb3A9e3RoaXMuaGFuZGxlRHJvcH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlRHJhZ292ZXJFZmZlY3Q9e3RoaXMuaGFuZGxlVG9nZ2xlRHJhZ292ZXJDZW50ZXJFZmZlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICB7Y29udGVudC5tYXAoKF8sIGluZGV4KSA9PiB0aGlzLmNyZWF0ZUl0ZW0oY29udGVudCwgaW5kZXgpKX1cbiAgICAgICAgICAgICAgICAgICAgPC9PbmVCeU9uZUFuaW1hdGlvbj5cbiAgICAgICAgICAgICAgICAgIDwvSW50ZXJzZWN0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICAgICAgICAgIHtjb250ZW50Lmxlbmd0aCA9PT0gMCAmJiB0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgICAgPENvbHVtbkhpbnQgdmlzaWJsZT17aXNEcmFnb3ZlciB8fCBpc1Jlc2l6aW5nfSBidWlsZGVyVGhlbWU9e3Byb3BzLmJ1aWxkZXJUaGVtZX0gZ3V0dGVyPXtndXR0ZXJ9IC8+XG4gICAgICAgICAgICAgICAgICA8Y2FudmFzXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICR7Z3VpZGVPdmVybGF5fTtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAke2lzRHJhZ292ZXIgPyAnYmxvY2snIDogJ25vbmUnfTtcbiAgICAgICAgICAgICAgICAgICAgYH0gcmVmPXtlbCA9PiAodGhpcy5ndWlkZURyYWdPdmVyUmVmID0gZWwpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApXG4gICAgICAgIH19XG4gICAgICA8L1BhZ2VDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWNvbnN0ICovXG5pbXBvcnQge1xuICBJbW11dGFibGUsXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXG4gIHR5cGUgTGF5b3V0SW5mb1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB1dGlscyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IE1JTl9TUEFOLCBUT1RBTF9DT0xTLCB0eXBlIENoaWxkUmVjdCwgdHlwZSBJTUNoaWxkUmVjdCB9IGZyb20gJy4uL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gY2FuRHJvcCAocmVjdHM6IElNQ2hpbGRSZWN0W10pOiBib29sZWFuIHtcbiAgbGV0IHVzZWQgPSAwXG4gIGxldCBiaWdJdGVtcyA9IDBcblxuICByZWN0cy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgIHVzZWQgKz0gaXRlbS53aWR0aFxuICAgIGlmIChpdGVtLndpZHRoID49IDMpIHtcbiAgICAgIGJpZ0l0ZW1zICs9IDFcbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIFRPVEFMX0NPTFMgLSB1c2VkID49IE1JTl9TUEFOIHx8IGJpZ0l0ZW1zID49IFRPVEFMX0NPTFMgLSB1c2VkXG59XG5cbmZ1bmN0aW9uIGluZGV4T2ZDaGlsZFJlY3QgKGlkOiBzdHJpbmcsIHJlY3RzOiBJTUNoaWxkUmVjdFtdKTogbnVtYmVyIHtcbiAgbGV0IGluZGV4ID0gLTFcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIHJlY3RzLnNvbWUoKGl0ZW0sIGlkeCkgPT4ge1xuICAgIGlmIChpdGVtLmlkID09PSBpZCkge1xuICAgICAgaW5kZXggPSBpZHhcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9KVxuICByZXR1cm4gaW5kZXhcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIGluc2VydCBwb3NpdGlvbiB1c2luZyBjdXJyZW50IG1vdXNlIHBvc2l0aW9uXG4gKiBAcGFyYW0gZHJvcHBhYmxlTGF5b3V0SWQgbGF5b3V0SWQgb2YgdGhlIGNvbnRhaW5lclxuICogQHBhcmFtIGRyYWdnaW5nSXRlbVxuICogQHBhcmFtIGl0ZW1MZWZ0IGNvbHVtbiBpbmRleCBvZiB0aGUgaXRlbVxuICogQHBhcmFtIGl0ZW1XaWR0aCBudW0gb2YgY29sdW1uc1xuICogQHBhcmFtIHZhbHVlIGNvbHVtbiBpbmRleCBvZiB0aGUgbW91c2VcbiAqIEBwYXJhbSBhbGxSZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gc25hcExlZnQgKFxuICBkcm9wcGFibGVMYXlvdXRJZDogc3RyaW5nLFxuICBkcmFnZ2luZ0l0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICBpdGVtTGVmdDogbnVtYmVyLFxuICBpdGVtV2lkdGg6IG51bWJlcixcbiAgdmFsdWU6IG51bWJlciwgLy8gY3Vyc29yIGxlZnRcbiAgYWxsUmVjdHM6IENoaWxkUmVjdFtdXG4pOiBudW1iZXIge1xuICBsZXQgbGVmdFxuICBjb25zdCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvID0gZHJhZ2dpbmdJdGVtLmxheW91dEluZm8gPz8geyBsYXlvdXRJZDogbnVsbCB9XG4gIGNvbnN0IHNhbWVMYXlvdXQgPSBsYXlvdXRJbmZvLmxheW91dElkID09PSBkcm9wcGFibGVMYXlvdXRJZFxuICBjb25zdCBjb25mbGljdCA9IGFsbFJlY3RzLnNvbWUoY0l0ZW0gPT4ge1xuICAgIGlmIChzYW1lTGF5b3V0ICYmIGNJdGVtLmlkID09PSBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICAoY0l0ZW0ubGVmdCA+PSBpdGVtTGVmdCAmJiBjSXRlbS5sZWZ0IDwgaXRlbUxlZnQgKyBpdGVtV2lkdGgpIHx8XG4gICAgICAoaXRlbUxlZnQgPj0gY0l0ZW0ubGVmdCAmJiBpdGVtTGVmdCA8IGNJdGVtLmxlZnQgKyBjSXRlbS53aWR0aClcbiAgICApXG4gIH0pXG4gIGlmICghY29uZmxpY3QpIHsgLy8gZW5vdWdoIHNwYWNlXG4gICAgcmV0dXJuIGl0ZW1MZWZ0XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGFsbFJlY3RzLnNvbWUoKGNJdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmIChzYW1lTGF5b3V0ICYmIGNJdGVtLmlkID09PSBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IG1vdXNlSW5DSXRlbSA9IHZhbHVlID49IGNJdGVtLmxlZnQgJiYgdmFsdWUgPD0gY0l0ZW0ubGVmdCArIGNJdGVtLndpZHRoXG5cbiAgICBpZiAobW91c2VJbkNJdGVtKSB7XG4gICAgICBpZiAodmFsdWUgPj0gY0l0ZW0ubGVmdCAmJiB2YWx1ZSA8IGNJdGVtLmxlZnQgKyBjSXRlbS53aWR0aCAvIDIpIHtcbiAgICAgICAgbGVmdCA9IGNJdGVtLmxlZnRcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxlZnQgPSBjSXRlbS5sZWZ0ICsgY0l0ZW0ud2lkdGhcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBpdGVtIHRoYXQgaW50ZXJhY3Qgd2l0aCBkcmFnZ2luZyBpdGVtXG4gICAgICBpZiAoaXRlbUxlZnQgPCBjSXRlbS5sZWZ0ICYmIGl0ZW1MZWZ0ICsgaXRlbVdpZHRoID4gY0l0ZW0ubGVmdCkge1xuICAgICAgICBsZXQgYXZhaWxhYmxlID0gMFxuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICBhdmFpbGFibGUgPSBjSXRlbS5sZWZ0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHByZXZpb3VzSXRlbTogQ2hpbGRSZWN0XG4gICAgICAgICAgZm9yIChsZXQgaiA9IGluZGV4IC0gMTsgaiA+PSAwOyBqIC09IDEpIHtcbiAgICAgICAgICAgIHByZXZpb3VzSXRlbSA9IGFsbFJlY3RzW2pdXG4gICAgICAgICAgICBpZiAoIXNhbWVMYXlvdXQgfHwgcHJldmlvdXNJdGVtLmlkICE9PSBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZCkge1xuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJldmlvdXNJdGVtICE9IG51bGwpIHtcbiAgICAgICAgICAgIGF2YWlsYWJsZSA9IGNJdGVtLmxlZnQgLSAocHJldmlvdXNJdGVtLmxlZnQgKyBwcmV2aW91c0l0ZW0ud2lkdGgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF2YWlsYWJsZSA9IGNJdGVtLmxlZnRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF2YWlsYWJsZSA+PSBpdGVtV2lkdGgpIHtcbiAgICAgICAgICBsZWZ0ID0gY0l0ZW0ubGVmdCAtIGl0ZW1XaWR0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlZnQgPSBjSXRlbS5sZWZ0IC0gYXZhaWxhYmxlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtTGVmdCA+IGNJdGVtLmxlZnQgJiYgaXRlbUxlZnQgPCBjSXRlbS5sZWZ0ICsgY0l0ZW0ud2lkdGgpIHtcbiAgICAgICAgbGVmdCA9IGNJdGVtLmxlZnQgKyBjSXRlbS53aWR0aFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIGxlZnRcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGlkIGlkIG9mIHRoZSBpdGVtIGJlaW5nIHJlc2l6ZWRcbiAqIEBwYXJhbSBkeCBudW0gb2YgY29sdW1ucyByZXNpemVkIGF0IHRoZSBsZWZ0IHNpZGVcbiAqIEBwYXJhbSBkdyBudW0gb2YgY29sdW1ucyByZXNpemVkIGF0IHRoZSByaWdodCBzaWRlXG4gKiBAcGFyYW0gcmVjdHMgYWxsIHJvdyBpdGVtcycgcG9zaXRpb24gYW5kIHNpemVcbiAqL1xuLy8gVE9ETyB1c2UgSW1tdXRhYmxlIElNQ2hpbGRSZWN0XG5leHBvcnQgZnVuY3Rpb24gcmVzaXplSXRlbSAoaWQ6IHN0cmluZywgZHg6IG51bWJlciwgZHc6IG51bWJlciwgYWxsUmVjdHM6IENoaWxkUmVjdFtdKTogSU1DaGlsZFJlY3RbXSB7XG4gIGNvbnN0IHJlY3RzID0gYWxsUmVjdHMubWFwKGl0ZW0gPT4gSW1tdXRhYmxlKGl0ZW0pKVxuICBjb25zdCBpbmRleCA9IGluZGV4T2ZDaGlsZFJlY3QoaWQsIHJlY3RzKVxuXG4gIGlmICh1dGlscy5pc1JUTCgpKSB7XG4gICAgaWYgKGR4ICE9PSAwKSB7XG4gICAgICBkeCA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgZHggPSAtZHdcbiAgICB9XG4gIH1cblxuICBpZiAoZHggPiAwKSB7XG4gICAgLy8gcmVzaXplIGF0IHRoZSBsZWZ0IHNpZGUsIGRlY3JlYXNlIHdpZHRoXG4gICAgY29uc3QgdGFyZ2V0ID0gcmVjdHNbaW5kZXhdXG4gICAgY29uc3QgZGVsdGEgPSBNYXRoLm1pbihkeCwgdGFyZ2V0LndpZHRoIC0gMSlcbiAgICByZWN0c1tpbmRleF0gPSB0YXJnZXQuc2V0KCdsZWZ0JywgdGFyZ2V0LmxlZnQgKyBkZWx0YSkuc2V0KCd3aWR0aCcsIHRhcmdldC53aWR0aCAtIGRlbHRhKVxuICAgIHJldHVybiByZWN0c1xuICB9XG4gIGlmIChkeCA8IDApIHtcbiAgICAvLyByZXNpemUgYXQgdGhlIGxlZnQgc2lkZSwgaW5jcmVhc2Ugd2lkdGhcbiAgICBsZXQgcHJldmlvdXNTaXplID0gMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kZXg7IGkgKz0gMSkge1xuICAgICAgcHJldmlvdXNTaXplICs9IE1hdGgubWluKHJlY3RzW2ldLndpZHRoLCBNSU5fU1BBTilcbiAgICB9XG4gICAgY29uc3QgdG90YWxBdmFpbGFibGUgPSByZWN0c1tpbmRleF0ubGVmdCAtIHByZXZpb3VzU2l6ZVxuICAgIGNvbnN0IHRvRXhwYW5kID0gTWF0aC5hYnMoZHgpXG5cbiAgICBpZiAodG90YWxBdmFpbGFibGUgPiAwKSB7XG4gICAgICBsZXQgZXhwYW5kZWQgPSAwXG4gICAgICAvLyAxLiB1c2UgZ2FwcyBhdmFpbGFibGVcbiAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHJlY3RzW2ldXG4gICAgICAgIGxldCBnYXAgPSAwXG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgIGNvbnN0IHByZXZpb3VzID0gcmVjdHNbaSAtIDFdXG4gICAgICAgICAgZ2FwID0gY3VycmVudC5sZWZ0IC0gKHByZXZpb3VzLmxlZnQgKyBwcmV2aW91cy53aWR0aClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYXAgPSBjdXJyZW50LmxlZnRcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FwID09PSAwKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b01vdmUgPSBleHBhbmRlZCArIGdhcCA+PSB0b0V4cGFuZCA/IHRvRXhwYW5kIC0gZXhwYW5kZWQgOiBnYXBcbiAgICAgICAgcmVjdHNbaW5kZXhdID0gcmVjdHNbaW5kZXhdLnNldCgnd2lkdGgnLCByZWN0c1tpbmRleF0ud2lkdGggKyB0b01vdmUpXG4gICAgICAgIGZvciAobGV0IGogPSBpOyBqIDw9IGluZGV4OyBqICs9IDEpIHtcbiAgICAgICAgICByZWN0c1tqXSA9IHJlY3RzW2pdLnNldCgnbGVmdCcsIHJlY3RzW2pdLmxlZnQgLSB0b01vdmUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhwYW5kZWQgKyBnYXAgPj0gdG9FeHBhbmQpIHtcbiAgICAgICAgICByZXR1cm4gcmVjdHNcbiAgICAgICAgfVxuICAgICAgICBleHBhbmRlZCArPSBnYXBcbiAgICAgIH1cblxuICAgICAgLy8gMi4gY29tcGFjdCBwcmV2aW91cyBpdGVtc1xuICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSByZWN0c1tpXVxuICAgICAgICAgIGNvbnN0IGdhcCA9IGN1cnJlbnQud2lkdGggLSBNSU5fU1BBTlxuICAgICAgICAgIGlmIChnYXAgPD0gMCkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgdG9Nb3ZlID0gZXhwYW5kZWQgKyBnYXAgPj0gdG9FeHBhbmQgPyB0b0V4cGFuZCAtIGV4cGFuZGVkIDogZ2FwXG4gICAgICAgICAgcmVjdHNbaW5kZXhdID0gcmVjdHNbaW5kZXhdLnNldCgnd2lkdGgnLCByZWN0c1tpbmRleF0ud2lkdGggKyB0b01vdmUpXG4gICAgICAgICAgcmVjdHNbaV0gPSBjdXJyZW50LnNldCgnd2lkdGgnLCBjdXJyZW50LndpZHRoIC0gdG9Nb3ZlKVxuICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8PSBpbmRleDsgaiArPSAxKSB7XG4gICAgICAgICAgICByZWN0c1tqXSA9IHJlY3RzW2pdLnNldCgnbGVmdCcsIHJlY3RzW2pdLmxlZnQgLSB0b01vdmUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV4cGFuZGVkICsgZ2FwID49IHRvRXhwYW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjdHNcbiAgICAgICAgICB9XG4gICAgICAgICAgZXhwYW5kZWQgKz0gZ2FwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlY3RzXG4gIH1cblxuICBpZiAoZHcgPCAwKSB7XG4gICAgLy8gcmVzaXplIGF0IHRoZSByaWdodCBzaWRlLCBkZWNyZWFzZSB3aWR0aFxuICAgIGNvbnN0IGRlbHRhID0gTWF0aC5taW4oTWF0aC5hYnMoZHcpLCByZWN0c1tpbmRleF0ud2lkdGggLSAxKVxuICAgIHJlY3RzW2luZGV4XSA9IHJlY3RzW2luZGV4XS5zZXQoJ3dpZHRoJywgcmVjdHNbaW5kZXhdLndpZHRoIC0gZGVsdGEpXG4gICAgcmV0dXJuIHJlY3RzXG4gIH1cblxuICBpZiAoZHcgPiAwKSB7XG4gICAgLy8gcmVzaXplIGF0IHRoZSByaWdodCBzaWRlLCBpbmNyZWFzZSB3aWR0aFxuICAgIGxldCBuZXh0U2l6ZSA9IDBcbiAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgcmVjdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIG5leHRTaXplICs9IE1hdGgubWluKHJlY3RzW2ldLndpZHRoLCBNSU5fU1BBTilcbiAgICB9XG4gICAgY29uc3QgdG90YWxBdmFpbGFibGUgPSBUT1RBTF9DT0xTIC0gKHJlY3RzW2luZGV4XS5sZWZ0ICsgcmVjdHNbaW5kZXhdLndpZHRoKSAtIG5leHRTaXplXG4gICAgY29uc3QgdG9FeHBhbmQgPSBkd1xuXG4gICAgaWYgKHRvdGFsQXZhaWxhYmxlID4gMCkge1xuICAgICAgbGV0IGV4cGFuZGVkID0gMFxuICAgICAgLy8gMS4gdXNlIGdhcHMgYXZhaWxhYmxlXG4gICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCByZWN0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gcmVjdHNbaV1cbiAgICAgICAgbGV0IGdhcCA9IDBcbiAgICAgICAgaWYgKGkgIT09IHJlY3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gcmVjdHNbaSArIDFdXG4gICAgICAgICAgZ2FwID0gbmV4dC5sZWZ0IC0gKGN1cnJlbnQubGVmdCArIGN1cnJlbnQud2lkdGgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2FwID0gVE9UQUxfQ09MUyAtIChjdXJyZW50LmxlZnQgKyBjdXJyZW50LndpZHRoKVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYXAgPT09IDApIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvTW92ZSA9IGV4cGFuZGVkICsgZ2FwID49IHRvRXhwYW5kID8gdG9FeHBhbmQgLSBleHBhbmRlZCA6IGdhcFxuICAgICAgICByZWN0c1tpbmRleF0gPSByZWN0c1tpbmRleF0uc2V0KCd3aWR0aCcsIHJlY3RzW2luZGV4XS53aWR0aCArIHRvTW92ZSlcbiAgICAgICAgZm9yIChsZXQgaiA9IGluZGV4ICsgMTsgaiA8PSBpOyBqICs9IDEpIHtcbiAgICAgICAgICByZWN0c1tqXSA9IHJlY3RzW2pdLnNldCgnbGVmdCcsIHJlY3RzW2pdLmxlZnQgKyB0b01vdmUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhwYW5kZWQgKyBnYXAgPj0gdG9FeHBhbmQpIHtcbiAgICAgICAgICByZXR1cm4gcmVjdHNcbiAgICAgICAgfVxuICAgICAgICBleHBhbmRlZCArPSBnYXBcbiAgICAgIH1cblxuICAgICAgLy8gMi4gY29tcGFjdCBmb2xsb3dpbmcgaXRlbXNcbiAgICAgIGlmIChpbmRleCAhPT0gcmVjdHMubGVuZ3RoIC0gMSkge1xuICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgcmVjdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50ID0gcmVjdHNbaV1cbiAgICAgICAgICBjb25zdCBnYXAgPSBjdXJyZW50LndpZHRoIC0gTUlOX1NQQU5cbiAgICAgICAgICBpZiAoZ2FwIDw9IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHRvTW92ZSA9IGV4cGFuZGVkICsgZ2FwID49IHRvRXhwYW5kID8gdG9FeHBhbmQgLSBleHBhbmRlZCA6IGdhcFxuICAgICAgICAgIHJlY3RzW2luZGV4XSA9IHJlY3RzW2luZGV4XS5zZXQoJ3dpZHRoJywgcmVjdHNbaW5kZXhdLndpZHRoICsgdG9Nb3ZlKVxuICAgICAgICAgIHJlY3RzW2ldID0gY3VycmVudC5zZXQoJ3dpZHRoJywgY3VycmVudC53aWR0aCAtIHRvTW92ZSlcbiAgICAgICAgICBmb3IgKGxldCBqID0gaW5kZXggKyAxOyBqIDw9IGk7IGogKz0gMSkge1xuICAgICAgICAgICAgcmVjdHNbal0gPSByZWN0c1tqXS5zZXQoJ2xlZnQnLCByZWN0c1tqXS5sZWZ0ICsgdG9Nb3ZlKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleHBhbmRlZCArIGdhcCA+PSB0b0V4cGFuZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlY3RzXG4gICAgICAgICAgfVxuICAgICAgICAgIGV4cGFuZGVkICs9IGdhcFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZWN0c1xuICB9XG5cbiAgcmV0dXJuIHJlY3RzXG59XG5cbi8qKlxuICogQHBhcmFtIGlkIGlkIG9mIHRoZSBpdGVtIGJlaW5nIG1vdmVkXG4gKiBAcGFyYW0geCBwb3NpdGlvbiB0byBtb3ZlXG4gKiBAcGFyYW0gcmVjdHMgYWxsIHJvdyBpdGVtcycgcG9zaXRpb24gYW5kIHNpemVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vdmVJdGVtIChpZDogc3RyaW5nLCB4OiBudW1iZXIsIGFsbFJlY3RzOiBDaGlsZFJlY3RbXSk6IElNQ2hpbGRSZWN0W10ge1xuICBjb25zdCByZWN0cyA9IGFsbFJlY3RzLm1hcChpdGVtID0+IEltbXV0YWJsZShpdGVtKSlcbiAgY29uc3QgaW5kZXggPSBpbmRleE9mQ2hpbGRSZWN0KGlkLCByZWN0cylcbiAgY29uc3QgdGFyZ2V0ID0gcmVjdHNbaW5kZXhdXG5cbiAgcmVjdHMuc3BsaWNlKGluZGV4LCAxKSAvLyBjbGVhciB0aGUgc3BhY2UgdGFrZW4gYnkgdGFyZ2V0IGl0ZW1cbiAgcmV0dXJuIGluc2VydEl0ZW0odGFyZ2V0LCB4LCByZWN0cylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEl0ZW0gKHJlY3Q6IENoaWxkUmVjdCwgcG9zOiBudW1iZXIsIGFsbFJlY3RzOiBDaGlsZFJlY3RbXSk6IElNQ2hpbGRSZWN0W10ge1xuICBjb25zdCByZWN0cyA9IGFsbFJlY3RzLm1hcChpdGVtID0+IEltbXV0YWJsZShpdGVtKSlcbiAgbGV0IHRhcmdldCA9IEltbXV0YWJsZShyZWN0KVxuICBjb25zdCB4ID0gTWF0aC5tYXgocG9zLCAwKVxuICB0YXJnZXQgPSB0YXJnZXQuc2V0KCdsZWZ0JywgeClcbiAgaWYgKHJlY3RzID09IG51bGwgfHwgcmVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgdGFyZ2V0ID0gdGFyZ2V0LnNldCgnd2lkdGgnLCBNYXRoLm1pbih0YXJnZXQud2lkdGgsIFRPVEFMX0NPTFMgLSB0YXJnZXQubGVmdCkpXG4gICAgcmV0dXJuIFt0YXJnZXRdXG4gIH1cblxuICBsZXQgaW5zZXJ0SW5kZXggPSByZWN0cy5sZW5ndGggLy8gcmVjdCBpbmRleCB0aGF0IHRhcmdldCB3aWxsIGluc2VydCBiZWZvcmVcbiAgbGV0IGVuZCAvLyB0aGUgcmlnaHQgbW9zdCBjb2x1bW5cbiAgY29uc3QgY2hlY2twb2ludCA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAoaW5zZXJ0SW5kZXggPT09IDApIHtcbiAgICAgIHVzZWQgPSByZWN0c1tpbnNlcnRJbmRleF0ubGVmdFxuICAgICAgZW5kID0gdXNlZFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcmV2aW91cyA9IHJlY3RzW2luc2VydEluZGV4IC0gMV1cbiAgICAgIHVzZWQgPVxuICAgICAgICBpbnNlcnRJbmRleCA8IHJlY3RzLmxlbmd0aFxuICAgICAgICAgID8gcmVjdHNbaW5zZXJ0SW5kZXhdLmxlZnQgLSAocHJldmlvdXMubGVmdCArIHByZXZpb3VzLndpZHRoKVxuICAgICAgICAgIDogVE9UQUxfQ09MUyAtIChwcmV2aW91cy5sZWZ0ICsgcHJldmlvdXMud2lkdGgpXG4gICAgICBlbmQgPSBwcmV2aW91cy5sZWZ0ICsgcHJldmlvdXMud2lkdGggKyB1c2VkXG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIHJlY3RzLnNvbWUoKHIsIGluZGV4KSA9PiB7XG4gICAgaWYgKHggPD0gci5sZWZ0KSB7XG4gICAgICBpbnNlcnRJbmRleCA9IGluZGV4XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfSlcbiAgbGV0IHVzZWQgPSBpbnNlcnRJbmRleCA8IHJlY3RzLmxlbmd0aCA/IHJlY3RzW2luc2VydEluZGV4XS5sZWZ0IC0geCA6IFRPVEFMX0NPTFMgLSB4XG5cbiAgaWYgKHVzZWQgPj0gdGFyZ2V0LndpZHRoKSB7XG4gICAgcmVjdHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCB0YXJnZXQpXG4gICAgcmV0dXJuIHJlY3RzXG4gIH1cblxuICAvLyAwLiBJcyB0aGVyZSBlbm91Z2ggc3BhY2UgYmVmb3JlIHRoZSBpbnNlcnQgcG9zXG4gIGNvbnN0IG9sZFVzZWQgPSB1c2VkXG4gIGNoZWNrcG9pbnQoKVxuICBpZiAodXNlZCA+PSB0YXJnZXQud2lkdGgpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXQuc2V0KCdsZWZ0JywgZW5kIC0gdGFyZ2V0LndpZHRoKVxuICAgIHJlY3RzLnNwbGljZShpbnNlcnRJbmRleCwgMCwgdGFyZ2V0KVxuICAgIHJldHVybiByZWN0c1xuICB9XG4gIHVzZWQgPSBvbGRVc2VkXG5cbiAgLy8gMS4gdGFrZSB0aGUgZm9sbG93aW5nIGdhcHNcbiAgZm9yIChsZXQgaSA9IGluc2VydEluZGV4OyBpIDwgcmVjdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gcmVjdHNbaV1cbiAgICBsZXQgZ2FwID0gMFxuICAgIGlmIChpICE9PSByZWN0cy5sZW5ndGggLSAxKSB7XG4gICAgICBjb25zdCBuZXh0ID0gcmVjdHNbaSArIDFdXG4gICAgICBnYXAgPSBuZXh0LmxlZnQgLSAoY3VycmVudC5sZWZ0ICsgY3VycmVudC53aWR0aClcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FwID0gVE9UQUxfQ09MUyAtIChjdXJyZW50LmxlZnQgKyBjdXJyZW50LndpZHRoKVxuICAgIH1cbiAgICBpZiAoZ2FwID09PSAwKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBjb25zdCB0b01vdmUgPSB1c2VkICsgZ2FwID49IHRhcmdldC53aWR0aCA/IHRhcmdldC53aWR0aCAtIHVzZWQgOiBnYXBcblxuICAgIGZvciAobGV0IGogPSBpbnNlcnRJbmRleDsgaiA8PSBpOyBqICs9IDEpIHtcbiAgICAgIHJlY3RzW2pdID0gcmVjdHNbal0uc2V0KCdsZWZ0JywgcmVjdHNbal0ubGVmdCArIHRvTW92ZSlcbiAgICB9XG5cbiAgICBpZiAodXNlZCArIGdhcCA+PSB0YXJnZXQud2lkdGgpIHtcbiAgICAgIHJlY3RzLnNwbGljZShpbnNlcnRJbmRleCwgMCwgdGFyZ2V0KVxuICAgICAgcmV0dXJuIHJlY3RzXG4gICAgfVxuICAgIHVzZWQgKz0gZ2FwXG4gIH1cbiAgLy8gY2hlY2sgZ2Fwc1xuICBjaGVja3BvaW50KClcblxuICBpZiAodXNlZCA+PSB0YXJnZXQud2lkdGgpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXQuc2V0KCdsZWZ0JywgZW5kIC0gdGFyZ2V0LndpZHRoKVxuICAgIHJlY3RzLnNwbGljZShpbnNlcnRJbmRleCwgMCwgdGFyZ2V0KVxuICAgIHJldHVybiByZWN0c1xuICB9XG5cbiAgLy8gMi4gdGFrZSB0aGUgcHJldmlvdXMgZ2Fwc1xuICBmb3IgKGxldCBpID0gaW5zZXJ0SW5kZXggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSByZWN0c1tpXVxuICAgIGxldCBnYXAgPSAwXG4gICAgaWYgKGkgPiAwKSB7XG4gICAgICBjb25zdCBwcmV2aW91cyA9IHJlY3RzW2kgLSAxXVxuICAgICAgZ2FwID0gY3VycmVudC5sZWZ0IC0gKHByZXZpb3VzLmxlZnQgKyBwcmV2aW91cy53aWR0aClcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FwID0gY3VycmVudC5sZWZ0XG4gICAgfVxuICAgIGlmIChnYXAgPT09IDApIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGNvbnN0IHRvTW92ZSA9IHVzZWQgKyBnYXAgPj0gdGFyZ2V0LndpZHRoID8gdGFyZ2V0LndpZHRoIC0gdXNlZCA6IGdhcFxuXG4gICAgZm9yIChsZXQgaiA9IGk7IGogPD0gaW5zZXJ0SW5kZXggLSAxOyBqICs9IDEpIHtcbiAgICAgIHJlY3RzW2pdID0gcmVjdHNbal0uc2V0KCdsZWZ0JywgcmVjdHNbal0ubGVmdCAtIHRvTW92ZSlcbiAgICB9XG5cbiAgICBpZiAodXNlZCArIGdhcCA+PSB0YXJnZXQud2lkdGgpIHtcbiAgICAgIHRhcmdldCA9IHRhcmdldC5zZXQoJ2xlZnQnLCBlbmQgLSB0YXJnZXQud2lkdGgpXG4gICAgICByZWN0cy5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIHRhcmdldClcbiAgICAgIHJldHVybiByZWN0c1xuICAgIH1cbiAgICB1c2VkICs9IGdhcFxuICB9XG5cbiAgLy8gY2hlY2sgZ2Fwc1xuICBjaGVja3BvaW50KClcblxuICBpZiAodXNlZCA+PSBNSU5fU1BBTikge1xuICAgIHRhcmdldCA9IHRhcmdldC5zZXQoJ2xlZnQnLCBlbmQgLSB1c2VkKS5zZXQoJ3dpZHRoJywgdXNlZClcbiAgICByZWN0cy5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIHRhcmdldClcbiAgICByZXR1cm4gcmVjdHNcbiAgfVxuXG4gIC8vIDMuIGdhcHMgaXMgbm90IGVub3VnaCBmb3IgdGhlIHRhcmdldCByZWN0LCBjb21wYWN0IGZvbGxvd2luZyBpdGVtc1xuICBpZiAoaW5zZXJ0SW5kZXggIT09IHJlY3RzLmxlbmd0aCkge1xuICAgIGZvciAobGV0IGkgPSBpbnNlcnRJbmRleDsgaSA8IHJlY3RzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gcmVjdHNbaV1cbiAgICAgIGNvbnN0IGdhcCA9IGN1cnJlbnQud2lkdGggLSBNSU5fU1BBTlxuICAgICAgaWYgKGdhcCA8PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCB0b01vdmUgPSB1c2VkICsgZ2FwID49IE1JTl9TUEFOID8gTUlOX1NQQU4gLSB1c2VkIDogZ2FwXG4gICAgICByZWN0c1tpXSA9IGN1cnJlbnQuc2V0KCd3aWR0aCcsIGN1cnJlbnQud2lkdGggLSB0b01vdmUpXG4gICAgICBmb3IgKGxldCBqID0gaW5zZXJ0SW5kZXg7IGogPD0gaTsgaiArPSAxKSB7XG4gICAgICAgIHJlY3RzW2pdID0gcmVjdHNbal0uc2V0KCdsZWZ0JywgcmVjdHNbal0ubGVmdCArIHRvTW92ZSlcbiAgICAgIH1cblxuICAgICAgaWYgKHVzZWQgKyBnYXAgPj0gTUlOX1NQQU4pIHtcbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnNldCgnbGVmdCcsIHJlY3RzW2luc2VydEluZGV4XS5sZWZ0IC0gTUlOX1NQQU4pLnNldCgnd2lkdGgnLCBNSU5fU1BBTilcbiAgICAgICAgcmVjdHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCB0YXJnZXQpXG4gICAgICAgIHJldHVybiByZWN0c1xuICAgICAgfVxuICAgICAgdXNlZCArPSBnYXBcbiAgICB9XG4gIH1cblxuICAvLyBjaGVjayBnYXBzXG4gIGNoZWNrcG9pbnQoKVxuXG4gIGlmICh1c2VkID49IE1JTl9TUEFOKSB7XG4gICAgdGFyZ2V0ID0gdGFyZ2V0LnNldCgnbGVmdCcsIGVuZCAtIHVzZWQpLnNldCgnd2lkdGgnLCB1c2VkKVxuICAgIHJlY3RzLnNwbGljZShpbnNlcnRJbmRleCwgMCwgdGFyZ2V0KVxuICAgIHJldHVybiByZWN0c1xuICB9XG5cbiAgLy8gNC4gY29tcGFjdCBwcmV2aW91cyBpdGVtc1xuICBmb3IgKGxldCBpID0gaW5zZXJ0SW5kZXggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSByZWN0c1tpXVxuICAgIGNvbnN0IGdhcCA9IGN1cnJlbnQud2lkdGggLSBNSU5fU1BBTlxuICAgIGlmIChnYXAgPD0gMCkge1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAgY29uc3QgdG9Nb3ZlID0gdXNlZCArIGdhcCA+PSBNSU5fU1BBTiA/IE1JTl9TUEFOIC0gdXNlZCA6IGdhcFxuICAgIHJlY3RzW2ldID0gY3VycmVudC5zZXQoJ3dpZHRoJywgY3VycmVudC53aWR0aCAtIHRvTW92ZSlcbiAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPD0gaW5zZXJ0SW5kZXggLSAxOyBqICs9IDEpIHtcbiAgICAgIHJlY3RzW2pdID0gcmVjdHNbal0uc2V0KCdsZWZ0JywgcmVjdHNbal0ubGVmdCAtIHRvTW92ZSlcbiAgICB9XG5cbiAgICBpZiAodXNlZCArIGdhcCA+PSBNSU5fU1BBTikge1xuICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnNldCgnbGVmdCcsIGVuZCAtIE1JTl9TUEFOKS5zZXQoJ3dpZHRoJywgTUlOX1NQQU4pXG4gICAgICByZWN0cy5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIHRhcmdldClcbiAgICAgIHJldHVybiByZWN0c1xuICAgIH1cbiAgICB1c2VkICs9IGdhcFxuICB9XG5cbiAgcmV0dXJuIHJlY3RzXG59XG4iLCJpbXBvcnQgeyBjc3MsIHR5cGUgU2VyaWFsaXplZFN0eWxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uLy4uL3V0aWxzJ1xuaW1wb3J0IHsgdHlwZSBSb3dMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXRlbVN0eWxlIChcbiAgaXNNdWx0aVJvdzogYm9vbGVhbixcbiAgc2lnbjogbnVtYmVyLFxuICBndXR0ZXI6IG51bWJlcixcbiAgbWVyZ2VkU3R5bGUsXG4gIGl0ZW1TZXR0aW5nOiBSb3dMYXlvdXRJdGVtU2V0dGluZ1xuKTogW1NlcmlhbGl6ZWRTdHlsZXMsIHN0cmluZ10ge1xuICBpZiAoaXNNdWx0aVJvdykge1xuICAgIHJldHVybiBbXG4gICAgICBjc3NgXG4gICAgICAgIHBhZGRpbmc6ICR7Z3V0dGVyIC8gMn1weCAwO1xuICAgICAgICBoZWlnaHQ6ICR7dXRpbHMuZ2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdoZWlnaHQnKX07XG4gICAgICAgIGFsaWduLXNlbGY6ICR7bWVyZ2VkU3R5bGUuYWxpZ25TZWxmfTtcbiAgICAgIGAsXG4gICAgICBpdGVtU2V0dGluZy5vZmZzZXRYICE9PSAwIHx8IGl0ZW1TZXR0aW5nLm9mZnNldFkgIT09IDBcbiAgICAgICAgPyBgdHJhbnNsYXRlKCR7KGl0ZW1TZXR0aW5nLm9mZnNldFggPz8gMCkgKiBzaWdufXB4LCAke2l0ZW1TZXR0aW5nLm9mZnNldFkgPz8gMH1weClgXG4gICAgICAgIDogbnVsbFxuICAgIF1cbiAgfVxuICByZXR1cm4gW1xuICAgIGNzc2BcbiAgICAgIHBhZGRpbmc6IDAgJHtndXR0ZXIgLyAyfXB4O1xuICAgICAgaGVpZ2h0OiAke3V0aWxzLmdldFZhbHVlT2ZCQm94KG1lcmdlZFN0eWxlLCAnaGVpZ2h0Jyl9O1xuICAgICAgYWxpZ24tc2VsZjogJHttZXJnZWRTdHlsZS5hbGlnblNlbGZ9O1xuICAgIGAsXG4gICAgaXRlbVNldHRpbmcub2Zmc2V0WCAhPT0gMCB8fCBpdGVtU2V0dGluZy5vZmZzZXRZICE9PSAwXG4gICAgICA/IGB0cmFuc2xhdGUoJHsoaXRlbVNldHRpbmcub2Zmc2V0WCA/PyAwKSAqIHNpZ259cHgsICR7aXRlbVNldHRpbmcub2Zmc2V0WSA/PyAwfXB4KWBcbiAgICAgIDogbnVsbFxuICBdXG59XG4iLCJpbXBvcnQgeyB0eXBlIFJvd0xheW91dFNldHRpbmcsIHR5cGUgUm93TGF5b3V0SXRlbVNldHRpbmcgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IERpc3RhbmNlVW5pdHMgfSBmcm9tICdqaW11LXVpJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9ST1dfTEFZT1VUX1NFVFRJTkc6IFJvd0xheW91dFNldHRpbmcgPSB7XG4gIHNwYWNlOiAxMCxcbiAgc3R5bGU6IHtcbiAgICBwYWRkaW5nOiB7XG4gICAgICBudW1iZXI6IFsxMCwgMTAsIDEwLCAxMF0sXG4gICAgICB1bml0OiBEaXN0YW5jZVVuaXRzLlBJWEVMXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1JPV19JVEVNX1NFVFRJTkc6IFJvd0xheW91dEl0ZW1TZXR0aW5nID0ge1xuICBoZWlnaHRNb2RlOiAnZml4ZWQnLFxuICBhc3BlY3RSYXRpbzogMSxcbiAgb2Zmc2V0WDogMCxcbiAgb2Zmc2V0WTogMCxcbiAgc3R5bGU6IHtcbiAgICBhbGlnblNlbGY6ICdmbGV4LXN0YXJ0J1xuICB9XG59XG4iLCJpbXBvcnQge1xuICB0eXBlIElNQXBwQ29uZmlnLFxuICB0eXBlIGV4dGVuc2lvblNwZWMsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBJbW11dGFibGUsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBMYXlvdXRUeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCAqIGFzIHNlYXJjaFV0aWxzIGZyb20gJy4uL3NlYXJjaCdcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgVE9UQUxfQ09MUyB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaWRnZXRIZWlnaHQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIHdpZGdldHNTdGF0ZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgd2lkZ2V0SWQ6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgaWYgKHdpZGdldEpzb24gIT0gbnVsbCkge1xuICAgIGNvbnN0IGJyb3dzZXJTaXplTW9kZSA9IHV0aWxzLmdldEN1cnJlbnRTaXplTW9kZSgpXG4gICAgY29uc3QgbWFpblNpemVNb2RlID0gYXBwQ29uZmlnLm1haW5TaXplTW9kZVxuICAgIGNvbnN0IGxheW91dElkID0gd2lkZ2V0SnNvbi5sYXlvdXRzLkRFRkFVTFRbYnJvd3NlclNpemVNb2RlXVxuICAgIGNvbnN0IG1haW5MYXlvdXRJZCA9IHdpZGdldEpzb24ubGF5b3V0cy5ERUZBVUxUW21haW5TaXplTW9kZV1cbiAgICBjb25zdCBsYXlvdXQgPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0gPz8gYXBwQ29uZmlnLmxheW91dHNbbWFpbkxheW91dElkXVxuICAgIGNvbnN0IHBhZGRpbmcgPSBsYXlvdXQuc2V0dGluZz8uc3R5bGU/LnBhZGRpbmc/Lm51bWJlciA/PyBbMF1cbiAgICBjb25zdCBwYWRkaW5nVmFsdWVzID0gdXRpbHMuZXhwYW5kU3R5bGVBcnJheShwYWRkaW5nKVxuICAgIGNvbnN0IHdpZGdldEhlaWdodCA9IHdpZGdldHNTdGF0ZT8uW3dpZGdldElkXT8uaGVpZ2h0ID8/IDBcblxuICAgIGxldCBwdCA9IHBhZGRpbmdWYWx1ZXNbMF1cbiAgICBsZXQgcGIgPSBwYWRkaW5nVmFsdWVzWzJdXG4gICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShwdCkpIHtcbiAgICAgIHB0ID0gdXRpbHMuZnJvbVJhdGlvKHB0LCB3aWRnZXRIZWlnaHQpXG4gICAgfVxuICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UocGIpKSB7XG4gICAgICBwYiA9IHV0aWxzLmZyb21SYXRpbyhwYiwgd2lkZ2V0SGVpZ2h0KVxuICAgIH1cblxuICAgIHJldHVybiB3aWRnZXRIZWlnaHQgLSBwdCAtIHBiXG4gIH1cbiAgcmV0dXJuIDBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodE9mTGF5b3V0SXRlbXMgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICB3aWRnZXRzU3RhdGU6IHsgW2tleTogc3RyaW5nXTogYW55IH0sXG4gIGxheW91dElkOiBzdHJpbmdcbik6IHsgW2tleTogc3RyaW5nXTogeyBoZWlnaHQ/OiBudW1iZXIsIHNldHRpbmc6IGFueSB9IH0ge1xuICBjb25zdCB3aWRnZXRJZCA9IHNlYXJjaFV0aWxzLmdldFdpZGdldElkVGhhdFVzZVRoZUxheW91dElkKGFwcENvbmZpZywgbGF5b3V0SWQpXG4gIGNvbnN0IHdpZGdldEhlaWdodCA9IGdldFdpZGdldEhlaWdodChhcHBDb25maWcsIHdpZGdldHNTdGF0ZSwgd2lkZ2V0SWQpXG4gIGlmICh3aWRnZXRIZWlnaHQgPiAwKSB7XG4gICAgY29uc3Qgcm93TGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgY29uc3QgaXRlbUlkcyA9IHJvd0xheW91dC5vcmRlciA/PyBbXVxuICAgIGNvbnN0IHJlc3VsdCA9IHt9XG5cbiAgICBpdGVtSWRzLmZvckVhY2goaXRlbUlkID0+IHtcbiAgICAgIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtpdGVtSWRdXG4gICAgICByZXN1bHRbaXRlbUlkXSA9IHV0aWxzLmNhbEhlaWdodE9mTGF5b3V0SXRlbSh3aWRnZXRIZWlnaHQsIGxheW91dEl0ZW0pXG4gICAgfSlcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuZXhwb3J0IGNsYXNzIFJvd0xheW91dFRyYW5zZm9ybWVyIGltcGxlbWVudHMgZXh0ZW5zaW9uU3BlYy5MYXlvdXRUcmFuc2Zvcm1lckV4dGVuc2lvbiB7XG4gIGlkID0gJ3Jvdy1sYXlvdXQtdHJhbnNmb3JtZXInXG5cbiAgbGF5b3V0VHlwZSA9IExheW91dFR5cGUuUm93TGF5b3V0XG5cbiAgdHJhbnNmb3JtTGF5b3V0IChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgZnJvbVNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyk6IElNTGF5b3V0SnNvbiB7XG4gICAgaWYgKGZyb21TaXplTW9kZSA9PT0gdG9TaXplTW9kZSkge1xuICAgICAgcmV0dXJuIGxheW91dFxuICAgIH1cblxuICAgIGxldCB1cGRhdGVkTGF5b3V0OiBJTUxheW91dEpzb24gPSBJbW11dGFibGUobGF5b3V0KVxuXG4gICAgaWYgKHRvU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgICAgY29uc3QgaXRlbUhlaWdodHMgPSBnZXRIZWlnaHRPZkxheW91dEl0ZW1zKGFwcENvbmZpZywgd2luZG93LnJ1bnRpbWVJbmZvPy53aWRnZXRzLCBsYXlvdXQuaWQpXG4gICAgICBsZXQgaW5kZXggPSAwXG4gICAgICBjb25zdCBvcmRlciA9IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50ID8/IHt9KS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChsYXlvdXQuY29udGVudFthXS5iYm94LmxlZnQsIDEwKSAtIHBhcnNlSW50KGxheW91dC5jb250ZW50W2JdLmJib3gubGVmdCwgMTApXG4gICAgICB9KVxuICAgICAgb3JkZXIuZm9yRWFjaChpdGVtSWQgPT4ge1xuICAgICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaXRlbUlkXVxuICAgICAgICBpZiAoIWxheW91dEl0ZW0uaXNQZW5kaW5nKSB7XG4gICAgICAgICAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXQuc2V0SW4oWydjb250ZW50JywgaXRlbUlkLCAnYmJveCddLCB7XG4gICAgICAgICAgICBsZWZ0OiBpbmRleCAqIFRPVEFMX0NPTFMsXG4gICAgICAgICAgICB3aWR0aDogVE9UQUxfQ09MUyxcbiAgICAgICAgICAgIGhlaWdodDogbGF5b3V0SXRlbS5iYm94Py5oZWlnaHQgPz8gJ2F1dG8nXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAoaXRlbUhlaWdodHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyA/PyBJbW11dGFibGUoe30pXG4gICAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dFxuICAgICAgICAgICAgICAuc2V0SW4oWydjb250ZW50JywgaXRlbUlkLCAnYmJveCcsICdoZWlnaHQnXSwgaXRlbUhlaWdodHNbaXRlbUlkXS5oZWlnaHQpXG4gICAgICAgICAgICAgIC5zZXRJbihbJ2NvbnRlbnQnLCBpdGVtSWQsICdzZXR0aW5nJ10sIHNldHRpbmcubWVyZ2UoaXRlbUhlaWdodHNbaXRlbUlkXS5zZXR0aW5nKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXggKz0gMVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiB1cGRhdGVkTGF5b3V0XG4gIH1cblxuICB0cmFuc2Zvcm1MYXlvdXRJdGVtIChcbiAgICBpdGVtOiBJTUxheW91dEl0ZW1Kc29uLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgZnJvbUxheW91dElkOiBzdHJpbmcsXG4gICAgdG9MYXlvdXRJZDogc3RyaW5nLFxuICAgIGZyb21TaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICAgIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuICApOiB7IGl0ZW06IElNTGF5b3V0SXRlbUpzb24sIGluZGV4OiBudW1iZXIgfSB7XG4gICAgcmV0dXJuIHsgaXRlbSwgaW5kZXggfVxuICB9XG59XG4iLCJpbXBvcnQgeyB0eXBlIEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IE1JTl9TUEFOID0gMlxuZXhwb3J0IGNvbnN0IFRPVEFMX0NPTFMgPSAxMlxuXG5leHBvcnQgaW50ZXJmYWNlIENoaWxkUmVjdCB7XG4gIGxheW91dElkPzogc3RyaW5nXG4gIGlkOiBzdHJpbmdcbiAgbGVmdD86IG51bWJlclxuICB3aWR0aDogbnVtYmVyXG4gIGhlaWdodD86IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBJTUNoaWxkUmVjdCA9IEltbXV0YWJsZU9iamVjdDxDaGlsZFJlY3Q+XG4iLCJpbXBvcnQgeyB0eXBlIEJvdW5kaW5nQm94LCB0eXBlIElNQm91bmRpbmdCb3gsIEltbXV0YWJsZSwgY3NzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgVE9UQUxfQ09MUyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyB0eXBlIFJvd0xheW91dEl0ZW1TZXR0aW5nLCBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBST1dfU1RZTEUgPSBjc3NgXG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAub2Zmc2V0LTEge1xuICAgIG1hcmdpbi1sZWZ0OiA4LjMzMzMzJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gIH1cbiAgLm9mZnNldC0yIHtcbiAgICBtYXJnaW4tbGVmdDogMTYuNjY2NjclO1xuICAgIG1hcmdpbi1yaWdodDogMDtcbiAgfVxuICAub2Zmc2V0LTMge1xuICAgIG1hcmdpbi1sZWZ0OiAyNSU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtNCB7XG4gICAgbWFyZ2luLWxlZnQ6IDMzLjMzMzMzJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gIH1cbiAgLm9mZnNldC01IHtcbiAgICBtYXJnaW4tbGVmdDogNDEuNjY2NjclO1xuICAgIG1hcmdpbi1yaWdodDogMDtcbiAgfVxuICAub2Zmc2V0LTYge1xuICAgIG1hcmdpbi1sZWZ0OiA1MCU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtNyB7XG4gICAgbWFyZ2luLWxlZnQ6IDU4LjMzMzMzJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gIH1cbiAgLm9mZnNldC04IHtcbiAgICBtYXJnaW4tbGVmdDogNjYuNjY2NjclO1xuICAgIG1hcmdpbi1yaWdodDogMDtcbiAgfVxuICAub2Zmc2V0LTkge1xuICAgIG1hcmdpbi1sZWZ0OiA3NSU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtMTAge1xuICAgIG1hcmdpbi1sZWZ0OiA4My4zMzMzMyU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtMTEge1xuICAgIG1hcmdpbi1sZWZ0OiA5MS42NjY2NyU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBmbGlwUm93SXRlbVBvcyAoYmJveDogQm91bmRpbmdCb3gpOiBJTUJvdW5kaW5nQm94IHtcbiAgY29uc3QgcmVzdWx0ID0gSW1tdXRhYmxlKGJib3gpXG4gIHJldHVybiByZXN1bHQuc2V0KCdsZWZ0JywgVE9UQUxfQ09MUyAtIHBhcnNlSW50KGJib3gubGVmdCwgMTApIC0gcGFyc2VJbnQoYmJveC53aWR0aCwgMTApKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsSXRlbUhlaWdodCAoaXRlbVNldHRpbmc6IFJvd0xheW91dEl0ZW1TZXR0aW5nLCBiYm94OiBCb3VuZGluZ0JveCwgaXNNdWx0aVJvdzogYm9vbGVhbik6IHsgaGVpZ2h0Pzogc3RyaW5nLCBhbGlnblNlbGY6IHN0cmluZyB9IHtcbiAgaWYgKGlzTXVsdGlSb3cpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVpZ2h0OiBpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvID8gJ2F1dG8nIDogYmJveC5oZWlnaHQsXG4gICAgICBhbGlnblNlbGY6IGl0ZW1TZXR0aW5nLnN0eWxlPy5hbGlnblNlbGYgPz8gJ2ZsZXgtc3RhcnQnXG4gICAgfVxuICB9XG4gIC8vIDEuIGFzcGVjdCByYXRpb1xuICBpZiAoaXRlbVNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJykge1xuICAgIHJldHVybiB7IGFsaWduU2VsZjogaXRlbVNldHRpbmcuc3R5bGU/LmFsaWduU2VsZiA/PyAnZmxleC1zdGFydCcgfVxuICB9XG4gIC8vIDIuIHVzZSBhdXRvUHJvcHMuaGVpZ2h0IGZpcnN0XG4gIGlmIChpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvKSB7XG4gICAgcmV0dXJuIHsgaGVpZ2h0OiAnYXV0bycsIGFsaWduU2VsZjogaXRlbVNldHRpbmcuc3R5bGU/LmFsaWduU2VsZiA/PyAnZmxleC1zdGFydCcgfVxuICB9IGVsc2UgaWYgKGl0ZW1TZXR0aW5nLmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSkge1xuICAgIHJldHVybiB7IGhlaWdodDogYmJveC5oZWlnaHQsIGFsaWduU2VsZjogaXRlbVNldHRpbmcuc3R5bGU/LmFsaWduU2VsZiA/PyAnZmxleC1zdGFydCcgfVxuICB9IGVsc2UgaWYgKGl0ZW1TZXR0aW5nLmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICByZXR1cm4geyBhbGlnblNlbGY6ICdzdHJldGNoJyB9XG4gIH1cbiAgLy8gMy4gYmFjayBjb21wYXRpYmxlLCB1c2Ugc2V0dGluZy5oZWlnaHRNb2RlXG4gIGlmIChpdGVtU2V0dGluZy5oZWlnaHRNb2RlID09PSAnZml0Jykge1xuICAgIHJldHVybiB7IGFsaWduU2VsZjogJ3N0cmV0Y2gnIH1cbiAgfSBlbHNlIGlmIChwYXJzZUZsb2F0KGJib3guaGVpZ2h0KSA+IDApIHtcbiAgICByZXR1cm4geyBoZWlnaHQ6IGJib3guaGVpZ2h0LCBhbGlnblNlbGY6IGl0ZW1TZXR0aW5nLnN0eWxlPy5hbGlnblNlbGYgPz8gJ2ZsZXgtc3RhcnQnIH1cbiAgfVxuXG4gIHJldHVybiB7IGFsaWduU2VsZjogJ3N0cmV0Y2gnIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGdldEFwcFN0b3JlLFxuICB0eXBlIElNU3RhdGUsXG4gIEFwcE1vZGUsXG4gIGFwcEFjdGlvbnMsXG4gIHR5cGUgU2VjdGlvbk5hdkluZm9cbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgREVGQVVMVF9BVVRPUExBWV9JTlRFUlZBTFxufSBmcm9tICcuLi90eXBlcydcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgc2VjdGlvbklkOiBzdHJpbmdcbiAgYXV0b1BsYXk6IGJvb2xlYW5cbiAgaW50ZXJ2YWw6IG51bWJlclxuICBsb29wOiBib29sZWFuXG59XG5cbmZ1bmN0aW9uIG5leHRWaWV3IChzZWN0aW9uSWQ6IHN0cmluZywgbG9vcDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICBjb25zdCBzdGF0ZSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKVxuICBjb25zdCB2aWV3cyA9IHN0YXRlLmFwcENvbmZpZy5zZWN0aW9uc1tzZWN0aW9uSWRdLnZpZXdzXG4gIGxldCBuYXZJbmZvID0gc3RhdGUuYXBwUnVudGltZUluZm8/LnNlY3Rpb25OYXZJbmZvcz8uW3NlY3Rpb25JZF1cbiAgY29uc3QgY3VycmVudEluZGV4ID0gbmF2SW5mbz8uY3VycmVudFZpZXdJZCA/IHZpZXdzLmluZGV4T2YobmF2SW5mby5jdXJyZW50Vmlld0lkKSA6IDBcblxuICBjb25zdCBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggPCB2aWV3cy5sZW5ndGggLSAxID8gY3VycmVudEluZGV4ICsgMSA6IDBcbiAgaWYgKCFsb29wICYmIG5leHRJbmRleCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIC8vIGRvIG5vdCBjaGFuZ2UgcXVlcnlPYmplY3Qgd2hlbiBpdCBpcyBhdXRvIHBsYXlpbmdcbiAgaWYgKG5hdkluZm8pIHtcbiAgICBuYXZJbmZvID0gbmF2SW5mby5zZXQoJ3ByZXZpb3VzVmlld0lkJywgdmlld3NbY3VycmVudEluZGV4XSkuc2V0KCdjdXJyZW50Vmlld0lkJywgdmlld3NbbmV4dEluZGV4XSlcbiAgfSBlbHNlIHtcbiAgICBuYXZJbmZvID0ge1xuICAgICAgcHJldmlvdXNWaWV3SWQ6IHZpZXdzW2N1cnJlbnRJbmRleF0sXG4gICAgICBjdXJyZW50Vmlld0lkOiB2aWV3c1tuZXh0SW5kZXhdXG4gICAgfSBhcyBhbnlcbiAgfVxuICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2VjdGlvbk5hdkluZm9DaGFuZ2VkKHNlY3Rpb25JZCwgbmF2SW5mbyBhcyB1bmtub3duIGFzIFNlY3Rpb25OYXZJbmZvKSlcbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dG9QbGF5IChwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHNlY3Rpb25JZCxcbiAgICBhdXRvUGxheSxcbiAgICBpbnRlcnZhbCA9IERFRkFVTFRfQVVUT1BMQVlfSU5URVJWQUwsXG4gICAgbG9vcCA9IGZhbHNlXG4gIH0gPSBwcm9wc1xuICBjb25zdCBwbGF5SGFuZGxlclJlZiA9IFJlYWN0LnVzZVJlZjxhbnk+KClcblxuICAvLyBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oKTtcbiAgY29uc3QgaXNBdXRvcGxheVN1c3BlbmRNb2RlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBpZiAoIWF1dG9QbGF5KSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gc3RhdGUuYXBwUnVudGltZUluZm8/LmFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduIHx8IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5pc1ByaW50UHJldmlld1xuICB9KVxuICBjb25zdCBtb2RlUmVmID0gUmVhY3QudXNlUmVmKGlzQXV0b3BsYXlTdXNwZW5kTW9kZSlcblxuICBjb25zdCBzdG9wUGxheSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHsgLy8gbm8gaG9va3MgdmFyaWFibGUgdXNlZFxuICAgIGlmIChwbGF5SGFuZGxlclJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhckludGVydmFsKHBsYXlIYW5kbGVyUmVmLmN1cnJlbnQpXG4gICAgICBwbGF5SGFuZGxlclJlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3Qgc3RhcnRQbGF5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHN0b3BQbGF5KCkgLy8gc3RvcCBwcmV2aW91cyBhdXRvIHBsYXlcbiAgICBwbGF5SGFuZGxlclJlZi5jdXJyZW50ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgY29uc3QgY29udGludWVkID0gbmV4dFZpZXcoc2VjdGlvbklkLCBsb29wKVxuICAgICAgaWYgKCFjb250aW51ZWQpIHtcbiAgICAgICAgc3RvcFBsYXkoKVxuICAgICAgfVxuICAgIH0sIGludGVydmFsICogMTAwMClcbiAgfSwgW3NlY3Rpb25JZCwgbG9vcCwgaW50ZXJ2YWwsIHN0b3BQbGF5XSlcblxuICAvLyBhdXRvIHBsYXkgcHJvcHMgY2hhbmdlIGFmZmVjdHNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1vZGVSZWYuY3VycmVudCkge1xuICAgICAgaWYgKCFhdXRvUGxheSkge1xuICAgICAgICBzdG9wUGxheSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgc3RhcnRQbGF5KClcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHN0b3BQbGF5KClcbiAgICB9XG4gIH0sIFthdXRvUGxheSwgaW50ZXJ2YWwsIGxvb3AsIHN0b3BQbGF5LCBzdGFydFBsYXldKVxuXG4gIC8vIGlzRGVzaWduTW9kZSBjaGFuZ2UgYWZmZWN0c1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtb2RlUmVmLmN1cnJlbnQgIT09IGlzQXV0b3BsYXlTdXNwZW5kTW9kZSAmJiBpc0F1dG9wbGF5U3VzcGVuZE1vZGUgIT09IG51bGwpIHtcbiAgICAgIG1vZGVSZWYuY3VycmVudCA9IGlzQXV0b3BsYXlTdXNwZW5kTW9kZVxuICAgICAgaWYgKGlzQXV0b3BsYXlTdXNwZW5kTW9kZSkge1xuICAgICAgICBzdG9wUGxheSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGF1dG9QbGF5KSB7XG4gICAgICAgIHN0YXJ0UGxheSgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbaXNBdXRvcGxheVN1c3BlbmRNb2RlLCBzdGFydFBsYXksIHN0b3BQbGF5LCBhdXRvUGxheV0pXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIEFuaW1hdGlvbkNvbnRleHQsXG4gIEFuaW1hdGlvblBsYXlNb2RlLFxuICBUcmFuc2l0aW9uQ29udGFpbmVyLFxuICB0eXBlIFRyYW5zaXRpb25UeXBlLFxuICB0eXBlIFRyYW5zaXRpb25EaXJlY3Rpb24sXG4gIHR5cGUgSU1TZWN0aW9uTmF2SW5mbyxcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcbiAgdHlwZSBJTVN0YXRlLFxuICBBcHBNb2RlLFxuICBBbmltYXRpb25UeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7XG4gIHR5cGUgTGF5b3V0UHJvcHNcbn0gZnJvbSAnLi4vdHlwZXMnXG5pbXBvcnQgeyBWaWV3Q29udGVudCB9IGZyb20gJy4vdmlldy1jb250ZW50J1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICB2aWV3czogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxuICBuYXZJbmZvOiBJTVNlY3Rpb25OYXZJbmZvXG4gIGFuaW1hdGlvblByZXZpZXc6IGJvb2xlYW5cbiAgcGxheU1vZGU6IEFuaW1hdGlvblBsYXlNb2RlXG4gIGN1cnJlbnRJbmRleDogbnVtYmVyXG4gIHByZXZpb3VzSW5kZXg6IG51bWJlclxuICBwcm9ncmVzczogbnVtYmVyXG4gIGxvb3A6IGJvb2xlYW5cbiAgdmlld1RyYW5zaXRpb246IHsgdHlwZTogVHJhbnNpdGlvblR5cGUsIGRpcmVjdGlvbjogVHJhbnNpdGlvbkRpcmVjdGlvbiB9XG4gIGxheW91dEVudHJ5Q29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRDbGFzczxMYXlvdXRQcm9wcz5cbiAgdmlld1Zpc2liaWxpdHlDb250ZXh0OiBSZWFjdC5Db21wb25lbnRDbGFzc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU2VjdGlvbkNvbnRlbnQgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IHZpZXdzLCBuYXZJbmZvLCBhbmltYXRpb25QcmV2aWV3LCBwbGF5TW9kZSwgY3VycmVudEluZGV4LCBwcmV2aW91c0luZGV4LCBwcm9ncmVzcywgbG9vcCwgdmlld1RyYW5zaXRpb24gfSA9IHByb3BzXG4gIGNvbnN0IGlzUHJldmlld09uZUJ5T25lID0gYW5pbWF0aW9uUHJldmlldyAmJiBwbGF5TW9kZSA9PT0gQW5pbWF0aW9uUGxheU1vZGUuT25lQnlPbmVcbiAgY29uc3QgeyBzZXR0aW5nLCBwbGF5SWQgfSA9IFJlYWN0LnVzZUNvbnRleHQoQW5pbWF0aW9uQ29udGV4dClcbiAgY29uc3QgaXNEZXNpZ25Nb2RlID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBpZiAoIXNldHRpbmcgfHwgc2V0dGluZy50eXBlID09PSBBbmltYXRpb25UeXBlLk5vbmUpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ25cbiAgfSlcbiAgLy8gaXNEZXNpZ25Nb2RlID09PSBmYWxzZVxuICBjb25zdCBhbmltYXRpb25TZXR0aW5nID0gIWlzRGVzaWduTW9kZSB8fCBpc1ByZXZpZXdPbmVCeU9uZSB8fCAobmF2SW5mbz8ucGxheUlkICYmIG5hdkluZm8/LndpdGhPbmVCeU9uZSkgPyBzZXR0aW5nIDogbnVsbFxuICBjb25zdCBhbmltYXRpb25Db250ZXh0ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIHRyaWdnZXI6IEFuaW1hdGlvblRyaWdnZXJUeXBlLk1hbnVhbCxcbiAgICAgIHNldHRpbmc6IGFuaW1hdGlvblNldHRpbmcsXG4gICAgICBwbGF5SWQ6IGlzUHJldmlld09uZUJ5T25lID8gcGxheUlkIDogbnVsbFxuICAgICAgLy8gaW5oZXJpdGVkT25lQnlPbmVTZXR0aW5nOiBudWxsLFxuICAgICAgLy8gZGVwdGg6IGRlcHRoICsgMSxcbiAgICAgIC8vIG9uQW5pbWF0aW9uRW5kXG4gICAgfVxuICB9LCBbYW5pbWF0aW9uU2V0dGluZywgaXNQcmV2aWV3T25lQnlPbmUsIHBsYXlJZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8QW5pbWF0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17YW5pbWF0aW9uQ29udGV4dH0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VjdGlvbi1jb250ZW50Jz5cbiAgICAgICAgPFRyYW5zaXRpb25Db250YWluZXJcbiAgICAgICAgICB1c2VQcm9ncmVzcz17bmF2SW5mbz8udXNlUHJvZ3Jlc3MgPz8gZmFsc2V9XG4gICAgICAgICAgdXNlU3RlcD17bmF2SW5mbz8udXNlU3RlcCA/PyBmYWxzZX1cbiAgICAgICAgICBwcmV2aW91c0luZGV4PXtwcmV2aW91c0luZGV4fVxuICAgICAgICAgIGN1cnJlbnRJbmRleD17Y3VycmVudEluZGV4fVxuICAgICAgICAgIHByb2dyZXNzPXtwcm9ncmVzc31cbiAgICAgICAgICB0cmFuc2l0aW9uVHlwZT17dmlld1RyYW5zaXRpb24/LnR5cGV9XG4gICAgICAgICAgZGlyZWN0aW9uPXt2aWV3VHJhbnNpdGlvbj8uZGlyZWN0aW9ufVxuICAgICAgICAgIHBsYXlJZD17bmF2SW5mbz8ucGxheUlkfVxuICAgICAgICAgIHdpdGhPbmVCeU9uZT17bmF2SW5mbz8ud2l0aE9uZUJ5T25lfVxuICAgICAgICAgIGxvb3A9e2xvb3B9XG4gICAgICAgID5cbiAgICAgICAgICB7dmlld3MubWFwKCh2aWV3SWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzQWN0aXZlID0gdmlld0lkID09PSB2aWV3c1tjdXJyZW50SW5kZXhdXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8Vmlld0NvbnRlbnRcbiAgICAgICAgICAgICAgICBrZXk9e3ZpZXdJZH1cbiAgICAgICAgICAgICAgICB2aWV3SWQ9e3ZpZXdJZH1cbiAgICAgICAgICAgICAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XG4gICAgICAgICAgICAgICAgbGF5b3V0RW50cnlDb21wb25lbnQ9e3Byb3BzLmxheW91dEVudHJ5Q29tcG9uZW50fVxuICAgICAgICAgICAgICAgIHZpZXdWaXNpYmlsaXR5Q29udGV4dD17cHJvcHMudmlld1Zpc2liaWxpdHlDb250ZXh0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pfVxuICAgICAgICA8L1RyYW5zaXRpb25Db250YWluZXI+XG4gICAgICA8L2Rpdj5cbiAgICA8L0FuaW1hdGlvbkNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0J1xuaW1wb3J0IHsgUmlnaHRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHNlY3Rpb25JZDogc3RyaW5nXG4gIGN1cnJlbnRJbmRleDogbnVtYmVyXG4gIG51bU9mVmlld3M6IG51bWJlclxuICBvbkN1cnJlbnRWaWV3Q2hhbmdlOiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2VjdGlvbk5hdiAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgc2VjdGlvbklkLCBjdXJyZW50SW5kZXgsIG51bU9mVmlld3MsIG9uQ3VycmVudFZpZXdDaGFuZ2UgfSA9IHByb3BzXG4gIGNvbnN0IGFycm93c05hdiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy5zZWN0aW9uc1tzZWN0aW9uSWRdPy5hcnJvd3NOYXZcbiAgfSlcbiAgY29uc3QgZG90c05hdiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy5zZWN0aW9uc1tzZWN0aW9uSWRdPy5kb3RzTmF2XG4gIH0pXG4gIGNvbnN0IGRvdHNOYXZQb3NpdGlvbiA9IGRvdHNOYXY/LnBvc2l0aW9uID8/ICdiJ1xuICBjb25zdCBkb3RzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mVmlld3M7IGkrKykge1xuICAgICAgcmVzdWx0LnB1c2goaSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9LCBbbnVtT2ZWaWV3c10pXG5cbiAgY29uc3QgYXJyb3dTdHlsZSA9ICgpID0+IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG5cbiAgICAgICYuZGlzYWJsZWQge1xuICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWxpZ2h0LTQwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJi5maXJzdCB7XG4gICAgICAgIGxlZnQ6ICR7YXJyb3dzTmF2Lm9mZnNldCA/PyAwfXB4O1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuXG4gICAgICAgICYudmVydGljYWwge1xuICAgICAgICAgIHRvcDogJHthcnJvd3NOYXYub2Zmc2V0ID8/IDB9cHg7XG4gICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKSByb3RhdGUoOTBkZWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAmLnNlY29uZCB7XG4gICAgICAgIHJpZ2h0OiAke2Fycm93c05hdi5vZmZzZXQgPz8gMH1weDtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcblxuICAgICAgICAmLnZlcnRpY2FsIHtcbiAgICAgICAgICBib3R0b206ICR7YXJyb3dzTmF2Lm9mZnNldCA/PyAwfXB4O1xuICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICB0b3A6IGF1dG87XG4gICAgICAgICAgcmlnaHQ6IGF1dG87XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHJvdGF0ZSg5MGRlZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBjb25zdCBkb3RTdHlsZSA9ICgpID0+IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiAke2RvdHNOYXZQb3NpdGlvbiA9PT0gJ2wnIHx8IGRvdHNOYXZQb3NpdGlvbiA9PT0gJ3InID8gJ2NvbHVtbicgOiAncm93J307XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5cbiAgICAgIC5kb3Qge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0LTUwMCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LTEwMCk7XG4gICAgICAgIHdpZHRoOiAke2RvdHNOYXYuc2l6ZSA/PyA4fXB4O1xuICAgICAgICBoZWlnaHQ6ICR7ZG90c05hdi5zaXplID8/IDh9cHg7XG5cbiAgICAgICAgJi5hY3RpdmUge1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0td2hpdGUpO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktNTAwKTtcbiAgICAgICAgICB3aWR0aDogJHtkb3RzTmF2LnNpemUgPiAwID8gZG90c05hdi5zaXplICogMS41IDogMTJ9cHg7XG4gICAgICAgICAgaGVpZ2h0OiAke2RvdHNOYXYuc2l6ZSA+IDAgPyBkb3RzTmF2LnNpemUgKiAxLjUgOiAxMn1weDtcbiAgICAgICAgfVxuXG4gICAgICAgICYuZGlzYWJsZWQge1xuICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLnNuYXAtbGVmdCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAke2RvdHNOYXYub2Zmc2V0ID8/IDUwfXB4O1xuICAgICAgICB3aWR0aDogJHtkb3RzTmF2LnNpemUgPz8gOH1weDtcblxuICAgICAgICA+IGRpdjpub3QoOmZpcnN0LW9mLXR5cGUpIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAke2RvdHNOYXYuc3BhY2luZyA/PyAxMH1weDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgJi5zbmFwLXJpZ2h0IHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAke2RvdHNOYXYub2Zmc2V0ID8/IDUwfXB4O1xuICAgICAgICB3aWR0aDogJHtkb3RzTmF2LnNpemUgPz8gOH1weDtcblxuICAgICAgICA+IGRpdjpub3QoOmZpcnN0LW9mLXR5cGUpIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAke2RvdHNOYXYuc3BhY2luZyA/PyAxMH1weDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgJi5zbmFwLXRvcCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB0b3A6ICR7ZG90c05hdi5vZmZzZXQgPz8gNTB9cHg7XG4gICAgICAgIGhlaWdodDogJHtkb3RzTmF2LnNpemUgPz8gOH1weDtcblxuICAgICAgICA+IGRpdjpub3QoOmZpcnN0LW9mLXR5cGUpIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogJHtkb3RzTmF2LnNwYWNpbmcgPz8gMTB9cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICYuc25hcC1ib3R0b20ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgYm90dG9tOiAke2RvdHNOYXYub2Zmc2V0ID8/IDUwfXB4O1xuICAgICAgICBoZWlnaHQ6ICR7ZG90c05hdi5zaXplID8/IDh9cHg7XG5cbiAgICAgICAgPiBkaXY6bm90KDpmaXJzdC1vZi10eXBlKSB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6ICR7ZG90c05hdi5zcGFjaW5nID8/IDEwfXB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgY29uc3QgY3JlYXRlRG90ID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIGlzQWN0aXZlOiBib29sZWFuKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdkb3Qgcm91bmRlZC1jaXJjbGUnLCB7IGFjdGl2ZTogaXNBY3RpdmUsIGRpc2FibGVkOiBudW1PZlZpZXdzIDw9IDEgfSl9XG4gICAgICAgIG9uQ2xpY2s9e2lzQWN0aXZlID8gdW5kZWZpbmVkIDogKCkgPT4geyBvbkN1cnJlbnRWaWV3Q2hhbmdlKGluZGV4KSB9fVxuICAgICAgLz5cbiAgICApXG4gIH0sIFtvbkN1cnJlbnRWaWV3Q2hhbmdlLCBudW1PZlZpZXdzXSlcblxuICBjb25zdCBwcmV2aW91c1ZpZXcgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgbmV4dEluZGV4ID0gY3VycmVudEluZGV4ID4gMCA/IGN1cnJlbnRJbmRleCAtIDEgOiBudW1PZlZpZXdzIC0gMVxuICAgIG9uQ3VycmVudFZpZXdDaGFuZ2UobmV4dEluZGV4KVxuICB9LCBbY3VycmVudEluZGV4LCBudW1PZlZpZXdzLCBvbkN1cnJlbnRWaWV3Q2hhbmdlXSlcblxuICBjb25zdCBuZXh0VmlldyA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggPCBudW1PZlZpZXdzIC0gMSA/IGN1cnJlbnRJbmRleCArIDEgOiAwXG4gICAgb25DdXJyZW50Vmlld0NoYW5nZShuZXh0SW5kZXgpXG4gIH0sIFtjdXJyZW50SW5kZXgsIG51bU9mVmlld3MsIG9uQ3VycmVudFZpZXdDaGFuZ2VdKVxuXG4gIGNvbnN0IGhhc1ByZXZpb3VzVmlldyA9IG51bU9mVmlld3MgPiAxICYmIGN1cnJlbnRJbmRleCAhPT0gMFxuICBjb25zdCBoYXNOZXh0VmlldyA9IG51bU9mVmlld3MgPiAxICYmIGN1cnJlbnRJbmRleCAhPT0gbnVtT2ZWaWV3cyAtIDFcbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICB7YXJyb3dzTmF2Py52aXNpYmxlICYmIChcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYXJyb3dzLW5hdiBmaXJzdCcsIHtcbiAgICAgICAgICAgICAgdmVydGljYWw6IGFycm93c05hdi5kaXJlY3Rpb24gPT09ICd2JyxcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFoYXNQcmV2aW91c1ZpZXdcbiAgICAgICAgICAgIH0pfSBjc3M9e2Fycm93U3R5bGUoKX0gb25DbGljaz17aGFzUHJldmlvdXNWaWV3ID8gcHJldmlvdXNWaWV3IDogbnVsbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8TGVmdE91dGxpbmVkIGF1dG9GbGlwPXthcnJvd3NOYXYuZGlyZWN0aW9uICE9PSAndid9IHNpemU9e2Fycm93c05hdi5zaXplID8/IDI0fS8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdhcnJvd3MtbmF2IHNlY29uZCcsIHtcbiAgICAgICAgICAgICAgdmVydGljYWw6IGFycm93c05hdi5kaXJlY3Rpb24gPT09ICd2JyxcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFoYXNOZXh0Vmlld1xuICAgICAgICAgICAgfSl9IGNzcz17YXJyb3dTdHlsZSgpfSBvbkNsaWNrPXtoYXNOZXh0VmlldyA/IG5leHRWaWV3IDogbnVsbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8UmlnaHRPdXRsaW5lZCBhdXRvRmxpcD17YXJyb3dzTmF2LmRpcmVjdGlvbiAhPT0gJ3YnfSBzaXplPXthcnJvd3NOYXYuc2l6ZSA/PyAyNH0vPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgKX1cbiAgICAgIHtkb3RzTmF2Py52aXNpYmxlICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZG90cy1uYXYnLCB7XG4gICAgICAgICAgICAnc25hcC1sZWZ0JzogZG90c05hdlBvc2l0aW9uID09PSAnbCcsXG4gICAgICAgICAgICAnc25hcC10b3AnOiBkb3RzTmF2UG9zaXRpb24gPT09ICd0JyxcbiAgICAgICAgICAgICdzbmFwLXJpZ2h0JzogZG90c05hdlBvc2l0aW9uID09PSAncicsXG4gICAgICAgICAgICAnc25hcC1ib3R0b20nOiBkb3RzTmF2UG9zaXRpb24gPT09ICdiJ1xuICAgICAgICAgIH0pfSBjc3M9e2RvdFN0eWxlKCl9XG4gICAgICAgID5cbiAgICAgICAgICB7ZG90cy5tYXAoKGluZGV4KSA9PiBjcmVhdGVEb3QoaW5kZXgsIGluZGV4ID09PSBjdXJyZW50SW5kZXgpKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICBnZXRJbmRleEZyb21Qcm9ncmVzcyxcbiAgamltdUhpc3Rvcnlcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgdHlwZSBMYXlvdXRJdGVtUHJvcHMsXG4gIHR5cGUgU2VjdGlvblByb3BzLFxuICB0eXBlIExheW91dFByb3BzLFxuICB0eXBlIFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMsXG4gIERFRkFVTFRfQVVUT1BMQVlfSU5URVJWQUxcbn0gZnJvbSAnLi4vdHlwZXMnXG5pbXBvcnQgeyBzdHlsZVV0aWxzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFNlY3Rpb25Db250ZW50IH0gZnJvbSAnLi9zZWN0aW9uLWNvbnRlbnQnXG5pbXBvcnQgeyBTZWN0aW9uTmF2IH0gZnJvbSAnLi9zZWN0aW9uLW5hdidcbmltcG9ydCB7IHVzZUF1dG9QbGF5IH0gZnJvbSAnLi9zZWN0aW9uLWF1dG8tcGxheSdcblxuaW50ZXJmYWNlIE93blByb3BzIHtcbiAgbGF5b3V0RW50cnlDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudENsYXNzPExheW91dFByb3BzPlxuICB2aWV3VmlzaWJpbGl0eUNvbnRleHQ6IFJlYWN0LkNvbXBvbmVudENsYXNzXG59XG5cbmludGVyZmFjZSBSZW5kZXJJbmZvIHtcbiAgY3VycmVudEluZGV4OiBudW1iZXJcbiAgcHJldmlvdXNJbmRleDogbnVtYmVyXG4gIHByb2dyZXNzOiBudW1iZXJcbn1cblxuLy8gaW50ZXJmYWNlIFN0YXRlIHtcbi8vICAgYXV0b1BsYXk/OiBib29sZWFuO1xuLy8gICBpc1BsYXlpbmc/OiBib29sZWFuO1xuLy8gfVxuXG50eXBlIFByb3BzID0gTGF5b3V0SXRlbVByb3BzICYgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyAmIFNlY3Rpb25Qcm9wcyAmIE93blByb3BzXG5cbmZ1bmN0aW9uIGdldFN0eWxlIChmb3JjZUFzcGVjdFJhdGlvOiBib29sZWFuLCBhc3BlY3RSYXRpbzogbnVtYmVyKSB7XG4gIHJldHVybiBjc3NgXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGFzcGVjdC1yYXRpbzogJHtmb3JjZUFzcGVjdFJhdGlvICYmIGFzcGVjdFJhdGlvID4gMCA/IGFzcGVjdFJhdGlvIDogbnVsbH07XG5cbiAgICAuc2VjdGlvbi1jb250ZW50IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxuXG4gICAgLnNlY3Rpb24tdmlldyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgfVxuXG4gICAgLmhpZGRlbiB7XG4gICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWN0aW9uUmVuZGVyZXJCYXNlIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHZpZXdzLFxuICAgIG5hdkluZm8sXG4gICAgYWN0aXZlVmlldyxcbiAgICBhbmltYXRpb25QcmV2aWV3LFxuICAgIHBsYXlNb2RlLFxuICAgIHRyYW5zaXRpb24sXG4gICAgc2VjdGlvbklkLFxuICAgIGF1dG9QbGF5LFxuICAgIGZvY3VzYWJsZSA9IHRydWUsXG4gICAgaW50ZXJ2YWwgPSBERUZBVUxUX0FVVE9QTEFZX0lOVEVSVkFMLFxuICAgIGxvb3AgPSB0cnVlLFxuICAgIGNsYXNzTmFtZSxcbiAgICBzZWN0aW9uU3R5bGUsXG4gICAgcm90YXRlLFxuICAgIGZvcmNlQXNwZWN0UmF0aW8sXG4gICAgYXNwZWN0UmF0aW8sXG4gICAgbGF5b3V0RW50cnlDb21wb25lbnQsXG4gICAgdmlld1Zpc2liaWxpdHlDb250ZXh0XG4gIH0gPSBwcm9wc1xuICBjb25zdCBjdXJyZW50SW5kZXhSZWYgPSBSZWFjdC51c2VSZWY8bnVtYmVyPigpXG4gIGNvbnN0IHNlY3Rpb25SZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3QgaGFzRm9jdXNSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIGNvbnN0IGlzU2VjdGlvbkZvY3VzZWRSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIGNvbnN0IGJsdXJFdmVudEhhbmRsZXJSZWYgPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgW2ludGVydXB0QXV0b3BsYXksIHNldEludGVydXB0QXV0b3BsYXldID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgYWN0aXZlVmlld0lkID0gYWN0aXZlVmlldz8uaWRcbiAgY29uc3QgcmVuZGVySW5mbyA9IFJlYWN0LnVzZU1lbW8oKCk6IFJlbmRlckluZm8gPT4ge1xuICAgIGxldCB2aXNpYmxlVmlld3MgPSB2aWV3c1xuICAgIGxldCBjdXJyZW50SW5kZXhcbiAgICBsZXQgcHJldmlvdXNJbmRleFxuICAgIGxldCBwcm9ncmVzc1xuXG4gICAgaWYgKG5hdkluZm8pIHtcbiAgICAgIHZpc2libGVWaWV3cyA9IG5hdkluZm8udmlzaWJsZVZpZXdzID8/IHZpZXdzXG4gICAgICBpZiAobmF2SW5mby51c2VQcm9ncmVzcykge1xuICAgICAgICBwcm9ncmVzcyA9IG5hdkluZm8ucHJvZ3Jlc3NcbiAgICAgICAgY29uc3QgciA9IGdldEluZGV4RnJvbVByb2dyZXNzKHByb2dyZXNzLCB2aXNpYmxlVmlld3MubGVuZ3RoKVxuICAgICAgICBjdXJyZW50SW5kZXggPSByLmN1cnJlbnRJbmRleFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudEluZGV4ID0gTWF0aC5tYXgoMCwgdmlzaWJsZVZpZXdzLmluZGV4T2YobmF2SW5mby5jdXJyZW50Vmlld0lkKSlcbiAgICAgICAgaWYgKG5hdkluZm8ucHJldmlvdXNWaWV3SWQpIHtcbiAgICAgICAgICBwcmV2aW91c0luZGV4ID0gTWF0aC5tYXgoMCwgdmlzaWJsZVZpZXdzLmluZGV4T2YobmF2SW5mby5wcmV2aW91c1ZpZXdJZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJldmlvdXNJbmRleCA9IE1hdGgubWF4KDAsIGN1cnJlbnRJbmRleCAtIDEpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyByZW1vdmUgbmF2IGJ5IGFjdGl2ZVZpZXcsIHVzZSBuYXZJbmZvIG9ubHlcbiAgICAgIGN1cnJlbnRJbmRleCA9IE1hdGgubWF4KDAsIHZpc2libGVWaWV3cy5pbmRleE9mKGFjdGl2ZVZpZXdJZCkpXG4gICAgICBwcmV2aW91c0luZGV4ID0gY3VycmVudEluZGV4XG4gICAgfVxuXG4gICAgY3VycmVudEluZGV4UmVmLmN1cnJlbnQgPSBjdXJyZW50SW5kZXhcbiAgICByZXR1cm4geyBjdXJyZW50SW5kZXgsIHByZXZpb3VzSW5kZXgsIHByb2dyZXNzIH1cbiAgfSwgW2FjdGl2ZVZpZXdJZCwgbmF2SW5mbywgdmlld3NdKVxuXG4gIGNvbnN0IHsgdHJhbnNmb3JtLCAuLi5vdGhlclN0eWxlIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc3R5bGVVdGlscy50b0NTU1N0eWxlKHNlY3Rpb25TdHlsZSkgYXMgUmVhY3QuQ1NTUHJvcGVydGllc1xuICB9LCBbc2VjdGlvblN0eWxlXSlcblxuICBjb25zdCByb3RhdGVTdHlsZSA9IHJvdGF0ZSA+IDAgfHwgcm90YXRlIDwgMCA/IGByb3RhdGVaKCR7cm90YXRlfWRlZylgIDogJydcbiAgbGV0IG1lcmdlZFRyYW5zZm9ybSA9IHJvdGF0ZVN0eWxlXG4gIGlmICh0cmFuc2Zvcm0pIHtcbiAgICBtZXJnZWRUcmFuc2Zvcm0gPSBgJHt0cmFuc2Zvcm19ICR7cm90YXRlU3R5bGV9YFxuICB9XG5cbiAgY29uc3Qgb25Nb3VzZUVudGVyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEludGVydXB0QXV0b3BsYXkodHJ1ZSlcbiAgfSwgW10pXG5cbiAgY29uc3Qgb25Nb3VzZUxlYXZlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEludGVydXB0QXV0b3BsYXkoZmFsc2UpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IG9uRm9jdXMgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGhhc0ZvY3VzUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgaXNTZWN0aW9uRm9jdXNlZFJlZi5jdXJyZW50ID0gZS50YXJnZXQgPT09IHNlY3Rpb25SZWYuY3VycmVudFxuICAgIGlmIChibHVyRXZlbnRIYW5kbGVyUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGJsdXJFdmVudEhhbmRsZXJSZWYuY3VycmVudClcbiAgICAgIGJsdXJFdmVudEhhbmRsZXJSZWYuY3VycmVudCA9IG51bGxcbiAgICB9XG4gICAgaWYgKGF1dG9QbGF5KSB7XG4gICAgICBzZXRJbnRlcnVwdEF1dG9wbGF5KHRydWUpXG4gICAgfVxuICB9LCBbYXV0b1BsYXldKVxuXG4gIGNvbnN0IG9uQmx1ciA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgaGFzRm9jdXNSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgaWYgKGJsdXJFdmVudEhhbmRsZXJSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQoYmx1ckV2ZW50SGFuZGxlclJlZi5jdXJyZW50KVxuICAgICAgYmx1ckV2ZW50SGFuZGxlclJlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cbiAgICBpZiAoYXV0b1BsYXkpIHtcbiAgICAgIGJsdXJFdmVudEhhbmRsZXJSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRJbnRlcnVwdEF1dG9wbGF5KGZhbHNlKVxuICAgICAgfSwgNTAwKVxuICAgIH1cbiAgfSwgW2F1dG9QbGF5XSlcblxuICBjb25zdCBpc0F1dG9QbGF5aW5nID0gYXV0b1BsYXkgJiYgIWludGVydXB0QXV0b3BsYXlcblxuICB1c2VBdXRvUGxheSh7XG4gICAgc2VjdGlvbklkLFxuICAgIGludGVydmFsLFxuICAgIGxvb3AsXG4gICAgYXV0b1BsYXk6IGlzQXV0b1BsYXlpbmdcbiAgfSlcblxuICBjb25zdCBvbkN1cnJlbnRWaWV3Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKG5leHRJbmRleDogbnVtYmVyKSA9PiB7XG4gICAgamltdUhpc3RvcnkuY2hhbmdlVmlldyhzZWN0aW9uSWQsIHZpZXdzW25leHRJbmRleF0pXG4gIH0sIFtzZWN0aW9uSWQsIHZpZXdzXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhgc2VjdGlvbi1sYXlvdXQgbGF5b3V0LWl0ZW0tY29udGVudCB3LTEwMCAke3NlY3Rpb25TdHlsZT8uYm94U2hhZG93Py5wcmVzZXRTdHlsZX1gLCBjbGFzc05hbWUpfVxuICAgICAgY3NzPXtnZXRTdHlsZShmb3JjZUFzcGVjdFJhdGlvLCBhc3BlY3RSYXRpbyl9XG4gICAgICBkYXRhLXNlY3Rpb25pZD17c2VjdGlvbklkfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgLi4ub3RoZXJTdHlsZSxcbiAgICAgICAgdHJhbnNmb3JtOiBtZXJnZWRUcmFuc2Zvcm1cbiAgICAgIH19XG4gICAgICBvbk1vdXNlRW50ZXI9e2F1dG9QbGF5ID8gb25Nb3VzZUVudGVyIDogbnVsbH1cbiAgICAgIG9uTW91c2VMZWF2ZT17YXV0b1BsYXkgPyBvbk1vdXNlTGVhdmUgOiBudWxsfVxuICAgICAgb25Ub3VjaFN0YXJ0PXthdXRvUGxheSA/IG9uTW91c2VFbnRlciA6IG51bGx9XG4gICAgICBvblRvdWNoRW5kPXthdXRvUGxheSA/IG9uTW91c2VMZWF2ZSA6IG51bGx9XG4gICAgICBvbkZvY3VzPXtvbkZvY3VzfVxuICAgICAgb25CbHVyPXtvbkJsdXJ9XG4gICAgICB0YWJJbmRleD17Zm9jdXNhYmxlID8gMCA6IHVuZGVmaW5lZH1cbiAgICAgIHJlZj17c2VjdGlvblJlZn1cbiAgICA+XG4gICAgICA8U2VjdGlvbkNvbnRlbnRcbiAgICAgICAgdmlld3M9e3ZpZXdzfVxuICAgICAgICBuYXZJbmZvPXtuYXZJbmZvfVxuICAgICAgICBhbmltYXRpb25QcmV2aWV3PXthbmltYXRpb25QcmV2aWV3fVxuICAgICAgICBwbGF5TW9kZT17cGxheU1vZGV9XG4gICAgICAgIGN1cnJlbnRJbmRleD17cmVuZGVySW5mby5jdXJyZW50SW5kZXh9XG4gICAgICAgIHByZXZpb3VzSW5kZXg9e3JlbmRlckluZm8ucHJldmlvdXNJbmRleH1cbiAgICAgICAgcHJvZ3Jlc3M9e3JlbmRlckluZm8ucHJvZ3Jlc3N9XG4gICAgICAgIGxvb3A9e2lzQXV0b1BsYXlpbmcgJiYgbG9vcH1cbiAgICAgICAgdmlld1RyYW5zaXRpb249e3RyYW5zaXRpb24gYXMgYW55fVxuICAgICAgICBsYXlvdXRFbnRyeUNvbXBvbmVudD17bGF5b3V0RW50cnlDb21wb25lbnR9XG4gICAgICAgIHZpZXdWaXNpYmlsaXR5Q29udGV4dD17dmlld1Zpc2liaWxpdHlDb250ZXh0fVxuICAgICAgLz5cbiAgICAgIDxTZWN0aW9uTmF2XG4gICAgICAgIHNlY3Rpb25JZD17c2VjdGlvbklkfVxuICAgICAgICBudW1PZlZpZXdzPXt2aWV3cy5sZW5ndGh9XG4gICAgICAgIGN1cnJlbnRJbmRleD17cmVuZGVySW5mby5jdXJyZW50SW5kZXh9XG4gICAgICAgIG9uQ3VycmVudFZpZXdDaGFuZ2U9e29uQ3VycmVudFZpZXdDaGFuZ2V9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgRXJyb3JCb3VuZGFyeSxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIElNVmlld0pzb24sXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRQcm9wcyB9IGZyb20gJy4uL3R5cGVzJ1xuLy8gaW1wb3J0IHsgVmlld1Zpc2liaWxpdHlDb250ZXh0IH0gZnJvbSAnLi4vYnVpbGRlci9wYWdlLWNvbnRleHQnO1xuaW1wb3J0IHsgc3R5bGVVdGlscywgdHlwZSBCYWNrZ3JvdW5kU3R5bGUsIEZpbGxUeXBlLCB0eXBlIEltYWdlUGFyYW0sIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tICdqaW11LXRoZW1lJ1xuXG5mdW5jdGlvbiBnZXRCYWNrZ3JvdW5kU3R5bGUgKHZpZXc6IElNVmlld0pzb24sIGJnQ29sb3I6IHN0cmluZykge1xuICBpZiAoIXZpZXcpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGxldCBiYWNrZ3JvdW5kSW1hZ2U6IEltYWdlUGFyYW0gPSB7fVxuICBpZiAodmlldy5iYWNrZ3JvdW5kSU1hZ2UpIHtcbiAgICBiYWNrZ3JvdW5kSW1hZ2UgPSB0eXBlb2Ygdmlldy5iYWNrZ3JvdW5kSU1hZ2UgPT09ICdzdHJpbmcnID8ge30gOiB2aWV3LmJhY2tncm91bmRJTWFnZVxuICB9XG4gIGNvbnN0IGZpbGxUeXBlID0gdmlldy5iYWNrZ3JvdW5kUG9zaXRpb24gPyBGaWxsVHlwZVt2aWV3LmJhY2tncm91bmRQb3NpdGlvbi50b1VwcGVyQ2FzZSgpXSA6IEZpbGxUeXBlLkZJTExcbiAgbGV0IGNvbG9yXG4gIC8vIGZvciBiYWNrIGNvbXBhdGlibGVcbiAgaWYgKHZpZXcuYmFja2dyb3VuZENvbG9yID09IG51bGwpIHtcbiAgICBjb2xvciA9IGJnQ29sb3JcbiAgfSBlbHNlIGlmICh2aWV3LmJhY2tncm91bmRDb2xvciA9PT0gJycpIHtcbiAgICBjb2xvciA9ICd0cmFuc3BhcmVudCdcbiAgfSBlbHNlIHtcbiAgICBjb2xvciA9IHZpZXcuYmFja2dyb3VuZENvbG9yID8gdmlldy5iYWNrZ3JvdW5kQ29sb3IgOiAnJ1xuICB9XG4gIGNvbnN0IGJhY2tncm91bmRDb25maWc6IEJhY2tncm91bmRTdHlsZSA9IHtcbiAgICBjb2xvcixcbiAgICBmaWxsVHlwZTogZmlsbFR5cGUsXG4gICAgaW1hZ2U6IGJhY2tncm91bmRJbWFnZVxuICB9XG4gIHJldHVybiBzdHlsZVV0aWxzLnRvQmFja2dyb3VuZFN0eWxlKGJhY2tncm91bmRDb25maWcpXG59XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHZpZXdJZDogc3RyaW5nXG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIGxheW91dEVudHJ5Q29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRDbGFzczxMYXlvdXRQcm9wcz5cbiAgdmlld1Zpc2liaWxpdHlDb250ZXh0OiBSZWFjdC5Db21wb25lbnRDbGFzc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVmlld0NvbnRlbnQgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IHZpZXdJZCwgaXNBY3RpdmUsIGxheW91dEVudHJ5Q29tcG9uZW50LCB2aWV3VmlzaWJpbGl0eUNvbnRleHQgfSA9IHByb3BzXG4gIGNvbnN0IHZpZXc6IElNVmlld0pzb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWc/LnZpZXdzPy5bdmlld0lkXVxuICB9KVxuICBjb25zdCBiZ0NvbG9yID0gdXNlVGhlbWUoKT8uYm9keT8uYmdcbiAgY29uc3QgTGF5b3V0RW50cnkgPSBsYXlvdXRFbnRyeUNvbXBvbmVudFxuICBjb25zdCBWaWV3VmlzaWJpbGl0eUNvbnRleHQgPSB2aWV3VmlzaWJpbGl0eUNvbnRleHQgYXMgYW55XG4gIGNvbnN0IFtzdGFydGVkLCBzZXRTdGFydGVkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCB2aWV3VmlzaWJpbGl0eSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7IGlzSW5WaWV3OiB0cnVlLCBpc0luQ3VycmVudFZpZXc6IGlzQWN0aXZlIH1cbiAgfSwgW2lzQWN0aXZlXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0FjdGl2ZSAmJiB2aWV3LmxhenlMb2FkICYmICFzdGFydGVkKSB7XG4gICAgICBzZXRTdGFydGVkKHRydWUpXG4gICAgfVxuICB9LCBbaXNBY3RpdmUsIHZpZXcubGF6eUxvYWQsIHN0YXJ0ZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd3LTEwMCBoLTEwMCBkLWZsZXggc2VjdGlvbi12aWV3Jywge1xuICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzQWN0aXZlXG4gICAgICB9KX1cbiAgICAgIHN0eWxlPXtnZXRCYWNrZ3JvdW5kU3R5bGUodmlldywgYmdDb2xvcil9XG4gICAgICBjc3M9e2Nzc2AmLCAuZXhiLWRyb3AtYXJlYSB7IHBvaW50ZXItZXZlbnRzOiAke2lzQWN0aXZlID8gJ2F1dG8nIDogJ25vbmUnfTsgfWB9XG4gICAgICBrZXk9e3ZpZXdJZH1cbiAgICAgIGlkPXtgJHt2aWV3LnBhcmVudH1fJHt2aWV3LmlkfWB9XG4gICAgPlxuICAgICAgeyhzdGFydGVkIHx8ICF2aWV3LmxhenlMb2FkKSAmJiAoXG4gICAgICAgIDxFcnJvckJvdW5kYXJ5PlxuICAgICAgICAgIDxWaWV3VmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZpZXdWaXNpYmlsaXR5fT5cbiAgICAgICAgICAgIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXt2aWV3Py5sYXlvdXR9IGlzSW5TZWN0aW9uIGNsYXNzTmFtZT0ndy0xMDAnIC8+XG4gICAgICAgICAgPC9WaWV3VmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgSU1BcHBDb25maWcsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICB0eXBlIExheW91dEluZm8sXG4gIExheW91dFR5cGUsXG4gIFdpZGdldFR5cGUsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgQ29udGFpbmVyVHlwZSxcbiAgdHlwZSBJTVNpemVNb2RlTGF5b3V0SnNvbixcbiAgdHlwZSBMYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBDb250YWluZXJJbmZvLFxuICBMYXlvdXRQYXJlbnRUeXBlLFxuICBhcHBDb25maWdVdGlsc1xufSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGF5b3V0SXRlbSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IElNTGF5b3V0SXRlbUpzb24ge1xuICBpZiAoIWxheW91dEluZm8pIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICByZXR1cm4gYXBwQ29uZmlnLmxheW91dHM/LltsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG59XG5cbi8qKlxuICogRmluZCBwYXJlbnQgbGF5b3V0IGl0ZW0gaW4gY3VycmVudCBwYWdlLlxuICogQHBhcmFtIGxheW91dEluZm9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRQYXJlbnRMYXlvdXRJbmZvIChcbiAgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IExheW91dEluZm8ge1xuICBjb25zdCB7IGxheW91dElkIH0gPSBsYXlvdXRJbmZvXG4gIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuXG4gIHN3aXRjaCAobGF5b3V0Py5wYXJlbnQ/LnR5cGUpIHtcbiAgICBjYXNlIExheW91dFBhcmVudFR5cGUuVmlldzpcbiAgICB7XG4gICAgICBjb25zdCB2aWV3SnNvbiA9IGFwcENvbmZpZy52aWV3c1tsYXlvdXQucGFyZW50LmlkXVxuICAgICAgY29uc3Qgc2VjdGlvbkpzb24gPSBhcHBDb25maWcuc2VjdGlvbnNbdmlld0pzb24ucGFyZW50XVxuICAgICAgaWYgKHNlY3Rpb25Kc29uPy5wYXJlbnQ/Llticm93c2VyU2l6ZU1vZGVdPy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHNlY3Rpb25Kc29uLnBhcmVudFticm93c2VyU2l6ZU1vZGVdWzBdXG4gICAgICB9XG4gICAgICBpZiAoc2VjdGlvbkpzb24/LnBhcmVudD8uW2Jyb3dzZXJTaXplTW9kZV0/Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRQYXJlbnRMYXlvdXRJbmZvKHNlY3Rpb25Kc29uLnBhcmVudFticm93c2VyU2l6ZU1vZGVdWzBdLCBhcHBDb25maWcsIGJyb3dzZXJTaXplTW9kZSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5XaWRnZXQ6XG4gICAge1xuICAgICAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZy53aWRnZXRzW2xheW91dC5wYXJlbnQuaWRdXG4gICAgICBpZiAod2lkZ2V0SnNvbj8ucGFyZW50Py5bYnJvd3NlclNpemVNb2RlXT8ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB3aWRnZXRKc29uLnBhcmVudFticm93c2VyU2l6ZU1vZGVdWzBdXG4gICAgICB9XG4gICAgICBpZiAod2lkZ2V0SnNvbj8ucGFyZW50Py5bYnJvd3NlclNpemVNb2RlXT8ubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm4gZmluZFBhcmVudExheW91dEluZm8od2lkZ2V0SnNvbi5wYXJlbnRbYnJvd3NlclNpemVNb2RlXVswXSwgYXBwQ29uZmlnLCBicm93c2VyU2l6ZU1vZGUpXG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBjYXNlIExheW91dFBhcmVudFR5cGUuU2NyZWVuOlxuICAgIHtcbiAgICAgIGNvbnN0IHNjcmVlbkpzb24gPSBhcHBDb25maWcuc2NyZWVuc1tsYXlvdXQucGFyZW50LmlkXVxuICAgICAgY29uc3Qgc2dKc29uID0gYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tzY3JlZW5Kc29uLnBhcmVudF1cbiAgICAgIHJldHVybiBzZ0pzb24ucGFyZW50Py5bYnJvd3NlclNpemVNb2RlXVxuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudElkSW5MYXlvdXRJdGVtIChpdGVtOiBJTUxheW91dEl0ZW1Kc29uKTogc3RyaW5nIHtcbiAgc3dpdGNoIChpdGVtLnR5cGUpIHtcbiAgICBjYXNlIExheW91dEl0ZW1UeXBlLldpZGdldDpcbiAgICAgIHJldHVybiB0eXBlb2YgKGl0ZW0ud2lkZ2V0SWQpID09PSAnc3RyaW5nJyA/IGl0ZW0ud2lkZ2V0SWQgOiBudWxsXG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uOlxuICAgICAgcmV0dXJuIHR5cGVvZiAoaXRlbS5zZWN0aW9uSWQpID09PSAnc3RyaW5nJyA/IGl0ZW0uc2VjdGlvbklkIDogbnVsbFxuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXA6XG4gICAgICByZXR1cm4gdHlwZW9mIChpdGVtLnNjcmVlbkdyb3VwSWQpID09PSAnc3RyaW5nJyA/IGl0ZW0uc2NyZWVuR3JvdXBJZCA6IG51bGxcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vKipcbiAqIHJldHVybiB0aGUgY29udGVudCBpZHMgaW4gdGhlIGxheW91dC4gRG8gbm90IGNvbnNpZGVyIHRoZSBlbWJlZGRlZCBsYXlvdXRzXG4gKiBAcGFyYW0gbGF5b3V0SnNvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudHNJbkxheW91dCAobGF5b3V0SnNvbjogSU1MYXlvdXRKc29uLCB0eXBlOiBMYXlvdXRJdGVtVHlwZSwgd2l0aFBlbmRpbmcgPSBmYWxzZSk6IHN0cmluZ1tdIHtcbiAgaWYgKCFsYXlvdXRKc29uPy5jb250ZW50KSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMobGF5b3V0SnNvbi5jb250ZW50KVxuICAgIC5maWx0ZXIoXG4gICAgICBpdGVtSWQgPT5cbiAgICAgICAgbGF5b3V0SnNvbi5jb250ZW50W2l0ZW1JZF0udHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAhIWdldENvbnRlbnRJZEluTGF5b3V0SXRlbShsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXSkgJiZcbiAgICAgICAgKHdpdGhQZW5kaW5nIHx8ICFsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXS5pc1BlbmRpbmcpXG4gICAgKVxuICAgIC5tYXAoaXRlbUlkID0+XG4gICAgICBnZXRDb250ZW50SWRJbkxheW91dEl0ZW0obGF5b3V0SnNvbi5jb250ZW50W2l0ZW1JZF0pXG4gICAgKVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgY29udGVudCBpZHMgaW4gYSBsYXlvdXQsIHNlYXJjaCB0aGUgd2hvbGUgbGF5b3V0IHRyZWUsIGluY2x1ZGluZyB0aGUgbGF5b3V0IHdpZGdldCwgdGhlIG5vcm1hbCB3aWRnZXQgdGhhdCBoYXMgZW1iZWQgbGF5b3V0LCBhbmQgdmlld3MsIHNjcmVlbnMsIGV0Yy5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBsYXlvdXRJZCB0aGUgbGF5b3V0IHRvIHNlYXJjaFxuICogQHBhcmFtIHR5cGUgY29udGVudCB0eXBlXG4gKiBAcGFyYW0gc2l6ZU1vZGUgdGhlIHNpemVNb2RlIHRvIHNlYXJjaFxuICogQHBhcmFtIHdpdGhQZW5kaW5nIHdpbGwgaW5jbHVkZSB0aGUgcGVuZGluZyBjb250ZW50IGlmIHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBsYXlvdXRJZDogc3RyaW5nLFxuICB0eXBlOiBMYXlvdXRJdGVtVHlwZSxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgd2l0aFBlbmRpbmcgPSBmYWxzZVxuKTogc3RyaW5nW10ge1xuICBsZXQgcmV0ID0gW11cbiAgY29uc3Qgd2lkZ2V0SWRzID0gZ2V0Q29udGVudHNJbkxheW91dChhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0sIExheW91dEl0ZW1UeXBlLldpZGdldCwgd2l0aFBlbmRpbmcpXG4gIGNvbnN0IHNlY3Rpb25JZHMgPSBnZXRDb250ZW50c0luTGF5b3V0KGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXSwgTGF5b3V0SXRlbVR5cGUuU2VjdGlvbiwgd2l0aFBlbmRpbmcpXG4gIGNvbnN0IHNjcmVlbkdyb3VwSWRzID0gZ2V0Q29udGVudHNJbkxheW91dChhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0sIExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwLCB3aXRoUGVuZGluZylcbiAgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgIHJldCA9IHJldC5jb25jYXQod2lkZ2V0SWRzKVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24pIHtcbiAgICByZXQgPSByZXQuY29uY2F0KHNlY3Rpb25JZHMpXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXApIHtcbiAgICByZXQgPSByZXQuY29uY2F0KHNjcmVlbkdyb3VwSWRzKVxuICB9XG5cbiAgY29uc3QgaGFzTGF5b3V0V2lkZ2V0SWRzID0gd2lkZ2V0SWRzLmZpbHRlcihcbiAgICB3aWRnZXRJZCA9PlxuICAgICAgYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdPy5tYW5pZmVzdD8ud2lkZ2V0VHlwZSA9PT0gV2lkZ2V0VHlwZS5MYXlvdXQgfHxcbiAgICAgIGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXT8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/Lmhhc0VtYmVkZGVkTGF5b3V0XG4gIClcbiAgaGFzTGF5b3V0V2lkZ2V0SWRzLmZvckVhY2goaGFzTGF5b3V0V2lkZ2V0SWQgPT4ge1xuICAgIE9iamVjdC5rZXlzKGFwcENvbmZpZy53aWRnZXRzW2hhc0xheW91dFdpZGdldElkXS5sYXlvdXRzID8/IHt9KS5mb3JFYWNoKGxheW91dEtleSA9PiB7XG4gICAgICBjb25zdCBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcud2lkZ2V0c1toYXNMYXlvdXRXaWRnZXRJZF0ubGF5b3V0c1tsYXlvdXRLZXldLCBzaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldCA9IHJldC5jb25jYXQoZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZShhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpKVxuICAgIH0pXG4gIH0pXG5cbiAgc2VjdGlvbklkcy5mb3JFYWNoKHNlY3Rpb25JZCA9PiB7XG4gICAgYXBwQ29uZmlnLnNlY3Rpb25zPy5bc2VjdGlvbklkXT8udmlld3MuZm9yRWFjaCh2aWV3SWQgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLnZpZXdzW3ZpZXdJZF0ubGF5b3V0LCBzaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIGlmIChhcHBDb25maWcudmlld3Nbdmlld0lkXSAmJiBsYXlvdXRJZCkge1xuICAgICAgICByZXQgPSByZXQuY29uY2F0KFxuICAgICAgICAgIGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBzY3JlZW5Hcm91cElkcy5mb3JFYWNoKHNjcmVlbkdyb3VwSWQgPT4ge1xuICAgIGFwcENvbmZpZy5zY3JlZW5Hcm91cHM/LltzY3JlZW5Hcm91cElkXT8uc2NyZWVucy5mb3JFYWNoKHNjcmVlbklkID0+IHtcbiAgICAgIGNvbnN0IG1haW5MYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuc2NyZWVucz8uW3NjcmVlbklkXT8ubWFpbi5sYXlvdXQsIHNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgaWYgKG1haW5MYXlvdXRJZCkge1xuICAgICAgICByZXQgPSByZXQuY29uY2F0KFxuICAgICAgICAgIGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBtYWluTGF5b3V0SWQsIHR5cGUsIHNpemVNb2RlLCB3aXRoUGVuZGluZylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29uc3QgcGFuZWxMYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuc2NyZWVucz8uW3NjcmVlbklkXT8ucGFuZWw/LmxheW91dCwgc2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICBpZiAocGFuZWxMYXlvdXRJZCkge1xuICAgICAgICByZXQgPSByZXQuY29uY2F0KFxuICAgICAgICAgIGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBwYW5lbExheW91dElkLCB0eXBlLCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIHJldHVybiByZXRcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbnRlbnQgaWRzIGluIGEgbGF5b3V0LCBzZWFyY2ggdGhlIHdpZGdldHMgd2l0aCBsYXlvdXQgYnV0IGRvbid0IHNlYXJjaCBuZXN0ZWQgY29udGFpbmVycy5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBsYXlvdXRJZFxuICogQHBhcmFtIHR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dElkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICB3aXRoUGVuZGluZyA9IGZhbHNlXG4pOiBzdHJpbmdbXSB7XG4gIGxldCByZXQgPSBbXVxuICAvLyBObyBuZWVkIHRvIGRlYWwgd2l0aCBzY3JlZW4gZ3JvdXAgYXMgaXQgY2Fubm90IGJlIHBsYWNlZCBpbiBhIGxheW91dCB3aWRnZXRcbiAgY29uc3Qgd2lkZ2V0SWRzID0gZ2V0Q29udGVudHNJbkxheW91dChhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0sIExheW91dEl0ZW1UeXBlLldpZGdldCwgd2l0aFBlbmRpbmcpXG4gIGNvbnN0IHNlY3Rpb25JZHMgPSBnZXRDb250ZW50c0luTGF5b3V0KGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXSwgTGF5b3V0SXRlbVR5cGUuU2VjdGlvbiwgd2l0aFBlbmRpbmcpXG4gIGNvbnN0IHNnSWRzID0gZ2V0Q29udGVudHNJbkxheW91dChhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0sIExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwLCB3aXRoUGVuZGluZylcbiAgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgIHJldCA9IHJldC5jb25jYXQod2lkZ2V0SWRzKVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwKSB7XG4gICAgcmV0ID0gcmV0LmNvbmNhdChzZ0lkcylcbiAgfSBlbHNlIHtcbiAgICByZXQgPSByZXQuY29uY2F0KHNlY3Rpb25JZHMpXG4gIH1cblxuICBjb25zdCBsYXlvdXRXaWRnZXRJZHMgPSB3aWRnZXRJZHMuZmlsdGVyKFxuICAgIHdpZGdldElkID0+XG4gICAgICBhcHBDb25maWcud2lkZ2V0cyAmJlxuICAgICAgYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdICYmXG4gICAgICAoYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLm1hbmlmZXN0LndpZGdldFR5cGUgPT09IFdpZGdldFR5cGUuTGF5b3V0IHx8IGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXS5tYW5pZmVzdC5wcm9wZXJ0aWVzLmhhc0VtYmVkZGVkTGF5b3V0KVxuICApXG4gIGxheW91dFdpZGdldElkcy5mb3JFYWNoKGxheW91dFdpZGdldElkID0+IHtcbiAgICBPYmplY3Qua2V5cyhhcHBDb25maWcud2lkZ2V0c1tsYXlvdXRXaWRnZXRJZF0ubGF5b3V0cyA/PyB7fSkuZm9yRWFjaChsYXlvdXRLZXkgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0V2lkZ2V0SWRdLmxheW91dHNbbGF5b3V0S2V5XSwgc2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICByZXQgPSByZXQuY29uY2F0KFxuICAgICAgICBnZXRDb250ZW50c0luTGF5b3V0V2l0aFJlY3J1c2l2ZUxheW91dHMoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICAgICAgKVxuICAgIH0pXG4gIH0pXG5cbiAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbGF5b3V0IGl0ZW0gdGhhdCBob2xkcyB0aGUgY29udGVudC5cbiAqIEluIG9uZSBsYXlvdXQsIGEgY29udGVudCBpcyBub3QgYWxsb3dlZCB0byBiZSBwdXQgaW4gbXVsdGlwbGUgaXRlbXMuXG4gKiBAcGFyYW0gbGF5b3V0SnNvblxuICogQHBhcmFtIHdpZGdldElkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50TGF5b3V0SXRlbSAobGF5b3V0SnNvbjogSU1MYXlvdXRKc29uLCBpZDogc3RyaW5nLCB0eXBlOiBMYXlvdXRJdGVtVHlwZSk6IElNTGF5b3V0SXRlbUpzb24ge1xuICBpZiAoIWxheW91dEpzb24/LmNvbnRlbnQpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGNvbnN0IGxheW91dEl0ZW1JZCA9IE9iamVjdC5rZXlzKGxheW91dEpzb24uY29udGVudCkuZmluZChcbiAgICBpdGVtSWQgPT5cbiAgICAgIGxheW91dEpzb24uY29udGVudFtpdGVtSWRdLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgIChsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXS53aWRnZXRJZCA9PT0gaWQgfHwgbGF5b3V0SnNvbi5jb250ZW50W2l0ZW1JZF0uc2VjdGlvbklkID09PSBpZCB8fCBsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXS5zY3JlZW5Hcm91cElkID09PSBpZCkgJiZcbiAgICAgICFsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXS5pc1BlbmRpbmdcbiAgKVxuICByZXR1cm4gbGF5b3V0SnNvbi5jb250ZW50W2xheW91dEl0ZW1JZF1cbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxheW91dCBpdGVtIGlkcyBpbiBhIGxheW91dFxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGxheW91dElkXG4gKiBAcGFyYW0gd2l0aFBlbmRpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExheW91dEl0ZW1JZHMgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dElkOiBzdHJpbmcsIHdpdGhQZW5kaW5nID0gZmFsc2UpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICBpZiAobGF5b3V0Py5jb250ZW50KSB7XG4gICAgcmV0dXJuIHdpdGhQZW5kaW5nXG4gICAgICA/IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50KVxuICAgICAgOiBPYmplY3Qua2V5cyhsYXlvdXQuY29udGVudCkuZmlsdGVyKGl0ZW1JZCA9PiAhbGF5b3V0LmNvbnRlbnRbaXRlbUlkXS5pc1BlbmRpbmcpXG4gIH1cbiAgcmV0dXJuIFtdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXlvdXRJbmZvc0J5VHlwZSAoXG4gIGxheW91dEpzb246IElNTGF5b3V0SnNvbixcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHdpdGhQZW5kaW5nID0gZmFsc2Vcbik6IExheW91dEluZm9bXSB7XG4gIGlmICghbGF5b3V0SnNvbj8uY29udGVudCkge1xuICAgIHJldHVybiBbXVxuICB9XG4gIHJldHVybiBPYmplY3Qua2V5cyhsYXlvdXRKc29uLmNvbnRlbnQpXG4gICAgLmZpbHRlcihcbiAgICAgIGl0ZW1JZCA9PlxuICAgICAgICBsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXS50eXBlID09PSB0eXBlICYmXG4gICAgICAgICEhZ2V0Q29udGVudElkSW5MYXlvdXRJdGVtKGxheW91dEpzb24uY29udGVudFtpdGVtSWRdKSAmJlxuICAgICAgICAod2l0aFBlbmRpbmcgfHwgIWxheW91dEpzb24uY29udGVudFtpdGVtSWRdLmlzUGVuZGluZylcbiAgICApXG4gICAgLm1hcChpdGVtSWQgPT4gKHsgbGF5b3V0SWQ6IGxheW91dEpzb24uaWQsIGxheW91dEl0ZW1JZDogaXRlbUlkIH0pKVxufVxuXG4vKipcbiAqIEZpbmQgYSB3aWRnZXQgaWQgdGhhdCB1c2UgdGhlIGxheW91dElkXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gbGF5b3V0SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpZGdldElkVGhhdFVzZVRoZUxheW91dElkIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgaWYgKGxheW91dEpzb24/LnBhcmVudD8udHlwZSA9PT0gTGF5b3V0UGFyZW50VHlwZS5XaWRnZXQpIHtcbiAgICByZXR1cm4gbGF5b3V0SnNvbi5wYXJlbnQuaWRcbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgY29udGFpbmVyIHRoYXQgaG9sZHMgdGhlIHdpZGdldCwgc2VhcmNoIHRoZSB3aWRnZXRzIHdpdGggbGF5b3V0IGJ1dCBkb24ndCBzZWFyY2ggdGhlIG5lc3RlZCBjb250YWluZXIuXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gd2lkZ2V0SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRDb250YWluZXJJbmZvIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gIHdpdGhQZW5kaW5nID0gZmFsc2Vcbik6IENvbnRhaW5lckluZm8ge1xuICBjb25zdCBsYXlvdXRJbmZvID0gZ2V0TGF5b3V0SW5mb0hvbGRDb250ZW50KGFwcENvbmZpZywgaWQsIHR5cGUsIHNpemVNb2RlLCB3aXRoUGVuZGluZylcblxuICBpZiAobGF5b3V0SW5mbykge1xuICAgIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJbmZvLmxheW91dElkXVxuICAgIHN3aXRjaCAobGF5b3V0SnNvbi5wYXJlbnQ/LnR5cGUpIHtcbiAgICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5QYWdlOlxuICAgICAgICByZXR1cm4geyB0eXBlOiBDb250YWluZXJUeXBlLlBhZ2UsIGlkOiBsYXlvdXRKc29uLnBhcmVudC5pZCB9XG4gICAgICBjYXNlIExheW91dFBhcmVudFR5cGUuRGlhbG9nOlxuICAgICAgICByZXR1cm4geyB0eXBlOiBDb250YWluZXJUeXBlLkRpYWxvZywgaWQ6IGxheW91dEpzb24ucGFyZW50LmlkIH1cbiAgICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5IZWFkZXI6XG4gICAgICAgIHJldHVybiB7IHR5cGU6IENvbnRhaW5lclR5cGUuSGVhZGVyLCBpZDogJ2hlYWRlcicgfVxuICAgICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLkZvb3RlcjpcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogQ29udGFpbmVyVHlwZS5Gb290ZXIsIGlkOiAnZm9vdGVyJyB9XG4gICAgICBjYXNlIExheW91dFBhcmVudFR5cGUuVmlldzpcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogQ29udGFpbmVyVHlwZS5WaWV3LCBpZDogbGF5b3V0SnNvbi5wYXJlbnQuaWQgfVxuICAgICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLlNjcmVlbjpcbiAgICAgIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuSnNvbiA9IGFwcENvbmZpZy5zY3JlZW5zW2xheW91dEpzb24ucGFyZW50LmlkXVxuICAgICAgICBjb25zdCBtYWluUGFuZWxMYXlvdXRJZCA9IHNjcmVlbkpzb24ubWFpbi5sYXlvdXRbc2l6ZU1vZGVdXG4gICAgICAgIHJldHVybiB7IHR5cGU6IG1haW5QYW5lbExheW91dElkID09PSBsYXlvdXRJbmZvLmxheW91dElkID8gQ29udGFpbmVyVHlwZS5TY3JlZW5NYWluIDogQ29udGFpbmVyVHlwZS5TY3JlZW5QYW5lbCwgaWQ6IGxheW91dEpzb24ucGFyZW50LmlkIH1cbiAgICAgIH1cbiAgICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5XaWRnZXQ6XG4gICAgICB7XG4gICAgICAgIGNvbnN0IHdpZGdldElkID0gbGF5b3V0SnNvbi5wYXJlbnQuaWRcbiAgICAgICAgcmV0dXJuIGdldENvbnRlbnRDb250YWluZXJJbmZvKGFwcENvbmZpZywgd2lkZ2V0SWQsIHR5cGUsIHNpemVNb2RlLCB3aXRoUGVuZGluZylcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHJvb3QgY29udGFpbmVyIG9mIHRoZSBjb250ZW50LCBzZWFyY2ggdGhlIHdob2xlIGxheW91dCB0cmVlLiBUaGVyZSBhcmUgNCB0eXBlcyBvZiByb290IGNvbnRhaW5lcjogcGFnZSwgd2luZG93LCBoZWFkZXIsIGZvb3Rlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRSb290Q29udGFpbmVySW5mbyAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgaWQ6IHN0cmluZywgdHlwZTogTGF5b3V0SXRlbVR5cGUsIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nID0gZmFsc2UpOiBDb250YWluZXJJbmZvIHtcbiAgbGV0IGxheW91dEluZm8gPSBnZXRMYXlvdXRJbmZvSG9sZENvbnRlbnQoYXBwQ29uZmlnLCBpZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICBsZXQgdXNlU2l6ZU1vZGUgPSBzaXplTW9kZVxuICBpZiAoIWxheW91dEluZm8pIHtcbiAgICAvLyB0cnkgdG8gZmluZCBmcm9tIG1haW4gc2l6ZSBtb2RlLCBzaW5jZSBzaXplTW9kZSBsYXlvdXQgbWF5IGJlIHRyYW5mb3JtZWQgYXV0b21hdGljYWxseSBmcm9tIG1haW4gc2l6ZSBtb2RlXG4gICAgbGF5b3V0SW5mbyA9IGdldExheW91dEluZm9Ib2xkQ29udGVudChhcHBDb25maWcsIGlkLCB0eXBlLCBhcHBDb25maWcubWFpblNpemVNb2RlLCB3aXRoUGVuZGluZylcbiAgICB1c2VTaXplTW9kZSA9IGFwcENvbmZpZy5tYWluU2l6ZU1vZGVcbiAgfVxuXG4gIGlmIChsYXlvdXRJbmZvKSB7XG4gICAgcmV0dXJuIGdldFJvb3RDb250YWluZXJJbmZvT2ZMYXlvdXQoYXBwQ29uZmlnLCBsYXlvdXRJbmZvLmxheW91dElkLCB1c2VTaXplTW9kZSlcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um9vdENvbnRhaW5lckluZm9PZkxheW91dCAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SWQ6IHN0cmluZywgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSk6IENvbnRhaW5lckluZm8ge1xuICBsZXQgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICB3aGlsZSAobGF5b3V0SnNvbj8ucGFyZW50ICYmIFtMYXlvdXRQYXJlbnRUeXBlLlNjcmVlbiwgTGF5b3V0UGFyZW50VHlwZS5WaWV3LCBMYXlvdXRQYXJlbnRUeXBlLldpZGdldF0uaW5jbHVkZXMobGF5b3V0SnNvbi5wYXJlbnQudHlwZSkpIHtcbiAgICBjb25zdCBsYXlvdXRJbmZvID0gZmluZFBhcmVudExheW91dEluZm8oeyBsYXlvdXRJZCB9LCBhcHBDb25maWcsIHNpemVNb2RlKVxuICAgIGxheW91dElkID0gbGF5b3V0SW5mbz8ubGF5b3V0SWRcbiAgICBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIH1cbiAgc3dpdGNoIChsYXlvdXRKc29uPy5wYXJlbnQ/LnR5cGUpIHtcbiAgICBjYXNlIExheW91dFBhcmVudFR5cGUuRGlhbG9nOlxuICAgICAgcmV0dXJuIHsgdHlwZTogQ29udGFpbmVyVHlwZS5EaWFsb2csIGlkOiBsYXlvdXRKc29uLnBhcmVudC5pZCB9XG4gICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLlBhZ2U6XG4gICAgICByZXR1cm4geyB0eXBlOiBDb250YWluZXJUeXBlLlBhZ2UsIGlkOiBsYXlvdXRKc29uLnBhcmVudC5pZCB9XG4gICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLkhlYWRlcjpcbiAgICAgIHJldHVybiB7IHR5cGU6IENvbnRhaW5lclR5cGUuSGVhZGVyLCBpZDogJ2hlYWRlcicgfVxuICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5Gb290ZXI6XG4gICAgICByZXR1cm4geyB0eXBlOiBDb250YWluZXJUeXBlLkZvb3RlciwgaWQ6ICdmb290ZXInIH1cbiAgfVxufVxuXG4vKipcbiAqIEdldCB0aGUgY29udGVudHMgaW4gYSBjb250YWluZXIuIERvIG5vdCBzZWFyY2ggdGhlIG5lc3RlZCBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50c0luQ29udGFpbmVyIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBjb250YWluZXJJbmZvOiBDb250YWluZXJJbmZvLCB0eXBlOiBMYXlvdXRJdGVtVHlwZSwgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nID0gZmFsc2UpOiBzdHJpbmdbXSB7XG4gIGxldCBsYXlvdXRJZFxuICBzd2l0Y2ggKGNvbnRhaW5lckluZm8udHlwZSkge1xuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5QYWdlOlxuICAgICAgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLnBhZ2VzPy5bY29udGFpbmVySW5mby5pZF0/LmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgcmV0dXJuIGxheW91dElkID8gZ2V0Q29udGVudHNJbkxheW91dFdpdGhSZWNydXNpdmVMYXlvdXRzKGFwcENvbmZpZywgbGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpIDogW11cbiAgICBjYXNlIENvbnRhaW5lclR5cGUuSGVhZGVyOlxuICAgICAgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLmhlYWRlcj8ubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICByZXR1cm4gbGF5b3V0SWQgPyBnZXRDb250ZW50c0luTGF5b3V0V2l0aFJlY3J1c2l2ZUxheW91dHMoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5Gb290ZXI6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuZm9vdGVyPy5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyhhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKSA6IFtdXG4gICAgY2FzZSBDb250YWluZXJUeXBlLlZpZXc6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcudmlld3M/Lltjb250YWluZXJJbmZvLmlkXT8ubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICByZXR1cm4gbGF5b3V0SWQgPyBnZXRDb250ZW50c0luTGF5b3V0V2l0aFJlY3J1c2l2ZUxheW91dHMoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5EaWFsb2c6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuZGlhbG9nc1tjb250YWluZXJJbmZvLmlkXS5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyhhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKSA6IFtdXG4gICAgY2FzZSBDb250YWluZXJUeXBlLlNjcmVlbk1haW46XG4gICAgY2FzZSBDb250YWluZXJUeXBlLlNjcmVlblBhbmVsOlxuICAgICAgaWYgKCFhcHBDb25maWcuc2NyZWVucyB8fCAhYXBwQ29uZmlnLnNjcmVlbnNbY29udGFpbmVySW5mby5pZF0pIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgICBjb25zdCBtYWluTGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLnNjcmVlbnNbY29udGFpbmVySW5mby5pZF0ubWFpbi5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIGlmICghbWFpbkxheW91dElkKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgICAgY29uc3QgbWFpbkNvbnRlbnRzID0gZ2V0Q29udGVudHNJbkxheW91dFdpdGhSZWNydXNpdmVMYXlvdXRzKGFwcENvbmZpZywgbWFpbkxheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuXG4gICAgICBpZiAoYXBwQ29uZmlnLnNjcmVlbnNbY29udGFpbmVySW5mby5pZF0ucGFuZWwpIHtcbiAgICAgICAgY29uc3QgcGFuZWxMYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuc2NyZWVuc1tjb250YWluZXJJbmZvLmlkXS5wYW5lbC5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgICAgY29uc3QgcGFuZWxDb250ZW50cyA9IGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyhhcHBDb25maWcsIHBhbmVsTGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpXG5cbiAgICAgICAgcmV0dXJuIG1haW5Db250ZW50cy5jb25jYXQocGFuZWxDb250ZW50cylcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1haW5Db250ZW50c1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBjb250ZW50cyBpbiBhIGNvbnRhaW5lci4gU2VhcmNoIHRoZSB3aG9sZSBsYXlvdXQgdHJlZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRzSW5Db250YWluZXJSZWN1cnNpdmUgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGNvbnRhaW5lckluZm86IENvbnRhaW5lckluZm8sIHR5cGU6IExheW91dEl0ZW1UeXBlLCBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcgPSBmYWxzZSk6IHN0cmluZ1tdIHtcbiAgbGV0IGxheW91dElkXG4gIHN3aXRjaCAoY29udGFpbmVySW5mby50eXBlKSB7XG4gICAgY2FzZSBDb250YWluZXJUeXBlLlBhZ2U6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcucGFnZXM/Lltjb250YWluZXJJbmZvLmlkXT8ubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICByZXR1cm4gbGF5b3V0SWQgPyBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgbGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpIDogW11cbiAgICBjYXNlIENvbnRhaW5lclR5cGUuSGVhZGVyOlxuICAgICAgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLmhlYWRlcj8ubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICByZXR1cm4gbGF5b3V0SWQgPyBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgbGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpIDogW11cbiAgICBjYXNlIENvbnRhaW5lclR5cGUuRm9vdGVyOlxuICAgICAgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLmZvb3Rlcj8ubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICByZXR1cm4gbGF5b3V0SWQgPyBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgbGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpIDogW11cbiAgICBjYXNlIENvbnRhaW5lclR5cGUuVmlldzpcbiAgICAgIGxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy52aWV3cz8uW2NvbnRhaW5lckluZm8uaWRdPy5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5EaWFsb2c6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuZGlhbG9nc1tjb250YWluZXJJbmZvLmlkXS5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5TY3JlZW5NYWluOlxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5TY3JlZW5QYW5lbDpcbiAgICAgIGlmICghYXBwQ29uZmlnLnNjcmVlbnMgfHwgIWFwcENvbmZpZy5zY3JlZW5zW2NvbnRhaW5lckluZm8uaWRdKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgICAgY29uc3QgbWFpbkxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5zY3JlZW5zW2NvbnRhaW5lckluZm8uaWRdLm1haW4ubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICBpZiAoIW1haW5MYXlvdXRJZCkge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICAgIGNvbnN0IG1haW5Db250ZW50cyA9IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBtYWluTGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSlcblxuICAgICAgaWYgKGFwcENvbmZpZy5zY3JlZW5zW2NvbnRhaW5lckluZm8uaWRdLnBhbmVsKSB7XG4gICAgICAgIGNvbnN0IHBhbmVsTGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLnNjcmVlbnNbY29udGFpbmVySW5mby5pZF0ucGFuZWwubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICAgIGNvbnN0IHBhbmVsQ29udGVudHMgPSBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgcGFuZWxMYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlKVxuXG4gICAgICAgIHJldHVybiBtYWluQ29udGVudHMuY29uY2F0KHBhbmVsQ29udGVudHMpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtYWluQ29udGVudHNcbiAgfVxufVxuXG4vKipcbiAqIEdldCB0aGUgY29udGVudHMgaW4gYSBjb250YWluZXIgd2l0aCBtb3JlIG9wdGlvbnMsIHNlYXJjaCB0aGUgd2hvbGUgbGF5b3V0IHRyZWUuXG4gKlxuICogaGVhZGVyLCBmb290ZXIgYW5kIHRoZSBjdXJyZW50IHBhZ2UgYm9keSBhcmUgY29uc2lkZXJlZCBhcyBvbmUgY29udGFpbmVyLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zXG4gKiAgICB0aGUgY3VycmVudFBhZ2VJZCB3aWxsIGJlIHVzZWQgaWYgdGhlIGNvbnRhaW5lciBpcyBoZWFkZXIvZm9vdGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZUFkdiAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgY29udGFpbmVySW5mbzogQ29udGFpbmVySW5mbywgdHlwZTogTGF5b3V0SXRlbVR5cGUsIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlLCBvcHRpb25zOiB7IGluY2x1ZGVQZW5kaW5nOiBib29sZWFuLCBpbmNsdWRlT3RoZXJTaXplTW9kZTogYm9vbGVhbiwgY3VycmVudFBhZ2VJZD86IHN0cmluZyB9KTogc3RyaW5nW10ge1xuICBjb25zdCBnZXRDb250ZW50c0luT25lQ29udGFpbmVyID0gKF9jb250YWluZXJJbmZvKSA9PiB7XG4gICAgbGV0IGlkcyA9IFtdXG4gICAgaWYgKG9wdGlvbnMuaW5jbHVkZU90aGVyU2l6ZU1vZGUpIHtcbiAgICAgIGlkcyA9IGlkcy5jb25jYXQoXG4gICAgICAgIGdldENvbnRlbnRzSW5Db250YWluZXJSZWN1cnNpdmUoYXBwQ29uZmlnLCBfY29udGFpbmVySW5mbywgdHlwZSwgQnJvd3NlclNpemVNb2RlLkxhcmdlLCBvcHRpb25zLmluY2x1ZGVQZW5kaW5nKSxcbiAgICAgICAgZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZShhcHBDb25maWcsIF9jb250YWluZXJJbmZvLCB0eXBlLCBCcm93c2VyU2l6ZU1vZGUuTWVkaXVtLCBvcHRpb25zLmluY2x1ZGVQZW5kaW5nKSxcbiAgICAgICAgZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZShhcHBDb25maWcsIF9jb250YWluZXJJbmZvLCB0eXBlLCBCcm93c2VyU2l6ZU1vZGUuU21hbGwsIG9wdGlvbnMuaW5jbHVkZVBlbmRpbmcpXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGlkcyA9IGdldENvbnRlbnRzSW5Db250YWluZXJSZWN1cnNpdmUoYXBwQ29uZmlnLCBfY29udGFpbmVySW5mbywgdHlwZSwgYnJvd3NlclNpemVNb2RlLCBvcHRpb25zLmluY2x1ZGVQZW5kaW5nKVxuICAgIH1cbiAgICBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaWRzKSlcbiAgICByZXR1cm4gaWRzXG4gIH1cblxuICBpZiAoY29udGFpbmVySW5mby50eXBlID09PSBDb250YWluZXJUeXBlLkRpYWxvZykge1xuICAgIHJldHVybiBnZXRDb250ZW50c0luT25lQ29udGFpbmVyKGNvbnRhaW5lckluZm8pXG4gIH1cblxuICBpZiAoY29udGFpbmVySW5mby50eXBlID09PSBDb250YWluZXJUeXBlLlBhZ2UpIHtcbiAgICBjb25zdCBwYWdlSnNvbiA9IGFwcENvbmZpZy5wYWdlc1tjb250YWluZXJJbmZvLmlkXVxuICAgIGxldCBpZHMgPSBnZXRDb250ZW50c0luT25lQ29udGFpbmVyKGNvbnRhaW5lckluZm8pXG4gICAgaWYgKHBhZ2VKc29uLmhlYWRlcikge1xuICAgICAgaWRzID0gaWRzLmNvbmNhdChnZXRDb250ZW50c0luT25lQ29udGFpbmVyKHsgdHlwZTogQ29udGFpbmVyVHlwZS5IZWFkZXIsIGlkOiAnaGVhZGVyJyB9KSlcbiAgICB9XG4gICAgaWYgKHBhZ2VKc29uLmZvb3Rlcikge1xuICAgICAgaWRzID0gaWRzLmNvbmNhdChnZXRDb250ZW50c0luT25lQ29udGFpbmVyKHsgdHlwZTogQ29udGFpbmVyVHlwZS5Gb290ZXIsIGlkOiAnZm9vdGVyJyB9KSlcbiAgICB9XG4gICAgaWRzID0gQXJyYXkuZnJvbShuZXcgU2V0KGlkcykpXG4gICAgcmV0dXJuIGlkc1xuICB9XG5cbiAgaWYgKGNvbnRhaW5lckluZm8udHlwZSA9PT0gQ29udGFpbmVyVHlwZS5IZWFkZXIpIHtcbiAgICBjb25zdCBwYWdlSnNvbiA9IGFwcENvbmZpZy5wYWdlc1tvcHRpb25zLmN1cnJlbnRQYWdlSWRdXG4gICAgbGV0IGlkcyA9IGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoY29udGFpbmVySW5mbykuY29uY2F0KGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoeyB0eXBlOiBDb250YWluZXJUeXBlLlBhZ2UsIGlkOiBvcHRpb25zLmN1cnJlbnRQYWdlSWQgfSkpXG4gICAgaWYgKHBhZ2VKc29uPy5mb290ZXIpIHtcbiAgICAgIGlkcyA9IGlkcy5jb25jYXQoZ2V0Q29udGVudHNJbk9uZUNvbnRhaW5lcih7IHR5cGU6IENvbnRhaW5lclR5cGUuRm9vdGVyLCBpZDogJ2Zvb3RlcicgfSkpXG4gICAgfVxuICAgIGlkcyA9IEFycmF5LmZyb20obmV3IFNldChpZHMpKVxuICAgIHJldHVybiBpZHNcbiAgfVxuXG4gIGlmIChjb250YWluZXJJbmZvLnR5cGUgPT09IENvbnRhaW5lclR5cGUuRm9vdGVyKSB7XG4gICAgY29uc3QgcGFnZUpzb24gPSBhcHBDb25maWcucGFnZXNbb3B0aW9ucy5jdXJyZW50UGFnZUlkXVxuICAgIGxldCBpZHMgPSBnZXRDb250ZW50c0luT25lQ29udGFpbmVyKGNvbnRhaW5lckluZm8pLmNvbmNhdChnZXRDb250ZW50c0luT25lQ29udGFpbmVyKHsgdHlwZTogQ29udGFpbmVyVHlwZS5QYWdlLCBpZDogb3B0aW9ucy5jdXJyZW50UGFnZUlkIH0pKVxuICAgIGlmIChwYWdlSnNvbj8uaGVhZGVyKSB7XG4gICAgICBpZHMgPSBpZHMuY29uY2F0KGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoeyB0eXBlOiBDb250YWluZXJUeXBlLkhlYWRlciwgaWQ6ICdoZWFkZXInIH0pKVxuICAgIH1cbiAgICBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaWRzKSlcbiAgICByZXR1cm4gaWRzXG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxheW91dElkIGZvciBzcGVjaWZpYyBzaXplTW9kZS4gSWYgdGhlIHNpemVNb2RlIGRvZXMgbm90IGV4aXN0LCByZXR1cm4gdGhlIG1haW4gc2l6ZU1vZGUgbGF5b3V0SWQuXG4gKiBAcGFyYW0gbGF5b3V0c1xuICogQHBhcmFtIGJyb3dzZXJTaXplTW9kZVxuICogQHBhcmFtIG1haW5TaXplTW9kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZExheW91dElkIChcbiAgbGF5b3V0czogSU1TaXplTW9kZUxheW91dEpzb24sXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICBtYWluU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogc3RyaW5nIHtcbiAgaWYgKCFsYXlvdXRzKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICByZXR1cm4gbGF5b3V0c1ticm93c2VyU2l6ZU1vZGVdIHx8IGxheW91dHNbbWFpblNpemVNb2RlXVxufVxuXG4vKipcbiAqIElmIHRoZSBjb250ZW50IGhhcyBvbmx5IG9uZSBwYXJlbnQsIHJldHVybiBpdCBkaXJlY3RseS5cbiAqIElmIHRoZSBjb250ZW50IGhhcyBtdWx0aXBsZSBwYXJlbnRzLCB0aGVzZSBwYXJlbnRzIG11c3QgYmUgY29udGFpbmVkIGluIGEgd2lkZ2V0J3MgbGF5b3V0LCByZXR1cm4gdGhlIHdpZGdldCdzIHBhcmVudC5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBpZFxuICogQHBhcmFtIHR5cGVcbiAqIEBwYXJhbSBzaXplTW9kZVxuICogQHBhcmFtIHdpdGhQZW5kaW5nXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF5b3V0SW5mb0hvbGRDb250ZW50IChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gIHdpdGhQZW5kaW5nID0gdHJ1ZVxuKTogTGF5b3V0SW5mbyB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXA6XG4gICAge1xuICAgICAgY29uc3Qgc2cgPSBhcHBDb25maWcuc2NyZWVuR3JvdXBzW2lkXVxuICAgICAgY29uc3QgbGF5b3V0SW5mbyA9IHNnLnBhcmVudD8uW3NpemVNb2RlXVxuICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IGZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZywgbGF5b3V0SW5mbylcbiAgICAgIHJldHVybiB3aXRoUGVuZGluZyB8fCAhbGF5b3V0SXRlbT8uaXNQZW5kaW5nID8gbGF5b3V0SW5mbyA6IG51bGxcbiAgICB9XG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uOlxuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0OlxuICAgIHtcbiAgICAgIGxldCBjb250ZW50XG4gICAgICBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICAgIGNvbnRlbnQgPSBhcHBDb25maWcud2lkZ2V0c1tpZF1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICAgIGNvbnRlbnQgPSBhcHBDb25maWcuc2VjdGlvbnNbaWRdXG4gICAgICB9XG4gICAgICBpZiAoY29udGVudD8ucGFyZW50Py5bc2l6ZU1vZGVdPy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgbGF5b3V0SW5mbyA9IGNvbnRlbnQucGFyZW50W3NpemVNb2RlXVswXVxuICAgICAgICBjb25zdCBsYXlvdXRJdGVtID0gZmluZExheW91dEl0ZW0oYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICAgICAgICByZXR1cm4gd2l0aFBlbmRpbmcgfHwgIWxheW91dEl0ZW0/LmlzUGVuZGluZyA/IGxheW91dEluZm8gOiBudWxsXG4gICAgICB9XG4gICAgICBpZiAoY29udGVudD8ucGFyZW50Py5bc2l6ZU1vZGVdPy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIGZpbmQgZ3JhbmQgcGFybmV0XG4gICAgICAgIGNvbnN0IGxheW91dEluZm8gPSBjb250ZW50LnBhcmVudFtzaXplTW9kZV1bMF1cbiAgICAgICAgY29uc3QgcGFyZW50TGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdXG4gICAgICAgIGlmIChwYXJlbnRMYXlvdXRKc29uPy5wYXJlbnQpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0TGF5b3V0SW5mb0hvbGRDb250ZW50KGFwcENvbmZpZywgcGFyZW50TGF5b3V0SnNvbi5wYXJlbnQuaWQsIExheW91dEl0ZW1UeXBlLldpZGdldCwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBJbiBvbmUgbGF5b3V0LCBvbmUgd2lkZ2V0L3NlY3Rpb24gaXMgTk9UIGFsbG93ZWQgYmUgcHV0IGluIG1vcmUgdGhhbiBvbmUgbGF5b3V0IGl0ZW0uXG4gKiBIb3dldmVyLCBpbiB3aWRnZXQgdGhhdCBoYXMgbGF5b3V0cywgb25lIHdpZGdldC9zZWN0aW9uIG1heSBiZSBwdXQgaW4gbXVsdGlwbGUgbGF5b3V0cy5cbiAqXG4gKiBpZiBgc2l6ZU1vZGVgIGlzIHBhc3NlZCBpbiwgcmV0dXJuIHRoZSBpdGVtcyBpbiB0aGUgc2l6ZSBtb2RlIG9ubHksIGVsc2UgcmV0dXJuIGFsbCBpdGVtc1xuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIHR5cGVcbiAqIEBwYXJhbSBpZFxuICogQHBhcmFtIHNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXlvdXRJbmZvc0hvbGRjb250ZW50IChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIGlkOiBzdHJpbmcsXG4gIHNpemVNb2RlPzogQnJvd3NlclNpemVNb2RlXG4pOiBMYXlvdXRJbmZvW10ge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwOlxuICAgIHtcbiAgICAgIGNvbnN0IHNnID0gYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tpZF1cbiAgICAgIGlmIChzZy5wYXJlbnQpIHtcbiAgICAgICAgaWYgKHNpemVNb2RlKSB7XG4gICAgICAgICAgcmV0dXJuIFtzZy5wYXJlbnRbc2l6ZU1vZGVdXVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHNnLnBhcmVudClcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uOlxuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0OlxuICAgIHtcbiAgICAgIGxldCBjb250ZW50XG4gICAgICBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICAgIGNvbnRlbnQgPSBhcHBDb25maWcud2lkZ2V0c1tpZF1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICAgIGNvbnRlbnQgPSBhcHBDb25maWcuc2VjdGlvbnNbaWRdXG4gICAgICB9XG4gICAgICBpZiAoY29udGVudD8ucGFyZW50KSB7IC8vIHBsYWNlaG9sZGVyIGhhcyBubyBjb250ZW50XG4gICAgICAgIGlmIChzaXplTW9kZSkge1xuICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcmVudFtzaXplTW9kZV1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXVxuICAgICAgICBPYmplY3QudmFsdWVzKGNvbnRlbnQucGFyZW50KS5mb3JFYWNoKChsYXlvdXRJbmZvczogTGF5b3V0SW5mb1tdKSA9PiB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goLi4ubGF5b3V0SW5mb3MpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdXG59XG5cbi8qKlxuICogRmluZCBhIHdpZGdldCBpZCAocGFyZW50IHdpZGdldCBpZCkgdGhhdCB0aGUgd2lkZ2V0IGxheW91dCBjb250YWlucyB0aGUgd2lkZ2V0SWQvc2VjdGlvbklkLlxuICogUmV0dXJuIHRoZSBkaXJlY3QgcGFyZW50IG9ubHkuXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gaWQgdGhlIHdpZGdldC9zZWN0aW9uIGlkXG4gKiBAcGFyYW0gdHlwZVxuICogQHBhcmFtIHNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJlbnRXaWRnZXRJZE9mQ29udGVudCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGlkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pOiBzdHJpbmcge1xuICBsZXQgcGFyZW50TGF5b3V0SWRcbiAgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWcud2lkZ2V0c1tpZF1cbiAgICBwYXJlbnRMYXlvdXRJZCA9IHdpZGdldEpzb24/LnBhcmVudD8uW3NpemVNb2RlXT8uWzBdPy5sYXlvdXRJZFxuICB9XG4gIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgY29uc3Qgc2VjdGlvbkpzb24gPSBhcHBDb25maWcuc2VjdGlvbnNbaWRdXG4gICAgcGFyZW50TGF5b3V0SWQgPSBzZWN0aW9uSnNvbj8ucGFyZW50Py5bc2l6ZU1vZGVdPy5bMF0/LmxheW91dElkXG4gIH1cbiAgaWYgKHBhcmVudExheW91dElkKSB7XG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW3BhcmVudExheW91dElkXVxuICAgIGlmIChsYXlvdXRKc29uPy5wYXJlbnQ/LnR5cGUgPT09IExheW91dFBhcmVudFR5cGUuV2lkZ2V0KSB7XG4gICAgICByZXR1cm4gbGF5b3V0SnNvbi5wYXJlbnQuaWRcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBHZXQgY2hpbGRyZW4gd2lkZ2V0cy9zZWN0aW9ucyBpbiBhIHdpZGdldCwgZmluZCBvbmUgbGV2ZWwgb25seS4gSW5jbHVkZXMgYWxsIHNpemUgbW9kZVxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIHBhcmVudFdpZGdldElkXG4gKiBAcGFyYW0gdHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hpbGRyZW5Db250ZW50cyAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIHBhcmVudFdpZGdldElkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICB3aXRoUGVuZGluZzogYm9vbGVhblxuKTogc3RyaW5nW10ge1xuICBjb25zdCBwYXJlbnRXaWRnZXRKc29uID0gYXBwQ29uZmlnLndpZGdldHNbcGFyZW50V2lkZ2V0SWRdXG4gIGlmICghcGFyZW50V2lkZ2V0SnNvbi5sYXlvdXRzKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgbGV0IHJldDogc3RyaW5nW10gPSBbXVxuICBPYmplY3Qua2V5cyhwYXJlbnRXaWRnZXRKc29uLmxheW91dHMpLmZvckVhY2gobGF5b3V0TmFtZSA9PiB7XG4gICAgT2JqZWN0LmtleXMocGFyZW50V2lkZ2V0SnNvbi5sYXlvdXRzW2xheW91dE5hbWVdKS5mb3JFYWNoKHNpemVNb2RlID0+IHtcbiAgICAgIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1twYXJlbnRXaWRnZXRKc29uLmxheW91dHNbbGF5b3V0TmFtZV1bc2l6ZU1vZGVdXVxuICAgICAgcmV0ID0gcmV0LmNvbmNhdChnZXRDb250ZW50c0luTGF5b3V0KGxheW91dEpzb24sIHR5cGUsIHdpdGhQZW5kaW5nKSlcbiAgICB9KVxuICB9KVxuXG4gIC8vIHJlbW92ZSBkdXBsaWNhdGVzXG4gIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQocmV0KSlcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxheW91dEluZm8gZm9yIHRoZSB3aWRnZXQvc2VjdGlvbiwgdGhlcmUgbWF5IGJlIG11bHRpcGxlIGxheW91dEluZm9zIGZvciB0aGUgd2lkZ2V0L3NlY3Rpb24uXG4gKlxuICogT25lIHdpZGdldC9zZWN0aW9uIGlzIGFsbG93ZWQgdG8gYmUgcHV0IGluIG9uZSBsYXlvdXQgb25seSBvbmUgdGltZSwgYnV0IGl0J3MgYWxsb3dlZCBiZSBwdXQgaW4gbXVsdGlwbGUgbGF5b3V0cy5cbiAqIFRoZXJlIGFyZSAyIGNhc2VzIGZvciBtdWx0aXBsZSBsYXlvdXRzOlxuICogICAgKiBPbmUgd2lkZ2V0L3NlY3Rpb24gaXMgYWxsb3dlZCB0byBiZSBwdXQgaW4gbXVsdGlwbGUgc2l6ZSBtb2RlICh0aGlzIGZ1bmN0aW9uIGlzIGZvciBvbmUgc2l6ZSBtb2RlIG9ubHksIHNvIHdlIGRvbid0IGNvbnNpZGVyIHRoaXMgY2FzZSlcbiAqICAgICogSW4gb25lIHNpemUgbW9kZSwgb25lIHdpZGdldCAoaS5lLiBMaXN0IHdpZGdldCkgbWF5IGhhdmUgbXVsdGlwbGUgc3RhdGUgbGF5b3V0cyB0byBob2xkIHRoZSBzYW1lIHdpZGdldC5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBjb250ZW50SWRcbiAqIEBwYXJhbSB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50TGF5b3V0SW5mb3NJbk9uZVNpemVNb2RlIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgY29udGVudElkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pOiBMYXlvdXRJbmZvW10ge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwOlxuICAgIHtcbiAgICAgIGNvbnN0IHNnID0gYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tjb250ZW50SWRdXG4gICAgICBpZiAoc2cucGFyZW50Py5bc2l6ZU1vZGVdKSB7XG4gICAgICAgIHJldHVybiBbc2cucGFyZW50W3NpemVNb2RlXV1cbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uOlxuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0OlxuICAgIHtcbiAgICAgIGxldCBjb250ZW50XG4gICAgICBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICAgIGNvbnRlbnQgPSBhcHBDb25maWcud2lkZ2V0c1tjb250ZW50SWRdXG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbikge1xuICAgICAgICBjb250ZW50ID0gYXBwQ29uZmlnLnNlY3Rpb25zW2NvbnRlbnRJZF1cbiAgICAgIH1cbiAgICAgIGlmIChjb250ZW50Py5wYXJlbnQ/LltzaXplTW9kZV0/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQucGFyZW50W3NpemVNb2RlXVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gW11cbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHNpemUgbW9kZSBvZiB0aGUgbGF5b3V0LiBCZWNhdXNlIHVuZGVyIG9uZSBzaXplIG1vZGUsIG9ubHkgd2lkZ2V0IG1heSBoYXZlIG11bHRpcGxlIGxheW91dHMsXG4gKiBhbmQgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIG9ubHkgZm9yIHdpZGdldHMgdGhhdCBoYXZlIGxheW91dHMsIHNvIHBhc3Mgd2lkZ2V0IGlkIHRvIG1ha2UgdGhlIHNlYXJjaCBlYXN5LlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGxheW91dElkXG4gKiBAcGFyYW0gd2lkZ2V0SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJyb3dzZXJTaXplTW9kZUJ5TGF5b3V0SWRBbmRXaWRnZXRJZCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dElkOiBzdHJpbmcsXG4gIHdpZGdldElkOiBzdHJpbmdcbik6IEJyb3dzZXJTaXplTW9kZSB7XG4gIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgaWYgKCF3aWRnZXRKc29uKSByZXR1cm4gdW5kZWZpbmVkXG4gIGxldCBzaXplTW9kZVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgT2JqZWN0LmtleXMod2lkZ2V0SnNvbi5sYXlvdXRzKS5maW5kKG5hbWUgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IHJlcyA9IE9iamVjdC5rZXlzKHdpZGdldEpzb24ubGF5b3V0c1tuYW1lXSkuZmluZChkZXZpY2UgPT4ge1xuICAgICAgaWYgKHdpZGdldEpzb24ubGF5b3V0c1tuYW1lXVtkZXZpY2VdID09PSBsYXlvdXRJZCkge1xuICAgICAgICBzaXplTW9kZSA9IGRldmljZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgaWYgKHJlcykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH0pXG4gIHJldHVybiBzaXplTW9kZVxufVxuXG4vKipcbiAqIEdldCB0aGUgc2l6ZSBtb2RlIHRoYXQgdGhlIGxheW91dCBiZWxvbmdzIHRvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCcm93c2VyU2l6ZU1vZGVCeUxheW91dElkIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJZDogc3RyaW5nKTogQnJvd3NlclNpemVNb2RlIHtcbiAgcmV0dXJuIGFwcENvbmZpZ1V0aWxzLmdldFNpemVNb2RlT2ZBTGF5b3V0KGFwcENvbmZpZywgbGF5b3V0SWQpXG59XG5cbi8qKlxuICogRmluZCBhbGwgbGF5b3V0SW5mb3MgdGhhdCB0aGUgY29udGVudCBpZCwgc2VjdGlvbiBvciB3aWRnZXQsIGlzIGVxdWFsIHRvIGVhY2ggb3RoZXIgaW4gdGhlIHdpZGdldCBvbiB0aGUgYnJvd3NlclNpemVNb2RlXG4gKlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGxheW91dEluZm9cbiAqIEBwYXJhbSBwYXJlbnRXaWRnZXRJZFxuICogQHBhcmFtIHNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWxhdGVkTGF5b3V0SW5mb3NJbldpZGdldEJ5TGF5b3V0SW5mbyAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dEluZm86IExheW91dEluZm8sXG4gIHBhcmVudFdpZGdldElkOiBzdHJpbmcsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IExheW91dEluZm9bXSB7XG4gIGNvbnN0IHBhcmVudFdpZGdldCA9IGFwcENvbmZpZy53aWRnZXRzW3BhcmVudFdpZGdldElkXVxuICBpZiAoIXBhcmVudFdpZGdldCkgcmV0dXJuIFtdXG4gIGNvbnN0IGxheW91dEl0ZW0gPVxuICAgIGFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdICYmXG4gICAgYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF0uY29udGVudCAmJlxuICAgIGFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SW5mby5sYXlvdXRJdGVtSWRdXG4gIGlmICghbGF5b3V0SXRlbSkgcmV0dXJuIFtdXG5cbiAgY29uc3QgY29udGVudFR5cGUgPSBsYXlvdXRJdGVtLnR5cGVcbiAgbGV0IGNvbnRlbnRJZFxuICAvLyBObyBuZWVkIHRvIGRlYWwgd2l0aCBzY3JlZW4gZ3JvdXAgYXMgaXQgY2Fubm90IGJlIHBsYWNlZCBpbiBhIGxheW91dCB3aWRnZXRcbiAgaWYgKGNvbnRlbnRUeXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgY29udGVudElkID0gbGF5b3V0SXRlbS5zZWN0aW9uSWRcbiAgfSBlbHNlIGlmIChjb250ZW50VHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgY29udGVudElkID0gbGF5b3V0SXRlbS53aWRnZXRJZFxuICB9XG5cbiAgLy8gd2lkZ2V0SWQgbWF5IGJlIHVuZGVmaW5lZCBmb3IgcGxhY2Vob2xkZXJcbiAgaWYgKCFjb250ZW50SWQpIHtcbiAgICBpZiAoY2hlY2tJc0xheW91dEluZm9JbldpZGdldChhcHBDb25maWcsIHBhcmVudFdpZGdldElkLCBsYXlvdXRJbmZvKSkge1xuICAgICAgcmV0dXJuIFtsYXlvdXRJbmZvXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0Q29udGVudExheW91dEluZm9zSW5XaWRnZXQoYXBwQ29uZmlnLCBjb250ZW50SWQsIGNvbnRlbnRUeXBlLCBwYXJlbnRXaWRnZXRJZCwgc2l6ZU1vZGUpXG59XG5cbi8qKlxuICogU2FtZSBhcyBgZ2V0UmVsYXRlZExheW91dEluZm9zSW5XaWRnZXRCeUxheW91dEluZm9gLCBidXQgcmV0dXJuIHRoZSBsYXlvdXQgaXRlbXNcbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBsYXlvdXRJbmZvXG4gKiBAcGFyYW0gcGFyZW50V0lkXG4gKiBAcGFyYW0gYnJvd3NlclNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWxhdGVkTGF5b3V0SXRlbXNJbldpZGdldEJ5TGF5b3V0SW5mbyAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dEluZm86IExheW91dEluZm8sXG4gIHBhcmVudFdJZDogc3RyaW5nLFxuICBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogTGF5b3V0SXRlbUpzb25bXSB7XG4gIHJldHVybiBnZXRSZWxhdGVkTGF5b3V0SW5mb3NJbldpZGdldEJ5TGF5b3V0SW5mbyhhcHBDb25maWcsIGxheW91dEluZm8sIHBhcmVudFdJZCwgYnJvd3NlclNpemVNb2RlKS5tYXAoXG4gICAgbGF5b3V0SW5mbyA9PiBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJbmZvLmxheW91dElkXVtsYXlvdXRJbmZvLmxheW91dEl0ZW1JZF1cbiAgKVxufVxuXG4vKipcbiAqIEZpbmQgbGF5b3V0IGluZm9zIGluIGEgd2lkZ2V0IHRoYXQgaG9sZHMgdGhlIHNwZWNpZmljIHdpZGdldCBvciBzZWN0aW9uLlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGlkIFRoZSB3aWRnZXQgb3Igc2VjdGlvbiBpZCB0byBiZSBzZWFyY2hlZFxuICogQHBhcmFtIHR5cGVcbiAqIEBwYXJhbSBwYXJlbnRXaWRnZXRJZCBUaGUgY29udGFpbmVyIHdpZGdldFxuICogQHBhcmFtIGJyb3dzZXJTaXplTW9kZVxuICovXG5mdW5jdGlvbiBnZXRDb250ZW50TGF5b3V0SW5mb3NJbldpZGdldCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGlkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICBwYXJlbnRXaWRnZXRJZDogc3RyaW5nLFxuICBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogTGF5b3V0SW5mb1tdIHtcbiAgY29uc3QgcGFyZW50V2lkZ2V0ID0gYXBwQ29uZmlnLndpZGdldHNbcGFyZW50V2lkZ2V0SWRdXG4gIGlmICghcGFyZW50V2lkZ2V0IHx8ICFpZCkgcmV0dXJuIFtdXG4gIGNvbnN0IGl0ZW1zID0gW11cbiAgcGFyZW50V2lkZ2V0LmxheW91dHMgJiZcbiAgICBPYmplY3Qua2V5cyhwYXJlbnRXaWRnZXQubGF5b3V0cykuZm9yRWFjaChzID0+IHtcbiAgICAgIGNvbnN0IGxheW91dElkID0gcGFyZW50V2lkZ2V0LmxheW91dHNbc11bYnJvd3NlclNpemVNb2RlXVxuICAgICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgICAgbGF5b3V0SnNvbiAmJlxuICAgICAgICBsYXlvdXRKc29uLmNvbnRlbnQgJiZcbiAgICAgICAgT2JqZWN0LmtleXMobGF5b3V0SnNvbi5jb250ZW50KS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgY29uc3QgbGF5b3V0RWxlID0gbGF5b3V0SnNvbi5jb250ZW50W2tleV1cbiAgICAgICAgICBpZiAobGF5b3V0RWxlLnR5cGUgPT09IHR5cGUgJiYgKGxheW91dEVsZS53aWRnZXRJZCA9PT0gaWQgfHwgbGF5b3V0RWxlLnNlY3Rpb25JZCA9PT0gaWQgfHwgbGF5b3V0RWxlLnNjcmVlbkdyb3VwSWQgPT09IGlkKSkge1xuICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGxheW91dElkOiBsYXlvdXRKc29uLmlkLFxuICAgICAgICAgICAgICBsYXlvdXRJdGVtSWQ6IGxheW91dEVsZS5pZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGxheW91dEVsZS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHdKc29uID0gYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0RWxlLndpZGdldElkXVxuICAgICAgICAgICAgaWYgKHdKc29uICYmIHdKc29uLm1hbmlmZXN0LndpZGdldFR5cGUgPT09IFdpZGdldFR5cGUuTGF5b3V0KSB7XG4gICAgICAgICAgICAgIGl0ZW1zLnB1c2goLi4uZ2V0Q29udGVudExheW91dEluZm9zSW5XaWRnZXQoYXBwQ29uZmlnLCBpZCwgdHlwZSwgd0pzb24uaWQsIGJyb3dzZXJTaXplTW9kZSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG4gIHJldHVybiBpdGVtc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJc0xheW91dEluZm9JbldpZGdldCAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgcGFyZW50V0lkOiBzdHJpbmcsIGxheW91dEluZm86IExheW91dEluZm8pOiBib29sZWFuIHtcbiAgY29uc3QgcGFyZW50V2lkZ2V0ID0gYXBwQ29uZmlnLndpZGdldHNbcGFyZW50V0lkXVxuICBpZiAoIXBhcmVudFdpZGdldCkgcmV0dXJuIGZhbHNlXG4gIGxldCBmaW5kID0gZmFsc2VcbiAgcGFyZW50V2lkZ2V0LmxheW91dHMgJiZcbiAgICBPYmplY3Qua2V5cyhwYXJlbnRXaWRnZXQubGF5b3V0cykuc29tZShsYXlvdXROYW1lID0+IHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJlbnRXaWRnZXQubGF5b3V0c1tsYXlvdXROYW1lXSkuc29tZShzaXplTW9kZSA9PiB7XG4gICAgICAgIGNvbnN0IGxheW91dElkID0gcGFyZW50V2lkZ2V0LmxheW91dHNbbGF5b3V0TmFtZV1bc2l6ZU1vZGVdXG4gICAgICAgIGNvbnN0IGxheW91dEl0ZW1JZHMgPSBnZXRMYXlvdXRJdGVtSWRzKGFwcENvbmZpZywgbGF5b3V0SWQsIHRydWUpXG4gICAgICAgIHJldHVybiBsYXlvdXRJdGVtSWRzLnNvbWUoaXRlbUlkID0+IHtcbiAgICAgICAgICBpZiAobGF5b3V0SW5mby5sYXlvdXRJZCA9PT0gbGF5b3V0SWQgJiYgbGF5b3V0SW5mby5sYXlvdXRJdGVtSWQgPT09IGl0ZW1JZCkge1xuICAgICAgICAgICAgZmluZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICByZXR1cm4gZmluZFxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgd2lkZ2V0L3NlY3Rpb24gaWRzIHRoYXQgaW4gdGhlIHNhbWUgY29udGFpbmVyIHdpdGggdGhlIHdpZGdldFxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIHdpZGdldElkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50c0luVGhlU2FtZUNvbnRhaW5lciAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGlkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICByZXRUeXBlOiBMYXlvdXRJdGVtVHlwZSxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgd2l0aFBlbmRpbmcgPSBmYWxzZVxuKTogc3RyaW5nW10ge1xuICBjb25zdCBjb250YWluZXJJbmZvID0gZ2V0Q29udGVudENvbnRhaW5lckluZm8oYXBwQ29uZmlnLCBpZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICBpZiAoIWNvbnRhaW5lckluZm8pIHtcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiBnZXRDb250ZW50c0luQ29udGFpbmVyKGFwcENvbmZpZywgY29udGFpbmVySW5mbywgcmV0VHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgd2lkZ2V0L3NlY3Rpb24gaWRzIHRoYXQgaW4gdGhlIHNhbWUgcm9vdCBjb250YWluZXIgd2l0aCB0aGUgd2lkZ2V0XG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gd2lkZ2V0SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRzSW5UaGVTYW1lUm9vdENvbnRhaW5lciAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGlkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICByZXRUeXBlOiBMYXlvdXRJdGVtVHlwZSxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgd2l0aFBlbmRpbmcgPSBmYWxzZVxuKTogc3RyaW5nW10ge1xuICBjb25zdCBjb250YWluZXJJbmZvID0gZ2V0Q29udGVudFJvb3RDb250YWluZXJJbmZvKGFwcENvbmZpZywgaWQsIHR5cGUsIHNpemVNb2RlLCB3aXRoUGVuZGluZylcbiAgaWYgKCFjb250YWluZXJJbmZvKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICByZXR1cm4gZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZShhcHBDb25maWcsIGNvbnRhaW5lckluZm8sIHJldFR5cGUsIHNpemVNb2RlLCB3aXRoUGVuZGluZylcbn1cblxuaW50ZXJmYWNlIEFuY2hvclBvaW50IHtcbiAgaWQ6IHN0cmluZ1xuICBsYWJlbDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBTY3JlZW5BbmNob3JQb2ludCBleHRlbmRzIEFuY2hvclBvaW50IHtcbiAgc2NyZWVuczogQW5jaG9yUG9pbnRbXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmxvY2tBbmNob3JQb2ludHNJblBhZ2UgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBwYWdlSWQ6IHN0cmluZyxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogQW5jaG9yUG9pbnRbXSB7XG4gIGNvbnN0IHBhZ2VKc29uID0gYXBwQ29uZmlnLnBhZ2VzW3BhZ2VJZF1cbiAgY29uc3QgbGF5b3V0SWQgPSBwYWdlSnNvbj8ubGF5b3V0Py5bc2l6ZU1vZGVdXG4gIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgY29uc3QgYmxvY2tzID0gW11cblxuICBpZiAobGF5b3V0SnNvbj8udHlwZSA9PT0gTGF5b3V0VHlwZS5GbG93TGF5b3V0KSB7XG4gICAgT2JqZWN0LmtleXMobGF5b3V0SnNvbi5jb250ZW50ID8/IHt9KS5zb3J0KCkuZm9yRWFjaChsYXlvdXRJdGVtSWQgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dEpzb24uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gICAgICBpZiAobGF5b3V0SXRlbS5pc1BlbmRpbmcgfHwgbGF5b3V0SXRlbS5zZXR0aW5nPy5pc0Zsb2F0aW5nKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IGdlbmVyYXRlQmxvY2tBbmNob3JQb2ludChhcHBDb25maWcsIHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9KVxuICAgICAgICBpZiAoYW5jaG9yKSB7XG4gICAgICAgICAgYmxvY2tzLnB1c2goYW5jaG9yKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuICByZXR1cm4gYmxvY2tzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JlZW5BbmNob3JQb2ludHNJblBhZ2UgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBwYWdlSWQ6IHN0cmluZyxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogU2NyZWVuQW5jaG9yUG9pbnRbXSB7XG4gIGNvbnN0IHBhZ2VKc29uID0gYXBwQ29uZmlnLnBhZ2VzW3BhZ2VJZF1cbiAgY29uc3QgbGF5b3V0SWQgPSBwYWdlSnNvbj8ubGF5b3V0Py5bc2l6ZU1vZGVdXG4gIGNvbnN0IGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgY29uc3Qgc2NyZWVuR3JvdXBzID0gW11cblxuICBpZiAobGF5b3V0SnNvbj8udHlwZSA9PT0gTGF5b3V0VHlwZS5GbG93TGF5b3V0KSB7XG4gICAgT2JqZWN0LmtleXMobGF5b3V0SnNvbi5jb250ZW50ID8/IHt9KS5zb3J0KCkuZm9yRWFjaChsYXlvdXRJdGVtSWQgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dEpzb24uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gICAgICBpZiAobGF5b3V0SXRlbS5pc1BlbmRpbmcgfHwgbGF5b3V0SXRlbS5zZXR0aW5nPy5pc0Zsb2F0aW5nKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXApIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuR3JvdXAgPSBhcHBDb25maWcuc2NyZWVuR3JvdXBzW2xheW91dEl0ZW0uc2NyZWVuR3JvdXBJZF1cbiAgICAgICAgY29uc3Qgc2NyZWVucyA9IFtdXG4gICAgICAgIHNjcmVlbkdyb3VwPy5zY3JlZW5zLmZvckVhY2goc2NyZWVuSWQgPT4ge1xuICAgICAgICAgIGNvbnN0IGFuY2hvciA9IGdlbmVyYXRlU2NyZWVuQW5jaG9yUG9pbnQoYXBwQ29uZmlnLCBsYXlvdXRJZCwgc2NyZWVuSWQpXG4gICAgICAgICAgaWYgKGFuY2hvcikge1xuICAgICAgICAgICAgc2NyZWVucy5wdXNoKGFuY2hvcilcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHNjcmVlbkdyb3Vwcy5wdXNoKHsgaWQ6IHNjcmVlbkdyb3VwLmlkLCBsYWJlbDogc2NyZWVuR3JvdXAubGFiZWwsIHNjcmVlbnMgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIHJldHVybiBzY3JlZW5Hcm91cHNcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVCbG9ja0FuY2hvclBvaW50IChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogQW5jaG9yUG9pbnQge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXS5jb250ZW50W2xheW91dEl0ZW1JZF1cblxuICBjb25zdCB3aWRnZXRKc29uID0gYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgaWYgKHdpZGdldEpzb24pIHtcbiAgICByZXR1cm4geyBsYWJlbDogd2lkZ2V0SnNvbi5sYWJlbCwgaWQ6IGAke2xheW91dElkfV9ibG9ja18ke2xheW91dEl0ZW1JZH1gIH1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVNjcmVlbkFuY2hvclBvaW50IChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJZDogc3RyaW5nLCBzY3JlZW5JZDogc3RyaW5nKTogQW5jaG9yUG9pbnQge1xuICBjb25zdCBzY3JlZW5Kc29uID0gYXBwQ29uZmlnLnNjcmVlbnNbc2NyZWVuSWRdXG5cbiAgaWYgKHNjcmVlbkpzb24pIHtcbiAgICByZXR1cm4geyBsYWJlbDogc2NyZWVuSnNvbi5sYWJlbCwgaWQ6IGAke2xheW91dElkfV9zY3JlZW5fJHtzY3JlZW5JZH1gIH1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZsYXRDb250YWluZXJNYXBzIHtcbiAgaWQ6IHN0cmluZ1xuICB0eXBlOiBDb250YWluZXJUeXBlXG4gIG1hcHM/OiBzdHJpbmdbXVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gY3VycmVudENvbnRhaW5lclR5cGUgRGlhbG9nIG9yIFBhZ2VcbiAqIEBwYXJhbSBjdXJyZW50SWQgZGlhbG9nIG9yIHBhZ2UgaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcFdpZGdldHMgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIGN1cnJlbnRDb250YWluZXJUeXBlOiBDb250YWluZXJUeXBlLCBjdXJyZW50SWQ6IHN0cmluZyk6IEZsYXRDb250YWluZXJNYXBzW10ge1xuICBjb25zdCBmbGF0Q29udGFpbmVyTWFwczogRmxhdENvbnRhaW5lck1hcHNbXSA9IFtdXG5cbiAgLy8gaWYgbWFwIGlzIGluIGhlYWRlci9mb290ZXIsIHB1dCB0aGVtIGluIHRoZSBmaXJzdCBjdXJyZW50IHBhZ2Ugb25seVxuICBjb25zdCBjdXJyZW50SXRlbTogRmxhdENvbnRhaW5lck1hcHMgPSB7XG4gICAgaWQ6IGN1cnJlbnRJZCxcbiAgICB0eXBlOiBjdXJyZW50Q29udGFpbmVyVHlwZSxcbiAgICBtYXBzOiBnZXRDb250ZW50c0luQ29udGFpbmVyUmVjdXJzaXZlQWR2KGFwcENvbmZpZywgeyB0eXBlOiBjdXJyZW50Q29udGFpbmVyVHlwZSwgaWQ6IGN1cnJlbnRJZCB9LCBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsIHNpemVNb2RlLCB7IGluY2x1ZGVQZW5kaW5nOiBmYWxzZSwgaW5jbHVkZU90aGVyU2l6ZU1vZGU6IGZhbHNlIH0pXG4gICAgICAuZmlsdGVyKHdpZGdldElkID0+IGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXS5tYW5pZmVzdC5wcm9wZXJ0aWVzLmNhbkNyZWF0ZU1hcFZpZXcpXG4gIH1cblxuICBmbGF0Q29udGFpbmVyTWFwcy5wdXNoKGN1cnJlbnRJdGVtKVxuXG4gIE9iamVjdC5rZXlzKGFwcENvbmZpZy5wYWdlcykuZm9yRWFjaChwYWdlSWQgPT4ge1xuICAgIGlmIChwYWdlSWQgPT09IGN1cnJlbnRJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgaXRlbTogRmxhdENvbnRhaW5lck1hcHMgPSB7XG4gICAgICBpZDogcGFnZUlkLFxuICAgICAgdHlwZTogQ29udGFpbmVyVHlwZS5QYWdlLFxuICAgICAgbWFwczogZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZShhcHBDb25maWcsIHsgaWQ6IHBhZ2VJZCwgdHlwZTogQ29udGFpbmVyVHlwZS5QYWdlIH0sIExheW91dEl0ZW1UeXBlLldpZGdldCwgc2l6ZU1vZGUpXG4gICAgICAgIC5maWx0ZXIod2lkZ2V0SWQgPT4gYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLm1hbmlmZXN0LnByb3BlcnRpZXMuY2FuQ3JlYXRlTWFwVmlldylcbiAgICB9XG4gICAgZmxhdENvbnRhaW5lck1hcHMucHVzaChpdGVtKVxuICB9KVxuXG4gIE9iamVjdC5rZXlzKGFwcENvbmZpZy5kaWFsb2dzIHx8IHt9KS5mb3JFYWNoKGRsZ0lkID0+IHtcbiAgICBpZiAoZGxnSWQgPT09IGN1cnJlbnRJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgaXRlbTogRmxhdENvbnRhaW5lck1hcHMgPSB7XG4gICAgICBpZDogZGxnSWQsXG4gICAgICB0eXBlOiBDb250YWluZXJUeXBlLkRpYWxvZyxcbiAgICAgIG1hcHM6IGdldENvbnRlbnRzSW5Db250YWluZXJSZWN1cnNpdmUoYXBwQ29uZmlnLCB7IGlkOiBkbGdJZCwgdHlwZTogQ29udGFpbmVyVHlwZS5EaWFsb2cgfSwgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LCBzaXplTW9kZSlcbiAgICAgICAgLmZpbHRlcih3aWRnZXRJZCA9PiBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0ubWFuaWZlc3QucHJvcGVydGllcy5jYW5DcmVhdGVNYXBWaWV3KVxuICAgIH1cbiAgICBmbGF0Q29udGFpbmVyTWFwcy5wdXNoKGl0ZW0pXG4gIH0pXG5cbiAgcmV0dXJuIGZsYXRDb250YWluZXJNYXBzXG59XG4iLCJleHBvcnQge1xuICBmaW5kTGF5b3V0SWQsXG4gIGZpbmRMYXlvdXRJdGVtLFxuICBmaW5kUGFyZW50TGF5b3V0SW5mbyxcbiAgZ2V0Q29udGVudElkSW5MYXlvdXRJdGVtLFxuICBnZXRDb250ZW50c0luTGF5b3V0LFxuICBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlLFxuICBnZXRDb250ZW50c0luTGF5b3V0V2l0aFJlY3J1c2l2ZUxheW91dHMsXG4gIGdldENvbnRlbnRMYXlvdXRJdGVtLFxuICBnZXRMYXlvdXRJdGVtSWRzLFxuICBnZXRMYXlvdXRJbmZvc0J5VHlwZSxcbiAgZ2V0V2lkZ2V0SWRUaGF0VXNlVGhlTGF5b3V0SWQsXG4gIGdldENvbnRlbnRDb250YWluZXJJbmZvLFxuICBnZXRDb250ZW50Um9vdENvbnRhaW5lckluZm8sXG4gIGdldENvbnRlbnRzSW5UaGVTYW1lQ29udGFpbmVyLFxuICBnZXRDb250ZW50c0luVGhlU2FtZVJvb3RDb250YWluZXIsXG4gIGdldENvbnRlbnRzSW5Db250YWluZXIsXG4gIGdldENvbnRlbnRzSW5Db250YWluZXJSZWN1cnNpdmUsXG4gIGdldENvbnRlbnRzSW5Db250YWluZXJSZWN1cnNpdmVBZHYsXG4gIGdldFJlbGF0ZWRMYXlvdXRJdGVtc0luV2lkZ2V0QnlMYXlvdXRJbmZvLFxuICBnZXRSZWxhdGVkTGF5b3V0SW5mb3NJbldpZGdldEJ5TGF5b3V0SW5mbyxcbiAgZ2V0TGF5b3V0SW5mb3NIb2xkY29udGVudCxcbiAgZ2V0QnJvd3NlclNpemVNb2RlQnlMYXlvdXRJZEFuZFdpZGdldElkLFxuICBnZXRCcm93c2VyU2l6ZU1vZGVCeUxheW91dElkLFxuICBnZXRDaGlsZHJlbkNvbnRlbnRzLFxuICBnZXRDb250ZW50TGF5b3V0SW5mb3NJbk9uZVNpemVNb2RlLFxuICBnZXRQYXJlbnRXaWRnZXRJZE9mQ29udGVudCxcbiAgZ2V0QmxvY2tBbmNob3JQb2ludHNJblBhZ2UsXG4gIGdldFNjcmVlbkFuY2hvclBvaW50c0luUGFnZSxcbiAgZ2V0TWFwV2lkZ2V0c1xufSBmcm9tICcuL2NvbnRlbnRzJ1xuZXhwb3J0IHsgZ2V0U2VjdGlvbkluZm8gfSBmcm9tICcuL3NlY3Rpb24nXG5leHBvcnQge1xuICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJblBhZ2UsXG4gIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luRGlhbG9nLFxuICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwLFxuXG4gIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlLFxuICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZUluUGFnZSxcbiAgZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGVJbkRpYWxvZ1xufSBmcm9tICcuL3BlbmRpbmcnXG4iLCJpbXBvcnQge1xuICB0eXBlIElNQXBwQ29uZmlnLFxuICB0eXBlIElNU2l6ZU1vZGVMYXlvdXRKc29uLFxuICBCcm93c2VyU2l6ZU1vZGUsXG4gIHR5cGUgTGF5b3V0SW5mbyxcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIFdpZGdldFR5cGUsXG4gIFBhZ2VQYXJ0XG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUsIGdldExheW91dEluZm9zQnlUeXBlIH0gZnJvbSAnLi9jb250ZW50cydcblxuLyoqXG4gKiBSZXR1cm4gdGhlIHBlbmRpbmcgd2lkZ2V0cy9zZWN0aW9ucyBpbiB0aGUgY3VycmVudCBzaXplIG1vZGUuXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gcGFnZUlkXG4gKiBAcGFyYW0gc2l6ZU1vZGVcbiAqIEBwYXJhbSBwYWdlUGFydFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVuZGluZ0xheW91dEl0ZW1zSW5QYWdlIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgcGFnZUlkOiBzdHJpbmcsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gIHBhZ2VQYXJ0OiBQYWdlUGFydFxuKTogTGF5b3V0SW5mb1tdIHtcbiAgY29uc3QgcGFnZUpzb24gPSBhcHBDb25maWcucGFnZXNbcGFnZUlkXVxuICBpZiAoIXBhZ2VKc29uKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICBpZiAocGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkhlYWRlcikge1xuICAgIGlmICghcGFnZUpzb24uaGVhZGVyIHx8ICFhcHBDb25maWcuaGVhZGVyKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgcmV0dXJuIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luTGF5b3V0V2l0aERlZXAoYXBwQ29uZmlnLCBhcHBDb25maWcuaGVhZGVyLmxheW91dFtzaXplTW9kZV0sIHNpemVNb2RlKVxuICB9IGVsc2UgaWYgKHBhZ2VQYXJ0ID09PSBQYWdlUGFydC5Gb290ZXIpIHtcbiAgICBpZiAoIXBhZ2VKc29uLmZvb3RlciB8fCAhYXBwQ29uZmlnLmZvb3Rlcikge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIHJldHVybiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwKGFwcENvbmZpZywgYXBwQ29uZmlnLmZvb3Rlci5sYXlvdXRbc2l6ZU1vZGVdLCBzaXplTW9kZSlcbiAgfSBlbHNlIGlmIChwYWdlUGFydCA9PT0gUGFnZVBhcnQuQm9keSkge1xuICAgIHJldHVybiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwKGFwcENvbmZpZywgcGFnZUpzb24ubGF5b3V0W3NpemVNb2RlXSwgc2l6ZU1vZGUpXG4gIH1cblxuICByZXR1cm4gW11cbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHBlbmRpbmcgd2lkZ2V0cy9zZWN0aW9ucyBmcm9tIG90aGVyIHNpemUgbW9kZS5cbiAqIFRoZSBwZW5kaW5nIG1lYW5zOiB0aGUgd2lkZ2V0cy9zZWN0aW9ucyBhcmUgaW4gcGFnZSdzIG90aGVyIG1vZGUgYnV0IGFyZSBub3QgaW4gdGhlIGN1cnJlbnQgbW9kZSAocGFzc2VkIGluKVxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIHBhZ2VJZFxuICogQHBhcmFtIHR5cGVcbiAqIEBwYXJhbSBzaXplTW9kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGVJblBhZ2UgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIHBhZ2VJZDogc3RyaW5nLCBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLCBwYWdlUGFydDogUGFnZVBhcnQpOiBMYXlvdXRJbmZvW10ge1xuICBjb25zdCBwYWdlSnNvbiA9IGFwcENvbmZpZy5wYWdlc1twYWdlSWRdXG4gIGlmICghcGFnZUpzb24pIHtcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIGlmIChwYWdlUGFydCA9PT0gUGFnZVBhcnQuSGVhZGVyKSB7XG4gICAgaWYgKCFwYWdlSnNvbi5oZWFkZXIgfHwgIWFwcENvbmZpZy5oZWFkZXIpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICByZXR1cm4gZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUoYXBwQ29uZmlnLCBhcHBDb25maWcuaGVhZGVyLmxheW91dCwgc2l6ZU1vZGUpXG4gIH0gZWxzZSBpZiAocGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkZvb3Rlcikge1xuICAgIGlmICghcGFnZUpzb24uZm9vdGVyIHx8ICFhcHBDb25maWcuZm9vdGVyKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgcmV0dXJuIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlKGFwcENvbmZpZywgYXBwQ29uZmlnLmZvb3Rlci5sYXlvdXQsIHNpemVNb2RlKVxuICB9IGVsc2UgaWYgKHBhZ2VQYXJ0ID09PSBQYWdlUGFydC5Cb2R5KSB7XG4gICAgcmV0dXJuIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlKGFwcENvbmZpZywgcGFnZUpzb24ubGF5b3V0LCBzaXplTW9kZSlcbiAgfVxuXG4gIHJldHVybiBbXVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcGVuZGluZyB3aWRnZXRzL3NlY3Rpb25zIGluIHRoZSBjdXJyZW50IHNpemUgbW9kZS5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBkaWFsb2dJZFxuICogQHBhcmFtIHNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkRpYWxvZyAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGRpYWxvZ0lkOiBzdHJpbmcsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IExheW91dEluZm9bXSB7XG4gIGNvbnN0IGRpYWxvZ0pzb24gPSBhcHBDb25maWcuZGlhbG9nc1tkaWFsb2dJZF1cbiAgaWYgKCFkaWFsb2dKc29uKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICByZXR1cm4gZ2V0UGVuZGluZ0xheW91dEl0ZW1zSW5MYXlvdXRXaXRoRGVlcChhcHBDb25maWcsIGRpYWxvZ0pzb24ubGF5b3V0W3NpemVNb2RlXSwgc2l6ZU1vZGUpXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBwZW5kaW5nIHdpZGdldHMvc2VjdGlvbnMgZnJvbSBvdGhlciBzaXplIG1vZGUuXG4gKiBUaGUgcGVuZGluZyBtZWFuczogdGhlIHdpZGdldHMvc2VjdGlvbnMgYXJlIGluIGRpYWxvZydzIG90aGVyIG1vZGUgYnV0IGFyZSBub3QgaW4gdGhlIGN1cnJlbnQgbW9kZSAocGFzc2VkIGluKVxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGRpYWxvZ0lkXG4gKiBAcGFyYW0gc2l6ZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlSW5EaWFsb2cgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGRpYWxvZ0lkOiBzdHJpbmcsIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUpOiBMYXlvdXRJbmZvW10ge1xuICBjb25zdCBkaWFsb2dKc29uID0gYXBwQ29uZmlnLmRpYWxvZ3NbZGlhbG9nSWRdXG4gIGlmICghZGlhbG9nSnNvbikge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgcmV0dXJuIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlKGFwcENvbmZpZywgZGlhbG9nSnNvbi5sYXlvdXQsIHNpemVNb2RlKVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcGVuZGluZyB3aWRnZXRzL3NlY3Rpb25zIGluIHRoZSBjdXJyZW50IHNpemUgbW9kZS5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBsYXlvdXRJZFxuICogQHBhcmFtIHNpemVNb2RlIHRoZSBjdXJyZW50IHNpemUgbW9kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVuZGluZ0xheW91dEl0ZW1zSW5MYXlvdXRXaXRoRGVlcCAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dElkOiBzdHJpbmcsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IExheW91dEluZm9bXSB7XG4gIGxldCByZXRJdGVtcyA9IFtdXG4gIGNvbnN0IHdpZGdldEl0ZW1zID0gZ2V0TGF5b3V0SW5mb3NCeVR5cGUoYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLCBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsIHRydWUpXG4gIHdpZGdldEl0ZW1zLmZvckVhY2god2lkZ2V0SXRlbSA9PiB7XG4gICAgY29uc3QgaXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW3dpZGdldEl0ZW0ubGF5b3V0SWRdLmNvbnRlbnRbd2lkZ2V0SXRlbS5sYXlvdXRJdGVtSWRdXG4gICAgaWYgKGl0ZW0uaXNQZW5kaW5nKSB7XG4gICAgICByZXRJdGVtcy5wdXNoKHdpZGdldEl0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChhcHBDb25maWcud2lkZ2V0c1tpdGVtLndpZGdldElkXS5sYXlvdXRzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGFwcENvbmZpZy53aWRnZXRzW2l0ZW0ud2lkZ2V0SWRdLmxheW91dHMpLmZvckVhY2gobGF5b3V0TmFtZSA9PiB7XG4gICAgICAgICAgcmV0SXRlbXMgPSByZXRJdGVtcy5jb25jYXQoXG4gICAgICAgICAgICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwKFxuICAgICAgICAgICAgICBhcHBDb25maWcsXG4gICAgICAgICAgICAgIGFwcENvbmZpZy53aWRnZXRzW2l0ZW0ud2lkZ2V0SWRdLmxheW91dHNbbGF5b3V0TmFtZV1bc2l6ZU1vZGVdLFxuICAgICAgICAgICAgICBzaXplTW9kZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3Qgc2VjdGlvbkl0ZW1zID0gZ2V0TGF5b3V0SW5mb3NCeVR5cGUoYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLCBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uLCB0cnVlKVxuICBzZWN0aW9uSXRlbXMuZm9yRWFjaChzZWN0aW9uSXRlbSA9PiB7XG4gICAgY29uc3QgaXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW3NlY3Rpb25JdGVtLmxheW91dElkXS5jb250ZW50W3NlY3Rpb25JdGVtLmxheW91dEl0ZW1JZF1cbiAgICBpZiAoaXRlbS5pc1BlbmRpbmcpIHtcbiAgICAgIHJldEl0ZW1zLnB1c2goc2VjdGlvbkl0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChhcHBDb25maWcuc2VjdGlvbnNbaXRlbS5zZWN0aW9uSWRdLnZpZXdzKSB7XG4gICAgICAgIGFwcENvbmZpZy5zZWN0aW9uc1tpdGVtLnNlY3Rpb25JZF0udmlld3MuZm9yRWFjaCh2aWV3SWQgPT4ge1xuICAgICAgICAgIHJldEl0ZW1zID0gcmV0SXRlbXMuY29uY2F0KFxuICAgICAgICAgICAgZ2V0UGVuZGluZ0xheW91dEl0ZW1zSW5MYXlvdXRXaXRoRGVlcChhcHBDb25maWcsIGFwcENvbmZpZy52aWV3c1t2aWV3SWRdLmxheW91dFtzaXplTW9kZV0sIHNpemVNb2RlKVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3Qgc2dJdGVtcyA9IGdldExheW91dEluZm9zQnlUeXBlKGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXSwgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXAsIHRydWUpXG4gIHNnSXRlbXMuZm9yRWFjaChzZ0l0ZW0gPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tzZ0l0ZW0ubGF5b3V0SWRdLmNvbnRlbnRbc2dJdGVtLmxheW91dEl0ZW1JZF1cbiAgICBpZiAoaXRlbS5pc1BlbmRpbmcpIHtcbiAgICAgIHJldEl0ZW1zLnB1c2goc2dJdGVtKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzZ0lkID0gaXRlbS5zY3JlZW5Hcm91cElkXG4gICAgICBhcHBDb25maWcuc2NyZWVuR3JvdXBzPy5bc2dJZF0uc2NyZWVucz8uZm9yRWFjaChzY3JlZW5JZCA9PiB7XG4gICAgICAgIGNvbnN0IHNjcmVlbkpzb24gPSBhcHBDb25maWc/LnNjcmVlbnNbc2NyZWVuSWRdXG4gICAgICAgIGlmIChzY3JlZW5Kc29uLm1haW4pIHtcbiAgICAgICAgICByZXRJdGVtcyA9IHJldEl0ZW1zLmNvbmNhdChnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwKGFwcENvbmZpZywgc2NyZWVuSnNvbi5tYWluLmxheW91dFtzaXplTW9kZV0sIHNpemVNb2RlKSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NyZWVuSnNvbi5wYW5lbCkge1xuICAgICAgICAgIHJldEl0ZW1zID0gcmV0SXRlbXMuY29uY2F0KGdldFBlbmRpbmdMYXlvdXRJdGVtc0luTGF5b3V0V2l0aERlZXAoYXBwQ29uZmlnLCBzY3JlZW5Kc29uLnBhbmVsLmxheW91dFtzaXplTW9kZV0sIHNpemVNb2RlKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIHJldEl0ZW1zXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBwZW5kaW5nIHdpZGdldHMvc2VjdGlvbnMvc2NyZWVuR3JvdXBzLlxuICogVGhlIHBlbmRpbmcgbWVhbnM6IHRoZSB3aWRnZXRzL3NlY3Rpb25zL3NjcmVlbkdyb3VwcyBhcmUgaW4gbGF5b3V0J3Mgb3RoZXIgbW9kZSBidXQgYXJlIG5vdCBpbiB0aGUgY3VycmVudCBtb2RlIChwYXNzZWQgaW4pLlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIHBhZ2VJZFxuICogQHBhcmFtIHR5cGVcbiAqIEBwYXJhbSBzaXplTW9kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBsYXlvdXQ6IElNU2l6ZU1vZGVMYXlvdXRKc29uLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICB0aGlzV2lkZ2V0SWRzID0gbnVsbCxcbiAgdGhpc1NlY3Rpb25JZHMgPSBudWxsLFxuICB0aGlzU2NyZWVuR3JvdXBJZHMgPSBudWxsXG4pOiBMYXlvdXRJbmZvW10ge1xuICBjb25zdCByZXRJdGVtcyA9IFtdXG4gIGlmICghdGhpc1dpZGdldElkcykge1xuICAgIHRoaXNXaWRnZXRJZHMgPSBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgbGF5b3V0W3NpemVNb2RlXSwgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LCBzaXplTW9kZSwgdHJ1ZSlcbiAgfVxuICBpZiAoIXRoaXNTZWN0aW9uSWRzKSB7XG4gICAgdGhpc1NlY3Rpb25JZHMgPSBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgbGF5b3V0W3NpemVNb2RlXSwgTGF5b3V0SXRlbVR5cGUuU2VjdGlvbiwgc2l6ZU1vZGUsIHRydWUpXG4gIH1cbiAgaWYgKCF0aGlzU2NyZWVuR3JvdXBJZHMpIHtcbiAgICB0aGlzU2NyZWVuR3JvdXBJZHMgPSBnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgbGF5b3V0W3NpemVNb2RlXSwgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXAsIHNpemVNb2RlLCB0cnVlKVxuICB9XG5cbiAgY29uc3Qgb3RoZXJNb2RlcyA9IE9iamVjdC5rZXlzKEJyb3dzZXJTaXplTW9kZSlcbiAgICAuZmlsdGVyKG1vZGUgPT4gQnJvd3NlclNpemVNb2RlW21vZGVdICE9PSBzaXplTW9kZSlcbiAgICAubWFwKGsgPT4gQnJvd3NlclNpemVNb2RlW2tdKVxuICBvdGhlck1vZGVzLmZvckVhY2gobW9kZSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SXRlbXMgPSBnZXRMYXlvdXRJbmZvc0J5VHlwZShhcHBDb25maWcubGF5b3V0c1tsYXlvdXRbbW9kZV1dLCBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsIHRydWUpXG4gICAgd2lkZ2V0SXRlbXMuZm9yRWFjaCh3aWRnZXRJdGVtID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1t3aWRnZXRJdGVtLmxheW91dElkXS5jb250ZW50W3dpZGdldEl0ZW0ubGF5b3V0SXRlbUlkXVxuICAgICAgaWYgKFxuICAgICAgICBhcHBDb25maWcud2lkZ2V0c1tpdGVtLndpZGdldElkXS5tYW5pZmVzdD8ud2lkZ2V0VHlwZSAhPT0gV2lkZ2V0VHlwZS5MYXlvdXQgJiZcbiAgICAgICAgdGhpc1dpZGdldElkcy5pbmRleE9mKGl0ZW0ud2lkZ2V0SWQpIDwgMFxuICAgICAgKSB7XG4gICAgICAgICFpc0NvbnRlbnRFeGlzdHMoYXBwQ29uZmlnLCByZXRJdGVtcywgd2lkZ2V0SXRlbSkgJiYgcmV0SXRlbXMucHVzaCh3aWRnZXRJdGVtKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGFwcENvbmZpZy53aWRnZXRzW2l0ZW0ud2lkZ2V0SWRdLmxheW91dHMpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhcHBDb25maWcud2lkZ2V0c1tpdGVtLndpZGdldElkXS5sYXlvdXRzKS5mb3JFYWNoKGxheW91dE5hbWUgPT4ge1xuICAgICAgICAgICAgZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUoXG4gICAgICAgICAgICAgIGFwcENvbmZpZyxcbiAgICAgICAgICAgICAgYXBwQ29uZmlnLndpZGdldHNbaXRlbS53aWRnZXRJZF0ubGF5b3V0c1tsYXlvdXROYW1lXSxcbiAgICAgICAgICAgICAgc2l6ZU1vZGUsXG4gICAgICAgICAgICAgIHRoaXNXaWRnZXRJZHMsXG4gICAgICAgICAgICAgIHRoaXNTZWN0aW9uSWRzLFxuICAgICAgICAgICAgICB0aGlzU2NyZWVuR3JvdXBJZHNcbiAgICAgICAgICAgICkuZm9yRWFjaCh3aWRnZXRJdGVtID0+IHtcbiAgICAgICAgICAgICAgIWlzQ29udGVudEV4aXN0cyhhcHBDb25maWcsIHJldEl0ZW1zLCB3aWRnZXRJdGVtKSAmJiByZXRJdGVtcy5wdXNoKHdpZGdldEl0ZW0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3Qgc2VjdGlvbkl0ZW1zID0gZ2V0TGF5b3V0SW5mb3NCeVR5cGUoYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0W21vZGVdXSwgTGF5b3V0SXRlbVR5cGUuU2VjdGlvbiwgdHJ1ZSlcbiAgICBzZWN0aW9uSXRlbXMuZm9yRWFjaChzZWN0aW9uSXRlbSA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gYXBwQ29uZmlnLmxheW91dHNbc2VjdGlvbkl0ZW0ubGF5b3V0SWRdLmNvbnRlbnRbc2VjdGlvbkl0ZW0ubGF5b3V0SXRlbUlkXVxuICAgICAgaWYgKHRoaXNTZWN0aW9uSWRzLmluZGV4T2YoaXRlbS5zZWN0aW9uSWQpIDwgMCkge1xuICAgICAgICAhaXNDb250ZW50RXhpc3RzKGFwcENvbmZpZywgcmV0SXRlbXMsIHNlY3Rpb25JdGVtKSAmJiByZXRJdGVtcy5wdXNoKHNlY3Rpb25JdGVtKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGFwcENvbmZpZy5zZWN0aW9uc1tpdGVtLnNlY3Rpb25JZF0udmlld3MpIHtcbiAgICAgICAgICBhcHBDb25maWcuc2VjdGlvbnNbaXRlbS5zZWN0aW9uSWRdLnZpZXdzLmZvckVhY2godmlld0lkID0+IHtcbiAgICAgICAgICAgIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlKFxuICAgICAgICAgICAgICBhcHBDb25maWcsXG4gICAgICAgICAgICAgIGFwcENvbmZpZy52aWV3c1t2aWV3SWRdLmxheW91dCxcbiAgICAgICAgICAgICAgc2l6ZU1vZGUsXG4gICAgICAgICAgICAgIHRoaXNXaWRnZXRJZHMsXG4gICAgICAgICAgICAgIHRoaXNTZWN0aW9uSWRzLFxuICAgICAgICAgICAgICB0aGlzU2NyZWVuR3JvdXBJZHNcbiAgICAgICAgICAgICkuZm9yRWFjaChzZWN0aW9uSXRlbSA9PiB7XG4gICAgICAgICAgICAgICFpc0NvbnRlbnRFeGlzdHMoYXBwQ29uZmlnLCByZXRJdGVtcywgc2VjdGlvbkl0ZW0pICYmIHJldEl0ZW1zLnB1c2goc2VjdGlvbkl0ZW0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3Qgc2dJdGVtcyA9IGdldExheW91dEluZm9zQnlUeXBlKGFwcENvbmZpZy5sYXlvdXRzW2xheW91dFttb2RlXV0sIExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwLCB0cnVlKVxuICAgIHNnSXRlbXMuZm9yRWFjaChzZ0l0ZW0gPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW3NnSXRlbS5sYXlvdXRJZF0uY29udGVudFtzZ0l0ZW0ubGF5b3V0SXRlbUlkXVxuICAgICAgaWYgKHRoaXNTY3JlZW5Hcm91cElkcy5pbmRleE9mKGl0ZW0uc2NyZWVuR3JvdXBJZCkgPCAwKSB7XG4gICAgICAgICFpc0NvbnRlbnRFeGlzdHMoYXBwQ29uZmlnLCByZXRJdGVtcywgc2dJdGVtKSAmJiByZXRJdGVtcy5wdXNoKHNnSXRlbSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhcHBDb25maWcuc2NyZWVuR3JvdXBzPy5baXRlbS5zY3JlZW5Hcm91cElkXT8uc2NyZWVucykge1xuICAgICAgICAgIGFwcENvbmZpZy5zY3JlZW5Hcm91cHNbaXRlbS5zY3JlZW5Hcm91cElkXS5zY3JlZW5zLmZvckVhY2goc2NyZWVuSWQgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2NyZWVuSnNvbiA9IGFwcENvbmZpZy5zY3JlZW5zPy5bc2NyZWVuSWRdXG4gICAgICAgICAgICBpZiAoc2NyZWVuSnNvbj8ubWFpbikge1xuICAgICAgICAgICAgICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZShcbiAgICAgICAgICAgICAgICBhcHBDb25maWcsXG4gICAgICAgICAgICAgICAgc2NyZWVuSnNvbi5tYWluLmxheW91dCxcbiAgICAgICAgICAgICAgICBzaXplTW9kZSxcbiAgICAgICAgICAgICAgICB0aGlzV2lkZ2V0SWRzLFxuICAgICAgICAgICAgICAgIHRoaXNTZWN0aW9uSWRzLFxuICAgICAgICAgICAgICAgIHRoaXNTY3JlZW5Hcm91cElkc1xuICAgICAgICAgICAgICApLmZvckVhY2goc2VjdGlvbkl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICFpc0NvbnRlbnRFeGlzdHMoYXBwQ29uZmlnLCByZXRJdGVtcywgc2VjdGlvbkl0ZW0pICYmIHJldEl0ZW1zLnB1c2goc2VjdGlvbkl0ZW0pXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2NyZWVuSnNvbj8ucGFuZWwpIHtcbiAgICAgICAgICAgICAgZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUoXG4gICAgICAgICAgICAgICAgYXBwQ29uZmlnLFxuICAgICAgICAgICAgICAgIHNjcmVlbkpzb24ucGFuZWwubGF5b3V0LFxuICAgICAgICAgICAgICAgIHNpemVNb2RlLFxuICAgICAgICAgICAgICAgIHRoaXNXaWRnZXRJZHMsXG4gICAgICAgICAgICAgICAgdGhpc1NlY3Rpb25JZHMsXG4gICAgICAgICAgICAgICAgdGhpc1NjcmVlbkdyb3VwSWRzXG4gICAgICAgICAgICAgICkuZm9yRWFjaChzZWN0aW9uSXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgIWlzQ29udGVudEV4aXN0cyhhcHBDb25maWcsIHJldEl0ZW1zLCBzZWN0aW9uSXRlbSkgJiYgcmV0SXRlbXMucHVzaChzZWN0aW9uSXRlbSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICByZXR1cm4gcmV0SXRlbXNcbn1cblxuZnVuY3Rpb24gaXNDb250ZW50RXhpc3RzIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvczogTGF5b3V0SW5mb1tdLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogYm9vbGVhbiB7XG4gIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJbmZvLmxheW91dElkXS5jb250ZW50W2xheW91dEluZm8ubGF5b3V0SXRlbUlkXVxuICByZXR1cm4gISFsYXlvdXRJbmZvcy5maW5kKGluZm8gPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tpbmZvLmxheW91dElkXS5jb250ZW50W2luZm8ubGF5b3V0SXRlbUlkXVxuICAgIHJldHVybiAoXG4gICAgICBpdGVtLnR5cGUgPT09IGxheW91dEl0ZW0udHlwZSAmJlxuICAgICAgKChpdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCAmJiBpdGVtLndpZGdldElkID09PSBsYXlvdXRJdGVtLndpZGdldElkKSB8fFxuICAgICAgICAoaXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uICYmIGl0ZW0uc2VjdGlvbklkID09PSBsYXlvdXRJdGVtLnNlY3Rpb25JZCkpXG4gICAgKVxuICB9KVxufVxuIiwiaW1wb3J0IHsgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTZWN0aW9uUHJvcHMgfSBmcm9tICcuLi90eXBlcydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlY3Rpb25JbmZvIChzdGF0ZTogSU1TdGF0ZSwgc2VjdGlvbklkOiBzdHJpbmcpOiBTZWN0aW9uUHJvcHMge1xuICBjb25zdCBzZWN0aW9uID0gc3RhdGUuYXBwQ29uZmlnLnNlY3Rpb25zW3NlY3Rpb25JZF1cbiAgaWYgKCFzZWN0aW9uIHx8ICFzZWN0aW9uLnZpZXdzKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCBuYXZJbmZvID0gc3RhdGUuYXBwUnVudGltZUluZm8uc2VjdGlvbk5hdkluZm9zPy5bc2VjdGlvbi5pZF1cbiAgbGV0IGFjdGl2ZVZpZXdcbiAgaWYgKCFuYXZJbmZvKSB7XG4gICAgY29uc3QgYWN0aXZlVmlld0lkID0gc2VjdGlvbi52aWV3c1swXVxuICAgIGFjdGl2ZVZpZXcgPSBzdGF0ZS5hcHBDb25maWcudmlld3NbYWN0aXZlVmlld0lkXVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZWN0aW9uSWQsXG4gICAgbmF2SW5mbyxcbiAgICBhY3RpdmVWaWV3LFxuICAgIHZpZXdzOiBzZWN0aW9uLnZpZXdzLFxuICAgIHNlY3Rpb25TdHlsZTogc2VjdGlvbi5zdHlsZSxcbiAgICB0cmFuc2l0aW9uOiBzZWN0aW9uLnRyYW5zaXRpb24sXG4gICAgYXV0b1BsYXk6IHNlY3Rpb24uYXV0b1BsYXksXG4gICAgaW50ZXJ2YWw6IHNlY3Rpb24uaW50ZXJ2YWwsXG4gICAgbG9vcDogc2VjdGlvbi5sb29wLFxuICAgIGZvY3VzYWJsZTogc2VjdGlvbi5mb2N1c2FibGVcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBwcmV2aW91c1ZpZXc6ICdQcmV2aW91cyB2aWV3JyxcbiAgbmV4dFZpZXc6ICdOZXh0IHZpZXcnLFxuICBvcmlnaW5UTDogJ1RvcCBsZWZ0IGFzIG9yaWdpbicsXG4gIG9yaWdpblRSOiAnVG9wIHJpZ2h0IGFzIG9yaWdpbicsXG4gIG9yaWdpbkJMOiAnQm90dG9tIGxlZnQgYXMgb3JpZ2luJyxcbiAgb3JpZ2luQlI6ICdCb3R0b20gcmlnaHQgYXMgb3JpZ2luJyxcbiAgYWxpZ25MZWZ0OiAnQWxpZ24gbGVmdCcsXG4gIGFsaWduUmlnaHQ6ICdBbGlnbiByaWdodCcsXG4gIGFsaWduVG9wOiAnQWxpZ24gdG9wJyxcbiAgYWxpZ25DZW50ZXI6ICdBbGlnbiBjZW50ZXInLFxuICBhbGlnbkhDZW50ZXI6ICdIb3Jpem9udGFsIGNlbnRlcicsXG4gIGFsaWduVkNlbnRlcjogJ1ZlcnRpY2FsIGNlbnRlcicsXG4gIGFsaWduQm90dG9tOiAnQWxpZ24gYm90dG9tJyxcbiAgYWxpZ25TdHJldGNoOiAnQWxpZ24gc3RyZXRjaCcsXG4gIHNlbmRCYWNrd2FyZDogJ1NlbmQgYmFja3dhcmQnLFxuICBicmluZ0ZvcndhcmQ6ICdCcmluZyBmb3J3YXJkJyxcbiAgc2VuZFRvQmFjazogJ1NlbmQgdG8gYmFjaycsXG4gIGJyaW5nVG9Gcm9udDogJ0JyaW5nIHRvIGZyb250JyxcbiAgem9vbW91dEZpeGVkOiAnWm9vbSBvdXQgZml4ZWQnLFxuICBvcmRlcjogJ09yZGVyJyxcbiAgbW92ZVRvTGVmdDogJ01vdmUgdG8gbGVmdCcsXG4gIG1vdmVUb1JpZ2h0OiAnTW92ZSB0byByaWdodCcsXG4gIG1vdmVUb1RvcDogJ01vdmUgdG8gdG9wJyxcbiAgbW92ZVRvQm90dG9tOiAnTW92ZSB0byBib3R0b20nLFxuICBhZGRWaWV3OiAnTmV3IHZpZXcnLFxuICBkdXBsaWNhdGVTY3JlZW46ICdEdXBsaWNhdGUgc2NyZWVuJyxcbiAgZGVsZXRlU2NyZWVuOiAnRGVsZXRlIHNjcmVlbicsXG4gIGFwcGx5VG9GaXJzdFBhbmVsOiAnQXBwbHkgdG8gdGhlIGZpcnN0IHBhbmVsJyxcbiAgZGVsZXRlVmlldzogJ0RlbGV0ZSB2aWV3JyxcbiAgZHVwbGljYXRlVmlldzogJ0R1cGxpY2F0ZSB2aWV3JyxcbiAgaW5zZXJ0QUJsb2NrOiAnSW5zZXJ0IGJsb2NrJyxcbiAgaW5zZXJ0QVNjcmVlbkdyb3VwOiAnSW5zZXJ0IHNjcmVlbiBncm91cCcsXG4gIG1vdmV1cDogJ01vdmUgdXAnLFxuICBtb3ZlZG93bjogJ01vdmUgZG93bicsXG4gIGNob29zZVRlbXBsYXRlOiAnQ2hvb3NlIGEge3R5cGV9IHRlbXBsYXRlJyxcbiAgY2hvb3NlSGVhZGVyVGVtcGxhdGU6ICdDaG9vc2UgYSBoZWFkZXIgdGVtcGxhdGUnLFxuICBjaG9vc2VGb290ZXJUZW1wbGF0ZTogJ0Nob29zZSBhIGZvb3RlciB0ZW1wbGF0ZScsXG4gIGRyb3BXaWRnZXRUb0FkZDogJ09yIGRyYWcgYSB3aWRnZXQgaGVyZScsXG4gIHNuYXBUb0xlZnQ6ICdTbmFwIHRvIGxlZnQnLFxuICBzbmFwVG9Ub3A6ICdTbmFwIHRvIHRvcCcsXG4gIHNuYXBUb0JvdHRvbTogJ1NuYXAgdG8gYm90dG9tJyxcbiAgc25hcFRvUmlnaHQ6ICdTbmFwIHRvIHJpZ2h0JyxcbiAgZnVsbFdpZHRoOiAnRnVsbCB3aWR0aCcsXG4gIGZ1bGxIZWlnaHQ6ICdGdWxsIGhlaWdodCcsXG4gIGZ1bGxTaXplOiAnRnVsbCBzaXplJyxcbiAgcmVzdG9yZVNpemU6ICdSZXN0b3JlIHNpemUnLFxuICBwZW5kaW5nVGlwOiAnTW92ZSB0byB0aGUgcGVuZGluZyBsaXN0JyxcbiAgc2V0dGluZzogJ1NldHRpbmdzJyxcbiAgZHJhZ1RvTW92ZTogJ0RyYWcgdG8gbW92ZSB7bGFiZWx9JyxcbiAgbG9ja0xheW91dDogJ0xvY2sgcG9zaXRpb24gYW5kIHNpemUnLFxuICB1bmxvY2tMYXlvdXQ6ICdVbmxvY2sgcG9zaXRpb24gYW5kIHNpemUnLFxuICBlZGl0SGVhZGVyOiAnRWRpdCBoZWFkZXInLFxuICBlZGl0Rm9vdGVyOiAnRWRpdCBmb290ZXInLFxuICB0cmFuc2Zvcm06ICdUcmFuc2Zvcm0nLFxuICByb3RhdGlvbjogJ1JvdGF0aW9uJyxcbiAgYW5nbGU6ICdBbmdsZScsXG4gIGZsb2F0aW5nOiAnUGluJyxcbiAgc2lua2luZzogJ1VucGluJyxcbiAgZmxvYXRpbmdBcmVhOiAnRmxvYXRpbmcgYXJlYScsXG4gIGNoYW5nZVRvQXV0bzogJ0NoYW5nZSB0byBhdXRvJyxcbiAgY2hhbmdlVG9DdXN0b206ICdDaGFuZ2UgdG8gY3VzdG9tJyxcblxuICBwb3NpdGlvblR5cGU6ICdQb3NpdGlvbiB0eXBlJyxcbiAgc3RpY2t5OiAnU3RpY2t5JyxcbiAgZml4ZWQ6ICdGaXhlZCcsXG4gIGZsb3c6ICdGbG93JyxcbiAgc3RhY2s6ICdTdGFjaycsXG4gIGZpeGVkQXRUb3A6ICdGbG9hdGluZyBhdCB0aGUgdG9wIHdoZW4gc2Nyb2xsaW5nJyxcbiAgYWN0Tm9ybWFsOiAnQWN0IGFzIG5vcm1hbCB3aWRnZXQnLFxuXG4gIGhpZGVJbkRlc2lnblZpZXc6ICdIaWRlIGluIGRlc2lnbiB2aWV3JyxcbiAgc2hvd0luRGVzaWduVmlldzogJ1Nob3cgaW4gZGVzaWduIHZpZXcnLFxuXG4gIHVubG9ja0dyaWRJdGVtOiAnVW5sb2NrIHRoaXMgd2lkZ2V0IHRvIHJlb3JnYW5pemUgaXRzIGludGVybmFsIHdpZGdldHMuJyxcbiAgbG9ja0dyaWRJdGVtOiAnTG9jayB0aGlzIHdpZGdldC4nLFxuXG4gIHNwbGl0SG9yaXpvbnRhbGx5OiAnU3BsaXQgaG9yaXpvbnRhbGx5JyxcbiAgc3BsaXRWZXJ0aWNhbGx5OiAnU3BsaXQgdmVydGljYWxseSdcbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgUmVhY3QsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBJTVNpemVNb2RlTGF5b3V0SnNvbixcbiAgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIHR5cGUgTGF5b3V0SW5mbyxcbiAgdHlwZSBJTVZpZXdKc29uLFxuICB0eXBlIElNV2lkZ2V0SnNvbixcbiAgdHlwZSBMYXlvdXRDb250ZXh0VG9vbFByb3BzLFxuICB0eXBlIElNU2VjdGlvbk5hdkluZm8sXG4gIHR5cGUgQW5pbWF0aW9uU2V0dGluZyxcbiAgdHlwZSBBbmltYXRpb25QbGF5TW9kZSxcbiAgdHlwZSBCcm93c2VyU2l6ZU1vZGUsXG4gIHR5cGUgV2lkZ2V0SW5pdERyYWdDYWxsYmFjayxcbiAgdHlwZSBXaWRnZXRJbml0UmVzaXplQ2FsbGJhY2tcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBGb3VyU2lkZXNVbml0IH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGludGVyZmFjZSBQb3NpdGlvbiB7XG4gIHg/OiBudW1iZXJcbiAgeT86IG51bWJlclxuICB3OiBudW1iZXJcbiAgaDogbnVtYmVyXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIE9yZGVyQWRqdXN0VHlwZSB7XG4gIEJyaW5nRm9yd2FyZCA9IDAsXG4gIFNlbmRCYWNrd2FyZCA9IDEsXG4gIEJyaW5nVG9Gcm9udCA9IDIsXG4gIFNlbmRUb0JhY2sgPSAzLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dFByb3BzIHtcbiAgbGF5b3V0czogSU1TaXplTW9kZUxheW91dEpzb25cbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIHN0eWxlPzogYW55XG4gIGlzSW5TZWN0aW9uPzogYm9vbGVhblxuICBpc0luV2lkZ2V0PzogYm9vbGVhblxuICBpc1JlcGVhdD86IGJvb2xlYW5cbiAgaXNQYWdlSXRlbT86IGJvb2xlYW5cbiAgdmlzaWJsZT86IGJvb2xlYW5cbiAgaXRlbURyYWdnYWJsZT86IGJvb2xlYW5cbiAgaXRlbVJlc2l6YWJsZT86IGJvb2xlYW5cbiAgaXRlbVNlbGVjdGFibGU/OiBib29sZWFuXG4gIGRyb3BwYWJsZT86IGJvb2xlYW5cbiAgc2hvd0RlZmF1bHRUb29scz86IGJvb2xlYW5cbiAgaXNJdGVtQWNjZXB0ZWQ/OiAoaXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsIGlzUmVwbGFjZVBsYWNlaG9sZGVyOiBib29sZWFuKSA9PiBib29sZWFuXG4gIG9uSXRlbUNsaWNrPzogKGUsIHdpZGdldElkOiBzdHJpbmcpID0+IHZvaWRcbiAgaWdub3JlTWluSGVpZ2h0PzogYm9vbGVhbiAvLyB1c2VkIGluIGZpeGVkIGxheW91dFxuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dEl0ZW1Qcm9wcyB7XG4gIGxheW91dElkOiBzdHJpbmdcbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmdcbiAgZHJhZ2dhYmxlPzogYm9vbGVhblxuICByZXNpemFibGU/OiBib29sZWFuXG4gIHNlbGVjdGFibGU/OiBib29sZWFuXG4gIGZvcmJpZENvbnRleHRNZW51PzogYm9vbGVhblxuICBmb3JiaWRUb29sYmFyPzogYm9vbGVhblxuICBzaG93RGVmYXVsdFRvb2xzPzogYm9vbGVhblxuICBpc0luU2VjdGlvbj86IGJvb2xlYW5cbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllc1xuICB0cmFpbE9yZGVyPzogbnVtYmVyIC8vIG9yZGVyIG9mIHRyYWlsIGFuaW1hdGlvblxuICBvbkNsaWNrPzogKGUsIGxheW91dEluZm86IExheW91dEluZm8pID0+IHZvaWRcbiAgb25Eb3VibGVDbGljaz86IChlLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKSA9PiB2b2lkXG4gIGZvcmNlQXNwZWN0UmF0aW8/OiBib29sZWFuXG4gIGFzcGVjdFJhdGlvPzogbnVtYmVyXG4gIHJlc2l6ZU9ic2VydmVyPzogUmVzaXplT2JzZXJ2ZXJcbiAgY2hpbGRyZW4/OiBhbnlcbiAgYXV0b1dpZHRoPzogYm9vbGVhblxuICBhdXRvSGVpZ2h0PzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVG9MYXlvdXRQcm9wcyB7XG4gIG1haW5TaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIGxheW91dDogSU1MYXlvdXRKc29uXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyB7XG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbiAgc2VsZWN0ZWQ/OiBib29sZWFuXG4gIGF1dG9TY3JvbGw/OiBib29sZWFuXG4gIGFuaW1hdGlvblByZXZpZXc/OiBib29sZWFuXG4gIGhvdmVyUHJldmlldz86IGJvb2xlYW5cbiAgcGxheU1vZGU/OiBBbmltYXRpb25QbGF5TW9kZVxuICBwcmV2aWV3SWQ/OiBudW1iZXJcbiAgd2F0Y2hWaWV3cG9ydFZpc2liaWxpdHk/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2lkZ2V0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGlzQ2xhc3NMb2FkZWQ6IGJvb2xlYW5cbiAgaXNJbmxpbmVFZGl0aW5nOiBib29sZWFuXG4gIGlzRnVuY3Rpb25hbFdpZGdldDogYm9vbGVhblxuICBpc0luQ29udHJvbGxlcjogYm9vbGVhblxuICBoYXNFbWJlZGRlZExheW91dDogYm9vbGVhblxuICB1c2VEcmFnSGFuZGxlcjogYm9vbGVhblxuICB3aWRnZXRTdGF0ZT86IGFueVxuICBzdXBwb3J0SW5saW5lRWRpdGluZzogYm9vbGVhblxuICBzdXBwb3J0UmVwZWF0OiBib29sZWFuXG4gIGNhbkNyb3NzTGF5b3V0Qm91bmRhcnk6IGJvb2xlYW5cbiAgcm90YXRlPzogbnVtYmVyXG4gIHdpZGdldFN0eWxlOiBhbnlcbiAgaGFzRXh0ZW5zaW9uPzogYm9vbGVhblxuICB3aWRnZXRKc29uPzogSU1XaWRnZXRKc29uXG4gIG9uSW5pdFJlc2l6ZUhhbmRsZXI/OiBXaWRnZXRJbml0UmVzaXplQ2FsbGJhY2tcbiAgb25Jbml0RHJhZ0hhbmRsZXI/OiBXaWRnZXRJbml0RHJhZ0NhbGxiYWNrXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdGlvblByb3BzIHtcbiAgc2VjdGlvbklkOiBzdHJpbmdcbiAgdmlld3M6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cbiAgYWN0aXZlVmlldz86IElNVmlld0pzb25cbiAgcm90YXRlPzogbnVtYmVyXG4gIHNlY3Rpb25TdHlsZTogYW55XG4gIG5hdkluZm86IElNU2VjdGlvbk5hdkluZm9cbiAgdHJhbnNpdGlvbj86IHtcbiAgICB0eXBlOiBzdHJpbmdcbiAgICBkaXJlY3Rpb24/OiBzdHJpbmdcbiAgfVxuICBhdXRvUGxheT86IGJvb2xlYW5cbiAgaW50ZXJ2YWw/OiBudW1iZXJcbiAgbG9vcD86IGJvb2xlYW5cbiAgZm9jdXNhYmxlPzogYm9vbGVhblxufVxuXG5leHBvcnQgY29uc3QgQ09MU19JTl9PTkVfUk9XID0gMTJcblxuZXhwb3J0IGNvbnN0IENPTlRFWFRfTUVOVV9JVEVNX1NJWkUgPSAyOFxuZXhwb3J0IGNvbnN0IENPTlRFWFRfTUVOVV9JQ09OX1NJWkUgPSAxNlxuZXhwb3J0IGNvbnN0IE1JTl9MQVlPVVRfSVRFTV9TSVpFID0gMTZcbmV4cG9ydCBjb25zdCBDTElDS19UT0xSRVJBTkNFID0gNVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVVUT1BMQVlfSU5URVJWQUwgPSAzXG5cbi8vIDAgPCB6SW5kZXggPCAxMCBpcyBtYW5hZ2VkIGJ5IGNvbXBvbmVudCBpdHNlbGZcbmV4cG9ydCBlbnVtIExheW91dFpJbmRleCB7XG4gIEF1dG8gPSAnYXV0bycsXG4gIE5vcm1hbCA9IDAsXG4gIEJvdW5kYXJ5RHJvcEFyZWEgPSAxMCxcbiAgRHJhZ01vdmVUaXAgPSAyMCxcbiAgSGFuZGxlclRvb2xzID0gMzAsXG4gIERyYWdnaW5nSXRlbSA9IDQwLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1vbkxheW91dFNldHRpbmcge1xuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgc3R5bGU/OiBhbnlcbiAgb3JkZXI/OiBudW1iZXJcbiAgbG9ja0NoaWxkcmVuPzogYm9vbGVhblxuICBsb2NrRGVzY2VuZGFudHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbW9uTGF5b3V0SXRlbVNldHRpbmcge1xuICBsb2NrUGFyZW50PzogYm9vbGVhblxuICBwbGFjZWhvbGRlclN0eWxlPzogYW55XG4gIHN0eWxlPzogYW55XG4gIGVmZmVjdD86IHsgW2tleTogc3RyaW5nXTogQW5pbWF0aW9uU2V0dGluZyB9XG4gIG9uZUJ5T25lRWZmZWN0PzogeyBba2V5OiBzdHJpbmddOiBBbmltYXRpb25TZXR0aW5nIH1cbiAgZWZmZWN0UGxheU1vZGU/OiBBbmltYXRpb25QbGF5TW9kZVxuICBob3ZlckVmZmVjdD86IHsgdHlwZTogc3RyaW5nLCBzZXR0aW5nOiBhbnkgfVxuICBhdXRvUHJvcHM/OiB7XG4gICAgbGVmdD86IGJvb2xlYW5cbiAgICByaWdodD86IGJvb2xlYW5cbiAgICB0b3A/OiBib29sZWFuXG4gICAgYm90dG9tPzogYm9vbGVhblxuICAgIHdpZHRoPzogTGF5b3V0SXRlbVNpemVNb2Rlc1xuICAgIGhlaWdodD86IExheW91dEl0ZW1TaXplTW9kZXNcbiAgfVxuICBhc3BlY3RSYXRpbz86IG51bWJlciB8IHN0cmluZ1xuICBoZWlnaHRNb2RlPzogJ2ZpdCcgfCAnZml4ZWQnIHwgJ3JhdGlvJyB8ICdhdXRvJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpeGVkTGF5b3V0U2V0dGluZyBleHRlbmRzIENvbW1vbkxheW91dFNldHRpbmcge1xuICBncmlkU2l6ZT86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZsb3dMYXlvdXRTZXR0aW5nIGV4dGVuZHMgQ29tbW9uTGF5b3V0U2V0dGluZyB7XG4gIGd1dHRlcj86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbHVtbkxheW91dFNldHRpbmcgZXh0ZW5kcyBDb21tb25MYXlvdXRTZXR0aW5nIHtcbiAgbWluOiBudW1iZXJcbiAgc3BhY2U6IG51bWJlclxuICBqdXN0aWZ5Q29udGVudD86IHN0cmluZ1xuICBvdmVyZmxvd1k/OiBib29sZWFuXG4gIHBhZGRpbmc/OiB7XG4gICAgbnVtYmVyOiBudW1iZXJbXVxuICAgIHVuaXQ6IHN0cmluZ1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZExheW91dFNldHRpbmcgZXh0ZW5kcyBDb21tb25MYXlvdXRTZXR0aW5nIHtcbiAgcm9vdEl0ZW06IHN0cmluZ1xuICByZXNpemFibGU/OiBib29sZWFuXG4gIGV4cGFuZGFibGU/OiBib29sZWFuXG4gIHNwbGl0U2l6ZT86IG51bWJlclxuICBzcGxpdENvbG9yPzogc3RyaW5nXG4gIHBhZGRpbmdDb2xvcj86IHN0cmluZ1xuICBzdHlsZT86IHtcbiAgICBwYWRkaW5nPzogRm91clNpZGVzVW5pdFxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm93TGF5b3V0SXRlbVNldHRpbmcgZXh0ZW5kcyBDb21tb25MYXlvdXRJdGVtU2V0dGluZyB7XG4gIG9mZnNldFg/OiBudW1iZXJcbiAgb2Zmc2V0WT86IG51bWJlclxuICBzdHlsZToge1xuICAgIGFsaWduU2VsZjogJ2ZsZXgtc3RhcnQnIHwgJ2ZsZXgtZW5kJyB8ICdjZW50ZXInIHwgJ3N0cmV0Y2gnXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBSb3dMYXlvdXRTZXR0aW5nIGV4dGVuZHMgQ29tbW9uTGF5b3V0U2V0dGluZyB7XG4gIHNwYWNlOiBudW1iZXJcbiAgc3R5bGU6IHtcbiAgICBwYWRkaW5nPzogRm91clNpZGVzVW5pdFxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxvd0xheW91dEl0ZW1TZXR0aW5nIGV4dGVuZHMgQ29tbW9uTGF5b3V0SXRlbVNldHRpbmcge1xuICBpc0Zsb2F0aW5nPzogYm9vbGVhblxuICBmbG9hdGluZ0FyZWE/OiBudW1iZXIgLy8gMX45XG4gIHdpZHRoPzogbnVtYmVyXG4gIG9mZnNldFg/OiBudW1iZXJcbiAgb2Zmc2V0WT86IG51bWJlclxufVxuXG5leHBvcnQgZW51bSBMYXlvdXRJdGVtU2l6ZU1vZGVzIHtcbiAgQXV0byA9ICdBVVRPJyxcbiAgU3RyZXRjaCA9ICdTVFJFVENIJyxcbiAgQ3VzdG9tID0gJ0NVU1RPTSdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaXhlZExheW91dEl0ZW1TZXR0aW5nIGV4dGVuZHMgQ29tbW9uTGF5b3V0SXRlbVNldHRpbmcge1xuICBoQ2VudGVyPzogYm9vbGVhblxuICB2Q2VudGVyPzogYm9vbGVhblxuICBsb2NrTGF5b3V0PzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xJdGVtQ29uZmlnIHtcbiAgaWNvbj86XG4gIHwgUmVhY3QuQ29tcG9uZW50Q2xhc3M8UmVhY3QuU1ZHQXR0cmlidXRlczxTVkdFbGVtZW50Pj5cbiAgfCAoKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiBSZWFjdC5Db21wb25lbnRDbGFzczxSZWFjdC5TVkdBdHRyaWJ1dGVzPFNWR0VsZW1lbnQ+PilcbiAgY2FyZXQ/OiBib29sZWFuXG4gIGF1dG9GbGlwSWNvbj86IGJvb2xlYW5cbiAgdGl0bGU/OiBzdHJpbmcgfCAoKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzICYgeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZywgdmFsdWVzPzogYW55KSA9PiBzdHJpbmcgfSkgPT4gc3RyaW5nKVxuICBzaXplPzogbnVtYmVyXG4gIGxhYmVsPzogc3RyaW5nIHwgKChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcyAmIHsgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcsIHZhbHVlcz86IGFueSkgPT4gc3RyaW5nIH0pID0+IHN0cmluZylcbiAgZGlzYWJsZWQ/OiBib29sZWFuIHwgKChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4gYm9vbGVhbilcbiAgY2hlY2tlZD86IGJvb2xlYW4gfCAoKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiBib29sZWFuKVxuICB2aXNpYmxlPzogYm9vbGVhbiB8ICgocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IGJvb2xlYW4pXG4gIHJvdGF0ZT86IG51bWJlclxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgb25DbGljaz86IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcywgZXZ0PzogUmVhY3QuTW91c2VFdmVudDxhbnk+KSA9PiB2b2lkXG4gIG9uTW91c2VFbnRlcj86IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcywgZXZ0PzogUmVhY3QuTW91c2VFdmVudDxhbnk+KSA9PiB2b2lkXG4gIG9uTW91c2VMZWF2ZT86IChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcywgZXZ0PzogUmVhY3QuTW91c2VFdmVudDxhbnk+KSA9PiB2b2lkXG4gIHNldHRpbmdQYW5lbD86IFJlYWN0LkNvbXBvbmVudENsYXNzXG4gIHdpZGdldElkPzogc3RyaW5nXG4gIHNlcGVyYXRvcj86IGJvb2xlYW5cbiAgZXh0TmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBUb29sYmFyQ29uZmlnID0gQXJyYXk8VG9vbEl0ZW1Db25maWcgfCBUb29sSXRlbUNvbmZpZ1tdPlxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmZ1bmN0aW9uIGJ1aWxkVGhyZXNob2xkTGlzdCAoKSB7XG4gIGNvbnN0IHN0ZXAgPSAxMFxuICBjb25zdCByZXN1bHQgPSBbMF1cbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gc3RlcDsgaSsrKSB7XG4gICAgcmVzdWx0LnB1c2goaSAvIHN0ZXApXG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcmVmXG4gKiBAcGFyYW0gcm9vdEVsZW1lbnRcbiAqIEBwYXJhbSBvbkludGVyc2VjdGlvbkNoYW5nZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlVmlld3BvcnRJbnRlcnNlY3Rpb24gKFxuICByZWY6IEhUTUxFbGVtZW50LFxuICB3YXRjaFZpZXdwb3J0VmlzaWJpbGl0eTogYm9vbGVhblxuKSB7XG4gIGNvbnN0IG9ic2VydmVyUmVmID0gUmVhY3QudXNlUmVmPEludGVyc2VjdGlvbk9ic2VydmVyPigpXG4gIGNvbnN0IFtpc0luVmlld3BvcnQsIHNldElzSW5WaWV3cG9ydF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQudW5vYnNlcnZlKHJlZilcbiAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKCF3YXRjaFZpZXdwb3J0VmlzaWJpbGl0eSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlSW50ZXJzZWN0aW9uQ2hhbmdlID0gKGVudHJ5OiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5KSA9PiB7XG4gICAgICBpZiAoZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGxheWluZy1hbmltYXRpb24nKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3Qud2lkdGggPiAwICYmIGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdC5oZWlnaHQgPiAwKSB7XG4gICAgICAgIHNldElzSW5WaWV3cG9ydChlbnRyeS5pc0ludGVyc2VjdGluZylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVmICYmIHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc3QgaGFuZGxlciA9IChlbnRyaWVzOiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5W10pID0+IHtcbiAgICAgICAgaGFuZGxlSW50ZXJzZWN0aW9uQ2hhbmdlKGVudHJpZXNbMF0pXG4gICAgICB9XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgaGFuZGxlcixcbiAgICAgICAge1xuICAgICAgICAgIHRocmVzaG9sZDogYnVpbGRUaHJlc2hvbGRMaXN0KCksXG4gICAgICAgICAgcm9vdDogZG9jdW1lbnQsXG4gICAgICAgICAgcm9vdE1hcmdpbjogJzIwJSdcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShyZWYpXG4gICAgICBvYnNlcnZlclJlZi5jdXJyZW50ID0gb2JzZXJ2ZXJcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudC51bm9ic2VydmUocmVmKVxuICAgICAgICBvYnNlcnZlclJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfSwgW3JlZiwgd2F0Y2hWaWV3cG9ydFZpc2liaWxpdHldKVxuXG4gIHJldHVybiBpc0luVmlld3BvcnRcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1jb25zdCAqL1xuaW1wb3J0IHtcbiAgSW1tdXRhYmxlLFxuICB0eXBlIElNTGF5b3V0SnNvbixcbiAgdHlwZSBJTUJvdW5kaW5nQm94LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgSU1BcHBDb25maWcsXG4gIGdldEFwcFN0b3JlLFxuICBXaWRnZXRUeXBlLFxuICB0eXBlIElNTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgQnJvd3NlclNpemVNb2RlLFxuICB0eXBlIFBhZ2VQYXJ0LFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyxcbiAgdHlwZSBCb3VuZGluZ0JveCxcbiAgcG9saXNoZWQsXG4gIGNyZWF0ZVNlbGVjdG9yLFxuICBMYXlvdXRQYXJlbnRUeXBlLFxuICBDb250YWluZXJUeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgTGluZWFyVW5pdCwgRGlzdGFuY2VVbml0cyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQge1xuICB0eXBlIFdpZGdldFByb3BzLFxuICB0eXBlIExheW91dFByb3BzLFxuICB0eXBlIExheW91dEl0ZW1Qcm9wcyxcbiAgdHlwZSBTdGF0ZVRvTGF5b3V0UHJvcHMsXG4gIHR5cGUgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyxcbiAgdHlwZSBDb21tb25MYXlvdXRJdGVtU2V0dGluZyxcbiAgTGF5b3V0SXRlbVNpemVNb2Rlc1xufSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgZ2V0Um9vdENvbnRhaW5lckluZm9PZkxheW91dCB9IGZyb20gJy4vc2VhcmNoL2NvbnRlbnRzJ1xuXG5leHBvcnQgY29uc3QgZW1wdHlGdW5jID0gKCkgPT4ge31cblxuZXhwb3J0IGZ1bmN0aW9uIGF1dG9CaW5kSGFuZGxlcnMgKGVsOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBmbnM6IHN0cmluZ1tdKTogdm9pZCB7XG4gIGZucy5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKGVsW2tleV0pIHtcbiAgICAgIGVsW2tleV0gPSBlbFtrZXldLmJpbmQoZWwpXG4gICAgfVxuICB9KVxufVxuXG4vKipcbiAqIEdldCB0aGUgbWF4aW11bSBpZCBvZiB0aGUgbGF5b3V0IGl0ZW0gd2hpY2ggY2FuIGJlIGNvbnZlcnRlZCB0byBhIG51bWJlci5cbiAqIEBwYXJhbSBsYXlvdXRNYXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1heGltdW1JZCAobGF5b3V0TWFwOiBJTUxheW91dEpzb24pOiBudW1iZXIge1xuICBsZXQgbWF4ID0gLTFcbiAgaWYgKGxheW91dE1hcC5jb250ZW50KSB7XG4gICAgT2JqZWN0LmtleXMobGF5b3V0TWFwLmNvbnRlbnQpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQoa2V5LCAxMClcbiAgICAgIGlmIChpZCA+IG1heCkge1xuICAgICAgICBtYXggPSBpZFxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIG1heFxufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBwZXJjZW50YWdlIHZhbHVlXG4gKiBAcGFyYW0gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGVyY2VudGFnZSAodmFsdWUpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9eLT9cXGQqKFxcLlxcZCspPyUkLy50ZXN0KHZhbHVlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eUxheW91dCAobGF5b3V0OiBJTUxheW91dEpzb24pOiBib29sZWFuIHtcbiAgY29uc3QgaXRlbUlkcyA9IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50ID8/IHt9KVxuICBpZiAoaXRlbUlkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIGNvbnN0IGhhc05vblBlbmRpbmcgPSBpdGVtSWRzLnNvbWUoaWQgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBsYXlvdXQuY29udGVudFtpZF1cbiAgICByZXR1cm4gIWl0ZW0uaXNQZW5kaW5nXG4gIH0pXG4gIHJldHVybiAhaGFzTm9uUGVuZGluZ1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBmaW5pdGUgbnVtYmVyXG4gKiBAcGFyYW0gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyICh2YWx1ZSk6IGJvb2xlYW4ge1xuICBjb25zdCByZXN1bHQgPSBwYXJzZUZsb2F0KHZhbHVlKVxuICByZXR1cm4gIWlzTmFOKHJlc3VsdCkgJiYgaXNGaW5pdGUocmVzdWx0KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVPZkJCb3ggKGJib3g6IEJvdW5kaW5nQm94LCBwcm9wOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoYmJveD8uW3Byb3BdID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGlmICh0eXBlb2YgYmJveFtwcm9wXSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gYmJveFtwcm9wXVxuICB9XG4gIGlmIChpc051bWJlcihiYm94W3Byb3BdKSkge1xuICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKHBhcnNlRmxvYXQoYmJveFtwcm9wXSkpfXB4YFxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbi8qKlxuICogQ29udmVydCB0aGUgdmFsdWUgdG8gcGVyY2VudGFnZSB2YWx1ZSBpbiByZXNwZWN0IHRvIHRoZSB0b3RhbFxuICogQHBhcmFtIHZhbHVlXG4gKiBAcGFyYW0gdG90YWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUmF0aW8gKHZhbHVlOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpIHtcbiAgcmV0dXJuIGAkeygodmFsdWUgKiAxMDApIC8gdG90YWwpLnRvRml4ZWQoMSl9JWBcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgcGVyY2VudGFnZSB2YWx1ZSB0byBwaXhlbCBpbiByZXNwZWN0IHRvIHRoZSB0b3RhbFxuICogQHBhcmFtIHJhdGlvXG4gKiBAcGFyYW0gdG90YWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21SYXRpbyAocmF0aW86IG51bWJlciB8IHN0cmluZywgdG90YWw6IG51bWJlcikge1xuICByZXR1cm4gKHBhcnNlRmxvYXQoYCR7cmF0aW99YCkgKiB0b3RhbCkgLyAxMDBcbn1cblxuZXhwb3J0IGNvbnN0IG1hcFN0YXRlVG9MYXlvdXRQcm9wczogKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0UHJvcHMpID0+IFN0YXRlVG9MYXlvdXRQcm9wcyA9IGNyZWF0ZVNlbGVjdG9yKFtcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlLFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmJyb3dzZXJTaXplTW9kZSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0UHJvcHMpID0+IHtcbiAgICBsZXQgaXNDdXN0b21Sb290XG4gICAgaWYgKHN0YXRlLmJyb3dzZXJTaXplTW9kZSA9PT0gc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZSkge1xuICAgICAgaXNDdXN0b21Sb290ID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkZXBlbmQgb24gdGhlIHJvb3QgbGF5b3V0IGl0ZW1cbiAgICAgIGxldCB1c2VTaXplTW9kZVxuICAgICAgaWYgKG93blByb3BzLmxheW91dHM/LltzdGF0ZS5icm93c2VyU2l6ZU1vZGVdKSB7XG4gICAgICAgIHVzZVNpemVNb2RlID0gc3RhdGUuYnJvd3NlclNpemVNb2RlXG4gICAgICB9IGVsc2UgaWYgKG93blByb3BzLmxheW91dHM/LltzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlXSkge1xuICAgICAgICB1c2VTaXplTW9kZSA9IHN0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZUxheW91dElkID0gb3duUHJvcHMubGF5b3V0cz8uW3VzZVNpemVNb2RlXVxuICAgICAgY29uc3QgY29udGFpbmVyID0gZ2V0Um9vdENvbnRhaW5lckluZm9PZkxheW91dChzdGF0ZS5hcHBDb25maWcsIHVzZUxheW91dElkLCB1c2VTaXplTW9kZSlcbiAgICAgIGlmIChjb250YWluZXI/LnR5cGUgPT09IENvbnRhaW5lclR5cGUuSGVhZGVyKSB7XG4gICAgICAgIGlzQ3VzdG9tUm9vdCA9IHN0YXRlLmFwcENvbmZpZy5oZWFkZXIubGF5b3V0W3N0YXRlLmJyb3dzZXJTaXplTW9kZV0gIT0gbnVsbFxuICAgICAgfSBlbHNlIGlmIChjb250YWluZXI/LnR5cGUgPT09IENvbnRhaW5lclR5cGUuRm9vdGVyKSB7XG4gICAgICAgIGlzQ3VzdG9tUm9vdCA9IHN0YXRlLmFwcENvbmZpZy5mb290ZXIubGF5b3V0W3N0YXRlLmJyb3dzZXJTaXplTW9kZV0gIT0gbnVsbFxuICAgICAgfSBlbHNlIGlmIChjb250YWluZXI/LnR5cGUgPT09IENvbnRhaW5lclR5cGUuRGlhbG9nKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ0pzb24gPSBzdGF0ZS5hcHBDb25maWcuZGlhbG9nc1tjb250YWluZXIuaWRdXG4gICAgICAgIGlzQ3VzdG9tUm9vdCA9IGRpYWxvZ0pzb24ubGF5b3V0W3N0YXRlLmJyb3dzZXJTaXplTW9kZV0gIT0gbnVsbFxuICAgICAgfSBlbHNlIGlmIChjb250YWluZXI/LnR5cGUgPT09IENvbnRhaW5lclR5cGUuUGFnZSkge1xuICAgICAgICBjb25zdCBwYWdlSnNvbiA9IHN0YXRlLmFwcENvbmZpZy5wYWdlc1tjb250YWluZXIuaWRdXG4gICAgICAgIGlzQ3VzdG9tUm9vdCA9IHBhZ2VKc29uLmxheW91dFtzdGF0ZS5icm93c2VyU2l6ZU1vZGVdICE9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQ3VzdG9tUm9vdCAmJiBvd25Qcm9wcy5sYXlvdXRzPy5bc3RhdGUuYnJvd3NlclNpemVNb2RlXSkge1xuICAgICAgY29uc3QgbGF5b3V0SWQgPSBvd25Qcm9wcy5sYXlvdXRzW3N0YXRlLmJyb3dzZXJTaXplTW9kZV1cbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgICB9XG4gICAgY29uc3QgbGF5b3V0SWQgPSBvd25Qcm9wcy5sYXlvdXRzPy5bc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZV1cbiAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIH1cbl0sIChtYWluU2l6ZU1vZGUsIGJyb3dzZXJTaXplTW9kZSwgbGF5b3V0KSA9PiAoeyBtYWluU2l6ZU1vZGUsIGJyb3dzZXJTaXplTW9kZSwgbGF5b3V0IH0pKVxuXG5leHBvcnQgY29uc3QgbWFwU3RhdGVUb0xheW91dEl0ZW1Qcm9wczogKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzID0gY3JlYXRlU2VsZWN0b3IoW1xuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgbGF5b3V0SXRlbS53aWRnZXRJZCkge1xuICAgICAgY29uc3Qgd2lkZ2V0ID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgICAgIHJldHVybiB3aWRnZXQ/Lm1hbmlmZXN0Py5wcm9wZXJ0aWVzPy53YXRjaFZpZXdwb3J0VmlzaWJpbGl0eSA/PyBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uc2VsZWN0aW9uLFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5hbmltYXRpb25QcmV2aWV3LFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5ob3ZlclByZXZpZXcsXG4gIChfLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiBvd25Qcm9wcy5sYXlvdXRJZFxuXSwgKGxheW91dEl0ZW0sIHdhdGNoVmlld3BvcnRWaXNpYmlsaXR5LCBzZWxlY3Rpb24sIGFuaW1hdGlvblByZXZpZXcsIGhvdmVyUHJldmlldywgbGF5b3V0SWQpID0+IHtcbiAgaWYgKCFsYXlvdXRJdGVtKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxheW91dEl0ZW06IG51bGwsXG4gICAgICBzZWxlY3RlZDogZmFsc2VcbiAgICB9XG4gIH1cblxuICBsZXQgc2VsZWN0ZWQgPSBmYWxzZVxuICBjb25zdCBpc1BlbmRpbmcgPSBsYXlvdXRJdGVtLmlzUGVuZGluZyA/PyBmYWxzZVxuXG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICBzZWxlY3RlZCA9IHNlbGVjdGlvbi5sYXlvdXRJZCA9PT0gbGF5b3V0SWQgJiYgc2VsZWN0aW9uLmxheW91dEl0ZW1JZCA9PT0gbGF5b3V0SXRlbS5pZFxuICB9XG4gIGNvbnN0IHJlc3VsdDogU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyA9IHtcbiAgICBzZWxlY3RlZCxcbiAgICB3YXRjaFZpZXdwb3J0VmlzaWJpbGl0eSxcbiAgICBsYXlvdXRJdGVtOiBpc1BlbmRpbmcgPyBudWxsIDogbGF5b3V0SXRlbSxcbiAgICBhdXRvU2Nyb2xsOiBzZWxlY3RlZCA/IHNlbGVjdGlvbi5hdXRvU2Nyb2xsIDogdW5kZWZpbmVkXG4gIH1cblxuICBpZiAoc2VsZWN0ZWQgJiYgYW5pbWF0aW9uUHJldmlldz8ubGF5b3V0SW5mbykge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQ6IGFuaW1MYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBhbmltSXRlbUlkIH0gPSBhbmltYXRpb25QcmV2aWV3LmxheW91dEluZm9cbiAgICByZXN1bHQuYW5pbWF0aW9uUHJldmlldyA9IGFuaW1MYXlvdXRJZCA9PT0gbGF5b3V0SWQgJiYgYW5pbUl0ZW1JZCA9PT0gbGF5b3V0SXRlbS5pZFxuICAgIHJlc3VsdC5wbGF5TW9kZSA9IHJlc3VsdC5hbmltYXRpb25QcmV2aWV3ID8gYW5pbWF0aW9uUHJldmlldy5wbGF5TW9kZSA6IG51bGxcbiAgICByZXN1bHQucHJldmlld0lkID0gcmVzdWx0LmFuaW1hdGlvblByZXZpZXcgPyBhbmltYXRpb25QcmV2aWV3LmlkIDogbnVsbFxuICB9IGVsc2UgaWYgKHNlbGVjdGVkICYmIGhvdmVyUHJldmlldz8ubGF5b3V0SW5mbykge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQ6IGhvdmVyTGF5b3V0SWQsIGxheW91dEl0ZW1JZDogaG92ZXJJdGVtSWQgfSA9IGhvdmVyUHJldmlldy5sYXlvdXRJbmZvXG4gICAgcmVzdWx0LmhvdmVyUHJldmlldyA9IGhvdmVyTGF5b3V0SWQgPT09IGxheW91dElkICYmIGhvdmVySXRlbUlkID09PSBsYXlvdXRJdGVtLmlkXG4gICAgcmVzdWx0LnByZXZpZXdJZCA9IHJlc3VsdC5ob3ZlclByZXZpZXcgPyBob3ZlclByZXZpZXcuaWQgOiBudWxsXG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufSlcblxuZXhwb3J0IGNvbnN0IG1hcFN0YXRlVG9XaWRnZXRQcm9wczogKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiBXaWRnZXRQcm9wcyA9IGNyZWF0ZVNlbGVjdG9yKFtcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBvd25Qcm9wc1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0cz8uW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmIGxheW91dEl0ZW0ud2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1tsYXlvdXRJdGVtLndpZGdldElkXVxuICAgIH1cbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBvd25Qcm9wc1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0cz8uW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmICFsYXlvdXRJdGVtLndpZGdldElkKSB7XG4gICAgICByZXR1cm4gbGF5b3V0SXRlbS5zZXR0aW5nPy5wbGFjZWhvbGRlclN0eWxlXG4gICAgfVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgbGF5b3V0SXRlbS53aWRnZXRJZCkge1xuICAgICAgcmV0dXJuIHN0YXRlLndpZGdldHNSdW50aW1lSW5mb1tsYXlvdXRJdGVtLndpZGdldElkXVxuICAgIH1cbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBvd25Qcm9wc1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0cz8uW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgICBpZiAobGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmICFsYXlvdXRJdGVtLndpZGdldElkKSB7XG4gICAgICByZXR1cm4gc3RhdGUud2lkZ2V0c1N0YXRlW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG4gICAgfVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkIH0gPSBvd25Qcm9wc1xuICAgIGNvbnN0IGxheW91dEpzb24gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0cz8uW2xheW91dElkXVxuICAgIGlmIChsYXlvdXRKc29uLnBhcmVudD8udHlwZSA9PT0gTGF5b3V0UGFyZW50VHlwZS5XaWRnZXQpIHtcbiAgICAgIGNvbnN0IHBhcmVudFdpZGdldElkID0gbGF5b3V0SnNvbi5wYXJlbnQuaWRcbiAgICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1twYXJlbnRXaWRnZXRJZF1cbiAgICAgIHJldHVybiAvd2lkZ2V0c1xcL2NvbW1vblxcL2NvbnRyb2xsZXJcXC8/Ly50ZXN0KHdpZGdldEpzb24udXJpKVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXSwgKHdpZGdldCwgcGxhY2Vob2xkZXJTdHlsZSwgd2lkZ2V0UnVudGltZUluZm8sIHdpZGdldFN0YXRlLCBpc0luQ29udHJvbGxlcikgPT4ge1xuICBjb25zdCBzdXBwb3J0SW5saW5lRWRpdGluZyA9IHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/LnN1cHBvcnRJbmxpbmVFZGl0aW5nXG4gIHJldHVybiB7XG4gICAgaGFzRW1iZWRkZWRMYXlvdXQ6IHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/Lmhhc0VtYmVkZGVkTGF5b3V0ICYmIE9iamVjdC5rZXlzKHdpZGdldC5sYXlvdXRzID8/IHt9KS5sZW5ndGggPiAwLFxuICAgIHN1cHBvcnRJbmxpbmVFZGl0aW5nLFxuICAgIHN1cHBvcnRSZXBlYXQ6IHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/LnN1cHBvcnRSZXBlYXQsXG4gICAgaXNDbGFzc0xvYWRlZDogd2lkZ2V0UnVudGltZUluZm8/LmlzQ2xhc3NMb2FkZWQgPz8gZmFsc2UsXG4gICAgaXNJbmxpbmVFZGl0aW5nOiBzdXBwb3J0SW5saW5lRWRpdGluZyAmJiB3aWRnZXRSdW50aW1lSW5mbz8uaXNJbmxpbmVFZGl0aW5nLFxuICAgIGlzSW5Db250cm9sbGVyLFxuICAgIHVzZURyYWdIYW5kbGVyOiB3aWRnZXQ/Lm1hbmlmZXN0Py5wcm9wZXJ0aWVzPy51c2VEcmFnSGFuZGxlciA/PyBmYWxzZSxcbiAgICB3aWRnZXRTdHlsZTogd2lkZ2V0ICE9IG51bGwgPyB3aWRnZXQuc3R5bGUgOiBwbGFjZWhvbGRlclN0eWxlLFxuICAgIGNhbkNyb3NzTGF5b3V0Qm91bmRhcnk6IHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/LmNhbkNyb3NzTGF5b3V0Qm91bmRhcnksXG4gICAgaGFzRXh0ZW5zaW9uOiB3aWRnZXQ/Lm1hbmlmZXN0Py5leHRlbnNpb25zPy5sZW5ndGggPiAwLFxuICAgIHdpZGdldEpzb246IHdpZGdldCxcbiAgICB3aWRnZXRJZDogd2lkZ2V0Py5pZCxcbiAgICBpc0Z1bmN0aW9uYWxXaWRnZXQ6IHdpZGdldD8ubWFuaWZlc3Q/LndpZGdldFR5cGUgIT09IFdpZGdldFR5cGUuTGF5b3V0LFxuICAgIHdpZGdldFN0YXRlXG4gIH1cbn0pXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1dpZGdldEhhc0VtYmVkZGVkTGF5b3V0ICh3aWRnZXRJZDogc3RyaW5nLCBhcHBDb25maWc6IElNQXBwQ29uZmlnKSB7XG4gIGNvbnN0IHdpZGdldCA9IGFwcENvbmZpZz8ud2lkZ2V0cz8uW3dpZGdldElkXVxuXG4gIGlmICh3aWRnZXQ/Lm1hbmlmZXN0Py5wcm9wZXJ0aWVzPy5oYXNFbWJlZGRlZExheW91dCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh3aWRnZXQ/LmxheW91dHMgPz8ge30pLmxlbmd0aCA+IDBcbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb25hbFdpZGdldCAod2lkZ2V0SWQ6IHN0cmluZywgYXBwQ29uZmlnOiBJTUFwcENvbmZpZykge1xuICBjb25zdCB3aWRnZXQgPSBhcHBDb25maWc/LndpZGdldHM/Llt3aWRnZXRJZF1cbiAgY29uc3QgdHlwZSA9IHdpZGdldD8ubWFuaWZlc3Q/LndpZGdldFR5cGVcbiAgcmV0dXJuIHR5cGUgIT09IFdpZGdldFR5cGUuTGF5b3V0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1dpZGdldFBsYWNlaG9sZGVyIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyk6IGJvb2xlYW4ge1xuICBpZiAoIWl0ZW0gfHwgaXRlbS5pdGVtVHlwZSAhPT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoaXRlbS5sYXlvdXRJbmZvKSB7XG4gICAgLy8gTGF5b3V0IGl0ZW0gd2l0aG91dCB3aWRnZXRJZFxuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gaXRlbS5sYXlvdXRJbmZvXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdLmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG5cbiAgICBpZiAobGF5b3V0SXRlbSAmJiAhbGF5b3V0SXRlbS53aWRnZXRJZCkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBpZiAoIWl0ZW0ubGF5b3V0SW5mbyAmJiAhaXRlbS51cmkpIHtcbiAgICAvLyBOZXcgd2lkZ2V0IHdpdGhvdXQgdXJpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG4vKipcbiAqIFJlcGxhY2UgdGhlIHZhbHVlcyBvZiBib3VuZGluZyBib3ggYjEgd2l0aCB2YWx1ZXMgb2YgYjIsIHRyeSB0byBrZWVwIHRoZSB1bml0IG9mIGVhY2ggcHJvcGVydHkuXG4gKiBAcGFyYW0gYjFcbiAqIEBwYXJhbSBiMlxuICogQHBhcmFtIGNvbnRhaW5lclJlY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VCb3VuZGluZ0JveCAoYjE6IElNQm91bmRpbmdCb3gsIGIyOiBET01SZWN0LCBjb250YWluZXJSZWN0OiBET01SZWN0KTogSU1Cb3VuZGluZ0JveCB7XG4gIGlmICghYjEpIHtcbiAgICByZXR1cm4gSW1tdXRhYmxlKHtcbiAgICAgIGxlZnQ6IGlzUGVyY2VudGFnZShiMi5sZWZ0KSA/IGIyLmxlZnQgOiBgJHtNYXRoLnJvdW5kKGIyLmxlZnQpfXB4YCxcbiAgICAgIHJpZ2h0OiBpc1BlcmNlbnRhZ2UoYjIucmlnaHQpID8gYjIucmlnaHQgOiBgJHtNYXRoLnJvdW5kKGIyLnJpZ2h0KX1weGAsXG4gICAgICB0b3A6IGlzUGVyY2VudGFnZShiMi50b3ApID8gYjIudG9wIDogYCR7TWF0aC5yb3VuZChiMi50b3ApfXB4YCxcbiAgICAgIGJvdHRvbTogaXNQZXJjZW50YWdlKGIyLmJvdHRvbSkgPyBiMi5ib3R0b20gOiBgJHtNYXRoLnJvdW5kKGIyLmJvdHRvbSl9cHhgLFxuICAgICAgd2lkdGg6IGlzUGVyY2VudGFnZShiMi53aWR0aCkgPyBiMi53aWR0aCA6IGAke01hdGgucm91bmQoYjIud2lkdGgpfXB4YCxcbiAgICAgIGhlaWdodDogaXNQZXJjZW50YWdlKGIyLmhlaWdodCkgPyBiMi5oZWlnaHQgOiBgJHtNYXRoLnJvdW5kKGIyLmhlaWdodCl9cHhgXG4gICAgfSkgYXMgSU1Cb3VuZGluZ0JveFxuICB9XG4gIGxldCByZXN1bHQgPSBiMTtcbiAgWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nLCAnd2lkdGgnLCAnaGVpZ2h0J10uZm9yRWFjaChrZXkgPT4ge1xuICAgIGlmIChyZXN1bHRba2V5XSAhPSBudWxsKSB7XG4gICAgICByZXN1bHQgPSB1cGRhdGVCb3VuZGluZ0JveFByb3Aoa2V5LCByZXN1bHQsIGIyW2tleV0sIGNvbnRhaW5lclJlY3QpXG4gICAgfSBlbHNlIGlmIChiMltrZXldICE9IG51bGwpIHtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5zZXQoa2V5LCBgJHtNYXRoLnJvdW5kKGIyW2tleV0pfXB4YClcbiAgICB9XG4gIH0pXG4gIHJldHVybiByZXN1bHRcbn1cblxuLyoqXG4gKiBVcGRhdGUgYSBwcm9wZXJ0eSBvZiB0aGUgYm91bmRpbmcgYm94XG4gKiBAcGFyYW0gcHJvcFxuICogQHBhcmFtIGJcbiAqIEBwYXJhbSBuZXdWYWx1ZVxuICogQHBhcmFtIGNvbnRhaW5lclJlY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJvdW5kaW5nQm94UHJvcCAoXG4gIHByb3A6IHN0cmluZyxcbiAgYjogSU1Cb3VuZGluZ0JveCxcbiAgbmV3VmFsdWU6IG51bWJlciB8IHN0cmluZyxcbiAgY29udGFpbmVyUmVjdDogQ2xpZW50UmVjdFxuKSB7XG4gIGlmIChiW3Byb3BdID09IG51bGwgfHwgYltwcm9wXSA9PT0gJ2F1dG8nKSB7XG4gICAgcmV0dXJuIGJcbiAgfVxuICBsZXQgdXBkYXRlZCA9IGJcbiAgaWYgKGlzUGVyY2VudGFnZShiW3Byb3BdKSkge1xuICAgIGlmIChwcm9wID09PSAnbGVmdCcgfHwgcHJvcCA9PT0gJ3JpZ2h0JyB8fCBwcm9wID09PSAnd2lkdGgnKSB7XG4gICAgICBpZiAoaXNQZXJjZW50YWdlKG5ld1ZhbHVlKSkge1xuICAgICAgICB1cGRhdGVkID0gYi5zZXQocHJvcCwgbmV3VmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVkID0gYi5zZXQocHJvcCwgYCR7KCgrbmV3VmFsdWUgKiAxMDApIC8gY29udGFpbmVyUmVjdC53aWR0aCkudG9GaXhlZCg0KX0lYClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzUGVyY2VudGFnZShuZXdWYWx1ZSkpIHtcbiAgICAgICAgdXBkYXRlZCA9IGIuc2V0KHByb3AsIG5ld1ZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBkYXRlZCA9IGIuc2V0KHByb3AsIGAkeygoK25ld1ZhbHVlICogMTAwKSAvIGNvbnRhaW5lclJlY3QuaGVpZ2h0KS50b0ZpeGVkKDQpfSVgKVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoaXNQZXJjZW50YWdlKG5ld1ZhbHVlKSkge1xuICAgICAgaWYgKHByb3AgPT09ICdsZWZ0JyB8fCBwcm9wID09PSAncmlnaHQnIHx8IHByb3AgPT09ICd3aWR0aCcpIHtcbiAgICAgICAgdXBkYXRlZCA9IGIuc2V0KHByb3AsIE1hdGgucm91bmQoKHBhcnNlRmxvYXQoYCR7bmV3VmFsdWV9YCkgKiBjb250YWluZXJSZWN0LndpZHRoKSAvIDEwMCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVkID0gYi5zZXQocHJvcCwgTWF0aC5yb3VuZCgocGFyc2VGbG9hdChgJHtuZXdWYWx1ZX1gKSAqIGNvbnRhaW5lclJlY3QuaGVpZ2h0KSAvIDEwMCkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc05hTigrbmV3VmFsdWUpKSB7XG4gICAgICAgIHVwZGF0ZWQgPSBiLndpdGhvdXQocHJvcCBhcyBhbnkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVkID0gYi5zZXQocHJvcCwgYCR7TWF0aC5yb3VuZCgrbmV3VmFsdWUpfXB4YClcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVwZGF0ZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbGF0aXZlQ2xpZW50UmVjdCAocjE6IERPTVJlY3QsIHIyOiBET01SZWN0KTogRE9NUmVjdCAmIHsgaWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiByMS5sZWZ0IC0gcjIubGVmdCxcbiAgICB0b3A6IHIxLnRvcCAtIHIyLnRvcCxcbiAgICByaWdodDogcjEucmlnaHQsXG4gICAgYm90dG9tOiByMS5ib3R0b20sXG4gICAgd2lkdGg6IHIxLndpZHRoLFxuICAgIGhlaWdodDogcjEuaGVpZ2h0LFxuICAgIGlkOiBudWxsXG4gIH0gYXMgRE9NUmVjdCAmIHsgaWQ6IHN0cmluZyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JUTCAoKSB7XG4gIHJldHVybiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29udGV4dD8uaXNSVEwgPz8gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXNwZWN0UmF0aW8gKHJhdGlvOiBudW1iZXIgfCBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgd2lkdGggPSAxMDBcbiAgbGV0IGhlaWdodCA9IDEwMFxuICBpZiAodHlwZW9mIHJhdGlvID09PSAnbnVtYmVyJykge1xuICAgIHdpZHRoID0gMTAwXG4gICAgaGVpZ2h0ID0gTWF0aC5yb3VuZChyYXRpbyAqIDEwMClcbiAgfSBlbHNlIGlmICh0eXBlb2YgcmF0aW8gPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgaXRlbXMgPSByYXRpby5zcGxpdCgnOicpXG4gICAgd2lkdGggPSBwYXJzZUludChpdGVtc1swXSwgMTApXG4gICAgaGVpZ2h0ID0gcGFyc2VJbnQoaXRlbXNbMV0sIDEwKVxuICB9XG4gIHJldHVybiB3aWR0aCAvIGhlaWdodFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kU3R5bGVBcnJheSAoZGF0YUFycmF5OiBudW1iZXJbXSk6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgaWYgKCFkYXRhQXJyYXkgfHwgZGF0YUFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbMCwgMCwgMCwgMF1cbiAgfSBlbHNlIGlmIChkYXRhQXJyYXkubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIFtkYXRhQXJyYXlbMF0sIGRhdGFBcnJheVswXSwgZGF0YUFycmF5WzBdLCBkYXRhQXJyYXlbMF1dXG4gIH0gZWxzZSBpZiAoZGF0YUFycmF5Lmxlbmd0aCA9PT0gMikgeyAvLyB0b3AvYm90dG9tLCBsZWZ0L3JpZ2h0XG4gICAgcmV0dXJuIFtkYXRhQXJyYXlbMF0sIGRhdGFBcnJheVsxXSwgZGF0YUFycmF5WzBdLCBkYXRhQXJyYXlbMV1dXG4gIH0gZWxzZSBpZiAoZGF0YUFycmF5Lmxlbmd0aCA9PT0gMykge1xuICAgIHJldHVybiBbZGF0YUFycmF5WzBdLCBkYXRhQXJyYXlbMV0sIGRhdGFBcnJheVsyXSwgMF1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW2RhdGFBcnJheVswXSwgZGF0YUFycmF5WzFdLCBkYXRhQXJyYXlbMl0sIGRhdGFBcnJheVszXV1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsSGVpZ2h0T2ZMYXlvdXRJdGVtIChjb250YWluZXJIZWlnaHQ6IG51bWJlciwgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvbik6IHsgaGVpZ2h0PzogbnVtYmVyLCBzZXR0aW5nOiBhbnkgfSB7XG4gIGNvbnN0IHNldHRpbmcgPSBsYXlvdXRJdGVtLnNldHRpbmcgPz8ge31cbiAgY29uc3QgbW9kZSA9IGdldExheW91dEl0ZW1TaXplTW9kZSgnaGVpZ2h0JywgbGF5b3V0SXRlbS5iYm94LCBzZXR0aW5nLmF1dG9Qcm9wcylcblxuICBsZXQgcmVzdWx0XG4gIGlmIChzZXR0aW5nLmhlaWdodE1vZGUgPT09ICdyYXRpbycpIHtcbiAgICByZXN1bHQgPSB7XG4gICAgICBzZXR0aW5nOiB7XG4gICAgICAgIGhlaWdodE1vZGU6ICdyYXRpbycsXG4gICAgICAgIGFzcGVjdFJhdGlvOiBzZXR0aW5nLmFzcGVjdFJhdGlvID8/IDEsXG4gICAgICAgIGF1dG9Qcm9wczogeyBoZWlnaHQ6IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAobW9kZSAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20pIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVpZ2h0OiBtb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2ggPyBjb250YWluZXJIZWlnaHQgOiBudWxsLFxuICAgICAgc2V0dGluZzoge1xuICAgICAgICBhdXRvUHJvcHM6IHsgaGVpZ2h0OiBtb2RlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gZml0IG9yIGZpeGVkIG9yIG5vIGhlaWdodCBtb2RlXG4gICAgbGV0IGhlaWdodCA9IGxheW91dEl0ZW0uYmJveD8uaGVpZ2h0ID8/IGNvbnRhaW5lckhlaWdodFxuICAgIGlmIChpc1BlcmNlbnRhZ2UoaGVpZ2h0KSkge1xuICAgICAgaGVpZ2h0ID0gZnJvbVJhdGlvKGhlaWdodCwgY29udGFpbmVySGVpZ2h0KVxuICAgIH0gZWxzZSB7XG4gICAgICBoZWlnaHQgPSBwYXJzZUludChoZWlnaHQgYXMgc3RyaW5nKVxuICAgIH1cbiAgICByZXN1bHQgPSB7XG4gICAgICBoZWlnaHQsXG4gICAgICBzZXR0aW5nOiB7XG4gICAgICAgIGhlaWdodE1vZGU6ICdmaXhlZCcsXG4gICAgICAgIGF1dG9Qcm9wczogeyBoZWlnaHQ6IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwQ29uZmlnICgpOiBJTUFwcENvbmZpZyB7XG4gIHJldHVybiB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50U2l6ZU1vZGUgKCk6IEJyb3dzZXJTaXplTW9kZSB7XG4gIHJldHVybiB3aW5kb3c/LmppbXVDb25maWc/LmlzQnVpbGRlclxuICAgID8gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyPy5icm93c2VyU2l6ZU1vZGVcbiAgICA6IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5icm93c2VyU2l6ZU1vZGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRQYWdlSWQgKCk6IHN0cmluZyB7XG4gIHJldHVybiB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwUnVudGltZUluZm8/LmN1cnJlbnRQYWdlSWRcbiAgICA6IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBSdW50aW1lSW5mbz8uY3VycmVudFBhZ2VJZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERpYWxvZ0lkICgpOiBzdHJpbmcge1xuICByZXR1cm4gd2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyXG4gICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcFJ1bnRpbWVJbmZvPy5jdXJyZW50RGlhbG9nSWRcbiAgICA6IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBSdW50aW1lSW5mbz8uY3VycmVudERpYWxvZ0lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY3RpdmVQYWdlUGFydCAoKTogUGFnZVBhcnQge1xuICByZXR1cm4gd2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyXG4gICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcFJ1bnRpbWVJbmZvPy5hY3RpdmVQYWdlUGFydFxuICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFJ1bnRpbWVJbmZvPy5hY3RpdmVQYWdlUGFydFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERpYWxvZ1Jvb3RMYXlvdXRJZCAoKTogc3RyaW5nIHtcbiAgY29uc3QgYXBwQ29uZmlnID0gd2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyXG4gICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcENvbmZpZ1xuICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xuICBjb25zdCBkaWFsb2dJZCA9IGdldEN1cnJlbnREaWFsb2dJZCgpXG4gIGNvbnN0IGJyb3dzZXJTaXplTW9kZSA9IGdldEN1cnJlbnRTaXplTW9kZSgpXG4gIHJldHVybiBhcHBDb25maWc/LmRpYWxvZ3NbZGlhbG9nSWRdPy5sYXlvdXQ/Llticm93c2VyU2l6ZU1vZGVdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50UGFnZVJvb3RMYXlvdXRJZCAoKTogc3RyaW5nIHtcbiAgY29uc3QgYXBwQ29uZmlnID0gd2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyXG4gICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcENvbmZpZ1xuICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xuICBjb25zdCBwYWdlSWQgPSBnZXRDdXJyZW50UGFnZUlkKClcbiAgY29uc3QgYnJvd3NlclNpemVNb2RlID0gZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgcmV0dXJuIGFwcENvbmZpZz8ucGFnZXNbcGFnZUlkXT8ubGF5b3V0Py5bYnJvd3NlclNpemVNb2RlXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVhZGVyUm9vdExheW91dElkICgpOiBzdHJpbmcge1xuICBjb25zdCBhcHBDb25maWcgPSB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXG4gIGNvbnN0IGJyb3dzZXJTaXplTW9kZSA9IGdldEN1cnJlbnRTaXplTW9kZSgpXG4gIHJldHVybiBhcHBDb25maWc/LmhlYWRlcj8ubGF5b3V0Py5bYnJvd3NlclNpemVNb2RlXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9vdGVyUm9vdExheW91dElkICgpOiBzdHJpbmcge1xuICBjb25zdCBhcHBDb25maWcgPSB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXG4gIGNvbnN0IGJyb3dzZXJTaXplTW9kZSA9IGdldEN1cnJlbnRTaXplTW9kZSgpXG4gIHJldHVybiBhcHBDb25maWc/LmZvb3Rlcj8ubGF5b3V0Py5bYnJvd3NlclNpemVNb2RlXVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHJlY3QxIGNvbnRhaW5zIHJlY3QyXG4gKiBAcGFyYW0gcmVjdDFcbiAqIEBwYXJhbSByZWN0MlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnMgKHJlY3QxOiBDbGllbnRSZWN0LCByZWN0MjogQ2xpZW50UmVjdCk6IGJvb2xlYW4ge1xuICByZXR1cm4gcmVjdDIubGVmdCA+PSByZWN0MS5sZWZ0ICYmIHJlY3QyLmxlZnQgKyByZWN0Mi53aWR0aCA8PSByZWN0MS5sZWZ0ICsgcmVjdDEud2lkdGggJiZcbiAgICByZWN0Mi50b3AgPj0gcmVjdDEudG9wICYmIHJlY3QyLnRvcCArIHJlY3QyLmhlaWdodCA8PSByZWN0MS50b3AgKyByZWN0MS5oZWlnaHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHMgKHIxOiBDbGllbnRSZWN0LCByMjogQ2xpZW50UmVjdCk6IGJvb2xlYW4ge1xuICByZXR1cm4gIShyMi5sZWZ0ID4gcjEubGVmdCArIHIxLndpZHRoIHx8XG4gICAgcjIubGVmdCArIHIyLndpZHRoIDwgcjEubGVmdCB8fFxuICAgIHIyLnRvcCA+IHIxLnRvcCArIHIxLmhlaWdodCB8fFxuICAgIHIyLnRvcCArIHIyLmhlaWdodCA8IHIxLnRvcClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUxpbmVhclVuaXQgKHZhbHVlOiBzdHJpbmcgfCBMaW5lYXJVbml0KTogc3RyaW5nIHtcbiAgbGV0IHVuaXQ6IERpc3RhbmNlVW5pdHNcbiAgbGV0IGRpc3RhbmNlOiBudW1iZXJcbiAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgIHVuaXQgPSB2YWx1ZS51bml0ID8/IERpc3RhbmNlVW5pdHMuUElYRUxcbiAgICBkaXN0YW5jZSA9IHZhbHVlLmRpc3RhbmNlID8/IDBcbiAgfSBlbHNlIHtcbiAgICBjb25zdCByZXQgPSBwb2xpc2hlZC5nZXRWYWx1ZUFuZFVuaXQodmFsdWUpXG4gICAgdW5pdCA9IHJldD8uWzFdID8/IERpc3RhbmNlVW5pdHMuUElYRUxcbiAgICBkaXN0YW5jZSA9IHJldD8uWzBdID8/IDBcbiAgfVxuICAvLyBLZWVwIG9uZSBkZWNpbWFsIGluIHBlcmNlbnRhZ2UgYW5kIHVzZSBpbnRlZ2VyIGluIHBpeGVsXG4gIGRpc3RhbmNlID0gdW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFID8gTWF0aC5yb3VuZChkaXN0YW5jZSAqIDEwKSAvIDEwIDogTWF0aC5yb3VuZChkaXN0YW5jZSlcbiAgcmV0dXJuIGAke2Rpc3RhbmNlfSR7dW5pdH1gXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXlvdXRJdGVtU2l6ZU1vZGUgKHNpZGU6ICd3aWR0aCcgfCAnaGVpZ2h0JywgYmJveDogSU1Cb3VuZGluZ0JveCwgYXV0b1Byb3BzOiBhbnkpOiBMYXlvdXRJdGVtU2l6ZU1vZGVzIHtcbiAgY29uc3QgbW9kZSA9IGF1dG9Qcm9wcz8uW3NpZGVdXG4gIGNvbnN0IGZpcnN0ID0gc2lkZSA9PT0gJ3dpZHRoJyA/ICdsZWZ0JyA6ICd0b3AnXG4gIGNvbnN0IGxhc3QgPSBzaWRlID09PSAnd2lkdGgnID8gJ3JpZ2h0JyA6ICdib3R0b20nXG5cbiAgaWYgKCFtb2RlKSB7IC8vIGZhbHNlIG9yIHVuZGVmaW5lZFxuICAgIGlmIChiYm94W3NpZGVdICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbVxuICAgIH0gZWxzZSBpZiAoYmJveFtmaXJzdF0gIT0gbnVsbCAmJiBiYm94W2xhc3RdICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2hcbiAgICB9XG4gICAgcmV0dXJuIExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICB9XG5cbiAgaWYgKG1vZGUgPT09IHRydWUpIHsgLy8gd2lkdGggb3IgaGVpZ2h0IGlzIGF1dG9cbiAgICBpZiAoYmJveFtmaXJzdF0gIT0gbnVsbCAmJiBiYm94W2xhc3RdICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2hcbiAgICB9XG4gICAgcmV0dXJuIExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICB9XG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGNhc2UgTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvOlxuICAgICAgcmV0dXJuIExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICAgIGNhc2UgTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoOlxuICAgICAgcmV0dXJuIExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaFxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b21cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkVXNlQXNwZWN0UmF0aW8gKGl0ZW1TZXR0aW5nOiBDb21tb25MYXlvdXRJdGVtU2V0dGluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXRlbVNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJyAmJiBpdGVtU2V0dGluZy5hc3BlY3RSYXRpbyAhPSBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnY2QgKHg6IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IG0gPSBNYXRoLm1heCh4LCB5KVxuICBsZXQgbiA9IE1hdGgubWluKHgsIHkpXG4gIHdoaWxlIChuICE9PSAwKSB7XG4gICAgY29uc3QgdGVtcCA9IG5cbiAgICBuID0gbSAlIG5cbiAgICBtID0gdGVtcFxuICB9XG4gIHJldHVybiBtXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVPbmVieU9uZUFuaW1hdGlvbiAocHJvcHM6IGFueSkge1xuICBjb25zdCB7IGRlbGF5LCBpc0xhc3RDaGlsZCB9ID0gcHJvcHNcbiAgcmV0dXJuIHsgZGVsYXksIGlzTGFzdENoaWxkIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlWVlJHTFRnaVB6NEtQSE4yWnlCM2FXUjBhRDBpT1RKd2VDSWdhR1ZwWjJoMFBTSTNNbkI0SWlCMmFXVjNRbTk0UFNJd0lEQWdPVElnTnpJaUlIWmxjbk5wYjI0OUlqRXVNU0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JaUI0Yld4dWN6cDRiR2x1YXowaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1UazVPUzk0YkdsdWF5SStDaUFnSUNBOGRHbDBiR1UrYVdOdmJsOWhibWx0WVhScGIyNWZhVzVmYm05dVpUd3ZkR2wwYkdVK0NpQWdJQ0E4WnlCemRISnZhMlU5SW01dmJtVWlJSE4wY205clpTMTNhV1IwYUQwaU1TSWdabWxzYkQwaWJtOXVaU0lnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWo0S0lDQWdJQ0FnSUNBOFp5QjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d0T1RReExqQXdNREF3TUN3Z0xURTVNaTR3TURBd01EQXBJajRLSUNBZ0lDQWdJQ0FnSUNBZ1BHY2dkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvT1RFM0xqQXdNREF3TUN3Z05USXVNREF3TURBd0tTSStDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThaeUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU5DNHdNREF3TURBc0lERTBNQzR3TURBd01EQXBJajRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNtVmpkQ0JtYVd4c0xYSjFiR1U5SW01dmJucGxjbThpSUhnOUlqQWlJSGs5SWpBaUlIZHBaSFJvUFNJNU1pSWdhR1ZwWjJoMFBTSTNNaUkrUEM5eVpXTjBQZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d2IyeDVaMjl1SUdacGJHdzlJaU0yUVRaQk5rRWlJSEJ2YVc1MGN6MGlORFlnTkRnZ016RXVPRGt6TVRVek9TQTFOUzQwTVRZME1EYzVJRE0wTGpVNE56TXlNVGdnTXprdU56QTRNakF6T1NBeU15NHhOelEyTkRNMklESTRMalU0TXpVNU1qRWdNemd1T1RRMk5UYzNJREkyTGpJNU1UYzVOakVnTkRZZ01USWdOVE11TURVek5ESXpJREkyTGpJNU1UYzVOakVnTmpndU9ESTFNelUyTkNBeU9DNDFPRE0xT1RJeElEVTNMalF4TWpZM09ESWdNemt1TnpBNE1qQXpPU0EyTUM0eE1EWTRORFl4SURVMUxqUXhOalF3TnpraVBqd3ZjRzlzZVdkdmJqNEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEd3ZaejRLSUNBZ0lDQWdJQ0FnSUNBZ1BDOW5QZ29nSUNBZ0lDQWdJRHd2Wno0S0lDQWdJRHd2Wno0S1BDOXpkbWMrXCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpVlZSR0xUZ2lQejRLUEhOMlp5QjNhV1IwYUQwaU9USndlQ0lnYUdWcFoyaDBQU0kzTW5CNElpQjJhV1YzUW05NFBTSXdJREFnT1RJZ056SWlJSFpsY25OcGIyNDlJakV1TVNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCNGJXeHVjenA0YkdsdWF6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNVGs1T1M5NGJHbHVheUkrQ2lBZ0lDQThkR2wwYkdVK2FXTnZibDloYm1sdFlYUnBiMjVmZEhKaGJuTnBkR2x2Ymw5bVlXUmxQQzkwYVhSc1pUNEtJQ0FnSUR4bklITjBjbTlyWlQwaWJtOXVaU0lnYzNSeWIydGxMWGRwWkhSb1BTSXhJaUJtYVd4c1BTSnViMjVsSWlCbWFXeHNMWEoxYkdVOUltVjJaVzV2WkdRaVBnb2dJQ0FnSUNBZ0lEeG5JSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0MweE1EWXhMakF3TURBd01Dd2dMVEUxTUM0d01EQXdNREFwSWo0S0lDQWdJQ0FnSUNBZ0lDQWdQR2NnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb09URTNMakF3TURBd01Dd2dOVEl1TURBd01EQXdLU0krQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4WnlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3hORFF1TURBd01EQXdMQ0E1T0M0d01EQXdNREFwSWo0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjbVZqZENCdmNHRmphWFI1UFNJd0xqRXdNREF3TURBd01TSWdabWxzYkMxeWRXeGxQU0p1YjI1NlpYSnZJaUI0UFNJd0lpQjVQU0l3SWlCM2FXUjBhRDBpT1RJaUlHaGxhV2RvZEQwaU56SWlQand2Y21WamRENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y21WamRDQm1hV3hzUFNJak5USTFNalV5SWlCNFBTSXlPQ0lnZVQwaU1qUWlJSGRwWkhSb1BTSTJOQ0lnYUdWcFoyaDBQU0kwT0NJK1BDOXlaV04wUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHlaV04wSUdacGJHd3RiM0JoWTJsMGVUMGlNQzQxSWlCbWFXeHNQU0lqTXpZek5qTTJJaUI0UFNJd0lpQjVQU0l3SWlCM2FXUjBhRDBpTmpRaUlHaGxhV2RvZEQwaU5EZ2lQand2Y21WamRENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTmpRc01DQk1OalFzTkRnZ1REQXNORGdnVERBc01DQk1OalFzTUNCYUlFMDJNeXd4SUV3eExERWdUREVzTkRjZ1REWXpMRFEzSUV3Mk15d3hJRm9pSUdacGJHdzlJaU0yUVRaQk5rRWlJR1pwYkd3dGNuVnNaVDBpYm05dWVtVnlieUkrUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQQzluUGdvZ0lDQWdJQ0FnSUNBZ0lDQThMMmMrQ2lBZ0lDQWdJQ0FnUEM5blBnb2dJQ0FnUEM5blBnbzhMM04yWno0PVwiIiwibW9kdWxlLmV4cG9ydHMgPSBcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaVZWUkdMVGdpUHo0S1BITjJaeUIzYVdSMGFEMGlPVEp3ZUNJZ2FHVnBaMmgwUFNJM01uQjRJaUIyYVdWM1FtOTRQU0l3SURBZ09USWdOeklpSUhabGNuTnBiMjQ5SWpFdU1TSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklpQjRiV3h1Y3pwNGJHbHVhejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TVRrNU9TOTRiR2x1YXlJK0NpQWdJQ0E4ZEdsMGJHVSthV052Ymw5aGJtbHRZWFJwYjI1ZmRISmhibk5wZEdsdmJsOXdkWE5vUEM5MGFYUnNaVDRLSUNBZ0lEeG5JSE4wY205clpUMGlibTl1WlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l4SWlCbWFXeHNQU0p1YjI1bElpQm1hV3hzTFhKMWJHVTlJbVYyWlc1dlpHUWlQZ29nSUNBZ0lDQWdJRHhuSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtDMDVOREV1TURBd01EQXdMQ0F0TWpjd0xqQXdNREF3TUNraUlHWnBiR3d0Y25Wc1pUMGlibTl1ZW1WeWJ5SStDaUFnSUNBZ0lDQWdJQ0FnSUR4bklIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLRGt4Tnk0d01EQXdNREFzSURVeUxqQXdNREF3TUNraVBnb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BHY2dkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpRdU1EQXdNREF3TENBeU1UZ3VNREF3TURBd0tTSStDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhKbFkzUWdlRDBpTUNJZ2VUMGlNQ0lnZDJsa2RHZzlJamt5SWlCb1pXbG5hSFE5SWpjeUlqNDhMM0psWTNRK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVGt5TERBZ1REa3lMRGN5SUV3d0xEY3lJRXd3TERBZ1REa3lMREFnV2lCTk9URXNNemNnVERFc016Y2dUREVzTnpFZ1REa3hMRGN4SUV3NU1Td3pOeUJhSUUwME5pdzBOQ0JNTlRZc05UUWdURFV3TGpFMk5qWTJOamNzTlRRZ1REVXdMakUyTmpZMk5qY3NOalFnVERReExqZ3pNek16TXpNc05qUWdURFF4TGpnek16TXpNek1zTlRRZ1RETTJMRFUwSUV3ME5pdzBOQ0JhSWlCbWFXeHNQU0lqTmtFMlFUWkJJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThMMmMrQ2lBZ0lDQWdJQ0FnSUNBZ0lEd3ZaejRLSUNBZ0lDQWdJQ0E4TDJjK0NpQWdJQ0E4TDJjK0Nqd3ZjM1puUGc9PVwiIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfY29yZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfZG5kX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfZm9yX2J1aWxkZXJfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9mb3JfYnVpbGRlcl90ZW1wbGF0ZXNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdGhlbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2FkdmFuY2VkX3NldHRpbmdfY29tcG9uZW50c19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2FkdmFuY2VkX3N0eWxlX3NldHRpbmdfY29tcG9uZW50c19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX2NvbG9yX3BpY2tlcl9fOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBpbXBvcnQgTGF5b3V0QnVpbGRlciBmcm9tICcuL2xpYi9mbG93LWxheW91dC9idWlsZGVyL2xheW91dCc7XG5pbXBvcnQgTGF5b3V0QnVpbGRlciBmcm9tICcuL2xpYi9maXhlZC1sYXlvdXQvYnVpbGRlci9sYXlvdXQnXG5pbXBvcnQgQ29sdW1uTGF5b3V0QnVpbGRlciBmcm9tICcuL2xpYi9jb2x1bW4tbGF5b3V0L2J1aWxkZXIvbGF5b3V0J1xuaW1wb3J0IFJvd0xheW91dEJ1aWxkZXIgZnJvbSAnLi9saWIvcm93LWxheW91dC9idWlsZGVyL2xheW91dCdcbmltcG9ydCBHcmlkTGF5b3V0QnVpbGRlciBmcm9tICcuL2xpYi9ncmlkLWxheW91dC9idWlsZGVyL2xheW91dCdcbmltcG9ydCBGaXhlZExheW91dEl0ZW1TZXR0aW5nIGZyb20gJy4vbGliL2ZpeGVkLWxheW91dC9idWlsZGVyL2ZpeGVkLWl0ZW0tc2V0dGluZydcbmltcG9ydCBGbG93TGF5b3V0SXRlbVNldHRpbmcgZnJvbSAnLi9saWIvZmxvdy1sYXlvdXQvYnVpbGRlci9mbG93LWl0ZW0tc2V0dGluZydcbmltcG9ydCBDb2x1bW5MYXlvdXRJdGVtU2V0dGluZyBmcm9tICcuL2xpYi9jb2x1bW4tbGF5b3V0L2J1aWxkZXIvY29sdW1uLWl0ZW0tc2V0dGluZydcbmltcG9ydCBSb3dMYXlvdXRJdGVtU2V0dGluZyBmcm9tICcuL2xpYi9yb3ctbGF5b3V0L2J1aWxkZXIvcm93LWl0ZW0tc2V0dGluZydcbmltcG9ydCBHcmlkTGF5b3V0SXRlbVNldHRpbmcgZnJvbSAnLi9saWIvZ3JpZC1sYXlvdXQvYnVpbGRlci9ncmlkLWl0ZW0tc2V0dGluZydcbmltcG9ydCB7IGdldExhYmVsT2ZHcmlkVGFiIH0gZnJvbSAnLi9saWIvZ3JpZC1sYXlvdXQvY29tbW9uL3V0aWxzJ1xuaW1wb3J0IHsgREVGQVVMVF9ST1dfTEFZT1VUX1NFVFRJTkcgfSBmcm9tICcuL2xpYi9yb3ctbGF5b3V0L2RlZmF1bHQtc2V0dGluZydcbmltcG9ydCBGbG93TGF5b3V0U2V0dGluZyBmcm9tICcuL2xpYi9mbG93LWxheW91dC9sYXlvdXQtc2V0dGluZydcbmltcG9ydCBHcmlkTGF5b3V0U2V0dGluZyBmcm9tICcuL2xpYi9ncmlkLWxheW91dC9sYXlvdXQtc2V0dGluZydcbmltcG9ydCBDb21tb25MYXlvdXRJdGVtU2V0dGluZyBmcm9tICcuL2xpYi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtaXRlbS1zZXR0aW5nJ1xuaW1wb3J0IENvbW1vblRyYW5zZm9ybVNldHRpbmcgZnJvbSAnLi9saWIvYnVpbGRlci9jb21tb24tdHJhbnNmb3JtLXNldHRpbmcnXG5pbXBvcnQgUGFnZVJlbmRlcmVyIGZyb20gJy4vbGliL2J1aWxkZXIvcGFnZS1yZW5kZXJlcidcbmltcG9ydCBMYXlvdXRFbnRyeSBmcm9tICcuL2xpYi9idWlsZGVyL2xheW91dC1lbnRyeSdcbmltcG9ydCBMYXlvdXRJdGVtSW5CdWlsZGVyIGZyb20gJy4vbGliL2J1aWxkZXIvbGF5b3V0LWl0ZW0nXG5pbXBvcnQge1xuICBhZGRJdGVtVG9MYXlvdXQsXG4gIGdldFJvb3RMYXlvdXRJZFxufSBmcm9tICcuL2xpYi9idWlsZGVyL2NvbW1vbi1sYXlvdXQtYWN0aW9ucydcbmltcG9ydCB7IERyb3BBcmVhIH0gZnJvbSAnLi9saWIvYnVpbGRlci9pbnRlcmFjdGl2ZS9kcm9wYXJlYS1ob29rJ1xuXG5leHBvcnQgdHlwZSB7IFJuZE9wdGlvbnMgfSBmcm9tICcuL2xpYi9idWlsZGVyL2ludGVyYWN0aXZlL3JuZC1kZWNvcmF0b3InXG5leHBvcnQgdHlwZSB7IEdyaWROb2RlIH0gZnJvbSAnLi9saWIvZ3JpZC1sYXlvdXQvY29tbW9uL3V0aWxzJ1xuZXhwb3J0IHsgd2l0aFJuZCB9IGZyb20gJy4vbGliL2J1aWxkZXIvaW50ZXJhY3RpdmUvcm5kLWRlY29yYXRvcidcbmV4cG9ydCB7IENhbnZhc1BhbmUgfSBmcm9tICcuL2xpYi9idWlsZGVyL2ludGVyYWN0aXZlL2NhbnZhcy1wYW5lJ1xuZXhwb3J0IHsgYmluZERyYWdIYW5kbGVyLCBHTE9CQUxfRFJBR0dJTkdfQ0xBU1NfTkFNRSwgR0xPQkFMX0g1X0RSQUdHSU5HX0NMQVNTX05BTUUsIExJTUlURURfQk9VTkRBUllfQ0xBU1NfTkFNRSB9IGZyb20gJy4vbGliL2J1aWxkZXIvaW50ZXJhY3RpdmUvZHJhZy1ldmVudC1oYW5kbGVyJ1xuZXhwb3J0IHsgYmluZFJlc2l6ZUhhbmRsZXIsIEdMT0JBTF9SRVNJWklOR19DTEFTU19OQU1FIH0gZnJvbSAnLi9saWIvYnVpbGRlci9pbnRlcmFjdGl2ZS9yZXNpemUtZXZlbnQtaGFuZGxlcidcbmV4cG9ydCB7IHNlY3Rpb25NZW51SXRlbXMgfSBmcm9tICcuL2xpYi9idWlsZGVyL21lbnUvc2VjdGlvbi1tZW51J1xuZXhwb3J0IHsgVG9vbGJhciB9IGZyb20gJy4vbGliL2J1aWxkZXIvdG9vbGJhcidcbmV4cG9ydCB7IFdpZGdldFJlbmRlcmVySW5CdWlsZGVyIH0gZnJvbSAnLi9saWIvYnVpbGRlci93aWRnZXQtcmVuZGVyZXInXG5leHBvcnQgeyBTZWN0aW9uUmVuZGVyZXJJbkJ1aWxkZXIgfSBmcm9tICcuL2xpYi9idWlsZGVyL3NlY3Rpb24tcmVuZGVyZXInXG5leHBvcnQgeyBTaGFwZUwgfSBmcm9tICcuL2xpYi9idWlsZGVyL3NoYXBlLWwnXG5leHBvcnQgeyBTaGFwZVJlY3QgfSBmcm9tICcuL2xpYi9idWlsZGVyL3NoYXBlLXJlY3QnXG5leHBvcnQgeyBHcmlkTGF5b3V0U2VydmljZSB9IGZyb20gJy4vbGliL2dyaWQtbGF5b3V0L2J1aWxkZXIvbGF5b3V0LXNlcnZpY2UnXG5leHBvcnQgeyBSb3dMYXlvdXRTZXJ2aWNlIH0gZnJvbSAnLi9saWIvcm93LWxheW91dC9idWlsZGVyL2xheW91dC1zZXJ2aWNlJ1xuZXhwb3J0IHsgQ29sdW1uTGF5b3V0U2VydmljZSB9IGZyb20gJy4vbGliL2NvbHVtbi1sYXlvdXQvYnVpbGRlci9sYXlvdXQtc2VydmljZSdcbmV4cG9ydCB7IEZpeGVkTGF5b3V0U2VydmljZSB9IGZyb20gJy4vbGliL2ZpeGVkLWxheW91dC9idWlsZGVyL2xheW91dC1zZXJ2aWNlJ1xuZXhwb3J0IHsgRmxvd0xheW91dFNlcnZpY2UgfSBmcm9tICcuL2xpYi9mbG93LWxheW91dC9idWlsZGVyL2xheW91dC1zZXJ2aWNlJ1xuXG5leHBvcnQge1xuICBMYXlvdXRFbnRyeSxcbiAgUGFnZVJlbmRlcmVyLFxuICBMYXlvdXRCdWlsZGVyLFxuICBDb2x1bW5MYXlvdXRCdWlsZGVyLFxuICBSb3dMYXlvdXRCdWlsZGVyLFxuICBHcmlkTGF5b3V0QnVpbGRlcixcbiAgQ29tbW9uTGF5b3V0SXRlbVNldHRpbmcsXG4gIENvbW1vblRyYW5zZm9ybVNldHRpbmcsXG4gIEZpeGVkTGF5b3V0SXRlbVNldHRpbmcsXG4gIEZsb3dMYXlvdXRJdGVtU2V0dGluZyxcbiAgQ29sdW1uTGF5b3V0SXRlbVNldHRpbmcsXG4gIFJvd0xheW91dEl0ZW1TZXR0aW5nLFxuICBHcmlkTGF5b3V0SXRlbVNldHRpbmcsXG4gIERFRkFVTFRfUk9XX0xBWU9VVF9TRVRUSU5HLFxuICBGbG93TGF5b3V0U2V0dGluZyxcbiAgR3JpZExheW91dFNldHRpbmcsXG4gIExheW91dEl0ZW1JbkJ1aWxkZXIsXG4gIGFkZEl0ZW1Ub0xheW91dCxcbiAgZ2V0Um9vdExheW91dElkLFxuICBEcm9wQXJlYSxcbiAgZ2V0TGFiZWxPZkdyaWRUYWJcbn1cblxuZXhwb3J0ICogZnJvbSAnLi9saWIvYnVpbGRlci90eXBlcydcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==