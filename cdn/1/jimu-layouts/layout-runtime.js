System.register(["jimu-core","jimu-ui","jimu-theme","jimu-layouts/layout-runtime"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/svg/outlined/application/maxgrid.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/maxgrid.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 12 12\"><path fill=\"#fff\" fill-rule=\"evenodd\" d=\"M12 0H7v1h4v4h1V1zM0 12h5v-1H1V7H0v4z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/visible.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/visible.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/left.svg":
/*!******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/left.svg ***!
  \******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.538.538 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.538.538 0 0 1 .738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.538.538 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.538.538 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/up-double.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/up-double.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M13.146 13.847a.486.486 0 0 0 .708 0 .538.538 0 0 0 0-.738l-5.5-5.956a.485.485 0 0 0-.708 0l-5.5 5.956a.538.538 0 0 0 0 .738.485.485 0 0 0 .708 0L8 8.26zm0-5a.485.485 0 0 0 .708 0 .538.538 0 0 0 0-.738l-5.5-5.956a.485.485 0 0 0-.708 0l-5.5 5.956a.538.538 0 0 0 0 .738.485.485 0 0 0 .708 0L8 3.26z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/outlined/application/maxgrid.tsx":
/*!*****************************************************!*\
  !*** ./jimu-icons/outlined/application/maxgrid.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MaxgridOutlined: () => (/* binding */ MaxgridOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/maxgrid.svg */ "./jimu-icons/svg/outlined/application/maxgrid.svg");
/* harmony import */ var _svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const MaxgridOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/application/visible.tsx":
/*!*****************************************************!*\
  !*** ./jimu-icons/outlined/application/visible.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VisibleOutlined: () => (/* binding */ VisibleOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/application/visible.svg */ "./jimu-icons/svg/outlined/application/visible.svg");
/* harmony import */ var _svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const VisibleOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/left.tsx":
/*!**************************************************!*\
  !*** ./jimu-icons/outlined/directional/left.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LeftOutlined: () => (/* binding */ LeftOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/left.svg */ "./jimu-icons/svg/outlined/directional/left.svg");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const LeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/right.tsx":
/*!***************************************************!*\
  !*** ./jimu-icons/outlined/directional/right.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightOutlined: () => (/* binding */ RightOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const RightOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/up-double.tsx":
/*!*******************************************************!*\
  !*** ./jimu-icons/outlined/directional/up-double.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpDoubleOutlined: () => (/* binding */ UpDoubleOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/up-double.svg */ "./jimu-icons/svg/outlined/directional/up-double.svg");
/* harmony import */ var _svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const UpDoubleOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_up_double_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/close.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/close.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CloseOutlined: () => (/* binding */ CloseOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const CloseOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-layouts/lib/builder/builder-locale.ts":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/builder/builder-locale.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadMessage: () => (/* binding */ loadMessage)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../translations/default */ "./jimu-layouts/lib/translations/default.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


function loadMessage() {
    return __awaiter(this, void 0, void 0, function* () {
        let locale = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext.locale;
        locale = jimu_core__WEBPACK_IMPORTED_MODULE_0__.i18n.getLocaleToLoad(locale, jimu_core__WEBPACK_IMPORTED_MODULE_0__.translatedLocales);
        if (locale) {
            return yield jimu_core__WEBPACK_IMPORTED_MODULE_0__.i18n.loadLocaleMessages('jimu-layouts/lib/translations', locale).then((messages) => {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.i18nMessagesLoaded('jimu-layouts', messages));
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.i18n.resetIntls();
                return messages;
            });
        }
        else {
            return Promise.resolve(_translations_default__WEBPACK_IMPORTED_MODULE_1__["default"]);
        }
    });
}


/***/ }),

/***/ "./jimu-layouts/lib/builder/layout-context.tsx":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/builder/layout-context.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LayoutContext: () => (/* binding */ LayoutContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const LayoutContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({});


/***/ }),

/***/ "./jimu-layouts/lib/builder/page-context.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/builder/page-context.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageContext: () => (/* binding */ PageContext),
/* harmony export */   PageVisibilityContext: () => (/* binding */ PageVisibilityContext),
/* harmony export */   ScreenGroupContext: () => (/* binding */ ScreenGroupContext),
/* harmony export */   ViewVisibilityContext: () => (/* binding */ ViewVisibilityContext),
/* harmony export */   ViewportVisibilityContext: () => (/* binding */ ViewportVisibilityContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const PageContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    viewOnly: true
});
const ViewportVisibilityContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(true);
const PageVisibilityContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(true);
const ViewVisibilityContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    isInView: false,
    isInCurrentView: false
});
const ScreenGroupContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext('');


/***/ }),

/***/ "./jimu-layouts/lib/builder/theme-tooltip.tsx":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/builder/theme-tooltip.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ThemedTooltip: () => (/* binding */ ThemedTooltip)
/* harmony export */ });
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");


const ThemedTooltip = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_1__.withBuilderTheme)(jimu_ui__WEBPACK_IMPORTED_MODULE_0__.Tooltip);


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/common/style.ts":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/common/style.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getLayoutStyle: () => (/* binding */ getLayoutStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const getLayoutStyle = (layoutSetting) => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  height: 100%;
  overflow-x: hidden;
  justify-content: ${layoutSetting.justifyContent};
  overflow-y: auto !important;
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
  &::-webkit-scrollbar {
    display: none;  /* Safari and Chrome */
  }
  &:hover {
    -ms-overflow-style: auto;  /* Internet Explorer 10+ */
    scrollbar-width: auto;  /* Firefox */
    &::-webkit-scrollbar {
      display: block;  /* Safari and Chrome */
    }
  }
  & > div.flexbox-layout-item ~ div.flexbox-layout-item {
    margin-top: ${layoutSetting.space}px;
  }
`;


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/common/util.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/common/util.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calHeight: () => (/* binding */ calHeight),
/* harmony export */   getItemStyle: () => (/* binding */ getItemStyle),
/* harmony export */   isStretchInCrossAxis: () => (/* binding */ isStretchInCrossAxis)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");



function calHeight(itemSetting, bbox) {
    var _a, _b;
    if (((_a = itemSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) === _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto || itemSetting.heightMode === 'ratio') {
        if (itemSetting.heightMode === 'ratio') {
            return { height: 'auto', flex: '0 0 auto' };
        }
        return { height: 'auto' };
    }
    if (((_b = itemSetting.autoProps) === null || _b === void 0 ? void 0 : _b.height) === _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Stretch || itemSetting.heightMode === 'fit') {
        return { flex: '1 1 auto' };
    }
    return { height: bbox.height, flexShrink: 0 };
}
function isStretchInCrossAxis(layoutItem) {
    var _a, _b;
    return ((_b = (_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.autoProps) === null || _b === void 0 ? void 0 : _b.width) !== _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom;
}
function getItemStyle(style, layoutSetting, isStretch) {
    var _a, _b, _c;
    const isAutoHeight = ((_a = layoutSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) === _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    align-self: ${isStretch ? 'stretch' : (_c = (_b = layoutSetting.style) === null || _b === void 0 ? void 0 : _b.alignSelf) !== null && _c !== void 0 ? _c : 'auto'};
    width: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style, 'width')};
    height: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style, 'height')};
    flex: ${style.flex};
    flex-shrink: ${style.flexShrink};
    min-height: ${isAutoHeight ? 'unset' : null};
  `;
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/default-setting.ts":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/default-setting.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_COLUMN_LAYOUT_SETTING: () => (/* binding */ DEFAULT_COLUMN_LAYOUT_SETTING)
/* harmony export */ });
const DEFAULT_COLUMN_LAYOUT_SETTING = {
    min: 16,
    space: 10
};


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/runtime/layout-item.tsx":
/*!****************************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/runtime/layout-item.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColumnItem: () => (/* binding */ ColumnItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _runtime_layout_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../runtime/layout-item */ "./jimu-layouts/lib/runtime/layout-item.tsx");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/column-layout/common/util.ts");
/** @jsx jsx */





class ColumnItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    isStretchInCrossAxis() {
        const { layoutItem } = this.props;
        return _common_util__WEBPACK_IMPORTED_MODULE_4__.isStretchInCrossAxis(layoutItem);
    }
    calHeight(itemSetting, bbox) {
        return _common_util__WEBPACK_IMPORTED_MODULE_4__.calHeight(itemSetting, bbox);
    }
    getStyle(layoutSetting, isStretch) {
        const { layoutItem } = this.props;
        const bbox = layoutItem.bbox || {};
        const style = this.calHeight(layoutSetting, bbox);
        if (isStretch) {
            style.width = 'auto';
        }
        else {
            style.width = bbox.width;
        }
        this.autoHeight = style.height === 'auto';
        return _common_util__WEBPACK_IMPORTED_MODULE_4__.getItemStyle(style, layoutSetting, isStretch);
    }
    render() {
        var _a, _b;
        const { layoutId, layoutItem, onClick } = this.props;
        if (!layoutItem || layoutItem.isPending) {
            return null;
        }
        const layoutSetting = layoutItem.setting || {};
        const heightMode = (_b = (_a = layoutSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Custom;
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('flexbox-layout-item', { 'd-flex': heightMode !== _types__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto });
        const isStretch = this.isStretchInCrossAxis();
        const keepAspectRatio = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.shouldUseAspectRatio)(layoutSetting);
        const ratio = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.parseAspectRatio)(layoutSetting.aspectRatio);
        const oneByOneAnimationProps = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.handleOnebyOneAnimation)(this.props);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_runtime_layout_item__WEBPACK_IMPORTED_MODULE_3__["default"], Object.assign({ css: this.getStyle(layoutSetting, isStretch), layoutId: layoutId, layoutItemId: layoutItem.id, onClick: onClick, className: mergedClass, forceAspectRatio: keepAspectRatio, aspectRatio: ratio, autoHeight: this.autoHeight }, oneByOneAnimationProps)));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/column-layout/runtime/layout.tsx":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/column-layout/runtime/layout.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/column-layout/runtime/layout-item.tsx");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/column-layout/default-setting.ts");
/* harmony import */ var _common_style__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/style */ "./jimu-layouts/lib/column-layout/common/style.ts");
/** @jsx jsx */






class Layout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    createItem(itemId, index, layoutSetting) {
        const { layout } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_3__.ColumnItem, { key: itemId, index: index, space: layoutSetting.space, layoutId: layout.id, layoutItemId: itemId, layoutItem: layout.content[itemId] }));
    }
    render() {
        const { layout, className } = this.props;
        const content = layout.order || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]);
        const layoutSetting = Object.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_COLUMN_LAYOUT_SETTING, layout.setting);
        const mergedStyle = {
            position: 'relative',
            overflow: 'hidden',
            padding: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(layoutSetting.padding)
        };
        const outClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout column-layout d-flex w-100', className);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: outClass, style: mergedStyle, "data-layoutid": layout.id },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: true, layoutId: layout.id } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: layout.id, className: 'trail-container d-flex flex-column w-100', css: (0,_common_style__WEBPACK_IMPORTED_MODULE_5__.getLayoutStyle)(layoutSetting) }, (content.asMutable()).map((layoutItem, index) => this.createItem(layoutItem, index, layoutSetting))))));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_utils__WEBPACK_IMPORTED_MODULE_2__.mapStateToLayoutProps)(Layout));


/***/ }),

/***/ "./jimu-layouts/lib/common/page-util.ts":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/common/page-util.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_FOOTER_HEIGHT: () => (/* binding */ DEFAULT_FOOTER_HEIGHT),
/* harmony export */   DEFAULT_HEADER_HEIGHT: () => (/* binding */ DEFAULT_HEADER_HEIGHT),
/* harmony export */   computePageHeight: () => (/* binding */ computePageHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const DEFAULT_HEADER_HEIGHT = 75;
const DEFAULT_FOOTER_HEIGHT = 75;
function computePageHeight(pageJson, headerFooterHeight) {
    if (pageJson) {
        const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
        const pageLayoutId = pageJson.layout[appConfig.mainSizeMode];
        const layout = appConfig.layouts[pageLayoutId];
        // only grid page need specific height
        if ((layout === null || layout === void 0 ? void 0 : layout.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout) {
            if (headerFooterHeight > 0) {
                return `calc(100% - ${headerFooterHeight}px)`;
            }
            return '100%';
        }
    }
    return 'auto';
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/runtime/group.tsx":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/runtime/group.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ControllerPanelGroup: () => (/* binding */ ControllerPanelGroup)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ "./jimu-layouts/lib/controller-panel/util.ts");
/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./jimu-layouts/lib/controller-panel/runtime/layout.tsx");
/** @jsx jsx */



function ControllerPanelGroup(props) {
    const { pageId } = props;
    const controllerInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return (0,_util__WEBPACK_IMPORTED_MODULE_1__.findPageRelatedControllerIds)(state.appConfig, pageId, state.browserSizeMode);
    });
    const controllerIds = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => controllerInfo.split(',').filter(id => id !== ''), [controllerInfo]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null, controllerIds.map((id) => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout__WEBPACK_IMPORTED_MODULE_2__.ControllerPanel, { key: id, controllerId: id })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/runtime/layout.tsx":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/runtime/layout.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ControllerPanel: () => (/* binding */ ControllerPanel)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./panel */ "./jimu-layouts/lib/controller-panel/runtime/panel.tsx");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util */ "./jimu-layouts/lib/controller-panel/util.ts");
/** @jsx jsx */



function ControllerPanel(props) {
    const { controllerId } = props;
    const [minimized, setMinimized] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const innerLayoutId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        // find the layoutInfo of the opened widget
        const controllerJson = state.appConfig.widgets[controllerId];
        const layoutName = controllerJson.manifest.layouts[0].name;
        const sizeModeLayouts = controllerJson.layouts[layoutName];
        return sizeModeLayouts[state.browserSizeMode] || sizeModeLayouts[state.appConfig.mainSizeMode];
    });
    const items = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        // find the items of the opened widget
        const layout = state.appConfig.layouts[innerLayoutId];
        const itemIds = Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {})
            .filter(itemId => {
            const layoutItem = layout.content[itemId];
            return (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.widgetId) != null && !layoutItem.isPending;
        });
        itemIds.sort();
        return itemIds.join(',');
    });
    const hasItemOpened = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const openedWidgets = Object.keys((_a = state.widgetsRuntimeInfo) !== null && _a !== void 0 ? _a : {}).filter(widgetId => {
            const info = state.widgetsRuntimeInfo[widgetId];
            return info.state === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetState.Opened;
        });
        // find the items of the opened widget
        const layout = state.appConfig.layouts[innerLayoutId];
        return Object.keys((_b = layout.content) !== null && _b !== void 0 ? _b : {})
            .some(itemId => {
            const layoutItem = layout.content[itemId];
            return (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.widgetId) != null && !layoutItem.isPending && openedWidgets.includes(layoutItem.widgetId);
        });
    });
    const itemIdList = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => items.split(',').filter(id => id !== ''), [items]);
    const panelJson = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.controllerPanels[controllerId];
    });
    const handleClose = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e, widgetId) => {
        e.stopPropagation();
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.closeWidget(widgetId));
    }, []);
    const toggleMinimized = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setMinimized(!minimized);
    }, [minimized]);
    const style = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    ${(0,_util__WEBPACK_IMPORTED_MODULE_2__.convertToStyle)(panelJson)}
    height: ${minimized ? '36px' : panelJson === null || panelJson === void 0 ? void 0 : panelJson.height};
    transition: height 0.3s ease-in-out;
    transform: ${(0,_util__WEBPACK_IMPORTED_MODULE_2__.panelTransformStyle)(panelJson)}
  `, [panelJson, minimized]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('panel-container', { 'd-none': !hasItemOpened }), css: style },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null, itemIdList.map(itemId => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_panel__WEBPACK_IMPORTED_MODULE_1__.Panel, { key: itemId, controllerId: controllerId, layoutId: innerLayoutId, layoutItemId: itemId, minimized: minimized, onToggle: toggleMinimized, onClose: handleClose }))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/runtime/panel.tsx":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/runtime/panel.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Panel: () => (/* binding */ Panel)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var jimu_icons_outlined_directional_up_double__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/directional/up-double */ "./jimu-icons/outlined/directional/up-double.tsx");
/** @jsx jsx */




const { animated, useSpring } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.spring;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: relative;
  display: flex;
  background-color: var(--white);
  box-shadow: 0px 0px 10px 1px rgba(0, 0, 0, 0.2);
  .panel-header {
    background-color: var(--primary-600);
    color: var(--white);
    font-weight: 500;
    font-size: 0.875rem;
    height: 36px;
    .actions .jimu-btn {
      color: var(--primary-200);
      &:hover {
        color: var(--white);
      }
    }
  }
  .panel-content {
    position: relative;
    overflow: hidden;

    .widget-content {
      z-index: 0;
    }

    .widget-mask {
      position: absolute;
      background: transparent;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      z-index: 1;
    }
  }
`;
function Panel(props) {
    const { layoutId, layoutItemId, controllerId, minimized, onClose, onToggle } = props;
    const [mounted, setMounted] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const ref = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
        return layoutItem.widgetId;
    });
    const isOpen = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const info = (_a = state.widgetsRuntimeInfo) === null || _a === void 0 ? void 0 : _a[widgetId];
        return (info === null || info === void 0 ? void 0 : info.state) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetState.Opened;
    });
    const label = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.label;
    }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.shallowEqual);
    const widgetClassLoaded = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetRuntimeInfo = state.widgetsRuntimeInfo[widgetId];
        return (_a = widgetRuntimeInfo === null || widgetRuntimeInfo === void 0 ? void 0 : widgetRuntimeInfo.isClassLoaded) !== null && _a !== void 0 ? _a : false;
    });
    const effect = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const panelJson = state.appConfig.controllerPanels[controllerId];
        return panelJson.effect;
    });
    const animationObj = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a, _b;
        if ((effect === null || effect === void 0 ? void 0 : effect.type) && effect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAnimationEffect)(effect.type, {
                configType: (_a = effect.option) === null || _a === void 0 ? void 0 : _a.configType,
                direction: (_b = effect.option) === null || _b === void 0 ? void 0 : _b.direction
            });
        }
        return null;
    }, [effect]);
    const [effectProps, api] = useSpring(() => {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_ANIMATION_PROPS;
    }, [animationObj]);
    const handleClose = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        onClose(e, widgetId);
        // after panel closed, focus back to button
        const button = document.querySelector(`.widget-controller .avatar-card[data-widgetid='${widgetId}']`).querySelector('button');
        button === null || button === void 0 ? void 0 : button.focus();
    }, [widgetId, onClose]);
    (0,jimu_ui__WEBPACK_IMPORTED_MODULE_1__.useTrapFocusLoop)(ref, true, true, false, mounted && isOpen);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (isOpen && !mounted) { // load the class when this widget is opened the first time
            setMounted(true);
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetManager.getInstance()
                .loadWidgetClass(widgetId)
                .catch((err) => {
                console.log(err);
            });
        }
    }, [isOpen, widgetId, mounted]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (isOpen && animationObj != null) {
            api.start(Object.assign(Object.assign({}, animationObj.animateProps()), { onRest: () => {
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.defer(() => {
                        ref.current.style.clipPath = null; // eliminate clipPath to show box-shadow
                    });
                } }));
        }
    }, [api, isOpen, animationObj]);
    let WidgetClass;
    if (mounted && widgetClassLoaded) {
        WidgetClass = jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetManager.getInstance().getWidgetClass(widgetId);
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(animated.div, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('controller-panel flex-column w-100 h-100', { 'd-none': !mounted || !isOpen }), css: style, ref: ref, style: animationObj != null ? effectProps : null },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-header d-flex align-items-center flex-shrink-0 px-4' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'label d-flex align-items-center h-100' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate' }, label)),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'actions ml-auto d-flex align-items-center' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { className: 'p-0', icon: true, type: 'tertiary', size: 'sm', onClick: onToggle },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_up_double__WEBPACK_IMPORTED_MODULE_3__.UpDoubleOutlined, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              transform: rotate(${minimized ? 180 : 0}deg);
              transition: transform 0.3s ease-in-out;
            ` })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { className: 'p-0 ml-2', icon: true, type: 'tertiary', size: 'sm', onClick: handleClose },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__.CloseOutlined, null)))),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-content d-flex flex-grow-1' },
            !widgetClassLoaded && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.LoadingType.Donut }),
            WidgetClass && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 widget-content p-1' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(WidgetClass, { widgetId: widgetId, layoutId: layoutId, layoutItemId: layoutItemId })))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/controller-panel/util.ts":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/controller-panel/util.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertToStyle: () => (/* binding */ convertToStyle),
/* harmony export */   findPageRelatedControllerIds: () => (/* binding */ findPageRelatedControllerIds),
/* harmony export */   panelTransformStyle: () => (/* binding */ panelTransformStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _search_contents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search/contents */ "./jimu-layouts/lib/search/contents.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");



function findPageRelatedControllerIds(appConfig, pageId, browserSizeMode) {
    var _a;
    const result = Object.keys((_a = appConfig.controllerPanels) !== null && _a !== void 0 ? _a : {}).filter(controllerId => {
        const rootInfo = (0,_search_contents__WEBPACK_IMPORTED_MODULE_1__.getContentRootContainerInfo)(appConfig, controllerId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, browserSizeMode);
        if (rootInfo == null) {
            return false;
        }
        if (rootInfo.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page) {
            return true;
        }
        return rootInfo.id === pageId;
    });
    result.sort();
    return result.join(',');
}
function panelTransformStyle(panelJson) {
    if (panelJson == null) {
        return null;
    }
    const { position, offsetX = 0, offsetY = 0 } = panelJson;
    let translate;
    if (panelJson.widthMode !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (offsetX !== 0) {
            translate = `translateX(${offsetX}px)`;
        }
        if (position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopCenter || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleCenter || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomCenter) {
            translate = translate != null ? `${translate} translateX(-50%)` : 'translateX(-50%)';
        }
    }
    if (panelJson.heightMode !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (offsetY !== 0) {
            translate = translate != null ? `${translate} translateY(${offsetY}px)` : `translateY(${offsetY}px)`;
        }
        if (position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleLeft || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleCenter || position === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleRight) {
            translate = translate != null ? `${translate} translateY(-50%)` : 'translateY(-50%)';
        }
    }
    return translate;
}
function convertToStyle(panelJson) {
    let posStyle;
    switch (panelJson === null || panelJson === void 0 ? void 0 : panelJson.position) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopLeft:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: 0; bottom: auto; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopRight:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: auto; bottom: auto; right: 0;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomLeft:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: auto; left: 0; bottom: 0; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomRight:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: auto; left: auto; bottom: 0; right: 0;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.TopCenter:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: 50%; bottom: auto; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.BottomCenter:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: auto; left: 50%; bottom: 0; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleLeft:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 50%; left: 0; bottom: auto; right: auto;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleRight:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 50%; left: auto; bottom: auto; right: 0;`;
            break;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ControllerPosition.MiddleCenter:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 50%; left: 50%; bottom: auto; right: auto;`;
            break;
        default:
            posStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `top: 0; left: 0; bottom: auto; right: auto;`;
            break;
    }
    let widthModeStyle;
    let heightModeStyle;
    if (panelJson.widthMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        widthModeStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `width:auto;left:${panelJson.left};right:${panelJson.right};`;
    }
    if (panelJson.heightMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        heightModeStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `height:auto;top:${panelJson.top};bottom:${panelJson.bottom};`;
    }
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    position: fixed;
    ${posStyle}
    width: ${panelJson === null || panelJson === void 0 ? void 0 : panelJson.width};
    height: ${panelJson === null || panelJson === void 0 ? void 0 : panelJson.height};
    ${widthModeStyle};
    ${heightModeStyle}
    overflow: visible;
    z-index: 2;
  `;
}


/***/ }),

/***/ "./jimu-layouts/lib/default-common-setting.ts":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/default-common-setting.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_LAYOUT_ITEM_SETTING: () => (/* binding */ DEFAULT_LAYOUT_ITEM_SETTING)
/* harmony export */ });
const DEFAULT_LAYOUT_ITEM_SETTING = {
    order: 0
};


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/common/util.ts":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/common/util.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPositionStyle: () => (/* binding */ getPositionStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");


function getPositionStyle(mergedStyle) {
    return [
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      left: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'left')};
      right: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'right')};
      top: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'top')};
      bottom: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'bottom')};
      width: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'width')};
      height: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle, 'height')};
    `,
        mergedStyle.transform
    ];
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/default-setting.ts":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/default-setting.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_FIX_LAYOUT_ITEM_SETTING: () => (/* binding */ DEFAULT_FIX_LAYOUT_ITEM_SETTING),
/* harmony export */   DEFAULT_FIX_LAYOUT_SETTING: () => (/* binding */ DEFAULT_FIX_LAYOUT_SETTING)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _default_common_setting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../default-common-setting */ "./jimu-layouts/lib/default-common-setting.ts");


const DEFAULT_FIX_LAYOUT_SETTING = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, {
    gridSize: 1
});
const DEFAULT_FIX_LAYOUT_ITEM_SETTING = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_common_setting__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_LAYOUT_ITEM_SETTING, {
    lockParent: false,
    lockLayout: false,
    autoProps: {}
});


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts":
/*!************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   applyPositionSetting: () => (/* binding */ applyPositionSetting),
/* harmony export */   applySnapResult: () => (/* binding */ applySnapResult),
/* harmony export */   autoResponseToDevice: () => (/* binding */ autoResponseToDevice),
/* harmony export */   contains: () => (/* binding */ contains),
/* harmony export */   fixedLayoutTransform: () => (/* binding */ fixedLayoutTransform),
/* harmony export */   flipAutoProps: () => (/* binding */ flipAutoProps),
/* harmony export */   flipBBox: () => (/* binding */ flipBBox),
/* harmony export */   generateBBoxStyle: () => (/* binding */ generateBBoxStyle),
/* harmony export */   generateResizingBBoxStyle: () => (/* binding */ generateResizingBBoxStyle),
/* harmony export */   getAbsolutePos: () => (/* binding */ getAbsolutePos),
/* harmony export */   intersects: () => (/* binding */ intersects),
/* harmony export */   mergePos: () => (/* binding */ mergePos),
/* harmony export */   sortLayoutItems: () => (/* binding */ sortLayoutItems)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");
/* eslint-disable prefer-const */



function sortLayoutItems(layout) {
    if (layout.content == null || Object.keys(layout.content).length === 0) {
        return [];
    }
    const defaultSize = 1280;
    const parseValue = (value) => {
        return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(value) ? (parseFloat(value) * defaultSize) / 100 : +value;
    };
    const sortFunc = (item1, item2) => {
        // compare top
        const top1 = parseValue(item1.bbox.top);
        const top2 = parseValue(item2.bbox.top);
        if (top1 > top2) {
            return 1;
        }
        if (top1 < top2) {
            return -1;
        }
        // compare left
        const left1 = parseValue(item1.bbox.left);
        const left2 = parseValue(item2.bbox.left);
        if (left1 > left2) {
            return 1;
        }
        if (left1 < left2) {
            return -1;
        }
        return 0;
    };
    return Object.keys(layout.content)
        .map(key => layout.content[key])
        .sort(sortFunc)
        .map(layoutItem => layoutItem.id);
}
function fixedLayoutTransform(layout, fromSizeMode, toSizeMode) {
    const fromSizeModeWidth = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getSizeModeWidth(fromSizeMode);
    const toSizeModeWidth = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getSizeModeWidth(toSizeMode);
    if (fromSizeModeWidth < toSizeModeWidth) {
        return layout;
    }
    return autoResponseToDevice(layout, toSizeModeWidth);
}
/**
 * Convert a layout to a small size(width) layout.
 *
 * Return the new layout.
 *
 *
 * @param layout
 * @param convertToColumn
 * @param appConfig
 */
function autoResponseToDevice(layout, deviceWidth) {
    const defaultWidth = deviceWidth;
    const defaultHeight = 800;
    const content = layout.order;
    if (content == null || content.length === 0) {
        return layout;
    }
    let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(layout);
    const bboxes = [];
    content.forEach(itemId => {
        bboxes.push(Object.assign({ id: itemId }, getAbsolutePos(layout.content[itemId].bbox, defaultWidth, defaultHeight)));
    });
    bboxes.sort(sortPos);
    // merge the items that are contained by another
    const groupedBBoxes = [bboxes[0]];
    for (let i = 1; i < bboxes.length; i++) {
        const item = bboxes[i];
        // eslint-disable-next-line
        const grouped = groupedBBoxes.some(b => {
            if (contains(b, item)) {
                // b is always at the top left of the item after sorting
                if (b.content == null) {
                    b.content = [];
                }
                b.content.push(Object.assign({}, item));
                return true;
            }
        });
        if (!grouped) {
            groupedBBoxes.push(item);
        }
    }
    // restrict the bbox of each item into the container
    let lastTop = 0;
    let updatedContent = [];
    groupedBBoxes.forEach(b => {
        let deltaY = 0;
        restrictPos(b, defaultWidth);
        if (b.y < lastTop) {
            deltaY = lastTop - b.y;
            b.y = lastTop;
        }
        lastTop = b.y + b.h;
        updatedLayout = updatedLayout
            .setIn(['content', b.id, 'bbox'], {
            left: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.x, defaultWidth),
            top: `${b.y}px`,
            width: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.w, defaultWidth),
            height: `${b.h}px`
        })
            .setIn(['content', b.id, 'setting', 'autoProps', 'width'], _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom);
        updatedContent.push(b.id);
        if (b.content != null) {
            b.content.forEach(subItem => {
                restrictPos(subItem, defaultWidth);
                if (deltaY > 0) {
                    subItem.y += deltaY;
                }
                updatedLayout = updatedLayout
                    .setIn(['content', b.id, 'bbox'], {
                    left: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.x, defaultWidth),
                    top: `${b.y}px`,
                    width: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(b.w, defaultWidth),
                    height: `${b.h}px`
                })
                    .setIn(['content', b.id, 'setting', 'autoProps', 'width'], _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom);
                updatedContent.push(subItem.id);
            });
        }
    });
    updatedLayout = updatedLayout.set('order', updatedContent);
    return updatedLayout;
}
function restrictPos(b, maxWidth, isInGroup) {
    // restrict the bbox of each item into the container
    if (b.x > maxWidth) {
        if (!isInGroup) {
            // wrap the item
            b.x = 0;
            b.y += b.h;
        }
        else {
            // move left
            b.x = maxWidth - b.w;
        }
    }
    if (b.x < 0) {
        b.x = 0;
    }
    if (b.x + b.w > maxWidth) {
        if (b.w < maxWidth) {
            b.x = maxWidth - b.w;
        }
        else {
            b.w = maxWidth;
            b.x = 0;
        }
    }
}
function sortPos(p1, p2) {
    // top to bottom, left to right
    if (p1.y !== p2.y) {
        return p1.y > p2.y ? 1 : -1;
    }
    else if (p1.x !== p2.x) {
        return p1.x > p2.x ? 1 : -1;
    }
    return 0;
}
function intersects(p1, p2) {
    const x1 = Math.max(p1.x, p2.x);
    const x2 = Math.min(p1.x + p1.w, p2.x + p2.w);
    const y1 = Math.max(p1.y, p2.y);
    const y2 = Math.min(p1.y + p1.h, p2.y + p2.h);
    return x1 < x2 && y1 < y2;
}
function contains(p1, p2) {
    return p1.x <= p2.x && p1.x + p1.w > p2.x + p2.w && p1.y <= p2.y && p1.y + p1.h > p2.y + p2.h;
}
function mergePos(p1, p2) {
    const left = Math.min(p1.x, p2.x);
    const top = Math.min(p1.y, p2.y);
    const right = Math.max(p1.x + p1.w, p2.x + p2.w);
    const bottom = Math.max(p1.y + p1.h, p2.y + p2.h);
    return {
        x: left,
        y: top,
        w: right - left,
        h: bottom - top
    };
}
function getAbsolutePos(b, containerWidth, containerHeight) {
    var _a, _b;
    const result = {};
    let x = 0;
    let y = 0;
    let w = containerWidth;
    let h = containerHeight * 0.2; // default is 100% width, 20% height
    if (b != null) {
        ['left', 'right', 'top', 'bottom', 'width', 'height'].forEach(prop => {
            if (b[prop] !== undefined && b[prop] !== 'auto') {
                const size = ['left', 'right', 'width'].includes(prop) ? containerWidth : containerHeight;
                result[prop] = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(b[prop]) ? (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fromRatio)(b[prop], size) : parseFloat(b[prop]);
            }
        });
        if (result.left !== undefined) {
            x = result.left;
        }
        if (result.width !== undefined) {
            w = result.width;
            if (result.left === undefined && result.right !== undefined) {
                x = containerWidth - result.right - w;
            }
        }
        else {
            w = containerWidth - ((_a = result.left) !== null && _a !== void 0 ? _a : 0) - ((_b = result.right) !== null && _b !== void 0 ? _b : 0);
        }
        if (result.top !== undefined) {
            y = result.top;
        }
        if (result.height !== undefined) {
            h = result.height;
            if (result.top === undefined && result.bottom !== undefined) {
                y = containerHeight - result.bottom - h;
            }
        }
        else if (result.top !== undefined && result.bottom !== undefined) {
            h = containerHeight - result.top - result.bottom;
        }
    }
    return { x, y, w, h };
}
function generateResizingBBoxStyle(initRect, containerRect, delta, autoFlip = false) {
    const result = {};
    result.left = initRect.left + delta.dx;
    result.width = initRect.width + delta.dw;
    const right = containerRect.right - initRect.right;
    if (delta.dw === 0) {
        // move
        result.right = right - delta.dx;
    }
    else if (delta.dx === 0) {
        // resize at right
        if (delta.dw > 0) {
            delta.dw = Math.min(right, delta.dw);
        }
        result.right = right - delta.dw;
        result.width = initRect.width + delta.dw;
    }
    else {
        result.right = right;
        if (delta.dx < 0) {
            delta.dx = Math.max(-initRect.left, delta.dx);
            delta.dw = -delta.dx;
            result.left = initRect.left + delta.dx;
            result.width = initRect.width + delta.dw;
        }
    }
    result.top = initRect.top + delta.dy;
    result.height = initRect.height + delta.dh;
    const bottom = containerRect.bottom - initRect.bottom;
    if (delta.dh === 0) {
        // move
        result.bottom = bottom - delta.dy;
    }
    else if (delta.dy === 0) {
        // resize at bottom
        if (delta.dh > 0) {
            delta.dh = Math.min(bottom, delta.dh);
        }
        result.bottom = bottom - delta.dh;
        result.height = initRect.height + delta.dh;
    }
    else {
        result.bottom = bottom;
        if (delta.dy < 0) {
            delta.dy = Math.max(-initRect.top, delta.dy);
            delta.dh = -delta.dy;
            result.top = initRect.top + delta.dy;
            result.height = initRect.height + delta.dh;
        }
    }
    if (autoFlip && (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
        return flipBBox(result);
    }
    return result;
}
function generateBBoxStyle(bbox, setting) {
    var _a, _b, _c, _d, _e;
    const result = {};
    let autoProps = (_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) !== null && _a !== void 0 ? _a : {};
    let box = bbox;
    const heightMode = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemSizeMode)('height', bbox, autoProps);
    const widthMode = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemSizeMode)('width', bbox, autoProps);
    if (heightMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        result.top = box.top;
        result.bottom = box.bottom;
    }
    else {
        const topAuto = (_b = autoProps.top) !== null && _b !== void 0 ? _b : false;
        const bottomAuto = (_c = autoProps.bottom) !== null && _c !== void 0 ? _c : false;
        if (heightMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
            result.height = box.height;
        }
        // one and only one of the top or bottom can be used
        if ((topAuto === bottomAuto || bottomAuto) && bbox.top != null) {
            result.top = box.top;
        }
        else {
            result.bottom = box.bottom;
        }
        // align center
        if (setting.vCenter && box.top === '50%') {
            result.top = '50%';
        }
    }
    if (widthMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        result.left = box.left;
        result.right = box.right;
    }
    else {
        const leftAuto = (_d = autoProps.left) !== null && _d !== void 0 ? _d : false;
        const rightAuto = (_e = autoProps.right) !== null && _e !== void 0 ? _e : false;
        if (widthMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
            result.width = box.width;
        }
        // one and only one of the left or right can be used
        if (leftAuto === rightAuto) {
            if (box.left != null) {
                result.left = box.left;
            }
            else {
                result.right = box.right;
            }
        }
        else if (leftAuto && box.right != null) {
            result.right = box.right;
        }
        else {
            result.left = box.left;
        }
        // align center
        if (setting.hCenter && box.left === '50%') {
            result.left = '50%';
        }
    }
    return result;
}
function flipAutoProps(autoProps) {
    const result = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(autoProps);
    const temp = autoProps.left;
    return result.set('left', autoProps.right).set('right', temp);
}
function flipBBox(bbox) {
    const result = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(bbox);
    const temp = bbox.left;
    return result.set('left', bbox.right).set('right', temp);
}
function applyPositionSetting(bbox, itemSetting, isResizing = false) {
    const extraStyle = {};
    const hCenter = itemSetting.hCenter && bbox.left === '50%';
    const vCenter = itemSetting.vCenter && bbox.top === '50%';
    const sign = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)() ? -1 : 1;
    if (hCenter && vCenter) {
        extraStyle.right = 'auto';
        extraStyle.bottom = 'auto';
        extraStyle.transform = `translate(${sign * -50}%, -50%)`;
    }
    else if (hCenter) {
        extraStyle.right = 'auto';
        extraStyle.transform = `translateX(${sign * -50}%)`;
    }
    else if (vCenter) {
        extraStyle.bottom = 'auto';
        extraStyle.transform = 'translateY(-50%)';
    }
    if (!isResizing && (0,_utils__WEBPACK_IMPORTED_MODULE_0__.shouldUseAspectRatio)(itemSetting)) {
        extraStyle.height = 'auto';
    }
    return extraStyle;
}
/**
 * Do not change the autoProps value except that value is empty.
 */
function applySnapResult(bbox, setting, containerRect, snapRect) {
    var _a, _b;
    let outputBox = bbox;
    let outSetting = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(setting !== null && setting !== void 0 ? setting : {});
    if (((_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _a === void 0 ? void 0 : _a.width) !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (snapRect.left < snapRect.right) {
            if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
                outSetting = outSetting.setIn(['autoProps', 'right'], false).setIn(['autoProps', 'left'], true);
            }
            else {
                outSetting = outSetting.setIn(['autoProps', 'left'], false).setIn(['autoProps', 'right'], true);
            }
        }
        else {
            if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
                outSetting = outSetting.setIn(['autoProps', 'left'], false).setIn(['autoProps', 'right'], true);
            }
            else {
                outSetting = outSetting.setIn(['autoProps', 'right'], false).setIn(['autoProps', 'left'], true);
            }
        }
    }
    if (((_b = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _b === void 0 ? void 0 : _b.height) !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        if (snapRect.top < snapRect.bottom) {
            outSetting = outSetting.setIn(['autoProps', 'top'], false).setIn(['autoProps', 'bottom'], true);
        }
        else {
            outSetting = outSetting.setIn(['autoProps', 'top'], true).setIn(['autoProps', 'bottom'], false);
        }
    }
    ['left', 'right', 'top', 'bottom', 'width', 'height'].forEach(prop => {
        const size = prop === 'left' || prop === 'right' || prop === 'width' ? containerRect.width : containerRect.height;
        let usePercentage = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox[prop]);
        if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()) {
            if (prop === 'left') {
                usePercentage = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox.right);
            }
            else if (prop === 'right') {
                usePercentage = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox.left);
            }
        }
        if (bbox[prop] == null || usePercentage) {
            outputBox = outputBox.set(prop, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(snapRect[prop], size));
        }
        else {
            outputBox = outputBox.set(prop, `${Math.round(snapRect[prop])}px`);
        }
    });
    return { bbox: outputBox, setting: outSetting };
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/runtime/layout-item.tsx":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/runtime/layout-item.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FixedLayoutItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/fixed-layout/default-setting.ts");
/* harmony import */ var _runtime_layout_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../runtime/layout-item */ "./jimu-layouts/lib/runtime/layout-item.tsx");
/* harmony import */ var _fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../fixed-layout-util */ "./jimu-layouts/lib/fixed-layout/fixed-layout-util.ts");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/fixed-layout/common/util.ts");
/** @jsx jsx */







class FixedLayoutItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    getPositionStyle(itemSetting) {
        const { layoutItem, transformedBBox } = this.props;
        const bbox = transformedBBox !== null && transformedBBox !== void 0 ? transformedBBox : layoutItem.bbox;
        const pos = (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__.generateBBoxStyle)(bbox, itemSetting);
        const mergedStyle = Object.assign(Object.assign({}, pos), (0,_fixed_layout_util__WEBPACK_IMPORTED_MODULE_5__.applyPositionSetting)(layoutItem.bbox, itemSetting));
        return _common_util__WEBPACK_IMPORTED_MODULE_6__.getPositionStyle(mergedStyle);
    }
    render() {
        const { layoutItem, layoutId } = this.props;
        if (layoutItem == null || layoutItem.isPending) {
            return null;
        }
        const itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_FIX_LAYOUT_ITEM_SETTING, layoutItem.setting);
        const ratio = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.parseAspectRatio)(itemSetting.aspectRatio);
        const useAspectRatio = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.shouldUseAspectRatio)(itemSetting);
        const oneByOneAnimationProps = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.handleOnebyOneAnimation)(this.props);
        const [cssStyle, transform] = this.getPositionStyle(itemSetting);
        const widthMode = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getLayoutItemSizeMode)('width', layoutItem.bbox, itemSetting.autoProps);
        const heightMode = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getLayoutItemSizeMode)('height', layoutItem.bbox, itemSetting.autoProps);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_runtime_layout_item__WEBPACK_IMPORTED_MODULE_4__["default"], Object.assign({ css: cssStyle, style: { transform }, layoutId: layoutId, layoutItemId: layoutItem.id, forceAspectRatio: useAspectRatio, aspectRatio: ratio, isInSection: this.props.isInSection, autoWidth: widthMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto, autoHeight: heightMode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto }, oneByOneAnimationProps)));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/fixed-layout/runtime/layout.tsx":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/fixed-layout/runtime/layout.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/fixed-layout/runtime/layout-item.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/fixed-layout/default-setting.ts");
/** @jsx jsx */





class FixedLayoutViewer extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    createItem(layout, itemId, index, transformed) {
        const layoutItem = layout.content[itemId];
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_2__["default"], { key: `${layout.id}_${itemId}`, index: index, layoutId: layout.id, layoutItemId: itemId, layoutItem: layoutItem, transformedBBox: transformed
                ? (layout.content[itemId].bbox)
                : null, isInSection: this.props.isInSection }));
    }
    render() {
        const { layout, layouts, className, style, browserSizeMode } = this.props;
        if (!layout) {
            return null;
        }
        let targetLayout = layout;
        let transformed = false;
        if (layouts[browserSizeMode] !== layout.id && this.layoutTransform) {
            let fromSizeMode;
            // eslint-disable-next-line
            Object.keys(layouts).some(mode => {
                if (layouts[mode] === layout.id) {
                    fromSizeMode = mode;
                    return true;
                }
            });
            targetLayout = this.layoutTransform(layout, fromSizeMode, browserSizeMode);
            transformed = true;
        }
        const layoutSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_FIX_LAYOUT_SETTING, targetLayout.setting);
        const layoutIds = (targetLayout.order || []);
        const mergedClasses = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout fixed-layout d-flex', className);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: mergedClasses, style: Object.assign(Object.assign(Object.assign({ position: 'relative', height: 'auto' }, style), jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle(layoutSetting.style)), { width: '100%', overflow: 'hidden' }), "data-layoutid": targetLayout.id }, layoutIds.length > 0 && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: false } },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                bottom: 0;
              `, oid: layout.id, "data-layoutid": layout.id }, layoutIds.map((itemId, index) => this.createItem(targetLayout, itemId, index, transformed)))))));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_utils__WEBPACK_IMPORTED_MODULE_3__.mapStateToLayoutProps)(FixedLayoutViewer));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/index.tsx":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/index.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenMainPanel: () => (/* reexport safe */ _screen_main_panel__WEBPACK_IMPORTED_MODULE_1__.ScreenMainPanel),
/* harmony export */   ScreenMainPanelList: () => (/* reexport safe */ _screen_main_panel_list__WEBPACK_IMPORTED_MODULE_2__.ScreenMainPanelList),
/* harmony export */   ScreenSidePanel: () => (/* reexport safe */ _screen_side_panel__WEBPACK_IMPORTED_MODULE_0__.ScreenSidePanel)
/* harmony export */ });
/* harmony import */ var _screen_side_panel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./screen-side-panel */ "./jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx");
/* harmony import */ var _screen_main_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./screen-main-panel */ "./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx");
/* harmony import */ var _screen_main_panel_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./screen-main-panel-list */ "./jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx");





/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx":
/*!************************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenMainPanelList: () => (/* binding */ ScreenMainPanelList)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _screen_main_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./screen-main-panel */ "./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx");
/** @jsx jsx */


function getContainerStyle(transitionType, viewHeight, headerHeight, isSmallSize, numOfScreens) {
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: sticky;
      height: ${viewHeight}px;
      top: 0;

      body:not(.design-mode) & {
        height: ${headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh'};
        height: ${headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)'};
        top: ${headerHeight > 0 ? `${headerHeight}px` : 0};
        .layout .exb-drop-area {
          pointer-events: none !important;
        }
      }

      .screen-main-panel {
        position: absolute;
        opacity: 0;
        visibility: hidden;
        z-index: 0;
        transition: ${isSmallSize ? null : 'opacity 400ms'};
        top: 0;
        /* height: ${isSmallSize ? 'unset' : '100% !important'}; */

        .layout .exb-drop-area {
          pointer-events: none;
        }

        &.is-active {
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
          z-index: 1;

          .layout .exb-drop-area {
            pointer-events: auto;
          }
        }
      }
    `;
    }
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: sticky;
      height: ${viewHeight}px;
      overflow: hidden;
      top: 0;

      body:not(.design-mode) & {
        height: 100%;
        overflow: unset;
        position: relative;

        .screen-main-panel {
          top: ${headerHeight > 0 ? `${headerHeight}px` : 0};
        }
      }

      & > div:first-of-type {
        margin-top: 0 !important;
      }

      .screen-main-panel {
        position: sticky;
        top: 0;
        margin-top: ${numOfScreens === 1 ? '0 !important' : null};

        .spacing-area {
          display: none;
        }
      }
    `;
    }
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: sticky;
      height: ${viewHeight}px;
      overflow: hidden;
      top: 0;

      body:not(.design-mode) & {
        height: auto;
        overflow: unset;

        .screen-main-panel > .layout {
          top: ${headerHeight > 0 ? `${headerHeight}px` : 0};
        }
      }

      .screen-main-panel > .layout {
        position: sticky !important;
        top: 0;
      }
    `;
    }
}
function getPlaceholderStyle(transitionType, viewHeight, isSmallSize) {
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      height: calc(100% - ${viewHeight}px);
      background: transparent;
      pointer-events: none;

      body:not(.design-mode) & {
        height: calc(100% - 100vh);
        height: calc(100% - var(--vh) * 100);
      }
    `;
    }
    if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover || transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      height: calc(100% - ${viewHeight}px);
      background: transparent;
      pointer-events: none;
      display: block;

      body:not(.design-mode) & {
        height: calc(100% - 100vh);
        height: calc(100% - var(--vh) * 100);
        display: none;
      }
    `;
    }
}
function ScreenMainPanelList(props) {
    const { rootLayoutId, activeIndex, viewHeight, headerHeight, screens, transitionType, isSmallSize, layoutEntry, isDesignMode, formatMessage, builderTheme } = props;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'screen-container', css: getContainerStyle(transitionType, viewHeight, headerHeight, isSmallSize, screens.length) }, screens.map((screenId, idx) => {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_main_panel__WEBPACK_IMPORTED_MODULE_1__.ScreenMainPanel, { key: screenId, rootLayoutId: rootLayoutId, index: idx, isActive: activeIndex === idx, screenId: screenId, viewHeight: viewHeight, headerHeight: headerHeight, isAbsolute: transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade, isLast: idx === screens.length - 1, isSmallSize: isSmallSize, layoutEntry: layoutEntry, isDesignMode: isDesignMode, formatMessage: formatMessage, builderTheme: builderTheme }));
        })),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'screen-placeholder', css: getPlaceholderStyle(transitionType, viewHeight, isSmallSize) })));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx":
/*!*******************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenMainPanel: () => (/* binding */ ScreenMainPanel)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type */ "./jimu-layouts/lib/flow-layout/common/type.ts");
/* harmony import */ var jimu_icons_outlined_application_visible__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/application/visible */ "./jimu-icons/outlined/application/visible.tsx");
/* harmony import */ var _builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/theme-tooltip */ "./jimu-layouts/lib/builder/theme-tooltip.tsx");
/** @jsx jsx */






function ScreenMainPanel(props) {
    const { rootLayoutId, viewHeight, headerHeight, screenId, isActive, isAbsolute, isLast, isSmallSize, layoutEntry: LayoutEntry, isDesignMode, formatMessage, builderTheme } = props;
    const screenJson = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.screens[screenId];
    });
    const panelVisible = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c;
        return (_c = (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.screenPanelStates) === null || _b === void 0 ? void 0 : _b[screenId]) !== null && _c !== void 0 ? _c : true;
    });
    const { main } = screenJson;
    const { side, size, overlay = true } = screenJson.panel || {};
    const elementRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const showPanel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenPanelVisibleChanged(screenId, true));
    }, [screenId]);
    function getStyle() {
        var _a, _b, _c, _d;
        if (isSmallSize) {
            const isDocked = !overlay && screenJson.panel != null; // overlay === false
            const heightInDesignMode = isDocked
                ? `${Math.round(viewHeight * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}px`
                : `${viewHeight}px`;
            const heightInRuntime = isDocked
                ? `${Math.round(100 * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}`
                : '100';
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        pointer-events: none !important;
        display: flex;
        flex-direction: column;
        width: 100%;
        height: ${viewHeight}px;

        > .layout {
          ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundEmotionStyle((_b = (_a = screenJson.main) === null || _a === void 0 ? void 0 : _a.background) !== null && _b !== void 0 ? _b : {})};
          height: ${heightInDesignMode} !important;
          border: none !important;
          pointer-events: auto;
        }

        body:not(.design-mode) & {
          height: ${headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh'};
          height: ${headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)'};
          > .layout {
            height: ${heightInRuntime}vh !important;
            height: calc(var(--vh) * ${heightInRuntime}) !important;
          }
        }

        .spacing-area {
          flex: 1;
          background: transparent;
          pointer-events: none;
        }

        .toggle-visible-btn {
          position: absolute;
          bottom: 0;
          right: left;
          pointer-events: auto;
        }
      `;
        }
        let left = '0px';
        let right = '0px';
        if (side !== 'none') {
            if (!overlay && side !== 'right') {
                left = size;
            }
            if (!overlay && side === 'right') {
                right = size;
            }
        }
        const btnStyle = builderTheme
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      color: ${builderTheme.colors.palette.dark[900]};
      background-color: ${builderTheme.colors.palette.light[400]};
      border-color: ${builderTheme.colors.palette.light[600]};
      &:hover {
        color: ${builderTheme.colors.black};
        background-color: ${builderTheme.colors.palette.light[600]};
      }
    `
            : null;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundEmotionStyle((_d = (_c = screenJson.main) === null || _c === void 0 ? void 0 : _c.background) !== null && _d !== void 0 ? _d : {})};
      left: ${isAbsolute ? left : null};
      right: ${isAbsolute ? right : null};
      margin-left: ${!isAbsolute ? left : null};
      margin-right: ${!isAbsolute ? right : null};
      pointer-events: auto;
      display: flex;
      flex-direction: column;
      position: relative;

      > .layout {
        height: ${viewHeight}px !important;
        background: transparent;
        border: none !important;
      }

      body:not(.design-mode) & {
        > .layout {
          height: ${headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh'} !important;
          height: ${headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)'} !important;
        }
      }

      .spacing-area {
        flex: 1;
        background: transparent;
        pointer-events: none;
      }

      .toggle-visible-btn {
        position: absolute;
        bottom: 0;
        right: 0;

        > button {
          ${btnStyle};
          svg {
            margin-right: 0;
            margin-left: 0;
          }
        }
      }
    `;
    }
    const clazzName = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('screen-main-panel', {
        'is-active': isActive,
        'last-one': isLast
    });
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_2__.PageVisibilityContext.Provider, { value: isAbsolute ? isActive : true },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `${rootLayoutId}_screen_${screenId}`, className: clazzName, css: getStyle(), ref: elementRef, "data-screenid": screenId, "data-index": props.index },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: main.layout, isInWidget: true }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'spacing-area' }),
            isDesignMode && !panelVisible && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'toggle-visible-btn', onClick: showPanel, "data-testid": 'toggleBtn' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_theme_tooltip__WEBPACK_IMPORTED_MODULE_5__.ThemedTooltip, { placement: 'auto', title: formatMessage('showInDesignView') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'default', size: 'sm', className: 'rounded' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_visible__WEBPACK_IMPORTED_MODULE_4__.VisibleOutlined, { size: 'm' }))))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx":
/*!*******************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenSidePanel: () => (/* binding */ ScreenSidePanel),
/* harmony export */   getSidePanelStyle: () => (/* binding */ getSidePanelStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _use_intersection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../use-intersection */ "./jimu-layouts/lib/flow-layout/use-intersection.tsx");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type */ "./jimu-layouts/lib/flow-layout/common/type.ts");
/** @jsx jsx */




const MIN_PANEL_RATIO = 0.25;
function getSidePanelStyle(props, viewHeight, headerHeight, isActive, verticalSpace, stretched, transitionType, screenTransitionType, isSmallSize) {
    const { side, size, offset, background, overlay = true, padding } = props.panel || {};
    const isRTL = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext.isRTL;
    const factor = isRTL ? (side === 'left' ? '-' : '') : (side === 'right' ? '-' : '');
    const backgroundStyle = jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundEmotionStyle(background !== null && background !== void 0 ? background : {});
    const spacing = parseFloat(verticalSpace);
    if (isSmallSize) {
        // overlay === false
        const docked = !overlay;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: 100%;
      background: transparent;
      pointer-events: none;
      position: relative;
      opacity: ${transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade ? (isActive ? '1' : '0.5') : null};
      min-height: ${screenTransitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover ? `${viewHeight}px` : null};
      padding-top: ${screenTransitionType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade && docked ? `${Math.round(viewHeight * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}px` : null};

      &.top-spacing > .panel-content {
        /* margin-top: ${Math.round(viewHeight * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}px; */
      }

      .panel-content {
        width: 100%;
        ${overlay ? '' : backgroundStyle};
        /* margin-top: ${transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push ? '${Math.round(viewHeight * SCREEN_RATIO_IN_SMALL_SIZE)}px' : 'unset'}; */

        > .layout, > .layout-wrapper > .layout {
          pointer-events: auto;
          ${overlay ? backgroundStyle : ''};
          min-height: ${Math.round(viewHeight * MIN_PANEL_RATIO)}px;
          padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(padding)};
        }

        > .layout-wrapper > .column-layout > .trail-container,
        > .column-layout > .trail-container {
          overflow-y: hidden;
        }

        > .layout-wrapper > .placeholder-btn {
          pointer-events: auto;
          ${overlay ? backgroundStyle : ''};
        }

        .panel-spacing {
          height: ${Math.round(viewHeight * spacing / 100)}px;
        }
      }

      .panel-content-placeholder {
        width: 1px;
        min-height: ${viewHeight}px;
      }

      body:not(.design-mode) & {
        min-height: ${screenTransitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover ? '100vh' : null};
        min-height: ${screenTransitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover ? 'calc(var(--vh) * 100)' : null};
        padding-top: ${screenTransitionType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade && docked ? `${100 * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE}vh` : null};
        padding-top: ${screenTransitionType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade && docked ? `calc(var(--vh) * ${100 * _type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE})` : null};

        > .layout, > .layout-wrapper > .layout {
          min-height: ${Math.round(100 * MIN_PANEL_RATIO)}vh;
          min-height: calc(var(--vh) * ${Math.round(100 * MIN_PANEL_RATIO)});
        }

        .panel-content-placeholder {
          min-height: 100vh;
          min-height: calc(var(--vh) * 100);
        }

        .panel-spacing {
          height: ${spacing}vh;
          height: calc(var(--vh) * ${spacing});
        }
      }
    `;
    }
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    width: 100%;
    background: transparent;
    pointer-events: none;
    display: flex;
    flex-direction: ${side === 'right' ? 'row-reverse' : 'row'};
    justify-content: ${side === 'center' && overlay ? 'center' : 'flex-start'};
    position: relative;
    opacity: ${transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade ? (isActive ? '1' : '0.5') : null};

    &.top-spacing > .panel-content {
      /* margin-top: ${Math.round(viewHeight * 2 / 3)}px; */
    }

    .panel-content {
      width: ${size};
      transform: ${overlay && Math.abs(parseFloat(offset)) > 0 ? `translateX(${factor}${offset})` : null};
      flex: 0 auto;
      min-height: ${stretched ? `${viewHeight}px` : 'unset'};
      ${overlay ? '' : backgroundStyle};

      > .layout,
      > .layout-wrapper > .layout {
        pointer-events: auto;
        ${overlay ? backgroundStyle : ''};
        min-height: ${Math.round(viewHeight * MIN_PANEL_RATIO)}px;
        padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(padding)};
      }

      > .layout-wrapper > .column-layout > .trail-container,
      > .column-layout > .trail-container {
        overflow-y: hidden;
      }

      > .layout-wrapper > .placeholder-btn {
        pointer-events: auto;
        ${overlay ? backgroundStyle : ''};
      }

      .panel-spacing {
        height: ${Math.round(viewHeight * spacing / 100)}px;

        &.last-item {
          height: ${stretched ? `${Math.round(viewHeight * spacing / 100)}` : viewHeight}px;
        }
      }
    }

    .panel-content-placeholder {
      width: 1px;
      min-height: ${stretched ? viewHeight : Math.round(viewHeight * MIN_PANEL_RATIO)}px;
    }

    body:not(.design-mode) & {
      &.top-spacing > .panel-content {
        /* margin-top: ${66.7}vh; */
      }

      .panel-content {
        min-height: ${stretched ? (headerHeight > 0 ? `calc(100vh - ${headerHeight}px)` : '100vh') : 'unset'};
        min-height: ${stretched ? (headerHeight > 0 ? `calc(var(--vh) * 100 - ${headerHeight}px)` : 'calc(var(--vh) * 100)') : 'unset'};
        > .layout, > .layout-wrapper > .layout {
          min-height: unset;
        }

        .panel-spacing {
          height: ${spacing}vh;
          height: calc(var(--vh) * ${spacing});

          &.last-item {
            height: ${stretched ? spacing : 100}vh;
            height: calc(var(--vh) * ${stretched ? spacing : 100});
          }
        }
      }
      .panel-content-placeholder {
        min-height: ${stretched ? '100' : Math.round(100 * MIN_PANEL_RATIO)}vh;
        min-height: calc(var(--vh) * ${stretched ? '100' : Math.round(100 * MIN_PANEL_RATIO)});
      }
    }
  `;
}
/* eslint-disable @typescript-eslint/no-unused-vars */
function ScreenSidePanel(props) {
    var _a;
    const { index, screenId, onInterctionChange, onHeightChange, viewHeight, headerHeight, layoutEntry: LayoutEntry, isActive, isSmallSize, transitionType, screenTransitionType, triggerType, stretched, verticalSpace = '0' } = props;
    const screenJson = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.screens[screenId];
    });
    const { panel } = screenJson;
    const elementRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [loaded, setLoaded] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const handleHeightChangeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const intersectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((isIntersecting) => {
        onInterctionChange(index, isIntersecting);
    }, [index, onInterctionChange]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        handleHeightChangeRef.current = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(onHeightChange, 200);
        return () => {
            var _a;
            (_a = handleHeightChangeRef.current) === null || _a === void 0 ? void 0 : _a.cancel();
        };
    }, [onHeightChange]);
    const onSizeChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((width, height) => {
        var _a;
        (_a = handleHeightChangeRef.current) === null || _a === void 0 ? void 0 : _a.call(handleHeightChangeRef, index, height);
    }, [index]);
    (0,_use_intersection__WEBPACK_IMPORTED_MODULE_2__.useIntersection)(elementRef.current, props.refElement, isSmallSize ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Lower : (triggerType !== null && triggerType !== void 0 ? triggerType : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Bottom), intersectionChange);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        setLoaded(true);
    }, []);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('screen-side-panel', {
            'top-spacing': index === 0 && (((_a = screenJson.panel) === null || _a === void 0 ? void 0 : _a.overlay) || isSmallSize)
        }), "data-screenid": screenId, "data-index": index, ref: elementRef, css: getSidePanelStyle(screenJson, viewHeight, headerHeight, isActive, verticalSpace, stretched || panel == null, transitionType, screenTransitionType, isSmallSize) },
        panel && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-content' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: panel.layout }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('panel-spacing', { 'last-item': props.isLast }) }))),
        !panel && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-content-placeholder' }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: onSizeChange })));
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/type.ts":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/type.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_HEADER_HEIGHT: () => (/* binding */ DEFAULT_HEADER_HEIGHT),
/* harmony export */   SCREEN_RATIO_IN_SMALL_SIZE: () => (/* binding */ SCREEN_RATIO_IN_SMALL_SIZE)
/* harmony export */ });
const SCREEN_RATIO_IN_SMALL_SIZE = 0.33;
const DEFAULT_HEADER_HEIGHT = 75;


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/common/util.ts":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/common/util.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calHeight: () => (/* binding */ calHeight),
/* harmony export */   updateScreenHeight: () => (/* binding */ updateScreenHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");


function updateScreenHeight(mainPanelContainer, sidePanelContainer, browserSizeMode) {
    const screenElements = mainPanelContainer.querySelectorAll('div.screen-main-panel');
    const panelElements = sidePanelContainer.querySelectorAll('div.screen-side-panel');
    const size = screenElements.length;
    for (let i = 1; i < size; i++) {
        const screenItem = screenElements.item(i);
        const previousItem = screenElements.item(i - 1);
        const previousPanelItem = panelElements.item(i - 1);
        screenItem.style.marginTop = `${previousPanelItem.clientHeight - previousItem.clientHeight}px`;
    }
    if (browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
        mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
    }
}
function calHeight(layoutItem, itemSetting) {
    const bbox = layoutItem.bbox || {};
    const height = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(bbox, 'height');
    if (!height || (0,_utils__WEBPACK_IMPORTED_MODULE_1__.isPercentage)(height)) {
        return 'auto';
    }
    switch (itemSetting.heightMode) {
        case 'auto':
            return 'auto';
        case 'fixed':
            return height;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/default-setting.ts":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/default-setting.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_FLOW_ITEM_SETTING: () => (/* binding */ DEFAULT_FLOW_ITEM_SETTING),
/* harmony export */   DEFAULT_FLOW_SETTING: () => (/* binding */ DEFAULT_FLOW_SETTING)
/* harmony export */ });
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

const DEFAULT_FLOW_SETTING = {
    gutter: 0,
    style: {
        padding: {
            number: [0],
            unit: 'px'
        },
        justifyContent: 'flex-start',
        alignItems: 'stretch',
        borderRadius: {
            number: [0],
            unit: jimu_ui__WEBPACK_IMPORTED_MODULE_0__.DistanceUnits.PIXEL
        }
    }
};
const DEFAULT_FLOW_ITEM_SETTING = {
    lockParent: true,
    heightMode: 'auto',
    offsetX: 0,
    offsetY: 0
};


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/layout-transform.ts":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/layout-transform.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlowLayoutTransformer: () => (/* binding */ FlowLayoutTransformer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class FlowLayoutTransformer {
    constructor() {
        this.id = 'flow-layout-transformer';
        this.layoutType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout;
    }
    transformLayout(layout, fromSizeMode, toSizeMode) {
        if (fromSizeMode !== toSizeMode && toSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layout);
            (layout.order || []).forEach((itemId) => {
                updatedLayout = updatedLayout.setIn(['content', itemId, 'setting', 'heightMode'], 'auto');
            });
            return updatedLayout;
        }
        return layout;
    }
    transformLayoutItem(item, index, fromLayoutId, toLayoutId, fromSizeMode, toSizeMode) {
        return { index, item };
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/layout-utils.ts":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/layout-utils.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateFloatingPosition: () => (/* binding */ calculateFloatingPosition),
/* harmony export */   getWidthFromSetting: () => (/* binding */ getWidthFromSetting),
/* harmony export */   mapStateToFlowItemProps: () => (/* binding */ mapStateToFlowItemProps)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _search_contents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../search/contents */ "./jimu-layouts/lib/search/contents.ts");




const mapStateToFlowItemProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a;
        const { layoutItem } = ownProps;
        const selection = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection;
        if (selection) {
            return selection.layoutId === ownProps.layoutId && selection.layoutItemId === layoutItem.id;
        }
        return false;
    },
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutItem } = ownProps;
        let padding = [0, 0, 0, 0];
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widgetId = layoutItem.widgetId;
            const widgetJson = state.appConfig.widgets[widgetId];
            if (widgetJson) {
                padding = jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.expandStyleArray((_c = (_b = (_a = widgetJson.config) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.padding) === null || _c === void 0 ? void 0 : _c.number);
            }
        }
        return padding[0] + padding[2]; // top and bottom padding of inner row widget
    },
    (state, ownProps) => {
        const { layoutItem } = ownProps;
        let isEmpty = true;
        if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
            const widgetId = layoutItem.widgetId;
            const widgetJson = state.appConfig.widgets[widgetId];
            if (widgetJson) {
                const layoutName = Object.keys(widgetJson.layouts)[0];
                const layoutId = (0,_search_contents__WEBPACK_IMPORTED_MODULE_3__.findLayoutId)(widgetJson.layouts[layoutName], state.browserSizeMode, state.appConfig.mainSizeMode);
                const layout = state.appConfig.layouts[layoutId];
                if (layout && Object.keys(layout.content || []).length > 0) {
                    // eslint-disable-next-line
                    Object.keys(layout.content || []).some((itemId) => {
                        const layoutItem = layout.content[itemId];
                        if (!layoutItem.isPending) {
                            isEmpty = false;
                            return true;
                        }
                    });
                }
            }
        }
        return isEmpty;
    }
], (selected, padding, isEmpty) => ({ selected, padding, isEmpty }));
function getWidthFromSetting(setting) {
    const value = parseFloat(setting === null || setting === void 0 ? void 0 : setting.width);
    if (value > 0) {
        if (`${setting.width}`.includes('px')) {
            return `${Math.round(value)}px`;
        }
        return `${Math.round(value)}%`;
    }
    return '100%';
}
function calculateFloatingPosition(layoutItem, resizingProps = {}) {
    var _a, _b, _c;
    const setting = layoutItem.setting;
    const floatingArea = (_a = setting === null || setting === void 0 ? void 0 : setting.floatingArea) !== null && _a !== void 0 ? _a : 1;
    const offsetX = `${(_b = setting === null || setting === void 0 ? void 0 : setting.offsetX) !== null && _b !== void 0 ? _b : 0}px`;
    const offsetY = `${(_c = setting === null || setting === void 0 ? void 0 : setting.offsetY) !== null && _c !== void 0 ? _c : 0}px`;
    const { dh, dw, initWidth, initHeight, isResizing } = resizingProps;
    // translateX will not be modified by the emotion if it uses calc()
    const translateX = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.isRTL)() ? `translateX(calc(50% + ${offsetX}))` : `translateX(calc(-50% + ${offsetX}))`;
    const pos = {};
    switch (floatingArea) {
        case 1: // top-left
            pos.left = offsetX;
            pos.top = offsetY;
            pos.transform = null;
            break;
        case 2: // top-center
            pos.left = '50%';
            pos.top = offsetY;
            pos.transform = translateX;
            break;
        case 3: // top-right
            pos.right = offsetX;
            pos.top = offsetY;
            pos.transform = null;
            break;
        case 4: // middle-left
            pos.left = offsetX;
            pos.top = '50%';
            pos.transform = `translateY(calc(-50% + ${offsetY}))`;
            break;
        case 5: // middle-center
            pos.left = '50%';
            pos.top = '50%';
            pos.transform = `${translateX} translateY(calc(-50% + ${offsetY}))`;
            break;
        case 6: // middle-right
            pos.right = offsetX;
            pos.top = '50%';
            pos.transform = `translateY(calc(-50% + ${offsetY}))`;
            break;
        case 7: // bottom-left
            pos.left = offsetX;
            pos.bottom = offsetY;
            pos.transform = null;
            break;
        case 8: // bottom-center
            pos.left = '50%';
            pos.bottom = offsetY;
            pos.transform = translateX;
            break;
        case 9: // bottom-right
            pos.right = offsetX;
            pos.bottom = offsetY;
            pos.transform = null;
            break;
    }
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    position: fixed;
    z-index: 1;
    width: ${isResizing ? `${initWidth + dw}px` : (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(layoutItem.bbox, 'width')};
    height: ${isResizing ? `${initHeight + dh}px` : (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(layoutItem.bbox, 'height')};
    left: ${pos.left};
    right: ${pos.right};
    top: ${pos.top};
    bottom: ${pos.bottom};
    transform: ${pos.transform};
  `;
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/runtime/floating-layout-item.tsx":
/*!***********************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/runtime/floating-layout-item.tsx ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FloatingLayoutItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_layout_item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../runtime/layout-item */ "./jimu-layouts/lib/runtime/layout-item.tsx");
/* harmony import */ var _layout_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../layout-utils */ "./jimu-layouts/lib/flow-layout/layout-utils.ts");
/** @jsx jsx */



class FloatingLayoutItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    calculatePosition() {
        const { layoutItem } = this.props;
        return (0,_layout_utils__WEBPACK_IMPORTED_MODULE_2__.calculateFloatingPosition)(layoutItem);
    }
    render() {
        const { layoutId, layoutItem, onClick } = this.props;
        if (!layoutItem) {
            return null;
        }
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('flow-layout-item floating', 'd-flex');
        // const itemSetting: FlowLayoutItemSetting = lodash.assign({}, DEFAULT_FLOW_ITEM_SETTING, layoutItem.setting);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_runtime_layout_item__WEBPACK_IMPORTED_MODULE_1__["default"], { css: this.calculatePosition(), layoutId: layoutId, layoutItemId: layoutItem.id, onClick: onClick, className: mergedClass }));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/runtime/layout-item.tsx":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/runtime/layout-item.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/flow-layout/default-setting.ts");
/* harmony import */ var _layout_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../layout-utils */ "./jimu-layouts/lib/flow-layout/layout-utils.ts");
/* harmony import */ var _runtime_layout_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../runtime/layout-item */ "./jimu-layouts/lib/runtime/layout-item.tsx");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/flow-layout/common/util.ts");
/** @jsx jsx */






class FlowLayoutItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    componentDidMount() {
        var _a;
        const queryObject = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().queryObject) !== null && _a !== void 0 ? _a : {};
        const { layoutId, layoutItem } = this.props;
        const domId = `${layoutId}_block_${layoutItem.id}`;
        if (queryObject.block_id === domId) {
            const dom = document.getElementById(domId);
            setTimeout(() => {
                dom.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 500);
        }
    }
    calHeight(itemSetting) {
        const height = _common_util__WEBPACK_IMPORTED_MODULE_5__.calHeight(this.props.layoutItem, itemSetting);
        this.autoHeight = height === 'auto';
        return height;
    }
    getStyle(itemSetting) {
        const { index, gutter } = this.props;
        const sign = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.isRTL)() ? -1 : 1;
        return [
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        margin-top: ${index > 0 ? `${gutter}px` : 'unset'};
        width: ${(0,_layout_utils__WEBPACK_IMPORTED_MODULE_3__.getWidthFromSetting)(itemSetting)};
        height: ${this.calHeight(itemSetting)};
        flex-shrink: 0;
      `,
            itemSetting.offsetX || itemSetting.offsetY ? `translate(${(itemSetting.offsetX || 0) * sign}px, ${itemSetting.offsetY || 0}px)` : null
        ];
    }
    render() {
        const { layoutId, layoutItem, onClick, isEmpty } = this.props;
        if (!layoutItem || isEmpty) {
            return null;
        }
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('flow-layout-item', 'd-flex');
        const itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_FLOW_ITEM_SETTING, layoutItem.setting);
        const oneByOneAnimationProps = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.handleOnebyOneAnimation)(this.props);
        const [cssStyle, transform] = this.getStyle(itemSetting);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_runtime_layout_item__WEBPACK_IMPORTED_MODULE_4__["default"], Object.assign({ id: `${layoutId}_block_${layoutItem.id}`, css: cssStyle, style: { transform }, layoutId: layoutId, layoutItemId: layoutItem.id, onClick: onClick, className: mergedClass, autoHeight: this.autoHeight }, oneByOneAnimationProps)));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_layout_utils__WEBPACK_IMPORTED_MODULE_3__.mapStateToFlowItemProps)(FlowLayoutItem));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/runtime/layout.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/runtime/layout.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/flow-layout/runtime/layout-item.tsx");
/* harmony import */ var _floating_layout_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./floating-layout-item */ "./jimu-layouts/lib/flow-layout/runtime/floating-layout-item.tsx");
/* harmony import */ var _screen_group__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./screen-group */ "./jimu-layouts/lib/flow-layout/runtime/screen-group.tsx");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/flow-layout/default-setting.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/** @jsx jsx */







class Layout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(`${jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer}`);
        if (exts && exts.length > 0) {
            const ext = exts.find(item => item.layoutType === this.props.layout.type);
            this.layoutTransform = ext === null || ext === void 0 ? void 0 : ext.transformLayout;
        }
    }
    _createItem(item, index, layoutSetting) {
        var _a;
        const { layout } = this.props;
        if (item === null || item === void 0 ? void 0 : item.isPending) {
            return null;
        }
        if (item.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_screen_group__WEBPACK_IMPORTED_MODULE_4__.ScreenGroup, { key: `${item.id}_${index}`, itemIndex: index, layoutId: layout.id, layoutItemId: item.id, layoutItem: item }));
        }
        if ((_a = item.setting) === null || _a === void 0 ? void 0 : _a.isFloating) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_floating_layout_item__WEBPACK_IMPORTED_MODULE_3__["default"], { key: item.id, index: index, gutter: layoutSetting.gutter, layoutId: layout.id, layoutItemId: item.id, layoutItem: item }));
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_2__["default"], { key: item.id, index: index, gutter: layoutSetting.gutter, layoutId: layout.id, layoutItemId: item.id, layoutItem: item }));
    }
    render() {
        const { layout, className, style, layouts, browserSizeMode } = this.props;
        if (!layout) {
            return null;
        }
        let targetLayout = layout;
        if (layouts[browserSizeMode] !== layout.id && this.layoutTransform) {
            let fromSizeMode;
            // eslint-disable-next-line
            Object.keys(layouts).some(mode => {
                if (layouts[mode] === layout.id) {
                    fromSizeMode = mode;
                    return true;
                }
            });
            targetLayout = this.layoutTransform(layout, fromSizeMode, browserSizeMode);
        }
        const content = targetLayout.order || [];
        const layoutSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_FLOW_SETTING, targetLayout.setting);
        const mergedStyle = Object.assign(Object.assign(Object.assign({}, style), jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle(layoutSetting.style)), { position: 'relative' });
        const outClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout flow-layout w-100', className);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: outClass, style: mergedStyle, "data-layoutid": layout.id },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: true } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: targetLayout.id, "data-layoutid": targetLayout.id, className: 'trail-container d-flex flex-column align-items-center', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              width: 100%;
            ` }, content.map((layoutItemId, index) => this._createItem(targetLayout.content[layoutItemId], index, layoutSetting))))));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_utils__WEBPACK_IMPORTED_MODULE_6__.mapStateToLayoutProps)(Layout));


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/runtime/screen-group.tsx":
/*!***************************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/runtime/screen-group.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ScreenGroup: () => (/* binding */ ScreenGroup)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common */ "./jimu-layouts/lib/flow-layout/common/index.tsx");
/* harmony import */ var _runtime_layout_entry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../runtime/layout-entry */ "./jimu-layouts/lib/runtime/layout-entry.tsx");
/* harmony import */ var _common_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/type */ "./jimu-layouts/lib/flow-layout/common/type.ts");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/flow-layout/common/util.ts");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/** @jsx jsx */






function getStyle(transitionType, isOverlay) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    position: relative;
    width: 100%;

    .main-panels {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 0;
    }

    .side-panels {
      position: relative;
      z-index: 1;
      pointer-events: none;

      > div:first-of-type > div.panel-content {
        padding-top: ${Math.round(100 * _common_type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)}vh;
        padding-top: calc(var(--vh) * ${Math.round(100 * _common_type__WEBPACK_IMPORTED_MODULE_3__.SCREEN_RATIO_IN_SMALL_SIZE)});
      }

      /* > div:nth-last-of-type(2) {
        min-height: 100vh;
      } */
    }

    &.small-size .main-panels {
      z-index: ${isOverlay ? 0 : 1};
    }

    &.small-size .side-panels {
      z-index: ${isOverlay ? 1 : 0};
    }

    &.print-preview {
      .screen-container {
        height: auto;
        position: relative;

        .screen-main-panel {
          position: relative;
          opacity: 1 !important;
        }
      }
      .screen-side-panel {
        min-height: calc(var(--vh) * 100);
        opacity: 1 !important;
        .panel-spacing {
          display: none;
        }
      }
      .screen-placeholder {
        display: none;
      }
    }
  `;
}
function ScreenGroup(props) {
    var _a;
    const { layoutId, layoutItemId, layoutItem } = props;
    const { screenGroupId } = layoutItem;
    const screenGroup = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appConfig.screenGroups[layoutItem.screenGroupId];
    });
    const isPrintPreview = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        return (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.isPrintPreview) !== null && _b !== void 0 ? _b : false;
    });
    const hasPanel = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        // screen with panel and without panel can be mixed
        const screenIds = state.appConfig.screenGroups[layoutItem.screenGroupId].screens;
        return screenIds.some(screenId => {
            const screen = state.appConfig.screens[screenId];
            return screen.panel != null;
        });
    });
    const browserSizeMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.browserSizeMode;
    });
    const { pageId } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_builder_page_context__WEBPACK_IMPORTED_MODULE_5__.PageContext);
    const headerHeight = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        const pageJson = state.appConfig.pages[pageId];
        if (pageJson === null || pageJson === void 0 ? void 0 : pageJson.header) {
            const headerJson = state.appConfig.header;
            if (headerJson === null || headerJson === void 0 ? void 0 : headerJson.sticky) {
                const browserSizeMode = state.browserSizeMode;
                const mainSizeMode = state.appConfig.mainSizeMode;
                const height = headerJson.height[browserSizeMode] || headerJson.height[mainSizeMode] || _common_type__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_HEADER_HEIGHT;
                return parseInt(height, 10);
            }
        }
        return 0;
    });
    const { screens, stretchPanel = true, triggerType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Bottom, verticalSpace = '0', panelTransitionType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push } = screenGroup;
    let transitionType = isPrintPreview ? null : ((_a = screenGroup.transitionType) !== null && _a !== void 0 ? _a : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade);
    if (!isPrintPreview && browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small && !hasPanel) {
        transitionType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover;
    }
    const navInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return (_a = state.appRuntimeInfo.screenGroupNavInfos) === null || _a === void 0 ? void 0 : _a[screenGroupId];
    });
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const screenGroupRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const mainPanelRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [activeIndex, setActiveIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(0);
    const isOverlay = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a, _b, _c;
        if (browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            return false;
        }
        const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
        const screens = (_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[screenGroupId]) === null || _b === void 0 ? void 0 : _b.screens;
        if (screens === null || screens === void 0 ? void 0 : screens[activeIndex]) {
            const screen = appConfig.screens[screens[activeIndex]];
            return (_c = screen.panel) === null || _c === void 0 ? void 0 : _c.overlay;
        }
        return false;
    }, [screenGroupId, activeIndex, browserSizeMode]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if ((navInfo === null || navInfo === void 0 ? void 0 : navInfo.activeIndex) != null && navInfo.activeIndex !== activeIndex) {
            setActiveIndex(navInfo.activeIndex);
        }
    }, [navInfo, activeIndex]);
    const onInterctionChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((index, isIntersecting) => {
        if (isIntersecting && index !== activeIndex) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, index, false));
        }
        else if (!isIntersecting && index > 0) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.screenGroupNavInfoChanged(screenGroupId, index - 1, false));
        }
    }, [activeIndex, screenGroupId]);
    const sidepanelResizeHandler = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        if (!screenGroupRef.current) {
            return;
        }
        const mainPanelContainer = screenGroupRef.current.children[0];
        const sidePanelContainer = screenGroupRef.current.children[1];
        // Sync the height between main panel and side panel
        const count = sidePanelContainer.childElementCount;
        for (let i = 0; i < count; i++) {
            const elem = sidePanelContainer.children[i];
            const screenId = elem.getAttribute('data-screenid');
            const mainPanelElem = mainPanelContainer.querySelector(`[data-screenid="${screenId}"]`);
            if (mainPanelElem) {
                if (isPrintPreview) {
                    mainPanelElem.style.height = `${elem.clientHeight}px`;
                }
                else {
                    mainPanelElem.style.height = null;
                }
            }
        }
        mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
    }, [isPrintPreview]);
    const debounceResizeHandler = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(sidepanelResizeHandler, 200), [sidepanelResizeHandler]);
    const onSidePanelHeightChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((index, height) => {
        if (!screenGroupRef.current) {
            return;
        }
        const mainPanelContainer = screenGroupRef.current.children[0];
        const sidePanelContainer = screenGroupRef.current.children[1];
        if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Fade) {
            mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
            return;
        }
        if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Cover) {
            (0,_common_util__WEBPACK_IMPORTED_MODULE_4__.updateScreenHeight)(mainPanelContainer, sidePanelContainer, browserSizeMode);
            return;
        }
        if (transitionType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTransitionType.Push) {
            const relatedElement = mainPanelContainer.querySelector(`div.screen-main-panel[data-index="${index}"]`);
            const panelElement = sidePanelContainer.querySelector(`div.screen-side-panel[data-index="${index}"]`);
            relatedElement.style.height = `${panelElement.clientHeight}px`;
            mainPanelContainer.style.height = `${sidePanelContainer.clientHeight}px`;
        }
    }, [browserSizeMode, transitionType]);
    if (screens.length > 0) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('flow-layout-item', { 'print-preview': isPrintPreview, 'small-size': browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small }), css: getStyle(transitionType, isOverlay), "data-layoutitemid": layoutItemId, "data-layoutid": layoutId, ref: domRef },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'screen-group', ref: screenGroupRef },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'main-panels', ref: mainPanelRef },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common__WEBPACK_IMPORTED_MODULE_1__.ScreenMainPanelList, { rootLayoutId: layoutId, activeIndex: activeIndex, screens: screens, transitionType: transitionType, layoutEntry: _runtime_layout_entry__WEBPACK_IMPORTED_MODULE_2__["default"], headerHeight: headerHeight, isSmallSize: browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'side-panels' },
                    screens.map((screenId, idx) => {
                        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common__WEBPACK_IMPORTED_MODULE_1__.ScreenSidePanel, { key: screenId, index: idx, isLast: idx === screens.length - 1, screenId: screenId, refElement: null, layoutEntry: _runtime_layout_entry__WEBPACK_IMPORTED_MODULE_2__["default"], isActive: idx === activeIndex, stretched: stretchPanel, triggerType: triggerType, verticalSpace: verticalSpace, transitionType: panelTransitionType, screenTransitionType: transitionType, onHeightChange: onSidePanelHeightChange, onInterctionChange: onInterctionChange, isSmallSize: browserSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small, headerHeight: headerHeight }));
                    }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: debounceResizeHandler })))));
    }
    return null;
}


/***/ }),

/***/ "./jimu-layouts/lib/flow-layout/use-intersection.tsx":
/*!***********************************************************!*\
  !*** ./jimu-layouts/lib/flow-layout/use-intersection.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   INTERSECTION_HEIGHT: () => (/* binding */ INTERSECTION_HEIGHT),
/* harmony export */   useIntersection: () => (/* binding */ useIntersection)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const INTERSECTION_HEIGHT = 2; // in percentage
function buildThresholdList() {
    const step = 100;
    const result = [0];
    for (let i = 1; i <= step; i++) {
        result.push(i / step);
    }
    return result;
}
function getRootMargin(triggerType) {
    switch (triggerType) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Top:
            return `0% 0% -${100 - INTERSECTION_HEIGHT}% 0%`;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Bottom:
            // make a little space between the bottom in order to trigger screen out
            return `-${100 - INTERSECTION_HEIGHT}% 0% -2px 0%`;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Upper:
            return `-${100 / 3 - INTERSECTION_HEIGHT / 2}% 0% -${200 / 3 - INTERSECTION_HEIGHT / 2}% 0%`;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ScreenTriggerType.Lower:
            return `-${200 / 3 - INTERSECTION_HEIGHT / 2}% 0% -${100 / 3 - INTERSECTION_HEIGHT / 2}% 0%`;
        default:
            return undefined;
    }
}
/**
 *
 * @param ref
 * @param rootElement
 * @param onIntersectionChange
 */
function useIntersection(ref, rootElement, triggerType, onIntersectionChange) {
    const observerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const lastIntersecting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (observerRef.current) {
            observerRef.current.unobserve(ref);
            observerRef.current = null;
        }
        const handleIntersectionChange = (entry) => {
            /**
             * This event may be trigged later than the intersecting time.
             * For example, the two rects may looks like the following when
             * interction change event is fired.
             *               ------------ rect.top
             *               |          |
             *          ----------------------- rootRect.top
             *          |    |          |     |
             *          |    |          |     |
             *          |    |          |     |
             *          ----------------------- rootRect.bottom
             *               |          |
             *               |          |
             *               ------------ rect.bottom
             */
            const rect = entry.boundingClientRect;
            const rootRect = entry.rootBounds;
            const isTopIntersecting = Math.abs(rect.bottom - rootRect.top) >= Math.abs(rect.top - rootRect.top);
            if (entry.isIntersecting) {
                lastIntersecting.current = true;
                if (isTopIntersecting) {
                    onIntersectionChange(true);
                    return false;
                }
            }
            else if (lastIntersecting.current) {
                lastIntersecting.current = false;
                if (isTopIntersecting) {
                    onIntersectionChange(false);
                    return false;
                }
            }
        };
        if (ref && typeof IntersectionObserver === 'function') {
            const handler = (entries) => {
                handleIntersectionChange(entries[0]);
            };
            const observer = new IntersectionObserver(handler, {
                threshold: buildThresholdList(),
                root: rootElement || document,
                rootMargin: getRootMargin(triggerType)
            });
            observer.observe(ref);
            observerRef.current = observer;
            return () => {
                observerRef.current.unobserve(ref);
                observerRef.current = null;
            };
        }
    }, [ref, rootElement, onIntersectionChange, triggerType]);
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/common/splitter.tsx":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/common/splitter.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Splitter: () => (/* binding */ Splitter)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const MIN_SIZE = 32;
function restrictResizing(prevItemRect, nextItemRect, direction, dx, dy, isRTL) {
    let x = dx;
    let y = dy;
    if (direction === 'row') {
        const prevWidth = isRTL ? nextItemRect.width : prevItemRect.width;
        const nextWidth = isRTL ? prevItemRect.width : nextItemRect.width;
        if (dx < 0) {
            if (prevWidth > MIN_SIZE) {
                x = -Math.min(Math.abs(dx), prevWidth - MIN_SIZE);
            }
            else {
                x = 0;
            }
        }
        if (dx > 0) {
            if (nextWidth > MIN_SIZE) {
                x = Math.min(dx, nextWidth - MIN_SIZE);
            }
            else {
                x = 0;
            }
        }
    }
    else {
        if (dy < 0) {
            if (prevItemRect.height > MIN_SIZE) {
                y = -Math.min(Math.abs(dy), prevItemRect.height - MIN_SIZE);
            }
            else {
                y = 0;
            }
        }
        if (dy > 0) {
            if (nextItemRect.height > MIN_SIZE) {
                y = Math.min(dy, nextItemRect.height - MIN_SIZE);
            }
            else {
                y = 0;
            }
        }
    }
    return { x, y };
}
function getSize(layoutItemElement) {
    const layoutId = layoutItemElement.getAttribute('data-layoutid');
    const layoutItemId = layoutItemElement.getAttribute('data-layoutitemid');
    const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
    return +layoutItem.bbox.width;
}
function Splitter(props) {
    var _a, _b;
    const { referenceItemId, direction, layoutId, onResizeEnd } = props;
    const domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const interactableRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const interactRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const isRTL = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext) === null || _a === void 0 ? void 0 : _a.isRTL) !== null && _b !== void 0 ? _b : false;
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return state.appRuntimeInfo.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    const layoutResizable = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const layout = state.appConfig.layouts[props.layoutId];
        return (_b = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.resizable) !== null && _b !== void 0 ? _b : true;
    });
    const size = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const layout = state.appConfig.layouts[layoutId];
        return (_b = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.splitSize) !== null && _b !== void 0 ? _b : 8;
    });
    const color = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        const layout = state.appConfig.layouts[layoutId];
        return (_b = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.splitColor) !== null && _b !== void 0 ? _b : 'var(--light-500)';
    });
    const style = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        const pxSize = `${size}px`;
        const canResize = isDesignMode ? true : layoutResizable;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: ${direction === 'col' ? '100%' : pxSize};
      height: ${direction === 'col' ? pxSize : '100%'};
      background: ${color};
      position: relative;
      z-index: 10;
      flex-shrink: 0;

      .horizontal-splitter {
        cursor: ${canResize ? 'col-resize' : 'default'};
      }

      .vertical-splitter {
        cursor: ${canResize ? 'row-resize' : 'default'};
      }
    `;
    }, [direction, layoutResizable, isDesignMode, size, color]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        let dx;
        let dy;
        let parentRect;
        let prevItem;
        let prevItemRect;
        let prevSize;
        let originPrevItemWidth;
        let originPrevItemHeight;
        let nextItem;
        let nextItemRect;
        let nextSize;
        let originNextItemWidth;
        let originNextItemHeight;
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.moduleLoader.loadModule('jimu-core/dnd').then(module => {
            const interact = module.interact;
            interactRef.current = interact;
            if (!domRef.current) { // maybe unmounted in this async callback
                return;
            }
            interactableRef.current = interact(domRef.current)
                .origin('parent')
                .draggable({
                inertia: false,
                autoScroll: false,
                enabled: isDesignMode ? true : layoutResizable,
                modifiers: [
                    interact.modifiers.restrict({
                        restriction: 'parent'
                    })
                ],
                lockAxis: direction === 'row' ? 'x' : 'y',
                onstart: (event) => {
                    event.stopPropagation();
                    dx = 0;
                    dy = 0;
                    parentRect = domRef.current.parentElement.getBoundingClientRect();
                    prevItem = domRef.current.previousElementSibling;
                    prevItemRect = prevItem.getBoundingClientRect();
                    originPrevItemWidth = prevItem.style.width;
                    originPrevItemHeight = prevItem.style.height;
                    prevSize = getSize(prevItem);
                    nextItem = domRef.current.nextElementSibling;
                    nextItemRect = nextItem.getBoundingClientRect();
                    originNextItemWidth = nextItem.style.width;
                    originNextItemHeight = nextItem.style.height;
                    nextSize = getSize(nextItem);
                },
                onmove: (event) => {
                    event.stopPropagation();
                    dx += event.dx;
                    dy += event.dy;
                    const { x, y } = restrictResizing(prevItemRect, nextItemRect, direction, dx, dy, isRTL);
                    const factor = isRTL ? -1 : 1;
                    if (direction === 'row') {
                        prevItem.style.width = `calc(${prevSize}% + ${x * factor}px)`;
                        nextItem.style.width = `calc(${nextSize}% - ${x * factor}px)`;
                    }
                    else {
                        prevItem.style.height = `calc(${prevSize}% + ${y}px)`;
                        nextItem.style.height = `calc(${nextSize}% - ${y}px)`;
                    }
                },
                onend: (event) => {
                    event.stopPropagation();
                    dx += event.dx;
                    dy += event.dy;
                    const { x, y } = restrictResizing(prevItemRect, nextItemRect, direction, dx, dy, isRTL);
                    const factor = isRTL ? -1 : 1;
                    // restore style of items
                    prevItem.style.width = originPrevItemWidth;
                    nextItem.style.width = originNextItemWidth;
                    prevItem.style.height = originPrevItemHeight;
                    nextItem.style.height = originNextItemHeight;
                    onResizeEnd(referenceItemId, Math.round(x * factor * 10000 / parentRect.width) / 100, Math.round(y * 10000 / parentRect.height) / 100);
                }
            });
        });
        return () => {
            var _a;
            (_a = interactableRef.current) === null || _a === void 0 ? void 0 : _a.unset();
            interactableRef.current = null;
        };
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (interactableRef.current != null) {
            interactRef.current(domRef.current).draggable(isDesignMode ? true : layoutResizable);
        }
    }, [layoutResizable, isDesignMode]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: domRef, css: style, className: 'grid-split flex-shrink-0' },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100', {
                'horizontal-splitter': direction === 'row',
                'vertical-splitter': direction === 'col'
            }) })));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/common/utils.ts":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/common/utils.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calPaddingStyle: () => (/* binding */ calPaddingStyle),
/* harmony export */   getGridItem: () => (/* binding */ getGridItem),
/* harmony export */   getGridLayoutStructure: () => (/* binding */ getGridLayoutStructure),
/* harmony export */   getLabelOfGridTab: () => (/* binding */ getLabelOfGridTab),
/* harmony export */   indexOfPlainContent: () => (/* binding */ indexOfPlainContent),
/* harmony export */   isExpandable: () => (/* binding */ isExpandable),
/* harmony export */   isLastChildOfRootItem: () => (/* binding */ isLastChildOfRootItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");


function indexOfPlainContent(layout, layoutItemId) {
    var _a, _b;
    let start = 0;
    const rootItemId = layout.setting.rootItem;
    const rootItem = getGridItem(layout, rootItemId);
    if (rootItem && ((_a = rootItem.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        const candidates = [...rootItem.children];
        while (candidates.length > 0) {
            const firstItemId = candidates.shift();
            const firstItem = getGridItem(layout, firstItemId);
            const parentId = firstItem.parent;
            const parentItem = getGridItem(layout, parentId);
            if (`${firstItem.id}` === layoutItemId ||
                (parentItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab && parentItem.children.includes(layoutItemId))) {
                return start;
            }
            if (((_b = firstItem.children) === null || _b === void 0 ? void 0 : _b.length) > 0) {
                // it is a group
                candidates.unshift(...firstItem.children);
                continue;
            }
            // tab only increase index once
            if (parentItem.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab ||
                (parentItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab && parentItem.children.indexOf(firstItemId) === 0)) {
                start += 1;
            }
        }
    }
    return start;
}
function isLastChildOfRootItem(layout, layoutItemId) {
    var _a;
    let currentItem = getGridItem(layout, layoutItemId);
    if (((_a = currentItem === null || currentItem === void 0 ? void 0 : currentItem.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        // children's is behind currentItem
        return false;
    }
    while (currentItem != null) {
        const parentId = currentItem.parent;
        if (parentId == null) {
            break;
        }
        // check if it the last child of its parent
        const parentItem = getGridItem(layout, parentId);
        const len = parentItem.children.length;
        const lastId = parentItem.children[len - 1];
        if (+lastId !== +currentItem.id) {
            return false;
        }
        currentItem = parentItem;
    }
    return true;
}
function isExpandable(state, layoutId, layoutItemId) {
    var _a, _b;
    const layout = state.appConfig.layouts[layoutId];
    const layoutItem = layout.content[layoutItemId];
    const canExpand = (_a = layoutItem.expandable) !== null && _a !== void 0 ? _a : true;
    if (!canExpand) {
        return false;
    }
    // set expandable to false if it is the only item in grid
    const rootItem = (_b = layout === null || layout === void 0 ? void 0 : layout.setting) === null || _b === void 0 ? void 0 : _b.rootItem;
    let isOnlyItem = false;
    if (rootItem === layoutItemId) {
        const rootLayoutItem = getGridItem(layout, rootItem);
        if (rootLayoutItem.children == null || rootLayoutItem.children.length === 0) {
            isOnlyItem = true;
        }
    }
    return !isOnlyItem;
}
function getGridItem(layout, layoutItemId) {
    var _a;
    return (_a = layout.content) === null || _a === void 0 ? void 0 : _a[layoutItemId];
}
function fetchGridNode(layout, layoutItemId) {
    const item = getGridItem(layout, layoutItemId);
    if (item == null) {
        return null;
    }
    const { gridType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Plain, children } = item;
    const result = { layoutItemId, type: gridType };
    if ((children === null || children === void 0 ? void 0 : children.length) > 0) {
        result.children = [...children].map((itemId) => fetchGridNode(layout, itemId));
    }
    return result;
}
function getGridLayoutStructure(layout) {
    var _a;
    if (layout.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout) {
        return null;
    }
    const rootItemId = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.rootItem;
    return fetchGridNode(layout, `${rootItemId}`);
}
function getLabelOfGridTab(appConfig, layoutInfo, translate) {
    var _a, _b, _c, _d, _e, _f, _g;
    const { layoutId, layoutItemId } = layoutInfo;
    const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widget = appConfig.widgets[layoutItem.widgetId];
        if (!widget) {
            return translate('placeholder');
        }
        return (_b = (_a = widget === null || widget === void 0 ? void 0 : widget.label) !== null && _a !== void 0 ? _a : layoutItem.label) !== null && _b !== void 0 ? _b : layoutItem.id; // may be a placeholder
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        const section = appConfig.sections[layoutItem.sectionId];
        return section.label;
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.gridType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
        return (_c = layoutItem.label) !== null && _c !== void 0 ? _c : translate('gridRow');
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.gridType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
        return (_d = layoutItem.label) !== null && _d !== void 0 ? _d : translate('gridCol');
    }
    if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.gridType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
        return (_e = layoutItem.label) !== null && _e !== void 0 ? _e : translate('tabs');
    }
    return (_g = (_f = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.label) !== null && _f !== void 0 ? _f : layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.id) !== null && _g !== void 0 ? _g : '';
}
function calPaddingStyle(layoutSetting) {
    var _a;
    const padding = jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding((_a = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.style) === null || _a === void 0 ? void 0 : _a.padding);
    if (padding) {
        if (layoutSetting.paddingColor) {
            const paddingTokens = padding.split(' ');
            const paddingColor = layoutSetting.paddingColor;
            let prefix = '';
            const ua = window.jimuUA.browser.name.toLowerCase();
            if (ua === 'firefox') {
                prefix = '-moz-';
            }
            else if (ua === 'safari' || ua === 'chrome') {
                prefix = '-webkit-';
            }
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        padding: ${padding};
        background-image:
        ${prefix}linear-gradient(270deg, ${paddingColor} ${paddingTokens[0]}, transparent ${paddingTokens[0]}),
        ${prefix}linear-gradient(180deg, ${paddingColor} ${paddingTokens[1]}, transparent ${paddingTokens[1]}),
        ${prefix}linear-gradient(90deg, ${paddingColor} ${paddingTokens[2]}, transparent ${paddingTokens[2]}),
        ${prefix}linear-gradient(0deg, ${paddingColor} ${paddingTokens[3]}, transparent ${paddingTokens[3]});
      `;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      padding: ${padding};
    `;
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/layout-transform.ts":
/*!**********************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/layout-transform.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridLayoutTransformer: () => (/* binding */ GridLayoutTransformer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class GridLayoutTransformer {
    constructor() {
        this.id = 'grid-layout-transformer';
        this.layoutType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout;
        this.transformLayout = (layout, fromSizeMode, toSizeMode) => {
            var _a, _b;
            if (fromSizeMode !== toSizeMode && toSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
                let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layout);
                const rootId = (_a = layout.setting) === null || _a === void 0 ? void 0 : _a.rootItem;
                if (rootId && ((_b = layout.content) === null || _b === void 0 ? void 0 : _b[rootId])) {
                    const contentIds = [];
                    const rootItem = layout.content[rootId];
                    updatedLayout = this.collectItem(layout, rootId, rootItem.children, contentIds);
                    if (contentIds.length > 0) {
                        updatedLayout = updatedLayout.setIn(['content', rootId, 'gridType'], jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab);
                        updatedLayout = updatedLayout.setIn(['content', rootId, 'children'], contentIds);
                    }
                }
                return updatedLayout;
            }
            return layout;
        };
        this.collectItem = (layout, rootId, childIds, itemList) => {
            let updatedLayout = layout;
            childIds === null || childIds === void 0 ? void 0 : childIds.forEach(itemId => {
                var _a;
                if (!layout.content[itemId].isPending) {
                    const item = layout.content[itemId];
                    if (item.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column && item.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row && item.gridType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
                        itemList.push(itemId);
                        updatedLayout = updatedLayout.setIn(['content', itemId, 'parent'], rootId);
                    }
                    else if (((_a = item.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                        updatedLayout = this.collectItem(updatedLayout, rootId, item.children, itemList);
                    }
                }
            });
            return updatedLayout;
        };
    }
    transformLayoutItem(item, index, fromLayoutId, toLayoutId, fromSizeMode, toSizeMode) {
        return { index, item };
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/runtime/grid-item.tsx":
/*!************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/runtime/grid-item.tsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridItemComponent: () => (/* binding */ GridItemComponent)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/grid-layout/runtime/layout-item.tsx");
/* harmony import */ var _common_splitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/splitter */ "./jimu-layouts/lib/grid-layout/common/splitter.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/** @jsx jsx */





function GridItemComponent(props) {
    const { layout, layoutItemId, isLast, className } = props;
    const layoutItem = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, layoutItemId);
    }, [layout, layoutItemId]);
    const parentType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        if (layoutItem.parent) {
            const parentItem = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getGridItem)(layout, layoutItem.parent);
            return parentItem.gridType;
        }
        return null;
    }, [layout, layoutItem]);
    const size = +layoutItem.bbox.width;
    const animationContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext);
    const interval = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a, _b;
        if (((_b = (_a = animationContext === null || animationContext === void 0 ? void 0 : animationContext.setting) === null || _a === void 0 ? void 0 : _a.option) === null || _b === void 0 ? void 0 : _b.parentMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ParentAnimationMode.AllAtOnce) {
            return 0;
        }
        return 250;
    }, [animationContext]);
    const getStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        if (parentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        height: 100%;
        width: ${size}%;
      `;
        }
        if (parentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        width: 100%;
        height: ${size}%;
      `;
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: 100%;
      height: 100%;
    `;
    }, [size, parentType]);
    if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Row) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(RowContainer, { className: className, css: getStyle(), layout: layout, layoutItemId: layoutItemId, items: layoutItem.children }));
    }
    if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Column) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(ColContainer, { className: className, css: getStyle(), layout: layout, layoutItemId: layoutItemId, items: layoutItem.children }));
    }
    if (layoutItem.gridType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.GridItemType.Tab) {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(TabContainer, { className: className, css: getStyle(), layout: layout, layoutItemId: layoutItemId, items: layoutItem.children }));
    }
    const idx = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.indexOfPlainContent)(layout, layoutItemId);
    const isLastChild = (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.isLastChildOfRootItem)(layout, layoutItemId);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_2__.GridLayoutItem, { css: getStyle(), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(`d-flex ${className}`, { 'is-last': isLast }), layoutId: layout.id, layoutItemId: layoutItemId, delay: idx * interval, isLastChild: isLastChild }));
}
function RowContainer(props) {
    const { layout, layoutItemId, items, className } = props;
    const getAppConfigActionFnRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.moduleLoader.loadModule('jimu-for-builder').then((m) => {
            getAppConfigActionFnRef.current = m.getAppConfigAction;
        });
    });
    const handleResizeEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id, dx) => {
        const appConfigAction = getAppConfigActionFnRef.current();
        const index = items.indexOf(id);
        const nextId = items[index + 1];
        const layoutItem = layout.content[id];
        const nextLayoutItem = layout.content[nextId];
        appConfigAction.editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: id
        }, 'bbox', { width: +layoutItem.bbox.width + dx }).editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: nextId
        }, 'bbox', { width: +nextLayoutItem.bbox.width - dx }).exec();
    });
    const createItem = (itemId, isLast) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, { key: itemId },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridItemComponent, { key: itemId, layout: layout, layoutItemId: itemId }),
            !isLast && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_splitter__WEBPACK_IMPORTED_MODULE_3__.Splitter, { referenceItemId: itemId, layoutId: layout.id, direction: 'row', onResizeEnd: handleResizeEnd }))));
    };
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `d-flex ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        .is-last {
          width: auto;
          flex-grow: 1;
          flex-shrink: 1;
          flex-basis: 0;
        }
      `, "data-layoutid": layout.id, "data-layoutitemid": layoutItemId }, items.map((item, index) => createItem(item, index === items.length - 1))));
}
function ColContainer(props) {
    const { layout, layoutItemId, items, className } = props;
    const getAppConfigActionFnRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.moduleLoader.loadModule('jimu-for-builder').then((m) => {
            getAppConfigActionFnRef.current = m.getAppConfigAction;
        });
    });
    const handleResizeEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback((id, dx, dy) => {
        const appConfigAction = getAppConfigActionFnRef.current();
        const index = items.indexOf(id);
        const nextId = items[index + 1];
        const layoutItem = layout.content[id];
        const nextLayoutItem = layout.content[nextId];
        appConfigAction.editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: id
        }, 'bbox', { width: +layoutItem.bbox.width + dy }).editLayoutItemProperty({
            layoutId: layout.id,
            layoutItemId: nextId
        }, 'bbox', { width: +nextLayoutItem.bbox.width - dy }).exec();
    });
    const createItem = (itemId, isLast) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, { key: itemId },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridItemComponent, { key: itemId, layout: layout, layoutItemId: itemId }),
            !isLast && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_splitter__WEBPACK_IMPORTED_MODULE_3__.Splitter, { referenceItemId: itemId, layoutId: layout.id, direction: 'col', onResizeEnd: handleResizeEnd }))));
    };
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `d-flex flex-column ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        .is-last {
          height: auto;
          flex-grow: 1;
          flex-shrink: 1;
          flex-basis: 0;
        }
      `, "data-layoutid": layout.id, "data-layoutitemid": layoutItemId }, items.map((item, index) => createItem(item, index === items.length - 1))));
}
function TabContainer(props) {
    const { layout, layoutItemId, items, className } = props;
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages);
    const getLabel = (itemId) => {
        const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
        return (0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.getLabelOfGridTab)(appConfig, { layoutId: layout.id, layoutItemId: itemId }, translate);
    };
    const createItem = (itemId, index) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Tab, { key: index, id: `${index}`, title: getLabel(itemId) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridItemComponent, { layout: layout, layoutItemId: itemId })));
    };
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: className, "data-layoutid": layout.id, "data-layoutitemid": layoutItemId },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Tabs, { type: 'tabs', fill: true, scrollable: true, className: 'w-100 h-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          & > .tab-content {
            overflow: hidden;
          }
        ` }, [...items].map((item, index) => createItem(item, index)))));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/runtime/layout-item.tsx":
/*!**************************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/runtime/layout-item.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GridLayoutItem: () => (/* binding */ GridLayoutItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _runtime_layout_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../runtime/layout-item */ "./jimu-layouts/lib/runtime/layout-item.tsx");
/* harmony import */ var jimu_icons_outlined_application_maxgrid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/application/maxgrid */ "./jimu-icons/outlined/application/maxgrid.tsx");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/** @jsx jsx */






const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  & > .max-grid-item-btn {
    display: none;
    background: var(--light-500);
    width: 26px;
    height: 26px;
    position: absolute;
    top: 0;
    right: 0;
  }

  &:hover > .max-grid-item-btn {
    display: flex;
    justify-content: center;
    align-items: center;
  }
`;
const maximizedStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  position: absolute;
  left: 0;
  top: 0;
  width: 100% !important;
  height: 100% !important;
  z-index: 20;
  background: var(--light);
`;
function GridLayoutItem(props) {
    const [maximized, setMaximized] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const expandable = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        return _common_utils__WEBPACK_IMPORTED_MODULE_5__.isExpandable(state, props.layoutId, props.layoutItemId);
    });
    const toggleMaximize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setMaximized(!maximized);
    }, [maximized]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_runtime_layout_item__WEBPACK_IMPORTED_MODULE_2__["default"], Object.assign({}, props, { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `${style};${maximized ? maximizedStyle : ''}` }), expandable && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { icon: true, type: 'tertiary', className: 'max-grid-item-btn p-0', onClick: toggleMaximize },
        maximized && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_4__.CloseOutlined, null),
        !maximized && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_application_maxgrid__WEBPACK_IMPORTED_MODULE_3__.MaxgridOutlined, null)))));
}


/***/ }),

/***/ "./jimu-layouts/lib/grid-layout/runtime/layout.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/grid-layout/runtime/layout.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _grid_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./grid-item */ "./jimu-layouts/lib/grid-layout/runtime/grid-item.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/utils */ "./jimu-layouts/lib/grid-layout/common/utils.ts");
/** @jsx jsx */




class GridLayout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    findExtension() {
        const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(`${jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer}`);
        if ((exts === null || exts === void 0 ? void 0 : exts.length) > 0) {
            const ext = exts.find(item => item.layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout);
            this.layoutTransform = ext === null || ext === void 0 ? void 0 : ext.transformLayout;
        }
    }
    render() {
        var _a, _b;
        const { layouts, layout, browserSizeMode, mainSizeMode, className } = this.props;
        const viewOnly = layouts[browserSizeMode] !== layout.id;
        let finalLayout = layout;
        if (viewOnly) {
            if (this.layoutTransform == null) {
                this.findExtension();
            }
            if (this.layoutTransform != null) {
                finalLayout = this.layoutTransform(layout, mainSizeMode, browserSizeMode);
            }
        }
        const { rootItem: rootItemId } = (_a = finalLayout.setting) !== null && _a !== void 0 ? _a : {};
        const rootItem = (_b = finalLayout.content) === null || _b === void 0 ? void 0 : _b[rootItemId];
        const outClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout grid-layout d-flex w-100 h-100', className);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: outClass, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `overflow: hidden;${(0,_common_utils__WEBPACK_IMPORTED_MODULE_3__.calPaddingStyle)(finalLayout.setting)};`, "data-layoutid": finalLayout.id },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: false } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: finalLayout.id, "data-layoutid": finalLayout.id, className: 'trail-container d-flex w-100 h-100', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
              width: 100%;
            ` }, rootItem
                    ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_grid_item__WEBPACK_IMPORTED_MODULE_2__.GridItemComponent, { className: 'w-100 h-100', layout: finalLayout, layoutItemId: rootItemId })
                    : this.props.children))));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_utils__WEBPACK_IMPORTED_MODULE_1__.mapStateToLayoutProps)(GridLayout));


/***/ }),

/***/ "./jimu-layouts/lib/layout-factory.ts":
/*!********************************************!*\
  !*** ./jimu-layouts/lib/layout-factory.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   findLayoutBuilder: () => (/* binding */ findLayoutBuilder),
/* harmony export */   findLayoutViewer: () => (/* binding */ findLayoutViewer),
/* harmony export */   registerLayoutBuilder: () => (/* binding */ registerLayoutBuilder),
/* harmony export */   registerLayoutViewer: () => (/* binding */ registerLayoutViewer)
/* harmony export */ });
const layoutBuilders = {};
const layoutViewers = {};
function registerLayoutBuilder(type, component) {
    layoutBuilders[type] = component;
}
function registerLayoutViewer(type, component) {
    layoutViewers[type] = component;
}
function findLayoutBuilder(type) {
    return layoutBuilders[type];
}
function findLayoutViewer(type) {
    return layoutViewers[type];
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/common/util.ts":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/common/util.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getItemStyle: () => (/* binding */ getItemStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");


function getItemStyle(isMultiRow, sign, gutter, mergedStyle, itemSetting) {
    var _a, _b, _c, _d;
    if (isMultiRow) {
        return [
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
        padding: ${gutter / 2}px 0;
        height: ${_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox(mergedStyle, 'height')};
        align-self: ${mergedStyle.alignSelf};
      `,
            itemSetting.offsetX !== 0 || itemSetting.offsetY !== 0
                ? `translate(${((_a = itemSetting.offsetX) !== null && _a !== void 0 ? _a : 0) * sign}px, ${(_b = itemSetting.offsetY) !== null && _b !== void 0 ? _b : 0}px)`
                : null
        ];
    }
    return [
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      padding: 0 ${gutter / 2}px;
      height: ${_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox(mergedStyle, 'height')};
      align-self: ${mergedStyle.alignSelf};
    `,
        itemSetting.offsetX !== 0 || itemSetting.offsetY !== 0
            ? `translate(${((_c = itemSetting.offsetX) !== null && _c !== void 0 ? _c : 0) * sign}px, ${(_d = itemSetting.offsetY) !== null && _d !== void 0 ? _d : 0}px)`
            : null
    ];
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/default-setting.ts":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/default-setting.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_ROW_ITEM_SETTING: () => (/* binding */ DEFAULT_ROW_ITEM_SETTING),
/* harmony export */   DEFAULT_ROW_LAYOUT_SETTING: () => (/* binding */ DEFAULT_ROW_LAYOUT_SETTING)
/* harmony export */ });
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

const DEFAULT_ROW_LAYOUT_SETTING = {
    space: 10,
    style: {
        padding: {
            number: [10, 10, 10, 10],
            unit: jimu_ui__WEBPACK_IMPORTED_MODULE_0__.DistanceUnits.PIXEL
        }
    }
};
const DEFAULT_ROW_ITEM_SETTING = {
    heightMode: 'fixed',
    aspectRatio: 1,
    offsetX: 0,
    offsetY: 0,
    style: {
        alignSelf: 'flex-start'
    }
};


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/layout-transform.ts":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/layout-transform.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RowLayoutTransformer: () => (/* binding */ RowLayoutTransformer),
/* harmony export */   getHeightOfLayoutItems: () => (/* binding */ getHeightOfLayoutItems),
/* harmony export */   getWidgetHeight: () => (/* binding */ getWidgetHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search */ "./jimu-layouts/lib/search/index.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/row-layout/types.ts");




function getWidgetHeight(appConfig, widgetsState, widgetId) {
    var _a, _b, _c, _d, _e, _f, _g;
    const widgetJson = appConfig.widgets[widgetId];
    if (widgetJson != null) {
        const browserSizeMode = _utils__WEBPACK_IMPORTED_MODULE_2__.getCurrentSizeMode();
        const mainSizeMode = appConfig.mainSizeMode;
        const layoutId = widgetJson.layouts.DEFAULT[browserSizeMode];
        const mainLayoutId = widgetJson.layouts.DEFAULT[mainSizeMode];
        const layout = (_a = appConfig.layouts[layoutId]) !== null && _a !== void 0 ? _a : appConfig.layouts[mainLayoutId];
        const padding = (_e = (_d = (_c = (_b = layout.setting) === null || _b === void 0 ? void 0 : _b.style) === null || _c === void 0 ? void 0 : _c.padding) === null || _d === void 0 ? void 0 : _d.number) !== null && _e !== void 0 ? _e : [0];
        const paddingValues = _utils__WEBPACK_IMPORTED_MODULE_2__.expandStyleArray(padding);
        const widgetHeight = (_g = (_f = widgetsState === null || widgetsState === void 0 ? void 0 : widgetsState[widgetId]) === null || _f === void 0 ? void 0 : _f.height) !== null && _g !== void 0 ? _g : 0;
        let pt = paddingValues[0];
        let pb = paddingValues[2];
        if (_utils__WEBPACK_IMPORTED_MODULE_2__.isPercentage(pt)) {
            pt = _utils__WEBPACK_IMPORTED_MODULE_2__.fromRatio(pt, widgetHeight);
        }
        if (_utils__WEBPACK_IMPORTED_MODULE_2__.isPercentage(pb)) {
            pb = _utils__WEBPACK_IMPORTED_MODULE_2__.fromRatio(pb, widgetHeight);
        }
        return widgetHeight - pt - pb;
    }
    return 0;
}
function getHeightOfLayoutItems(appConfig, widgetsState, layoutId) {
    var _a;
    const widgetId = _search__WEBPACK_IMPORTED_MODULE_1__.getWidgetIdThatUseTheLayoutId(appConfig, layoutId);
    const widgetHeight = getWidgetHeight(appConfig, widgetsState, widgetId);
    if (widgetHeight > 0) {
        const rowLayout = appConfig.layouts[layoutId];
        const itemIds = (_a = rowLayout.order) !== null && _a !== void 0 ? _a : [];
        const result = {};
        itemIds.forEach(itemId => {
            const layoutItem = appConfig.layouts[layoutId].content[itemId];
            result[itemId] = _utils__WEBPACK_IMPORTED_MODULE_2__.calHeightOfLayoutItem(widgetHeight, layoutItem);
        });
        return result;
    }
    return null;
}
class RowLayoutTransformer {
    constructor() {
        this.id = 'row-layout-transformer';
        this.layoutType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.RowLayout;
    }
    transformLayout(layout, fromSizeMode, toSizeMode, appConfig) {
        var _a, _b;
        if (fromSizeMode === toSizeMode) {
            return layout;
        }
        let updatedLayout = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layout);
        if (toSizeMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small) {
            const itemHeights = getHeightOfLayoutItems(appConfig, (_a = window.runtimeInfo) === null || _a === void 0 ? void 0 : _a.widgets, layout.id);
            let index = 0;
            const order = Object.keys((_b = layout.content) !== null && _b !== void 0 ? _b : {}).sort((a, b) => {
                return parseInt(layout.content[a].bbox.left, 10) - parseInt(layout.content[b].bbox.left, 10);
            });
            order.forEach(itemId => {
                var _a, _b, _c;
                const layoutItem = layout.content[itemId];
                if (!layoutItem.isPending) {
                    updatedLayout = updatedLayout.setIn(['content', itemId, 'bbox'], {
                        left: index * _types__WEBPACK_IMPORTED_MODULE_3__.TOTAL_COLS,
                        width: _types__WEBPACK_IMPORTED_MODULE_3__.TOTAL_COLS,
                        height: (_b = (_a = layoutItem.bbox) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : 'auto'
                    });
                    if (itemHeights != null) {
                        const setting = (_c = layoutItem.setting) !== null && _c !== void 0 ? _c : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({});
                        updatedLayout = updatedLayout
                            .setIn(['content', itemId, 'bbox', 'height'], itemHeights[itemId].height)
                            .setIn(['content', itemId, 'setting'], setting.merge(itemHeights[itemId].setting));
                    }
                    index += 1;
                }
            });
        }
        return updatedLayout;
    }
    transformLayoutItem(item, index, fromLayoutId, toLayoutId, fromSizeMode, toSizeMode) {
        return { item, index };
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/runtime/layout-item.tsx":
/*!*************************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/runtime/layout-item.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RowItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/row-layout/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _runtime_layout_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../runtime/layout-item */ "./jimu-layouts/lib/runtime/layout-item.tsx");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/* harmony import */ var _common_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/util */ "./jimu-layouts/lib/row-layout/common/util.ts");
/** @jsx jsx */







class RowItem extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    getStyle(itemSetting) {
        const { gutter, layoutItem, isMultiRow } = this.props;
        const bbox = layoutItem.bbox;
        const sign = _utils__WEBPACK_IMPORTED_MODULE_2__.isRTL() ? -1 : 1;
        const mergedStyle = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.calItemHeight)(itemSetting, bbox, isMultiRow);
        return _common_util__WEBPACK_IMPORTED_MODULE_6__.getItemStyle(isMultiRow, sign, gutter, mergedStyle, itemSetting);
    }
    render() {
        var _a;
        const { span, offset, layoutId, layoutItem } = this.props;
        if (layoutItem == null || layoutItem.isPending) {
            return null;
        }
        const itemSetting = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.assign({}, _default_setting__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_ROW_ITEM_SETTING, layoutItem.setting);
        const mergedClass = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('row-layout-item', `col-${span}`, `offset-${offset}`);
        const heightMode = (_a = itemSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height;
        const ratio = _utils__WEBPACK_IMPORTED_MODULE_2__.parseAspectRatio(itemSetting.aspectRatio);
        const oneByOneAnimationProps = _utils__WEBPACK_IMPORTED_MODULE_2__.handleOnebyOneAnimation(this.props);
        const [cssStyle, transform] = this.getStyle(itemSetting);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_runtime_layout_item__WEBPACK_IMPORTED_MODULE_4__["default"], Object.assign({ css: cssStyle, style: { transform }, className: mergedClass, layoutId: layoutId, layoutItemId: layoutItem.id, forceAspectRatio: _utils__WEBPACK_IMPORTED_MODULE_2__.shouldUseAspectRatio(itemSetting), aspectRatio: ratio, onClick: this.props.onClick, autoHeight: heightMode === _types__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Auto }, oneByOneAnimationProps)));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/runtime/layout.tsx":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/runtime/layout.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./row */ "./jimu-layouts/lib/row-layout/runtime/row.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/row-layout/types.ts");
/** @jsx jsx */






class RowLayout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.onResize = (width, height) => {
            var _a;
            if (this.props.browserSizeMode !== this.props.mainSizeMode) {
                return;
            }
            if (width === 0 && height === 0) {
                return;
            }
            const { widgetId } = this.props;
            if (((_a = window.runtimeInfo.widgets) === null || _a === void 0 ? void 0 : _a[widgetId]) != null) {
                window.runtimeInfo.widgets[widgetId].height = height;
            }
            else {
                window.runtimeInfo.widgets[widgetId] = { height };
            }
        };
        this.handleDebounceResize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(this.onResize, 200);
    }
    findExtension() {
        const exts = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().getExtensions(`${jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer}`);
        if ((exts === null || exts === void 0 ? void 0 : exts.length) > 0) {
            const ext = exts.find(item => item.layoutType ===
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.RowLayout);
            this.layoutTransform = ext === null || ext === void 0 ? void 0 : ext.transformLayout;
        }
    }
    collectRowItems() {
        var _a;
        const content = (_a = this.finalLayout.order) !== null && _a !== void 0 ? _a : [];
        const rows = [];
        let row = [];
        let rowIndex = 0;
        rows.push(row);
        content.forEach((itemId) => {
            if (this.finalLayout.content[itemId].isPending) {
                return;
            }
            const bbox = this.finalLayout.content[itemId].bbox;
            const left = parseInt(bbox.left, 10);
            const rowNum = Math.floor(left / _types__WEBPACK_IMPORTED_MODULE_5__.TOTAL_COLS);
            if (rowNum > rowIndex) {
                row = [];
                rowIndex = rowNum;
                rows.push(row);
            }
            row.push(itemId);
        });
        return rows;
    }
    transform() {
        const { layout, layouts, browserSizeMode, mainSizeMode } = this.props;
        if (this.layoutTransform == null) {
            this.findExtension();
        }
        let targetLayout = layout;
        if (layouts[browserSizeMode] !== layout.id &&
            this.layoutTransform != null) {
            targetLayout = this.layoutTransform(layout, mainSizeMode, browserSizeMode, _utils__WEBPACK_IMPORTED_MODULE_3__.getAppConfig());
        }
        this.finalLayout = targetLayout;
        this.numOfRows = this.collectRowItems().length;
    }
    createRow() {
        const { layout, layouts } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_row__WEBPACK_IMPORTED_MODULE_2__.Row, { layouts: layouts, layout: layout, transformedLayout: this.finalLayout, isMultiRow: this.finalLayout !== layout || this.numOfRows > 1 }));
    }
    render() {
        var _a, _b;
        const { layout, className } = this.props;
        const layoutSetting = (_a = layout.setting) !== null && _a !== void 0 ? _a : _default_setting__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_ROW_LAYOUT_SETTING;
        const style = (_b = layoutSetting.style) !== null && _b !== void 0 ? _b : _default_setting__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_ROW_LAYOUT_SETTING.style;
        this.transform();
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('layout d-flex', className), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          width: 100%;
          padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(style.padding)};
        `, "data-layoutid": layout.id },
            this.createRow(),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: this.handleDebounceResize })));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_utils__WEBPACK_IMPORTED_MODULE_3__.mapStateToLayoutProps)(RowLayout));


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/runtime/row.tsx":
/*!*****************************************************!*\
  !*** ./jimu-layouts/lib/row-layout/runtime/row.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Row: () => (/* binding */ Row)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./layout-item */ "./jimu-layouts/lib/row-layout/runtime/layout-item.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/row-layout/utils.ts");
/* harmony import */ var _default_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../default-setting */ "./jimu-layouts/lib/row-layout/default-setting.ts");
/** @jsx jsx */






class Row extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.flipLeftRight = _utils__WEBPACK_IMPORTED_MODULE_2__.isRTL();
    }
    collectBounds() {
        var _a;
        const { transformedLayout } = this.props;
        const content = (_a = transformedLayout.order) !== null && _a !== void 0 ? _a : [];
        this.childRects = [];
        content.forEach(itemId => {
            var _a, _b;
            if (transformedLayout.content[itemId].isPending) {
                return;
            }
            const bbox = (_b = (_a = transformedLayout.content) === null || _a === void 0 ? void 0 : _a[itemId]) === null || _b === void 0 ? void 0 : _b.bbox;
            if (bbox != null) {
                this.childRects.push({
                    layoutId: transformedLayout.id,
                    id: itemId,
                    left: parseInt(bbox.left, 10),
                    width: parseInt(bbox.width, 10),
                    height: parseInt(bbox.height, 10)
                });
            }
        });
        return this.childRects.sort((a, b) => a.left - b.left);
    }
    getConfig() {
        var _a;
        const { layout } = this.props;
        return (_a = layout.setting) !== null && _a !== void 0 ? _a : _default_setting__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_ROW_LAYOUT_SETTING;
    }
    createItem(childRects, index, layoutStyle) {
        var _a;
        const { transformedLayout, isMultiRow } = this.props;
        // const { isDragging, draggingItemId, dragOutOfBoundary } = this.state;
        const config = this.getConfig();
        const childRect = childRects[index];
        const gutter = (_a = config.space) !== null && _a !== void 0 ? _a : 0;
        let offset;
        if (index === 0) {
            offset = childRect.left;
        }
        else {
            const previousBBox = childRects[index - 1];
            offset = childRect.left - previousBBox.left - previousBBox.width;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_item__WEBPACK_IMPORTED_MODULE_1__["default"], { key: `${childRect.layoutId}_${childRect.id}`, offset: offset, gutter: gutter, span: childRect.width, isMultiRow: isMultiRow, layoutId: transformedLayout.id, layoutItemId: childRect.id, layoutItem: transformedLayout.content[childRect.id], alignItems: layoutStyle.alignItems }));
    }
    render() {
        var _a, _b;
        const { layout, className } = this.props;
        this.collectBounds();
        const content = this.childRects;
        const config = this.getConfig();
        const layoutStyle = (_a = config.style) !== null && _a !== void 0 ? _a : {};
        const gutter = (_b = config.space) !== null && _b !== void 0 ? _b : 0;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_3__.PageContext.Consumer, null, (props) => {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('row-layout', className, {
                    'row-rtl': this.flipLeftRight
                }), css: _utils__WEBPACK_IMPORTED_MODULE_4__.ROW_STYLE, "data-layoutid": layout.id },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                  width: 100%;
                  max-width: ${props.maxWidth > 0
                        ? `${props.maxWidth}px`
                        : 'none'};
                ` },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                    position: relative;
                    height: 100%;
                    margin-left: ${-gutter / 2}px;
                    margin-right: ${-gutter / 2}px;
                    display: flex;
                    flex-direction: column;
                  ` }, content.length > 0 && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.IntersectionContext.Provider, { value: { monitor: false } },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.OneByOneAnimation, { oid: layout.id, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('row h-100 m-0', {
                                'flex-nowrap': !this.props.isMultiRow
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                          position: relative;
                          height: 100%;
                          overflow: ${this.props.isMultiRow ? 'auto' : 'unset'};
                        ` }, content.map((_, index) => this.createItem(content, index, layoutStyle)))))))));
        }));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/types.ts":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/row-layout/types.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MIN_SPAN: () => (/* binding */ MIN_SPAN),
/* harmony export */   TOTAL_COLS: () => (/* binding */ TOTAL_COLS)
/* harmony export */ });
const MIN_SPAN = 2;
const TOTAL_COLS = 12;


/***/ }),

/***/ "./jimu-layouts/lib/row-layout/utils.ts":
/*!**********************************************!*\
  !*** ./jimu-layouts/lib/row-layout/utils.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ROW_STYLE: () => (/* binding */ ROW_STYLE),
/* harmony export */   calItemHeight: () => (/* binding */ calItemHeight),
/* harmony export */   flipRowItemPos: () => (/* binding */ flipRowItemPos)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/row-layout/types.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");



const ROW_STYLE = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  width: 100%;
  display: flex;
  justify-content: center;

  .offset-1 {
    margin-left: 8.33333%;
    margin-right: 0;
  }
  .offset-2 {
    margin-left: 16.66667%;
    margin-right: 0;
  }
  .offset-3 {
    margin-left: 25%;
    margin-right: 0;
  }
  .offset-4 {
    margin-left: 33.33333%;
    margin-right: 0;
  }
  .offset-5 {
    margin-left: 41.66667%;
    margin-right: 0;
  }
  .offset-6 {
    margin-left: 50%;
    margin-right: 0;
  }
  .offset-7 {
    margin-left: 58.33333%;
    margin-right: 0;
  }
  .offset-8 {
    margin-left: 66.66667%;
    margin-right: 0;
  }
  .offset-9 {
    margin-left: 75%;
    margin-right: 0;
  }
  .offset-10 {
    margin-left: 83.33333%;
    margin-right: 0;
  }
  .offset-11 {
    margin-left: 91.66667%;
    margin-right: 0;
  }
`;
function flipRowItemPos(bbox) {
    const result = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(bbox);
    return result.set('left', _types__WEBPACK_IMPORTED_MODULE_1__.TOTAL_COLS - parseInt(bbox.left, 10) - parseInt(bbox.width, 10));
}
function calItemHeight(itemSetting, bbox, isMultiRow) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
    if (isMultiRow) {
        return {
            height: ((_a = itemSetting.autoProps) === null || _a === void 0 ? void 0 : _a.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto ? 'auto' : bbox.height,
            alignSelf: (_c = (_b = itemSetting.style) === null || _b === void 0 ? void 0 : _b.alignSelf) !== null && _c !== void 0 ? _c : 'flex-start'
        };
    }
    // 1. aspect ratio
    if (itemSetting.heightMode === 'ratio') {
        return { alignSelf: (_e = (_d = itemSetting.style) === null || _d === void 0 ? void 0 : _d.alignSelf) !== null && _e !== void 0 ? _e : 'flex-start' };
    }
    // 2. use autoProps.height first
    if (((_f = itemSetting.autoProps) === null || _f === void 0 ? void 0 : _f.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto) {
        return { height: 'auto', alignSelf: (_h = (_g = itemSetting.style) === null || _g === void 0 ? void 0 : _g.alignSelf) !== null && _h !== void 0 ? _h : 'flex-start' };
    }
    else if (((_j = itemSetting.autoProps) === null || _j === void 0 ? void 0 : _j.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
        return { height: bbox.height, alignSelf: (_l = (_k = itemSetting.style) === null || _k === void 0 ? void 0 : _k.alignSelf) !== null && _l !== void 0 ? _l : 'flex-start' };
    }
    else if (((_m = itemSetting.autoProps) === null || _m === void 0 ? void 0 : _m.height) === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch) {
        return { alignSelf: 'stretch' };
    }
    // 3. back compatible, use setting.heightMode
    if (itemSetting.heightMode === 'fit') {
        return { alignSelf: 'stretch' };
    }
    else if (parseFloat(bbox.height) > 0) {
        return { height: bbox.height, alignSelf: (_p = (_o = itemSetting.style) === null || _o === void 0 ? void 0 : _o.alignSelf) !== null && _p !== void 0 ? _p : 'flex-start' };
    }
    return { alignSelf: 'stretch' };
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/layout-entry.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/runtime/layout-entry.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _layout_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../layout-factory */ "./jimu-layouts/lib/layout-factory.ts");



class LayoutEntry extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    render() {
        const { layout } = this.props;
        if (!layout) {
            return null;
        }
        const LayoutElement = (0,_layout_factory__WEBPACK_IMPORTED_MODULE_2__.findLayoutViewer)(layout.type || jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout);
        if (!LayoutElement) {
            // console.error('Unkonw layout type.', layout.type);
            return null;
        }
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(LayoutElement, Object.assign({}, this.props));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_utils__WEBPACK_IMPORTED_MODULE_1__.mapStateToLayoutProps)(LayoutEntry));


/***/ }),

/***/ "./jimu-layouts/lib/runtime/layout-item-hook/use-liveview-playid.ts":
/*!**************************************************************************!*\
  !*** ./jimu-layouts/lib/runtime/layout-item-hook/use-liveview-playid.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useLiveviewPlayId: () => (/* binding */ useLiveviewPlayId)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");


/**
 * Generate playId when the whole page's animation is played in live view mode.
 * 1. page is activated
 *
 * @param option
 * @returns
 */
function useLiveviewPlayId(type, hasParentAnimation) {
    const [liveViewPlayId, setLiveViewPlayId] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(null);
    const isPageVisible = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.PageVisibilityContext);
    const visibleRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(false);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        // visible -> invisible or invisible -> visible
        if (type != null && !hasParentAnimation && visibleRef.current !== isPageVisible) {
            visibleRef.current = isPageVisible;
            setLiveViewPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
        }
    }, [isPageVisible, hasParentAnimation, type]);
    const resetPlayId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setLiveViewPlayId(null);
    }, []);
    return [
        liveViewPlayId,
        !isPageVisible,
        resetPlayId
    ];
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/layout-item.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/runtime/layout-item.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ LayoutItem)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../search */ "./jimu-layouts/lib/search/index.ts");
/* harmony import */ var _widget_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./widget-renderer */ "./jimu-layouts/lib/runtime/widget-renderer.tsx");
/* harmony import */ var _section_renderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./section-renderer */ "./jimu-layouts/lib/runtime/section-renderer.tsx");
/* harmony import */ var _layout_item_hook_use_liveview_playid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./layout-item-hook/use-liveview-playid */ "./jimu-layouts/lib/runtime/layout-item-hook/use-liveview-playid.ts");
/* harmony import */ var _use_viewport_intersection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../use-viewport-intersection */ "./jimu-layouts/lib/use-viewport-intersection.ts");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */









function findInnerLayoutId(state, layoutId, layoutItemId) {
    var _a;
    const layoutItem = state.appConfig.layouts[layoutId].content[layoutItemId];
    if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widgetJson = state.appConfig.widgets[layoutItem.widgetId]; // may be a placeholder
        const sizeModeLayout = (_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.layouts) === null || _a === void 0 ? void 0 : _a.DEFAULT;
        if (sizeModeLayout) {
            return sizeModeLayout[state.browserSizeMode];
        }
    }
    return null;
}
/* eslint-disable react-hooks/exhaustive-deps */
function LayoutItem(props) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j;
    const stateProps = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => mapStateToProps(state, props), jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.shallowEqual);
    const isPrintPreview = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => { var _a, _b; return (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.isPrintPreview) !== null && _b !== void 0 ? _b : false; });
    const allProps = Object.assign(Object.assign({}, props), stateProps);
    const refObj = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const { layoutId, layoutItemId, layoutItem } = allProps;
    const { className, children, id, isLastChild } = allProps, otherProps = __rest(allProps, ["className", "children", "id", "isLastChild"]);
    const isWidget = (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget;
    const isSection = (layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section;
    const { effect, oneByOneEffect, hoverEffect } = !isPrintPreview ? ((_b = (_a = allProps.layoutItem) === null || _a === void 0 ? void 0 : _a.setting) !== null && _b !== void 0 ? _b : {}) : {};
    let effectType = (_c = effect === null || effect === void 0 ? void 0 : effect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView]) === null || _c === void 0 ? void 0 : _c.type;
    effectType = effectType && effectType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None ? effectType : null;
    let oneByOneEffectType = (_d = oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView]) === null || _d === void 0 ? void 0 : _d.type;
    oneByOneEffectType = oneByOneEffectType && oneByOneEffectType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None ? oneByOneEffectType : null;
    /* eslint-disable @typescript-eslint/no-unused-vars */
    const [mounted, setMounted] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [animationContext, setAnimationContext] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState({
        setting: oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView],
        playId: null,
        oid: stateProps.innerLayoutId,
        revert: null
    });
    const isInViewport = (0,_use_viewport_intersection__WEBPACK_IMPORTED_MODULE_7__.useViewportIntersection)(refObj.current, allProps.watchViewportVisibility);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        setMounted(true);
    }, []);
    const { setting: parentAnimationSetting } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext);
    const [asOnePlayId, asOneRevert, onAsOneAnimationEnd] = (0,_layout_item_hook_use_liveview_playid__WEBPACK_IMPORTED_MODULE_6__.useLiveviewPlayId)(effectType, (parentAnimationSetting === null || parentAnimationSetting === void 0 ? void 0 : parentAnimationSetting.type) != null && parentAnimationSetting.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None);
    const [oneByOnePlayId, oneByOneRevert, onOnebyOneAnimationEnd] = (0,_layout_item_hook_use_liveview_playid__WEBPACK_IMPORTED_MODULE_6__.useLiveviewPlayId)(oneByOneEffectType, (parentAnimationSetting === null || parentAnimationSetting === void 0 ? void 0 : parentAnimationSetting.type) != null && parentAnimationSetting.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        // no as one playId, set onebyone directly
        if (asOnePlayId == null && oneByOnePlayId) {
            setAnimationContext({
                setting: oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView],
                playId: oneByOnePlayId,
                oid: stateProps.innerLayoutId,
                revert: oneByOneRevert,
                onContextAnimationEnd: oneByOneRevert // no need to reset animation context if it is revert
                    ? null
                    : () => {
                        onOnebyOneAnimationEnd();
                        setAnimationContext({
                            setting: oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView],
                            oid: stateProps.innerLayoutId,
                            playId: -1
                        });
                    }
            });
        }
    }, [asOnePlayId, oneByOnePlayId]);
    const handleSingleAnimationStart = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        var _a;
        // maybe there is no one by one animation, but some child element has its own animation
        const setting = oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
        const revert = ((_a = setting === null || setting === void 0 ? void 0 : setting.option) === null || _a === void 0 ? void 0 : _a.start) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationStartMode.AfterPrevious;
        setAnimationContext({
            setting,
            playId: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)(),
            oid: stateProps.innerLayoutId,
            revert,
            onContextAnimationEnd: revert
                ? null
                : () => {
                    setAnimationContext({ setting, oid: stateProps.innerLayoutId, playId: -1 });
                }
        });
    }, [oneByOneEffectType]);
    const handleSingleAnimationEnd = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        var _a;
        const setting = oneByOneEffect === null || oneByOneEffect === void 0 ? void 0 : oneByOneEffect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView];
        // only plays when start mode is "after previous"
        if (((_a = setting === null || setting === void 0 ? void 0 : setting.option) === null || _a === void 0 ? void 0 : _a.start) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationStartMode.AfterPrevious) {
            setAnimationContext({
                setting,
                playId: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)(),
                oid: stateProps.innerLayoutId,
                revert: false,
                onContextAnimationEnd: () => {
                    setAnimationContext({ setting, oid: stateProps.innerLayoutId, playId: -1 });
                }
            });
        }
        if (asOnePlayId > 0) { // reset the playId if this animation is triggered by asOnePlayId
            onAsOneAnimationEnd === null || onAsOneAnimationEnd === void 0 ? void 0 : onAsOneAnimationEnd();
        }
    }, [oneByOneEffectType, asOnePlayId]);
    if (!allProps.layoutItem || (isSection && !layoutItem.sectionId)) {
        return null;
    }
    // const effectType = effect ? (visible ? effect?.[AnimationTriggerType.ScrollIntoView]?.type: AnimationType.FadeOut) : null;
    const effectOption = (_e = effect === null || effect === void 0 ? void 0 : effect[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationTriggerType.ScrollIntoView]) === null || _e === void 0 ? void 0 : _e.option;
    const rotate = (_j = (_h = (_g = (_f = layoutItem.setting) === null || _f === void 0 ? void 0 : _f.style) === null || _g === void 0 ? void 0 : _g.transform) === null || _h === void 0 ? void 0 : _h.rotate) !== null && _j !== void 0 ? _j : 0;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_8__.ViewportVisibilityContext.Provider, { value: isInViewport },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationComponent, { id: id, parentId: layoutId, type: effectType, configType: effectOption === null || effectOption === void 0 ? void 0 : effectOption.configType, direction: effectOption === null || effectOption === void 0 ? void 0 : effectOption.direction, revert: asOneRevert, delay: props.delay, isLastChild: isLastChild, playId: asOnePlayId, onAnimationStart: handleSingleAnimationStart, onAnimationEnd: handleSingleAnimationEnd, ref: refObj, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
          ${(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getHoverStyle)(hoverEffect === null || hoverEffect === void 0 ? void 0 : hoverEffect.type, hoverEffect === null || hoverEffect === void 0 ? void 0 : hoverEffect.setting)};
          position: relative;
          overflow: visible;
          min-width: ${_types__WEBPACK_IMPORTED_MODULE_1__.MIN_LAYOUT_ITEM_SIZE}px;
          min-height: ${_types__WEBPACK_IMPORTED_MODULE_1__.MIN_LAYOUT_ITEM_SIZE}px;
        `, style: props.style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('d-flex layout-item', className, {
                'is-widget': isWidget,
                'is-section': isSection
            }), "data-layoutitemid": layoutItemId, "data-layoutid": layoutId },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext.Provider, { value: animationContext },
                isWidget && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_renderer__WEBPACK_IMPORTED_MODULE_4__.WidgetRenderer, Object.assign({ rotate: rotate }, otherProps)),
                isSection && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_section_renderer__WEBPACK_IMPORTED_MODULE_5__.SectionRenderer, Object.assign({ rotate: rotate }, otherProps))),
            props.children)));
}
function mapStateToProps(state, ownProps) {
    const layoutItemProps = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.mapStateToLayoutItemProps)(state, ownProps);
    if (!layoutItemProps.layoutItem) {
        return layoutItemProps;
    }
    if (layoutItemProps.layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const { layoutId, layoutItemId } = ownProps;
        const innerLayoutId = findInnerLayoutId(state, layoutId, layoutItemId);
        const result = Object.assign({}, layoutItemProps);
        if (innerLayoutId) {
            result.innerLayoutId = innerLayoutId;
        }
        return result;
    }
    const sectionProps = (0,_search__WEBPACK_IMPORTED_MODULE_3__.getSectionInfo)(state, layoutItemProps.layoutItem.sectionId);
    return Object.assign(Object.assign({}, layoutItemProps), sectionProps);
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/page-body.tsx":
/*!************************************************!*\
  !*** ./jimu-layouts/lib/runtime/page-body.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageBody: () => (/* binding */ PageBody)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/runtime/layout-entry.tsx");
/* harmony import */ var _search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../search */ "./jimu-layouts/lib/search/index.ts");
/* harmony import */ var _common_page_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/page-util */ "./jimu-layouts/lib/common/page-util.ts");
/* harmony import */ var _controller_panel_runtime_group__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../controller-panel/runtime/group */ "./jimu-layouts/lib/controller-panel/runtime/group.tsx");
/** @jsx jsx */






/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable react-hooks/exhaustive-deps */
function PageBody(props) {
    const { pageJson, visible, pageContext, browserSizeMode, isPrintPreview, headerFooterHeight } = props;
    const [playId, setPlayId] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState();
    const layout = pageJson.layout;
    /* eslint-disable react-hooks/exhaustive-deps */
    const pageHeight = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return (0,_common_page_util__WEBPACK_IMPORTED_MODULE_4__.computePageHeight)(pageJson, headerFooterHeight);
    }, [headerFooterHeight]);
    const oneByOneEffect = !isPrintPreview && pageJson.oneByOneEffect && pageJson.oneByOneEffect.type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None ? pageJson.oneByOneEffect : null;
    // const effectType = oneByOneEffect ? (visible ? oneByOneEffect.type : AnimationType.FadeOut) : null;
    const revert = oneByOneEffect ? (!visible) : null;
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (oneByOneEffect) {
            setPlayId((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getNextAnimationId)());
        }
    }, [visible]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        var _a;
        if (visible && layout) {
            // add scrollable class name to body if page is scrollable
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const layoutId = layout[appConfig.mainSizeMode];
            const layoutType = (_a = appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.type;
            const htmlNode = document.getElementsByTagName('html')[0];
            if (layoutType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
                htmlNode.classList.add('scrollable');
            }
            else {
                htmlNode.classList.remove('scrollable');
            }
        }
    }, [visible]);
    let maxWidth;
    if (pageJson.mode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.PageMode.FitWindow && pageJson.maxWidth > 0) {
        maxWidth = pageJson.maxWidth;
    }
    const pageContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
        let rootLayoutId;
        if (pageJson.layout) {
            rootLayoutId = _search__WEBPACK_IMPORTED_MODULE_3__.findLayoutId(pageJson.layout, browserSizeMode, state.appConfig.mainSizeMode);
        }
        return Object.assign(Object.assign({}, pageContext), { maxWidth, 
            // visible,
            viewOnly: true, rootLayoutId, pageId: pageJson.id });
    }, [pageContext, maxWidth, pageJson.id]);
    const animationContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return {
            setting: oneByOneEffect,
            revert,
            playId: oneByOneEffect ? playId : null,
            oid: pageContextValue.rootLayoutId,
            onContextAnimationEnd: () => {
                setPlayId(-1);
            }
        };
    }, [oneByOneEffect, revert, playId]);
    if (!layout) {
        return;
    }
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageContext.Provider, { key: pageJson.id, value: pageContextValue },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageVisibilityContext.Provider, { value: visible },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: pageJson.id, "data-pageid": pageJson.id, className: 'page', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
            display: ${visible ? 'flex' : 'none'};
            background-color: ${pageJson.bodyBackgroundColor || 'transparent'};
            height: ${pageHeight};
            flex: 1 0 auto;
            z-index: 1;
          ` },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext.Provider, { value: animationContextValue },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_entry__WEBPACK_IMPORTED_MODULE_2__["default"], { layouts: layout, className: 'w-100 flex-grow-1', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
                margin: 0 auto;
                background-color: transparent;
                z-index: 0;
              ` })),
                browserSizeMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_controller_panel_runtime_group__WEBPACK_IMPORTED_MODULE_5__.ControllerPanelGroup, { pageId: pageJson.id })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/page-footer.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/runtime/page-footer.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageFooter: () => (/* binding */ PageFooter)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/runtime/layout-entry.tsx");
/** @jsx jsx */



function PageFooter(props) {
    var _a, _b;
    const { footerJson, visible, browserSizeMode, theme, mainSizeMode, pageContext, onHeightChange } = props;
    const height = footerJson.height[browserSizeMode] || footerJson.height[mainSizeMode] || 50;
    const layout = footerJson.layout;
    let backgroundIMage;
    if (footerJson.backgroundIMage) {
        if (typeof (footerJson.backgroundIMage) === 'string') {
            backgroundIMage = footerJson.backgroundIMage;
        }
        else if (typeof (footerJson.backgroundIMage) === 'object') {
            backgroundIMage = footerJson.backgroundIMage.url;
        }
    }
    const footerStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      display: ${visible ? 'flex' : 'none'};
      width: 100%;
      min-height: ${Math.round(parseFloat(height))}px;
      height: auto;
      overflow: hidden;
      background-color: ${footerJson.backgroundColor || theme.footer.bg || 'transparent'};
      background-image: ${backgroundIMage};
      background-position: ${footerJson.backgroundPosition};
      color: ${(_a = theme === null || theme === void 0 ? void 0 : theme.footer) === null || _a === void 0 ? void 0 : _a.color};
      z-index: 0;
    `;
    }, [
        visible,
        height,
        footerJson.backgroundColor,
        backgroundIMage,
        footerJson.backgroundPosition,
        (_a = theme === null || theme === void 0 ? void 0 : theme.footer) === null || _a === void 0 ? void 0 : _a.bg,
        (_b = theme === null || theme === void 0 ? void 0 : theme.footer) === null || _b === void 0 ? void 0 : _b.color
    ]);
    const pageContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return Object.assign(Object.assign({}, pageContext), { viewOnly: true });
    }, [pageContext]);
    const handleSizeChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((_, height) => {
        onHeightChange(height);
    }, [onHeightChange]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageContext.Provider, { value: pageContextValue },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageVisibilityContext.Provider, { value: visible },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'footer', css: footerStyle },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_entry__WEBPACK_IMPORTED_MODULE_2__["default"], { layouts: layout, className: 'w-100 flex-grow-1' }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, handleWidth: false, onResize: handleSizeChange })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/page-header.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/runtime/page-header.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PageHeader: () => (/* binding */ PageHeader)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/runtime/layout-entry.tsx");
/** @jsx jsx */



function PageHeader(props) {
    var _a, _b;
    const { headerJson, visible, browserSizeMode, theme, mainSizeMode, pageContext, onHeightChange } = props;
    const height = headerJson.height[browserSizeMode] || headerJson.height[mainSizeMode] || 50;
    const layout = headerJson.layout;
    let backgroundIMage;
    if (headerJson.backgroundIMage) {
        if (typeof (headerJson.backgroundIMage) === 'string') {
            backgroundIMage = headerJson.backgroundIMage;
        }
        else if (typeof (headerJson.backgroundIMage) === 'object') {
            backgroundIMage = headerJson.backgroundIMage.url;
        }
    }
    const headerStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      display: ${visible ? 'flex' : 'none'};
      position: ${headerJson.sticky ? 'sticky' : 'relative'};
      z-index: ${headerJson.sticky ? 2 : '0'};
      top: 0;
      width: 100%;
      min-height: ${Math.round(parseFloat(height))}px;
      height: auto;
      overflow: hidden;
      background-color: ${headerJson.backgroundColor || theme.header.bg || 'transparent'};
      background-image: ${backgroundIMage};
      background-position: ${headerJson.backgroundPosition};
      color: ${(_a = theme === null || theme === void 0 ? void 0 : theme.header) === null || _a === void 0 ? void 0 : _a.color};
      flex: 0 0 auto;
    `;
    }, [
        visible,
        height,
        headerJson.sticky,
        headerJson.backgroundColor,
        backgroundIMage,
        headerJson.backgroundPosition,
        (_a = theme === null || theme === void 0 ? void 0 : theme.header) === null || _a === void 0 ? void 0 : _a.bg,
        (_b = theme === null || theme === void 0 ? void 0 : theme.header) === null || _b === void 0 ? void 0 : _b.color
    ]);
    const pageContextValue = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return Object.assign(Object.assign({}, pageContext), { viewOnly: true });
    }, [pageContext]);
    const handleSizeChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((_, height) => {
        onHeightChange(height);
    }, [onHeightChange]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageContext.Provider, { value: pageContextValue },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageVisibilityContext.Provider, { value: visible },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'header', css: headerStyle },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_layout_entry__WEBPACK_IMPORTED_MODULE_2__["default"], { layouts: layout, className: 'w-100 flex-grow-1' }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, handleWidth: false, onResize: handleSizeChange })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/page-renderer.tsx":
/*!****************************************************!*\
  !*** ./jimu-layouts/lib/runtime/page-renderer.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _fixed_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../fixed-layout/runtime/layout */ "./jimu-layouts/lib/fixed-layout/runtime/layout.tsx");
/* harmony import */ var _flow_layout_layout_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flow-layout/layout-transform */ "./jimu-layouts/lib/flow-layout/layout-transform.ts");
/* harmony import */ var _row_layout_layout_transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../row-layout/layout-transform */ "./jimu-layouts/lib/row-layout/layout-transform.ts");
/* harmony import */ var _grid_layout_layout_transform__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../grid-layout/layout-transform */ "./jimu-layouts/lib/grid-layout/layout-transform.ts");
/* harmony import */ var _flow_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flow-layout/runtime/layout */ "./jimu-layouts/lib/flow-layout/runtime/layout.tsx");
/* harmony import */ var _grid_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../grid-layout/runtime/layout */ "./jimu-layouts/lib/grid-layout/runtime/layout.tsx");
/* harmony import */ var _column_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../column-layout/runtime/layout */ "./jimu-layouts/lib/column-layout/runtime/layout.tsx");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _layout_factory__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../layout-factory */ "./jimu-layouts/lib/layout-factory.ts");
/* harmony import */ var _page_body__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./page-body */ "./jimu-layouts/lib/runtime/page-body.tsx");
/* harmony import */ var _page_header__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./page-header */ "./jimu-layouts/lib/runtime/page-header.tsx");
/* harmony import */ var _page_footer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./page-footer */ "./jimu-layouts/lib/runtime/page-footer.tsx");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _print_preview_tool__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./print-preview-tool */ "./jimu-layouts/lib/runtime/print-preview-tool.tsx");
/** @jsx jsx */















(0,_layout_factory__WEBPACK_IMPORTED_MODULE_9__.registerLayoutViewer)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FixedLayout, _fixed_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_1__["default"]);
(0,_layout_factory__WEBPACK_IMPORTED_MODULE_9__.registerLayoutViewer)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout, _flow_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_5__["default"]);
(0,_layout_factory__WEBPACK_IMPORTED_MODULE_9__.registerLayoutViewer)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.GridLayout, _grid_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_6__["default"]);
(0,_layout_factory__WEBPACK_IMPORTED_MODULE_9__.registerLayoutViewer)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout, _column_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_7__["default"]);
class PageRenderer extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.updateHeaderHeight = (height) => {
            this.setState({ headerHeight: height });
        };
        this.updateFooterHeight = (height) => {
            this.setState({ footerHeight: height });
        };
        this.isMac = () => {
            var _a, _b;
            return ((_b = (_a = window.jimuUA) === null || _a === void 0 ? void 0 : _a.os) === null || _b === void 0 ? void 0 : _b.name) === 'macOS';
        };
        this.state = { headerHeight: 0, footerHeight: 0 };
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().registerExtension({
            epName: jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer,
            extension: new _flow_layout_layout_transform__WEBPACK_IMPORTED_MODULE_2__.FlowLayoutTransformer()
        });
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().registerExtension({
            epName: jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer,
            extension: new _row_layout_layout_transform__WEBPACK_IMPORTED_MODULE_3__.RowLayoutTransformer()
        });
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtensionManager.getInstance().registerExtension({
            epName: jimu_core__WEBPACK_IMPORTED_MODULE_0__.extensionSpec.ExtensionPoints.LayoutTransformer,
            extension: new _grid_layout_layout_transform__WEBPACK_IMPORTED_MODULE_4__.GridLayoutTransformer()
        });
        // these settings will not change during runtime
        this.pageContext = {
            theme: this.props.theme
        };
        if (!window.jimuConfig.isBuilder) {
            if (this.isMac()) {
                this.keyBindings = {
                    'command+keyp': this.handlePrintEvent
                };
            }
            else {
                this.keyBindings = {
                    'ctrl+keyp': this.handlePrintEvent
                };
            }
        }
    }
    componentDidUpdate(prevProps) {
        const previousPageId = getVisiblePageId(prevProps.pageStatus);
        const currentPageId = getVisiblePageId(this.props.pageStatus);
        if (previousPageId !== currentPageId) {
            const htmlNode = document.getElementsByTagName('html')[0];
            htmlNode.scrollTop = 0;
        }
    }
    handlePrintEvent(e) {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.activePrintPreview());
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeQueryObject({ print_preview: String(true) });
        e.cancelBubble = true;
        e.preventDefault();
        e.stopImmediatePropagation();
    }
    render() {
        const { pageStatus, pages, theme, isPrintPreview } = this.props;
        const visiblePageId = getVisiblePageId(pageStatus);
        if (!visiblePageId || !(pages === null || pages === void 0 ? void 0 : pages[visiblePageId])) {
            return null;
        }
        let width = '100%';
        const pageJson = pages[visiblePageId] || {};
        if (pageJson && !isNaN(+pageJson.width)) {
            width = `${+pageJson.width}px`;
        }
        const mergedStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: ${width};
      margin: 0 auto;
      min-height: 100%;
      overflow: auto;
      height: 100%;
      background-color: ${pageJson && pageJson.backgroundColor};

      html.scrollable & {
        height: auto;
        overflow: unset;
        min-height: 100vh;
      }
    `;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'page-renderer d-flex flex-column', css: mergedStyle, ref: el => { this.pageRef = el; }, "data-testid": 'pageRenderer' },
            isPrintPreview && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_print_preview_tool__WEBPACK_IMPORTED_MODULE_14__.PrintPreviewTool, null)),
            this.renderDialog(),
            this.renderHeader(),
            Object.keys(pageStatus).map(pId => this.renderPageBody(pId, theme)),
            this.renderFooter(),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.Keyboard, { bindings: this.keyBindings })));
    }
    renderHeader() {
        if (!this.props.header) {
            return null;
        }
        const { header, headerVisible, browserSizeMode, theme, mainSizeMode } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_page_header__WEBPACK_IMPORTED_MODULE_11__.PageHeader, { headerJson: header, pageContext: this.pageContext, visible: headerVisible, browserSizeMode: browserSizeMode, mainSizeMode: mainSizeMode, theme: theme, onHeightChange: this.updateHeaderHeight }));
    }
    renderFooter() {
        if (!this.props.footer) {
            return null;
        }
        const { footer, footerVisible, browserSizeMode, mainSizeMode, theme } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_page_footer__WEBPACK_IMPORTED_MODULE_12__.PageFooter, { footerJson: footer, pageContext: this.pageContext, visible: footerVisible, browserSizeMode: browserSizeMode, mainSizeMode: mainSizeMode, theme: theme, onHeightChange: this.updateFooterHeight }));
    }
    renderPageBody(renderedPageId, theme) {
        const { pageStatus, pages, isPrintPreview } = this.props;
        const pageJson = pages[renderedPageId];
        if (!pageJson) {
            // page is removed
            return;
        }
        const visible = !!pageStatus[renderedPageId];
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_page_body__WEBPACK_IMPORTED_MODULE_10__.PageBody, { key: pageJson.id, pageJson: pageJson, pageContext: this.pageContext, browserSizeMode: this.props.browserSizeMode, visible: visible, isPrintPreview: isPrintPreview, headerFooterHeight: this.state.headerHeight + this.state.footerHeight }));
    }
    renderDialog() {
        const { dialogId, urlDialogJson, splashDialogJson, isSplashClosed, isPageDlgClosed, pageDialogJson, pageDialogId } = this.props;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
            urlDialogJson && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_8__.PageContext.Provider, { value: Object.assign(Object.assign({}, this.pageContext), { dialogId: dialogId, viewOnly: true }) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppDialog, { dialogJson: urlDialogJson, runtime: true }))),
            !isPageDlgClosed && pageDialogJson && (urlDialogJson === null || urlDialogJson === void 0 ? void 0 : urlDialogJson.id) !== pageDialogJson.id && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_8__.PageContext.Provider, { value: Object.assign(Object.assign({}, this.pageContext), { dialogId: pageDialogId, viewOnly: true }) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppDialog, { dialogJson: pageDialogJson, runtime: true, isOpenByPage: true }))),
            !isSplashClosed && splashDialogJson && (urlDialogJson === null || urlDialogJson === void 0 ? void 0 : urlDialogJson.id) !== splashDialogJson.id && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_builder_page_context__WEBPACK_IMPORTED_MODULE_8__.PageContext.Provider, { value: Object.assign(Object.assign({}, this.pageContext), { dialogId: splashDialogJson.id, viewOnly: true }) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppDialog, { dialogJson: splashDialogJson, runtime: true })))));
    }
}
PageRenderer.displayName = 'RuntimePageRenderer';
const mapStateToProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state) => state.appConfig.pages,
    (state) => state.appConfig.dialogs,
    (state) => state.appConfig.header,
    (state) => state.appConfig.footer,
    (state) => state.browserSizeMode,
    (state) => state.appConfig.mainSizeMode,
    (state) => {
        var _a;
        const realState = window.jimuConfig.isBuilder ? state.appStateInBuilder : state;
        return (_a = realState === null || realState === void 0 ? void 0 : realState.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.dialogInfos;
    },
    (state) => {
        var _a;
        const realState = window.jimuConfig.isBuilder ? state.appStateInBuilder : state;
        return (_a = realState === null || realState === void 0 ? void 0 : realState.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.currentPageId;
    },
    (state) => {
        var _a, _b, _c;
        const realState = window.jimuConfig.isBuilder ? state.appStateInBuilder : state;
        const currentPageId = (_a = realState === null || realState === void 0 ? void 0 : realState.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.currentPageId;
        return (_c = (_b = realState === null || realState === void 0 ? void 0 : realState.appConfig) === null || _b === void 0 ? void 0 : _b.pages[currentPageId]) === null || _c === void 0 ? void 0 : _c.autoOpenDialogId;
    },
    (state) => { var _a, _b; return (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.isPrintPreview) !== null && _b !== void 0 ? _b : false; },
    (_, ownProps) => getVisiblePageId(ownProps.pageStatus),
    (_, ownProps) => ownProps.dialogId
], (pages, dialogs, header, footer, browserSizeMode, mainSizeMode, dialogInfos, currentPageId, pageDlgId, isPrintPreview, pageId, dialogId) => {
    var _a, _b;
    if (!pageId || !pages[pageId]) {
        return {};
    }
    const splashDlgJson = dialogs[Object.keys(dialogs).find(dlgId => dialogs[dlgId].isSplash)];
    return {
        pages: pages,
        header: header,
        headerVisible: !!pages[pageId].header,
        footer: footer,
        footerVisible: !!pages[pageId].footer,
        browserSizeMode: browserSizeMode,
        mainSizeMode: mainSizeMode,
        splashDialogJson: splashDlgJson,
        isSplashClosed: (_a = dialogInfos === null || dialogInfos === void 0 ? void 0 : dialogInfos[splashDlgJson === null || splashDlgJson === void 0 ? void 0 : splashDlgJson.id]) === null || _a === void 0 ? void 0 : _a.isClosed,
        pageDialogId: pageDlgId,
        pageDialogJson: dialogs[pageDlgId],
        isPageDlgClosed: (_b = dialogInfos === null || dialogInfos === void 0 ? void 0 : dialogInfos[currentPageId + '-' + pageDlgId]) === null || _b === void 0 ? void 0 : _b.isClosed,
        urlDialogJson: dialogs[dialogId],
        isPrintPreview
    };
});
function getVisiblePageId(pageStatus) {
    return Object.keys(pageStatus).find(pid => pageStatus[pid]);
}
// connect<IMapStateToProps, IMapDispatchToProps, ICompProps, IReduxState>(mapStateToProps, mapDispatchToProps)
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToProps)((0,jimu_theme__WEBPACK_IMPORTED_MODULE_13__.withTheme)(PageRenderer)));


/***/ }),

/***/ "./jimu-layouts/lib/runtime/print-preview-tool.tsx":
/*!*********************************************************!*\
  !*** ./jimu-layouts/lib/runtime/print-preview-tool.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PrintPreviewTool: () => (/* binding */ PrintPreviewTool)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/** @jsx jsx */



const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
  display: flex;
  height: 64px;
  background: var(--dark-700);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1500;

  .jimu-btn {
    padding-left: 2rem;
    padding-right: 2rem;
  }

  .label {
    white-space: nowrap;
  }

  @media print {
    & {
      display: none;
    }
  }
`;
function PrintPreviewTool() {
    const intl = jimu_core__WEBPACK_IMPORTED_MODULE_0__.i18n.getIntl();
    const btnRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        btnRef.current.focus();
    }, []);
    const formatMessage = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((id) => {
        return intl.formatMessage({ id });
    }, [intl]);
    const handleClose = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeQueryObject({ print_preview: null });
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.quitPrintPreview());
    });
    const invokeBrowserPrint = jimu_core__WEBPACK_IMPORTED_MODULE_0__.hooks.useEventCallback(() => {
        window.print();
    });
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'print-preview-tool shadow-lg', css: style },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex justify-content-center align-items-center flex-grow-1' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: btnRef, "aria-label": formatMessage('printCurrentPage'), type: 'primary', onClick: invokeBrowserPrint }, formatMessage('printCurrentPage'))),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, type: 'tertiary', "aria-label": formatMessage('close'), onClick: handleClose },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_1__.CloseOutlined, { color: 'var(--white)' }))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-auto-play.tsx":
/*!********************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-auto-play.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoPlay: () => (/* binding */ useAutoPlay)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");
/** @jsx jsx */


function nextView(sectionId, loop) {
    var _a, _b;
    const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    const views = state.appConfig.sections[sectionId].views;
    let navInfo = (_b = (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.sectionNavInfos) === null || _b === void 0 ? void 0 : _b[sectionId];
    const currentIndex = (navInfo === null || navInfo === void 0 ? void 0 : navInfo.currentViewId) ? views.indexOf(navInfo.currentViewId) : 0;
    const nextIndex = currentIndex < views.length - 1 ? currentIndex + 1 : 0;
    if (!loop && nextIndex === 0) {
        return false;
    }
    // do not change queryObject when it is auto playing
    if (navInfo) {
        navInfo = navInfo.set('previousViewId', views[currentIndex]).set('currentViewId', views[nextIndex]);
    }
    else {
        navInfo = {
            previousViewId: views[currentIndex],
            currentViewId: views[nextIndex]
        };
    }
    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.sectionNavInfoChanged(sectionId, navInfo));
    return true;
}
function useAutoPlay(props) {
    const { sectionId, autoPlay, interval = _types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_AUTOPLAY_INTERVAL, loop = false } = props;
    const playHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    // const [isPlaying, setIsPlaying] = React.useState<boolean>();
    const isAutoplaySuspendMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        if (!autoPlay) {
            return null;
        }
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design || ((_b = state.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.isPrintPreview);
    });
    const modeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(isAutoplaySuspendMode);
    const stopPlay = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        if (playHandlerRef.current) {
            clearInterval(playHandlerRef.current);
            playHandlerRef.current = null;
        }
    }, []);
    const startPlay = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        stopPlay(); // stop previous auto play
        playHandlerRef.current = setInterval(() => {
            const continued = nextView(sectionId, loop);
            if (!continued) {
                stopPlay();
            }
        }, interval * 1000);
    }, [sectionId, loop, interval, stopPlay]);
    // auto play props change affects
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (!modeRef.current) {
            if (!autoPlay) {
                stopPlay();
                return;
            }
            startPlay();
        }
        return () => {
            stopPlay();
        };
    }, [autoPlay, interval, loop, stopPlay, startPlay]);
    // isDesignMode change affects
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (modeRef.current !== isAutoplaySuspendMode && isAutoplaySuspendMode !== null) {
            modeRef.current = isAutoplaySuspendMode;
            if (isAutoplaySuspendMode) {
                stopPlay();
                return;
            }
            if (autoPlay) {
                startPlay();
            }
        }
    }, [isAutoplaySuspendMode, startPlay, stopPlay, autoPlay]);
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-content.tsx":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-content.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionContent: () => (/* binding */ SectionContent)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _view_content__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./view-content */ "./jimu-layouts/lib/runtime/view-content.tsx");
/** @jsx jsx */


function SectionContent(props) {
    var _a, _b;
    const { views, navInfo, animationPreview, playMode, currentIndex, previousIndex, progress, loop, viewTransition } = props;
    const isPreviewOneByOne = animationPreview && playMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationPlayMode.OneByOne;
    const { setting, playId } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext);
    const isDesignMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        if (!setting || setting.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationType.None) {
            return true;
        }
        return ((_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
    });
    // isDesignMode === false
    const animationSetting = !isDesignMode || isPreviewOneByOne || ((navInfo === null || navInfo === void 0 ? void 0 : navInfo.playId) && (navInfo === null || navInfo === void 0 ? void 0 : navInfo.withOneByOne)) ? setting : null;
    const animationContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return {
            // trigger: AnimationTriggerType.Manual,
            setting: animationSetting,
            playId: isPreviewOneByOne ? playId : null
            // inheritedOneByOneSetting: null,
            // depth: depth + 1,
            // onAnimationEnd
        };
    }, [animationSetting, isPreviewOneByOne, playId]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.AnimationContext.Provider, { value: animationContext },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'section-content' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.TransitionContainer, { useProgress: (_a = navInfo === null || navInfo === void 0 ? void 0 : navInfo.useProgress) !== null && _a !== void 0 ? _a : false, useStep: (_b = navInfo === null || navInfo === void 0 ? void 0 : navInfo.useStep) !== null && _b !== void 0 ? _b : false, previousIndex: previousIndex, currentIndex: currentIndex, progress: progress, transitionType: viewTransition === null || viewTransition === void 0 ? void 0 : viewTransition.type, direction: viewTransition === null || viewTransition === void 0 ? void 0 : viewTransition.direction, playId: navInfo === null || navInfo === void 0 ? void 0 : navInfo.playId, withOneByOne: navInfo === null || navInfo === void 0 ? void 0 : navInfo.withOneByOne, loop: loop }, views.map((viewId) => {
                const isActive = viewId === views[currentIndex];
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_view_content__WEBPACK_IMPORTED_MODULE_1__.ViewContent, { key: viewId, viewId: viewId, isActive: isActive, layoutEntryComponent: props.layoutEntryComponent, viewVisibilityContext: props.viewVisibilityContext }));
            })))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-nav.tsx":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-nav.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionNav: () => (/* binding */ SectionNav)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/outlined/directional/left */ "./jimu-icons/outlined/directional/left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/outlined/directional/right */ "./jimu-icons/outlined/directional/right.tsx");
/** @jsx jsx */



function SectionNav(props) {
    var _a, _b, _c;
    const { sectionId, currentIndex, numOfViews, onCurrentViewChange } = props;
    const arrowsNav = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return (_a = state.appConfig.sections[sectionId]) === null || _a === void 0 ? void 0 : _a.arrowsNav;
    });
    const dotsNav = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        return (_a = state.appConfig.sections[sectionId]) === null || _a === void 0 ? void 0 : _a.dotsNav;
    });
    const dotsNavPosition = (_a = dotsNav === null || dotsNav === void 0 ? void 0 : dotsNav.position) !== null && _a !== void 0 ? _a : 'b';
    const dots = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        const result = [];
        for (let i = 0; i < numOfViews; i++) {
            result.push(i);
        }
        return result;
    }, [numOfViews]);
    const arrowStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      cursor: pointer;
      pointer-events: auto;

      &.disabled {
        cursor: default;
        svg {
          color: var(--light-400);
        }
      }

      &.first {
        left: ${(_a = arrowsNav.offset) !== null && _a !== void 0 ? _a : 0}px;
        top: 50%;
        transform: translateY(-50%);

        &.vertical {
          top: ${(_b = arrowsNav.offset) !== null && _b !== void 0 ? _b : 0}px;
          left: 50%;
          transform: translateX(-50%) rotate(90deg);
        }
      }
      &.second {
        right: ${(_c = arrowsNav.offset) !== null && _c !== void 0 ? _c : 0}px;
        top: 50%;
        transform: translateY(-50%);

        &.vertical {
          bottom: ${(_d = arrowsNav.offset) !== null && _d !== void 0 ? _d : 0}px;
          left: 50%;
          top: auto;
          right: auto;
          transform: translateX(-50%) rotate(90deg);
        }
      }
    `;
    };
    const dotStyle = () => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: absolute;
      display: flex;
      flex-direction: ${dotsNavPosition === 'l' || dotsNavPosition === 'r' ? 'column' : 'row'};
      justify-content: center;
      align-items: center;
      overflow: visible;
      pointer-events: none;
      background: transparent;

      .dot {
        pointer-events: all;
        cursor: pointer;
        border: 1px solid var(--light-500);
        background: var(--light-100);
        width: ${(_a = dotsNav.size) !== null && _a !== void 0 ? _a : 8}px;
        height: ${(_b = dotsNav.size) !== null && _b !== void 0 ? _b : 8}px;

        &.active {
          border-color: var(--white);
          background: var(--primary-500);
          width: ${dotsNav.size > 0 ? dotsNav.size * 1.5 : 12}px;
          height: ${dotsNav.size > 0 ? dotsNav.size * 1.5 : 12}px;
        }

        &.disabled {
          cursor: default;
        }
      }

      &.snap-left {
        height: 100%;
        top: 0;
        left: ${(_c = dotsNav.offset) !== null && _c !== void 0 ? _c : 50}px;
        width: ${(_d = dotsNav.size) !== null && _d !== void 0 ? _d : 8}px;

        > div:not(:first-of-type) {
          margin-top: ${(_e = dotsNav.spacing) !== null && _e !== void 0 ? _e : 10}px;
        }
      }
      &.snap-right {
        height: 100%;
        top: 0;
        right: ${(_f = dotsNav.offset) !== null && _f !== void 0 ? _f : 50}px;
        width: ${(_g = dotsNav.size) !== null && _g !== void 0 ? _g : 8}px;

        > div:not(:first-of-type) {
          margin-top: ${(_h = dotsNav.spacing) !== null && _h !== void 0 ? _h : 10}px;
        }
      }
      &.snap-top {
        width: 100%;
        top: ${(_j = dotsNav.offset) !== null && _j !== void 0 ? _j : 50}px;
        height: ${(_k = dotsNav.size) !== null && _k !== void 0 ? _k : 8}px;

        > div:not(:first-of-type) {
          margin-left: ${(_l = dotsNav.spacing) !== null && _l !== void 0 ? _l : 10}px;
        }
      }
      &.snap-bottom {
        width: 100%;
        bottom: ${(_m = dotsNav.offset) !== null && _m !== void 0 ? _m : 50}px;
        height: ${(_o = dotsNav.size) !== null && _o !== void 0 ? _o : 8}px;

        > div:not(:first-of-type) {
          margin-left: ${(_p = dotsNav.spacing) !== null && _p !== void 0 ? _p : 10}px;
        }
      }
    `;
    };
    const createDot = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((index, isActive) => {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { key: index, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('dot rounded-circle', { active: isActive, disabled: numOfViews <= 1 }), onClick: isActive ? undefined : () => { onCurrentViewChange(index); } }));
    }, [onCurrentViewChange, numOfViews]);
    const previousView = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const nextIndex = currentIndex > 0 ? currentIndex - 1 : numOfViews - 1;
        onCurrentViewChange(nextIndex);
    }, [currentIndex, numOfViews, onCurrentViewChange]);
    const nextView = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        const nextIndex = currentIndex < numOfViews - 1 ? currentIndex + 1 : 0;
        onCurrentViewChange(nextIndex);
    }, [currentIndex, numOfViews, onCurrentViewChange]);
    const hasPreviousView = numOfViews > 1 && currentIndex !== 0;
    const hasNextView = numOfViews > 1 && currentIndex !== numOfViews - 1;
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
        (arrowsNav === null || arrowsNav === void 0 ? void 0 : arrowsNav.visible) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('arrows-nav first', {
                    vertical: arrowsNav.direction === 'v',
                    disabled: !hasPreviousView
                }), css: arrowStyle(), onClick: hasPreviousView ? previousView : null },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_1__.LeftOutlined, { autoFlip: arrowsNav.direction !== 'v', size: (_b = arrowsNav.size) !== null && _b !== void 0 ? _b : 24 })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('arrows-nav second', {
                    vertical: arrowsNav.direction === 'v',
                    disabled: !hasNextView
                }), css: arrowStyle(), onClick: hasNextView ? nextView : null },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_2__.RightOutlined, { autoFlip: arrowsNav.direction !== 'v', size: (_c = arrowsNav.size) !== null && _c !== void 0 ? _c : 24 })))),
        (dotsNav === null || dotsNav === void 0 ? void 0 : dotsNav.visible) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('dots-nav', {
                'snap-left': dotsNavPosition === 'l',
                'snap-top': dotsNavPosition === 't',
                'snap-right': dotsNavPosition === 'r',
                'snap-bottom': dotsNavPosition === 'b'
            }), css: dotStyle() }, dots.map((index) => createDot(index, index === currentIndex))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-renderer-base.tsx":
/*!************************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-renderer-base.tsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionRendererBase: () => (/* binding */ SectionRendererBase)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _section_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./section-content */ "./jimu-layouts/lib/runtime/section-content.tsx");
/* harmony import */ var _section_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./section-nav */ "./jimu-layouts/lib/runtime/section-nav.tsx");
/* harmony import */ var _section_auto_play__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./section-auto-play */ "./jimu-layouts/lib/runtime/section-auto-play.tsx");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */






function getStyle(forceAspectRatio, aspectRatio) {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
    overflow: visible;
    position: relative;
    aspect-ratio: ${forceAspectRatio && aspectRatio > 0 ? aspectRatio : null};

    .section-content {
      position: relative;
      overflow: hidden;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .section-view {
      position: absolute;
    }

    .hidden {
      display: none !important;
    }
  `;
}
function SectionRendererBase(props) {
    var _a;
    const { views, navInfo, activeView, animationPreview, playMode, transition, sectionId, autoPlay, focusable = true, interval = _types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_AUTOPLAY_INTERVAL, loop = true, className, sectionStyle, rotate, forceAspectRatio, aspectRatio, layoutEntryComponent, viewVisibilityContext } = props;
    const currentIndexRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const sectionRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const hasFocusRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(false);
    const isSectionFocusedRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(false);
    const blurEventHandlerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    const [interuptAutoplay, setInteruptAutoplay] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const activeViewId = activeView === null || activeView === void 0 ? void 0 : activeView.id;
    const renderInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        var _a;
        let visibleViews = views;
        let currentIndex;
        let previousIndex;
        let progress;
        if (navInfo) {
            visibleViews = (_a = navInfo.visibleViews) !== null && _a !== void 0 ? _a : views;
            if (navInfo.useProgress) {
                progress = navInfo.progress;
                const r = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getIndexFromProgress)(progress, visibleViews.length);
                currentIndex = r.currentIndex;
            }
            else {
                currentIndex = Math.max(0, visibleViews.indexOf(navInfo.currentViewId));
                if (navInfo.previousViewId) {
                    previousIndex = Math.max(0, visibleViews.indexOf(navInfo.previousViewId));
                }
                else {
                    previousIndex = Math.max(0, currentIndex - 1);
                }
            }
        }
        else {
            // TODO remove nav by activeView, use navInfo only
            currentIndex = Math.max(0, visibleViews.indexOf(activeViewId));
            previousIndex = currentIndex;
        }
        currentIndexRef.current = currentIndex;
        return { currentIndex, previousIndex, progress };
    }, [activeViewId, navInfo, views]);
    const _b = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return jimu_ui__WEBPACK_IMPORTED_MODULE_2__.styleUtils.toCSSStyle(sectionStyle);
    }, [sectionStyle]), { transform } = _b, otherStyle = __rest(_b, ["transform"]);
    const rotateStyle = rotate > 0 || rotate < 0 ? `rotateZ(${rotate}deg)` : '';
    let mergedTransform = rotateStyle;
    if (transform) {
        mergedTransform = `${transform} ${rotateStyle}`;
    }
    const onMouseEnter = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setInteruptAutoplay(true);
    }, []);
    const onMouseLeave = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback(() => {
        setInteruptAutoplay(false);
    }, []);
    const onFocus = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        hasFocusRef.current = true;
        isSectionFocusedRef.current = e.target === sectionRef.current;
        if (blurEventHandlerRef.current != null) {
            clearTimeout(blurEventHandlerRef.current);
            blurEventHandlerRef.current = null;
        }
        if (autoPlay) {
            setInteruptAutoplay(true);
        }
    }, [autoPlay]);
    const onBlur = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((e) => {
        hasFocusRef.current = false;
        if (blurEventHandlerRef.current != null) {
            clearTimeout(blurEventHandlerRef.current);
            blurEventHandlerRef.current = null;
        }
        if (autoPlay) {
            blurEventHandlerRef.current = setTimeout(() => {
                setInteruptAutoplay(false);
            }, 500);
        }
    }, [autoPlay]);
    const isAutoPlaying = autoPlay && !interuptAutoplay;
    (0,_section_auto_play__WEBPACK_IMPORTED_MODULE_5__.useAutoPlay)({
        sectionId,
        interval,
        loop,
        autoPlay: isAutoPlaying
    });
    const onCurrentViewChange = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useCallback((nextIndex) => {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.jimuHistory.changeView(sectionId, views[nextIndex]);
    }, [sectionId, views]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(`section-layout layout-item-content w-100 ${(_a = sectionStyle === null || sectionStyle === void 0 ? void 0 : sectionStyle.boxShadow) === null || _a === void 0 ? void 0 : _a.presetStyle}`, className), css: getStyle(forceAspectRatio, aspectRatio), "data-sectionid": sectionId, style: Object.assign(Object.assign({}, otherStyle), { transform: mergedTransform }), onMouseEnter: autoPlay ? onMouseEnter : null, onMouseLeave: autoPlay ? onMouseLeave : null, onTouchStart: autoPlay ? onMouseEnter : null, onTouchEnd: autoPlay ? onMouseLeave : null, onFocus: onFocus, onBlur: onBlur, tabIndex: focusable ? 0 : undefined, ref: sectionRef },
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_section_content__WEBPACK_IMPORTED_MODULE_3__.SectionContent, { views: views, navInfo: navInfo, animationPreview: animationPreview, playMode: playMode, currentIndex: renderInfo.currentIndex, previousIndex: renderInfo.previousIndex, progress: renderInfo.progress, loop: isAutoPlaying && loop, viewTransition: transition, layoutEntryComponent: layoutEntryComponent, viewVisibilityContext: viewVisibilityContext }),
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_section_nav__WEBPACK_IMPORTED_MODULE_4__.SectionNav, { sectionId: sectionId, numOfViews: views.length, currentIndex: renderInfo.currentIndex, onCurrentViewChange: onCurrentViewChange })));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/section-renderer.tsx":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/runtime/section-renderer.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SectionRenderer: () => (/* binding */ SectionRenderer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_entry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./layout-entry */ "./jimu-layouts/lib/runtime/layout-entry.tsx");
/* harmony import */ var _section_renderer_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./section-renderer-base */ "./jimu-layouts/lib/runtime/section-renderer-base.tsx");
/* harmony import */ var _builder_page_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");




class SectionRenderer extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_section_renderer_base__WEBPACK_IMPORTED_MODULE_2__.SectionRendererBase, Object.assign({}, this.props, { layoutEntryComponent: _layout_entry__WEBPACK_IMPORTED_MODULE_1__["default"], viewVisibilityContext: _builder_page_context__WEBPACK_IMPORTED_MODULE_3__.ViewVisibilityContext })));
    }
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/view-content.tsx":
/*!***************************************************!*\
  !*** ./jimu-layouts/lib/runtime/view-content.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ViewContent: () => (/* binding */ ViewContent)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/** @jsx jsx */

// import { ViewVisibilityContext } from '../builder/page-context';


function getBackgroundStyle(view, bgColor) {
    if (!view) {
        return null;
    }
    let backgroundImage = {};
    if (view.backgroundIMage) {
        backgroundImage = typeof view.backgroundIMage === 'string' ? {} : view.backgroundIMage;
    }
    const fillType = view.backgroundPosition ? jimu_ui__WEBPACK_IMPORTED_MODULE_1__.FillType[view.backgroundPosition.toUpperCase()] : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.FillType.FILL;
    let color;
    // for back compatible
    if (view.backgroundColor == null) {
        color = bgColor;
    }
    else if (view.backgroundColor === '') {
        color = 'transparent';
    }
    else {
        color = view.backgroundColor ? view.backgroundColor : '';
    }
    const backgroundConfig = {
        color,
        fillType: fillType,
        image: backgroundImage
    };
    return jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundStyle(backgroundConfig);
}
function ViewContent(props) {
    var _a, _b;
    const { viewId, isActive, layoutEntryComponent, viewVisibilityContext } = props;
    const view = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b;
        return (_b = (_a = state.appConfig) === null || _a === void 0 ? void 0 : _a.views) === null || _b === void 0 ? void 0 : _b[viewId];
    });
    const bgColor = (_b = (_a = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_2__.useTheme)()) === null || _a === void 0 ? void 0 : _a.body) === null || _b === void 0 ? void 0 : _b.bg;
    const LayoutEntry = layoutEntryComponent;
    const ViewVisibilityContext = viewVisibilityContext;
    const [started, setStarted] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const viewVisibility = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useMemo(() => {
        return { isInView: true, isInCurrentView: isActive };
    }, [isActive]);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (isActive && view.lazyLoad && !started) {
            setStarted(true);
        }
    }, [isActive, view.lazyLoad, started]);
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100 d-flex section-view', {
            [jimu_ui__WEBPACK_IMPORTED_MODULE_1__.FOCUSABLE_CONTAINER_CLASS]: isActive
        }), style: getBackgroundStyle(view, bgColor), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `&, .exb-drop-area { pointer-events: ${isActive ? 'auto' : 'none'}; }`, key: viewId, id: `${view.parent}_${view.id}` }, (started || !view.lazyLoad) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null,
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(ViewVisibilityContext.Provider, { value: viewVisibility },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: view === null || view === void 0 ? void 0 : view.layout, isInSection: true, className: 'w-100' }))))));
}


/***/ }),

/***/ "./jimu-layouts/lib/runtime/widget-renderer.tsx":
/*!******************************************************!*\
  !*** ./jimu-layouts/lib/runtime/widget-renderer.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetRenderer: () => (/* binding */ WidgetRenderer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */



class _WidgetRenderer extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.onMouseDown = this.onMouseDown.bind(this);
        this.ref = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.state = { error: null };
    }
    loadWidgetClass() {
        const { widgetId, isClassLoaded } = this.props;
        if (widgetId && !isClassLoaded) {
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetManager.getInstance().loadWidgetClass(widgetId).catch(err => {
                console.log(err);
                this.setState({
                    error: jimu_core__WEBPACK_IMPORTED_MODULE_0__.i18n.getIntl().formatMessage({ id: 'widgetLoadError' })
                });
            });
        }
    }
    componentDidMount() {
        this.loadWidgetClass();
    }
    componentDidUpdate() {
        this.loadWidgetClass();
    }
    /**
     * Must add an extra div to keep the aspect ratio.
     * https://www.w3schools.com/howto/howto_css_aspect_ratio.asp
     */
    renderWidgetContent() {
        const { widgetId, layoutId, layoutItemId, autoWidth, autoHeight, onInitResizeHandler, onInitDragHandler } = this.props;
        let WidgetClass;
        if (widgetId) {
            WidgetClass = jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetManager.getInstance().getWidgetClass(widgetId);
        }
        if (this.state.error) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'widget-content' }, this.state.error);
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('widget-content', { 'd-none': !widgetId }) }, WidgetClass && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(WidgetClass, { widgetId: widgetId, layoutId: layoutId, layoutItemId: layoutItemId, autoWidth: autoWidth, autoHeight: autoHeight, onInitResizeHandler: onInitResizeHandler, onInitDragHandler: onInitDragHandler }))));
    }
    getStyle() {
        const { forceAspectRatio, aspectRatio } = this.props;
        // for app-loader widget only, usable in touch device
        const overflowScrollingStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      -webkit-overflow-scrolling: touch;
    `;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      ${this.props.widgetId === 'app-loader' ? overflowScrollingStyle : ''};
      overflow: ${this.props.canCrossLayoutBoundary ? 'visible' : 'hidden'};
      position: relative;
      aspect-ratio: ${forceAspectRatio && aspectRatio > 0 ? aspectRatio : null};

      .widget-content {
        position: relative;
        height: 100%;
        width: 100%;
        z-index: 0;
      }
    `;
    }
    onMouseDown() {
        var _a;
        // doesn't need to activate placeholder
        if (this.props.widgetId) {
            const state = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
            if (((_a = state.widgetsRuntimeInfo[this.props.widgetId]) === null || _a === void 0 ? void 0 : _a.state) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetState.Active) {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.activateWidget(this.props.widgetId));
            }
        }
    }
    render() {
        var _a, _b;
        const { className, widgetStyle, widgetId, rotate } = this.props;
        const _c = jimu_ui__WEBPACK_IMPORTED_MODULE_2__.styleUtils.toCSSStyle(widgetStyle), { transform } = _c, otherStyle = __rest(_c, ["transform"]);
        const rotateStyle = rotate > 0 || rotate < 0 ? `rotateZ(${rotate}deg)` : '';
        let mergedTransform = rotateStyle;
        if (transform) {
            mergedTransform = `${transform} ${rotateStyle}`;
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(`widget-renderer layout-item-content w-100 ${(_b = (_a = widgetStyle === null || widgetStyle === void 0 ? void 0 : widgetStyle.boxShadow) === null || _a === void 0 ? void 0 : _a.presetStyle) !== null && _b !== void 0 ? _b : ''}`, className), css: this.getStyle(), style: Object.assign(Object.assign({}, otherStyle), { transform: mergedTransform }), onMouseDownCapture: this.onMouseDown, "data-widgetid": widgetId, ref: this.ref },
            this.renderWidgetContent(),
            this.props.children));
    }
}
const WidgetRenderer = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(_utils__WEBPACK_IMPORTED_MODULE_1__.mapStateToWidgetProps)(_WidgetRenderer);


/***/ }),

/***/ "./jimu-layouts/lib/search/contents.ts":
/*!*********************************************!*\
  !*** ./jimu-layouts/lib/search/contents.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   checkIsLayoutInfoInWidget: () => (/* binding */ checkIsLayoutInfoInWidget),
/* harmony export */   findLayoutId: () => (/* binding */ findLayoutId),
/* harmony export */   findLayoutItem: () => (/* binding */ findLayoutItem),
/* harmony export */   findParentLayoutInfo: () => (/* binding */ findParentLayoutInfo),
/* harmony export */   getBlockAnchorPointsInPage: () => (/* binding */ getBlockAnchorPointsInPage),
/* harmony export */   getBrowserSizeModeByLayoutId: () => (/* binding */ getBrowserSizeModeByLayoutId),
/* harmony export */   getBrowserSizeModeByLayoutIdAndWidgetId: () => (/* binding */ getBrowserSizeModeByLayoutIdAndWidgetId),
/* harmony export */   getChildrenContents: () => (/* binding */ getChildrenContents),
/* harmony export */   getContentContainerInfo: () => (/* binding */ getContentContainerInfo),
/* harmony export */   getContentIdInLayoutItem: () => (/* binding */ getContentIdInLayoutItem),
/* harmony export */   getContentLayoutInfosInOneSizeMode: () => (/* binding */ getContentLayoutInfosInOneSizeMode),
/* harmony export */   getContentLayoutItem: () => (/* binding */ getContentLayoutItem),
/* harmony export */   getContentRootContainerInfo: () => (/* binding */ getContentRootContainerInfo),
/* harmony export */   getContentsInContainer: () => (/* binding */ getContentsInContainer),
/* harmony export */   getContentsInContainerRecursive: () => (/* binding */ getContentsInContainerRecursive),
/* harmony export */   getContentsInContainerRecursiveAdv: () => (/* binding */ getContentsInContainerRecursiveAdv),
/* harmony export */   getContentsInLayout: () => (/* binding */ getContentsInLayout),
/* harmony export */   getContentsInLayoutRecursive: () => (/* binding */ getContentsInLayoutRecursive),
/* harmony export */   getContentsInLayoutWithRecrusiveLayouts: () => (/* binding */ getContentsInLayoutWithRecrusiveLayouts),
/* harmony export */   getContentsInTheSameContainer: () => (/* binding */ getContentsInTheSameContainer),
/* harmony export */   getContentsInTheSameRootContainer: () => (/* binding */ getContentsInTheSameRootContainer),
/* harmony export */   getLayoutInfoHoldContent: () => (/* binding */ getLayoutInfoHoldContent),
/* harmony export */   getLayoutInfosByType: () => (/* binding */ getLayoutInfosByType),
/* harmony export */   getLayoutInfosHoldcontent: () => (/* binding */ getLayoutInfosHoldcontent),
/* harmony export */   getLayoutItemIds: () => (/* binding */ getLayoutItemIds),
/* harmony export */   getMapWidgets: () => (/* binding */ getMapWidgets),
/* harmony export */   getParentWidgetIdOfContent: () => (/* binding */ getParentWidgetIdOfContent),
/* harmony export */   getRelatedLayoutInfosInWidgetByLayoutInfo: () => (/* binding */ getRelatedLayoutInfosInWidgetByLayoutInfo),
/* harmony export */   getRelatedLayoutItemsInWidgetByLayoutInfo: () => (/* binding */ getRelatedLayoutItemsInWidgetByLayoutInfo),
/* harmony export */   getRootContainerInfoOfLayout: () => (/* binding */ getRootContainerInfoOfLayout),
/* harmony export */   getScreenAnchorPointsInPage: () => (/* binding */ getScreenAnchorPointsInPage),
/* harmony export */   getWidgetIdThatUseTheLayoutId: () => (/* binding */ getWidgetIdThatUseTheLayoutId)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function findLayoutItem(appConfig, layoutInfo) {
    var _a, _b, _c;
    if (!layoutInfo) {
        return null;
    }
    const { layoutId, layoutItemId } = layoutInfo;
    return (_c = (_b = (_a = appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
}
/**
 * Find parent layout item in current page.
 * @param layoutInfo
 */
function findParentLayoutInfo(layoutInfo, appConfig, browserSizeMode) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
    const { layoutId } = layoutInfo;
    const layout = appConfig.layouts[layoutId];
    switch ((_a = layout === null || layout === void 0 ? void 0 : layout.parent) === null || _a === void 0 ? void 0 : _a.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View:
            {
                const viewJson = appConfig.views[layout.parent.id];
                const sectionJson = appConfig.sections[viewJson.parent];
                if (((_c = (_b = sectionJson === null || sectionJson === void 0 ? void 0 : sectionJson.parent) === null || _b === void 0 ? void 0 : _b[browserSizeMode]) === null || _c === void 0 ? void 0 : _c.length) === 1) {
                    return sectionJson.parent[browserSizeMode][0];
                }
                if (((_e = (_d = sectionJson === null || sectionJson === void 0 ? void 0 : sectionJson.parent) === null || _d === void 0 ? void 0 : _d[browserSizeMode]) === null || _e === void 0 ? void 0 : _e.length) > 1) {
                    return findParentLayoutInfo(sectionJson.parent[browserSizeMode][0], appConfig, browserSizeMode);
                }
                return null;
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget:
            {
                const widgetJson = appConfig.widgets[layout.parent.id];
                if (((_g = (_f = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.parent) === null || _f === void 0 ? void 0 : _f[browserSizeMode]) === null || _g === void 0 ? void 0 : _g.length) === 1) {
                    return widgetJson.parent[browserSizeMode][0];
                }
                if (((_j = (_h = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.parent) === null || _h === void 0 ? void 0 : _h[browserSizeMode]) === null || _j === void 0 ? void 0 : _j.length) > 1) {
                    return findParentLayoutInfo(widgetJson.parent[browserSizeMode][0], appConfig, browserSizeMode);
                }
                return null;
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Screen:
            {
                const screenJson = appConfig.screens[layout.parent.id];
                const sgJson = appConfig.screenGroups[screenJson.parent];
                return (_k = sgJson.parent) === null || _k === void 0 ? void 0 : _k[browserSizeMode];
            }
        default:
            return null;
    }
}
function getContentIdInLayoutItem(item) {
    switch (item.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            return typeof (item.widgetId) === 'string' ? item.widgetId : null;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
            return typeof (item.sectionId) === 'string' ? item.sectionId : null;
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            return typeof (item.screenGroupId) === 'string' ? item.screenGroupId : null;
        default:
            return null;
    }
}
/**
 * return the content ids in the layout. Do not consider the embedded layouts
 * @param layoutJson
 */
function getContentsInLayout(layoutJson, type, withPending = false) {
    if (!(layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.content)) {
        return [];
    }
    return Object.keys(layoutJson.content)
        .filter(itemId => layoutJson.content[itemId].type === type &&
        !!getContentIdInLayoutItem(layoutJson.content[itemId]) &&
        (withPending || !layoutJson.content[itemId].isPending))
        .map(itemId => getContentIdInLayoutItem(layoutJson.content[itemId]));
}
/**
 * Return the content ids in a layout, search the whole layout tree, including the layout widget, the normal widget that has embed layout, and views, screens, etc.
 * @param appConfig
 * @param layoutId the layout to search
 * @param type content type
 * @param sizeMode the sizeMode to search
 * @param withPending will include the pending content if true
 */
function getContentsInLayoutRecursive(appConfig, layoutId, type, sizeMode, withPending = false) {
    let ret = [];
    const widgetIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, withPending);
    const sectionIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, withPending);
    const screenGroupIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, withPending);
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        ret = ret.concat(widgetIds);
    }
    else if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        ret = ret.concat(sectionIds);
    }
    else if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
        ret = ret.concat(screenGroupIds);
    }
    const hasLayoutWidgetIds = widgetIds.filter(widgetId => {
        var _a, _b, _c, _d, _e;
        return ((_b = (_a = appConfig.widgets[widgetId]) === null || _a === void 0 ? void 0 : _a.manifest) === null || _b === void 0 ? void 0 : _b.widgetType) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout ||
            ((_e = (_d = (_c = appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.manifest) === null || _d === void 0 ? void 0 : _d.properties) === null || _e === void 0 ? void 0 : _e.hasEmbeddedLayout);
    });
    hasLayoutWidgetIds.forEach(hasLayoutWidgetId => {
        var _a;
        Object.keys((_a = appConfig.widgets[hasLayoutWidgetId].layouts) !== null && _a !== void 0 ? _a : {}).forEach(layoutKey => {
            const layoutId = findLayoutId(appConfig.widgets[hasLayoutWidgetId].layouts[layoutKey], sizeMode, appConfig.mainSizeMode);
            ret = ret.concat(getContentsInLayoutRecursive(appConfig, layoutId, type, sizeMode, withPending));
        });
    });
    sectionIds.forEach(sectionId => {
        var _a, _b;
        (_b = (_a = appConfig.sections) === null || _a === void 0 ? void 0 : _a[sectionId]) === null || _b === void 0 ? void 0 : _b.views.forEach(viewId => {
            const layoutId = findLayoutId(appConfig.views[viewId].layout, sizeMode, appConfig.mainSizeMode);
            if (appConfig.views[viewId] && layoutId) {
                ret = ret.concat(getContentsInLayoutRecursive(appConfig, layoutId, type, sizeMode, withPending));
            }
        });
    });
    screenGroupIds.forEach(screenGroupId => {
        var _a, _b;
        (_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[screenGroupId]) === null || _b === void 0 ? void 0 : _b.screens.forEach(screenId => {
            var _a, _b, _c, _d, _e;
            const mainLayoutId = findLayoutId((_b = (_a = appConfig.screens) === null || _a === void 0 ? void 0 : _a[screenId]) === null || _b === void 0 ? void 0 : _b.main.layout, sizeMode, appConfig.mainSizeMode);
            if (mainLayoutId) {
                ret = ret.concat(getContentsInLayoutRecursive(appConfig, mainLayoutId, type, sizeMode, withPending));
            }
            const panelLayoutId = findLayoutId((_e = (_d = (_c = appConfig.screens) === null || _c === void 0 ? void 0 : _c[screenId]) === null || _d === void 0 ? void 0 : _d.panel) === null || _e === void 0 ? void 0 : _e.layout, sizeMode, appConfig.mainSizeMode);
            if (panelLayoutId) {
                ret = ret.concat(getContentsInLayoutRecursive(appConfig, panelLayoutId, type, sizeMode, withPending));
            }
        });
    });
    return ret;
}
/**
 * Return the content ids in a layout, search the widgets with layout but don't search nested containers.
 * @param appConfig
 * @param layoutId
 * @param type
 */
function getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, sizeMode, withPending = false) {
    let ret = [];
    // No need to deal with screen group as it cannot be placed in a layout widget
    const widgetIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, withPending);
    const sectionIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, withPending);
    const sgIds = getContentsInLayout(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, withPending);
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        ret = ret.concat(widgetIds);
    }
    else if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
        ret = ret.concat(sgIds);
    }
    else {
        ret = ret.concat(sectionIds);
    }
    const layoutWidgetIds = widgetIds.filter(widgetId => appConfig.widgets &&
        appConfig.widgets[widgetId] &&
        (appConfig.widgets[widgetId].manifest.widgetType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout || appConfig.widgets[widgetId].manifest.properties.hasEmbeddedLayout));
    layoutWidgetIds.forEach(layoutWidgetId => {
        var _a;
        Object.keys((_a = appConfig.widgets[layoutWidgetId].layouts) !== null && _a !== void 0 ? _a : {}).forEach(layoutKey => {
            const layoutId = findLayoutId(appConfig.widgets[layoutWidgetId].layouts[layoutKey], sizeMode, appConfig.mainSizeMode);
            ret = ret.concat(getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, sizeMode, withPending));
        });
    });
    return ret;
}
/**
 * Return the layout item that holds the content.
 * In one layout, a content is not allowed to be put in multiple items.
 * @param layoutJson
 * @param widgetId
 */
function getContentLayoutItem(layoutJson, id, type) {
    if (!(layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.content)) {
        return null;
    }
    const layoutItemId = Object.keys(layoutJson.content).find(itemId => layoutJson.content[itemId].type === type &&
        (layoutJson.content[itemId].widgetId === id || layoutJson.content[itemId].sectionId === id || layoutJson.content[itemId].screenGroupId === id) &&
        !layoutJson.content[itemId].isPending);
    return layoutJson.content[layoutItemId];
}
/**
 * Return the layout item ids in a layout
 * @param appConfig
 * @param layoutId
 * @param withPending
 */
function getLayoutItemIds(appConfig, layoutId, withPending = false) {
    const layout = appConfig.layouts[layoutId];
    if (layout === null || layout === void 0 ? void 0 : layout.content) {
        return withPending
            ? Object.keys(layout.content)
            : Object.keys(layout.content).filter(itemId => !layout.content[itemId].isPending);
    }
    return [];
}
function getLayoutInfosByType(layoutJson, type, withPending = false) {
    if (!(layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.content)) {
        return [];
    }
    return Object.keys(layoutJson.content)
        .filter(itemId => layoutJson.content[itemId].type === type &&
        !!getContentIdInLayoutItem(layoutJson.content[itemId]) &&
        (withPending || !layoutJson.content[itemId].isPending))
        .map(itemId => ({ layoutId: layoutJson.id, layoutItemId: itemId }));
}
/**
 * Find a widget id that use the layoutId
 * @param appConfig
 * @param layoutId
 */
function getWidgetIdThatUseTheLayoutId(appConfig, layoutId) {
    var _a;
    // eslint-disable-next-line
    const layoutJson = appConfig.layouts[layoutId];
    if (((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) === null || _a === void 0 ? void 0 : _a.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget) {
        return layoutJson.parent.id;
    }
    return null;
}
/**
 * Return the container that holds the widget, search the widgets with layout but don't search the nested container.
 * @param appConfig
 * @param widgetId
 */
function getContentContainerInfo(appConfig, id, type, sizeMode, withPending = false) {
    var _a;
    const layoutInfo = getLayoutInfoHoldContent(appConfig, id, type, sizeMode, withPending);
    if (layoutInfo) {
        const layoutJson = appConfig.layouts[layoutInfo.layoutId];
        switch ((_a = layoutJson.parent) === null || _a === void 0 ? void 0 : _a.type) {
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Page:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: layoutJson.parent.id };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Dialog:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog, id: layoutJson.parent.id };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Header:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Footer:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View:
                return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.View, id: layoutJson.parent.id };
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Screen:
                {
                    const screenJson = appConfig.screens[layoutJson.parent.id];
                    const mainPanelLayoutId = screenJson.main.layout[sizeMode];
                    return { type: mainPanelLayoutId === layoutInfo.layoutId ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenMain : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenPanel, id: layoutJson.parent.id };
                }
            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget:
                {
                    const widgetId = layoutJson.parent.id;
                    return getContentContainerInfo(appConfig, widgetId, type, sizeMode, withPending);
                }
        }
    }
    return null;
}
/**
 * Return the root container of the content, search the whole layout tree. There are 4 types of root container: page, window, header, footer.
 */
function getContentRootContainerInfo(appConfig, id, type, sizeMode, withPending = false) {
    let layoutInfo = getLayoutInfoHoldContent(appConfig, id, type, sizeMode, withPending);
    let useSizeMode = sizeMode;
    if (!layoutInfo) {
        // try to find from main size mode, since sizeMode layout may be tranformed automatically from main size mode
        layoutInfo = getLayoutInfoHoldContent(appConfig, id, type, appConfig.mainSizeMode, withPending);
        useSizeMode = appConfig.mainSizeMode;
    }
    if (layoutInfo) {
        return getRootContainerInfoOfLayout(appConfig, layoutInfo.layoutId, useSizeMode);
    }
}
function getRootContainerInfoOfLayout(appConfig, layoutId, sizeMode) {
    var _a;
    let layoutJson = appConfig.layouts[layoutId];
    while ((layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) && [jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Screen, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.View, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget].includes(layoutJson.parent.type)) {
        const layoutInfo = findParentLayoutInfo({ layoutId }, appConfig, sizeMode);
        layoutId = layoutInfo === null || layoutInfo === void 0 ? void 0 : layoutInfo.layoutId;
        layoutJson = appConfig.layouts[layoutId];
    }
    switch ((_a = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) === null || _a === void 0 ? void 0 : _a.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Dialog:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog, id: layoutJson.parent.id };
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Page:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: layoutJson.parent.id };
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Header:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' };
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Footer:
            return { type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' };
    }
}
/**
 * Get the contents in a container. Do not search the nested container.
 */
function getContentsInContainer(appConfig, containerInfo, type, browserSizeMode, withPending = false) {
    var _a, _b, _c, _d, _e, _f;
    let layoutId;
    switch (containerInfo.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page:
            layoutId = findLayoutId((_b = (_a = appConfig.pages) === null || _a === void 0 ? void 0 : _a[containerInfo.id]) === null || _b === void 0 ? void 0 : _b.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header:
            layoutId = findLayoutId((_c = appConfig.header) === null || _c === void 0 ? void 0 : _c.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer:
            layoutId = findLayoutId((_d = appConfig.footer) === null || _d === void 0 ? void 0 : _d.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.View:
            layoutId = findLayoutId((_f = (_e = appConfig.views) === null || _e === void 0 ? void 0 : _e[containerInfo.id]) === null || _f === void 0 ? void 0 : _f.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog:
            layoutId = findLayoutId(appConfig.dialogs[containerInfo.id].layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenMain:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenPanel:
            if (!appConfig.screens || !appConfig.screens[containerInfo.id]) {
                return [];
            }
            const mainLayoutId = findLayoutId(appConfig.screens[containerInfo.id].main.layout, browserSizeMode, appConfig.mainSizeMode);
            if (!mainLayoutId) {
                return [];
            }
            const mainContents = getContentsInLayoutWithRecrusiveLayouts(appConfig, mainLayoutId, type, browserSizeMode, withPending);
            if (appConfig.screens[containerInfo.id].panel) {
                const panelLayoutId = findLayoutId(appConfig.screens[containerInfo.id].panel.layout, browserSizeMode, appConfig.mainSizeMode);
                const panelContents = getContentsInLayoutWithRecrusiveLayouts(appConfig, panelLayoutId, type, browserSizeMode, withPending);
                return mainContents.concat(panelContents);
            }
            return mainContents;
    }
}
/**
 * Get the contents in a container. Search the whole layout tree.
 */
function getContentsInContainerRecursive(appConfig, containerInfo, type, browserSizeMode, withPending = false) {
    var _a, _b, _c, _d, _e, _f;
    let layoutId;
    switch (containerInfo.type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page:
            layoutId = findLayoutId((_b = (_a = appConfig.pages) === null || _a === void 0 ? void 0 : _a[containerInfo.id]) === null || _b === void 0 ? void 0 : _b.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header:
            layoutId = findLayoutId((_c = appConfig.header) === null || _c === void 0 ? void 0 : _c.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer:
            layoutId = findLayoutId((_d = appConfig.footer) === null || _d === void 0 ? void 0 : _d.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.View:
            layoutId = findLayoutId((_f = (_e = appConfig.views) === null || _e === void 0 ? void 0 : _e[containerInfo.id]) === null || _f === void 0 ? void 0 : _f.layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog:
            layoutId = findLayoutId(appConfig.dialogs[containerInfo.id].layout, browserSizeMode, appConfig.mainSizeMode);
            return layoutId ? getContentsInLayoutRecursive(appConfig, layoutId, type, browserSizeMode, withPending) : [];
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenMain:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.ScreenPanel:
            if (!appConfig.screens || !appConfig.screens[containerInfo.id]) {
                return [];
            }
            const mainLayoutId = findLayoutId(appConfig.screens[containerInfo.id].main.layout, browserSizeMode, appConfig.mainSizeMode);
            if (!mainLayoutId) {
                return [];
            }
            const mainContents = getContentsInLayoutRecursive(appConfig, mainLayoutId, type, browserSizeMode);
            if (appConfig.screens[containerInfo.id].panel) {
                const panelLayoutId = findLayoutId(appConfig.screens[containerInfo.id].panel.layout, browserSizeMode, appConfig.mainSizeMode);
                const panelContents = getContentsInLayoutRecursive(appConfig, panelLayoutId, type, browserSizeMode);
                return mainContents.concat(panelContents);
            }
            return mainContents;
    }
}
/**
 * Get the contents in a container with more options, search the whole layout tree.
 *
 * header, footer and the current page body are considered as one container.
 *
 * @param options
 *    the currentPageId will be used if the container is header/footer.
 */
function getContentsInContainerRecursiveAdv(appConfig, containerInfo, type, browserSizeMode, options) {
    const getContentsInOneContainer = (_containerInfo) => {
        let ids = [];
        if (options.includeOtherSizeMode) {
            ids = ids.concat(getContentsInContainerRecursive(appConfig, _containerInfo, type, jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Large, options.includePending), getContentsInContainerRecursive(appConfig, _containerInfo, type, jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Medium, options.includePending), getContentsInContainerRecursive(appConfig, _containerInfo, type, jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode.Small, options.includePending));
        }
        else {
            ids = getContentsInContainerRecursive(appConfig, _containerInfo, type, browserSizeMode, options.includePending);
        }
        ids = Array.from(new Set(ids));
        return ids;
    };
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog) {
        return getContentsInOneContainer(containerInfo);
    }
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page) {
        const pageJson = appConfig.pages[containerInfo.id];
        let ids = getContentsInOneContainer(containerInfo);
        if (pageJson.header) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' }));
        }
        if (pageJson.footer) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' }));
        }
        ids = Array.from(new Set(ids));
        return ids;
    }
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header) {
        const pageJson = appConfig.pages[options.currentPageId];
        let ids = getContentsInOneContainer(containerInfo).concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: options.currentPageId }));
        if (pageJson === null || pageJson === void 0 ? void 0 : pageJson.footer) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer, id: 'footer' }));
        }
        ids = Array.from(new Set(ids));
        return ids;
    }
    if (containerInfo.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer) {
        const pageJson = appConfig.pages[options.currentPageId];
        let ids = getContentsInOneContainer(containerInfo).concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page, id: options.currentPageId }));
        if (pageJson === null || pageJson === void 0 ? void 0 : pageJson.header) {
            ids = ids.concat(getContentsInOneContainer({ type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header, id: 'header' }));
        }
        ids = Array.from(new Set(ids));
        return ids;
    }
}
/**
 * Return the layoutId for specific sizeMode. If the sizeMode does not exist, return the main sizeMode layoutId.
 * @param layouts
 * @param browserSizeMode
 * @param mainSizeMode
 */
function findLayoutId(layouts, browserSizeMode, mainSizeMode) {
    if (!layouts) {
        return null;
    }
    return layouts[browserSizeMode] || layouts[mainSizeMode];
}
/**
 * If the content has only one parent, return it directly.
 * If the content has multiple parents, these parents must be contained in a widget's layout, return the widget's parent.
 * @param appConfig
 * @param id
 * @param type
 * @param sizeMode
 * @param withPending
 * @returns
 */
function getLayoutInfoHoldContent(appConfig, id, type, sizeMode, withPending = true) {
    var _a, _b, _c, _d, _e;
    switch (type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            {
                const sg = appConfig.screenGroups[id];
                const layoutInfo = (_a = sg.parent) === null || _a === void 0 ? void 0 : _a[sizeMode];
                const layoutItem = findLayoutItem(appConfig, layoutInfo);
                return withPending || !(layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.isPending) ? layoutInfo : null;
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            {
                let content;
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                    content = appConfig.widgets[id];
                }
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
                    content = appConfig.sections[id];
                }
                if (((_c = (_b = content === null || content === void 0 ? void 0 : content.parent) === null || _b === void 0 ? void 0 : _b[sizeMode]) === null || _c === void 0 ? void 0 : _c.length) === 1) {
                    const layoutInfo = content.parent[sizeMode][0];
                    const layoutItem = findLayoutItem(appConfig, layoutInfo);
                    return withPending || !(layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.isPending) ? layoutInfo : null;
                }
                if (((_e = (_d = content === null || content === void 0 ? void 0 : content.parent) === null || _d === void 0 ? void 0 : _d[sizeMode]) === null || _e === void 0 ? void 0 : _e.length) > 1) {
                    // find grand parnet
                    const layoutInfo = content.parent[sizeMode][0];
                    const parentLayoutJson = appConfig.layouts[layoutInfo.layoutId];
                    if (parentLayoutJson === null || parentLayoutJson === void 0 ? void 0 : parentLayoutJson.parent) {
                        return getLayoutInfoHoldContent(appConfig, parentLayoutJson.parent.id, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode, withPending);
                    }
                }
            }
    }
    return null;
}
/**
 * In one layout, one widget/section is NOT allowed be put in more than one layout item.
 * However, in widget that has layouts, one widget/section may be put in multiple layouts.
 *
 * if `sizeMode` is passed in, return the items in the size mode only, else return all items
 * @param appConfig
 * @param type
 * @param id
 * @param sizeMode
 */
function getLayoutInfosHoldcontent(appConfig, type, id, sizeMode) {
    switch (type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            {
                const sg = appConfig.screenGroups[id];
                if (sg.parent) {
                    if (sizeMode) {
                        return [sg.parent[sizeMode]];
                    }
                    return Object.values(sg.parent);
                }
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            {
                let content;
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                    content = appConfig.widgets[id];
                }
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
                    content = appConfig.sections[id];
                }
                if (content === null || content === void 0 ? void 0 : content.parent) { // placeholder has no content
                    if (sizeMode) {
                        return content.parent[sizeMode];
                    }
                    const result = [];
                    Object.values(content.parent).forEach((layoutInfos) => {
                        result.push(...layoutInfos);
                    });
                    return result;
                }
            }
    }
    return [];
}
/**
 * Find a widget id (parent widget id) that the widget layout contains the widgetId/sectionId.
 * Return the direct parent only.
 * @param appConfig
 * @param id the widget/section id
 * @param type
 * @param sizeMode
 */
function getParentWidgetIdOfContent(appConfig, id, type, sizeMode) {
    var _a, _b, _c, _d, _e, _f, _g;
    let parentLayoutId;
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        const widgetJson = appConfig.widgets[id];
        parentLayoutId = (_c = (_b = (_a = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.parent) === null || _a === void 0 ? void 0 : _a[sizeMode]) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.layoutId;
    }
    if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        const sectionJson = appConfig.sections[id];
        parentLayoutId = (_f = (_e = (_d = sectionJson === null || sectionJson === void 0 ? void 0 : sectionJson.parent) === null || _d === void 0 ? void 0 : _d[sizeMode]) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.layoutId;
    }
    if (parentLayoutId) {
        const layoutJson = appConfig.layouts[parentLayoutId];
        if (((_g = layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.parent) === null || _g === void 0 ? void 0 : _g.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget) {
            return layoutJson.parent.id;
        }
    }
    return null;
}
/**
 * Get children widgets/sections in a widget, find one level only. Includes all size mode
 * @param appConfig
 * @param parentWidgetId
 * @param type
 */
function getChildrenContents(appConfig, parentWidgetId, type, withPending) {
    const parentWidgetJson = appConfig.widgets[parentWidgetId];
    if (!parentWidgetJson.layouts) {
        return [];
    }
    let ret = [];
    Object.keys(parentWidgetJson.layouts).forEach(layoutName => {
        Object.keys(parentWidgetJson.layouts[layoutName]).forEach(sizeMode => {
            const layoutJson = appConfig.layouts[parentWidgetJson.layouts[layoutName][sizeMode]];
            ret = ret.concat(getContentsInLayout(layoutJson, type, withPending));
        });
    });
    // remove duplicates
    return Array.from(new Set(ret));
}
/**
 * Return the layoutInfo for the widget/section, there may be multiple layoutInfos for the widget/section.
 *
 * One widget/section is allowed to be put in one layout only one time, but it's allowed be put in multiple layouts.
 * There are 2 cases for multiple layouts:
 *    * One widget/section is allowed to be put in multiple size mode (this function is for one size mode only, so we don't consider this case)
 *    * In one size mode, one widget (i.e. List widget) may have multiple state layouts to hold the same widget.
 * @param appConfig
 * @param contentId
 * @param type
 */
function getContentLayoutInfosInOneSizeMode(appConfig, contentId, type, sizeMode) {
    var _a, _b, _c;
    switch (type) {
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup:
            {
                const sg = appConfig.screenGroups[contentId];
                if ((_a = sg.parent) === null || _a === void 0 ? void 0 : _a[sizeMode]) {
                    return [sg.parent[sizeMode]];
                }
            }
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section:
        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget:
            {
                let content;
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                    content = appConfig.widgets[contentId];
                }
                if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
                    content = appConfig.sections[contentId];
                }
                if (((_c = (_b = content === null || content === void 0 ? void 0 : content.parent) === null || _b === void 0 ? void 0 : _b[sizeMode]) === null || _c === void 0 ? void 0 : _c.length) > 0) {
                    return content.parent[sizeMode];
                }
            }
    }
    return [];
}
/**
 * Return the size mode of the layout. Because under one size mode, only widget may have multiple layouts,
 * and this function is used only for widgets that have layouts, so pass widget id to make the search easy.
 * @param appConfig
 * @param layoutId
 * @param widgetId
 */
function getBrowserSizeModeByLayoutIdAndWidgetId(appConfig, layoutId, widgetId) {
    const widgetJson = appConfig.widgets[widgetId];
    if (!widgetJson)
        return undefined;
    let sizeMode;
    // eslint-disable-next-line
    Object.keys(widgetJson.layouts).find(name => {
        // eslint-disable-next-line
        const res = Object.keys(widgetJson.layouts[name]).find(device => {
            if (widgetJson.layouts[name][device] === layoutId) {
                sizeMode = device;
                return true;
            }
        });
        if (res) {
            return true;
        }
    });
    return sizeMode;
}
/**
 * Get the size mode that the layout belongs to
 */
function getBrowserSizeModeByLayoutId(appConfig, layoutId) {
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils.getSizeModeOfALayout(appConfig, layoutId);
}
/**
 * Find all layoutInfos that the content id, section or widget, is equal to each other in the widget on the browserSizeMode
 *
 * @param appConfig
 * @param layoutInfo
 * @param parentWidgetId
 * @param sizeMode
 */
function getRelatedLayoutInfosInWidgetByLayoutInfo(appConfig, layoutInfo, parentWidgetId, sizeMode) {
    const parentWidget = appConfig.widgets[parentWidgetId];
    if (!parentWidget)
        return [];
    const layoutItem = appConfig.layouts[layoutInfo.layoutId] &&
        appConfig.layouts[layoutInfo.layoutId].content &&
        appConfig.layouts[layoutInfo.layoutId].content[layoutInfo.layoutItemId];
    if (!layoutItem)
        return [];
    const contentType = layoutItem.type;
    let contentId;
    // No need to deal with screen group as it cannot be placed in a layout widget
    if (contentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section) {
        contentId = layoutItem.sectionId;
    }
    else if (contentType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        contentId = layoutItem.widgetId;
    }
    // widgetId may be undefined for placeholder
    if (!contentId) {
        if (checkIsLayoutInfoInWidget(appConfig, parentWidgetId, layoutInfo)) {
            return [layoutInfo];
        }
        else {
            return [];
        }
    }
    return getContentLayoutInfosInWidget(appConfig, contentId, contentType, parentWidgetId, sizeMode);
}
/**
 * Same as `getRelatedLayoutInfosInWidgetByLayoutInfo`, but return the layout items
 * @param appConfig
 * @param layoutInfo
 * @param parentWId
 * @param browserSizeMode
 */
function getRelatedLayoutItemsInWidgetByLayoutInfo(appConfig, layoutInfo, parentWId, browserSizeMode) {
    return getRelatedLayoutInfosInWidgetByLayoutInfo(appConfig, layoutInfo, parentWId, browserSizeMode).map(layoutInfo => appConfig.layouts[layoutInfo.layoutId][layoutInfo.layoutItemId]);
}
/**
 * Find layout infos in a widget that holds the specific widget or section.
 * @param appConfig
 * @param id The widget or section id to be searched
 * @param type
 * @param parentWidgetId The container widget
 * @param browserSizeMode
 */
function getContentLayoutInfosInWidget(appConfig, id, type, parentWidgetId, browserSizeMode) {
    const parentWidget = appConfig.widgets[parentWidgetId];
    if (!parentWidget || !id)
        return [];
    const items = [];
    parentWidget.layouts &&
        Object.keys(parentWidget.layouts).forEach(s => {
            const layoutId = parentWidget.layouts[s][browserSizeMode];
            const layoutJson = appConfig.layouts[layoutId];
            layoutJson &&
                layoutJson.content &&
                Object.keys(layoutJson.content).forEach(key => {
                    const layoutEle = layoutJson.content[key];
                    if (layoutEle.type === type && (layoutEle.widgetId === id || layoutEle.sectionId === id || layoutEle.screenGroupId === id)) {
                        items.push({
                            layoutId: layoutJson.id,
                            layoutItemId: layoutEle.id
                        });
                    }
                    else if (layoutEle.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                        const wJson = appConfig.widgets[layoutEle.widgetId];
                        if (wJson && wJson.manifest.widgetType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout) {
                            items.push(...getContentLayoutInfosInWidget(appConfig, id, type, wJson.id, browserSizeMode));
                        }
                    }
                });
        });
    return items;
}
function checkIsLayoutInfoInWidget(appConfig, parentWId, layoutInfo) {
    const parentWidget = appConfig.widgets[parentWId];
    if (!parentWidget)
        return false;
    let find = false;
    parentWidget.layouts &&
        Object.keys(parentWidget.layouts).some(layoutName => {
            return Object.keys(parentWidget.layouts[layoutName]).some(sizeMode => {
                const layoutId = parentWidget.layouts[layoutName][sizeMode];
                const layoutItemIds = getLayoutItemIds(appConfig, layoutId, true);
                return layoutItemIds.some(itemId => {
                    if (layoutInfo.layoutId === layoutId && layoutInfo.layoutItemId === itemId) {
                        find = true;
                        return true;
                    }
                    return false;
                });
            });
        });
    return find;
}
/**
 * Return the widget/section ids that in the same container with the widget
 * @param appConfig
 * @param widgetId
 */
function getContentsInTheSameContainer(appConfig, id, type, retType, sizeMode, withPending = false) {
    const containerInfo = getContentContainerInfo(appConfig, id, type, sizeMode, withPending);
    if (!containerInfo) {
        return [];
    }
    return getContentsInContainer(appConfig, containerInfo, retType, sizeMode, withPending);
}
/**
 * Return the widget/section ids that in the same root container with the widget
 * @param appConfig
 * @param widgetId
 */
function getContentsInTheSameRootContainer(appConfig, id, type, retType, sizeMode, withPending = false) {
    const containerInfo = getContentRootContainerInfo(appConfig, id, type, sizeMode, withPending);
    if (!containerInfo) {
        return [];
    }
    return getContentsInContainerRecursive(appConfig, containerInfo, retType, sizeMode, withPending);
}
function getBlockAnchorPointsInPage(appConfig, pageId, sizeMode) {
    var _a, _b;
    const pageJson = appConfig.pages[pageId];
    const layoutId = (_a = pageJson === null || pageJson === void 0 ? void 0 : pageJson.layout) === null || _a === void 0 ? void 0 : _a[sizeMode];
    const layoutJson = appConfig.layouts[layoutId];
    const blocks = [];
    if ((layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
        Object.keys((_b = layoutJson.content) !== null && _b !== void 0 ? _b : {}).sort().forEach(layoutItemId => {
            var _a;
            const layoutItem = layoutJson.content[layoutItemId];
            if (layoutItem.isPending || ((_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.isFloating)) {
                return;
            }
            if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
                const anchor = generateBlockAnchorPoint(appConfig, { layoutId, layoutItemId });
                if (anchor) {
                    blocks.push(anchor);
                }
            }
        });
    }
    return blocks;
}
function getScreenAnchorPointsInPage(appConfig, pageId, sizeMode) {
    var _a, _b;
    const pageJson = appConfig.pages[pageId];
    const layoutId = (_a = pageJson === null || pageJson === void 0 ? void 0 : pageJson.layout) === null || _a === void 0 ? void 0 : _a[sizeMode];
    const layoutJson = appConfig.layouts[layoutId];
    const screenGroups = [];
    if ((layoutJson === null || layoutJson === void 0 ? void 0 : layoutJson.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.FlowLayout) {
        Object.keys((_b = layoutJson.content) !== null && _b !== void 0 ? _b : {}).sort().forEach(layoutItemId => {
            var _a;
            const layoutItem = layoutJson.content[layoutItemId];
            if (layoutItem.isPending || ((_a = layoutItem.setting) === null || _a === void 0 ? void 0 : _a.isFloating)) {
                return;
            }
            if (layoutItem.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup) {
                const screenGroup = appConfig.screenGroups[layoutItem.screenGroupId];
                const screens = [];
                screenGroup === null || screenGroup === void 0 ? void 0 : screenGroup.screens.forEach(screenId => {
                    const anchor = generateScreenAnchorPoint(appConfig, layoutId, screenId);
                    if (anchor) {
                        screens.push(anchor);
                    }
                });
                screenGroups.push({ id: screenGroup.id, label: screenGroup.label, screens });
            }
        });
    }
    return screenGroups;
}
function generateBlockAnchorPoint(appConfig, layoutInfo) {
    const { layoutId, layoutItemId } = layoutInfo;
    const layoutItem = appConfig.layouts[layoutId].content[layoutItemId];
    const widgetJson = appConfig.widgets[layoutItem.widgetId];
    if (widgetJson) {
        return { label: widgetJson.label, id: `${layoutId}_block_${layoutItemId}` };
    }
    return null;
}
function generateScreenAnchorPoint(appConfig, layoutId, screenId) {
    const screenJson = appConfig.screens[screenId];
    if (screenJson) {
        return { label: screenJson.label, id: `${layoutId}_screen_${screenId}` };
    }
    return null;
}
/**
 *
 * @param appConfig
 * @param currentContainerType Dialog or Page
 * @param currentId dialog or page id
 */
function getMapWidgets(appConfig, sizeMode, currentContainerType, currentId) {
    const flatContainerMaps = [];
    // if map is in header/footer, put them in the first current page only
    const currentItem = {
        id: currentId,
        type: currentContainerType,
        maps: getContentsInContainerRecursiveAdv(appConfig, { type: currentContainerType, id: currentId }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode, { includePending: false, includeOtherSizeMode: false })
            .filter(widgetId => appConfig.widgets[widgetId].manifest.properties.canCreateMapView)
    };
    flatContainerMaps.push(currentItem);
    Object.keys(appConfig.pages).forEach(pageId => {
        if (pageId === currentId) {
            return;
        }
        const item = {
            id: pageId,
            type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page,
            maps: getContentsInContainerRecursive(appConfig, { id: pageId, type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode)
                .filter(widgetId => appConfig.widgets[widgetId].manifest.properties.canCreateMapView)
        };
        flatContainerMaps.push(item);
    });
    Object.keys(appConfig.dialogs || {}).forEach(dlgId => {
        if (dlgId === currentId) {
            return;
        }
        const item = {
            id: dlgId,
            type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog,
            maps: getContentsInContainerRecursive(appConfig, { id: dlgId, type: jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode)
                .filter(widgetId => appConfig.widgets[widgetId].manifest.properties.canCreateMapView)
        };
        flatContainerMaps.push(item);
    });
    return flatContainerMaps;
}


/***/ }),

/***/ "./jimu-layouts/lib/search/index.ts":
/*!******************************************!*\
  !*** ./jimu-layouts/lib/search/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   findLayoutId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.findLayoutId),
/* harmony export */   findLayoutItem: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.findLayoutItem),
/* harmony export */   findParentLayoutInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.findParentLayoutInfo),
/* harmony export */   getBlockAnchorPointsInPage: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getBlockAnchorPointsInPage),
/* harmony export */   getBrowserSizeModeByLayoutId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getBrowserSizeModeByLayoutId),
/* harmony export */   getBrowserSizeModeByLayoutIdAndWidgetId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getBrowserSizeModeByLayoutIdAndWidgetId),
/* harmony export */   getChildrenContents: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getChildrenContents),
/* harmony export */   getContentContainerInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentContainerInfo),
/* harmony export */   getContentIdInLayoutItem: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentIdInLayoutItem),
/* harmony export */   getContentLayoutInfosInOneSizeMode: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentLayoutInfosInOneSizeMode),
/* harmony export */   getContentLayoutItem: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentLayoutItem),
/* harmony export */   getContentRootContainerInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentRootContainerInfo),
/* harmony export */   getContentsInContainer: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInContainer),
/* harmony export */   getContentsInContainerRecursive: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInContainerRecursive),
/* harmony export */   getContentsInContainerRecursiveAdv: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInContainerRecursiveAdv),
/* harmony export */   getContentsInLayout: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInLayout),
/* harmony export */   getContentsInLayoutRecursive: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInLayoutRecursive),
/* harmony export */   getContentsInLayoutWithRecrusiveLayouts: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInLayoutWithRecrusiveLayouts),
/* harmony export */   getContentsInTheSameContainer: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInTheSameContainer),
/* harmony export */   getContentsInTheSameRootContainer: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getContentsInTheSameRootContainer),
/* harmony export */   getLayoutInfosByType: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getLayoutInfosByType),
/* harmony export */   getLayoutInfosHoldcontent: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getLayoutInfosHoldcontent),
/* harmony export */   getLayoutItemIds: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemIds),
/* harmony export */   getMapWidgets: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getMapWidgets),
/* harmony export */   getParentWidgetIdOfContent: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getParentWidgetIdOfContent),
/* harmony export */   getPendingLayoutItemsFromOtherSizeMode: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsFromOtherSizeMode),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInDialog: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsFromOtherSizeModeInDialog),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInPage: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsFromOtherSizeModeInPage),
/* harmony export */   getPendingLayoutItemsInDialog: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsInDialog),
/* harmony export */   getPendingLayoutItemsInLayoutWithDeep: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsInLayoutWithDeep),
/* harmony export */   getPendingLayoutItemsInPage: () => (/* reexport safe */ _pending__WEBPACK_IMPORTED_MODULE_2__.getPendingLayoutItemsInPage),
/* harmony export */   getRelatedLayoutInfosInWidgetByLayoutInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getRelatedLayoutInfosInWidgetByLayoutInfo),
/* harmony export */   getRelatedLayoutItemsInWidgetByLayoutInfo: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getRelatedLayoutItemsInWidgetByLayoutInfo),
/* harmony export */   getScreenAnchorPointsInPage: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getScreenAnchorPointsInPage),
/* harmony export */   getSectionInfo: () => (/* reexport safe */ _section__WEBPACK_IMPORTED_MODULE_1__.getSectionInfo),
/* harmony export */   getWidgetIdThatUseTheLayoutId: () => (/* reexport safe */ _contents__WEBPACK_IMPORTED_MODULE_0__.getWidgetIdThatUseTheLayoutId)
/* harmony export */ });
/* harmony import */ var _contents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./contents */ "./jimu-layouts/lib/search/contents.ts");
/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./section */ "./jimu-layouts/lib/search/section.ts");
/* harmony import */ var _pending__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pending */ "./jimu-layouts/lib/search/pending.ts");





/***/ }),

/***/ "./jimu-layouts/lib/search/pending.ts":
/*!********************************************!*\
  !*** ./jimu-layouts/lib/search/pending.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPendingLayoutItemsFromOtherSizeMode: () => (/* binding */ getPendingLayoutItemsFromOtherSizeMode),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInDialog: () => (/* binding */ getPendingLayoutItemsFromOtherSizeModeInDialog),
/* harmony export */   getPendingLayoutItemsFromOtherSizeModeInPage: () => (/* binding */ getPendingLayoutItemsFromOtherSizeModeInPage),
/* harmony export */   getPendingLayoutItemsInDialog: () => (/* binding */ getPendingLayoutItemsInDialog),
/* harmony export */   getPendingLayoutItemsInLayoutWithDeep: () => (/* binding */ getPendingLayoutItemsInLayoutWithDeep),
/* harmony export */   getPendingLayoutItemsInPage: () => (/* binding */ getPendingLayoutItemsInPage)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _contents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contents */ "./jimu-layouts/lib/search/contents.ts");


/**
 * Return the pending widgets/sections in the current size mode.
 * @param appConfig
 * @param pageId
 * @param sizeMode
 * @param pagePart
 */
function getPendingLayoutItemsInPage(appConfig, pageId, sizeMode, pagePart) {
    const pageJson = appConfig.pages[pageId];
    if (!pageJson) {
        return [];
    }
    if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header) {
        if (!pageJson.header || !appConfig.header) {
            return [];
        }
        return getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.header.layout[sizeMode], sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer) {
        if (!pageJson.footer || !appConfig.footer) {
            return [];
        }
        return getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.footer.layout[sizeMode], sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body) {
        return getPendingLayoutItemsInLayoutWithDeep(appConfig, pageJson.layout[sizeMode], sizeMode);
    }
    return [];
}
/**
 * Return the pending widgets/sections from other size mode.
 * The pending means: the widgets/sections are in page's other mode but are not in the current mode (passed in)
 * @param appConfig
 * @param pageId
 * @param type
 * @param sizeMode
 */
function getPendingLayoutItemsFromOtherSizeModeInPage(appConfig, pageId, sizeMode, pagePart) {
    const pageJson = appConfig.pages[pageId];
    if (!pageJson) {
        return [];
    }
    if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Header) {
        if (!pageJson.header || !appConfig.header) {
            return [];
        }
        return getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.header.layout, sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Footer) {
        if (!pageJson.footer || !appConfig.footer) {
            return [];
        }
        return getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.footer.layout, sizeMode);
    }
    else if (pagePart === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PagePart.Body) {
        return getPendingLayoutItemsFromOtherSizeMode(appConfig, pageJson.layout, sizeMode);
    }
    return [];
}
/**
 * Return the pending widgets/sections in the current size mode.
 * @param appConfig
 * @param dialogId
 * @param sizeMode
 */
function getPendingLayoutItemsInDialog(appConfig, dialogId, sizeMode) {
    const dialogJson = appConfig.dialogs[dialogId];
    if (!dialogJson) {
        return [];
    }
    return getPendingLayoutItemsInLayoutWithDeep(appConfig, dialogJson.layout[sizeMode], sizeMode);
}
/**
 * Return the pending widgets/sections from other size mode.
 * The pending means: the widgets/sections are in dialog's other mode but are not in the current mode (passed in)
 * @param appConfig
 * @param dialogId
 * @param sizeMode
 */
function getPendingLayoutItemsFromOtherSizeModeInDialog(appConfig, dialogId, sizeMode) {
    const dialogJson = appConfig.dialogs[dialogId];
    if (!dialogJson) {
        return [];
    }
    return getPendingLayoutItemsFromOtherSizeMode(appConfig, dialogJson.layout, sizeMode);
}
/**
 * Return the pending widgets/sections in the current size mode.
 * @param appConfig
 * @param layoutId
 * @param sizeMode the current size mode
 */
function getPendingLayoutItemsInLayoutWithDeep(appConfig, layoutId, sizeMode) {
    let retItems = [];
    const widgetItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, true);
    widgetItems.forEach(widgetItem => {
        const item = appConfig.layouts[widgetItem.layoutId].content[widgetItem.layoutItemId];
        if (item.isPending) {
            retItems.push(widgetItem);
        }
        else {
            if (appConfig.widgets[item.widgetId].layouts) {
                Object.keys(appConfig.widgets[item.widgetId].layouts).forEach(layoutName => {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.widgets[item.widgetId].layouts[layoutName][sizeMode], sizeMode));
                });
            }
        }
    });
    const sectionItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, true);
    sectionItems.forEach(sectionItem => {
        const item = appConfig.layouts[sectionItem.layoutId].content[sectionItem.layoutItemId];
        if (item.isPending) {
            retItems.push(sectionItem);
        }
        else {
            if (appConfig.sections[item.sectionId].views) {
                appConfig.sections[item.sectionId].views.forEach(viewId => {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, appConfig.views[viewId].layout[sizeMode], sizeMode));
                });
            }
        }
    });
    const sgItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layoutId], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, true);
    sgItems.forEach(sgItem => {
        var _a, _b;
        const item = appConfig.layouts[sgItem.layoutId].content[sgItem.layoutItemId];
        if (item.isPending) {
            retItems.push(sgItem);
        }
        else {
            const sgId = item.screenGroupId;
            (_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[sgId].screens) === null || _b === void 0 ? void 0 : _b.forEach(screenId => {
                const screenJson = appConfig === null || appConfig === void 0 ? void 0 : appConfig.screens[screenId];
                if (screenJson.main) {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, screenJson.main.layout[sizeMode], sizeMode));
                }
                if (screenJson.panel) {
                    retItems = retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig, screenJson.panel.layout[sizeMode], sizeMode));
                }
            });
        }
    });
    return retItems;
}
/**
 * Return the pending widgets/sections/screenGroups.
 * The pending means: the widgets/sections/screenGroups are in layout's other mode but are not in the current mode (passed in).
 * @param appConfig
 * @param pageId
 * @param type
 * @param sizeMode
 */
function getPendingLayoutItemsFromOtherSizeMode(appConfig, layout, sizeMode, thisWidgetIds = null, thisSectionIds = null, thisScreenGroupIds = null) {
    const retItems = [];
    if (!thisWidgetIds) {
        thisWidgetIds = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getContentsInLayoutRecursive)(appConfig, layout[sizeMode], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, sizeMode, true);
    }
    if (!thisSectionIds) {
        thisSectionIds = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getContentsInLayoutRecursive)(appConfig, layout[sizeMode], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, sizeMode, true);
    }
    if (!thisScreenGroupIds) {
        thisScreenGroupIds = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getContentsInLayoutRecursive)(appConfig, layout[sizeMode], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, sizeMode, true);
    }
    const otherModes = Object.keys(jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode)
        .filter(mode => jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode[mode] !== sizeMode)
        .map(k => jimu_core__WEBPACK_IMPORTED_MODULE_0__.BrowserSizeMode[k]);
    otherModes.forEach(mode => {
        const widgetItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layout[mode]], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, true);
        widgetItems.forEach(widgetItem => {
            var _a;
            const item = appConfig.layouts[widgetItem.layoutId].content[widgetItem.layoutItemId];
            if (((_a = appConfig.widgets[item.widgetId].manifest) === null || _a === void 0 ? void 0 : _a.widgetType) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout &&
                thisWidgetIds.indexOf(item.widgetId) < 0) {
                !isContentExists(appConfig, retItems, widgetItem) && retItems.push(widgetItem);
            }
            else {
                if (appConfig.widgets[item.widgetId].layouts) {
                    Object.keys(appConfig.widgets[item.widgetId].layouts).forEach(layoutName => {
                        getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.widgets[item.widgetId].layouts[layoutName], sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(widgetItem => {
                            !isContentExists(appConfig, retItems, widgetItem) && retItems.push(widgetItem);
                        });
                    });
                }
            }
        });
        const sectionItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layout[mode]], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section, true);
        sectionItems.forEach(sectionItem => {
            const item = appConfig.layouts[sectionItem.layoutId].content[sectionItem.layoutItemId];
            if (thisSectionIds.indexOf(item.sectionId) < 0) {
                !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
            }
            else {
                if (appConfig.sections[item.sectionId].views) {
                    appConfig.sections[item.sectionId].views.forEach(viewId => {
                        getPendingLayoutItemsFromOtherSizeMode(appConfig, appConfig.views[viewId].layout, sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(sectionItem => {
                            !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
                        });
                    });
                }
            }
        });
        const sgItems = (0,_contents__WEBPACK_IMPORTED_MODULE_1__.getLayoutInfosByType)(appConfig.layouts[layout[mode]], jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.ScreenGroup, true);
        sgItems.forEach(sgItem => {
            var _a, _b;
            const item = appConfig.layouts[sgItem.layoutId].content[sgItem.layoutItemId];
            if (thisScreenGroupIds.indexOf(item.screenGroupId) < 0) {
                !isContentExists(appConfig, retItems, sgItem) && retItems.push(sgItem);
            }
            else {
                if ((_b = (_a = appConfig.screenGroups) === null || _a === void 0 ? void 0 : _a[item.screenGroupId]) === null || _b === void 0 ? void 0 : _b.screens) {
                    appConfig.screenGroups[item.screenGroupId].screens.forEach(screenId => {
                        var _a;
                        const screenJson = (_a = appConfig.screens) === null || _a === void 0 ? void 0 : _a[screenId];
                        if (screenJson === null || screenJson === void 0 ? void 0 : screenJson.main) {
                            getPendingLayoutItemsFromOtherSizeMode(appConfig, screenJson.main.layout, sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(sectionItem => {
                                !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
                            });
                        }
                        if (screenJson === null || screenJson === void 0 ? void 0 : screenJson.panel) {
                            getPendingLayoutItemsFromOtherSizeMode(appConfig, screenJson.panel.layout, sizeMode, thisWidgetIds, thisSectionIds, thisScreenGroupIds).forEach(sectionItem => {
                                !isContentExists(appConfig, retItems, sectionItem) && retItems.push(sectionItem);
                            });
                        }
                    });
                }
            }
        });
    });
    return retItems;
}
function isContentExists(appConfig, layoutInfos, layoutInfo) {
    const layoutItem = appConfig.layouts[layoutInfo.layoutId].content[layoutInfo.layoutItemId];
    return !!layoutInfos.find(info => {
        const item = appConfig.layouts[info.layoutId].content[info.layoutItemId];
        return (item.type === layoutItem.type &&
            ((item.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && item.widgetId === layoutItem.widgetId) ||
                (item.type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Section && item.sectionId === layoutItem.sectionId)));
    });
}


/***/ }),

/***/ "./jimu-layouts/lib/search/section.ts":
/*!********************************************!*\
  !*** ./jimu-layouts/lib/search/section.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSectionInfo: () => (/* binding */ getSectionInfo)
/* harmony export */ });
function getSectionInfo(state, sectionId) {
    var _a;
    const section = state.appConfig.sections[sectionId];
    if (!section || !section.views) {
        return null;
    }
    const navInfo = (_a = state.appRuntimeInfo.sectionNavInfos) === null || _a === void 0 ? void 0 : _a[section.id];
    let activeView;
    if (!navInfo) {
        const activeViewId = section.views[0];
        activeView = state.appConfig.views[activeViewId];
    }
    return {
        sectionId,
        navInfo,
        activeView,
        views: section.views,
        sectionStyle: section.style,
        transition: section.transition,
        autoPlay: section.autoPlay,
        interval: section.interval,
        loop: section.loop,
        focusable: section.focusable
    };
}


/***/ }),

/***/ "./jimu-layouts/lib/translations/default.ts":
/*!**************************************************!*\
  !*** ./jimu-layouts/lib/translations/default.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    previousView: 'Previous view',
    nextView: 'Next view',
    originTL: 'Top left as origin',
    originTR: 'Top right as origin',
    originBL: 'Bottom left as origin',
    originBR: 'Bottom right as origin',
    alignLeft: 'Align left',
    alignRight: 'Align right',
    alignTop: 'Align top',
    alignCenter: 'Align center',
    alignHCenter: 'Horizontal center',
    alignVCenter: 'Vertical center',
    alignBottom: 'Align bottom',
    alignStretch: 'Align stretch',
    sendBackward: 'Send backward',
    bringForward: 'Bring forward',
    sendToBack: 'Send to back',
    bringToFront: 'Bring to front',
    zoomoutFixed: 'Zoom out fixed',
    order: 'Order',
    moveToLeft: 'Move to left',
    moveToRight: 'Move to right',
    moveToTop: 'Move to top',
    moveToBottom: 'Move to bottom',
    addView: 'New view',
    duplicateScreen: 'Duplicate screen',
    deleteScreen: 'Delete screen',
    applyToFirstPanel: 'Apply to the first panel',
    deleteView: 'Delete view',
    duplicateView: 'Duplicate view',
    insertABlock: 'Insert block',
    insertAScreenGroup: 'Insert screen group',
    moveup: 'Move up',
    movedown: 'Move down',
    chooseTemplate: 'Choose a {type} template',
    chooseHeaderTemplate: 'Choose a header template',
    chooseFooterTemplate: 'Choose a footer template',
    dropWidgetToAdd: 'Or drag a widget here',
    snapToLeft: 'Snap to left',
    snapToTop: 'Snap to top',
    snapToBottom: 'Snap to bottom',
    snapToRight: 'Snap to right',
    fullWidth: 'Full width',
    fullHeight: 'Full height',
    fullSize: 'Full size',
    restoreSize: 'Restore size',
    pendingTip: 'Move to the pending list',
    setting: 'Settings',
    dragToMove: 'Drag to move {label}',
    lockLayout: 'Lock position and size',
    unlockLayout: 'Unlock position and size',
    editHeader: 'Edit header',
    editFooter: 'Edit footer',
    transform: 'Transform',
    rotation: 'Rotation',
    angle: 'Angle',
    floating: 'Pin',
    sinking: 'Unpin',
    floatingArea: 'Floating area',
    changeToAuto: 'Change to auto',
    changeToCustom: 'Change to custom',
    positionType: 'Position type',
    sticky: 'Sticky',
    fixed: 'Fixed',
    flow: 'Flow',
    stack: 'Stack',
    fixedAtTop: 'Floating at the top when scrolling',
    actNormal: 'Act as normal widget',
    hideInDesignView: 'Hide in design view',
    showInDesignView: 'Show in design view',
    unlockGridItem: 'Unlock this widget to reorganize its internal widgets.',
    lockGridItem: 'Lock this widget.',
    splitHorizontally: 'Split horizontally',
    splitVertically: 'Split vertically'
});


/***/ }),

/***/ "./jimu-layouts/lib/types.ts":
/*!***********************************!*\
  !*** ./jimu-layouts/lib/types.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CLICK_TOLRERANCE: () => (/* binding */ CLICK_TOLRERANCE),
/* harmony export */   COLS_IN_ONE_ROW: () => (/* binding */ COLS_IN_ONE_ROW),
/* harmony export */   CONTEXT_MENU_ICON_SIZE: () => (/* binding */ CONTEXT_MENU_ICON_SIZE),
/* harmony export */   CONTEXT_MENU_ITEM_SIZE: () => (/* binding */ CONTEXT_MENU_ITEM_SIZE),
/* harmony export */   DEFAULT_AUTOPLAY_INTERVAL: () => (/* binding */ DEFAULT_AUTOPLAY_INTERVAL),
/* harmony export */   LayoutItemSizeModes: () => (/* binding */ LayoutItemSizeModes),
/* harmony export */   LayoutZIndex: () => (/* binding */ LayoutZIndex),
/* harmony export */   MIN_LAYOUT_ITEM_SIZE: () => (/* binding */ MIN_LAYOUT_ITEM_SIZE),
/* harmony export */   OrderAdjustType: () => (/* binding */ OrderAdjustType)
/* harmony export */ });
var OrderAdjustType;
(function (OrderAdjustType) {
    OrderAdjustType[OrderAdjustType["BringForward"] = 0] = "BringForward";
    OrderAdjustType[OrderAdjustType["SendBackward"] = 1] = "SendBackward";
    OrderAdjustType[OrderAdjustType["BringToFront"] = 2] = "BringToFront";
    OrderAdjustType[OrderAdjustType["SendToBack"] = 3] = "SendToBack";
})(OrderAdjustType || (OrderAdjustType = {}));
const COLS_IN_ONE_ROW = 12;
const CONTEXT_MENU_ITEM_SIZE = 28;
const CONTEXT_MENU_ICON_SIZE = 16;
const MIN_LAYOUT_ITEM_SIZE = 16;
const CLICK_TOLRERANCE = 5;
const DEFAULT_AUTOPLAY_INTERVAL = 3;
// 0 < zIndex < 10 is managed by component itself
var LayoutZIndex;
(function (LayoutZIndex) {
    LayoutZIndex["Auto"] = "auto";
    LayoutZIndex[LayoutZIndex["Normal"] = 0] = "Normal";
    LayoutZIndex[LayoutZIndex["BoundaryDropArea"] = 10] = "BoundaryDropArea";
    LayoutZIndex[LayoutZIndex["DragMoveTip"] = 20] = "DragMoveTip";
    LayoutZIndex[LayoutZIndex["HandlerTools"] = 30] = "HandlerTools";
    LayoutZIndex[LayoutZIndex["DraggingItem"] = 40] = "DraggingItem";
})(LayoutZIndex || (LayoutZIndex = {}));
var LayoutItemSizeModes;
(function (LayoutItemSizeModes) {
    LayoutItemSizeModes["Auto"] = "AUTO";
    LayoutItemSizeModes["Stretch"] = "STRETCH";
    LayoutItemSizeModes["Custom"] = "CUSTOM";
})(LayoutItemSizeModes || (LayoutItemSizeModes = {}));


/***/ }),

/***/ "./jimu-layouts/lib/use-viewport-intersection.ts":
/*!*******************************************************!*\
  !*** ./jimu-layouts/lib/use-viewport-intersection.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useViewportIntersection: () => (/* binding */ useViewportIntersection)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function buildThresholdList() {
    const step = 10;
    const result = [0];
    for (let i = 1; i <= step; i++) {
        result.push(i / step);
    }
    return result;
}
/**
 *
 * @param ref
 * @param rootElement
 * @param onIntersectionChange
 */
function useViewportIntersection(ref, watchViewportVisibility) {
    const observerRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef();
    const [isInViewport, setIsInViewport] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(true);
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (observerRef.current) {
            observerRef.current.unobserve(ref);
            observerRef.current = null;
        }
        if (!watchViewportVisibility) {
            return;
        }
        const handleIntersectionChange = (entry) => {
            if (entry.target.classList.contains('playing-animation')) {
                return;
            }
            if (entry.boundingClientRect.width > 0 && entry.boundingClientRect.height > 0) {
                setIsInViewport(entry.isIntersecting);
            }
        };
        if (ref && typeof IntersectionObserver === 'function') {
            const handler = (entries) => {
                handleIntersectionChange(entries[0]);
            };
            const observer = new IntersectionObserver(handler, {
                threshold: buildThresholdList(),
                root: document,
                rootMargin: '20%'
            });
            observer.observe(ref);
            observerRef.current = observer;
            return () => {
                observerRef.current.unobserve(ref);
                observerRef.current = null;
            };
        }
    }, [ref, watchViewportVisibility]);
    return isInViewport;
}


/***/ }),

/***/ "./jimu-layouts/lib/utils.ts":
/*!***********************************!*\
  !*** ./jimu-layouts/lib/utils.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   autoBindHandlers: () => (/* binding */ autoBindHandlers),
/* harmony export */   calHeightOfLayoutItem: () => (/* binding */ calHeightOfLayoutItem),
/* harmony export */   contains: () => (/* binding */ contains),
/* harmony export */   emptyFunc: () => (/* binding */ emptyFunc),
/* harmony export */   expandStyleArray: () => (/* binding */ expandStyleArray),
/* harmony export */   fromRatio: () => (/* binding */ fromRatio),
/* harmony export */   gcd: () => (/* binding */ gcd),
/* harmony export */   getActivePagePart: () => (/* binding */ getActivePagePart),
/* harmony export */   getAppConfig: () => (/* binding */ getAppConfig),
/* harmony export */   getCurrentDialogId: () => (/* binding */ getCurrentDialogId),
/* harmony export */   getCurrentDialogRootLayoutId: () => (/* binding */ getCurrentDialogRootLayoutId),
/* harmony export */   getCurrentPageId: () => (/* binding */ getCurrentPageId),
/* harmony export */   getCurrentPageRootLayoutId: () => (/* binding */ getCurrentPageRootLayoutId),
/* harmony export */   getCurrentSizeMode: () => (/* binding */ getCurrentSizeMode),
/* harmony export */   getFooterRootLayoutId: () => (/* binding */ getFooterRootLayoutId),
/* harmony export */   getHeaderRootLayoutId: () => (/* binding */ getHeaderRootLayoutId),
/* harmony export */   getLayoutItemSizeMode: () => (/* binding */ getLayoutItemSizeMode),
/* harmony export */   getMaximumId: () => (/* binding */ getMaximumId),
/* harmony export */   getValueOfBBox: () => (/* binding */ getValueOfBBox),
/* harmony export */   handleOnebyOneAnimation: () => (/* binding */ handleOnebyOneAnimation),
/* harmony export */   intersects: () => (/* binding */ intersects),
/* harmony export */   isEmptyLayout: () => (/* binding */ isEmptyLayout),
/* harmony export */   isFunctionalWidget: () => (/* binding */ isFunctionalWidget),
/* harmony export */   isNumber: () => (/* binding */ isNumber),
/* harmony export */   isPercentage: () => (/* binding */ isPercentage),
/* harmony export */   isRTL: () => (/* binding */ isRTL),
/* harmony export */   isWidgetHasEmbeddedLayout: () => (/* binding */ isWidgetHasEmbeddedLayout),
/* harmony export */   isWidgetPlaceholder: () => (/* binding */ isWidgetPlaceholder),
/* harmony export */   mapStateToLayoutItemProps: () => (/* binding */ mapStateToLayoutItemProps),
/* harmony export */   mapStateToLayoutProps: () => (/* binding */ mapStateToLayoutProps),
/* harmony export */   mapStateToWidgetProps: () => (/* binding */ mapStateToWidgetProps),
/* harmony export */   normalizeLinearUnit: () => (/* binding */ normalizeLinearUnit),
/* harmony export */   parseAspectRatio: () => (/* binding */ parseAspectRatio),
/* harmony export */   relativeClientRect: () => (/* binding */ relativeClientRect),
/* harmony export */   replaceBoundingBox: () => (/* binding */ replaceBoundingBox),
/* harmony export */   shouldUseAspectRatio: () => (/* binding */ shouldUseAspectRatio),
/* harmony export */   toRatio: () => (/* binding */ toRatio),
/* harmony export */   updateBoundingBoxProp: () => (/* binding */ updateBoundingBoxProp)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ "./jimu-layouts/lib/types.ts");
/* harmony import */ var _search_contents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search/contents */ "./jimu-layouts/lib/search/contents.ts");
/* eslint-disable prefer-const */




const emptyFunc = () => { };
function autoBindHandlers(el, fns) {
    fns.forEach(key => {
        if (el[key]) {
            el[key] = el[key].bind(el);
        }
    });
}
/**
 * Get the maximum id of the layout item which can be converted to a number.
 * @param layoutMap
 */
function getMaximumId(layoutMap) {
    let max = -1;
    if (layoutMap.content) {
        Object.keys(layoutMap.content).forEach(key => {
            const id = parseInt(key, 10);
            if (id > max) {
                max = id;
            }
        });
    }
    return max;
}
/**
 * Checks if `value` is classified as a percentage value
 * @param value
 */
function isPercentage(value) {
    return /^-?\d*(\.\d+)?%$/.test(value);
}
function isEmptyLayout(layout) {
    var _a;
    const itemIds = Object.keys((_a = layout.content) !== null && _a !== void 0 ? _a : {});
    if (itemIds.length === 0) {
        return true;
    }
    const hasNonPending = itemIds.some(id => {
        const item = layout.content[id];
        return !item.isPending;
    });
    return !hasNonPending;
}
/**
 * Checks if `value` is classified as a finite number
 * @param value
 */
function isNumber(value) {
    const result = parseFloat(value);
    return !isNaN(result) && isFinite(result);
}
function getValueOfBBox(bbox, prop) {
    if ((bbox === null || bbox === void 0 ? void 0 : bbox[prop]) == null) {
        return null;
    }
    if (typeof bbox[prop] === 'string') {
        return bbox[prop];
    }
    if (isNumber(bbox[prop])) {
        return `${Math.round(parseFloat(bbox[prop]))}px`;
    }
    return null;
}
/**
 * Convert the value to percentage value in respect to the total
 * @param value
 * @param total
 */
function toRatio(value, total) {
    return `${((value * 100) / total).toFixed(1)}%`;
}
/**
 * Convert a percentage value to pixel in respect to the total
 * @param ratio
 * @param total
 */
function fromRatio(ratio, total) {
    return (parseFloat(`${ratio}`) * total) / 100;
}
const mapStateToLayoutProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state) => state.appConfig.mainSizeMode,
    (state) => state.browserSizeMode,
    (state, ownProps) => {
        var _a, _b, _c, _d, _e;
        let isCustomRoot;
        if (state.browserSizeMode === state.appConfig.mainSizeMode) {
            isCustomRoot = true;
        }
        else {
            // depend on the root layout item
            let useSizeMode;
            if ((_a = ownProps.layouts) === null || _a === void 0 ? void 0 : _a[state.browserSizeMode]) {
                useSizeMode = state.browserSizeMode;
            }
            else if ((_b = ownProps.layouts) === null || _b === void 0 ? void 0 : _b[state.appConfig.mainSizeMode]) {
                useSizeMode = state.appConfig.mainSizeMode;
            }
            const useLayoutId = (_c = ownProps.layouts) === null || _c === void 0 ? void 0 : _c[useSizeMode];
            const container = (0,_search_contents__WEBPACK_IMPORTED_MODULE_3__.getRootContainerInfoOfLayout)(state.appConfig, useLayoutId, useSizeMode);
            if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Header) {
                isCustomRoot = state.appConfig.header.layout[state.browserSizeMode] != null;
            }
            else if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Footer) {
                isCustomRoot = state.appConfig.footer.layout[state.browserSizeMode] != null;
            }
            else if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Dialog) {
                const dialogJson = state.appConfig.dialogs[container.id];
                isCustomRoot = dialogJson.layout[state.browserSizeMode] != null;
            }
            else if ((container === null || container === void 0 ? void 0 : container.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.ContainerType.Page) {
                const pageJson = state.appConfig.pages[container.id];
                isCustomRoot = pageJson.layout[state.browserSizeMode] != null;
            }
        }
        if (isCustomRoot && ((_d = ownProps.layouts) === null || _d === void 0 ? void 0 : _d[state.browserSizeMode])) {
            const layoutId = ownProps.layouts[state.browserSizeMode];
            return state.appConfig.layouts[layoutId];
        }
        const layoutId = (_e = ownProps.layouts) === null || _e === void 0 ? void 0 : _e[state.appConfig.mainSizeMode];
        return state.appConfig.layouts[layoutId];
    }
], (mainSizeMode, browserSizeMode, layout) => ({ mainSizeMode, browserSizeMode, layout }));
const mapStateToLayoutItemProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        return (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
    },
    (state, ownProps) => {
        var _a, _b, _c, _d, _e, _f;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            const widget = state.appConfig.widgets[layoutItem.widgetId];
            return (_f = (_e = (_d = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _d === void 0 ? void 0 : _d.properties) === null || _e === void 0 ? void 0 : _e.watchViewportVisibility) !== null && _f !== void 0 ? _f : false;
        }
        return false;
    },
    (state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.selection; },
    (state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.animationPreview; },
    (state) => { var _a; return (_a = state.appRuntimeInfo) === null || _a === void 0 ? void 0 : _a.hoverPreview; },
    (_, ownProps) => ownProps.layoutId
], (layoutItem, watchViewportVisibility, selection, animationPreview, hoverPreview, layoutId) => {
    var _a;
    if (!layoutItem) {
        return {
            layoutItem: null,
            selected: false
        };
    }
    let selected = false;
    const isPending = (_a = layoutItem.isPending) !== null && _a !== void 0 ? _a : false;
    if (selection) {
        selected = selection.layoutId === layoutId && selection.layoutItemId === layoutItem.id;
    }
    const result = {
        selected,
        watchViewportVisibility,
        layoutItem: isPending ? null : layoutItem,
        autoScroll: selected ? selection.autoScroll : undefined
    };
    if (selected && (animationPreview === null || animationPreview === void 0 ? void 0 : animationPreview.layoutInfo)) {
        const { layoutId: animLayoutId, layoutItemId: animItemId } = animationPreview.layoutInfo;
        result.animationPreview = animLayoutId === layoutId && animItemId === layoutItem.id;
        result.playMode = result.animationPreview ? animationPreview.playMode : null;
        result.previewId = result.animationPreview ? animationPreview.id : null;
    }
    else if (selected && (hoverPreview === null || hoverPreview === void 0 ? void 0 : hoverPreview.layoutInfo)) {
        const { layoutId: hoverLayoutId, layoutItemId: hoverItemId } = hoverPreview.layoutInfo;
        result.hoverPreview = hoverLayoutId === layoutId && hoverItemId === layoutItem.id;
        result.previewId = result.hoverPreview ? hoverPreview.id : null;
    }
    return result;
});
const mapStateToWidgetProps = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.createSelector)([
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            return state.appConfig.widgets[layoutItem.widgetId];
        }
    },
    (state, ownProps) => {
        var _a, _b, _c, _d;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && !layoutItem.widgetId) {
            return (_d = layoutItem.setting) === null || _d === void 0 ? void 0 : _d.placeholderStyle;
        }
    },
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && layoutItem.widgetId) {
            return state.widgetsRuntimeInfo[layoutItem.widgetId];
        }
    },
    (state, ownProps) => {
        var _a, _b, _c;
        const { layoutId, layoutItemId } = ownProps;
        const layoutItem = (_c = (_b = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId]) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c[layoutItemId];
        if ((layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget && !layoutItem.widgetId) {
            return state.widgetsState[layoutItem.widgetId];
        }
    },
    (state, ownProps) => {
        var _a, _b;
        const { layoutId } = ownProps;
        const layoutJson = (_a = state.appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId];
        if (((_b = layoutJson.parent) === null || _b === void 0 ? void 0 : _b.type) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutParentType.Widget) {
            const parentWidgetId = layoutJson.parent.id;
            const widgetJson = state.appConfig.widgets[parentWidgetId];
            return /widgets\/common\/controller\/?/.test(widgetJson.uri);
        }
        return false;
    }
], (widget, placeholderStyle, widgetRuntimeInfo, widgetState, isInController) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;
    const supportInlineEditing = (_b = (_a = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.supportInlineEditing;
    return {
        hasEmbeddedLayout: ((_d = (_c = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _c === void 0 ? void 0 : _c.properties) === null || _d === void 0 ? void 0 : _d.hasEmbeddedLayout) && Object.keys((_e = widget.layouts) !== null && _e !== void 0 ? _e : {}).length > 0,
        supportInlineEditing,
        supportRepeat: (_g = (_f = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _f === void 0 ? void 0 : _f.properties) === null || _g === void 0 ? void 0 : _g.supportRepeat,
        isClassLoaded: (_h = widgetRuntimeInfo === null || widgetRuntimeInfo === void 0 ? void 0 : widgetRuntimeInfo.isClassLoaded) !== null && _h !== void 0 ? _h : false,
        isInlineEditing: supportInlineEditing && (widgetRuntimeInfo === null || widgetRuntimeInfo === void 0 ? void 0 : widgetRuntimeInfo.isInlineEditing),
        isInController,
        useDragHandler: (_l = (_k = (_j = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _j === void 0 ? void 0 : _j.properties) === null || _k === void 0 ? void 0 : _k.useDragHandler) !== null && _l !== void 0 ? _l : false,
        widgetStyle: widget != null ? widget.style : placeholderStyle,
        canCrossLayoutBoundary: (_o = (_m = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _m === void 0 ? void 0 : _m.properties) === null || _o === void 0 ? void 0 : _o.canCrossLayoutBoundary,
        hasExtension: ((_q = (_p = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _p === void 0 ? void 0 : _p.extensions) === null || _q === void 0 ? void 0 : _q.length) > 0,
        widgetJson: widget,
        widgetId: widget === null || widget === void 0 ? void 0 : widget.id,
        isFunctionalWidget: ((_r = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _r === void 0 ? void 0 : _r.widgetType) !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout,
        widgetState
    };
});
function isWidgetHasEmbeddedLayout(widgetId, appConfig) {
    var _a, _b, _c, _d;
    const widget = (_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _a === void 0 ? void 0 : _a[widgetId];
    if ((_c = (_b = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _b === void 0 ? void 0 : _b.properties) === null || _c === void 0 ? void 0 : _c.hasEmbeddedLayout) {
        return Object.keys((_d = widget === null || widget === void 0 ? void 0 : widget.layouts) !== null && _d !== void 0 ? _d : {}).length > 0;
    }
    return false;
}
function isFunctionalWidget(widgetId, appConfig) {
    var _a, _b;
    const widget = (_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _a === void 0 ? void 0 : _a[widgetId];
    const type = (_b = widget === null || widget === void 0 ? void 0 : widget.manifest) === null || _b === void 0 ? void 0 : _b.widgetType;
    return type !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.WidgetType.Layout;
}
function isWidgetPlaceholder(appConfig, item) {
    var _a, _b;
    if (!item || item.itemType !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget) {
        return false;
    }
    if (item.layoutInfo) {
        // Layout item without widgetId
        const { layoutId, layoutItemId } = item.layoutInfo;
        const layoutItem = (_b = (_a = appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId].content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        if (layoutItem && !layoutItem.widgetId) {
            return true;
        }
    }
    if (!item.layoutInfo && !item.uri) {
        // New widget without uri
        return true;
    }
    return false;
}
/**
 * Replace the values of bounding box b1 with values of b2, try to keep the unit of each property.
 * @param b1
 * @param b2
 * @param containerRect
 */
function replaceBoundingBox(b1, b2, containerRect) {
    if (!b1) {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
            left: isPercentage(b2.left) ? b2.left : `${Math.round(b2.left)}px`,
            right: isPercentage(b2.right) ? b2.right : `${Math.round(b2.right)}px`,
            top: isPercentage(b2.top) ? b2.top : `${Math.round(b2.top)}px`,
            bottom: isPercentage(b2.bottom) ? b2.bottom : `${Math.round(b2.bottom)}px`,
            width: isPercentage(b2.width) ? b2.width : `${Math.round(b2.width)}px`,
            height: isPercentage(b2.height) ? b2.height : `${Math.round(b2.height)}px`
        });
    }
    let result = b1;
    ['left', 'right', 'top', 'bottom', 'width', 'height'].forEach(key => {
        if (result[key] != null) {
            result = updateBoundingBoxProp(key, result, b2[key], containerRect);
        }
        else if (b2[key] != null) {
            result = result.set(key, `${Math.round(b2[key])}px`);
        }
    });
    return result;
}
/**
 * Update a property of the bounding box
 * @param prop
 * @param b
 * @param newValue
 * @param containerRect
 */
function updateBoundingBoxProp(prop, b, newValue, containerRect) {
    if (b[prop] == null || b[prop] === 'auto') {
        return b;
    }
    let updated = b;
    if (isPercentage(b[prop])) {
        if (prop === 'left' || prop === 'right' || prop === 'width') {
            if (isPercentage(newValue)) {
                updated = b.set(prop, newValue);
            }
            else {
                updated = b.set(prop, `${((+newValue * 100) / containerRect.width).toFixed(4)}%`);
            }
        }
        else {
            if (isPercentage(newValue)) {
                updated = b.set(prop, newValue);
            }
            else {
                updated = b.set(prop, `${((+newValue * 100) / containerRect.height).toFixed(4)}%`);
            }
        }
    }
    else {
        if (isPercentage(newValue)) {
            if (prop === 'left' || prop === 'right' || prop === 'width') {
                updated = b.set(prop, Math.round((parseFloat(`${newValue}`) * containerRect.width) / 100));
            }
            else {
                updated = b.set(prop, Math.round((parseFloat(`${newValue}`) * containerRect.height) / 100));
            }
        }
        else {
            if (isNaN(+newValue)) {
                updated = b.without(prop);
            }
            else {
                updated = b.set(prop, `${Math.round(+newValue)}px`);
            }
        }
    }
    return updated;
}
function relativeClientRect(r1, r2) {
    return {
        left: r1.left - r2.left,
        top: r1.top - r2.top,
        right: r1.right,
        bottom: r1.bottom,
        width: r1.width,
        height: r1.height,
        id: null
    };
}
function isRTL() {
    var _a, _b;
    return (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext) === null || _a === void 0 ? void 0 : _a.isRTL) !== null && _b !== void 0 ? _b : false;
}
function parseAspectRatio(ratio) {
    let width = 100;
    let height = 100;
    if (typeof ratio === 'number') {
        width = 100;
        height = Math.round(ratio * 100);
    }
    else if (typeof ratio === 'string') {
        const items = ratio.split(':');
        width = parseInt(items[0], 10);
        height = parseInt(items[1], 10);
    }
    return width / height;
}
function expandStyleArray(dataArray) {
    if (!dataArray || dataArray.length === 0) {
        return [0, 0, 0, 0];
    }
    else if (dataArray.length === 1) {
        return [dataArray[0], dataArray[0], dataArray[0], dataArray[0]];
    }
    else if (dataArray.length === 2) { // top/bottom, left/right
        return [dataArray[0], dataArray[1], dataArray[0], dataArray[1]];
    }
    else if (dataArray.length === 3) {
        return [dataArray[0], dataArray[1], dataArray[2], 0];
    }
    else {
        return [dataArray[0], dataArray[1], dataArray[2], dataArray[3]];
    }
}
function calHeightOfLayoutItem(containerHeight, layoutItem) {
    var _a, _b, _c, _d;
    const setting = (_a = layoutItem.setting) !== null && _a !== void 0 ? _a : {};
    const mode = getLayoutItemSizeMode('height', layoutItem.bbox, setting.autoProps);
    let result;
    if (setting.heightMode === 'ratio') {
        result = {
            setting: {
                heightMode: 'ratio',
                aspectRatio: (_b = setting.aspectRatio) !== null && _b !== void 0 ? _b : 1,
                autoProps: { height: _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom }
            }
        };
    }
    else if (mode !== _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom) {
        return {
            height: mode === _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch ? containerHeight : null,
            setting: {
                autoProps: { height: mode }
            }
        };
    }
    else {
        // fit or fixed or no height mode
        let height = (_d = (_c = layoutItem.bbox) === null || _c === void 0 ? void 0 : _c.height) !== null && _d !== void 0 ? _d : containerHeight;
        if (isPercentage(height)) {
            height = fromRatio(height, containerHeight);
        }
        else {
            height = parseInt(height);
        }
        result = {
            height,
            setting: {
                heightMode: 'fixed',
                autoProps: { height: _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom }
            }
        };
    }
    return result;
}
function getAppConfig() {
    var _a;
    return window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
}
function getCurrentSizeMode() {
    var _a, _b;
    return ((_a = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _a === void 0 ? void 0 : _a.isBuilder)
        ? (_b = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _b === void 0 ? void 0 : _b.browserSizeMode
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().browserSizeMode;
}
function getCurrentPageId() {
    var _a, _b, _c;
    return window.jimuConfig.isBuilder
        ? (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.currentPageId
        : (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.currentPageId;
}
function getCurrentDialogId() {
    var _a, _b, _c;
    return window.jimuConfig.isBuilder
        ? (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.currentDialogId
        : (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.currentDialogId;
}
function getActivePagePart() {
    var _a, _b, _c;
    return window.jimuConfig.isBuilder
        ? (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appRuntimeInfo) === null || _b === void 0 ? void 0 : _b.activePagePart
        : (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appRuntimeInfo) === null || _c === void 0 ? void 0 : _c.activePagePart;
}
function getCurrentDialogRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const dialogId = getCurrentDialogId();
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.dialogs[dialogId]) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
function getCurrentPageRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const pageId = getCurrentPageId();
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.pages[pageId]) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
function getHeaderRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.header) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
function getFooterRootLayoutId() {
    var _a, _b, _c;
    const appConfig = window.jimuConfig.isBuilder
        ? (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder) === null || _a === void 0 ? void 0 : _a.appConfig
        : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
    const browserSizeMode = getCurrentSizeMode();
    return (_c = (_b = appConfig === null || appConfig === void 0 ? void 0 : appConfig.footer) === null || _b === void 0 ? void 0 : _b.layout) === null || _c === void 0 ? void 0 : _c[browserSizeMode];
}
/**
 * Check if rect1 contains rect2
 * @param rect1
 * @param rect2
 */
function contains(rect1, rect2) {
    return rect2.left >= rect1.left && rect2.left + rect2.width <= rect1.left + rect1.width &&
        rect2.top >= rect1.top && rect2.top + rect2.height <= rect1.top + rect1.height;
}
function intersects(r1, r2) {
    return !(r2.left > r1.left + r1.width ||
        r2.left + r2.width < r1.left ||
        r2.top > r1.top + r1.height ||
        r2.top + r2.height < r1.top);
}
function normalizeLinearUnit(value) {
    var _a, _b, _c, _d;
    let unit;
    let distance;
    if (value != null && typeof value === 'object') {
        unit = (_a = value.unit) !== null && _a !== void 0 ? _a : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PIXEL;
        distance = (_b = value.distance) !== null && _b !== void 0 ? _b : 0;
    }
    else {
        const ret = jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.getValueAndUnit(value);
        unit = (_c = ret === null || ret === void 0 ? void 0 : ret[1]) !== null && _c !== void 0 ? _c : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PIXEL;
        distance = (_d = ret === null || ret === void 0 ? void 0 : ret[0]) !== null && _d !== void 0 ? _d : 0;
    }
    // Keep one decimal in percentage and use integer in pixel
    distance = unit === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE ? Math.round(distance * 10) / 10 : Math.round(distance);
    return `${distance}${unit}`;
}
function getLayoutItemSizeMode(side, bbox, autoProps) {
    const mode = autoProps === null || autoProps === void 0 ? void 0 : autoProps[side];
    const first = side === 'width' ? 'left' : 'top';
    const last = side === 'width' ? 'right' : 'bottom';
    if (!mode) { // false or undefined
        if (bbox[side] != null) {
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom;
        }
        else if (bbox[first] != null && bbox[last] != null) {
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch;
        }
        return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto;
    }
    if (mode === true) { // width or height is auto
        if (bbox[first] != null && bbox[last] != null) {
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch;
        }
        return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto;
    }
    switch (mode) {
        case _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto:
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Auto;
        case _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch:
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Stretch;
        default:
            return _types__WEBPACK_IMPORTED_MODULE_2__.LayoutItemSizeModes.Custom;
    }
}
function shouldUseAspectRatio(itemSetting) {
    return itemSetting.heightMode === 'ratio' && itemSetting.aspectRatio != null;
}
function gcd(x, y) {
    let m = Math.max(x, y);
    let n = Math.min(x, y);
    while (n !== 0) {
        const temp = n;
        n = m % n;
        m = temp;
    }
    return m;
}
function handleOnebyOneAnimation(props) {
    const { delay, isLastChild } = props;
    return { delay, isLastChild };
}


/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*****************************************!*\
  !*** ./jimu-layouts/layout-runtime.tsx ***!
  \*****************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CLICK_TOLRERANCE: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.CLICK_TOLRERANCE),
/* harmony export */   COLS_IN_ONE_ROW: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.COLS_IN_ONE_ROW),
/* harmony export */   CONTEXT_MENU_ICON_SIZE: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.CONTEXT_MENU_ICON_SIZE),
/* harmony export */   CONTEXT_MENU_ITEM_SIZE: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.CONTEXT_MENU_ITEM_SIZE),
/* harmony export */   ColumnLayoutViewer: () => (/* reexport safe */ _lib_column_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_5__["default"]),
/* harmony export */   DEFAULT_AUTOPLAY_INTERVAL: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.DEFAULT_AUTOPLAY_INTERVAL),
/* harmony export */   FixedLayoutViewer: () => (/* reexport safe */ _lib_fixed_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_4__["default"]),
/* harmony export */   GridLayoutViewer: () => (/* reexport safe */ _lib_grid_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_7__["default"]),
/* harmony export */   LayoutContext: () => (/* reexport safe */ _lib_builder_layout_context__WEBPACK_IMPORTED_MODULE_2__.LayoutContext),
/* harmony export */   LayoutEntry: () => (/* reexport safe */ _lib_runtime_layout_entry__WEBPACK_IMPORTED_MODULE_11__["default"]),
/* harmony export */   LayoutItem: () => (/* reexport safe */ _lib_runtime_layout_item__WEBPACK_IMPORTED_MODULE_12__["default"]),
/* harmony export */   LayoutItemSizeModes: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.LayoutItemSizeModes),
/* harmony export */   LayoutZIndex: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.LayoutZIndex),
/* harmony export */   MIN_LAYOUT_ITEM_SIZE: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.MIN_LAYOUT_ITEM_SIZE),
/* harmony export */   OrderAdjustType: () => (/* reexport safe */ _lib_types__WEBPACK_IMPORTED_MODULE_16__.OrderAdjustType),
/* harmony export */   PageContext: () => (/* reexport safe */ _lib_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageContext),
/* harmony export */   PageRenderer: () => (/* reexport safe */ _lib_runtime_page_renderer__WEBPACK_IMPORTED_MODULE_10__["default"]),
/* harmony export */   PageVisibilityContext: () => (/* reexport safe */ _lib_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.PageVisibilityContext),
/* harmony export */   RowLayoutViewer: () => (/* reexport safe */ _lib_row_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_6__["default"]),
/* harmony export */   SectionRenderer: () => (/* reexport safe */ _lib_runtime_section_renderer__WEBPACK_IMPORTED_MODULE_9__.SectionRenderer),
/* harmony export */   ViewVisibilityContext: () => (/* reexport safe */ _lib_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.ViewVisibilityContext),
/* harmony export */   ViewportVisibilityContext: () => (/* reexport safe */ _lib_builder_page_context__WEBPACK_IMPORTED_MODULE_1__.ViewportVisibilityContext),
/* harmony export */   WidgetRenderer: () => (/* reexport safe */ _lib_runtime_widget_renderer__WEBPACK_IMPORTED_MODULE_8__.WidgetRenderer),
/* harmony export */   defaultMessages: () => (/* reexport safe */ _lib_translations_default__WEBPACK_IMPORTED_MODULE_3__["default"]),
/* harmony export */   findLayoutBuilder: () => (/* reexport safe */ _lib_layout_factory__WEBPACK_IMPORTED_MODULE_15__.findLayoutBuilder),
/* harmony export */   findLayoutViewer: () => (/* reexport safe */ _lib_layout_factory__WEBPACK_IMPORTED_MODULE_15__.findLayoutViewer),
/* harmony export */   init: () => (/* binding */ init),
/* harmony export */   registerLayoutBuilder: () => (/* reexport safe */ _lib_layout_factory__WEBPACK_IMPORTED_MODULE_15__.registerLayoutBuilder),
/* harmony export */   registerLayoutViewer: () => (/* reexport safe */ _lib_layout_factory__WEBPACK_IMPORTED_MODULE_15__.registerLayoutViewer),
/* harmony export */   searchUtils: () => (/* reexport module object */ _lib_search__WEBPACK_IMPORTED_MODULE_13__),
/* harmony export */   utils: () => (/* reexport module object */ _lib_utils__WEBPACK_IMPORTED_MODULE_14__)
/* harmony export */ });
/* harmony import */ var _lib_builder_builder_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/builder/builder-locale */ "./jimu-layouts/lib/builder/builder-locale.ts");
/* harmony import */ var _lib_builder_page_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/builder/page-context */ "./jimu-layouts/lib/builder/page-context.tsx");
/* harmony import */ var _lib_builder_layout_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/builder/layout-context */ "./jimu-layouts/lib/builder/layout-context.tsx");
/* harmony import */ var _lib_translations_default__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/translations/default */ "./jimu-layouts/lib/translations/default.ts");
/* harmony import */ var _lib_fixed_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/fixed-layout/runtime/layout */ "./jimu-layouts/lib/fixed-layout/runtime/layout.tsx");
/* harmony import */ var _lib_column_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/column-layout/runtime/layout */ "./jimu-layouts/lib/column-layout/runtime/layout.tsx");
/* harmony import */ var _lib_row_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/row-layout/runtime/layout */ "./jimu-layouts/lib/row-layout/runtime/layout.tsx");
/* harmony import */ var _lib_grid_layout_runtime_layout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/grid-layout/runtime/layout */ "./jimu-layouts/lib/grid-layout/runtime/layout.tsx");
/* harmony import */ var _lib_runtime_widget_renderer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/runtime/widget-renderer */ "./jimu-layouts/lib/runtime/widget-renderer.tsx");
/* harmony import */ var _lib_runtime_section_renderer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/runtime/section-renderer */ "./jimu-layouts/lib/runtime/section-renderer.tsx");
/* harmony import */ var _lib_runtime_page_renderer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/runtime/page-renderer */ "./jimu-layouts/lib/runtime/page-renderer.tsx");
/* harmony import */ var _lib_runtime_layout_entry__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/runtime/layout-entry */ "./jimu-layouts/lib/runtime/layout-entry.tsx");
/* harmony import */ var _lib_runtime_layout_item__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/runtime/layout-item */ "./jimu-layouts/lib/runtime/layout-item.tsx");
/* harmony import */ var _lib_search__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/search */ "./jimu-layouts/lib/search/index.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./lib/utils */ "./jimu-layouts/lib/utils.ts");
/* harmony import */ var _lib_layout_factory__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/layout-factory */ "./jimu-layouts/lib/layout-factory.ts");
/* harmony import */ var _lib_types__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lib/types */ "./jimu-layouts/lib/types.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


















function init() {
    return __awaiter(this, void 0, void 0, function* () {
        return yield Promise.all([(0,_lib_builder_builder_locale__WEBPACK_IMPORTED_MODULE_0__.loadMessage)()]);
    });
}

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQTZDO0FBRWU7QUFFckQsTUFBTSxlQUFlLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDMUQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyxrRkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLDJEQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsOEVBQUcsSUFBTSxNQUFNLEVBQUk7QUFDMUQsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRWU7QUFFckQsTUFBTSxlQUFlLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDMUQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyxrRkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFP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QyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7U0FBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3pCLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBQ0QsT0FBTyxDQUFDO0FBQ1YsQ0FBQztBQUVNLFNBQVMsVUFBVSxDQUFFLEVBQU8sRUFBRSxFQUFPO0lBQzFDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM3QyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFN0MsT0FBTyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFO0FBQzNCLENBQUM7QUFFTSxTQUFTLFFBQVEsQ0FBRSxFQUFPLEVBQUUsRUFBTztJQUN4QyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FB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c3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21heGdyaWQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi92aXNpYmxlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvbGVmdC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAtZG91YmxlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tYXhncmlkLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9hcHBsaWNhdGlvbi92aXNpYmxlLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAtZG91YmxlLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvY2xvc2UudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvYnVpbGRlci1sb2NhbGUudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9sYXlvdXQtY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvYnVpbGRlci9wYWdlLWNvbnRleHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2J1aWxkZXIvdGhlbWUtdG9vbHRpcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29sdW1uLWxheW91dC9jb21tb24vc3R5bGUudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29sdW1uLWxheW91dC9jb21tb24vdXRpbC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9jb2x1bW4tbGF5b3V0L2RlZmF1bHQtc2V0dGluZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9jb2x1bW4tbGF5b3V0L3J1bnRpbWUvbGF5b3V0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbHVtbi1sYXlvdXQvcnVudGltZS9sYXlvdXQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbW1vbi9wYWdlLXV0aWwudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvY29udHJvbGxlci1wYW5lbC9ydW50aW1lL2dyb3VwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9jb250cm9sbGVyLXBhbmVsL3J1bnRpbWUvbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9jb250cm9sbGVyLXBhbmVsL3J1bnRpbWUvcGFuZWwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2NvbnRyb2xsZXItcGFuZWwvdXRpbC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9kZWZhdWx0LWNvbW1vbi1zZXR0aW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2ZpeGVkLWxheW91dC9jb21tb24vdXRpbC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9maXhlZC1sYXlvdXQvZGVmYXVsdC1zZXR0aW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2ZpeGVkLWxheW91dC9maXhlZC1sYXlvdXQtdXRpbC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9maXhlZC1sYXlvdXQvcnVudGltZS9sYXlvdXQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZml4ZWQtbGF5b3V0L3J1bnRpbWUvbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9jb21tb24vaW5kZXgudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2NvbW1vbi9zY3JlZW4tbWFpbi1wYW5lbC1saXN0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9jb21tb24vc2NyZWVuLW1haW4tcGFuZWwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2NvbW1vbi9zY3JlZW4tc2lkZS1wYW5lbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvY29tbW9uL3R5cGUudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvY29tbW9uL3V0aWwudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvZGVmYXVsdC1zZXR0aW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L2xheW91dC10cmFuc2Zvcm0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvbGF5b3V0LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L3J1bnRpbWUvZmxvYXRpbmctbGF5b3V0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L3J1bnRpbWUvbGF5b3V0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2Zsb3ctbGF5b3V0L3J1bnRpbWUvbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9mbG93LWxheW91dC9ydW50aW1lL3NjcmVlbi1ncm91cC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZmxvdy1sYXlvdXQvdXNlLWludGVyc2VjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZ3JpZC1sYXlvdXQvY29tbW9uL3NwbGl0dGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9jb21tb24vdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZ3JpZC1sYXlvdXQvbGF5b3V0LXRyYW5zZm9ybS50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ncmlkLWxheW91dC9ydW50aW1lL2dyaWQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZ3JpZC1sYXlvdXQvcnVudGltZS9sYXlvdXQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvZ3JpZC1sYXlvdXQvcnVudGltZS9sYXlvdXQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL2xheW91dC1mYWN0b3J5LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3Jvdy1sYXlvdXQvY29tbW9uL3V0aWwudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9kZWZhdWx0LXNldHRpbmcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9sYXlvdXQtdHJhbnNmb3JtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3Jvdy1sYXlvdXQvcnVudGltZS9sYXlvdXQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9ydW50aW1lL2xheW91dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC9ydW50aW1lL3Jvdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcm93LWxheW91dC90eXBlcy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9yb3ctbGF5b3V0L3V0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3J1bnRpbWUvbGF5b3V0LWVudHJ5LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL2xheW91dC1pdGVtLWhvb2svdXNlLWxpdmV2aWV3LXBsYXlpZC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL2xheW91dC1pdGVtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL3BhZ2UtYm9keS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcnVudGltZS9wYWdlLWZvb3Rlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcnVudGltZS9wYWdlLWhlYWRlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcnVudGltZS9wYWdlLXJlbmRlcmVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL3ByaW50LXByZXZpZXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcnVudGltZS9zZWN0aW9uLWF1dG8tcGxheS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvcnVudGltZS9zZWN0aW9uLWNvbnRlbnQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3J1bnRpbWUvc2VjdGlvbi1uYXYudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3J1bnRpbWUvc2VjdGlvbi1yZW5kZXJlci1iYXNlLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL3NlY3Rpb24tcmVuZGVyZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3J1bnRpbWUvdmlldy1jb250ZW50LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9ydW50aW1lL3dpZGdldC1yZW5kZXJlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtbGF5b3V0cy9saWIvc2VhcmNoL2NvbnRlbnRzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3NlYXJjaC9pbmRleC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9zZWFyY2gvcGVuZGluZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi9zZWFyY2gvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi90cmFuc2xhdGlvbnMvZGVmYXVsdC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi90eXBlcy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xpYi91c2Utdmlld3BvcnQtaW50ZXJzZWN0aW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWxheW91dHMvbGliL3V0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdGhlbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWlcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxMiAxMlxcXCI+PHBhdGggZmlsbD1cXFwiI2ZmZlxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTIgMEg3djFoNHY0aDFWMXpNMCAxMmg1di0xSDFWN0gwdjR6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDEyYy0yLjY2NyAwLTUuNjY3LTEuMzMzLTctNCAxLjMzMy0yLjY2NyA0LjMzMy00IDctNHM1LjY2NyAxLjMzMyA3IDRjLTEuMzMzIDIuNjY3LTQuMzMzIDQtNyA0bTAtN2MtMi42MTggMC00LjU3OC45NjctNiAzIDEuNDIyIDIuMDMzIDMuMzgyIDMgNiAzczQuNTc4LS45NjcgNi0zYy0xLjQyMi0yLjAzMy0zLjM4Mi0zLTYtM20wIDUuNWEyLjUgMi41IDAgMSAxIDAtNSAyLjUgMi41IDAgMCAxIDAgNW0wLTFhMS41IDEuNSAwIDEgMCAwLTMgMS41IDEuNSAwIDAgMCAwIDNcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExLjM0NyAyLjE0NmEuNDg1LjQ4NSAwIDAgMSAwIC43MDhMNS43NiA4bDUuNTg3IDUuMTQ2YS40ODYuNDg2IDAgMCAxIDAgLjcwOC41MzguNTM4IDAgMCAxLS43MzggMGwtNS45NTYtNS41YS40ODUuNDg1IDAgMCAxIDAtLjcwOGw1Ljk1Ni01LjVhLjUzOC41MzggMCAwIDEgLjczOCAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjUzOC41MzggMCAwIDEgLjczOCAwbDUuOTU2IDUuNWEuNDg1LjQ4NSAwIDAgMSAwIC43MDhsLTUuOTU2IDUuNWEuNTM4LjUzOCAwIDAgMS0uNzM4IDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTEzLjE0NiAxMy44NDdhLjQ4Ni40ODYgMCAwIDAgLjcwOCAwIC41MzguNTM4IDAgMCAwIDAtLjczOGwtNS41LTUuOTU2YS40ODUuNDg1IDAgMCAwLS43MDggMGwtNS41IDUuOTU2YS41MzguNTM4IDAgMCAwIDAgLjczOC40ODUuNDg1IDAgMCAwIC43MDggMEw4IDguMjZ6bTAtNWEuNDg1LjQ4NSAwIDAgMCAuNzA4IDAgLjUzOC41MzggMCAwIDAgMC0uNzM4bC01LjUtNS45NTZhLjQ4NS40ODUgMCAwIDAtLjcwOCAwbC01LjUgNS45NTZhLjUzOC41MzggMCAwIDAgMCAuNzM4LjQ4NS40ODUgMCAwIDAgLjcwOCAwTDggMy4yNnpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm04Ljc0NSA4IDYuMSA2LjFhLjUyNy41MjcgMCAxIDEtLjc0NS43NDZMOCA4Ljc0NmwtNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ2LS43NDZsNi4xLTYuMS02LjEtNi4xYS41MjcuNTI3IDAgMCAxIC43NDYtLjc0Nmw2LjEgNi4xIDYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni43NDZ6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbWF4Z3JpZC5zdmcnXG5cbmV4cG9ydCBjb25zdCBNYXhncmlkT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL3Zpc2libGUuc3ZnJ1xuXG5leHBvcnQgY29uc3QgVmlzaWJsZU91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnN2ZydcblxuZXhwb3J0IGNvbnN0IExlZnRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xuXG5leHBvcnQgY29uc3QgUmlnaHRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAtZG91YmxlLnN2ZydcblxuZXhwb3J0IGNvbnN0IFVwRG91YmxlT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmcnXG5cbmV4cG9ydCBjb25zdCBDbG9zZU91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IGkxOG4sIGdldEFwcFN0b3JlLCBhcHBBY3Rpb25zLCB0cmFuc2xhdGVkTG9jYWxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkTWVzc2FnZSAoKTogUHJvbWlzZTxhbnk+IHtcbiAgbGV0IGxvY2FsZSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb250ZXh0LmxvY2FsZVxuICBsb2NhbGUgPSBpMThuLmdldExvY2FsZVRvTG9hZChsb2NhbGUsIHRyYW5zbGF0ZWRMb2NhbGVzKVxuICBpZiAobG9jYWxlKSB7XG4gICAgcmV0dXJuIGF3YWl0IGkxOG4ubG9hZExvY2FsZU1lc3NhZ2VzKCdqaW11LWxheW91dHMvbGliL3RyYW5zbGF0aW9ucycsIGxvY2FsZSkudGhlbigobWVzc2FnZXMpID0+IHtcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5pMThuTWVzc2FnZXNMb2FkZWQoJ2ppbXUtbGF5b3V0cycsIG1lc3NhZ2VzKSlcbiAgICAgIGkxOG4ucmVzZXRJbnRscygpXG4gICAgICByZXR1cm4gbWVzc2FnZXNcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVmYXVsdE1lc3NhZ2VzKVxuICB9XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgdHlwZSBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcyB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IExheW91dENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PExheW91dENvbnRleHRQcm9wcz4oe30pXG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF5b3V0Q29udGV4dFByb3BzIHtcbiAgaXNJdGVtQWNjZXB0ZWQ/OiAoaXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsIGlzUmVwbGFjZVBsYWNlaG9sZGVyOiBib29sZWFuKSA9PiBib29sZWFuXG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgdHlwZSBJTVRoZW1lVmFyaWFibGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUGFnZUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFBhZ2VDb250ZXh0UHJvcHM+KHtcbiAgdmlld09ubHk6IHRydWVcbn0pXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZUNvbnRleHRQcm9wcyB7XG4gIHJvb3RMYXlvdXRJZD86IHN0cmluZ1xuICBpc0hlYWRlcj86IGJvb2xlYW5cbiAgaXNGb290ZXI/OiBib29sZWFuXG4gIGlzRGlhbG9nPzogYm9vbGVhblxuICBwYWdlSWQ/OiBzdHJpbmdcbiAgYnVpbGRlclRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xuICB0aGVtZT86IElNVGhlbWVWYXJpYWJsZXNcbiAgdmlld09ubHk/OiBib29sZWFuXG4gIG1heFdpZHRoPzogbnVtYmVyXG4gIGZvcm1hdE1lc3NhZ2U/OiAoaWQ6IHN0cmluZywgdmFsdWVzPzogYW55KSA9PiBzdHJpbmdcbiAgZGlhbG9nSWQ/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGNvbnN0IFZpZXdwb3J0VmlzaWJpbGl0eUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PGJvb2xlYW4+KHRydWUpXG5leHBvcnQgY29uc3QgUGFnZVZpc2liaWxpdHlDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxib29sZWFuPih0cnVlKVxuZXhwb3J0IGNvbnN0IFZpZXdWaXNpYmlsaXR5Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8Vmlld1Zpc2liaWxpdHlDb250ZXh0UHJvcHM+KHtcbiAgaXNJblZpZXc6IGZhbHNlLFxuICBpc0luQ3VycmVudFZpZXc6IGZhbHNlXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIFZpZXdWaXNpYmlsaXR5Q29udGV4dFByb3BzIHtcbiAgaXNJblZpZXc/OiBib29sZWFuXG4gIGlzSW5DdXJyZW50Vmlldz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNvbnN0IFNjcmVlbkdyb3VwQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8c3RyaW5nPignJylcbiIsImltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgd2l0aEJ1aWxkZXJUaGVtZSB9IGZyb20gJ2ppbXUtdGhlbWUnXG5cbmV4cG9ydCBjb25zdCBUaGVtZWRUb29sdGlwID0gd2l0aEJ1aWxkZXJUaGVtZShUb29sdGlwKVxuIiwiaW1wb3J0IHsgY3NzIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgZ2V0TGF5b3V0U3R5bGUgPSAobGF5b3V0U2V0dGluZykgPT4gY3NzYFxuICBoZWlnaHQ6IDEwMCU7XG4gIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAganVzdGlmeS1jb250ZW50OiAke2xheW91dFNldHRpbmcuanVzdGlmeUNvbnRlbnR9O1xuICBvdmVyZmxvdy15OiBhdXRvICFpbXBvcnRhbnQ7XG4gIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTsgIC8qIEludGVybmV0IEV4cGxvcmVyIDEwKyAqL1xuICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7ICAvKiBGaXJlZm94ICovXG4gICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICBkaXNwbGF5OiBub25lOyAgLyogU2FmYXJpIGFuZCBDaHJvbWUgKi9cbiAgfVxuICAmOmhvdmVyIHtcbiAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IGF1dG87ICAvKiBJbnRlcm5ldCBFeHBsb3JlciAxMCsgKi9cbiAgICBzY3JvbGxiYXItd2lkdGg6IGF1dG87ICAvKiBGaXJlZm94ICovXG4gICAgJjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgZGlzcGxheTogYmxvY2s7ICAvKiBTYWZhcmkgYW5kIENocm9tZSAqL1xuICAgIH1cbiAgfVxuICAmID4gZGl2LmZsZXhib3gtbGF5b3V0LWl0ZW0gfiBkaXYuZmxleGJveC1sYXlvdXQtaXRlbSB7XG4gICAgbWFyZ2luLXRvcDogJHtsYXlvdXRTZXR0aW5nLnNwYWNlfXB4O1xuICB9XG5gXG4iLCJpbXBvcnQgeyB0eXBlIEJvdW5kaW5nQm94LCB0eXBlIElNTGF5b3V0SXRlbUpzb24sIGNzcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dEl0ZW1TaXplTW9kZXMgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB7IGdldFZhbHVlT2ZCQm94IH0gZnJvbSAnLi4vLi4vdXRpbHMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxIZWlnaHQgKGl0ZW1TZXR0aW5nLCBiYm94OiBCb3VuZGluZ0JveCkge1xuICBpZiAoaXRlbVNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0byB8fCBpdGVtU2V0dGluZy5oZWlnaHRNb2RlID09PSAncmF0aW8nKSB7XG4gICAgaWYgKGl0ZW1TZXR0aW5nLmhlaWdodE1vZGUgPT09ICdyYXRpbycpIHtcbiAgICAgIHJldHVybiB7IGhlaWdodDogJ2F1dG8nLCBmbGV4OiAnMCAwIGF1dG8nIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgaGVpZ2h0OiAnYXV0bycgfVxuICB9XG4gIGlmIChpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoIHx8IGl0ZW1TZXR0aW5nLmhlaWdodE1vZGUgPT09ICdmaXQnKSB7XG4gICAgcmV0dXJuIHsgZmxleDogJzEgMSBhdXRvJyB9XG4gIH1cbiAgcmV0dXJuIHsgaGVpZ2h0OiBiYm94LmhlaWdodCwgZmxleFNocmluazogMCB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmV0Y2hJbkNyb3NzQXhpcyAobGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvbikge1xuICByZXR1cm4gbGF5b3V0SXRlbS5zZXR0aW5nPy5hdXRvUHJvcHM/LndpZHRoICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXRlbVN0eWxlIChzdHlsZSwgbGF5b3V0U2V0dGluZywgaXNTdHJldGNoOiBib29sZWFuKSB7XG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IGxheW91dFNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuXG4gIHJldHVybiBjc3NgXG4gICAgYWxpZ24tc2VsZjogJHtpc1N0cmV0Y2ggPyAnc3RyZXRjaCcgOiBsYXlvdXRTZXR0aW5nLnN0eWxlPy5hbGlnblNlbGYgPz8gJ2F1dG8nfTtcbiAgICB3aWR0aDogJHtnZXRWYWx1ZU9mQkJveChzdHlsZSwgJ3dpZHRoJyl9O1xuICAgIGhlaWdodDogJHtnZXRWYWx1ZU9mQkJveChzdHlsZSwgJ2hlaWdodCcpfTtcbiAgICBmbGV4OiAke3N0eWxlLmZsZXh9O1xuICAgIGZsZXgtc2hyaW5rOiAke3N0eWxlLmZsZXhTaHJpbmt9O1xuICAgIG1pbi1oZWlnaHQ6ICR7aXNBdXRvSGVpZ2h0ID8gJ3Vuc2V0JyA6IG51bGx9O1xuICBgXG59XG4iLCJpbXBvcnQgeyB0eXBlIENvbHVtbkxheW91dFNldHRpbmcgfSBmcm9tICcuLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09MVU1OX0xBWU9VVF9TRVRUSU5HOiBDb2x1bW5MYXlvdXRTZXR0aW5nID0ge1xuICBtaW46IDE2LFxuICBzcGFjZTogMTBcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMsIHR5cGUgSU1MYXlvdXRJdGVtSnNvbiwgdHlwZSBCb3VuZGluZ0JveCwganN4IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtUHJvcHMsIExheW91dEl0ZW1TaXplTW9kZXMgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB7IHBhcnNlQXNwZWN0UmF0aW8sIGhhbmRsZU9uZWJ5T25lQW5pbWF0aW9uLCBzaG91bGRVc2VBc3BlY3RSYXRpbyB9IGZyb20gJy4uLy4uL3V0aWxzJ1xuaW1wb3J0IExheW91dEl0ZW0gZnJvbSAnLi4vLi4vcnVudGltZS9sYXlvdXQtaXRlbSdcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL2NvbW1vbi91dGlsJ1xuXG5pbnRlcmZhY2UgT3duUHJvcHMge1xuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uXG4gIGluZGV4OiBudW1iZXJcbiAgc3BhY2U6IG51bWJlclxuICBjaGlsZHJlbj86IGFueVxufVxuXG5leHBvcnQgY2xhc3MgQ29sdW1uSXRlbSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVByb3BzICYgT3duUHJvcHM+IHtcbiAgYXV0b0hlaWdodDogYm9vbGVhblxuXG4gIGlzU3RyZXRjaEluQ3Jvc3NBeGlzICgpIHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICByZXR1cm4gdXRpbHMuaXNTdHJldGNoSW5Dcm9zc0F4aXMobGF5b3V0SXRlbSlcbiAgfVxuXG4gIGNhbEhlaWdodCAoaXRlbVNldHRpbmcsIGJib3g6IEJvdW5kaW5nQm94KSB7XG4gICAgcmV0dXJuIHV0aWxzLmNhbEhlaWdodChpdGVtU2V0dGluZywgYmJveClcbiAgfVxuXG4gIGdldFN0eWxlIChsYXlvdXRTZXR0aW5nLCBpc1N0cmV0Y2g6IGJvb2xlYW4pIHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBiYm94ID0gbGF5b3V0SXRlbS5iYm94IHx8ICh7fSBhcyBhbnkpXG5cbiAgICBjb25zdCBzdHlsZTogYW55ID0gdGhpcy5jYWxIZWlnaHQobGF5b3V0U2V0dGluZywgYmJveClcblxuICAgIGlmIChpc1N0cmV0Y2gpIHtcbiAgICAgIHN0eWxlLndpZHRoID0gJ2F1dG8nXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLndpZHRoID0gYmJveC53aWR0aFxuICAgIH1cbiAgICB0aGlzLmF1dG9IZWlnaHQgPSBzdHlsZS5oZWlnaHQgPT09ICdhdXRvJ1xuICAgIHJldHVybiB1dGlscy5nZXRJdGVtU3R5bGUoc3R5bGUsIGxheW91dFNldHRpbmcsIGlzU3RyZXRjaClcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbSwgb25DbGljayB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGF5b3V0SXRlbSB8fCBsYXlvdXRJdGVtLmlzUGVuZGluZykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgbGF5b3V0U2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyB8fCB7fVxuICAgIGNvbnN0IGhlaWdodE1vZGUgPSBsYXlvdXRTZXR0aW5nLmF1dG9Qcm9wcz8uaGVpZ2h0ID8/IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXG4gICAgY29uc3QgbWVyZ2VkQ2xhc3MgPSBjbGFzc05hbWVzKCdmbGV4Ym94LWxheW91dC1pdGVtJywgeyAnZC1mbGV4JzogaGVpZ2h0TW9kZSAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvIH0pXG4gICAgY29uc3QgaXNTdHJldGNoID0gdGhpcy5pc1N0cmV0Y2hJbkNyb3NzQXhpcygpXG4gICAgY29uc3Qga2VlcEFzcGVjdFJhdGlvID0gc2hvdWxkVXNlQXNwZWN0UmF0aW8obGF5b3V0U2V0dGluZylcbiAgICBjb25zdCByYXRpbyA9IHBhcnNlQXNwZWN0UmF0aW8obGF5b3V0U2V0dGluZy5hc3BlY3RSYXRpbylcbiAgICBjb25zdCBvbmVCeU9uZUFuaW1hdGlvblByb3BzID0gaGFuZGxlT25lYnlPbmVBbmltYXRpb24odGhpcy5wcm9wcylcbiAgICByZXR1cm4gKFxuICAgICAgPExheW91dEl0ZW1cbiAgICAgICAgY3NzPXt0aGlzLmdldFN0eWxlKGxheW91dFNldHRpbmcsIGlzU3RyZXRjaCl9XG4gICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtLmlkfVxuICAgICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgICAgICBjbGFzc05hbWU9e21lcmdlZENsYXNzfVxuICAgICAgICBmb3JjZUFzcGVjdFJhdGlvPXtrZWVwQXNwZWN0UmF0aW99XG4gICAgICAgIGFzcGVjdFJhdGlvPXtyYXRpb31cbiAgICAgICAgYXV0b0hlaWdodD17dGhpcy5hdXRvSGVpZ2h0fVxuICAgICAgICB7Li4ub25lQnlPbmVBbmltYXRpb25Qcm9wc31cbiAgICAgIC8+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCBqc3gsIGNsYXNzTmFtZXMsIEltbXV0YWJsZSwgT25lQnlPbmVBbmltYXRpb24sIEludGVyc2VjdGlvbkNvbnRleHQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzdHlsZVV0aWxzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgTGF5b3V0UHJvcHMsIHR5cGUgU3RhdGVUb0xheW91dFByb3BzLCB0eXBlIENvbHVtbkxheW91dFNldHRpbmcgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB7IG1hcFN0YXRlVG9MYXlvdXRQcm9wcyB9IGZyb20gJy4uLy4uL3V0aWxzJ1xuaW1wb3J0IHsgQ29sdW1uSXRlbSB9IGZyb20gJy4vbGF5b3V0LWl0ZW0nXG5pbXBvcnQgeyBERUZBVUxUX0NPTFVNTl9MQVlPVVRfU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcbmltcG9ydCB7IGdldExheW91dFN0eWxlIH0gZnJvbSAnLi4vY29tbW9uL3N0eWxlJ1xuXG5jbGFzcyBMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzPiB7XG4gIGNyZWF0ZUl0ZW0gKGl0ZW1JZDogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBsYXlvdXRTZXR0aW5nOiBDb2x1bW5MYXlvdXRTZXR0aW5nKSB7XG4gICAgY29uc3QgeyBsYXlvdXQgfSA9IHRoaXMucHJvcHNcblxuICAgIHJldHVybiAoXG4gICAgICA8Q29sdW1uSXRlbVxuICAgICAgICBrZXk9e2l0ZW1JZH1cbiAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICBzcGFjZT17bGF5b3V0U2V0dGluZy5zcGFjZX1cbiAgICAgICAgbGF5b3V0SWQ9e2xheW91dC5pZH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtpdGVtSWR9XG4gICAgICAgIGxheW91dEl0ZW09e2xheW91dC5jb250ZW50W2l0ZW1JZF19XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBsYXlvdXQsIGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3QgY29udGVudCA9IGxheW91dC5vcmRlciB8fCBJbW11dGFibGUoW10pXG4gICAgY29uc3QgbGF5b3V0U2V0dGluZyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfQ09MVU1OX0xBWU9VVF9TRVRUSU5HLCBsYXlvdXQuc2V0dGluZylcblxuICAgIGNvbnN0IG1lcmdlZFN0eWxlOiBhbnkgPSB7XG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIHBhZGRpbmc6IHN0eWxlVXRpbHMudG9DU1NQYWRkaW5nKGxheW91dFNldHRpbmcucGFkZGluZylcbiAgICB9XG4gICAgY29uc3Qgb3V0Q2xhc3MgPSBjbGFzc05hbWVzKCdsYXlvdXQgY29sdW1uLWxheW91dCBkLWZsZXggdy0xMDAnLCBjbGFzc05hbWUpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e291dENsYXNzfSBzdHlsZT17bWVyZ2VkU3R5bGV9IGRhdGEtbGF5b3V0aWQ9e2xheW91dC5pZH0+XG4gICAgICAgIDxJbnRlcnNlY3Rpb25Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IG1vbml0b3I6IHRydWUsIGxheW91dElkOiBsYXlvdXQuaWQgfX0+XG4gICAgICAgICAgPE9uZUJ5T25lQW5pbWF0aW9uXG4gICAgICAgICAgICBvaWQ9e2xheW91dC5pZH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0ndHJhaWwtY29udGFpbmVyIGQtZmxleCBmbGV4LWNvbHVtbiB3LTEwMCdcbiAgICAgICAgICAgIGNzcz17Z2V0TGF5b3V0U3R5bGUobGF5b3V0U2V0dGluZyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgeyhjb250ZW50LmFzTXV0YWJsZSgpKS5tYXAoKGxheW91dEl0ZW0sIGluZGV4KSA9PiB0aGlzLmNyZWF0ZUl0ZW0obGF5b3V0SXRlbSwgaW5kZXgsIGxheW91dFNldHRpbmcpKX1cbiAgICAgICAgICA8L09uZUJ5T25lQW5pbWF0aW9uPlxuICAgICAgICA8L0ludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgTGF5b3V0UHJvcHM+KG1hcFN0YXRlVG9MYXlvdXRQcm9wcykoTGF5b3V0KVxuIiwiaW1wb3J0IHsgdHlwZSBJTVBhZ2VKc29uLCBnZXRBcHBTdG9yZSwgTGF5b3V0VHlwZSB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfSEVBREVSX0hFSUdIVCA9IDc1XG5leHBvcnQgY29uc3QgREVGQVVMVF9GT09URVJfSEVJR0hUID0gNzVcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVQYWdlSGVpZ2h0IChwYWdlSnNvbjogSU1QYWdlSnNvbiwgaGVhZGVyRm9vdGVySGVpZ2h0OiBudW1iZXIpOiBudW1iZXIgfCBzdHJpbmcge1xuICBpZiAocGFnZUpzb24pIHtcbiAgICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXG4gICAgY29uc3QgcGFnZUxheW91dElkID0gcGFnZUpzb24ubGF5b3V0W2FwcENvbmZpZy5tYWluU2l6ZU1vZGVdXG4gICAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbcGFnZUxheW91dElkXVxuICAgIC8vIG9ubHkgZ3JpZCBwYWdlIG5lZWQgc3BlY2lmaWMgaGVpZ2h0XG4gICAgaWYgKGxheW91dD8udHlwZSA9PT0gTGF5b3V0VHlwZS5HcmlkTGF5b3V0KSB7XG4gICAgICBpZiAoaGVhZGVyRm9vdGVySGVpZ2h0ID4gMCkge1xuICAgICAgICByZXR1cm4gYGNhbGMoMTAwJSAtICR7aGVhZGVyRm9vdGVySGVpZ2h0fXB4KWBcbiAgICAgIH1cbiAgICAgIHJldHVybiAnMTAwJSdcbiAgICB9XG4gIH1cbiAgcmV0dXJuICdhdXRvJ1xufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAganN4LFxuICB0eXBlIElNU3RhdGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZmluZFBhZ2VSZWxhdGVkQ29udHJvbGxlcklkcyB9IGZyb20gJy4uL3V0aWwnXG5pbXBvcnQgeyBDb250cm9sbGVyUGFuZWwgfSBmcm9tICcuL2xheW91dCdcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcGFnZUlkOiBzdHJpbmcgLy8gVGhlIHBhZ2UgaWQgdGhhdCB0aGlzIGNvbnRyb2xsZXIgZ3JvdXAgaXMgcGxhY2VkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sbGVyUGFuZWxHcm91cCAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgcGFnZUlkIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGNvbnRyb2xsZXJJbmZvID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gZmluZFBhZ2VSZWxhdGVkQ29udHJvbGxlcklkcyhzdGF0ZS5hcHBDb25maWcsIHBhZ2VJZCwgc3RhdGUuYnJvd3NlclNpemVNb2RlKVxuICB9KVxuXG4gIGNvbnN0IGNvbnRyb2xsZXJJZHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IGNvbnRyb2xsZXJJbmZvLnNwbGl0KCcsJykuZmlsdGVyKGlkID0+IGlkICE9PSAnJyksIFtjb250cm9sbGVySW5mb10pXG5cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICB7Y29udHJvbGxlcklkcy5tYXAoKGlkKSA9PiAoXG4gICAgICAgIDxDb250cm9sbGVyUGFuZWxcbiAgICAgICAgICBrZXk9e2lkfVxuICAgICAgICAgIGNvbnRyb2xsZXJJZD17aWR9XG4gICAgICAgIC8+XG4gICAgICApKX1cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJTVN0YXRlLFxuICBnZXRBcHBTdG9yZSxcbiAgYXBwQWN0aW9ucyxcbiAgV2lkZ2V0U3RhdGUsXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFuZWwgfSBmcm9tICcuL3BhbmVsJ1xuaW1wb3J0IHsgY29udmVydFRvU3R5bGUsIHBhbmVsVHJhbnNmb3JtU3R5bGUgfSBmcm9tICcuLi91dGlsJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBjb250cm9sbGVySWQ6IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ29udHJvbGxlclBhbmVsIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBjb250cm9sbGVySWQgfSA9IHByb3BzXG4gIGNvbnN0IFttaW5pbWl6ZWQsIHNldE1pbmltaXplZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBpbm5lckxheW91dElkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICAvLyBmaW5kIHRoZSBsYXlvdXRJbmZvIG9mIHRoZSBvcGVuZWQgd2lkZ2V0XG4gICAgY29uc3QgY29udHJvbGxlckpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1tjb250cm9sbGVySWRdXG4gICAgY29uc3QgbGF5b3V0TmFtZSA9IGNvbnRyb2xsZXJKc29uLm1hbmlmZXN0LmxheW91dHNbMF0ubmFtZVxuICAgIGNvbnN0IHNpemVNb2RlTGF5b3V0cyA9IGNvbnRyb2xsZXJKc29uLmxheW91dHNbbGF5b3V0TmFtZV1cbiAgICByZXR1cm4gc2l6ZU1vZGVMYXlvdXRzW3N0YXRlLmJyb3dzZXJTaXplTW9kZV0gfHwgc2l6ZU1vZGVMYXlvdXRzW3N0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGVdXG4gIH0pXG5cbiAgY29uc3QgaXRlbXMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIC8vIGZpbmQgdGhlIGl0ZW1zIG9mIHRoZSBvcGVuZWQgd2lkZ2V0XG4gICAgY29uc3QgbGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbaW5uZXJMYXlvdXRJZF1cbiAgICBjb25zdCBpdGVtSWRzID0gT2JqZWN0LmtleXMobGF5b3V0LmNvbnRlbnQgPz8ge30pXG4gICAgICAuZmlsdGVyKGl0ZW1JZCA9PiB7XG4gICAgICAgIGNvbnN0IGxheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtpdGVtSWRdXG4gICAgICAgIHJldHVybiBsYXlvdXRJdGVtPy53aWRnZXRJZCAhPSBudWxsICYmICFsYXlvdXRJdGVtLmlzUGVuZGluZ1xuICAgICAgfSlcbiAgICBpdGVtSWRzLnNvcnQoKVxuICAgIHJldHVybiBpdGVtSWRzLmpvaW4oJywnKVxuICB9KVxuXG4gIGNvbnN0IGhhc0l0ZW1PcGVuZWQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IG9wZW5lZFdpZGdldHMgPSBPYmplY3Qua2V5cyhzdGF0ZS53aWRnZXRzUnVudGltZUluZm8gPz8ge30pLmZpbHRlcih3aWRnZXRJZCA9PiB7XG4gICAgICBjb25zdCBpbmZvID0gc3RhdGUud2lkZ2V0c1J1bnRpbWVJbmZvW3dpZGdldElkXVxuICAgICAgcmV0dXJuIGluZm8uc3RhdGUgPT09IFdpZGdldFN0YXRlLk9wZW5lZFxuICAgIH0pXG4gICAgLy8gZmluZCB0aGUgaXRlbXMgb2YgdGhlIG9wZW5lZCB3aWRnZXRcbiAgICBjb25zdCBsYXlvdXQgPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tpbm5lckxheW91dElkXVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhsYXlvdXQuY29udGVudCA/PyB7fSlcbiAgICAgIC5zb21lKGl0ZW1JZCA9PiB7XG4gICAgICAgIGNvbnN0IGxheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtpdGVtSWRdXG4gICAgICAgIHJldHVybiBsYXlvdXRJdGVtPy53aWRnZXRJZCAhPSBudWxsICYmICFsYXlvdXRJdGVtLmlzUGVuZGluZyAmJiBvcGVuZWRXaWRnZXRzLmluY2x1ZGVzKGxheW91dEl0ZW0ud2lkZ2V0SWQpXG4gICAgICB9KVxuICB9KVxuXG4gIGNvbnN0IGl0ZW1JZExpc3QgPSBSZWFjdC51c2VNZW1vKCgpID0+IGl0ZW1zLnNwbGl0KCcsJykuZmlsdGVyKGlkID0+IGlkICE9PSAnJyksIFtpdGVtc10pXG5cbiAgY29uc3QgcGFuZWxKc29uID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLmNvbnRyb2xsZXJQYW5lbHNbY29udHJvbGxlcklkXVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUsIHdpZGdldElkKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5jbG9zZVdpZGdldCh3aWRnZXRJZCkpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IHRvZ2dsZU1pbmltaXplZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRNaW5pbWl6ZWQoIW1pbmltaXplZClcbiAgfSwgW21pbmltaXplZF0pXG5cbiAgY29uc3Qgc3R5bGUgPSBSZWFjdC51c2VNZW1vKCgpID0+IGNzc2BcbiAgICAke2NvbnZlcnRUb1N0eWxlKHBhbmVsSnNvbil9XG4gICAgaGVpZ2h0OiAke21pbmltaXplZCA/ICczNnB4JyA6IHBhbmVsSnNvbj8uaGVpZ2h0fTtcbiAgICB0cmFuc2l0aW9uOiBoZWlnaHQgMC4zcyBlYXNlLWluLW91dDtcbiAgICB0cmFuc2Zvcm06ICR7cGFuZWxUcmFuc2Zvcm1TdHlsZShwYW5lbEpzb24pfVxuICBgLCBbcGFuZWxKc29uLCBtaW5pbWl6ZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3BhbmVsLWNvbnRhaW5lcicsIHsgJ2Qtbm9uZSc6ICFoYXNJdGVtT3BlbmVkIH0pfSBjc3M9e3N0eWxlfT5cbiAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAge2l0ZW1JZExpc3QubWFwKGl0ZW1JZCA9PiAoXG4gICAgICAgICAgPFBhbmVsXG4gICAgICAgICAgICBrZXk9e2l0ZW1JZH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXJJZD17Y29udHJvbGxlcklkfVxuICAgICAgICAgICAgbGF5b3V0SWQ9e2lubmVyTGF5b3V0SWR9XG4gICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2l0ZW1JZH1cbiAgICAgICAgICAgIG1pbmltaXplZD17bWluaW1pemVkfVxuICAgICAgICAgICAgb25Ub2dnbGU9e3RvZ2dsZU1pbmltaXplZH1cbiAgICAgICAgICAgIG9uQ2xvc2U9e2hhbmRsZUNsb3NlfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFdpZGdldE1hbmFnZXIsXG4gIEVycm9yQm91bmRhcnksXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBBbmltYXRpb25TZXR0aW5nLFxuICBXaWRnZXRTdGF0ZSxcbiAgY2xhc3NOYW1lcyxcbiAgc3ByaW5nLFxuICBnZXRBbmltYXRpb25FZmZlY3QsXG4gIEFuaW1hdGlvblR5cGUsXG4gIERFRkFVTFRfQU5JTUFUSU9OX1BST1BTLFxuICBsb2Rhc2hcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBMb2FkaW5nLCBMb2FkaW5nVHlwZSwgdXNlVHJhcEZvY3VzTG9vcCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBDbG9zZU91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvY2xvc2UnXG5pbXBvcnQgeyBVcERvdWJsZU91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC91cC1kb3VibGUnXG5cbmNvbnN0IHsgYW5pbWF0ZWQsIHVzZVNwcmluZyB9ID0gc3ByaW5nXG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdoaXRlKTtcbiAgYm94LXNoYWRvdzogMHB4IDBweCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gIC5wYW5lbC1oZWFkZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcbiAgICBjb2xvcjogdmFyKC0td2hpdGUpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBoZWlnaHQ6IDM2cHg7XG4gICAgLmFjdGlvbnMgLmppbXUtYnRuIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LTIwMCk7XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXdoaXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLnBhbmVsLWNvbnRlbnQge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICAgLndpZGdldC1jb250ZW50IHtcbiAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxuXG4gICAgLndpZGdldC1tYXNrIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgbGVmdDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgdG9wOiAwO1xuICAgICAgYm90dG9tOiAwO1xuICAgICAgei1pbmRleDogMTtcbiAgICB9XG4gIH1cbmBcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY29udHJvbGxlcklkOiBzdHJpbmdcbiAgbGF5b3V0SWQ6IHN0cmluZ1xuICBsYXlvdXRJdGVtSWQ6IHN0cmluZ1xuICBtaW5pbWl6ZWQ6IGJvb2xlYW5cbiAgb25DbG9zZTogKGUsIHN0cmluZykgPT4gdm9pZFxuICBvblRvZ2dsZTogKCkgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUGFuZWwgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGNvbnRyb2xsZXJJZCwgbWluaW1pemVkLCBvbkNsb3NlLCBvblRvZ2dsZSB9ID0gcHJvcHNcbiAgY29uc3QgW21vdW50ZWQsIHNldE1vdW50ZWRdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuXG4gIGNvbnN0IHdpZGdldElkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICAgIHJldHVybiBsYXlvdXRJdGVtLndpZGdldElkXG4gIH0pXG5cbiAgY29uc3QgaXNPcGVuID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBpbmZvID0gc3RhdGUud2lkZ2V0c1J1bnRpbWVJbmZvPy5bd2lkZ2V0SWRdXG4gICAgcmV0dXJuIGluZm8/LnN0YXRlID09PSBXaWRnZXRTdGF0ZS5PcGVuZWRcbiAgfSlcblxuICBjb25zdCBsYWJlbCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uPy5sYWJlbFxuICB9LCBSZWFjdFJlZHV4LnNoYWxsb3dFcXVhbClcblxuICBjb25zdCB3aWRnZXRDbGFzc0xvYWRlZCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0UnVudGltZUluZm8gPSBzdGF0ZS53aWRnZXRzUnVudGltZUluZm9bd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldFJ1bnRpbWVJbmZvPy5pc0NsYXNzTG9hZGVkID8/IGZhbHNlXG4gIH0pXG5cbiAgY29uc3QgZWZmZWN0OiBBbmltYXRpb25TZXR0aW5nID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBwYW5lbEpzb24gPSBzdGF0ZS5hcHBDb25maWcuY29udHJvbGxlclBhbmVsc1tjb250cm9sbGVySWRdXG4gICAgcmV0dXJuIHBhbmVsSnNvbi5lZmZlY3RcbiAgfSlcblxuICBjb25zdCBhbmltYXRpb25PYmogPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoZWZmZWN0Py50eXBlICYmIGVmZmVjdC50eXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmUpIHtcbiAgICAgIHJldHVybiBnZXRBbmltYXRpb25FZmZlY3QoZWZmZWN0LnR5cGUsIHtcbiAgICAgICAgY29uZmlnVHlwZTogZWZmZWN0Lm9wdGlvbj8uY29uZmlnVHlwZSxcbiAgICAgICAgZGlyZWN0aW9uOiBlZmZlY3Qub3B0aW9uPy5kaXJlY3Rpb25cbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sIFtlZmZlY3RdKVxuXG4gIGNvbnN0IFtlZmZlY3RQcm9wcywgYXBpXSA9IHVzZVNwcmluZygoKSA9PiB7XG4gICAgcmV0dXJuIERFRkFVTFRfQU5JTUFUSU9OX1BST1BTXG4gIH0sIFthbmltYXRpb25PYmpdKVxuXG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBvbkNsb3NlKGUsIHdpZGdldElkKVxuICAgIC8vIGFmdGVyIHBhbmVsIGNsb3NlZCwgZm9jdXMgYmFjayB0byBidXR0b25cbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAud2lkZ2V0LWNvbnRyb2xsZXIgLmF2YXRhci1jYXJkW2RhdGEtd2lkZ2V0aWQ9JyR7d2lkZ2V0SWR9J11gKS5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuICAgIGJ1dHRvbj8uZm9jdXMoKVxuICB9LCBbd2lkZ2V0SWQsIG9uQ2xvc2VdKVxuXG4gIHVzZVRyYXBGb2N1c0xvb3AocmVmLCB0cnVlLCB0cnVlLCBmYWxzZSwgbW91bnRlZCAmJiBpc09wZW4pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNPcGVuICYmICFtb3VudGVkKSB7IC8vIGxvYWQgdGhlIGNsYXNzIHdoZW4gdGhpcyB3aWRnZXQgaXMgb3BlbmVkIHRoZSBmaXJzdCB0aW1lXG4gICAgICBzZXRNb3VudGVkKHRydWUpXG4gICAgICBXaWRnZXRNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICAgICAgLmxvYWRXaWRnZXRDbGFzcyh3aWRnZXRJZClcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH0pXG4gICAgfVxuICB9LCBbaXNPcGVuLCB3aWRnZXRJZCwgbW91bnRlZF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNPcGVuICYmIGFuaW1hdGlvbk9iaiAhPSBudWxsKSB7XG4gICAgICBhcGkuc3RhcnQoe1xuICAgICAgICAuLi5hbmltYXRpb25PYmouYW5pbWF0ZVByb3BzKCksXG4gICAgICAgIG9uUmVzdDogKCkgPT4ge1xuICAgICAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICAgICAgICByZWYuY3VycmVudC5zdHlsZS5jbGlwUGF0aCA9IG51bGwgLy8gZWxpbWluYXRlIGNsaXBQYXRoIHRvIHNob3cgYm94LXNoYWRvd1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9LCBbYXBpLCBpc09wZW4sIGFuaW1hdGlvbk9ial0pXG5cbiAgbGV0IFdpZGdldENsYXNzXG4gIGlmIChtb3VudGVkICYmIHdpZGdldENsYXNzTG9hZGVkKSB7XG4gICAgV2lkZ2V0Q2xhc3MgPSBXaWRnZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0V2lkZ2V0Q2xhc3Mod2lkZ2V0SWQpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxhbmltYXRlZC5kaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnY29udHJvbGxlci1wYW5lbCBmbGV4LWNvbHVtbiB3LTEwMCBoLTEwMCcsIHsgJ2Qtbm9uZSc6ICFtb3VudGVkIHx8ICFpc09wZW4gfSl9XG4gICAgICBjc3M9e3N0eWxlfVxuICAgICAgcmVmPXtyZWZ9XG4gICAgICBzdHlsZT17YW5pbWF0aW9uT2JqICE9IG51bGwgPyBlZmZlY3RQcm9wcyA6IG51bGx9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3BhbmVsLWhlYWRlciBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGZsZXgtc2hyaW5rLTAgcHgtNCc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdsYWJlbCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGgtMTAwJz5cbiAgICAgICAgICB7LyogPEljb24gaWNvbj17aWNvbn0gc2l6ZT17MTZ9IC8+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJz57bGFiZWx9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYWN0aW9ucyBtbC1hdXRvIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdwLTAnIGljb24gdHlwZT0ndGVydGlhcnknIHNpemU9J3NtJyBvbkNsaWNrPXtvblRvZ2dsZX0+XG4gICAgICAgICAgICA8VXBEb3VibGVPdXRsaW5lZCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoJHttaW5pbWl6ZWQgPyAxODAgOiAwfWRlZyk7XG4gICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2UtaW4tb3V0O1xuICAgICAgICAgICAgYH0vPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdwLTAgbWwtMicgaWNvbiB0eXBlPSd0ZXJ0aWFyeScgc2l6ZT0nc20nIG9uQ2xpY2s9e2hhbmRsZUNsb3NlfT5cbiAgICAgICAgICAgIDxDbG9zZU91dGxpbmVkIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtY29udGVudCBkLWZsZXggZmxleC1ncm93LTEnPlxuICAgICAgICB7IXdpZGdldENsYXNzTG9hZGVkICYmIDxMb2FkaW5nIHR5cGU9e0xvYWRpbmdUeXBlLkRvbnV0fSAvPn1cbiAgICAgICAge1dpZGdldENsYXNzICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMDAgaC0xMDAgd2lkZ2V0LWNvbnRlbnQgcC0xJz5cbiAgICAgICAgICAgIDxFcnJvckJvdW5kYXJ5PlxuICAgICAgICAgICAgICA8V2lkZ2V0Q2xhc3Mgd2lkZ2V0SWQ9e3dpZGdldElkfSBsYXlvdXRJZD17bGF5b3V0SWR9IGxheW91dEl0ZW1JZD17bGF5b3V0SXRlbUlkfSAvPlxuICAgICAgICAgICAgPC9FcnJvckJvdW5kYXJ5PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9hbmltYXRlZC5kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IGNzcywgTGF5b3V0SXRlbVR5cGUsIHR5cGUgSU1Db250cm9sbGVyUGFuZWxKc29uLCB0eXBlIElNQXBwQ29uZmlnLCB0eXBlIEJyb3dzZXJTaXplTW9kZSwgQ29udGFpbmVyVHlwZSwgQ29udHJvbGxlclBvc2l0aW9uIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0Q29udGVudFJvb3RDb250YWluZXJJbmZvIH0gZnJvbSAnLi4vc2VhcmNoL2NvbnRlbnRzJ1xuaW1wb3J0IHsgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZmluZFBhZ2VSZWxhdGVkQ29udHJvbGxlcklkcyAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgcGFnZUlkOiBzdHJpbmcsIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlKTogc3RyaW5nIHtcbiAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmtleXMoYXBwQ29uZmlnLmNvbnRyb2xsZXJQYW5lbHMgPz8ge30pLmZpbHRlcihjb250cm9sbGVySWQgPT4ge1xuICAgIGNvbnN0IHJvb3RJbmZvID0gZ2V0Q29udGVudFJvb3RDb250YWluZXJJbmZvKGFwcENvbmZpZywgY29udHJvbGxlcklkLCBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsIGJyb3dzZXJTaXplTW9kZSlcbiAgICBpZiAocm9vdEluZm8gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChyb290SW5mby50eXBlICE9PSBDb250YWluZXJUeXBlLlBhZ2UpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiByb290SW5mby5pZCA9PT0gcGFnZUlkXG4gIH0pXG4gIHJlc3VsdC5zb3J0KClcbiAgcmV0dXJuIHJlc3VsdC5qb2luKCcsJylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhbmVsVHJhbnNmb3JtU3R5bGUgKHBhbmVsSnNvbjogSU1Db250cm9sbGVyUGFuZWxKc29uKSB7XG4gIGlmIChwYW5lbEpzb24gPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgY29uc3QgeyBwb3NpdGlvbiwgb2Zmc2V0WCA9IDAsIG9mZnNldFkgPSAwIH0gPSBwYW5lbEpzb25cbiAgbGV0IHRyYW5zbGF0ZVxuXG4gIGlmIChwYW5lbEpzb24ud2lkdGhNb2RlICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICBpZiAob2Zmc2V0WCAhPT0gMCkge1xuICAgICAgdHJhbnNsYXRlID0gYHRyYW5zbGF0ZVgoJHtvZmZzZXRYfXB4KWBcbiAgICB9XG4gICAgaWYgKHBvc2l0aW9uID09PSBDb250cm9sbGVyUG9zaXRpb24uVG9wQ2VudGVyIHx8IHBvc2l0aW9uID09PSBDb250cm9sbGVyUG9zaXRpb24uTWlkZGxlQ2VudGVyIHx8IHBvc2l0aW9uID09PSBDb250cm9sbGVyUG9zaXRpb24uQm90dG9tQ2VudGVyKSB7XG4gICAgICB0cmFuc2xhdGUgPSB0cmFuc2xhdGUgIT0gbnVsbCA/IGAke3RyYW5zbGF0ZX0gdHJhbnNsYXRlWCgtNTAlKWAgOiAndHJhbnNsYXRlWCgtNTAlKSdcbiAgICB9XG4gIH1cblxuICBpZiAocGFuZWxKc29uLmhlaWdodE1vZGUgIT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIGlmIChvZmZzZXRZICE9PSAwKSB7XG4gICAgICB0cmFuc2xhdGUgPSB0cmFuc2xhdGUgIT0gbnVsbCA/IGAke3RyYW5zbGF0ZX0gdHJhbnNsYXRlWSgke29mZnNldFl9cHgpYCA6IGB0cmFuc2xhdGVZKCR7b2Zmc2V0WX1weClgXG4gICAgfVxuICAgIGlmIChwb3NpdGlvbiA9PT0gQ29udHJvbGxlclBvc2l0aW9uLk1pZGRsZUxlZnQgfHwgcG9zaXRpb24gPT09IENvbnRyb2xsZXJQb3NpdGlvbi5NaWRkbGVDZW50ZXIgfHwgcG9zaXRpb24gPT09IENvbnRyb2xsZXJQb3NpdGlvbi5NaWRkbGVSaWdodCkge1xuICAgICAgdHJhbnNsYXRlID0gdHJhbnNsYXRlICE9IG51bGwgPyBgJHt0cmFuc2xhdGV9IHRyYW5zbGF0ZVkoLTUwJSlgIDogJ3RyYW5zbGF0ZVkoLTUwJSknXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRyYW5zbGF0ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvU3R5bGUgKHBhbmVsSnNvbjogSU1Db250cm9sbGVyUGFuZWxKc29uKSB7XG4gIGxldCBwb3NTdHlsZVxuXG4gIHN3aXRjaCAocGFuZWxKc29uPy5wb3NpdGlvbikge1xuICAgIGNhc2UgQ29udHJvbGxlclBvc2l0aW9uLlRvcExlZnQ6XG4gICAgICBwb3NTdHlsZSA9IGNzc2B0b3A6IDA7IGxlZnQ6IDA7IGJvdHRvbTogYXV0bzsgcmlnaHQ6IGF1dG87YFxuICAgICAgYnJlYWtcbiAgICBjYXNlIENvbnRyb2xsZXJQb3NpdGlvbi5Ub3BSaWdodDpcbiAgICAgIHBvc1N0eWxlID0gY3NzYHRvcDogMDsgbGVmdDogYXV0bzsgYm90dG9tOiBhdXRvOyByaWdodDogMDtgXG4gICAgICBicmVha1xuICAgIGNhc2UgQ29udHJvbGxlclBvc2l0aW9uLkJvdHRvbUxlZnQ6XG4gICAgICBwb3NTdHlsZSA9IGNzc2B0b3A6IGF1dG87IGxlZnQ6IDA7IGJvdHRvbTogMDsgcmlnaHQ6IGF1dG87YFxuICAgICAgYnJlYWtcbiAgICBjYXNlIENvbnRyb2xsZXJQb3NpdGlvbi5Cb3R0b21SaWdodDpcbiAgICAgIHBvc1N0eWxlID0gY3NzYHRvcDogYXV0bzsgbGVmdDogYXV0bzsgYm90dG9tOiAwOyByaWdodDogMDtgXG4gICAgICBicmVha1xuICAgIGNhc2UgQ29udHJvbGxlclBvc2l0aW9uLlRvcENlbnRlcjpcbiAgICAgIHBvc1N0eWxlID0gY3NzYHRvcDogMDsgbGVmdDogNTAlOyBib3R0b206IGF1dG87IHJpZ2h0OiBhdXRvO2BcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBDb250cm9sbGVyUG9zaXRpb24uQm90dG9tQ2VudGVyOlxuICAgICAgcG9zU3R5bGUgPSBjc3NgdG9wOiBhdXRvOyBsZWZ0OiA1MCU7IGJvdHRvbTogMDsgcmlnaHQ6IGF1dG87YFxuICAgICAgYnJlYWtcbiAgICBjYXNlIENvbnRyb2xsZXJQb3NpdGlvbi5NaWRkbGVMZWZ0OlxuICAgICAgcG9zU3R5bGUgPSBjc3NgdG9wOiA1MCU7IGxlZnQ6IDA7IGJvdHRvbTogYXV0bzsgcmlnaHQ6IGF1dG87YFxuICAgICAgYnJlYWtcbiAgICBjYXNlIENvbnRyb2xsZXJQb3NpdGlvbi5NaWRkbGVSaWdodDpcbiAgICAgIHBvc1N0eWxlID0gY3NzYHRvcDogNTAlOyBsZWZ0OiBhdXRvOyBib3R0b206IGF1dG87IHJpZ2h0OiAwO2BcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBDb250cm9sbGVyUG9zaXRpb24uTWlkZGxlQ2VudGVyOlxuICAgICAgcG9zU3R5bGUgPSBjc3NgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgYm90dG9tOiBhdXRvOyByaWdodDogYXV0bztgXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBwb3NTdHlsZSA9IGNzc2B0b3A6IDA7IGxlZnQ6IDA7IGJvdHRvbTogYXV0bzsgcmlnaHQ6IGF1dG87YFxuICAgICAgYnJlYWtcbiAgfVxuXG4gIGxldCB3aWR0aE1vZGVTdHlsZVxuICBsZXQgaGVpZ2h0TW9kZVN0eWxlXG4gIGlmIChwYW5lbEpzb24ud2lkdGhNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICB3aWR0aE1vZGVTdHlsZSA9IGNzc2B3aWR0aDphdXRvO2xlZnQ6JHtwYW5lbEpzb24ubGVmdH07cmlnaHQ6JHtwYW5lbEpzb24ucmlnaHR9O2BcbiAgfVxuICBpZiAocGFuZWxKc29uLmhlaWdodE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIGhlaWdodE1vZGVTdHlsZSA9IGNzc2BoZWlnaHQ6YXV0bzt0b3A6JHtwYW5lbEpzb24udG9wfTtib3R0b206JHtwYW5lbEpzb24uYm90dG9tfTtgXG4gIH1cblxuICByZXR1cm4gY3NzYFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAke3Bvc1N0eWxlfVxuICAgIHdpZHRoOiAke3BhbmVsSnNvbj8ud2lkdGh9O1xuICAgIGhlaWdodDogJHtwYW5lbEpzb24/LmhlaWdodH07XG4gICAgJHt3aWR0aE1vZGVTdHlsZX07XG4gICAgJHtoZWlnaHRNb2RlU3R5bGV9XG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgei1pbmRleDogMjtcbiAgYFxufVxuIiwiaW1wb3J0IHsgdHlwZSBDb21tb25MYXlvdXRTZXR0aW5nIH0gZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfTEFZT1VUX0lURU1fU0VUVElORzogQ29tbW9uTGF5b3V0U2V0dGluZyA9IHtcbiAgb3JkZXI6IDBcbn1cbiIsImltcG9ydCB7IGNzcywgdHlwZSBTZXJpYWxpemVkU3R5bGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0VmFsdWVPZkJCb3ggfSBmcm9tICcuLi8uLi91dGlscydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvc2l0aW9uU3R5bGUgKG1lcmdlZFN0eWxlKTogW1NlcmlhbGl6ZWRTdHlsZXMsIHN0cmluZ10ge1xuICByZXR1cm4gW1xuICAgIGNzc2BcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6ICR7Z2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdsZWZ0Jyl9O1xuICAgICAgcmlnaHQ6ICR7Z2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdyaWdodCcpfTtcbiAgICAgIHRvcDogJHtnZXRWYWx1ZU9mQkJveChtZXJnZWRTdHlsZSwgJ3RvcCcpfTtcbiAgICAgIGJvdHRvbTogJHtnZXRWYWx1ZU9mQkJveChtZXJnZWRTdHlsZSwgJ2JvdHRvbScpfTtcbiAgICAgIHdpZHRoOiAke2dldFZhbHVlT2ZCQm94KG1lcmdlZFN0eWxlLCAnd2lkdGgnKX07XG4gICAgICBoZWlnaHQ6ICR7Z2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdoZWlnaHQnKX07XG4gICAgYCxcbiAgICBtZXJnZWRTdHlsZS50cmFuc2Zvcm1cbiAgXVxufVxuIiwiaW1wb3J0IHsgdHlwZSBGaXhlZExheW91dFNldHRpbmcsIHR5cGUgRml4ZWRMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IHsgbG9kYXNoIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgREVGQVVMVF9MQVlPVVRfSVRFTV9TRVRUSU5HIH0gZnJvbSAnLi4vZGVmYXVsdC1jb21tb24tc2V0dGluZydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfRklYX0xBWU9VVF9TRVRUSU5HOiBGaXhlZExheW91dFNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCB7XG4gIGdyaWRTaXplOiAxXG59KVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9GSVhfTEFZT1VUX0lURU1fU0VUVElORzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZyA9IGxvZGFzaC5hc3NpZ24oe30sIERFRkFVTFRfTEFZT1VUX0lURU1fU0VUVElORywge1xuICBsb2NrUGFyZW50OiBmYWxzZSxcbiAgbG9ja0xheW91dDogZmFsc2UsXG4gIGF1dG9Qcm9wczoge31cbn0pXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItY29uc3QgKi9cbmltcG9ydCB7IGlzUGVyY2VudGFnZSwgZnJvbVJhdGlvLCB0b1JhdGlvLCBpc1JUTCwgZ2V0TGF5b3V0SXRlbVNpemVNb2RlLCBzaG91bGRVc2VBc3BlY3RSYXRpbyB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHtcbiAgdHlwZSBCb3VuZGluZ0JveCxcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBCcm93c2VyU2l6ZU1vZGUsXG4gIHV0aWxzIGFzIGppbXVVdGlscyxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICB0eXBlIElNQm91bmRpbmdCb3gsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0XG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgRml4ZWRMYXlvdXRJdGVtU2V0dGluZywgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5pbnRlcmZhY2UgUG9zIHtcbiAgeDogbnVtYmVyXG4gIHk6IG51bWJlclxuICB3OiBudW1iZXJcbiAgaDogbnVtYmVyXG59XG5cbnR5cGUgQkJveEl0ZW0gPSBQb3MgJiB7XG4gIGlkOiBzdHJpbmdcbiAgY29udGVudD86IEJCb3hJdGVtW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRMYXlvdXRJdGVtcyAobGF5b3V0OiBJTUxheW91dEpzb24pOiBzdHJpbmdbXSB7XG4gIGlmIChsYXlvdXQuY29udGVudCA9PSBudWxsIHx8IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50KS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBjb25zdCBkZWZhdWx0U2l6ZSA9IDEyODBcblxuICBjb25zdCBwYXJzZVZhbHVlID0gKHZhbHVlKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gaXNQZXJjZW50YWdlKHZhbHVlKSA/IChwYXJzZUZsb2F0KHZhbHVlKSAqIGRlZmF1bHRTaXplKSAvIDEwMCA6ICt2YWx1ZVxuICB9XG5cbiAgY29uc3Qgc29ydEZ1bmMgPSAoaXRlbTE6IElNTGF5b3V0SXRlbUpzb24sIGl0ZW0yOiBJTUxheW91dEl0ZW1Kc29uKTogbnVtYmVyID0+IHtcbiAgICAvLyBjb21wYXJlIHRvcFxuICAgIGNvbnN0IHRvcDEgPSBwYXJzZVZhbHVlKGl0ZW0xLmJib3gudG9wKVxuICAgIGNvbnN0IHRvcDIgPSBwYXJzZVZhbHVlKGl0ZW0yLmJib3gudG9wKVxuICAgIGlmICh0b3AxID4gdG9wMikge1xuICAgICAgcmV0dXJuIDFcbiAgICB9XG4gICAgaWYgKHRvcDEgPCB0b3AyKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgLy8gY29tcGFyZSBsZWZ0XG4gICAgY29uc3QgbGVmdDEgPSBwYXJzZVZhbHVlKGl0ZW0xLmJib3gubGVmdClcbiAgICBjb25zdCBsZWZ0MiA9IHBhcnNlVmFsdWUoaXRlbTIuYmJveC5sZWZ0KVxuICAgIGlmIChsZWZ0MSA+IGxlZnQyKSB7XG4gICAgICByZXR1cm4gMVxuICAgIH1cbiAgICBpZiAobGVmdDEgPCBsZWZ0Mikge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMobGF5b3V0LmNvbnRlbnQpXG4gICAgLm1hcChrZXkgPT4gbGF5b3V0LmNvbnRlbnRba2V5XSlcbiAgICAuc29ydChzb3J0RnVuYylcbiAgICAubWFwKGxheW91dEl0ZW0gPT4gbGF5b3V0SXRlbS5pZClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpeGVkTGF5b3V0VHJhbnNmb3JtIChcbiAgbGF5b3V0OiBJTUxheW91dEpzb24sXG4gIGZyb21TaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICB0b1NpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IElNTGF5b3V0SnNvbiB7XG4gIGNvbnN0IGZyb21TaXplTW9kZVdpZHRoID0gamltdVV0aWxzLmdldFNpemVNb2RlV2lkdGgoZnJvbVNpemVNb2RlKVxuICBjb25zdCB0b1NpemVNb2RlV2lkdGggPSBqaW11VXRpbHMuZ2V0U2l6ZU1vZGVXaWR0aCh0b1NpemVNb2RlKVxuICBpZiAoZnJvbVNpemVNb2RlV2lkdGggPCB0b1NpemVNb2RlV2lkdGgpIHtcbiAgICByZXR1cm4gbGF5b3V0XG4gIH1cblxuICByZXR1cm4gYXV0b1Jlc3BvbnNlVG9EZXZpY2UobGF5b3V0LCB0b1NpemVNb2RlV2lkdGgpXG59XG5cbi8qKlxuICogQ29udmVydCBhIGxheW91dCB0byBhIHNtYWxsIHNpemUod2lkdGgpIGxheW91dC5cbiAqXG4gKiBSZXR1cm4gdGhlIG5ldyBsYXlvdXQuXG4gKlxuICpcbiAqIEBwYXJhbSBsYXlvdXRcbiAqIEBwYXJhbSBjb252ZXJ0VG9Db2x1bW5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF1dG9SZXNwb25zZVRvRGV2aWNlIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgZGV2aWNlV2lkdGg6IG51bWJlcik6IElNTGF5b3V0SnNvbiB7XG4gIGNvbnN0IGRlZmF1bHRXaWR0aCA9IGRldmljZVdpZHRoXG4gIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA4MDBcblxuICBjb25zdCBjb250ZW50ID0gbGF5b3V0Lm9yZGVyXG4gIGlmIChjb250ZW50ID09IG51bGwgfHwgY29udGVudC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbGF5b3V0XG4gIH1cblxuICBsZXQgdXBkYXRlZExheW91dDogSU1MYXlvdXRKc29uID0gSW1tdXRhYmxlKGxheW91dClcbiAgY29uc3QgYmJveGVzOiBCQm94SXRlbVtdID0gW11cbiAgY29udGVudC5mb3JFYWNoKGl0ZW1JZCA9PiB7XG4gICAgYmJveGVzLnB1c2goe1xuICAgICAgaWQ6IGl0ZW1JZCxcbiAgICAgIC4uLmdldEFic29sdXRlUG9zKGxheW91dC5jb250ZW50W2l0ZW1JZF0uYmJveCwgZGVmYXVsdFdpZHRoLCBkZWZhdWx0SGVpZ2h0KVxuICAgIH0pXG4gIH0pXG4gIGJib3hlcy5zb3J0KHNvcnRQb3MpXG4gIC8vIG1lcmdlIHRoZSBpdGVtcyB0aGF0IGFyZSBjb250YWluZWQgYnkgYW5vdGhlclxuICBjb25zdCBncm91cGVkQkJveGVzID0gW2Jib3hlc1swXV1cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBiYm94ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpdGVtID0gYmJveGVzW2ldXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgZ3JvdXBlZCA9IGdyb3VwZWRCQm94ZXMuc29tZShiID0+IHtcbiAgICAgIGlmIChjb250YWlucyhiLCBpdGVtKSkge1xuICAgICAgICAvLyBiIGlzIGFsd2F5cyBhdCB0aGUgdG9wIGxlZnQgb2YgdGhlIGl0ZW0gYWZ0ZXIgc29ydGluZ1xuICAgICAgICBpZiAoYi5jb250ZW50ID09IG51bGwpIHtcbiAgICAgICAgICBiLmNvbnRlbnQgPSBbXVxuICAgICAgICB9XG4gICAgICAgIGIuY29udGVudC5wdXNoKHtcbiAgICAgICAgICAuLi5pdGVtXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBpZiAoIWdyb3VwZWQpIHtcbiAgICAgIGdyb3VwZWRCQm94ZXMucHVzaChpdGVtKVxuICAgIH1cbiAgfVxuXG4gIC8vIHJlc3RyaWN0IHRoZSBiYm94IG9mIGVhY2ggaXRlbSBpbnRvIHRoZSBjb250YWluZXJcbiAgbGV0IGxhc3RUb3AgPSAwXG4gIGxldCB1cGRhdGVkQ29udGVudCA9IFtdXG4gIGdyb3VwZWRCQm94ZXMuZm9yRWFjaChiID0+IHtcbiAgICBsZXQgZGVsdGFZID0gMFxuICAgIHJlc3RyaWN0UG9zKGIsIGRlZmF1bHRXaWR0aClcbiAgICBpZiAoYi55IDwgbGFzdFRvcCkge1xuICAgICAgZGVsdGFZID0gbGFzdFRvcCAtIGIueVxuICAgICAgYi55ID0gbGFzdFRvcFxuICAgIH1cbiAgICBsYXN0VG9wID0gYi55ICsgYi5oXG4gICAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXRcbiAgICAgIC5zZXRJbihbJ2NvbnRlbnQnLCBiLmlkLCAnYmJveCddLCB7XG4gICAgICAgIGxlZnQ6IHRvUmF0aW8oYi54LCBkZWZhdWx0V2lkdGgpLFxuICAgICAgICB0b3A6IGAke2IueX1weGAsXG4gICAgICAgIHdpZHRoOiB0b1JhdGlvKGIudywgZGVmYXVsdFdpZHRoKSxcbiAgICAgICAgaGVpZ2h0OiBgJHtiLmh9cHhgXG4gICAgICB9KVxuICAgICAgLnNldEluKFsnY29udGVudCcsIGIuaWQsICdzZXR0aW5nJywgJ2F1dG9Qcm9wcycsICd3aWR0aCddLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSlcbiAgICB1cGRhdGVkQ29udGVudC5wdXNoKGIuaWQpXG4gICAgaWYgKGIuY29udGVudCAhPSBudWxsKSB7XG4gICAgICBiLmNvbnRlbnQuZm9yRWFjaChzdWJJdGVtID0+IHtcbiAgICAgICAgcmVzdHJpY3RQb3Moc3ViSXRlbSwgZGVmYXVsdFdpZHRoKVxuICAgICAgICBpZiAoZGVsdGFZID4gMCkge1xuICAgICAgICAgIHN1Ykl0ZW0ueSArPSBkZWx0YVlcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dFxuICAgICAgICAgIC5zZXRJbihbJ2NvbnRlbnQnLCBiLmlkLCAnYmJveCddLCB7XG4gICAgICAgICAgICBsZWZ0OiB0b1JhdGlvKGIueCwgZGVmYXVsdFdpZHRoKSxcbiAgICAgICAgICAgIHRvcDogYCR7Yi55fXB4YCxcbiAgICAgICAgICAgIHdpZHRoOiB0b1JhdGlvKGIudywgZGVmYXVsdFdpZHRoKSxcbiAgICAgICAgICAgIGhlaWdodDogYCR7Yi5ofXB4YFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnNldEluKFsnY29udGVudCcsIGIuaWQsICdzZXR0aW5nJywgJ2F1dG9Qcm9wcycsICd3aWR0aCddLCBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSlcbiAgICAgICAgdXBkYXRlZENvbnRlbnQucHVzaChzdWJJdGVtLmlkKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXQuc2V0KCdvcmRlcicsIHVwZGF0ZWRDb250ZW50KVxuICByZXR1cm4gdXBkYXRlZExheW91dFxufVxuXG5mdW5jdGlvbiByZXN0cmljdFBvcyAoYjogUG9zLCBtYXhXaWR0aDogbnVtYmVyLCBpc0luR3JvdXA/OiBib29sZWFuKTogdm9pZCB7XG4gIC8vIHJlc3RyaWN0IHRoZSBiYm94IG9mIGVhY2ggaXRlbSBpbnRvIHRoZSBjb250YWluZXJcbiAgaWYgKGIueCA+IG1heFdpZHRoKSB7XG4gICAgaWYgKCFpc0luR3JvdXApIHtcbiAgICAgIC8vIHdyYXAgdGhlIGl0ZW1cbiAgICAgIGIueCA9IDBcbiAgICAgIGIueSArPSBiLmhcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbW92ZSBsZWZ0XG4gICAgICBiLnggPSBtYXhXaWR0aCAtIGIud1xuICAgIH1cbiAgfVxuICBpZiAoYi54IDwgMCkge1xuICAgIGIueCA9IDBcbiAgfVxuICBpZiAoYi54ICsgYi53ID4gbWF4V2lkdGgpIHtcbiAgICBpZiAoYi53IDwgbWF4V2lkdGgpIHtcbiAgICAgIGIueCA9IG1heFdpZHRoIC0gYi53XG4gICAgfSBlbHNlIHtcbiAgICAgIGIudyA9IG1heFdpZHRoXG4gICAgICBiLnggPSAwXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNvcnRQb3MgKHAxOiBQb3MsIHAyOiBQb3MpOiBudW1iZXIge1xuICAvLyB0b3AgdG8gYm90dG9tLCBsZWZ0IHRvIHJpZ2h0XG4gIGlmIChwMS55ICE9PSBwMi55KSB7XG4gICAgcmV0dXJuIHAxLnkgPiBwMi55ID8gMSA6IC0xXG4gIH0gZWxzZSBpZiAocDEueCAhPT0gcDIueCkge1xuICAgIHJldHVybiBwMS54ID4gcDIueCA/IDEgOiAtMVxuICB9XG4gIHJldHVybiAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzIChwMTogUG9zLCBwMjogUG9zKTogYm9vbGVhbiB7XG4gIGNvbnN0IHgxID0gTWF0aC5tYXgocDEueCwgcDIueClcbiAgY29uc3QgeDIgPSBNYXRoLm1pbihwMS54ICsgcDEudywgcDIueCArIHAyLncpXG4gIGNvbnN0IHkxID0gTWF0aC5tYXgocDEueSwgcDIueSlcbiAgY29uc3QgeTIgPSBNYXRoLm1pbihwMS55ICsgcDEuaCwgcDIueSArIHAyLmgpXG5cbiAgcmV0dXJuIHgxIDwgeDIgJiYgeTEgPCB5MlxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnMgKHAxOiBQb3MsIHAyOiBQb3MpOiBib29sZWFuIHtcbiAgcmV0dXJuIHAxLnggPD0gcDIueCAmJiBwMS54ICsgcDEudyA+IHAyLnggKyBwMi53ICYmIHAxLnkgPD0gcDIueSAmJiBwMS55ICsgcDEuaCA+IHAyLnkgKyBwMi5oXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVBvcyAocDE6IFBvcywgcDI6IFBvcyk6IFBvcyB7XG4gIGNvbnN0IGxlZnQgPSBNYXRoLm1pbihwMS54LCBwMi54KVxuICBjb25zdCB0b3AgPSBNYXRoLm1pbihwMS55LCBwMi55KVxuICBjb25zdCByaWdodCA9IE1hdGgubWF4KHAxLnggKyBwMS53LCBwMi54ICsgcDIudylcbiAgY29uc3QgYm90dG9tID0gTWF0aC5tYXgocDEueSArIHAxLmgsIHAyLnkgKyBwMi5oKVxuICByZXR1cm4ge1xuICAgIHg6IGxlZnQsXG4gICAgeTogdG9wLFxuICAgIHc6IHJpZ2h0IC0gbGVmdCxcbiAgICBoOiBib3R0b20gLSB0b3BcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWJzb2x1dGVQb3MgKGI6IEJvdW5kaW5nQm94LCBjb250YWluZXJXaWR0aDogbnVtYmVyLCBjb250YWluZXJIZWlnaHQ6IG51bWJlcik6IFBvcyB7XG4gIGNvbnN0IHJlc3VsdDogYW55ID0ge31cbiAgbGV0IHggPSAwXG4gIGxldCB5ID0gMFxuICBsZXQgdyA9IGNvbnRhaW5lcldpZHRoXG4gIGxldCBoID0gY29udGFpbmVySGVpZ2h0ICogMC4yIC8vIGRlZmF1bHQgaXMgMTAwJSB3aWR0aCwgMjAlIGhlaWdodFxuICBpZiAoYiAhPSBudWxsKSB7XG4gICAgWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nLCAnd2lkdGgnLCAnaGVpZ2h0J10uZm9yRWFjaChwcm9wID0+IHtcbiAgICAgIGlmIChiW3Byb3BdICE9PSB1bmRlZmluZWQgJiYgYltwcm9wXSAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBbJ2xlZnQnLCAncmlnaHQnLCAnd2lkdGgnXS5pbmNsdWRlcyhwcm9wKSA/IGNvbnRhaW5lcldpZHRoIDogY29udGFpbmVySGVpZ2h0XG4gICAgICAgIHJlc3VsdFtwcm9wXSA9IGlzUGVyY2VudGFnZShiW3Byb3BdKSA/IGZyb21SYXRpbyhiW3Byb3BdLCBzaXplKSA6IHBhcnNlRmxvYXQoYltwcm9wXSlcbiAgICAgIH1cbiAgICB9KVxuICAgIGlmIChyZXN1bHQubGVmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB4ID0gcmVzdWx0LmxlZnRcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHcgPSByZXN1bHQud2lkdGhcbiAgICAgIGlmIChyZXN1bHQubGVmdCA9PT0gdW5kZWZpbmVkICYmIHJlc3VsdC5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHggPSBjb250YWluZXJXaWR0aCAtIHJlc3VsdC5yaWdodCAtIHdcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdyA9IGNvbnRhaW5lcldpZHRoIC0gKHJlc3VsdC5sZWZ0ID8/IDApIC0gKHJlc3VsdC5yaWdodCA/PyAwKVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQudG9wICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHkgPSByZXN1bHQudG9wXG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaCA9IHJlc3VsdC5oZWlnaHRcbiAgICAgIGlmIChyZXN1bHQudG9wID09PSB1bmRlZmluZWQgJiYgcmVzdWx0LmJvdHRvbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHkgPSBjb250YWluZXJIZWlnaHQgLSByZXN1bHQuYm90dG9tIC0gaFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVzdWx0LnRvcCAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdC5ib3R0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgaCA9IGNvbnRhaW5lckhlaWdodCAtIHJlc3VsdC50b3AgLSByZXN1bHQuYm90dG9tXG4gICAgfVxuICB9XG4gIHJldHVybiB7IHgsIHksIHcsIGggfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSZXNpemluZ0JCb3hTdHlsZSAoXG4gIGluaXRSZWN0OiBET01SZWN0LFxuICBjb250YWluZXJSZWN0OiBET01SZWN0LFxuICBkZWx0YTogeyBkeDogbnVtYmVyLCBkeTogbnVtYmVyLCBkdzogbnVtYmVyLCBkaDogbnVtYmVyIH0sXG4gIGF1dG9GbGlwID0gZmFsc2Vcbik6IERPTVJlY3Qge1xuICBjb25zdCByZXN1bHQ6IGFueSA9IHt9XG5cbiAgcmVzdWx0LmxlZnQgPSBpbml0UmVjdC5sZWZ0ICsgZGVsdGEuZHhcbiAgcmVzdWx0LndpZHRoID0gaW5pdFJlY3Qud2lkdGggKyBkZWx0YS5kd1xuICBjb25zdCByaWdodCA9IGNvbnRhaW5lclJlY3QucmlnaHQgLSBpbml0UmVjdC5yaWdodFxuICBpZiAoZGVsdGEuZHcgPT09IDApIHtcbiAgICAvLyBtb3ZlXG4gICAgcmVzdWx0LnJpZ2h0ID0gcmlnaHQgLSBkZWx0YS5keFxuICB9IGVsc2UgaWYgKGRlbHRhLmR4ID09PSAwKSB7XG4gICAgLy8gcmVzaXplIGF0IHJpZ2h0XG4gICAgaWYgKGRlbHRhLmR3ID4gMCkge1xuICAgICAgZGVsdGEuZHcgPSBNYXRoLm1pbihyaWdodCwgZGVsdGEuZHcpXG4gICAgfVxuICAgIHJlc3VsdC5yaWdodCA9IHJpZ2h0IC0gZGVsdGEuZHdcbiAgICByZXN1bHQud2lkdGggPSBpbml0UmVjdC53aWR0aCArIGRlbHRhLmR3XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnJpZ2h0ID0gcmlnaHRcbiAgICBpZiAoZGVsdGEuZHggPCAwKSB7XG4gICAgICBkZWx0YS5keCA9IE1hdGgubWF4KC1pbml0UmVjdC5sZWZ0LCBkZWx0YS5keClcbiAgICAgIGRlbHRhLmR3ID0gLWRlbHRhLmR4XG4gICAgICByZXN1bHQubGVmdCA9IGluaXRSZWN0LmxlZnQgKyBkZWx0YS5keFxuICAgICAgcmVzdWx0LndpZHRoID0gaW5pdFJlY3Qud2lkdGggKyBkZWx0YS5kd1xuICAgIH1cbiAgfVxuXG4gIHJlc3VsdC50b3AgPSBpbml0UmVjdC50b3AgKyBkZWx0YS5keVxuICByZXN1bHQuaGVpZ2h0ID0gaW5pdFJlY3QuaGVpZ2h0ICsgZGVsdGEuZGhcbiAgY29uc3QgYm90dG9tID0gY29udGFpbmVyUmVjdC5ib3R0b20gLSBpbml0UmVjdC5ib3R0b21cbiAgaWYgKGRlbHRhLmRoID09PSAwKSB7XG4gICAgLy8gbW92ZVxuICAgIHJlc3VsdC5ib3R0b20gPSBib3R0b20gLSBkZWx0YS5keVxuICB9IGVsc2UgaWYgKGRlbHRhLmR5ID09PSAwKSB7XG4gICAgLy8gcmVzaXplIGF0IGJvdHRvbVxuICAgIGlmIChkZWx0YS5kaCA+IDApIHtcbiAgICAgIGRlbHRhLmRoID0gTWF0aC5taW4oYm90dG9tLCBkZWx0YS5kaClcbiAgICB9XG4gICAgcmVzdWx0LmJvdHRvbSA9IGJvdHRvbSAtIGRlbHRhLmRoXG4gICAgcmVzdWx0LmhlaWdodCA9IGluaXRSZWN0LmhlaWdodCArIGRlbHRhLmRoXG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LmJvdHRvbSA9IGJvdHRvbVxuICAgIGlmIChkZWx0YS5keSA8IDApIHtcbiAgICAgIGRlbHRhLmR5ID0gTWF0aC5tYXgoLWluaXRSZWN0LnRvcCwgZGVsdGEuZHkpXG4gICAgICBkZWx0YS5kaCA9IC1kZWx0YS5keVxuICAgICAgcmVzdWx0LnRvcCA9IGluaXRSZWN0LnRvcCArIGRlbHRhLmR5XG4gICAgICByZXN1bHQuaGVpZ2h0ID0gaW5pdFJlY3QuaGVpZ2h0ICsgZGVsdGEuZGhcbiAgICB9XG4gIH1cblxuICBpZiAoYXV0b0ZsaXAgJiYgaXNSVEwoKSkge1xuICAgIHJldHVybiBmbGlwQkJveChyZXN1bHQpIGFzIGFueVxuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQkJveFN0eWxlIChiYm94OiBJTUJvdW5kaW5nQm94LCBzZXR0aW5nOiBGaXhlZExheW91dEl0ZW1TZXR0aW5nKTogQm91bmRpbmdCb3gge1xuICBjb25zdCByZXN1bHQ6IGFueSA9IHt9XG4gIGxldCBhdXRvUHJvcHMgPSBzZXR0aW5nPy5hdXRvUHJvcHMgPz8ge31cbiAgbGV0IGJveCA9IGJib3hcbiAgY29uc3QgaGVpZ2h0TW9kZSA9IGdldExheW91dEl0ZW1TaXplTW9kZSgnaGVpZ2h0JywgYmJveCwgYXV0b1Byb3BzKVxuICBjb25zdCB3aWR0aE1vZGUgPSBnZXRMYXlvdXRJdGVtU2l6ZU1vZGUoJ3dpZHRoJywgYmJveCwgYXV0b1Byb3BzKVxuXG4gIGlmIChoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICByZXN1bHQudG9wID0gYm94LnRvcFxuICAgIHJlc3VsdC5ib3R0b20gPSBib3guYm90dG9tXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdG9wQXV0byA9IGF1dG9Qcm9wcy50b3AgPz8gZmFsc2VcbiAgICBjb25zdCBib3R0b21BdXRvID0gYXV0b1Byb3BzLmJvdHRvbSA/PyBmYWxzZVxuICAgIGlmIChoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSkge1xuICAgICAgcmVzdWx0LmhlaWdodCA9IGJveC5oZWlnaHRcbiAgICB9XG4gICAgLy8gb25lIGFuZCBvbmx5IG9uZSBvZiB0aGUgdG9wIG9yIGJvdHRvbSBjYW4gYmUgdXNlZFxuICAgIGlmICgodG9wQXV0byA9PT0gYm90dG9tQXV0byB8fCBib3R0b21BdXRvKSAmJiBiYm94LnRvcCAhPSBudWxsKSB7XG4gICAgICByZXN1bHQudG9wID0gYm94LnRvcFxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQuYm90dG9tID0gYm94LmJvdHRvbVxuICAgIH1cblxuICAgIC8vIGFsaWduIGNlbnRlclxuICAgIGlmIChzZXR0aW5nLnZDZW50ZXIgJiYgYm94LnRvcCA9PT0gJzUwJScpIHtcbiAgICAgIHJlc3VsdC50b3AgPSAnNTAlJ1xuICAgIH1cbiAgfVxuXG4gIGlmICh3aWR0aE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCkge1xuICAgIHJlc3VsdC5sZWZ0ID0gYm94LmxlZnRcbiAgICByZXN1bHQucmlnaHQgPSBib3gucmlnaHRcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBsZWZ0QXV0byA9IGF1dG9Qcm9wcy5sZWZ0ID8/IGZhbHNlXG4gICAgY29uc3QgcmlnaHRBdXRvID0gYXV0b1Byb3BzLnJpZ2h0ID8/IGZhbHNlXG4gICAgaWYgKHdpZHRoTW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20pIHtcbiAgICAgIHJlc3VsdC53aWR0aCA9IGJveC53aWR0aFxuICAgIH1cbiAgICAvLyBvbmUgYW5kIG9ubHkgb25lIG9mIHRoZSBsZWZ0IG9yIHJpZ2h0IGNhbiBiZSB1c2VkXG4gICAgaWYgKGxlZnRBdXRvID09PSByaWdodEF1dG8pIHtcbiAgICAgIGlmIChib3gubGVmdCAhPSBudWxsKSB7XG4gICAgICAgIHJlc3VsdC5sZWZ0ID0gYm94LmxlZnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5yaWdodCA9IGJveC5yaWdodFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobGVmdEF1dG8gJiYgYm94LnJpZ2h0ICE9IG51bGwpIHtcbiAgICAgIHJlc3VsdC5yaWdodCA9IGJveC5yaWdodFxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQubGVmdCA9IGJveC5sZWZ0XG4gICAgfVxuXG4gICAgLy8gYWxpZ24gY2VudGVyXG4gICAgaWYgKHNldHRpbmcuaENlbnRlciAmJiBib3gubGVmdCA9PT0gJzUwJScpIHtcbiAgICAgIHJlc3VsdC5sZWZ0ID0gJzUwJSdcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmxpcEF1dG9Qcm9wcyAoYXV0b1Byb3BzOiB7IGxlZnQ/OiBib29sZWFuLCByaWdodD86IGJvb2xlYW4gfSk6IEltbXV0YWJsZU9iamVjdDx7IGxlZnQ/OiBib29sZWFuLCByaWdodD86IGJvb2xlYW4gfT4ge1xuICBjb25zdCByZXN1bHQgPSBJbW11dGFibGUoYXV0b1Byb3BzKVxuICBjb25zdCB0ZW1wID0gYXV0b1Byb3BzLmxlZnRcbiAgcmV0dXJuIHJlc3VsdC5zZXQoJ2xlZnQnLCBhdXRvUHJvcHMucmlnaHQpLnNldCgncmlnaHQnLCB0ZW1wKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmxpcEJCb3ggKGJib3g6IEJvdW5kaW5nQm94KTogSU1Cb3VuZGluZ0JveCB7XG4gIGNvbnN0IHJlc3VsdCA9IEltbXV0YWJsZShiYm94KVxuICBjb25zdCB0ZW1wID0gYmJveC5sZWZ0XG4gIHJldHVybiByZXN1bHQuc2V0KCdsZWZ0JywgYmJveC5yaWdodCkuc2V0KCdyaWdodCcsIHRlbXApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVBvc2l0aW9uU2V0dGluZyAoYmJveDogSU1Cb3VuZGluZ0JveCwgaXRlbVNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmcsIGlzUmVzaXppbmc6IGJvb2xlYW4gPSBmYWxzZSk6IFJlYWN0LkNTU1Byb3BlcnRpZXMge1xuICBjb25zdCBleHRyYVN0eWxlOiBhbnkgPSB7fVxuICBjb25zdCBoQ2VudGVyID0gaXRlbVNldHRpbmcuaENlbnRlciAmJiBiYm94LmxlZnQgPT09ICc1MCUnXG4gIGNvbnN0IHZDZW50ZXIgPSBpdGVtU2V0dGluZy52Q2VudGVyICYmIGJib3gudG9wID09PSAnNTAlJ1xuICBjb25zdCBzaWduID0gaXNSVEwoKSA/IC0xIDogMVxuICBpZiAoaENlbnRlciAmJiB2Q2VudGVyKSB7XG4gICAgZXh0cmFTdHlsZS5yaWdodCA9ICdhdXRvJ1xuICAgIGV4dHJhU3R5bGUuYm90dG9tID0gJ2F1dG8nXG4gICAgZXh0cmFTdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7c2lnbiAqIC01MH0lLCAtNTAlKWBcbiAgfSBlbHNlIGlmIChoQ2VudGVyKSB7XG4gICAgZXh0cmFTdHlsZS5yaWdodCA9ICdhdXRvJ1xuICAgIGV4dHJhU3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtzaWduICogLTUwfSUpYFxuICB9IGVsc2UgaWYgKHZDZW50ZXIpIHtcbiAgICBleHRyYVN0eWxlLmJvdHRvbSA9ICdhdXRvJ1xuICAgIGV4dHJhU3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSknXG4gIH1cbiAgaWYgKCFpc1Jlc2l6aW5nICYmIHNob3VsZFVzZUFzcGVjdFJhdGlvKGl0ZW1TZXR0aW5nKSkge1xuICAgIGV4dHJhU3R5bGUuaGVpZ2h0ID0gJ2F1dG8nXG4gIH1cbiAgcmV0dXJuIGV4dHJhU3R5bGVcbn1cblxuLyoqXG4gKiBEbyBub3QgY2hhbmdlIHRoZSBhdXRvUHJvcHMgdmFsdWUgZXhjZXB0IHRoYXQgdmFsdWUgaXMgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVNuYXBSZXN1bHQgKGJib3g6IElNQm91bmRpbmdCb3gsIHNldHRpbmcsIGNvbnRhaW5lclJlY3Q6IENsaWVudFJlY3QsIHNuYXBSZWN0OiBDbGllbnRSZWN0KTogeyBiYm94OiBJTUJvdW5kaW5nQm94LCBzZXR0aW5nOiBhbnkgfSB7XG4gIGxldCBvdXRwdXRCb3ggPSBiYm94XG4gIGxldCBvdXRTZXR0aW5nID0gSW1tdXRhYmxlKHNldHRpbmcgPz8ge30pXG4gIGlmIChzZXR0aW5nPy5hdXRvUHJvcHM/LndpZHRoICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICBpZiAoc25hcFJlY3QubGVmdCA8IHNuYXBSZWN0LnJpZ2h0KSB7XG4gICAgICBpZiAoaXNSVEwoKSkge1xuICAgICAgICBvdXRTZXR0aW5nID0gb3V0U2V0dGluZy5zZXRJbihbJ2F1dG9Qcm9wcycsICdyaWdodCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAnbGVmdCddLCB0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAnbGVmdCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAncmlnaHQnXSwgdHJ1ZSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzUlRMKCkpIHtcbiAgICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAnbGVmdCddLCBmYWxzZSkuc2V0SW4oWydhdXRvUHJvcHMnLCAncmlnaHQnXSwgdHJ1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dFNldHRpbmcgPSBvdXRTZXR0aW5nLnNldEluKFsnYXV0b1Byb3BzJywgJ3JpZ2h0J10sIGZhbHNlKS5zZXRJbihbJ2F1dG9Qcm9wcycsICdsZWZ0J10sIHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChzZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCAhPT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoKSB7XG4gICAgaWYgKHNuYXBSZWN0LnRvcCA8IHNuYXBSZWN0LmJvdHRvbSkge1xuICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAndG9wJ10sIGZhbHNlKS5zZXRJbihbJ2F1dG9Qcm9wcycsICdib3R0b20nXSwgdHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0U2V0dGluZyA9IG91dFNldHRpbmcuc2V0SW4oWydhdXRvUHJvcHMnLCAndG9wJ10sIHRydWUpLnNldEluKFsnYXV0b1Byb3BzJywgJ2JvdHRvbSddLCBmYWxzZSlcbiAgICB9XG4gIH1cbiAgWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nLCAnd2lkdGgnLCAnaGVpZ2h0J10uZm9yRWFjaChwcm9wID0+IHtcbiAgICBjb25zdCBzaXplID0gcHJvcCA9PT0gJ2xlZnQnIHx8IHByb3AgPT09ICdyaWdodCcgfHwgcHJvcCA9PT0gJ3dpZHRoJyA/IGNvbnRhaW5lclJlY3Qud2lkdGggOiBjb250YWluZXJSZWN0LmhlaWdodFxuICAgIGxldCB1c2VQZXJjZW50YWdlID0gaXNQZXJjZW50YWdlKGJib3hbcHJvcF0pXG4gICAgaWYgKGlzUlRMKCkpIHtcbiAgICAgIGlmIChwcm9wID09PSAnbGVmdCcpIHtcbiAgICAgICAgdXNlUGVyY2VudGFnZSA9IGlzUGVyY2VudGFnZShiYm94LnJpZ2h0KVxuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSAncmlnaHQnKSB7XG4gICAgICAgIHVzZVBlcmNlbnRhZ2UgPSBpc1BlcmNlbnRhZ2UoYmJveC5sZWZ0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYmJveFtwcm9wXSA9PSBudWxsIHx8IHVzZVBlcmNlbnRhZ2UpIHtcbiAgICAgIG91dHB1dEJveCA9IG91dHB1dEJveC5zZXQocHJvcCwgdG9SYXRpbyhzbmFwUmVjdFtwcm9wXSwgc2l6ZSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dEJveCA9IG91dHB1dEJveC5zZXQocHJvcCwgYCR7TWF0aC5yb3VuZChzbmFwUmVjdFtwcm9wXSl9cHhgKVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIHsgYmJveDogb3V0cHV0Qm94LCBzZXR0aW5nOiBvdXRTZXR0aW5nIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGxvZGFzaCwgdHlwZSBJTUJvdW5kaW5nQm94LCB0eXBlIElNTGF5b3V0SXRlbUpzb24sIGpzeCwgdHlwZSBTZXJpYWxpemVkU3R5bGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgcGFyc2VBc3BlY3RSYXRpbywgaGFuZGxlT25lYnlPbmVBbmltYXRpb24sIGdldExheW91dEl0ZW1TaXplTW9kZSwgc2hvdWxkVXNlQXNwZWN0UmF0aW8gfSBmcm9tICcuLi8uLi91dGlscydcbmltcG9ydCB7IHR5cGUgTGF5b3V0SXRlbVByb3BzLCB0eXBlIEZpeGVkTGF5b3V0SXRlbVNldHRpbmcsIExheW91dEl0ZW1TaXplTW9kZXMgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB7IERFRkFVTFRfRklYX0xBWU9VVF9JVEVNX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQgTGF5b3V0SXRlbSBmcm9tICcuLi8uLi9ydW50aW1lL2xheW91dC1pdGVtJ1xuaW1wb3J0IHsgZ2VuZXJhdGVCQm94U3R5bGUsIGFwcGx5UG9zaXRpb25TZXR0aW5nIH0gZnJvbSAnLi4vZml4ZWQtbGF5b3V0LXV0aWwnXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi9jb21tb24vdXRpbCdcblxuaW50ZXJmYWNlIE93blByb3BzIHtcbiAgdHJhbnNmb3JtZWRCQm94PzogSU1Cb3VuZGluZ0JveFxuICBpbmRleDogbnVtYmVyXG4gIGxheW91dEl0ZW06IElNTGF5b3V0SXRlbUpzb25cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml4ZWRMYXlvdXRJdGVtIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRJdGVtUHJvcHMgJiBPd25Qcm9wcz4ge1xuICBnZXRQb3NpdGlvblN0eWxlIChpdGVtU2V0dGluZzogRml4ZWRMYXlvdXRJdGVtU2V0dGluZyk6IFtTZXJpYWxpemVkU3R5bGVzLCBzdHJpbmddIHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0sIHRyYW5zZm9ybWVkQkJveCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGJib3ggPSB0cmFuc2Zvcm1lZEJCb3ggPz8gbGF5b3V0SXRlbS5iYm94XG4gICAgY29uc3QgcG9zID0gZ2VuZXJhdGVCQm94U3R5bGUoYmJveCwgaXRlbVNldHRpbmcpXG5cbiAgICBjb25zdCBtZXJnZWRTdHlsZTogYW55ID0ge1xuICAgICAgLi4ucG9zLFxuICAgICAgLi4uYXBwbHlQb3NpdGlvblNldHRpbmcobGF5b3V0SXRlbS5iYm94LCBpdGVtU2V0dGluZylcbiAgICB9XG4gICAgcmV0dXJuIHV0aWxzLmdldFBvc2l0aW9uU3R5bGUobWVyZ2VkU3R5bGUpXG4gIH1cblxuICByZW5kZXIgKCk6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0sIGxheW91dElkIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKGxheW91dEl0ZW0gPT0gbnVsbCB8fCBsYXlvdXRJdGVtLmlzUGVuZGluZykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgaXRlbVNldHRpbmc6IEZpeGVkTGF5b3V0SXRlbVNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCBERUZBVUxUX0ZJWF9MQVlPVVRfSVRFTV9TRVRUSU5HLCBsYXlvdXRJdGVtLnNldHRpbmcpXG5cbiAgICBjb25zdCByYXRpbyA9IHBhcnNlQXNwZWN0UmF0aW8oaXRlbVNldHRpbmcuYXNwZWN0UmF0aW8pXG4gICAgY29uc3QgdXNlQXNwZWN0UmF0aW8gPSBzaG91bGRVc2VBc3BlY3RSYXRpbyhpdGVtU2V0dGluZylcbiAgICBjb25zdCBvbmVCeU9uZUFuaW1hdGlvblByb3BzID0gaGFuZGxlT25lYnlPbmVBbmltYXRpb24odGhpcy5wcm9wcylcbiAgICBjb25zdCBbY3NzU3R5bGUsIHRyYW5zZm9ybV0gPSB0aGlzLmdldFBvc2l0aW9uU3R5bGUoaXRlbVNldHRpbmcpXG5cbiAgICBjb25zdCB3aWR0aE1vZGUgPSBnZXRMYXlvdXRJdGVtU2l6ZU1vZGUoXG4gICAgICAnd2lkdGgnLFxuICAgICAgbGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3gsXG4gICAgICBpdGVtU2V0dGluZy5hdXRvUHJvcHNcbiAgICApXG4gICAgY29uc3QgaGVpZ2h0TW9kZSA9IGdldExheW91dEl0ZW1TaXplTW9kZShcbiAgICAgICdoZWlnaHQnLFxuICAgICAgbGF5b3V0SXRlbS5iYm94IGFzIElNQm91bmRpbmdCb3gsXG4gICAgICBpdGVtU2V0dGluZy5hdXRvUHJvcHNcbiAgICApXG5cbiAgICByZXR1cm4gKFxuICAgICAgPExheW91dEl0ZW1cbiAgICAgICAgY3NzPXtjc3NTdHlsZX1cbiAgICAgICAgc3R5bGU9e3sgdHJhbnNmb3JtIH19XG4gICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtLmlkfVxuICAgICAgICBmb3JjZUFzcGVjdFJhdGlvPXt1c2VBc3BlY3RSYXRpb31cbiAgICAgICAgYXNwZWN0UmF0aW89e3JhdGlvfVxuICAgICAgICBpc0luU2VjdGlvbj17dGhpcy5wcm9wcy5pc0luU2VjdGlvbn1cbiAgICAgICAgYXV0b1dpZHRoPXt3aWR0aE1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b31cbiAgICAgICAgYXV0b0hlaWdodD17aGVpZ2h0TW9kZSA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvfVxuICAgICAgICB7Li4ub25lQnlPbmVBbmltYXRpb25Qcm9wc31cbiAgICAgIC8+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgY2xhc3NOYW1lcyxcbiAgbG9kYXNoLFxuICB0eXBlIExheW91dFRyYW5zZm9ybUZ1bmMsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBPbmVCeU9uZUFuaW1hdGlvbixcbiAgSW50ZXJzZWN0aW9uQ29udGV4dFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzdHlsZVV0aWxzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgTGF5b3V0UHJvcHMsIHR5cGUgU3RhdGVUb0xheW91dFByb3BzIH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5pbXBvcnQgTGF5b3V0SXRlbSBmcm9tICcuL2xheW91dC1pdGVtJ1xuaW1wb3J0IHsgbWFwU3RhdGVUb0xheW91dFByb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMnXG5pbXBvcnQgeyBERUZBVUxUX0ZJWF9MQVlPVVRfU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcblxuY2xhc3MgRml4ZWRMYXlvdXRWaWV3ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzPiB7XG4gIGxheW91dFRyYW5zZm9ybTogTGF5b3V0VHJhbnNmb3JtRnVuY1xuXG4gIGNyZWF0ZUl0ZW0gKGxheW91dDogSU1MYXlvdXRKc29uLCBpdGVtSWQ6IHN0cmluZywgaW5kZXg6IG51bWJlciwgdHJhbnNmb3JtZWQ6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaXRlbUlkXVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXRJdGVtXG4gICAgICAgIGtleT17YCR7bGF5b3V0LmlkfV8ke2l0ZW1JZH1gfVxuICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgIGxheW91dElkPXtsYXlvdXQuaWR9XG4gICAgICAgIGxheW91dEl0ZW1JZD17aXRlbUlkfVxuICAgICAgICBsYXlvdXRJdGVtPXtsYXlvdXRJdGVtfVxuICAgICAgICB0cmFuc2Zvcm1lZEJCb3g9e1xuICAgICAgICAgIHRyYW5zZm9ybWVkXG4gICAgICAgICAgICA/IChsYXlvdXQuY29udGVudFtpdGVtSWRdLmJib3gpXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgfVxuICAgICAgICBpc0luU2VjdGlvbj17dGhpcy5wcm9wcy5pc0luU2VjdGlvbn1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7XG4gICAgICBsYXlvdXQsXG4gICAgICBsYXlvdXRzLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgc3R5bGUsXG4gICAgICBicm93c2VyU2l6ZU1vZGVcbiAgICB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGF5b3V0KSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGxldCB0YXJnZXRMYXlvdXQgPSBsYXlvdXRcbiAgICBsZXQgdHJhbnNmb3JtZWQgPSBmYWxzZVxuICAgIGlmIChsYXlvdXRzW2Jyb3dzZXJTaXplTW9kZV0gIT09IGxheW91dC5pZCAmJiB0aGlzLmxheW91dFRyYW5zZm9ybSkge1xuICAgICAgbGV0IGZyb21TaXplTW9kZVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICBPYmplY3Qua2V5cyhsYXlvdXRzKS5zb21lKG1vZGUgPT4ge1xuICAgICAgICBpZiAobGF5b3V0c1ttb2RlXSA9PT0gbGF5b3V0LmlkKSB7XG4gICAgICAgICAgZnJvbVNpemVNb2RlID0gbW9kZVxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICB0YXJnZXRMYXlvdXQgPSB0aGlzLmxheW91dFRyYW5zZm9ybShcbiAgICAgICAgbGF5b3V0LFxuICAgICAgICBmcm9tU2l6ZU1vZGUsXG4gICAgICAgIGJyb3dzZXJTaXplTW9kZVxuICAgICAgKVxuICAgICAgdHJhbnNmb3JtZWQgPSB0cnVlXG4gICAgfVxuICAgIGNvbnN0IGxheW91dFNldHRpbmcgPSBsb2Rhc2guYXNzaWduKFxuICAgICAge30sXG4gICAgICBERUZBVUxUX0ZJWF9MQVlPVVRfU0VUVElORyxcbiAgICAgIHRhcmdldExheW91dC5zZXR0aW5nXG4gICAgKVxuXG4gICAgY29uc3QgbGF5b3V0SWRzOiBzdHJpbmdbXSA9ICh0YXJnZXRMYXlvdXQub3JkZXIgfHwgW10pIGFzIHN0cmluZ1tdXG4gICAgY29uc3QgbWVyZ2VkQ2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2xheW91dCBmaXhlZC1sYXlvdXQgZC1mbGV4JywgY2xhc3NOYW1lKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXttZXJnZWRDbGFzc2VzfVxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgIC4uLnN0eWxlVXRpbHMudG9DU1NTdHlsZShsYXlvdXRTZXR0aW5nLnN0eWxlKSxcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICAgICAgICB9fVxuICAgICAgICBkYXRhLWxheW91dGlkPXt0YXJnZXRMYXlvdXQuaWR9XG4gICAgICA+XG4gICAgICAgIHtsYXlvdXRJZHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgPEludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgbW9uaXRvcjogZmFsc2UgfX0+XG4gICAgICAgICAgICA8T25lQnlPbmVBbmltYXRpb25cbiAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgb2lkPXtsYXlvdXQuaWR9XG4gICAgICAgICAgICAgIGRhdGEtbGF5b3V0aWQ9e2xheW91dC5pZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2xheW91dElkcy5tYXAoKGl0ZW1JZCwgaW5kZXgpID0+IHRoaXMuY3JlYXRlSXRlbSh0YXJnZXRMYXlvdXQsIGl0ZW1JZCwgaW5kZXgsIHRyYW5zZm9ybWVkKSl9XG4gICAgICAgICAgICA8L09uZUJ5T25lQW5pbWF0aW9uPlxuICAgICAgICAgIDwvSW50ZXJzZWN0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWFjdFJlZHV4LmNvbm5lY3Q8XG5TdGF0ZVRvTGF5b3V0UHJvcHMsXG51bmtub3duLFxuTGF5b3V0UHJvcHNcbj4obWFwU3RhdGVUb0xheW91dFByb3BzKShGaXhlZExheW91dFZpZXdlcilcbiIsImV4cG9ydCB7IFNjcmVlblNpZGVQYW5lbCB9IGZyb20gJy4vc2NyZWVuLXNpZGUtcGFuZWwnXG5leHBvcnQgeyBTY3JlZW5NYWluUGFuZWwgfSBmcm9tICcuL3NjcmVlbi1tYWluLXBhbmVsJ1xuZXhwb3J0IHsgU2NyZWVuTWFpblBhbmVsTGlzdCB9IGZyb20gJy4vc2NyZWVuLW1haW4tcGFuZWwtbGlzdCdcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCBTY3JlZW5UcmFuc2l0aW9uVHlwZSwgdHlwZSBJbW11dGFibGVBcnJheSwgdHlwZSBJTVRoZW1lVmFyaWFibGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgU2NyZWVuTWFpblBhbmVsIH0gZnJvbSAnLi9zY3JlZW4tbWFpbi1wYW5lbCdcbmltcG9ydCB0eXBlIHsgTGF5b3V0UHJvcHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG4vLyBpbXBvcnQgeyBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSB9IGZyb20gJy4vdHlwZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICByb290TGF5b3V0SWQ6IHN0cmluZ1xuICBhY3RpdmVJbmRleDogbnVtYmVyXG4gIHZpZXdIZWlnaHQ/OiBudW1iZXJcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXJcbiAgc2NyZWVuczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxuICBpc1NtYWxsU2l6ZTogYm9vbGVhblxuICB0cmFuc2l0aW9uVHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGVcbiAgbGF5b3V0RW50cnk6IFJlYWN0LkNvbXBvbmVudFR5cGU8TGF5b3V0UHJvcHM+XG4gIGlzRGVzaWduTW9kZT86IGJvb2xlYW5cbiAgZm9ybWF0TWVzc2FnZT86IChpZDogc3RyaW5nKSA9PiBzdHJpbmdcbiAgYnVpbGRlclRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xufVxuXG5mdW5jdGlvbiBnZXRDb250YWluZXJTdHlsZSAoXG4gIHRyYW5zaXRpb25UeXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZSxcbiAgdmlld0hlaWdodDogbnVtYmVyLFxuICBoZWFkZXJIZWlnaHQ6IG51bWJlcixcbiAgaXNTbWFsbFNpemU6IGJvb2xlYW4sXG4gIG51bU9mU2NyZWVuczogbnVtYmVyXG4pIHtcbiAgaWYgKHRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlKSB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgICBoZWlnaHQ6ICR7dmlld0hlaWdodH1weDtcbiAgICAgIHRvcDogMDtcblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgaGVpZ2h0OiAke2hlYWRlckhlaWdodCA+IDAgPyBgY2FsYygxMDB2aCAtICR7aGVhZGVySGVpZ2h0fXB4KWAgOiAnMTAwdmgnfTtcbiAgICAgICAgaGVpZ2h0OiAke2hlYWRlckhlaWdodCA+IDAgPyBgY2FsYyh2YXIoLS12aCkgKiAxMDAgLSAke2hlYWRlckhlaWdodH1weClgIDogJ2NhbGModmFyKC0tdmgpICogMTAwKSd9O1xuICAgICAgICB0b3A6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGAke2hlYWRlckhlaWdodH1weGAgOiAwfTtcbiAgICAgICAgLmxheW91dCAuZXhiLWRyb3AtYXJlYSB7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuc2NyZWVuLW1haW4tcGFuZWwge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICAgICAgei1pbmRleDogMDtcbiAgICAgICAgdHJhbnNpdGlvbjogJHtpc1NtYWxsU2l6ZSA/IG51bGwgOiAnb3BhY2l0eSA0MDBtcyd9O1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIC8qIGhlaWdodDogJHtpc1NtYWxsU2l6ZSA/ICd1bnNldCcgOiAnMTAwJSAhaW1wb3J0YW50J307ICovXG5cbiAgICAgICAgLmxheW91dCAuZXhiLWRyb3AtYXJlYSB7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAmLmlzLWFjdGl2ZSB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgIHotaW5kZXg6IDE7XG5cbiAgICAgICAgICAubGF5b3V0IC5leGItZHJvcC1hcmVhIHtcbiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGlmICh0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuQ292ZXIpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgcG9zaXRpb246IHN0aWNreTtcbiAgICAgIGhlaWdodDogJHt2aWV3SGVpZ2h0fXB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIHRvcDogMDtcblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBvdmVyZmxvdzogdW5zZXQ7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgICAgICAuc2NyZWVuLW1haW4tcGFuZWwge1xuICAgICAgICAgIHRvcDogJHtoZWFkZXJIZWlnaHQgPiAwID8gYCR7aGVhZGVySGVpZ2h0fXB4YCA6IDB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYgPiBkaXY6Zmlyc3Qtb2YtdHlwZSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnNjcmVlbi1tYWluLXBhbmVsIHtcbiAgICAgICAgcG9zaXRpb246IHN0aWNreTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBtYXJnaW4tdG9wOiAke251bU9mU2NyZWVucyA9PT0gMSA/ICcwICFpbXBvcnRhbnQnIDogbnVsbH07XG5cbiAgICAgICAgLnNwYWNpbmctYXJlYSB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGlmICh0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuUHVzaCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgaGVpZ2h0OiAke3ZpZXdIZWlnaHR9cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdG9wOiAwO1xuXG4gICAgICBib2R5Om5vdCguZGVzaWduLW1vZGUpICYge1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIG92ZXJmbG93OiB1bnNldDtcblxuICAgICAgICAuc2NyZWVuLW1haW4tcGFuZWwgPiAubGF5b3V0IHtcbiAgICAgICAgICB0b3A6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGAke2hlYWRlckhlaWdodH1weGAgOiAwfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuc2NyZWVuLW1haW4tcGFuZWwgPiAubGF5b3V0IHtcbiAgICAgICAgcG9zaXRpb246IHN0aWNreSAhaW1wb3J0YW50O1xuICAgICAgICB0b3A6IDA7XG4gICAgICB9XG4gICAgYFxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBsYWNlaG9sZGVyU3R5bGUgKHRyYW5zaXRpb25UeXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZSwgdmlld0hlaWdodDogbnVtYmVyLCBpc1NtYWxsU2l6ZTogYm9vbGVhbikge1xuICBpZiAodHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGUpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAke3ZpZXdIZWlnaHR9cHgpO1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAxMDB2aCk7XG4gICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gdmFyKC0tdmgpICogMTAwKTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBpZiAodHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkNvdmVyIHx8IHRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5QdXNoKSB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gJHt2aWV3SGVpZ2h0fXB4KTtcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICBkaXNwbGF5OiBibG9jaztcblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAxMDB2aCk7XG4gICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gdmFyKC0tdmgpICogMTAwKTtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICBgXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNjcmVlbk1haW5QYW5lbExpc3QgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IHJvb3RMYXlvdXRJZCwgYWN0aXZlSW5kZXgsIHZpZXdIZWlnaHQsIGhlYWRlckhlaWdodCwgc2NyZWVucywgdHJhbnNpdGlvblR5cGUsIGlzU21hbGxTaXplLCBsYXlvdXRFbnRyeSwgaXNEZXNpZ25Nb2RlLCBmb3JtYXRNZXNzYWdlLCBidWlsZGVyVGhlbWUgfSA9IHByb3BzXG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3NjcmVlbi1jb250YWluZXInIGNzcz17Z2V0Q29udGFpbmVyU3R5bGUodHJhbnNpdGlvblR5cGUsIHZpZXdIZWlnaHQsIGhlYWRlckhlaWdodCwgaXNTbWFsbFNpemUsIHNjcmVlbnMubGVuZ3RoKX0+XG4gICAgICAgIHtzY3JlZW5zLm1hcCgoc2NyZWVuSWQsIGlkeCkgPT4ge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2NyZWVuTWFpblBhbmVsXG4gICAgICAgICAgICAgIGtleT17c2NyZWVuSWR9XG4gICAgICAgICAgICAgIHJvb3RMYXlvdXRJZD17cm9vdExheW91dElkfVxuICAgICAgICAgICAgICBpbmRleD17aWR4fVxuICAgICAgICAgICAgICBpc0FjdGl2ZT17YWN0aXZlSW5kZXggPT09IGlkeH1cbiAgICAgICAgICAgICAgc2NyZWVuSWQ9e3NjcmVlbklkfVxuICAgICAgICAgICAgICB2aWV3SGVpZ2h0PXt2aWV3SGVpZ2h0fVxuICAgICAgICAgICAgICBoZWFkZXJIZWlnaHQ9e2hlYWRlckhlaWdodH1cbiAgICAgICAgICAgICAgaXNBYnNvbHV0ZT17dHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGV9XG4gICAgICAgICAgICAgIGlzTGFzdD17aWR4ID09PSBzY3JlZW5zLmxlbmd0aCAtIDF9XG4gICAgICAgICAgICAgIGlzU21hbGxTaXplPXtpc1NtYWxsU2l6ZX1cbiAgICAgICAgICAgICAgbGF5b3V0RW50cnk9e2xheW91dEVudHJ5fVxuICAgICAgICAgICAgICBpc0Rlc2lnbk1vZGU9e2lzRGVzaWduTW9kZX1cbiAgICAgICAgICAgICAgZm9ybWF0TWVzc2FnZT17Zm9ybWF0TWVzc2FnZX1cbiAgICAgICAgICAgICAgYnVpbGRlclRoZW1lPXtidWlsZGVyVGhlbWV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIClcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdzY3JlZW4tcGxhY2Vob2xkZXInIGNzcz17Z2V0UGxhY2Vob2xkZXJTdHlsZSh0cmFuc2l0aW9uVHlwZSwgdmlld0hlaWdodCwgaXNTbWFsbFNpemUpfSAvPlxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIHR5cGUgSU1TdGF0ZSwganN4LCBjc3MsIGNsYXNzTmFtZXMsIGdldEFwcFN0b3JlLCBhcHBBY3Rpb25zLCB0eXBlIElNVGhlbWVWYXJpYWJsZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzdHlsZVV0aWxzLCBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBMYXlvdXRQcm9wcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFBhZ2VWaXNpYmlsaXR5Q29udGV4dCB9IGZyb20gJy4uLy4uL2J1aWxkZXIvcGFnZS1jb250ZXh0J1xuaW1wb3J0IHsgU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkUgfSBmcm9tICcuL3R5cGUnXG5pbXBvcnQgeyBWaXNpYmxlT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2FwcGxpY2F0aW9uL3Zpc2libGUnXG5pbXBvcnQgeyBUaGVtZWRUb29sdGlwIH0gZnJvbSAnLi4vLi4vYnVpbGRlci90aGVtZS10b29sdGlwJ1xuXG5pbnRlcmZhY2UgT3duUHJvcHMge1xuICByb290TGF5b3V0SWQ6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIGlzQWJzb2x1dGU/OiBib29sZWFuIC8vIGlmIHVzZXMgYWJzb2x1dGUgcG9zaXRpb24uIGUuZy4gdXNlIGZhZGUgdHJhbnNpdGlvblxuICB2aWV3SGVpZ2h0OiBudW1iZXJcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXJcbiAgc2NyZWVuSWQ6IHN0cmluZ1xuICBpc0xhc3Q6IGJvb2xlYW5cbiAgaXNTbWFsbFNpemU6IGJvb2xlYW5cbiAgbGF5b3V0RW50cnk6IFJlYWN0LkNvbXBvbmVudFR5cGU8TGF5b3V0UHJvcHM+XG4gIGlzRGVzaWduTW9kZT86IGJvb2xlYW5cbiAgZm9ybWF0TWVzc2FnZT86IChpZDogc3RyaW5nKSA9PiBzdHJpbmdcbiAgYnVpbGRlclRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU2NyZWVuTWFpblBhbmVsIChwcm9wczogT3duUHJvcHMpIHtcbiAgY29uc3QgeyByb290TGF5b3V0SWQsIHZpZXdIZWlnaHQsIGhlYWRlckhlaWdodCwgc2NyZWVuSWQsIGlzQWN0aXZlLCBpc0Fic29sdXRlLCBpc0xhc3QsIGlzU21hbGxTaXplLCBsYXlvdXRFbnRyeTogTGF5b3V0RW50cnksIGlzRGVzaWduTW9kZSwgZm9ybWF0TWVzc2FnZSwgYnVpbGRlclRoZW1lIH0gPSBwcm9wc1xuICBjb25zdCBzY3JlZW5Kc29uID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLnNjcmVlbnNbc2NyZWVuSWRdXG4gIH0pXG4gIGNvbnN0IHBhbmVsVmlzaWJsZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5zY3JlZW5QYW5lbFN0YXRlcz8uW3NjcmVlbklkXSA/PyB0cnVlXG4gIH0pXG4gIGNvbnN0IHsgbWFpbiB9ID0gc2NyZWVuSnNvblxuICBjb25zdCB7IHNpZGUsIHNpemUsIG92ZXJsYXkgPSB0cnVlIH0gPSBzY3JlZW5Kc29uLnBhbmVsIHx8IHt9XG4gIGNvbnN0IGVsZW1lbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcblxuICBjb25zdCBzaG93UGFuZWwgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlblBhbmVsVmlzaWJsZUNoYW5nZWQoc2NyZWVuSWQsIHRydWUpKVxuICB9LCBbc2NyZWVuSWRdKVxuXG4gIGZ1bmN0aW9uIGdldFN0eWxlICgpIHtcbiAgICBpZiAoaXNTbWFsbFNpemUpIHtcbiAgICAgIGNvbnN0IGlzRG9ja2VkID0gIW92ZXJsYXkgJiYgc2NyZWVuSnNvbi5wYW5lbCAhPSBudWxsIC8vIG92ZXJsYXkgPT09IGZhbHNlXG4gICAgICBjb25zdCBoZWlnaHRJbkRlc2lnbk1vZGUgPSBpc0RvY2tlZFxuICAgICAgICA/IGAke01hdGgucm91bmQodmlld0hlaWdodCAqIFNDUkVFTl9SQVRJT19JTl9TTUFMTF9TSVpFKX1weGBcbiAgICAgICAgOiBgJHt2aWV3SGVpZ2h0fXB4YFxuICAgICAgY29uc3QgaGVpZ2h0SW5SdW50aW1lID0gaXNEb2NrZWRcbiAgICAgICAgPyBgJHtNYXRoLnJvdW5kKDEwMCAqIFNDUkVFTl9SQVRJT19JTl9TTUFMTF9TSVpFKX1gXG4gICAgICAgIDogJzEwMCdcbiAgICAgIHJldHVybiBjc3NgXG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6ICR7dmlld0hlaWdodH1weDtcblxuICAgICAgICA+IC5sYXlvdXQge1xuICAgICAgICAgICR7c3R5bGVVdGlscy50b0JhY2tncm91bmRFbW90aW9uU3R5bGUoc2NyZWVuSnNvbi5tYWluPy5iYWNrZ3JvdW5kID8/ICh7fSBhcyBhbnkpKX07XG4gICAgICAgICAgaGVpZ2h0OiAke2hlaWdodEluRGVzaWduTW9kZX0gIWltcG9ydGFudDtcbiAgICAgICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgfVxuXG4gICAgICAgIGJvZHk6bm90KC5kZXNpZ24tbW9kZSkgJiB7XG4gICAgICAgICAgaGVpZ2h0OiAke2hlYWRlckhlaWdodCA+IDAgPyBgY2FsYygxMDB2aCAtICR7aGVhZGVySGVpZ2h0fXB4KWAgOiAnMTAwdmgnfTtcbiAgICAgICAgICBoZWlnaHQ6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKHZhcigtLXZoKSAqIDEwMCAtICR7aGVhZGVySGVpZ2h0fXB4KWAgOiAnY2FsYyh2YXIoLS12aCkgKiAxMDApJ307XG4gICAgICAgICAgPiAubGF5b3V0IHtcbiAgICAgICAgICAgIGhlaWdodDogJHtoZWlnaHRJblJ1bnRpbWV9dmggIWltcG9ydGFudDtcbiAgICAgICAgICAgIGhlaWdodDogY2FsYyh2YXIoLS12aCkgKiAke2hlaWdodEluUnVudGltZX0pICFpbXBvcnRhbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLnNwYWNpbmctYXJlYSB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC50b2dnbGUtdmlzaWJsZS1idG4ge1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgcmlnaHQ6IGxlZnQ7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgIH1cbiAgICAgIGBcbiAgICB9XG5cbiAgICBsZXQgbGVmdCA9ICcwcHgnXG4gICAgbGV0IHJpZ2h0ID0gJzBweCdcblxuICAgIGlmIChzaWRlICE9PSAnbm9uZScpIHtcbiAgICAgIGlmICghb3ZlcmxheSAmJiBzaWRlICE9PSAncmlnaHQnKSB7XG4gICAgICAgIGxlZnQgPSBzaXplXG4gICAgICB9XG4gICAgICBpZiAoIW92ZXJsYXkgJiYgc2lkZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICByaWdodCA9IHNpemVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBidG5TdHlsZSA9IGJ1aWxkZXJUaGVtZVxuICAgICAgPyBjc3NgXG4gICAgICBjb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s5MDBdfTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7YnVpbGRlclRoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzQwMF19O1xuICAgICAgYm9yZGVyLWNvbG9yOiAke2J1aWxkZXJUaGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs2MDBdfTtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBjb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLmJsYWNrfTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtidWlsZGVyVGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNjAwXX07XG4gICAgICB9XG4gICAgYFxuICAgICAgOiBudWxsXG5cbiAgICByZXR1cm4gY3NzYFxuICAgICAgJHtzdHlsZVV0aWxzLnRvQmFja2dyb3VuZEVtb3Rpb25TdHlsZShzY3JlZW5Kc29uLm1haW4/LmJhY2tncm91bmQgPz8ge30gYXMgYW55KX07XG4gICAgICBsZWZ0OiAke2lzQWJzb2x1dGUgPyBsZWZ0IDogbnVsbH07XG4gICAgICByaWdodDogJHtpc0Fic29sdXRlID8gcmlnaHQgOiBudWxsfTtcbiAgICAgIG1hcmdpbi1sZWZ0OiAkeyFpc0Fic29sdXRlID8gbGVmdCA6IG51bGx9O1xuICAgICAgbWFyZ2luLXJpZ2h0OiAkeyFpc0Fic29sdXRlID8gcmlnaHQgOiBudWxsfTtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICAgID4gLmxheW91dCB7XG4gICAgICAgIGhlaWdodDogJHt2aWV3SGVpZ2h0fXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgPiAubGF5b3V0IHtcbiAgICAgICAgICBoZWlnaHQ6ICR7aGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKDEwMHZoIC0gJHtoZWFkZXJIZWlnaHR9cHgpYCA6ICcxMDB2aCd9ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgaGVpZ2h0OiAke2hlYWRlckhlaWdodCA+IDAgPyBgY2FsYyh2YXIoLS12aCkgKiAxMDAgLSAke2hlYWRlckhlaWdodH1weClgIDogJ2NhbGModmFyKC0tdmgpICogMTAwKSd9ICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLnNwYWNpbmctYXJlYSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLnRvZ2dsZS12aXNpYmxlLWJ0biB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICByaWdodDogMDtcblxuICAgICAgICA+IGJ1dHRvbiB7XG4gICAgICAgICAgJHtidG5TdHlsZX07XG4gICAgICAgICAgc3ZnIHtcbiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGNvbnN0IGNsYXp6TmFtZSA9IGNsYXNzTmFtZXMoJ3NjcmVlbi1tYWluLXBhbmVsJywge1xuICAgICdpcy1hY3RpdmUnOiBpc0FjdGl2ZSxcbiAgICAnbGFzdC1vbmUnOiBpc0xhc3RcbiAgfSlcbiAgcmV0dXJuIChcbiAgICA8UGFnZVZpc2liaWxpdHlDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtpc0Fic29sdXRlID8gaXNBY3RpdmUgOiB0cnVlfT5cbiAgICAgIDxkaXZcbiAgICAgICAgaWQ9e2Ake3Jvb3RMYXlvdXRJZH1fc2NyZWVuXyR7c2NyZWVuSWR9YH1cbiAgICAgICAgY2xhc3NOYW1lPXtjbGF6ek5hbWV9XG4gICAgICAgIGNzcz17Z2V0U3R5bGUoKX1cbiAgICAgICAgcmVmPXtlbGVtZW50UmVmfVxuICAgICAgICBkYXRhLXNjcmVlbmlkPXtzY3JlZW5JZH1cbiAgICAgICAgZGF0YS1pbmRleD17cHJvcHMuaW5kZXh9XG4gICAgICA+XG4gICAgICAgIHsvKiBzZXQgaXNJbldpZGdldCB0byB0cnVlIGluIG9yZGVyIHRvIGxldCB0aGUgY2xpY2sgZXZlbnQgcHJvcGFnYXRlICovfVxuICAgICAgICA8TGF5b3V0RW50cnkgbGF5b3V0cz17bWFpbi5sYXlvdXR9IGlzSW5XaWRnZXQgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNpbmctYXJlYScgLz5cbiAgICAgICAge2lzRGVzaWduTW9kZSAmJiAhcGFuZWxWaXNpYmxlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndG9nZ2xlLXZpc2libGUtYnRuJyBvbkNsaWNrPXtzaG93UGFuZWx9IGRhdGEtdGVzdGlkPSd0b2dnbGVCdG4nPlxuICAgICAgICAgICAgPFRoZW1lZFRvb2x0aXAgcGxhY2VtZW50PSdhdXRvJyB0aXRsZT17Zm9ybWF0TWVzc2FnZSgnc2hvd0luRGVzaWduVmlldycpfT5cbiAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPSdkZWZhdWx0JyBzaXplPSdzbScgY2xhc3NOYW1lPSdyb3VuZGVkJz5cbiAgICAgICAgICAgICAgICA8VmlzaWJsZU91dGxpbmVkIHNpemU9J20nLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1RoZW1lZFRvb2x0aXA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L1BhZ2VWaXNpYmlsaXR5Q29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgUmVhY3RSZXNpemVEZXRlY3RvcixcbiAgdHlwZSBJTVNjcmVlbkpzb24sXG4gIFNjcmVlblRyYW5zaXRpb25UeXBlLFxuICBTY3JlZW5UcmlnZ2VyVHlwZSxcbiAgY2xhc3NOYW1lcyxcbiAgZ2V0QXBwU3RvcmUsXG4gIGxvZGFzaFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzdHlsZVV0aWxzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgTGF5b3V0UHJvcHMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyB1c2VJbnRlcnNlY3Rpb24gfSBmcm9tICcuLi91c2UtaW50ZXJzZWN0aW9uJ1xuaW1wb3J0IHsgU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkUgfSBmcm9tICcuL3R5cGUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICBpbmRleDogbnVtYmVyXG4gIGlzTGFzdDogYm9vbGVhblxuICB2aWV3SGVpZ2h0PzogbnVtYmVyXG4gIGhlYWRlckhlaWdodDogbnVtYmVyXG4gIHNjcmVlbklkOiBzdHJpbmdcbiAgcmVmRWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgbGF5b3V0RW50cnk6IFJlYWN0LkNvbXBvbmVudFR5cGU8TGF5b3V0UHJvcHM+XG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIHRyYW5zaXRpb25UeXBlOiBTY3JlZW5UcmFuc2l0aW9uVHlwZVxuICBzY3JlZW5UcmFuc2l0aW9uVHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGVcbiAgdHJpZ2dlclR5cGU6IFNjcmVlblRyaWdnZXJUeXBlXG4gIHN0cmV0Y2hlZDogYm9vbGVhblxuICB2ZXJ0aWNhbFNwYWNlOiBzdHJpbmdcbiAgaXNTbWFsbFNpemU6IGJvb2xlYW5cbiAgb25IZWlnaHRDaGFuZ2U6IChpbmRleDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gdm9pZFxuICBvbkludGVyY3Rpb25DaGFuZ2U6IChpbmRleDogbnVtYmVyLCBpc0ludGVyc2VjdGluZzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5jb25zdCBNSU5fUEFORUxfUkFUSU8gPSAwLjI1XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaWRlUGFuZWxTdHlsZSAoXG4gIHByb3BzOiBJTVNjcmVlbkpzb24sXG4gIHZpZXdIZWlnaHQ6IG51bWJlcixcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXIsXG4gIGlzQWN0aXZlOiBib29sZWFuLFxuICB2ZXJ0aWNhbFNwYWNlOiBzdHJpbmcsXG4gIHN0cmV0Y2hlZDogYm9vbGVhbixcbiAgdHJhbnNpdGlvblR5cGU6IFNjcmVlblRyYW5zaXRpb25UeXBlLFxuICBzY3JlZW5UcmFuc2l0aW9uVHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gIGlzU21hbGxTaXplOiBib29sZWFuXG4pIHtcbiAgY29uc3QgeyBzaWRlLCBzaXplLCBvZmZzZXQsIGJhY2tncm91bmQsIG92ZXJsYXkgPSB0cnVlLCBwYWRkaW5nIH0gPSBwcm9wcy5wYW5lbCB8fCB7fVxuICBjb25zdCBpc1JUTCA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb250ZXh0LmlzUlRMXG4gIGNvbnN0IGZhY3RvciA9IGlzUlRMID8gKHNpZGUgPT09ICdsZWZ0JyA/ICctJyA6ICcnKSA6IChzaWRlID09PSAncmlnaHQnID8gJy0nIDogJycpXG4gIGNvbnN0IGJhY2tncm91bmRTdHlsZSA9IHN0eWxlVXRpbHMudG9CYWNrZ3JvdW5kRW1vdGlvblN0eWxlKGJhY2tncm91bmQgPz8gKHt9IGFzIGFueSkpXG4gIGNvbnN0IHNwYWNpbmcgPSBwYXJzZUZsb2F0KHZlcnRpY2FsU3BhY2UpXG5cbiAgaWYgKGlzU21hbGxTaXplKSB7XG4gICAgLy8gb3ZlcmxheSA9PT0gZmFsc2VcbiAgICBjb25zdCBkb2NrZWQgPSAhb3ZlcmxheVxuICAgIHJldHVybiBjc3NgXG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBvcGFjaXR5OiAke3RyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlID8gKGlzQWN0aXZlID8gJzEnIDogJzAuNScpIDogbnVsbH07XG4gICAgICBtaW4taGVpZ2h0OiAke3NjcmVlblRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5Db3ZlciA/IGAke3ZpZXdIZWlnaHR9cHhgIDogbnVsbH07XG4gICAgICBwYWRkaW5nLXRvcDogJHtzY3JlZW5UcmFuc2l0aW9uVHlwZSAhPT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZSAmJiBkb2NrZWQgPyBgJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSl9cHhgIDogbnVsbH07XG5cbiAgICAgICYudG9wLXNwYWNpbmcgPiAucGFuZWwtY29udGVudCB7XG4gICAgICAgIC8qIG1hcmdpbi10b3A6ICR7TWF0aC5yb3VuZCh2aWV3SGVpZ2h0ICogU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkUpfXB4OyAqL1xuICAgICAgfVxuXG4gICAgICAucGFuZWwtY29udGVudCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAke292ZXJsYXkgPyAnJyA6IGJhY2tncm91bmRTdHlsZX07XG4gICAgICAgIC8qIG1hcmdpbi10b3A6ICR7dHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLlB1c2ggPyAnJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSl9cHgnIDogJ3Vuc2V0J307ICovXG5cbiAgICAgICAgPiAubGF5b3V0LCA+IC5sYXlvdXQtd3JhcHBlciA+IC5sYXlvdXQge1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICR7b3ZlcmxheSA/IGJhY2tncm91bmRTdHlsZSA6ICcnfTtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAke01hdGgucm91bmQodmlld0hlaWdodCAqIE1JTl9QQU5FTF9SQVRJTyl9cHg7XG4gICAgICAgICAgcGFkZGluZzogJHtzdHlsZVV0aWxzLnRvQ1NTUGFkZGluZyhwYWRkaW5nKX07XG4gICAgICAgIH1cblxuICAgICAgICA+IC5sYXlvdXQtd3JhcHBlciA+IC5jb2x1bW4tbGF5b3V0ID4gLnRyYWlsLWNvbnRhaW5lcixcbiAgICAgICAgPiAuY29sdW1uLWxheW91dCA+IC50cmFpbC1jb250YWluZXIge1xuICAgICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICAgICAgfVxuXG4gICAgICAgID4gLmxheW91dC13cmFwcGVyID4gLnBsYWNlaG9sZGVyLWJ0biB7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgJHtvdmVybGF5ID8gYmFja2dyb3VuZFN0eWxlIDogJyd9O1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLXNwYWNpbmcge1xuICAgICAgICAgIGhlaWdodDogJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBzcGFjaW5nIC8gMTAwKX1weDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAucGFuZWwtY29udGVudC1wbGFjZWhvbGRlciB7XG4gICAgICAgIHdpZHRoOiAxcHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6ICR7dmlld0hlaWdodH1weDtcbiAgICAgIH1cblxuICAgICAgYm9keTpub3QoLmRlc2lnbi1tb2RlKSAmIHtcbiAgICAgICAgbWluLWhlaWdodDogJHtzY3JlZW5UcmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuQ292ZXIgPyAnMTAwdmgnIDogbnVsbH07XG4gICAgICAgIG1pbi1oZWlnaHQ6ICR7c2NyZWVuVHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkNvdmVyID8gJ2NhbGModmFyKC0tdmgpICogMTAwKScgOiBudWxsfTtcbiAgICAgICAgcGFkZGluZy10b3A6ICR7c2NyZWVuVHJhbnNpdGlvblR5cGUgIT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGUgJiYgZG9ja2VkID8gYCR7MTAwICogU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkV9dmhgIDogbnVsbH07XG4gICAgICAgIHBhZGRpbmctdG9wOiAke3NjcmVlblRyYW5zaXRpb25UeXBlICE9PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlICYmIGRvY2tlZCA/IGBjYWxjKHZhcigtLXZoKSAqICR7MTAwICogU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkV9KWAgOiBudWxsfTtcblxuICAgICAgICA+IC5sYXlvdXQsID4gLmxheW91dC13cmFwcGVyID4gLmxheW91dCB7XG4gICAgICAgICAgbWluLWhlaWdodDogJHtNYXRoLnJvdW5kKDEwMCAqIE1JTl9QQU5FTF9SQVRJTyl9dmg7XG4gICAgICAgICAgbWluLWhlaWdodDogY2FsYyh2YXIoLS12aCkgKiAke01hdGgucm91bmQoMTAwICogTUlOX1BBTkVMX1JBVElPKX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLWNvbnRlbnQtcGxhY2Vob2xkZXIge1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IGNhbGModmFyKC0tdmgpICogMTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYW5lbC1zcGFjaW5nIHtcbiAgICAgICAgICBoZWlnaHQ6ICR7c3BhY2luZ312aDtcbiAgICAgICAgICBoZWlnaHQ6IGNhbGModmFyKC0tdmgpICogJHtzcGFjaW5nfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICByZXR1cm4gY3NzYFxuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246ICR7c2lkZSA9PT0gJ3JpZ2h0JyA/ICdyb3ctcmV2ZXJzZScgOiAncm93J307XG4gICAganVzdGlmeS1jb250ZW50OiAke3NpZGUgPT09ICdjZW50ZXInICYmIG92ZXJsYXkgPyAnY2VudGVyJyA6ICdmbGV4LXN0YXJ0J307XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG9wYWNpdHk6ICR7dHJhbnNpdGlvblR5cGUgPT09IFNjcmVlblRyYW5zaXRpb25UeXBlLkZhZGUgPyAoaXNBY3RpdmUgPyAnMScgOiAnMC41JykgOiBudWxsfTtcblxuICAgICYudG9wLXNwYWNpbmcgPiAucGFuZWwtY29udGVudCB7XG4gICAgICAvKiBtYXJnaW4tdG9wOiAke01hdGgucm91bmQodmlld0hlaWdodCAqIDIgLyAzKX1weDsgKi9cbiAgICB9XG5cbiAgICAucGFuZWwtY29udGVudCB7XG4gICAgICB3aWR0aDogJHtzaXplfTtcbiAgICAgIHRyYW5zZm9ybTogJHtvdmVybGF5ICYmIE1hdGguYWJzKHBhcnNlRmxvYXQob2Zmc2V0KSkgPiAwID8gYHRyYW5zbGF0ZVgoJHtmYWN0b3J9JHtvZmZzZXR9KWAgOiBudWxsfTtcbiAgICAgIGZsZXg6IDAgYXV0bztcbiAgICAgIG1pbi1oZWlnaHQ6ICR7c3RyZXRjaGVkID8gYCR7dmlld0hlaWdodH1weGAgOiAndW5zZXQnfTtcbiAgICAgICR7b3ZlcmxheSA/ICcnIDogYmFja2dyb3VuZFN0eWxlfTtcblxuICAgICAgPiAubGF5b3V0LFxuICAgICAgPiAubGF5b3V0LXdyYXBwZXIgPiAubGF5b3V0IHtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICR7b3ZlcmxheSA/IGJhY2tncm91bmRTdHlsZSA6ICcnfTtcbiAgICAgICAgbWluLWhlaWdodDogJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBNSU5fUEFORUxfUkFUSU8pfXB4O1xuICAgICAgICBwYWRkaW5nOiAke3N0eWxlVXRpbHMudG9DU1NQYWRkaW5nKHBhZGRpbmcpfTtcbiAgICAgIH1cblxuICAgICAgPiAubGF5b3V0LXdyYXBwZXIgPiAuY29sdW1uLWxheW91dCA+IC50cmFpbC1jb250YWluZXIsXG4gICAgICA+IC5jb2x1bW4tbGF5b3V0ID4gLnRyYWlsLWNvbnRhaW5lciB7XG4gICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgPiAubGF5b3V0LXdyYXBwZXIgPiAucGxhY2Vob2xkZXItYnRuIHtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICR7b3ZlcmxheSA/IGJhY2tncm91bmRTdHlsZSA6ICcnfTtcbiAgICAgIH1cblxuICAgICAgLnBhbmVsLXNwYWNpbmcge1xuICAgICAgICBoZWlnaHQ6ICR7TWF0aC5yb3VuZCh2aWV3SGVpZ2h0ICogc3BhY2luZyAvIDEwMCl9cHg7XG5cbiAgICAgICAgJi5sYXN0LWl0ZW0ge1xuICAgICAgICAgIGhlaWdodDogJHtzdHJldGNoZWQgPyBgJHtNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBzcGFjaW5nIC8gMTAwKX1gIDogdmlld0hlaWdodH1weDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC5wYW5lbC1jb250ZW50LXBsYWNlaG9sZGVyIHtcbiAgICAgIHdpZHRoOiAxcHg7XG4gICAgICBtaW4taGVpZ2h0OiAke3N0cmV0Y2hlZCA/IHZpZXdIZWlnaHQgOiBNYXRoLnJvdW5kKHZpZXdIZWlnaHQgKiBNSU5fUEFORUxfUkFUSU8pfXB4O1xuICAgIH1cblxuICAgIGJvZHk6bm90KC5kZXNpZ24tbW9kZSkgJiB7XG4gICAgICAmLnRvcC1zcGFjaW5nID4gLnBhbmVsLWNvbnRlbnQge1xuICAgICAgICAvKiBtYXJnaW4tdG9wOiAkezY2Ljd9dmg7ICovXG4gICAgICB9XG5cbiAgICAgIC5wYW5lbC1jb250ZW50IHtcbiAgICAgICAgbWluLWhlaWdodDogJHtzdHJldGNoZWQgPyAoaGVhZGVySGVpZ2h0ID4gMCA/IGBjYWxjKDEwMHZoIC0gJHtoZWFkZXJIZWlnaHR9cHgpYCA6ICcxMDB2aCcpIDogJ3Vuc2V0J307XG4gICAgICAgIG1pbi1oZWlnaHQ6ICR7c3RyZXRjaGVkID8gKGhlYWRlckhlaWdodCA+IDAgPyBgY2FsYyh2YXIoLS12aCkgKiAxMDAgLSAke2hlYWRlckhlaWdodH1weClgIDogJ2NhbGModmFyKC0tdmgpICogMTAwKScpIDogJ3Vuc2V0J307XG4gICAgICAgID4gLmxheW91dCwgPiAubGF5b3V0LXdyYXBwZXIgPiAubGF5b3V0IHtcbiAgICAgICAgICBtaW4taGVpZ2h0OiB1bnNldDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYW5lbC1zcGFjaW5nIHtcbiAgICAgICAgICBoZWlnaHQ6ICR7c3BhY2luZ312aDtcbiAgICAgICAgICBoZWlnaHQ6IGNhbGModmFyKC0tdmgpICogJHtzcGFjaW5nfSk7XG5cbiAgICAgICAgICAmLmxhc3QtaXRlbSB7XG4gICAgICAgICAgICBoZWlnaHQ6ICR7c3RyZXRjaGVkID8gc3BhY2luZyA6IDEwMH12aDtcbiAgICAgICAgICAgIGhlaWdodDogY2FsYyh2YXIoLS12aCkgKiAke3N0cmV0Y2hlZCA/IHNwYWNpbmcgOiAxMDB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC5wYW5lbC1jb250ZW50LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgbWluLWhlaWdodDogJHtzdHJldGNoZWQgPyAnMTAwJyA6IE1hdGgucm91bmQoMTAwICogTUlOX1BBTkVMX1JBVElPKX12aDtcbiAgICAgICAgbWluLWhlaWdodDogY2FsYyh2YXIoLS12aCkgKiAke3N0cmV0Y2hlZCA/ICcxMDAnIDogTWF0aC5yb3VuZCgxMDAgKiBNSU5fUEFORUxfUkFUSU8pfSk7XG4gICAgICB9XG4gICAgfVxuICBgXG59XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGZ1bmN0aW9uIFNjcmVlblNpZGVQYW5lbCAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpbmRleCxcbiAgICBzY3JlZW5JZCxcbiAgICBvbkludGVyY3Rpb25DaGFuZ2UsXG4gICAgb25IZWlnaHRDaGFuZ2UsXG4gICAgdmlld0hlaWdodCxcbiAgICBoZWFkZXJIZWlnaHQsXG4gICAgbGF5b3V0RW50cnk6IExheW91dEVudHJ5LFxuICAgIGlzQWN0aXZlLFxuICAgIGlzU21hbGxTaXplLFxuICAgIHRyYW5zaXRpb25UeXBlLFxuICAgIHNjcmVlblRyYW5zaXRpb25UeXBlLFxuICAgIHRyaWdnZXJUeXBlLFxuICAgIHN0cmV0Y2hlZCxcbiAgICB2ZXJ0aWNhbFNwYWNlID0gJzAnXG4gIH0gPSBwcm9wc1xuICBjb25zdCBzY3JlZW5Kc29uOiBJTVNjcmVlbkpzb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcuc2NyZWVuc1tzY3JlZW5JZF1cbiAgfSlcbiAgY29uc3QgeyBwYW5lbCB9ID0gc2NyZWVuSnNvblxuICBjb25zdCBlbGVtZW50UmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIGNvbnN0IFtsb2FkZWQsIHNldExvYWRlZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgaGFuZGxlSGVpZ2h0Q2hhbmdlUmVmID0gUmVhY3QudXNlUmVmPChpbmRleDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gdm9pZD4oKVxuXG4gIGNvbnN0IGludGVyc2VjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChpc0ludGVyc2VjdGluZzogYm9vbGVhbikgPT4ge1xuICAgICAgb25JbnRlcmN0aW9uQ2hhbmdlKGluZGV4LCBpc0ludGVyc2VjdGluZylcbiAgICB9LFxuICAgIFtpbmRleCwgb25JbnRlcmN0aW9uQ2hhbmdlXVxuICApXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBoYW5kbGVIZWlnaHRDaGFuZ2VSZWYuY3VycmVudCA9IGxvZGFzaC5kZWJvdW5jZShvbkhlaWdodENoYW5nZSwgMjAwKVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAoaGFuZGxlSGVpZ2h0Q2hhbmdlUmVmLmN1cnJlbnQgYXMgYW55KT8uY2FuY2VsKClcbiAgICB9XG4gIH0sIFtvbkhlaWdodENoYW5nZV0pXG5cbiAgY29uc3Qgb25TaXplQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAgIGhhbmRsZUhlaWdodENoYW5nZVJlZi5jdXJyZW50Py4oaW5kZXgsIGhlaWdodClcbiAgICB9LFxuICAgIFtpbmRleF1cbiAgKVxuXG4gIHVzZUludGVyc2VjdGlvbihcbiAgICBlbGVtZW50UmVmLmN1cnJlbnQsXG4gICAgcHJvcHMucmVmRWxlbWVudCxcbiAgICBpc1NtYWxsU2l6ZSA/IFNjcmVlblRyaWdnZXJUeXBlLkxvd2VyIDogKHRyaWdnZXJUeXBlID8/IFNjcmVlblRyaWdnZXJUeXBlLkJvdHRvbSksXG4gICAgaW50ZXJzZWN0aW9uQ2hhbmdlXG4gIClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldExvYWRlZCh0cnVlKVxuICB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnc2NyZWVuLXNpZGUtcGFuZWwnLCB7XG4gICAgICAgICd0b3Atc3BhY2luZyc6IGluZGV4ID09PSAwICYmIChzY3JlZW5Kc29uLnBhbmVsPy5vdmVybGF5IHx8IGlzU21hbGxTaXplKVxuICAgICAgfSl9XG4gICAgICBkYXRhLXNjcmVlbmlkPXtzY3JlZW5JZH1cbiAgICAgIGRhdGEtaW5kZXg9e2luZGV4fVxuICAgICAgcmVmPXtlbGVtZW50UmVmfVxuICAgICAgY3NzPXtnZXRTaWRlUGFuZWxTdHlsZShzY3JlZW5Kc29uLCB2aWV3SGVpZ2h0LCBoZWFkZXJIZWlnaHQsIGlzQWN0aXZlLCB2ZXJ0aWNhbFNwYWNlLCBzdHJldGNoZWQgfHwgcGFuZWwgPT0gbnVsbCwgdHJhbnNpdGlvblR5cGUsIHNjcmVlblRyYW5zaXRpb25UeXBlLCBpc1NtYWxsU2l6ZSl9XG4gICAgPlxuICAgICAge3BhbmVsICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BhbmVsLWNvbnRlbnQnPlxuICAgICAgICAgIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXtwYW5lbC5sYXlvdXR9IC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3BhbmVsLXNwYWNpbmcnLCB7ICdsYXN0LWl0ZW0nOiBwcm9wcy5pc0xhc3QgfSl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIHshcGFuZWwgJiYgPGRpdiBjbGFzc05hbWU9J3BhbmVsLWNvbnRlbnQtcGxhY2Vob2xkZXInIC8+fVxuICAgICAgPFJlYWN0UmVzaXplRGV0ZWN0b3IgaGFuZGxlSGVpZ2h0IG9uUmVzaXplPXtvblNpemVDaGFuZ2V9IC8+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImV4cG9ydCBjb25zdCBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSA9IDAuMzNcbmV4cG9ydCBjb25zdCBERUZBVUxUX0hFQURFUl9IRUlHSFQgPSA3NVxuIiwiaW1wb3J0IHsgQnJvd3NlclNpemVNb2RlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBGbG93TGF5b3V0SXRlbVNldHRpbmcgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCB7IGdldFZhbHVlT2ZCQm94LCBpc1BlcmNlbnRhZ2UgfSBmcm9tICcuLi8uLi91dGlscydcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNjcmVlbkhlaWdodCAoXG4gIG1haW5QYW5lbENvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gIHNpZGVQYW5lbENvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pIHtcbiAgY29uc3Qgc2NyZWVuRWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gbWFpblBhbmVsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5zY3JlZW4tbWFpbi1wYW5lbCcpXG4gIGNvbnN0IHBhbmVsRWxlbWVudHMgPSBzaWRlUGFuZWxDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnZGl2LnNjcmVlbi1zaWRlLXBhbmVsJylcblxuICBjb25zdCBzaXplID0gc2NyZWVuRWxlbWVudHMubGVuZ3RoXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgY29uc3Qgc2NyZWVuSXRlbSA9IHNjcmVlbkVsZW1lbnRzLml0ZW0oaSlcbiAgICBjb25zdCBwcmV2aW91c0l0ZW0gPSBzY3JlZW5FbGVtZW50cy5pdGVtKGkgLSAxKVxuICAgIGNvbnN0IHByZXZpb3VzUGFuZWxJdGVtID0gcGFuZWxFbGVtZW50cy5pdGVtKGkgLSAxKVxuICAgIHNjcmVlbkl0ZW0uc3R5bGUubWFyZ2luVG9wID0gYCR7cHJldmlvdXNQYW5lbEl0ZW0uY2xpZW50SGVpZ2h0IC0gcHJldmlvdXNJdGVtLmNsaWVudEhlaWdodH1weGBcbiAgfVxuXG4gIGlmIChicm93c2VyU2l6ZU1vZGUgIT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgIG1haW5QYW5lbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtzaWRlUGFuZWxDb250YWluZXIuY2xpZW50SGVpZ2h0fXB4YFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxIZWlnaHQgKGxheW91dEl0ZW0sIGl0ZW1TZXR0aW5nOiBGbG93TGF5b3V0SXRlbVNldHRpbmcpIHtcbiAgY29uc3QgYmJveCA9IGxheW91dEl0ZW0uYmJveCB8fCB7fSBhcyBhbnlcbiAgY29uc3QgaGVpZ2h0ID0gZ2V0VmFsdWVPZkJCb3goYmJveCwgJ2hlaWdodCcpXG4gIGlmICghaGVpZ2h0IHx8IGlzUGVyY2VudGFnZShoZWlnaHQpKSB7XG4gICAgcmV0dXJuICdhdXRvJ1xuICB9XG4gIHN3aXRjaCAoaXRlbVNldHRpbmcuaGVpZ2h0TW9kZSkge1xuICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgcmV0dXJuICdhdXRvJ1xuICAgIGNhc2UgJ2ZpeGVkJzpcbiAgICAgIHJldHVybiBoZWlnaHRcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGlzdGFuY2VVbml0cyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyB0eXBlIEZsb3dMYXlvdXRTZXR0aW5nLCB0eXBlIEZsb3dMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9GTE9XX1NFVFRJTkc6IEZsb3dMYXlvdXRTZXR0aW5nID0ge1xuICBndXR0ZXI6IDAsXG4gIHN0eWxlOiB7XG4gICAgcGFkZGluZzoge1xuICAgICAgbnVtYmVyOiBbMF0sXG4gICAgICB1bml0OiAncHgnXG4gICAgfSxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtc3RhcnQnLFxuICAgIGFsaWduSXRlbXM6ICdzdHJldGNoJyxcbiAgICBib3JkZXJSYWRpdXM6IHtcbiAgICAgIG51bWJlcjogWzBdLFxuICAgICAgdW5pdDogRGlzdGFuY2VVbml0cy5QSVhFTFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9GTE9XX0lURU1fU0VUVElORzogRmxvd0xheW91dEl0ZW1TZXR0aW5nID0ge1xuICBsb2NrUGFyZW50OiB0cnVlLFxuICBoZWlnaHRNb2RlOiAnYXV0bycsXG4gIG9mZnNldFg6IDAsXG4gIG9mZnNldFk6IDBcbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgZXh0ZW5zaW9uU3BlYyxcbiAgTGF5b3V0VHlwZSxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBCcm93c2VyU2l6ZU1vZGUsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBJTUxheW91dEpzb25cbn0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY2xhc3MgRmxvd0xheW91dFRyYW5zZm9ybWVyIGltcGxlbWVudHMgZXh0ZW5zaW9uU3BlYy5MYXlvdXRUcmFuc2Zvcm1lckV4dGVuc2lvbiB7XG4gIGlkID0gJ2Zsb3ctbGF5b3V0LXRyYW5zZm9ybWVyJ1xuXG4gIGxheW91dFR5cGUgPSBMYXlvdXRUeXBlLkZsb3dMYXlvdXRcblxuICB0cmFuc2Zvcm1MYXlvdXQgKGxheW91dDogSU1MYXlvdXRKc29uLCBmcm9tU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSwgdG9TaXplTW9kZTogQnJvd3NlclNpemVNb2RlKTogSU1MYXlvdXRKc29uIHtcbiAgICBpZiAoZnJvbVNpemVNb2RlICE9PSB0b1NpemVNb2RlICYmIHRvU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgICAgbGV0IHVwZGF0ZWRMYXlvdXQ6IElNTGF5b3V0SnNvbiA9IEltbXV0YWJsZShsYXlvdXQpO1xuXG4gICAgICAobGF5b3V0Lm9yZGVyIHx8IFtdKS5mb3JFYWNoKChpdGVtSWQpID0+IHtcbiAgICAgICAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXQuc2V0SW4oWydjb250ZW50JywgaXRlbUlkLCAnc2V0dGluZycsICdoZWlnaHRNb2RlJ10sICdhdXRvJylcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdXBkYXRlZExheW91dFxuICAgIH1cblxuICAgIHJldHVybiBsYXlvdXRcbiAgfVxuXG4gIHRyYW5zZm9ybUxheW91dEl0ZW0gKFxuICAgIGl0ZW06IElNTGF5b3V0SXRlbUpzb24sXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBmcm9tTGF5b3V0SWQ6IHN0cmluZyxcbiAgICB0b0xheW91dElkOiBzdHJpbmcsXG4gICAgZnJvbVNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gICAgdG9TaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gICk6IHsgaXRlbTogSU1MYXlvdXRJdGVtSnNvbiwgaW5kZXg6IG51bWJlciB9IHtcbiAgICByZXR1cm4geyBpbmRleCwgaXRlbSB9XG4gIH1cbn1cbiIsImltcG9ydCB7IHR5cGUgSU1TdGF0ZSwgdHlwZSBJTUxheW91dEl0ZW1Kc29uLCBMYXlvdXRJdGVtVHlwZSwgdHlwZSBMYXlvdXRJdGVtSnNvbiwgY3NzLCB0eXBlIFJlYWN0LCB0eXBlIFNlcmlhbGl6ZWRTdHlsZXMsIGNyZWF0ZVNlbGVjdG9yIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc3R5bGVVdGlscyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBpc1JUTCwgZ2V0VmFsdWVPZkJCb3ggfSBmcm9tICcuLi91dGlscydcbmltcG9ydCB7IGZpbmRMYXlvdXRJZCB9IGZyb20gJy4uL3NlYXJjaC9jb250ZW50cydcbmltcG9ydCB7IHR5cGUgRmxvd0xheW91dEl0ZW1TZXR0aW5nIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVUb0Zsb3dJdGVtUHJvcHMge1xuICBpc0VtcHR5OiBib29sZWFuXG4gIHBhZGRpbmc6IG51bWJlclxuICBzZWxlY3RlZDogYm9vbGVhblxufVxuXG5leHBvcnQgY29uc3QgbWFwU3RhdGVUb0Zsb3dJdGVtUHJvcHM6IChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IHsgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvbiwgbGF5b3V0SWQ6IHN0cmluZyB9KSA9PiBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcyA9IGNyZWF0ZVNlbGVjdG9yKFtcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gb3duUHJvcHNcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uc2VsZWN0aW9uXG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgcmV0dXJuIHNlbGVjdGlvbi5sYXlvdXRJZCA9PT0gb3duUHJvcHMubGF5b3V0SWQgJiYgc2VsZWN0aW9uLmxheW91dEl0ZW1JZCA9PT0gbGF5b3V0SXRlbS5pZFxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SXRlbSB9ID0gb3duUHJvcHNcbiAgICBsZXQgcGFkZGluZyA9IFswLCAwLCAwLCAwXVxuICAgIGlmIChsYXlvdXRJdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgICAgY29uc3Qgd2lkZ2V0SWQgPSBsYXlvdXRJdGVtLndpZGdldElkXG4gICAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgICBpZiAod2lkZ2V0SnNvbikge1xuICAgICAgICBwYWRkaW5nID0gc3R5bGVVdGlscy5leHBhbmRTdHlsZUFycmF5KHdpZGdldEpzb24uY29uZmlnPy5zdHlsZT8ucGFkZGluZz8ubnVtYmVyKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFkZGluZ1swXSArIHBhZGRpbmdbMl0gLy8gdG9wIGFuZCBib3R0b20gcGFkZGluZyBvZiBpbm5lciByb3cgd2lkZ2V0XG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IG93blByb3BzXG4gICAgbGV0IGlzRW1wdHkgPSB0cnVlXG4gICAgaWYgKGxheW91dEl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgICBjb25zdCB3aWRnZXRJZCA9IGxheW91dEl0ZW0ud2lkZ2V0SWRcbiAgICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cblxuICAgICAgaWYgKHdpZGdldEpzb24pIHtcbiAgICAgICAgY29uc3QgbGF5b3V0TmFtZSA9IE9iamVjdC5rZXlzKHdpZGdldEpzb24ubGF5b3V0cylbMF1cbiAgICAgICAgY29uc3QgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoXG4gICAgICAgICAgd2lkZ2V0SnNvbi5sYXlvdXRzW2xheW91dE5hbWVdLFxuICAgICAgICAgIHN0YXRlLmJyb3dzZXJTaXplTW9kZSxcbiAgICAgICAgICBzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlKVxuXG4gICAgICAgIGNvbnN0IGxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgICAgICBpZiAobGF5b3V0ICYmIE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50IHx8IFtdKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgT2JqZWN0LmtleXMobGF5b3V0LmNvbnRlbnQgfHwgW10pLnNvbWUoKGl0ZW1JZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dC5jb250ZW50W2l0ZW1JZF1cbiAgICAgICAgICAgIGlmICghbGF5b3V0SXRlbS5pc1BlbmRpbmcpIHtcbiAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXNFbXB0eVxuICB9XG5dLCAoc2VsZWN0ZWQsIHBhZGRpbmcsIGlzRW1wdHkpID0+ICh7IHNlbGVjdGVkLCBwYWRkaW5nLCBpc0VtcHR5IH0pKVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkdGhGcm9tU2V0dGluZyAoc2V0dGluZykge1xuICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQoc2V0dGluZz8ud2lkdGgpXG4gIGlmICh2YWx1ZSA+IDApIHtcbiAgICBpZiAoYCR7c2V0dGluZy53aWR0aH1gLmluY2x1ZGVzKCdweCcpKSB7XG4gICAgICByZXR1cm4gYCR7TWF0aC5yb3VuZCh2YWx1ZSl9cHhgXG4gICAgfVxuICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKHZhbHVlKX0lYFxuICB9XG4gIHJldHVybiAnMTAwJSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUZsb2F0aW5nUG9zaXRpb24gKFxuICBsYXlvdXRJdGVtOiBMYXlvdXRJdGVtSnNvbiB8IElNTGF5b3V0SXRlbUpzb24sXG4gIHJlc2l6aW5nUHJvcHM6IHsgZGg6IG51bWJlciwgZHc6IG51bWJlciwgaXNSZXNpemluZzogYm9vbGVhbiwgaW5pdFdpZHRoOiBudW1iZXIsIGluaXRIZWlnaHQ6IG51bWJlciB9ID0ge30gYXMgYW55XG4pOiBTZXJpYWxpemVkU3R5bGVzIHtcbiAgY29uc3Qgc2V0dGluZzogRmxvd0xheW91dEl0ZW1TZXR0aW5nID0gbGF5b3V0SXRlbS5zZXR0aW5nXG4gIGNvbnN0IGZsb2F0aW5nQXJlYSA9IHNldHRpbmc/LmZsb2F0aW5nQXJlYSA/PyAxXG4gIGNvbnN0IG9mZnNldFggPSBgJHtzZXR0aW5nPy5vZmZzZXRYID8/IDB9cHhgXG4gIGNvbnN0IG9mZnNldFkgPSBgJHtzZXR0aW5nPy5vZmZzZXRZID8/IDB9cHhgXG5cbiAgY29uc3QgeyBkaCwgZHcsIGluaXRXaWR0aCwgaW5pdEhlaWdodCwgaXNSZXNpemluZyB9ID0gcmVzaXppbmdQcm9wc1xuICAvLyB0cmFuc2xhdGVYIHdpbGwgbm90IGJlIG1vZGlmaWVkIGJ5IHRoZSBlbW90aW9uIGlmIGl0IHVzZXMgY2FsYygpXG4gIGNvbnN0IHRyYW5zbGF0ZVggPSBpc1JUTCgpID8gYHRyYW5zbGF0ZVgoY2FsYyg1MCUgKyAke29mZnNldFh9KSlgIDogYHRyYW5zbGF0ZVgoY2FsYygtNTAlICsgJHtvZmZzZXRYfSkpYFxuXG4gIGNvbnN0IHBvczogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHt9XG4gIHN3aXRjaCAoZmxvYXRpbmdBcmVhKSB7XG4gICAgY2FzZSAxOiAvLyB0b3AtbGVmdFxuICAgICAgcG9zLmxlZnQgPSBvZmZzZXRYXG4gICAgICBwb3MudG9wID0gb2Zmc2V0WVxuICAgICAgcG9zLnRyYW5zZm9ybSA9IG51bGxcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAyOiAvLyB0b3AtY2VudGVyXG4gICAgICBwb3MubGVmdCA9ICc1MCUnXG4gICAgICBwb3MudG9wID0gb2Zmc2V0WVxuICAgICAgcG9zLnRyYW5zZm9ybSA9IHRyYW5zbGF0ZVhcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAzOiAvLyB0b3AtcmlnaHRcbiAgICAgIHBvcy5yaWdodCA9IG9mZnNldFhcbiAgICAgIHBvcy50b3AgPSBvZmZzZXRZXG4gICAgICBwb3MudHJhbnNmb3JtID0gbnVsbFxuICAgICAgYnJlYWtcbiAgICBjYXNlIDQ6IC8vIG1pZGRsZS1sZWZ0XG4gICAgICBwb3MubGVmdCA9IG9mZnNldFhcbiAgICAgIHBvcy50b3AgPSAnNTAlJ1xuICAgICAgcG9zLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKGNhbGMoLTUwJSArICR7b2Zmc2V0WX0pKWBcbiAgICAgIGJyZWFrXG4gICAgY2FzZSA1OiAvLyBtaWRkbGUtY2VudGVyXG4gICAgICBwb3MubGVmdCA9ICc1MCUnXG4gICAgICBwb3MudG9wID0gJzUwJSdcbiAgICAgIHBvcy50cmFuc2Zvcm0gPSBgJHt0cmFuc2xhdGVYfSB0cmFuc2xhdGVZKGNhbGMoLTUwJSArICR7b2Zmc2V0WX0pKWBcbiAgICAgIGJyZWFrXG4gICAgY2FzZSA2OiAvLyBtaWRkbGUtcmlnaHRcbiAgICAgIHBvcy5yaWdodCA9IG9mZnNldFhcbiAgICAgIHBvcy50b3AgPSAnNTAlJ1xuICAgICAgcG9zLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKGNhbGMoLTUwJSArICR7b2Zmc2V0WX0pKWBcbiAgICAgIGJyZWFrXG4gICAgY2FzZSA3OiAvLyBib3R0b20tbGVmdFxuICAgICAgcG9zLmxlZnQgPSBvZmZzZXRYXG4gICAgICBwb3MuYm90dG9tID0gb2Zmc2V0WVxuICAgICAgcG9zLnRyYW5zZm9ybSA9IG51bGxcbiAgICAgIGJyZWFrXG4gICAgY2FzZSA4OiAvLyBib3R0b20tY2VudGVyXG4gICAgICBwb3MubGVmdCA9ICc1MCUnXG4gICAgICBwb3MuYm90dG9tID0gb2Zmc2V0WVxuICAgICAgcG9zLnRyYW5zZm9ybSA9IHRyYW5zbGF0ZVhcbiAgICAgIGJyZWFrXG4gICAgY2FzZSA5OiAvLyBib3R0b20tcmlnaHRcbiAgICAgIHBvcy5yaWdodCA9IG9mZnNldFhcbiAgICAgIHBvcy5ib3R0b20gPSBvZmZzZXRZXG4gICAgICBwb3MudHJhbnNmb3JtID0gbnVsbFxuICAgICAgYnJlYWtcbiAgfVxuICByZXR1cm4gY3NzYFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB6LWluZGV4OiAxO1xuICAgIHdpZHRoOiAke2lzUmVzaXppbmcgPyBgJHtpbml0V2lkdGggKyBkd31weGAgOiBnZXRWYWx1ZU9mQkJveChsYXlvdXRJdGVtLmJib3gsICd3aWR0aCcpfTtcbiAgICBoZWlnaHQ6ICR7aXNSZXNpemluZyA/IGAke2luaXRIZWlnaHQgKyBkaH1weGAgOiBnZXRWYWx1ZU9mQkJveChsYXlvdXRJdGVtLmJib3gsICdoZWlnaHQnKX07XG4gICAgbGVmdDogJHtwb3MubGVmdH07XG4gICAgcmlnaHQ6ICR7cG9zLnJpZ2h0fTtcbiAgICB0b3A6ICR7cG9zLnRvcH07XG4gICAgYm90dG9tOiAke3Bvcy5ib3R0b219O1xuICAgIHRyYW5zZm9ybTogJHtwb3MudHJhbnNmb3JtfTtcbiAgYFxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcywgdHlwZSBJTUxheW91dEl0ZW1Kc29uLCBqc3ggfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIExheW91dEl0ZW1Qcm9wcyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IExheW91dEl0ZW0gZnJvbSAnLi4vLi4vcnVudGltZS9sYXlvdXQtaXRlbSdcbmltcG9ydCB7IGNhbGN1bGF0ZUZsb2F0aW5nUG9zaXRpb24gfSBmcm9tICcuLi9sYXlvdXQtdXRpbHMnXG5cbmludGVyZmFjZSBPd25Qcm9wcyB7XG4gIGluZGV4OiBudW1iZXJcbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvblxuICBndXR0ZXI6IG51bWJlclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG9hdGluZ0xheW91dEl0ZW0gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dEl0ZW1Qcm9wcyAmIE93blByb3BzPiB7XG4gIGNhbGN1bGF0ZVBvc2l0aW9uICgpIHtcbiAgICBjb25zdCB7IGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICByZXR1cm4gY2FsY3VsYXRlRmxvYXRpbmdQb3NpdGlvbihsYXlvdXRJdGVtKVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtLCBvbkNsaWNrIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFsYXlvdXRJdGVtKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBjb25zdCBtZXJnZWRDbGFzcyA9IGNsYXNzTmFtZXMoJ2Zsb3ctbGF5b3V0LWl0ZW0gZmxvYXRpbmcnLCAnZC1mbGV4JylcbiAgICAvLyBjb25zdCBpdGVtU2V0dGluZzogRmxvd0xheW91dEl0ZW1TZXR0aW5nID0gbG9kYXNoLmFzc2lnbih7fSwgREVGQVVMVF9GTE9XX0lURU1fU0VUVElORywgbGF5b3V0SXRlbS5zZXR0aW5nKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8TGF5b3V0SXRlbVxuICAgICAgICBjc3M9e3RoaXMuY2FsY3VsYXRlUG9zaXRpb24oKX1cbiAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICAgIGNsYXNzTmFtZT17bWVyZ2VkQ2xhc3N9XG4gICAgICAvPlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgY2xhc3NOYW1lcywgbG9kYXNoLCBnZXRBcHBTdG9yZSwgdHlwZSBJTUxheW91dEl0ZW1Kc29uLCBqc3gsIGNzcywgdHlwZSBTZXJpYWxpemVkU3R5bGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtUHJvcHMsIHR5cGUgRmxvd0xheW91dEl0ZW1TZXR0aW5nIH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5pbXBvcnQgeyBoYW5kbGVPbmVieU9uZUFuaW1hdGlvbiwgaXNSVEwgfSBmcm9tICcuLi8uLi91dGlscydcbmltcG9ydCB7IERFRkFVTFRfRkxPV19JVEVNX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQgeyBtYXBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcywgdHlwZSBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcywgZ2V0V2lkdGhGcm9tU2V0dGluZyB9IGZyb20gJy4uL2xheW91dC11dGlscydcbmltcG9ydCBMYXlvdXRJdGVtIGZyb20gJy4uLy4uL3J1bnRpbWUvbGF5b3V0LWl0ZW0nXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi9jb21tb24vdXRpbCdcblxuaW50ZXJmYWNlIE93blByb3BzIHtcbiAgaW5kZXg6IG51bWJlclxuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uXG4gIGd1dHRlcjogbnVtYmVyXG59XG5cbmNsYXNzIEZsb3dMYXlvdXRJdGVtIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRJdGVtUHJvcHMgJiBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcyAmIE93blByb3BzPiB7XG4gIGF1dG9IZWlnaHQ6IGJvb2xlYW5cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgY29uc3QgcXVlcnlPYmplY3Q6IGFueSA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5xdWVyeU9iamVjdCA/PyB7fVxuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW0gfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBkb21JZCA9IGAke2xheW91dElkfV9ibG9ja18ke2xheW91dEl0ZW0uaWR9YFxuICAgIGlmIChxdWVyeU9iamVjdC5ibG9ja19pZCA9PT0gZG9tSWQpIHtcbiAgICAgIGNvbnN0IGRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRvbUlkKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvbS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICAgIH0sIDUwMClcbiAgICB9XG4gIH1cblxuICBjYWxIZWlnaHQgKGl0ZW1TZXR0aW5nOiBGbG93TGF5b3V0SXRlbVNldHRpbmcpIHtcbiAgICBjb25zdCBoZWlnaHQgPSB1dGlscy5jYWxIZWlnaHQodGhpcy5wcm9wcy5sYXlvdXRJdGVtLCBpdGVtU2V0dGluZylcbiAgICB0aGlzLmF1dG9IZWlnaHQgPSBoZWlnaHQgPT09ICdhdXRvJ1xuICAgIHJldHVybiBoZWlnaHRcbiAgfVxuXG4gIGdldFN0eWxlIChpdGVtU2V0dGluZzogRmxvd0xheW91dEl0ZW1TZXR0aW5nKTogW1NlcmlhbGl6ZWRTdHlsZXMsIHN0cmluZ10ge1xuICAgIGNvbnN0IHsgaW5kZXgsIGd1dHRlciB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHNpZ24gPSBpc1JUTCgpID8gLTEgOiAxXG4gICAgcmV0dXJuIFtcbiAgICAgIGNzc2BcbiAgICAgICAgbWFyZ2luLXRvcDogJHtpbmRleCA+IDAgPyBgJHtndXR0ZXJ9cHhgIDogJ3Vuc2V0J307XG4gICAgICAgIHdpZHRoOiAke2dldFdpZHRoRnJvbVNldHRpbmcoaXRlbVNldHRpbmcpfTtcbiAgICAgICAgaGVpZ2h0OiAke3RoaXMuY2FsSGVpZ2h0KGl0ZW1TZXR0aW5nKX07XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgYCxcbiAgICAgIGl0ZW1TZXR0aW5nLm9mZnNldFggfHwgaXRlbVNldHRpbmcub2Zmc2V0WSA/IGB0cmFuc2xhdGUoJHsoaXRlbVNldHRpbmcub2Zmc2V0WCB8fCAwKSAqIHNpZ259cHgsICR7aXRlbVNldHRpbmcub2Zmc2V0WSB8fCAwfXB4KWAgOiBudWxsXG4gICAgXVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtLCBvbkNsaWNrLCBpc0VtcHR5IH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFsYXlvdXRJdGVtIHx8IGlzRW1wdHkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZENsYXNzID0gY2xhc3NOYW1lcygnZmxvdy1sYXlvdXQtaXRlbScsICdkLWZsZXgnKVxuICAgIGNvbnN0IGl0ZW1TZXR0aW5nOiBGbG93TGF5b3V0SXRlbVNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCBERUZBVUxUX0ZMT1dfSVRFTV9TRVRUSU5HLCBsYXlvdXRJdGVtLnNldHRpbmcpXG4gICAgY29uc3Qgb25lQnlPbmVBbmltYXRpb25Qcm9wcyA9IGhhbmRsZU9uZWJ5T25lQW5pbWF0aW9uKHRoaXMucHJvcHMpXG4gICAgY29uc3QgW2Nzc1N0eWxlLCB0cmFuc2Zvcm1dID0gdGhpcy5nZXRTdHlsZShpdGVtU2V0dGluZylcblxuICAgIHJldHVybiAoXG4gICAgICA8TGF5b3V0SXRlbVxuICAgICAgICBpZD17YCR7bGF5b3V0SWR9X2Jsb2NrXyR7bGF5b3V0SXRlbS5pZH1gfVxuICAgICAgICBjc3M9e2Nzc1N0eWxlfVxuICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm0gfX1cbiAgICAgICAgbGF5b3V0SWQ9e2xheW91dElkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW0uaWR9XG4gICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICAgIGNsYXNzTmFtZT17bWVyZ2VkQ2xhc3N9XG4gICAgICAgIGF1dG9IZWlnaHQ9e3RoaXMuYXV0b0hlaWdodH1cbiAgICAgICAgey4uLm9uZUJ5T25lQW5pbWF0aW9uUHJvcHN9XG4gICAgICAvPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWFjdFJlZHV4LmNvbm5lY3Q8U3RhdGVUb0Zsb3dJdGVtUHJvcHMsIHVua25vd24sIExheW91dEl0ZW1Qcm9wcyAmIE93blByb3BzPihtYXBTdGF0ZVRvRmxvd0l0ZW1Qcm9wcykoXG4gIEZsb3dMYXlvdXRJdGVtXG4pXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgY2xhc3NOYW1lcyxcbiAgbG9kYXNoLFxuICB0eXBlIExheW91dFRyYW5zZm9ybUZ1bmMsXG4gIEV4dGVuc2lvbk1hbmFnZXIsXG4gIGV4dGVuc2lvblNwZWMsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIE9uZUJ5T25lQW5pbWF0aW9uLFxuICBJbnRlcnNlY3Rpb25Db250ZXh0XG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHN0eWxlVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IExheW91dEl0ZW0gZnJvbSAnLi9sYXlvdXQtaXRlbSdcbmltcG9ydCBGbG9hdGluZ0xheW91dEl0ZW0gZnJvbSAnLi9mbG9hdGluZy1sYXlvdXQtaXRlbSdcbmltcG9ydCB7IFNjcmVlbkdyb3VwIH0gZnJvbSAnLi9zY3JlZW4tZ3JvdXAnXG5pbXBvcnQgeyBERUZBVUxUX0ZMT1dfU0VUVElORyB9IGZyb20gJy4uL2RlZmF1bHQtc2V0dGluZydcbmltcG9ydCB7XG4gIHR5cGUgTGF5b3V0UHJvcHMsXG4gIHR5cGUgU3RhdGVUb0xheW91dFByb3BzLFxuICB0eXBlIEZsb3dMYXlvdXRTZXR0aW5nXG59IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHtcbiAgbWFwU3RhdGVUb0xheW91dFByb3BzXG59IGZyb20gJy4uLy4uL3V0aWxzJ1xuXG5jbGFzcyBMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzPiB7XG4gIGxheW91dFRyYW5zZm9ybTogTGF5b3V0VHJhbnNmb3JtRnVuY1xuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIGNvbnN0IGV4dHMgPSBFeHRlbnNpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RXh0ZW5zaW9ucyhgJHtleHRlbnNpb25TcGVjLkV4dGVuc2lvblBvaW50cy5MYXlvdXRUcmFuc2Zvcm1lcn1gKVxuICAgIGlmIChleHRzICYmIGV4dHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZXh0ID0gZXh0cy5maW5kKGl0ZW0gPT4gKGl0ZW0gYXMgZXh0ZW5zaW9uU3BlYy5MYXlvdXRUcmFuc2Zvcm1lckV4dGVuc2lvbikubGF5b3V0VHlwZSA9PT0gdGhpcy5wcm9wcy5sYXlvdXQudHlwZSlcbiAgICAgIHRoaXMubGF5b3V0VHJhbnNmb3JtID0gKGV4dCBhcyBhbnkpPy50cmFuc2Zvcm1MYXlvdXRcbiAgICB9XG4gIH1cblxuICBfY3JlYXRlSXRlbSAoaXRlbTogSU1MYXlvdXRJdGVtSnNvbiwgaW5kZXg6IG51bWJlciwgbGF5b3V0U2V0dGluZzogRmxvd0xheW91dFNldHRpbmcpIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGlmIChpdGVtPy5pc1BlbmRpbmcpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGlmIChpdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNjcmVlbkdyb3VwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8U2NyZWVuR3JvdXBcbiAgICAgICAgICBrZXk9e2Ake2l0ZW0uaWR9XyR7aW5kZXh9YH1cbiAgICAgICAgICBpdGVtSW5kZXg9e2luZGV4fVxuICAgICAgICAgIGxheW91dElkPXtsYXlvdXQuaWR9XG4gICAgICAgICAgbGF5b3V0SXRlbUlkPXtpdGVtLmlkfVxuICAgICAgICAgIGxheW91dEl0ZW09e2l0ZW19XG4gICAgICAgIC8+XG4gICAgICApXG4gICAgfVxuICAgIGlmIChpdGVtLnNldHRpbmc/LmlzRmxvYXRpbmcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxGbG9hdGluZ0xheW91dEl0ZW1cbiAgICAgICAgICBrZXk9e2l0ZW0uaWR9XG4gICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgIGd1dHRlcj17bGF5b3V0U2V0dGluZy5ndXR0ZXJ9XG4gICAgICAgICAgbGF5b3V0SWQ9e2xheW91dC5pZH1cbiAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2l0ZW0uaWR9XG4gICAgICAgICAgbGF5b3V0SXRlbT17aXRlbX1cbiAgICAgICAgLz5cbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXRJdGVtXG4gICAgICAgIGtleT17aXRlbS5pZH1cbiAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICBndXR0ZXI9e2xheW91dFNldHRpbmcuZ3V0dGVyfVxuICAgICAgICBsYXlvdXRJZD17bGF5b3V0LmlkfVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2l0ZW0uaWR9XG4gICAgICAgIGxheW91dEl0ZW09e2l0ZW19XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBsYXlvdXQsIGNsYXNzTmFtZSwgc3R5bGUsIGxheW91dHMsIGJyb3dzZXJTaXplTW9kZSB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbGF5b3V0KSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGxldCB0YXJnZXRMYXlvdXQgPSBsYXlvdXRcbiAgICBpZiAobGF5b3V0c1ticm93c2VyU2l6ZU1vZGVdICE9PSBsYXlvdXQuaWQgJiYgdGhpcy5sYXlvdXRUcmFuc2Zvcm0pIHtcbiAgICAgIGxldCBmcm9tU2l6ZU1vZGVcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgT2JqZWN0LmtleXMobGF5b3V0cykuc29tZShtb2RlID0+IHtcbiAgICAgICAgaWYgKGxheW91dHNbbW9kZV0gPT09IGxheW91dC5pZCkge1xuICAgICAgICAgIGZyb21TaXplTW9kZSA9IG1vZGVcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdGFyZ2V0TGF5b3V0ID0gdGhpcy5sYXlvdXRUcmFuc2Zvcm0obGF5b3V0LCBmcm9tU2l6ZU1vZGUsIGJyb3dzZXJTaXplTW9kZSlcbiAgICB9XG4gICAgY29uc3QgY29udGVudCA9IHRhcmdldExheW91dC5vcmRlciB8fCBbXVxuICAgIGNvbnN0IGxheW91dFNldHRpbmcgPSBsb2Rhc2guYXNzaWduKHt9LCBERUZBVUxUX0ZMT1dfU0VUVElORywgdGFyZ2V0TGF5b3V0LnNldHRpbmcpXG5cbiAgICBjb25zdCBtZXJnZWRTdHlsZTogYW55ID0ge1xuICAgICAgLi4uc3R5bGUsXG4gICAgICAuLi5zdHlsZVV0aWxzLnRvQ1NTU3R5bGUobGF5b3V0U2V0dGluZy5zdHlsZSksXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgIH1cbiAgICBjb25zdCBvdXRDbGFzcyA9IGNsYXNzTmFtZXMoJ2xheW91dCBmbG93LWxheW91dCB3LTEwMCcsIGNsYXNzTmFtZSlcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17b3V0Q2xhc3N9IHN0eWxlPXttZXJnZWRTdHlsZX0gZGF0YS1sYXlvdXRpZD17bGF5b3V0LmlkfT5cbiAgICAgICAgPEludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgbW9uaXRvcjogdHJ1ZSB9fT5cbiAgICAgICAgICA8T25lQnlPbmVBbmltYXRpb25cbiAgICAgICAgICAgIG9pZD17dGFyZ2V0TGF5b3V0LmlkfVxuICAgICAgICAgICAgZGF0YS1sYXlvdXRpZD17dGFyZ2V0TGF5b3V0LmlkfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSd0cmFpbC1jb250YWluZXIgZC1mbGV4IGZsZXgtY29sdW1uIGFsaWduLWl0ZW1zLWNlbnRlcidcbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgeyhjb250ZW50IGFzIGFueSkubWFwKChsYXlvdXRJdGVtSWQsIGluZGV4KSA9PlxuICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVJdGVtKHRhcmdldExheW91dC5jb250ZW50W2xheW91dEl0ZW1JZF0sIGluZGV4LCBsYXlvdXRTZXR0aW5nKVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L09uZUJ5T25lQW5pbWF0aW9uPlxuICAgICAgICA8L0ludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgTGF5b3V0UHJvcHM+KG1hcFN0YXRlVG9MYXlvdXRQcm9wcykoTGF5b3V0KVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgZ2V0QXBwU3RvcmUsXG4gIGFwcEFjdGlvbnMsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgU2NyZWVuVHJhbnNpdGlvblR5cGUsXG4gIFNjcmVlblRyaWdnZXJUeXBlLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIElNU2NyZWVuR3JvdXBKc29uLFxuICBCcm93c2VyU2l6ZU1vZGUsXG4gIFJlYWN0UmVzaXplRGV0ZWN0b3IsXG4gIGxvZGFzaFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIExheW91dEl0ZW1Qcm9wcyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgU2NyZWVuTWFpblBhbmVsTGlzdCwgU2NyZWVuU2lkZVBhbmVsIH0gZnJvbSAnLi4vY29tbW9uJ1xuaW1wb3J0IExheW91dEVudHJ5IGZyb20gJy4uLy4uL3J1bnRpbWUvbGF5b3V0LWVudHJ5J1xuaW1wb3J0IHsgU0NSRUVOX1JBVElPX0lOX1NNQUxMX1NJWkUsIERFRkFVTFRfSEVBREVSX0hFSUdIVCB9IGZyb20gJy4uL2NvbW1vbi90eXBlJ1xuaW1wb3J0IHsgdXBkYXRlU2NyZWVuSGVpZ2h0IH0gZnJvbSAnLi4vY29tbW9uL3V0aWwnXG5pbXBvcnQgeyBQYWdlQ29udGV4dCB9IGZyb20gJy4uLy4uL2J1aWxkZXIvcGFnZS1jb250ZXh0J1xuXG5pbnRlcmZhY2UgT3duUHJvcHMge1xuICBpdGVtSW5kZXg6IG51bWJlclxuICBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uXG59XG5cbmZ1bmN0aW9uIGdldFN0eWxlICh0cmFuc2l0aW9uVHlwZTogU2NyZWVuVHJhbnNpdGlvblR5cGUsIGlzT3ZlcmxheTogYm9vbGVhbikge1xuICByZXR1cm4gY3NzYFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMTAwJTtcblxuICAgIC5tYWluLXBhbmVscyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBsZWZ0OiAwO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICB0b3A6IDA7XG4gICAgICBib3R0b206IDA7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxuXG4gICAgLnNpZGUtcGFuZWxzIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHotaW5kZXg6IDE7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcblxuICAgICAgPiBkaXY6Zmlyc3Qtb2YtdHlwZSA+IGRpdi5wYW5lbC1jb250ZW50IHtcbiAgICAgICAgcGFkZGluZy10b3A6ICR7TWF0aC5yb3VuZCgxMDAgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSl9dmg7XG4gICAgICAgIHBhZGRpbmctdG9wOiBjYWxjKHZhcigtLXZoKSAqICR7TWF0aC5yb3VuZCgxMDAgKiBTQ1JFRU5fUkFUSU9fSU5fU01BTExfU0laRSl9KTtcbiAgICAgIH1cblxuICAgICAgLyogPiBkaXY6bnRoLWxhc3Qtb2YtdHlwZSgyKSB7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoO1xuICAgICAgfSAqL1xuICAgIH1cblxuICAgICYuc21hbGwtc2l6ZSAubWFpbi1wYW5lbHMge1xuICAgICAgei1pbmRleDogJHtpc092ZXJsYXkgPyAwIDogMX07XG4gICAgfVxuXG4gICAgJi5zbWFsbC1zaXplIC5zaWRlLXBhbmVscyB7XG4gICAgICB6LWluZGV4OiAke2lzT3ZlcmxheSA/IDEgOiAwfTtcbiAgICB9XG5cbiAgICAmLnByaW50LXByZXZpZXcge1xuICAgICAgLnNjcmVlbi1jb250YWluZXIge1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgICAgICAuc2NyZWVuLW1haW4tcGFuZWwge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC5zY3JlZW4tc2lkZS1wYW5lbCB7XG4gICAgICAgIG1pbi1oZWlnaHQ6IGNhbGModmFyKC0tdmgpICogMTAwKTtcbiAgICAgICAgb3BhY2l0eTogMSAhaW1wb3J0YW50O1xuICAgICAgICAucGFuZWwtc3BhY2luZyB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLnNjcmVlbi1wbGFjZWhvbGRlciB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTY3JlZW5Hcm91cCAocHJvcHM6IExheW91dEl0ZW1Qcm9wcyAmIE93blByb3BzKSB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgbGF5b3V0SXRlbSB9ID0gcHJvcHNcbiAgY29uc3QgeyBzY3JlZW5Hcm91cElkIH0gPSBsYXlvdXRJdGVtXG4gIGNvbnN0IHNjcmVlbkdyb3VwOiBJTVNjcmVlbkdyb3VwSnNvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy5zY3JlZW5Hcm91cHNbbGF5b3V0SXRlbS5zY3JlZW5Hcm91cElkXVxuICB9KVxuICBjb25zdCBpc1ByaW50UHJldmlldzogYm9vbGVhbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5pc1ByaW50UHJldmlldyA/PyBmYWxzZVxuICB9KVxuICBjb25zdCBoYXNQYW5lbDogYm9vbGVhbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgLy8gc2NyZWVuIHdpdGggcGFuZWwgYW5kIHdpdGhvdXQgcGFuZWwgY2FuIGJlIG1peGVkXG4gICAgY29uc3Qgc2NyZWVuSWRzID0gc3RhdGUuYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tsYXlvdXRJdGVtLnNjcmVlbkdyb3VwSWRdLnNjcmVlbnNcbiAgICByZXR1cm4gc2NyZWVuSWRzLnNvbWUoc2NyZWVuSWQgPT4ge1xuICAgICAgY29uc3Qgc2NyZWVuID0gc3RhdGUuYXBwQ29uZmlnLnNjcmVlbnNbc2NyZWVuSWRdXG4gICAgICByZXR1cm4gc2NyZWVuLnBhbmVsICE9IG51bGxcbiAgICB9KVxuICB9KVxuICBjb25zdCBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmJyb3dzZXJTaXplTW9kZVxuICB9KVxuICBjb25zdCB7IHBhZ2VJZCB9ID0gUmVhY3QudXNlQ29udGV4dChQYWdlQ29udGV4dClcbiAgY29uc3QgaGVhZGVySGVpZ2h0ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBwYWdlSnNvbiA9IHN0YXRlLmFwcENvbmZpZy5wYWdlc1twYWdlSWRdXG4gICAgaWYgKHBhZ2VKc29uPy5oZWFkZXIpIHtcbiAgICAgIGNvbnN0IGhlYWRlckpzb24gPSBzdGF0ZS5hcHBDb25maWcuaGVhZGVyXG4gICAgICBpZiAoaGVhZGVySnNvbj8uc3RpY2t5KSB7XG4gICAgICAgIGNvbnN0IGJyb3dzZXJTaXplTW9kZSA9IHN0YXRlLmJyb3dzZXJTaXplTW9kZVxuICAgICAgICBjb25zdCBtYWluU2l6ZU1vZGUgPSBzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGhlYWRlckpzb24uaGVpZ2h0W2Jyb3dzZXJTaXplTW9kZV0gfHwgaGVhZGVySnNvbi5oZWlnaHRbbWFpblNpemVNb2RlXSB8fCBERUZBVUxUX0hFQURFUl9IRUlHSFRcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGhlaWdodCBhcyBzdHJpbmcsIDEwKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBjb25zdCB7XG4gICAgc2NyZWVucyxcbiAgICBzdHJldGNoUGFuZWwgPSB0cnVlLFxuICAgIHRyaWdnZXJUeXBlID0gU2NyZWVuVHJpZ2dlclR5cGUuQm90dG9tLFxuICAgIHZlcnRpY2FsU3BhY2UgPSAnMCcsXG4gICAgcGFuZWxUcmFuc2l0aW9uVHlwZSA9IFNjcmVlblRyYW5zaXRpb25UeXBlLlB1c2hcbiAgfSA9IHNjcmVlbkdyb3VwXG4gIGxldCB0cmFuc2l0aW9uVHlwZSA9IGlzUHJpbnRQcmV2aWV3ID8gbnVsbCA6IChzY3JlZW5Hcm91cC50cmFuc2l0aW9uVHlwZSA/PyBTY3JlZW5UcmFuc2l0aW9uVHlwZS5GYWRlKVxuICBpZiAoIWlzUHJpbnRQcmV2aWV3ICYmIGJyb3dzZXJTaXplTW9kZSA9PT0gQnJvd3NlclNpemVNb2RlLlNtYWxsICYmICFoYXNQYW5lbCkge1xuICAgIHRyYW5zaXRpb25UeXBlID0gU2NyZWVuVHJhbnNpdGlvblR5cGUuQ292ZXJcbiAgfVxuICBjb25zdCBuYXZJbmZvID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwUnVudGltZUluZm8uc2NyZWVuR3JvdXBOYXZJbmZvcz8uW3NjcmVlbkdyb3VwSWRdXG4gIH0pXG4gIGNvbnN0IGRvbVJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBzY3JlZW5Hcm91cFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBtYWluUGFuZWxSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3QgW2FjdGl2ZUluZGV4LCBzZXRBY3RpdmVJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuXG4gIGNvbnN0IGlzT3ZlcmxheSA9IFJlYWN0LnVzZU1lbW8oKCk6IGJvb2xlYW4gPT4ge1xuICAgIGlmIChicm93c2VyU2l6ZU1vZGUgIT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbiAgICBjb25zdCBzY3JlZW5zID0gYXBwQ29uZmlnLnNjcmVlbkdyb3Vwcz8uW3NjcmVlbkdyb3VwSWRdPy5zY3JlZW5zXG4gICAgaWYgKHNjcmVlbnM/LlthY3RpdmVJbmRleF0pIHtcbiAgICAgIGNvbnN0IHNjcmVlbiA9IGFwcENvbmZpZy5zY3JlZW5zW3NjcmVlbnNbYWN0aXZlSW5kZXhdXVxuICAgICAgcmV0dXJuIHNjcmVlbi5wYW5lbD8ub3ZlcmxheVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfSwgW3NjcmVlbkdyb3VwSWQsIGFjdGl2ZUluZGV4LCBicm93c2VyU2l6ZU1vZGVdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG5hdkluZm8/LmFjdGl2ZUluZGV4ICE9IG51bGwgJiYgbmF2SW5mby5hY3RpdmVJbmRleCAhPT0gYWN0aXZlSW5kZXgpIHtcbiAgICAgIHNldEFjdGl2ZUluZGV4KG5hdkluZm8uYWN0aXZlSW5kZXgpXG4gICAgfVxuICB9LCBbbmF2SW5mbywgYWN0aXZlSW5kZXhdKVxuXG4gIGNvbnN0IG9uSW50ZXJjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChpbmRleCwgaXNJbnRlcnNlY3RpbmcpID0+IHtcbiAgICAgIGlmIChpc0ludGVyc2VjdGluZyAmJiBpbmRleCAhPT0gYWN0aXZlSW5kZXgpIHtcbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnNjcmVlbkdyb3VwTmF2SW5mb0NoYW5nZWQoc2NyZWVuR3JvdXBJZCwgaW5kZXgsIGZhbHNlKSlcbiAgICAgIH0gZWxzZSBpZiAoIWlzSW50ZXJzZWN0aW5nICYmIGluZGV4ID4gMCkge1xuICAgICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuc2NyZWVuR3JvdXBOYXZJbmZvQ2hhbmdlZChzY3JlZW5Hcm91cElkLCBpbmRleCAtIDEsIGZhbHNlKSlcbiAgICAgIH1cbiAgICB9LFxuICAgIFthY3RpdmVJbmRleCwgc2NyZWVuR3JvdXBJZF1cbiAgKVxuXG4gIGNvbnN0IHNpZGVwYW5lbFJlc2l6ZUhhbmRsZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFzY3JlZW5Hcm91cFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbWFpblBhbmVsQ29udGFpbmVyID0gc2NyZWVuR3JvdXBSZWYuY3VycmVudC5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNpZGVQYW5lbENvbnRhaW5lciA9IHNjcmVlbkdyb3VwUmVmLmN1cnJlbnQuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnRcblxuICAgIC8vIFN5bmMgdGhlIGhlaWdodCBiZXR3ZWVuIG1haW4gcGFuZWwgYW5kIHNpZGUgcGFuZWxcbiAgICBjb25zdCBjb3VudCA9IHNpZGVQYW5lbENvbnRhaW5lci5jaGlsZEVsZW1lbnRDb3VudFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgZWxlbSA9IHNpZGVQYW5lbENvbnRhaW5lci5jaGlsZHJlbltpXVxuICAgICAgY29uc3Qgc2NyZWVuSWQgPSBlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JlZW5pZCcpXG4gICAgICBjb25zdCBtYWluUGFuZWxFbGVtOiBIVE1MRWxlbWVudCA9IG1haW5QYW5lbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1zY3JlZW5pZD1cIiR7c2NyZWVuSWR9XCJdYClcbiAgICAgIGlmIChtYWluUGFuZWxFbGVtKSB7XG4gICAgICAgIGlmIChpc1ByaW50UHJldmlldykge1xuICAgICAgICAgIG1haW5QYW5lbEVsZW0uc3R5bGUuaGVpZ2h0ID0gYCR7ZWxlbS5jbGllbnRIZWlnaHR9cHhgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFpblBhbmVsRWxlbS5zdHlsZS5oZWlnaHQgPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbWFpblBhbmVsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3NpZGVQYW5lbENvbnRhaW5lci5jbGllbnRIZWlnaHR9cHhgXG4gIH0sIFtpc1ByaW50UHJldmlld10pXG5cbiAgY29uc3QgZGVib3VuY2VSZXNpemVIYW5kbGVyID0gUmVhY3QudXNlTWVtbygoKSA9PiBsb2Rhc2guZGVib3VuY2Uoc2lkZXBhbmVsUmVzaXplSGFuZGxlciwgMjAwKSwgW3NpZGVwYW5lbFJlc2l6ZUhhbmRsZXJdKVxuXG4gIGNvbnN0IG9uU2lkZVBhbmVsSGVpZ2h0Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4LCBoZWlnaHQpID0+IHtcbiAgICBpZiAoIXNjcmVlbkdyb3VwUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBtYWluUGFuZWxDb250YWluZXIgPSBzY3JlZW5Hcm91cFJlZi5jdXJyZW50LmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2lkZVBhbmVsQ29udGFpbmVyID0gc2NyZWVuR3JvdXBSZWYuY3VycmVudC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudFxuICAgIGlmICh0cmFuc2l0aW9uVHlwZSA9PT0gU2NyZWVuVHJhbnNpdGlvblR5cGUuRmFkZSkge1xuICAgICAgbWFpblBhbmVsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3NpZGVQYW5lbENvbnRhaW5lci5jbGllbnRIZWlnaHR9cHhgXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5Db3Zlcikge1xuICAgICAgdXBkYXRlU2NyZWVuSGVpZ2h0KG1haW5QYW5lbENvbnRhaW5lciwgc2lkZVBhbmVsQ29udGFpbmVyLCBicm93c2VyU2l6ZU1vZGUpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRyYW5zaXRpb25UeXBlID09PSBTY3JlZW5UcmFuc2l0aW9uVHlwZS5QdXNoKSB7XG4gICAgICBjb25zdCByZWxhdGVkRWxlbWVudDogSFRNTEVsZW1lbnQgPSBtYWluUGFuZWxDb250YWluZXIucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYGRpdi5zY3JlZW4tbWFpbi1wYW5lbFtkYXRhLWluZGV4PVwiJHtpbmRleH1cIl1gXG4gICAgICApXG4gICAgICBjb25zdCBwYW5lbEVsZW1lbnQgPSBzaWRlUGFuZWxDb250YWluZXIucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYGRpdi5zY3JlZW4tc2lkZS1wYW5lbFtkYXRhLWluZGV4PVwiJHtpbmRleH1cIl1gXG4gICAgICApXG4gICAgICByZWxhdGVkRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtwYW5lbEVsZW1lbnQuY2xpZW50SGVpZ2h0fXB4YFxuICAgICAgbWFpblBhbmVsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3NpZGVQYW5lbENvbnRhaW5lci5jbGllbnRIZWlnaHR9cHhgXG4gICAgfVxuICB9LCBbYnJvd3NlclNpemVNb2RlLCB0cmFuc2l0aW9uVHlwZV0pXG5cbiAgaWYgKHNjcmVlbnMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZmxvdy1sYXlvdXQtaXRlbScsIHsgJ3ByaW50LXByZXZpZXcnOiBpc1ByaW50UHJldmlldywgJ3NtYWxsLXNpemUnOiBicm93c2VyU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCB9KX1cbiAgICAgICAgY3NzPXtnZXRTdHlsZSh0cmFuc2l0aW9uVHlwZSwgaXNPdmVybGF5KX1cbiAgICAgICAgZGF0YS1sYXlvdXRpdGVtaWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgZGF0YS1sYXlvdXRpZD17bGF5b3V0SWR9XG4gICAgICAgIHJlZj17ZG9tUmVmfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2NyZWVuLWdyb3VwJyByZWY9e3NjcmVlbkdyb3VwUmVmfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWFpbi1wYW5lbHMnIHJlZj17bWFpblBhbmVsUmVmfT5cbiAgICAgICAgICAgIDxTY3JlZW5NYWluUGFuZWxMaXN0XG4gICAgICAgICAgICAgIHJvb3RMYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICAgIGFjdGl2ZUluZGV4PXthY3RpdmVJbmRleH1cbiAgICAgICAgICAgICAgc2NyZWVucz17c2NyZWVuc31cbiAgICAgICAgICAgICAgdHJhbnNpdGlvblR5cGU9e3RyYW5zaXRpb25UeXBlfVxuICAgICAgICAgICAgICBsYXlvdXRFbnRyeT17TGF5b3V0RW50cnl9XG4gICAgICAgICAgICAgIGhlYWRlckhlaWdodD17aGVhZGVySGVpZ2h0fVxuICAgICAgICAgICAgICBpc1NtYWxsU2l6ZT17YnJvd3NlclNpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGx9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzaWRlLXBhbmVscyc+XG4gICAgICAgICAgICB7c2NyZWVucy5tYXAoKHNjcmVlbklkLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8U2NyZWVuU2lkZVBhbmVsXG4gICAgICAgICAgICAgICAgICBrZXk9e3NjcmVlbklkfVxuICAgICAgICAgICAgICAgICAgaW5kZXg9e2lkeH1cbiAgICAgICAgICAgICAgICAgIGlzTGFzdD17aWR4ID09PSBzY3JlZW5zLmxlbmd0aCAtIDF9XG4gICAgICAgICAgICAgICAgICBzY3JlZW5JZD17c2NyZWVuSWR9XG4gICAgICAgICAgICAgICAgICByZWZFbGVtZW50PXtudWxsfVxuICAgICAgICAgICAgICAgICAgbGF5b3V0RW50cnk9e0xheW91dEVudHJ5fVxuICAgICAgICAgICAgICAgICAgaXNBY3RpdmU9e2lkeCA9PT0gYWN0aXZlSW5kZXh9XG4gICAgICAgICAgICAgICAgICBzdHJldGNoZWQ9e3N0cmV0Y2hQYW5lbH1cbiAgICAgICAgICAgICAgICAgIHRyaWdnZXJUeXBlPXt0cmlnZ2VyVHlwZX1cbiAgICAgICAgICAgICAgICAgIHZlcnRpY2FsU3BhY2U9e3ZlcnRpY2FsU3BhY2V9XG4gICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uVHlwZT17cGFuZWxUcmFuc2l0aW9uVHlwZX1cbiAgICAgICAgICAgICAgICAgIHNjcmVlblRyYW5zaXRpb25UeXBlPXt0cmFuc2l0aW9uVHlwZX1cbiAgICAgICAgICAgICAgICAgIG9uSGVpZ2h0Q2hhbmdlPXtvblNpZGVQYW5lbEhlaWdodENoYW5nZX1cbiAgICAgICAgICAgICAgICAgIG9uSW50ZXJjdGlvbkNoYW5nZT17b25JbnRlcmN0aW9uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgaXNTbWFsbFNpemU9e2Jyb3dzZXJTaXplTW9kZSA9PT0gQnJvd3NlclNpemVNb2RlLlNtYWxsfVxuICAgICAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0PXtoZWFkZXJIZWlnaHR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8UmVhY3RSZXNpemVEZXRlY3RvciBoYW5kbGVIZWlnaHQgb25SZXNpemU9e2RlYm91bmNlUmVzaXplSGFuZGxlcn0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIFNjcmVlblRyaWdnZXJUeXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgSU5URVJTRUNUSU9OX0hFSUdIVCA9IDIgLy8gaW4gcGVyY2VudGFnZVxuXG5mdW5jdGlvbiBidWlsZFRocmVzaG9sZExpc3QgKCkge1xuICBjb25zdCBzdGVwID0gMTAwXG4gIGNvbnN0IHJlc3VsdCA9IFswXVxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBzdGVwOyBpKyspIHtcbiAgICByZXN1bHQucHVzaChpIC8gc3RlcClcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cbmZ1bmN0aW9uIGdldFJvb3RNYXJnaW4gKHRyaWdnZXJUeXBlOiBTY3JlZW5UcmlnZ2VyVHlwZSkge1xuICBzd2l0Y2ggKHRyaWdnZXJUeXBlKSB7XG4gICAgY2FzZSBTY3JlZW5UcmlnZ2VyVHlwZS5Ub3A6XG4gICAgICByZXR1cm4gYDAlIDAlIC0kezEwMCAtIElOVEVSU0VDVElPTl9IRUlHSFR9JSAwJWBcbiAgICBjYXNlIFNjcmVlblRyaWdnZXJUeXBlLkJvdHRvbTpcbiAgICAgIC8vIG1ha2UgYSBsaXR0bGUgc3BhY2UgYmV0d2VlbiB0aGUgYm90dG9tIGluIG9yZGVyIHRvIHRyaWdnZXIgc2NyZWVuIG91dFxuICAgICAgcmV0dXJuIGAtJHsxMDAgLSBJTlRFUlNFQ1RJT05fSEVJR0hUfSUgMCUgLTJweCAwJWBcbiAgICBjYXNlIFNjcmVlblRyaWdnZXJUeXBlLlVwcGVyOlxuICAgICAgcmV0dXJuIGAtJHsxMDAgLyAzIC0gSU5URVJTRUNUSU9OX0hFSUdIVCAvIDJ9JSAwJSAtJHsyMDAgLyAzIC0gSU5URVJTRUNUSU9OX0hFSUdIVCAvIDJ9JSAwJWBcbiAgICBjYXNlIFNjcmVlblRyaWdnZXJUeXBlLkxvd2VyOlxuICAgICAgcmV0dXJuIGAtJHsyMDAgLyAzIC0gSU5URVJTRUNUSU9OX0hFSUdIVCAvIDJ9JSAwJSAtJHsxMDAgLyAzIC0gSU5URVJTRUNUSU9OX0hFSUdIVCAvIDJ9JSAwJWBcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSByZWZcbiAqIEBwYXJhbSByb290RWxlbWVudFxuICogQHBhcmFtIG9uSW50ZXJzZWN0aW9uQ2hhbmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VJbnRlcnNlY3Rpb24gKFxuICByZWY6IEhUTUxFbGVtZW50LFxuICByb290RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIHRyaWdnZXJUeXBlOiBTY3JlZW5UcmlnZ2VyVHlwZSxcbiAgb25JbnRlcnNlY3Rpb25DaGFuZ2U6IChpc0ludGVyc2VjdGluZzogYm9vbGVhbikgPT4gdm9pZFxuKSB7XG4gIGNvbnN0IG9ic2VydmVyUmVmID0gUmVhY3QudXNlUmVmPEludGVyc2VjdGlvbk9ic2VydmVyPigpXG4gIGNvbnN0IGxhc3RJbnRlcnNlY3RpbmcgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQudW5vYnNlcnZlKHJlZilcbiAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlSW50ZXJzZWN0aW9uQ2hhbmdlID0gKGVudHJ5OiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5KSA9PiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoaXMgZXZlbnQgbWF5IGJlIHRyaWdnZWQgbGF0ZXIgdGhhbiB0aGUgaW50ZXJzZWN0aW5nIHRpbWUuXG4gICAgICAgKiBGb3IgZXhhbXBsZSwgdGhlIHR3byByZWN0cyBtYXkgbG9va3MgbGlrZSB0aGUgZm9sbG93aW5nIHdoZW5cbiAgICAgICAqIGludGVyY3Rpb24gY2hhbmdlIGV2ZW50IGlzIGZpcmVkLlxuICAgICAgICogICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0gcmVjdC50b3BcbiAgICAgICAqICAgICAgICAgICAgICAgfCAgICAgICAgICB8XG4gICAgICAgKiAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSByb290UmVjdC50b3BcbiAgICAgICAqICAgICAgICAgIHwgICAgfCAgICAgICAgICB8ICAgICB8XG4gICAgICAgKiAgICAgICAgICB8ICAgIHwgICAgICAgICAgfCAgICAgfFxuICAgICAgICogICAgICAgICAgfCAgICB8ICAgICAgICAgIHwgICAgIHxcbiAgICAgICAqICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHJvb3RSZWN0LmJvdHRvbVxuICAgICAgICogICAgICAgICAgICAgICB8ICAgICAgICAgIHxcbiAgICAgICAqICAgICAgICAgICAgICAgfCAgICAgICAgICB8XG4gICAgICAgKiAgICAgICAgICAgICAgIC0tLS0tLS0tLS0tLSByZWN0LmJvdHRvbVxuICAgICAgICovXG4gICAgICBjb25zdCByZWN0ID0gZW50cnkuYm91bmRpbmdDbGllbnRSZWN0XG4gICAgICBjb25zdCByb290UmVjdCA9IGVudHJ5LnJvb3RCb3VuZHNcbiAgICAgIGNvbnN0IGlzVG9wSW50ZXJzZWN0aW5nID0gTWF0aC5hYnMocmVjdC5ib3R0b20gLSByb290UmVjdC50b3ApID49IE1hdGguYWJzKHJlY3QudG9wIC0gcm9vdFJlY3QudG9wKVxuXG4gICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgbGFzdEludGVyc2VjdGluZy5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICBpZiAoaXNUb3BJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICBvbkludGVyc2VjdGlvbkNoYW5nZSh0cnVlKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGxhc3RJbnRlcnNlY3RpbmcuY3VycmVudCkge1xuICAgICAgICBsYXN0SW50ZXJzZWN0aW5nLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICBpZiAoaXNUb3BJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICBvbkludGVyc2VjdGlvbkNoYW5nZShmYWxzZSlcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZWYgJiYgdHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zdCBoYW5kbGVyID0gKGVudHJpZXM6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnlbXSkgPT4ge1xuICAgICAgICBoYW5kbGVJbnRlcnNlY3Rpb25DaGFuZ2UoZW50cmllc1swXSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICBoYW5kbGVyLFxuICAgICAgICB7XG4gICAgICAgICAgdGhyZXNob2xkOiBidWlsZFRocmVzaG9sZExpc3QoKSxcbiAgICAgICAgICByb290OiByb290RWxlbWVudCB8fCBkb2N1bWVudCxcbiAgICAgICAgICByb290TWFyZ2luOiBnZXRSb290TWFyZ2luKHRyaWdnZXJUeXBlKVxuICAgICAgICB9XG4gICAgICApXG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHJlZilcbiAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQgPSBvYnNlcnZlclxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBvYnNlcnZlclJlZi5jdXJyZW50LnVub2JzZXJ2ZShyZWYpXG4gICAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9LCBbcmVmLCByb290RWxlbWVudCwgb25JbnRlcnNlY3Rpb25DaGFuZ2UsIHRyaWdnZXJUeXBlXSlcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgdHlwZSBJbnRlcmFjdGFibGUgfSBmcm9tICdAaW50ZXJhY3Rqcy90eXBlcydcbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCBqc3gsIGNzcywgY2xhc3NOYW1lcywgZ2V0QXBwU3RvcmUsIHR5cGUgSU1TdGF0ZSwgQXBwTW9kZSwgbW9kdWxlTG9hZGVyLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcmVmZXJlbmNlSXRlbUlkOiBzdHJpbmdcbiAgZGlyZWN0aW9uOiAncm93JyB8ICdjb2wnXG4gIGxheW91dElkOiBzdHJpbmdcbiAgb25SZXNpemVFbmQ/OiAoaWQ6IHN0cmluZywgZHg6IG51bWJlciwgZHk6IG51bWJlcikgPT4gdm9pZFxufVxuXG5jb25zdCBNSU5fU0laRSA9IDMyXG5cbmZ1bmN0aW9uIHJlc3RyaWN0UmVzaXppbmcgKFxuICBwcmV2SXRlbVJlY3Q6IERPTVJlY3QsXG4gIG5leHRJdGVtUmVjdDogRE9NUmVjdCxcbiAgZGlyZWN0aW9uOiAncm93JyB8ICdjb2wnLFxuICBkeDogbnVtYmVyLFxuICBkeTogbnVtYmVyLFxuICBpc1JUTDogYm9vbGVhblxuKTogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9IHtcbiAgbGV0IHggPSBkeFxuICBsZXQgeSA9IGR5XG4gIGlmIChkaXJlY3Rpb24gPT09ICdyb3cnKSB7XG4gICAgY29uc3QgcHJldldpZHRoID0gaXNSVEwgPyBuZXh0SXRlbVJlY3Qud2lkdGggOiBwcmV2SXRlbVJlY3Qud2lkdGhcbiAgICBjb25zdCBuZXh0V2lkdGggPSBpc1JUTCA/IHByZXZJdGVtUmVjdC53aWR0aCA6IG5leHRJdGVtUmVjdC53aWR0aFxuICAgIGlmIChkeCA8IDApIHtcbiAgICAgIGlmIChwcmV2V2lkdGggPiBNSU5fU0laRSkge1xuICAgICAgICB4ID0gLU1hdGgubWluKE1hdGguYWJzKGR4KSwgcHJldldpZHRoIC0gTUlOX1NJWkUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gMFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZHggPiAwKSB7XG4gICAgICBpZiAobmV4dFdpZHRoID4gTUlOX1NJWkUpIHtcbiAgICAgICAgeCA9IE1hdGgubWluKGR4LCBuZXh0V2lkdGggLSBNSU5fU0laRSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSAwXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkeSA8IDApIHtcbiAgICAgIGlmIChwcmV2SXRlbVJlY3QuaGVpZ2h0ID4gTUlOX1NJWkUpIHtcbiAgICAgICAgeSA9IC1NYXRoLm1pbihNYXRoLmFicyhkeSksIHByZXZJdGVtUmVjdC5oZWlnaHQgLSBNSU5fU0laRSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHkgPSAwXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkeSA+IDApIHtcbiAgICAgIGlmIChuZXh0SXRlbVJlY3QuaGVpZ2h0ID4gTUlOX1NJWkUpIHtcbiAgICAgICAgeSA9IE1hdGgubWluKGR5LCBuZXh0SXRlbVJlY3QuaGVpZ2h0IC0gTUlOX1NJWkUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5ID0gMFxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4geyB4LCB5IH1cbn1cblxuZnVuY3Rpb24gZ2V0U2l6ZSAobGF5b3V0SXRlbUVsZW1lbnQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgY29uc3QgbGF5b3V0SWQgPSBsYXlvdXRJdGVtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGF5b3V0aWQnKVxuICBjb25zdCBsYXlvdXRJdGVtSWQgPSBsYXlvdXRJdGVtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGF5b3V0aXRlbWlkJylcbiAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xuXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdXG4gIHJldHVybiArbGF5b3V0SXRlbS5iYm94LndpZHRoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTcGxpdHRlciAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgcmVmZXJlbmNlSXRlbUlkLCBkaXJlY3Rpb24sIGxheW91dElkLCBvblJlc2l6ZUVuZCB9ID0gcHJvcHNcbiAgY29uc3QgZG9tUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIGNvbnN0IGludGVyYWN0YWJsZVJlZiA9IFJlYWN0LnVzZVJlZjxJbnRlcmFjdGFibGU+KClcbiAgY29uc3QgaW50ZXJhY3RSZWYgPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgaXNSVEwgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29udGV4dD8uaXNSVEwgPz8gZmFsc2VcblxuICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBSdW50aW1lSW5mby5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuICB9KVxuXG4gIGNvbnN0IGxheW91dFJlc2l6YWJsZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbcHJvcHMubGF5b3V0SWRdXG4gICAgcmV0dXJuIGxheW91dC5zZXR0aW5nPy5yZXNpemFibGUgPz8gdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IHNpemUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dCA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgIHJldHVybiBsYXlvdXQuc2V0dGluZz8uc3BsaXRTaXplID8/IDhcbiAgfSlcblxuICBjb25zdCBjb2xvciA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0ID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgcmV0dXJuIGxheW91dC5zZXR0aW5nPy5zcGxpdENvbG9yID8/ICd2YXIoLS1saWdodC01MDApJ1xuICB9KVxuXG4gIGNvbnN0IHN0eWxlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcHhTaXplID0gYCR7c2l6ZX1weGBcbiAgICBjb25zdCBjYW5SZXNpemUgPSBpc0Rlc2lnbk1vZGUgPyB0cnVlIDogbGF5b3V0UmVzaXphYmxlXG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIHdpZHRoOiAke2RpcmVjdGlvbiA9PT0gJ2NvbCcgPyAnMTAwJScgOiBweFNpemV9O1xuICAgICAgaGVpZ2h0OiAke2RpcmVjdGlvbiA9PT0gJ2NvbCcgPyBweFNpemUgOiAnMTAwJSd9O1xuICAgICAgYmFja2dyb3VuZDogJHtjb2xvcn07XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB6LWluZGV4OiAxMDtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuXG4gICAgICAuaG9yaXpvbnRhbC1zcGxpdHRlciB7XG4gICAgICAgIGN1cnNvcjogJHtjYW5SZXNpemUgPyAnY29sLXJlc2l6ZScgOiAnZGVmYXVsdCd9O1xuICAgICAgfVxuXG4gICAgICAudmVydGljYWwtc3BsaXR0ZXIge1xuICAgICAgICBjdXJzb3I6ICR7Y2FuUmVzaXplID8gJ3Jvdy1yZXNpemUnIDogJ2RlZmF1bHQnfTtcbiAgICAgIH1cbiAgICBgXG4gIH0sIFtkaXJlY3Rpb24sIGxheW91dFJlc2l6YWJsZSwgaXNEZXNpZ25Nb2RlLCBzaXplLCBjb2xvcl0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgbGV0IGR4XG4gICAgbGV0IGR5XG4gICAgbGV0IHBhcmVudFJlY3Q6IERPTVJlY3RcbiAgICBsZXQgcHJldkl0ZW06IEhUTUxFbGVtZW50XG4gICAgbGV0IHByZXZJdGVtUmVjdDogRE9NUmVjdFxuICAgIGxldCBwcmV2U2l6ZVxuICAgIGxldCBvcmlnaW5QcmV2SXRlbVdpZHRoXG4gICAgbGV0IG9yaWdpblByZXZJdGVtSGVpZ2h0XG4gICAgbGV0IG5leHRJdGVtOiBIVE1MRWxlbWVudFxuICAgIGxldCBuZXh0SXRlbVJlY3Q6IERPTVJlY3RcbiAgICBsZXQgbmV4dFNpemVcbiAgICBsZXQgb3JpZ2luTmV4dEl0ZW1XaWR0aFxuICAgIGxldCBvcmlnaW5OZXh0SXRlbUhlaWdodFxuXG4gICAgbW9kdWxlTG9hZGVyLmxvYWRNb2R1bGUoJ2ppbXUtY29yZS9kbmQnKS50aGVuKG1vZHVsZSA9PiB7XG4gICAgICBjb25zdCBpbnRlcmFjdCA9IG1vZHVsZS5pbnRlcmFjdFxuICAgICAgaW50ZXJhY3RSZWYuY3VycmVudCA9IGludGVyYWN0XG5cbiAgICAgIGlmICghZG9tUmVmLmN1cnJlbnQpIHsgLy8gbWF5YmUgdW5tb3VudGVkIGluIHRoaXMgYXN5bmMgY2FsbGJhY2tcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gaW50ZXJhY3QoZG9tUmVmLmN1cnJlbnQpXG4gICAgICAgIC5vcmlnaW4oJ3BhcmVudCcpXG4gICAgICAgIC5kcmFnZ2FibGUoe1xuICAgICAgICAgIGluZXJ0aWE6IGZhbHNlLFxuICAgICAgICAgIGF1dG9TY3JvbGw6IGZhbHNlLFxuICAgICAgICAgIGVuYWJsZWQ6IGlzRGVzaWduTW9kZSA/IHRydWUgOiBsYXlvdXRSZXNpemFibGUsXG4gICAgICAgICAgbW9kaWZpZXJzOiBbXG4gICAgICAgICAgICBpbnRlcmFjdC5tb2RpZmllcnMucmVzdHJpY3Qoe1xuICAgICAgICAgICAgICByZXN0cmljdGlvbjogJ3BhcmVudCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXSxcbiAgICAgICAgICBsb2NrQXhpczogZGlyZWN0aW9uID09PSAncm93JyA/ICd4JyA6ICd5JyxcbiAgICAgICAgICBvbnN0YXJ0OiAoZXZlbnQ6IEludGVyYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgIGR4ID0gMFxuICAgICAgICAgICAgZHkgPSAwXG4gICAgICAgICAgICBwYXJlbnRSZWN0ID0gZG9tUmVmLmN1cnJlbnQucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gICAgICAgICAgICBwcmV2SXRlbSA9IGRvbVJlZi5jdXJyZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgIHByZXZJdGVtUmVjdCA9IHByZXZJdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgICAgICBvcmlnaW5QcmV2SXRlbVdpZHRoID0gcHJldkl0ZW0uc3R5bGUud2lkdGhcbiAgICAgICAgICAgIG9yaWdpblByZXZJdGVtSGVpZ2h0ID0gcHJldkl0ZW0uc3R5bGUuaGVpZ2h0XG4gICAgICAgICAgICBwcmV2U2l6ZSA9IGdldFNpemUocHJldkl0ZW0pXG5cbiAgICAgICAgICAgIG5leHRJdGVtID0gZG9tUmVmLmN1cnJlbnQubmV4dEVsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50XG4gICAgICAgICAgICBuZXh0SXRlbVJlY3QgPSBuZXh0SXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgICAgb3JpZ2luTmV4dEl0ZW1XaWR0aCA9IG5leHRJdGVtLnN0eWxlLndpZHRoXG4gICAgICAgICAgICBvcmlnaW5OZXh0SXRlbUhlaWdodCA9IG5leHRJdGVtLnN0eWxlLmhlaWdodFxuICAgICAgICAgICAgbmV4dFNpemUgPSBnZXRTaXplKG5leHRJdGVtKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25tb3ZlOiAoZXZlbnQ6IEludGVyYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgIGR4ICs9IGV2ZW50LmR4XG4gICAgICAgICAgICBkeSArPSBldmVudC5keVxuXG4gICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHJlc3RyaWN0UmVzaXppbmcocHJldkl0ZW1SZWN0LCBuZXh0SXRlbVJlY3QsIGRpcmVjdGlvbiwgZHgsIGR5LCBpc1JUTClcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IGlzUlRMID8gLTEgOiAxXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncm93Jykge1xuICAgICAgICAgICAgICBwcmV2SXRlbS5zdHlsZS53aWR0aCA9IGBjYWxjKCR7cHJldlNpemV9JSArICR7eCAqIGZhY3Rvcn1weClgXG4gICAgICAgICAgICAgIG5leHRJdGVtLnN0eWxlLndpZHRoID0gYGNhbGMoJHtuZXh0U2l6ZX0lIC0gJHt4ICogZmFjdG9yfXB4KWBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHByZXZJdGVtLnN0eWxlLmhlaWdodCA9IGBjYWxjKCR7cHJldlNpemV9JSArICR7eX1weClgXG4gICAgICAgICAgICAgIG5leHRJdGVtLnN0eWxlLmhlaWdodCA9IGBjYWxjKCR7bmV4dFNpemV9JSAtICR7eX1weClgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvbmVuZDogKGV2ZW50OiBJbnRlcmFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICBkeCArPSBldmVudC5keFxuICAgICAgICAgICAgZHkgKz0gZXZlbnQuZHlcblxuICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSByZXN0cmljdFJlc2l6aW5nKHByZXZJdGVtUmVjdCwgbmV4dEl0ZW1SZWN0LCBkaXJlY3Rpb24sIGR4LCBkeSwgaXNSVEwpXG4gICAgICAgICAgICBjb25zdCBmYWN0b3IgPSBpc1JUTCA/IC0xIDogMVxuICAgICAgICAgICAgLy8gcmVzdG9yZSBzdHlsZSBvZiBpdGVtc1xuICAgICAgICAgICAgcHJldkl0ZW0uc3R5bGUud2lkdGggPSBvcmlnaW5QcmV2SXRlbVdpZHRoXG4gICAgICAgICAgICBuZXh0SXRlbS5zdHlsZS53aWR0aCA9IG9yaWdpbk5leHRJdGVtV2lkdGhcbiAgICAgICAgICAgIHByZXZJdGVtLnN0eWxlLmhlaWdodCA9IG9yaWdpblByZXZJdGVtSGVpZ2h0XG4gICAgICAgICAgICBuZXh0SXRlbS5zdHlsZS5oZWlnaHQgPSBvcmlnaW5OZXh0SXRlbUhlaWdodFxuICAgICAgICAgICAgb25SZXNpemVFbmQocmVmZXJlbmNlSXRlbUlkLCBNYXRoLnJvdW5kKHggKiBmYWN0b3IgKiAxMDAwMCAvIHBhcmVudFJlY3Qud2lkdGgpIC8gMTAwLCBNYXRoLnJvdW5kKHkgKiAxMDAwMCAvIHBhcmVudFJlY3QuaGVpZ2h0KSAvIDEwMClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaW50ZXJhY3RhYmxlUmVmLmN1cnJlbnQ/LnVuc2V0KClcbiAgICAgIGludGVyYWN0YWJsZVJlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cbiAgfSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpbnRlcmFjdGFibGVSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICBpbnRlcmFjdFJlZi5jdXJyZW50KGRvbVJlZi5jdXJyZW50KS5kcmFnZ2FibGUoaXNEZXNpZ25Nb2RlID8gdHJ1ZSA6IGxheW91dFJlc2l6YWJsZSlcbiAgICB9XG4gIH0sIFtsYXlvdXRSZXNpemFibGUsIGlzRGVzaWduTW9kZV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17ZG9tUmVmfSBjc3M9e3N0eWxlfSBjbGFzc05hbWU9J2dyaWQtc3BsaXQgZmxleC1zaHJpbmstMCc+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndy0xMDAgaC0xMDAnLCB7XG4gICAgICAgICAgJ2hvcml6b250YWwtc3BsaXR0ZXInOiBkaXJlY3Rpb24gPT09ICdyb3cnLFxuICAgICAgICAgICd2ZXJ0aWNhbC1zcGxpdHRlcic6IGRpcmVjdGlvbiA9PT0gJ2NvbCdcbiAgICAgICAgfSl9PjwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIElNTGF5b3V0SnNvbixcbiAgdHlwZSBJTUFwcENvbmZpZyxcbiAgY3NzLFxuICBMYXlvdXRUeXBlLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgdHlwZSBJTVN0YXRlLFxuICBHcmlkSXRlbVR5cGUsXG4gIHR5cGUgSU1HcmlkTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgTGF5b3V0SW5mb1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzdHlsZVV0aWxzIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2ZQbGFpbkNvbnRlbnQgKGxheW91dDogSU1MYXlvdXRKc29uLCBsYXlvdXRJdGVtSWQ6IHN0cmluZyk6IG51bWJlciB7XG4gIGxldCBzdGFydCA9IDBcblxuICBjb25zdCByb290SXRlbUlkID0gbGF5b3V0LnNldHRpbmcucm9vdEl0ZW1cbiAgY29uc3Qgcm9vdEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIHJvb3RJdGVtSWQpXG4gIGlmIChyb290SXRlbSAmJiByb290SXRlbS5jaGlsZHJlbj8ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbLi4ucm9vdEl0ZW0uY2hpbGRyZW5dXG4gICAgd2hpbGUgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZmlyc3RJdGVtSWQgPSBjYW5kaWRhdGVzLnNoaWZ0KClcbiAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGdldEdyaWRJdGVtKGxheW91dCwgZmlyc3RJdGVtSWQpXG4gICAgICBjb25zdCBwYXJlbnRJZCA9IGZpcnN0SXRlbS5wYXJlbnRcbiAgICAgIGNvbnN0IHBhcmVudEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIHBhcmVudElkKVxuXG4gICAgICBpZiAoXG4gICAgICAgIGAke2ZpcnN0SXRlbS5pZH1gID09PSBsYXlvdXRJdGVtSWQgfHxcbiAgICAgICAgKHBhcmVudEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIgJiYgcGFyZW50SXRlbS5jaGlsZHJlbi5pbmNsdWRlcyhsYXlvdXRJdGVtSWQpKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBzdGFydFxuICAgICAgfVxuXG4gICAgICBpZiAoZmlyc3RJdGVtLmNoaWxkcmVuPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIGl0IGlzIGEgZ3JvdXBcbiAgICAgICAgY2FuZGlkYXRlcy51bnNoaWZ0KC4uLmZpcnN0SXRlbS5jaGlsZHJlbilcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIC8vIHRhYiBvbmx5IGluY3JlYXNlIGluZGV4IG9uY2VcbiAgICAgIGlmIChcbiAgICAgICAgcGFyZW50SXRlbS5ncmlkVHlwZSAhPT0gR3JpZEl0ZW1UeXBlLlRhYiB8fFxuICAgICAgICAocGFyZW50SXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlRhYiAmJiBwYXJlbnRJdGVtLmNoaWxkcmVuLmluZGV4T2YoZmlyc3RJdGVtSWQpID09PSAwKVxuICAgICAgKSB7XG4gICAgICAgIHN0YXJ0ICs9IDFcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0YXJ0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xhc3RDaGlsZE9mUm9vdEl0ZW0gKGxheW91dDogSU1MYXlvdXRKc29uLCBsYXlvdXRJdGVtSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBsZXQgY3VycmVudEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIGxheW91dEl0ZW1JZClcbiAgaWYgKGN1cnJlbnRJdGVtPy5jaGlsZHJlbj8ubGVuZ3RoID4gMCkge1xuICAgIC8vIGNoaWxkcmVuJ3MgaXMgYmVoaW5kIGN1cnJlbnRJdGVtXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgd2hpbGUgKGN1cnJlbnRJdGVtICE9IG51bGwpIHtcbiAgICBjb25zdCBwYXJlbnRJZCA9IGN1cnJlbnRJdGVtLnBhcmVudFxuICAgIGlmIChwYXJlbnRJZCA9PSBudWxsKSB7XG4gICAgICBicmVha1xuICAgIH1cbiAgICAvLyBjaGVjayBpZiBpdCB0aGUgbGFzdCBjaGlsZCBvZiBpdHMgcGFyZW50XG4gICAgY29uc3QgcGFyZW50SXRlbSA9IGdldEdyaWRJdGVtKGxheW91dCwgcGFyZW50SWQpXG4gICAgY29uc3QgbGVuID0gcGFyZW50SXRlbS5jaGlsZHJlbi5sZW5ndGhcbiAgICBjb25zdCBsYXN0SWQgPSBwYXJlbnRJdGVtLmNoaWxkcmVuW2xlbiAtIDFdXG4gICAgaWYgKCtsYXN0SWQgIT09ICtjdXJyZW50SXRlbS5pZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGN1cnJlbnRJdGVtID0gcGFyZW50SXRlbVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0V4cGFuZGFibGUgKHN0YXRlOiBJTVN0YXRlLCBsYXlvdXRJZDogc3RyaW5nLCBsYXlvdXRJdGVtSWQ6IHN0cmluZykge1xuICBjb25zdCBsYXlvdXQgPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgY29uc3QgbGF5b3V0SXRlbSA9IGxheW91dC5jb250ZW50W2xheW91dEl0ZW1JZF0gYXMgSU1HcmlkTGF5b3V0SXRlbUpzb25cbiAgY29uc3QgY2FuRXhwYW5kID0gbGF5b3V0SXRlbS5leHBhbmRhYmxlID8/IHRydWVcbiAgaWYgKCFjYW5FeHBhbmQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICAvLyBzZXQgZXhwYW5kYWJsZSB0byBmYWxzZSBpZiBpdCBpcyB0aGUgb25seSBpdGVtIGluIGdyaWRcbiAgY29uc3Qgcm9vdEl0ZW0gPSBsYXlvdXQ/LnNldHRpbmc/LnJvb3RJdGVtXG4gIGxldCBpc09ubHlJdGVtID0gZmFsc2VcbiAgaWYgKHJvb3RJdGVtID09PSBsYXlvdXRJdGVtSWQpIHtcbiAgICBjb25zdCByb290TGF5b3V0SXRlbSA9IGdldEdyaWRJdGVtKGxheW91dCwgcm9vdEl0ZW0pXG4gICAgaWYgKHJvb3RMYXlvdXRJdGVtLmNoaWxkcmVuID09IG51bGwgfHwgcm9vdExheW91dEl0ZW0uY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICBpc09ubHlJdGVtID0gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gIWlzT25seUl0ZW1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcmlkTm9kZSB7XG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIHR5cGU6IEdyaWRJdGVtVHlwZVxuICBjaGlsZHJlbj86IEdyaWROb2RlW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyaWRJdGVtIChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgbGF5b3V0SXRlbUlkOiBzdHJpbmcpOiBJTUdyaWRMYXlvdXRJdGVtSnNvbiB7XG4gIHJldHVybiBsYXlvdXQuY29udGVudD8uW2xheW91dEl0ZW1JZF0gYXMgSU1HcmlkTGF5b3V0SXRlbUpzb25cbn1cblxuZnVuY3Rpb24gZmV0Y2hHcmlkTm9kZSAobGF5b3V0OiBJTUxheW91dEpzb24sIGxheW91dEl0ZW1JZDogc3RyaW5nKTogR3JpZE5vZGUge1xuICBjb25zdCBpdGVtID0gZ2V0R3JpZEl0ZW0obGF5b3V0LCBsYXlvdXRJdGVtSWQpXG4gIGlmIChpdGVtID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGNvbnN0IHsgZ3JpZFR5cGUgPSBHcmlkSXRlbVR5cGUuUGxhaW4sIGNoaWxkcmVuIH0gPSBpdGVtXG4gIGNvbnN0IHJlc3VsdDogR3JpZE5vZGUgPSB7IGxheW91dEl0ZW1JZCwgdHlwZTogZ3JpZFR5cGUgfVxuXG4gIGlmIChjaGlsZHJlbj8ubGVuZ3RoID4gMCkge1xuICAgIHJlc3VsdC5jaGlsZHJlbiA9IFsuLi5jaGlsZHJlbl0ubWFwKChpdGVtSWQpID0+IGZldGNoR3JpZE5vZGUobGF5b3V0LCBpdGVtSWQpKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JpZExheW91dFN0cnVjdHVyZSAobGF5b3V0OiBJTUxheW91dEpzb24pOiBHcmlkTm9kZSB7XG4gIGlmIChsYXlvdXQudHlwZSAhPT0gTGF5b3V0VHlwZS5HcmlkTGF5b3V0KSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IHJvb3RJdGVtSWQgPSBsYXlvdXQuc2V0dGluZz8ucm9vdEl0ZW1cbiAgcmV0dXJuIGZldGNoR3JpZE5vZGUobGF5b3V0LCBgJHtyb290SXRlbUlkfWApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYWJlbE9mR3JpZFRhYiAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dEluZm86IExheW91dEluZm8sXG4gIHRyYW5zbGF0ZTogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xuKTogc3RyaW5nIHtcbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBsYXlvdXRJbmZvXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtsYXlvdXRJdGVtSWRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICBjb25zdCB3aWRnZXQgPSBhcHBDb25maWcud2lkZ2V0c1tsYXlvdXRJdGVtLndpZGdldElkXVxuICAgIGlmICghd2lkZ2V0KSB7XG4gICAgICByZXR1cm4gdHJhbnNsYXRlKCdwbGFjZWhvbGRlcicpXG4gICAgfVxuICAgIHJldHVybiB3aWRnZXQ/LmxhYmVsID8/IGxheW91dEl0ZW0ubGFiZWwgPz8gbGF5b3V0SXRlbS5pZCAvLyBtYXkgYmUgYSBwbGFjZWhvbGRlclxuICB9XG4gIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGFwcENvbmZpZy5zZWN0aW9uc1tsYXlvdXRJdGVtLnNlY3Rpb25JZF1cbiAgICByZXR1cm4gc2VjdGlvbi5sYWJlbFxuICB9XG4gIGlmIChsYXlvdXRJdGVtPy5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlJvdykge1xuICAgIHJldHVybiBsYXlvdXRJdGVtLmxhYmVsID8/IHRyYW5zbGF0ZSgnZ3JpZFJvdycpXG4gIH1cbiAgaWYgKGxheW91dEl0ZW0/LmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuQ29sdW1uKSB7XG4gICAgcmV0dXJuIGxheW91dEl0ZW0ubGFiZWwgPz8gdHJhbnNsYXRlKCdncmlkQ29sJylcbiAgfVxuICBpZiAobGF5b3V0SXRlbT8uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICByZXR1cm4gbGF5b3V0SXRlbS5sYWJlbCA/PyB0cmFuc2xhdGUoJ3RhYnMnKVxuICB9XG4gIHJldHVybiBsYXlvdXRJdGVtPy5sYWJlbCA/PyBsYXlvdXRJdGVtPy5pZCA/PyAnJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsUGFkZGluZ1N0eWxlIChsYXlvdXRTZXR0aW5nKSB7XG4gIGNvbnN0IHBhZGRpbmcgPSBzdHlsZVV0aWxzLnRvQ1NTUGFkZGluZyhsYXlvdXRTZXR0aW5nPy5zdHlsZT8ucGFkZGluZylcbiAgaWYgKHBhZGRpbmcpIHtcbiAgICBpZiAobGF5b3V0U2V0dGluZy5wYWRkaW5nQ29sb3IpIHtcbiAgICAgIGNvbnN0IHBhZGRpbmdUb2tlbnMgPSBwYWRkaW5nLnNwbGl0KCcgJylcbiAgICAgIGNvbnN0IHBhZGRpbmdDb2xvciA9IGxheW91dFNldHRpbmcucGFkZGluZ0NvbG9yXG4gICAgICBsZXQgcHJlZml4ID0gJydcbiAgICAgIGNvbnN0IHVhID0gd2luZG93LmppbXVVQS5icm93c2VyLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgaWYgKHVhID09PSAnZmlyZWZveCcpIHtcbiAgICAgICAgcHJlZml4ID0gJy1tb3otJ1xuICAgICAgfSBlbHNlIGlmICh1YSA9PT0gJ3NhZmFyaScgfHwgdWEgPT09ICdjaHJvbWUnKSB7XG4gICAgICAgIHByZWZpeCA9ICctd2Via2l0LSdcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNzc2BcbiAgICAgICAgcGFkZGluZzogJHtwYWRkaW5nfTtcbiAgICAgICAgYmFja2dyb3VuZC1pbWFnZTpcbiAgICAgICAgJHtwcmVmaXh9bGluZWFyLWdyYWRpZW50KDI3MGRlZywgJHtwYWRkaW5nQ29sb3J9ICR7cGFkZGluZ1Rva2Vuc1swXX0sIHRyYW5zcGFyZW50ICR7cGFkZGluZ1Rva2Vuc1swXX0pLFxuICAgICAgICAke3ByZWZpeH1saW5lYXItZ3JhZGllbnQoMTgwZGVnLCAke3BhZGRpbmdDb2xvcn0gJHtwYWRkaW5nVG9rZW5zWzFdfSwgdHJhbnNwYXJlbnQgJHtwYWRkaW5nVG9rZW5zWzFdfSksXG4gICAgICAgICR7cHJlZml4fWxpbmVhci1ncmFkaWVudCg5MGRlZywgJHtwYWRkaW5nQ29sb3J9ICR7cGFkZGluZ1Rva2Vuc1syXX0sIHRyYW5zcGFyZW50ICR7cGFkZGluZ1Rva2Vuc1syXX0pLFxuICAgICAgICAke3ByZWZpeH1saW5lYXItZ3JhZGllbnQoMGRlZywgJHtwYWRkaW5nQ29sb3J9ICR7cGFkZGluZ1Rva2Vuc1szXX0sIHRyYW5zcGFyZW50ICR7cGFkZGluZ1Rva2Vuc1szXX0pO1xuICAgICAgYFxuICAgIH1cbiAgICByZXR1cm4gY3NzYFxuICAgICAgcGFkZGluZzogJHtwYWRkaW5nfTtcbiAgICBgXG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgZXh0ZW5zaW9uU3BlYyxcbiAgTGF5b3V0VHlwZSxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBCcm93c2VyU2l6ZU1vZGUsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIEdyaWRJdGVtVHlwZSxcbiAgdHlwZSBJTUdyaWRMYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBJbW11dGFibGVBcnJheVxufSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjbGFzcyBHcmlkTGF5b3V0VHJhbnNmb3JtZXIgaW1wbGVtZW50cyBleHRlbnNpb25TcGVjLkxheW91dFRyYW5zZm9ybWVyRXh0ZW5zaW9uIHtcbiAgaWQgPSAnZ3JpZC1sYXlvdXQtdHJhbnNmb3JtZXInXG5cbiAgbGF5b3V0VHlwZSA9IExheW91dFR5cGUuR3JpZExheW91dFxuXG4gIHRyYW5zZm9ybUxheW91dCA9IChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgZnJvbVNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSk6IElNTGF5b3V0SnNvbiA9PiB7XG4gICAgaWYgKGZyb21TaXplTW9kZSAhPT0gdG9TaXplTW9kZSAmJiB0b1NpemVNb2RlID09PSBCcm93c2VyU2l6ZU1vZGUuU21hbGwpIHtcbiAgICAgIGxldCB1cGRhdGVkTGF5b3V0OiBJTUxheW91dEpzb24gPSBJbW11dGFibGUobGF5b3V0KVxuICAgICAgY29uc3Qgcm9vdElkID0gbGF5b3V0LnNldHRpbmc/LnJvb3RJdGVtXG4gICAgICBpZiAocm9vdElkICYmIGxheW91dC5jb250ZW50Py5bcm9vdElkXSkge1xuICAgICAgICBjb25zdCBjb250ZW50SWRzID0gW11cbiAgICAgICAgY29uc3Qgcm9vdEl0ZW0gPSBsYXlvdXQuY29udGVudFtyb290SWRdIGFzIElNR3JpZExheW91dEl0ZW1Kc29uXG4gICAgICAgIHVwZGF0ZWRMYXlvdXQgPSB0aGlzLmNvbGxlY3RJdGVtKGxheW91dCwgcm9vdElkLCByb290SXRlbS5jaGlsZHJlbiwgY29udGVudElkcylcblxuICAgICAgICBpZiAoY29udGVudElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXQuc2V0SW4oWydjb250ZW50Jywgcm9vdElkLCAnZ3JpZFR5cGUnXSwgR3JpZEl0ZW1UeXBlLlRhYilcbiAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCByb290SWQsICdjaGlsZHJlbiddLCBjb250ZW50SWRzKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdXBkYXRlZExheW91dFxuICAgIH1cblxuICAgIHJldHVybiBsYXlvdXRcbiAgfVxuXG4gIGNvbGxlY3RJdGVtID0gKGxheW91dDogSU1MYXlvdXRKc29uLCByb290SWQ6IHN0cmluZywgY2hpbGRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz4sIGl0ZW1MaXN0OiBzdHJpbmdbXSk6IElNTGF5b3V0SnNvbiA9PiB7XG4gICAgbGV0IHVwZGF0ZWRMYXlvdXQgPSBsYXlvdXRcbiAgICBjaGlsZElkcz8uZm9yRWFjaChpdGVtSWQgPT4ge1xuICAgICAgaWYgKCFsYXlvdXQuY29udGVudFtpdGVtSWRdLmlzUGVuZGluZykge1xuICAgICAgICBjb25zdCBpdGVtID0gbGF5b3V0LmNvbnRlbnRbaXRlbUlkXSBhcyBJTUdyaWRMYXlvdXRJdGVtSnNvblxuICAgICAgICBpZiAoaXRlbS5ncmlkVHlwZSAhPT0gR3JpZEl0ZW1UeXBlLkNvbHVtbiAmJiBpdGVtLmdyaWRUeXBlICE9PSBHcmlkSXRlbVR5cGUuUm93ICYmIGl0ZW0uZ3JpZFR5cGUgIT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICAgICAgICBpdGVtTGlzdC5wdXNoKGl0ZW1JZClcbiAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dC5zZXRJbihbJ2NvbnRlbnQnLCBpdGVtSWQsICdwYXJlbnQnXSwgcm9vdElkKVxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY2hpbGRyZW4/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdGhpcy5jb2xsZWN0SXRlbSh1cGRhdGVkTGF5b3V0LCByb290SWQsIGl0ZW0uY2hpbGRyZW4sIGl0ZW1MaXN0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdXBkYXRlZExheW91dFxuICB9XG5cbiAgdHJhbnNmb3JtTGF5b3V0SXRlbSAoXG4gICAgaXRlbTogSU1MYXlvdXRJdGVtSnNvbixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGZyb21MYXlvdXRJZDogc3RyaW5nLFxuICAgIHRvTGF5b3V0SWQ6IHN0cmluZyxcbiAgICBmcm9tU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgICB0b1NpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgKTogeyBpdGVtOiBJTUxheW91dEl0ZW1Kc29uLCBpbmRleDogbnVtYmVyIH0ge1xuICAgIHJldHVybiB7IGluZGV4LCBpdGVtIH1cbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIG1vZHVsZUxvYWRlcixcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIGdldEFwcFN0b3JlLFxuICBBbmltYXRpb25Db250ZXh0LFxuICBQYXJlbnRBbmltYXRpb25Nb2RlLFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICBHcmlkSXRlbVR5cGUsXG4gIGhvb2tzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFRhYnMsIFRhYiwgZGVmYXVsdE1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEdyaWRMYXlvdXRJdGVtIH0gZnJvbSAnLi9sYXlvdXQtaXRlbSdcbmltcG9ydCB7IFNwbGl0dGVyIH0gZnJvbSAnLi4vY29tbW9uL3NwbGl0dGVyJ1xuaW1wb3J0IHsgaW5kZXhPZlBsYWluQ29udGVudCwgaXNMYXN0Q2hpbGRPZlJvb3RJdGVtLCBnZXRHcmlkSXRlbSwgZ2V0TGFiZWxPZkdyaWRUYWIgfSBmcm9tICcuLi9jb21tb24vdXRpbHMnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGxheW91dDogSU1MYXlvdXRKc29uXG4gIGxheW91dEl0ZW1JZDogc3RyaW5nXG4gIGlzTGFzdD86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIENvbnRhaW5lclByb3BzIHtcbiAgbGF5b3V0OiBJTUxheW91dEpzb25cbiAgbGF5b3V0SXRlbUlkOiBzdHJpbmdcbiAgaXRlbXM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdyaWRJdGVtQ29tcG9uZW50IChwcm9wczogUHJvcHMgJiBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4pIHtcbiAgY29uc3QgeyBsYXlvdXQsIGxheW91dEl0ZW1JZCwgaXNMYXN0LCBjbGFzc05hbWUgfSA9IHByb3BzXG4gIGNvbnN0IGxheW91dEl0ZW0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0R3JpZEl0ZW0obGF5b3V0LCBsYXlvdXRJdGVtSWQpXG4gIH0sIFtsYXlvdXQsIGxheW91dEl0ZW1JZF0pXG4gIGNvbnN0IHBhcmVudFR5cGUgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobGF5b3V0SXRlbS5wYXJlbnQpIHtcbiAgICAgIGNvbnN0IHBhcmVudEl0ZW0gPSBnZXRHcmlkSXRlbShsYXlvdXQsIGxheW91dEl0ZW0ucGFyZW50KVxuICAgICAgcmV0dXJuIHBhcmVudEl0ZW0uZ3JpZFR5cGVcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSwgW2xheW91dCwgbGF5b3V0SXRlbV0pXG4gIGNvbnN0IHNpemUgPSArbGF5b3V0SXRlbS5iYm94LndpZHRoXG5cbiAgY29uc3QgYW5pbWF0aW9uQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoQW5pbWF0aW9uQ29udGV4dClcbiAgY29uc3QgaW50ZXJ2YWwgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoYW5pbWF0aW9uQ29udGV4dD8uc2V0dGluZz8ub3B0aW9uPy5wYXJlbnRNb2RlID09PSBQYXJlbnRBbmltYXRpb25Nb2RlLkFsbEF0T25jZSkge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIDI1MFxuICB9LCBbYW5pbWF0aW9uQ29udGV4dF0pXG5cbiAgY29uc3QgZ2V0U3R5bGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHBhcmVudFR5cGUgPT09IEdyaWRJdGVtVHlwZS5Sb3cpIHtcbiAgICAgIHJldHVybiBjc3NgXG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgd2lkdGg6ICR7c2l6ZX0lO1xuICAgICAgYFxuICAgIH1cbiAgICBpZiAocGFyZW50VHlwZSA9PT0gR3JpZEl0ZW1UeXBlLkNvbHVtbikge1xuICAgICAgcmV0dXJuIGNzc2BcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogJHtzaXplfSU7XG4gICAgICBgXG4gICAgfVxuICAgIHJldHVybiBjc3NgXG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICBgXG4gIH0sIFtzaXplLCBwYXJlbnRUeXBlXSlcblxuICBpZiAobGF5b3V0SXRlbS5ncmlkVHlwZSA9PT0gR3JpZEl0ZW1UeXBlLlJvdykge1xuICAgIHJldHVybiAoXG4gICAgICA8Um93Q29udGFpbmVyXG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICBjc3M9e2dldFN0eWxlKCl9XG4gICAgICAgIGxheW91dD17bGF5b3V0fVxuICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgaXRlbXM9e2xheW91dEl0ZW0uY2hpbGRyZW59XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIGlmIChsYXlvdXRJdGVtLmdyaWRUeXBlID09PSBHcmlkSXRlbVR5cGUuQ29sdW1uKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDb2xDb250YWluZXJcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgIGNzcz17Z2V0U3R5bGUoKX1cbiAgICAgICAgbGF5b3V0PXtsYXlvdXR9XG4gICAgICAgIGxheW91dEl0ZW1JZD17bGF5b3V0SXRlbUlkfVxuICAgICAgICBpdGVtcz17bGF5b3V0SXRlbS5jaGlsZHJlbn1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgaWYgKGxheW91dEl0ZW0uZ3JpZFR5cGUgPT09IEdyaWRJdGVtVHlwZS5UYWIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRhYkNvbnRhaW5lclxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgY3NzPXtnZXRTdHlsZSgpfVxuICAgICAgICBsYXlvdXQ9e2xheW91dH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtSWR9XG4gICAgICAgIGl0ZW1zPXtsYXlvdXRJdGVtLmNoaWxkcmVufVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBjb25zdCBpZHggPSBpbmRleE9mUGxhaW5Db250ZW50KGxheW91dCwgbGF5b3V0SXRlbUlkKVxuICBjb25zdCBpc0xhc3RDaGlsZCA9IGlzTGFzdENoaWxkT2ZSb290SXRlbShsYXlvdXQsIGxheW91dEl0ZW1JZClcbiAgcmV0dXJuIChcbiAgICA8R3JpZExheW91dEl0ZW1cbiAgICAgIGNzcz17Z2V0U3R5bGUoKX1cbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhgZC1mbGV4ICR7Y2xhc3NOYW1lfWAsIHsgJ2lzLWxhc3QnOiBpc0xhc3QgfSl9XG4gICAgICBsYXlvdXRJZD17bGF5b3V0LmlkfVxuICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtSWR9XG4gICAgICBkZWxheT17aWR4ICogaW50ZXJ2YWx9XG4gICAgICBpc0xhc3RDaGlsZD17aXNMYXN0Q2hpbGR9XG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBSb3dDb250YWluZXIgKHByb3BzOiBDb250YWluZXJQcm9wcyAmIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pikge1xuICBjb25zdCB7IGxheW91dCwgbGF5b3V0SXRlbUlkLCBpdGVtcywgY2xhc3NOYW1lIH0gPSBwcm9wc1xuICBjb25zdCBnZXRBcHBDb25maWdBY3Rpb25GblJlZiA9IFJlYWN0LnVzZVJlZjwoKSA9PiBhbnk+KClcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBtb2R1bGVMb2FkZXIubG9hZE1vZHVsZSgnamltdS1mb3ItYnVpbGRlcicpLnRoZW4oKG0pID0+IHtcbiAgICAgIGdldEFwcENvbmZpZ0FjdGlvbkZuUmVmLmN1cnJlbnQgPSBtLmdldEFwcENvbmZpZ0FjdGlvblxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlUmVzaXplRW5kID0gaG9va3MudXNlRXZlbnRDYWxsYmFjaygoaWQsIGR4KSA9PiB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uRm5SZWYuY3VycmVudCgpXG4gICAgY29uc3QgaW5kZXggPSBpdGVtcy5pbmRleE9mKGlkKVxuICAgIGNvbnN0IG5leHRJZCA9IGl0ZW1zW2luZGV4ICsgMV1cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgY29uc3QgbmV4dExheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtuZXh0SWRdXG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiBsYXlvdXQuaWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogaWRcbiAgICAgIH0sXG4gICAgICAnYmJveCcsXG4gICAgICB7IHdpZHRoOiArbGF5b3V0SXRlbS5iYm94LndpZHRoICsgZHggfVxuICAgICkuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IGxheW91dC5pZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiBuZXh0SWRcbiAgICAgIH0sXG4gICAgICAnYmJveCcsXG4gICAgICB7IHdpZHRoOiArbmV4dExheW91dEl0ZW0uYmJveC53aWR0aCAtIGR4IH1cbiAgICApLmV4ZWMoKVxuICB9KVxuXG4gIGNvbnN0IGNyZWF0ZUl0ZW0gPSAoaXRlbUlkOiBzdHJpbmcsIGlzTGFzdDogYm9vbGVhbikgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtpdGVtSWR9PlxuICAgICAgICA8R3JpZEl0ZW1Db21wb25lbnQga2V5PXtpdGVtSWR9IGxheW91dD17bGF5b3V0fSBsYXlvdXRJdGVtSWQ9e2l0ZW1JZH0gLz5cbiAgICAgICAgeyFpc0xhc3QgJiYgKFxuICAgICAgICAgIDxTcGxpdHRlciByZWZlcmVuY2VJdGVtSWQ9e2l0ZW1JZH0gbGF5b3V0SWQ9e2xheW91dC5pZH0gZGlyZWN0aW9uPSdyb3cnIG9uUmVzaXplRW5kPXtoYW5kbGVSZXNpemVFbmR9IC8+XG4gICAgICAgICl9XG4gICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgIClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtgZC1mbGV4ICR7Y2xhc3NOYW1lfWB9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICAgLmlzLWxhc3Qge1xuICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICBmbGV4LXNocmluazogMTtcbiAgICAgICAgICBmbGV4LWJhc2lzOiAwO1xuICAgICAgICB9XG4gICAgICBgfVxuICAgICAgZGF0YS1sYXlvdXRpZD17bGF5b3V0LmlkfVxuICAgICAgZGF0YS1sYXlvdXRpdGVtaWQ9e2xheW91dEl0ZW1JZH1cbiAgICA+XG4gICAgICB7aXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gY3JlYXRlSXRlbShpdGVtLCBpbmRleCA9PT0gaXRlbXMubGVuZ3RoIC0gMSkpfVxuICAgIDwvZGl2PlxuICApXG59XG5cbmZ1bmN0aW9uIENvbENvbnRhaW5lciAocHJvcHM6IENvbnRhaW5lclByb3BzICYgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+KSB7XG4gIGNvbnN0IHsgbGF5b3V0LCBsYXlvdXRJdGVtSWQsIGl0ZW1zLCBjbGFzc05hbWUgfSA9IHByb3BzXG4gIGNvbnN0IGdldEFwcENvbmZpZ0FjdGlvbkZuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IGFueT4oKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIG1vZHVsZUxvYWRlci5sb2FkTW9kdWxlKCdqaW11LWZvci1idWlsZGVyJykudGhlbigobSkgPT4ge1xuICAgICAgZ2V0QXBwQ29uZmlnQWN0aW9uRm5SZWYuY3VycmVudCA9IG0uZ2V0QXBwQ29uZmlnQWN0aW9uXG4gICAgfSlcbiAgfSlcblxuICBjb25zdCBoYW5kbGVSZXNpemVFbmQgPSBob29rcy51c2VFdmVudENhbGxiYWNrKChpZCwgZHgsIGR5KSA9PiB7XG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gZ2V0QXBwQ29uZmlnQWN0aW9uRm5SZWYuY3VycmVudCgpXG4gICAgY29uc3QgaW5kZXggPSBpdGVtcy5pbmRleE9mKGlkKVxuICAgIGNvbnN0IG5leHRJZCA9IGl0ZW1zW2luZGV4ICsgMV1cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaWRdXG4gICAgY29uc3QgbmV4dExheW91dEl0ZW0gPSBsYXlvdXQuY29udGVudFtuZXh0SWRdXG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRMYXlvdXRJdGVtUHJvcGVydHkoXG4gICAgICB7XG4gICAgICAgIGxheW91dElkOiBsYXlvdXQuaWQsXG4gICAgICAgIGxheW91dEl0ZW1JZDogaWRcbiAgICAgIH0sXG4gICAgICAnYmJveCcsXG4gICAgICB7IHdpZHRoOiArbGF5b3V0SXRlbS5iYm94LndpZHRoICsgZHkgfVxuICAgICkuZWRpdExheW91dEl0ZW1Qcm9wZXJ0eShcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0SWQ6IGxheW91dC5pZCxcbiAgICAgICAgbGF5b3V0SXRlbUlkOiBuZXh0SWRcbiAgICAgIH0sXG4gICAgICAnYmJveCcsXG4gICAgICB7IHdpZHRoOiArbmV4dExheW91dEl0ZW0uYmJveC53aWR0aCAtIGR5IH1cbiAgICApLmV4ZWMoKVxuICB9KVxuXG4gIGNvbnN0IGNyZWF0ZUl0ZW0gPSAoaXRlbUlkOiBzdHJpbmcsIGlzTGFzdDogYm9vbGVhbikgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtpdGVtSWR9PlxuICAgICAgICA8R3JpZEl0ZW1Db21wb25lbnQga2V5PXtpdGVtSWR9IGxheW91dD17bGF5b3V0fSBsYXlvdXRJdGVtSWQ9e2l0ZW1JZH0gLz5cbiAgICAgICAgeyFpc0xhc3QgJiYgKFxuICAgICAgICAgIDxTcGxpdHRlciByZWZlcmVuY2VJdGVtSWQ9e2l0ZW1JZH0gbGF5b3V0SWQ9e2xheW91dC5pZH0gZGlyZWN0aW9uPSdjb2wnIG9uUmVzaXplRW5kPXtoYW5kbGVSZXNpemVFbmR9IC8+XG4gICAgICAgICl9XG4gICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgIClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtgZC1mbGV4IGZsZXgtY29sdW1uICR7Y2xhc3NOYW1lfWB9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICAgLmlzLWxhc3Qge1xuICAgICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgZmxleC1zaHJpbms6IDE7XG4gICAgICAgICAgZmxleC1iYXNpczogMDtcbiAgICAgICAgfVxuICAgICAgYH1cbiAgICAgIGRhdGEtbGF5b3V0aWQ9e2xheW91dC5pZH1cbiAgICAgIGRhdGEtbGF5b3V0aXRlbWlkPXtsYXlvdXRJdGVtSWR9XG4gICAgPlxuICAgICAge2l0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IGNyZWF0ZUl0ZW0oaXRlbSwgaW5kZXggPT09IGl0ZW1zLmxlbmd0aCAtIDEpKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5mdW5jdGlvbiBUYWJDb250YWluZXIgKHByb3BzOiBDb250YWluZXJQcm9wcyAmIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pikge1xuICBjb25zdCB7IGxheW91dCwgbGF5b3V0SXRlbUlkLCBpdGVtcywgY2xhc3NOYW1lIH0gPSBwcm9wc1xuXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlcylcblxuICBjb25zdCBnZXRMYWJlbCA9IChpdGVtSWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbiAgICByZXR1cm4gZ2V0TGFiZWxPZkdyaWRUYWIoYXBwQ29uZmlnLCB7IGxheW91dElkOiBsYXlvdXQuaWQsIGxheW91dEl0ZW1JZDogaXRlbUlkIH0sIHRyYW5zbGF0ZSlcbiAgfVxuXG4gIGNvbnN0IGNyZWF0ZUl0ZW0gPSAoaXRlbUlkOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRhYiBrZXk9e2luZGV4fSBpZD17YCR7aW5kZXh9YH0gdGl0bGU9e2dldExhYmVsKGl0ZW1JZCl9PlxuICAgICAgICA8R3JpZEl0ZW1Db21wb25lbnQgbGF5b3V0PXtsYXlvdXR9IGxheW91dEl0ZW1JZD17aXRlbUlkfSAvPlxuICAgICAgPC9UYWI+XG4gICAgKVxuICB9XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0gZGF0YS1sYXlvdXRpZD17bGF5b3V0LmlkfSBkYXRhLWxheW91dGl0ZW1pZD17bGF5b3V0SXRlbUlkfT5cbiAgICAgIDxUYWJzXG4gICAgICAgIHR5cGU9J3RhYnMnXG4gICAgICAgIGZpbGxcbiAgICAgICAgc2Nyb2xsYWJsZVxuICAgICAgICBjbGFzc05hbWU9J3ctMTAwIGgtMTAwJ1xuICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAmID4gLnRhYi1jb250ZW50IHtcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgfVxuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICB7Wy4uLml0ZW1zXS5tYXAoKGl0ZW0sIGluZGV4KSA9PiBjcmVhdGVJdGVtKGl0ZW0sIGluZGV4KSl9XG4gICAgICA8L1RhYnM+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIGpzeCwgY3NzLCB0eXBlIElNU3RhdGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtUHJvcHMgfSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCBMYXlvdXRJdGVtIGZyb20gJy4uLy4uL3J1bnRpbWUvbGF5b3V0LWl0ZW0nXG5pbXBvcnQgeyBNYXhncmlkT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2FwcGxpY2F0aW9uL21heGdyaWQnXG5pbXBvcnQgeyBDbG9zZU91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvY2xvc2UnXG5pbXBvcnQgKiBhcyBjb21tb25VdGlscyBmcm9tICcuLi9jb21tb24vdXRpbHMnXG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICAmID4gLm1heC1ncmlkLWl0ZW0tYnRuIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LTUwMCk7XG4gICAgd2lkdGg6IDI2cHg7XG4gICAgaGVpZ2h0OiAyNnB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gIH1cblxuICAmOmhvdmVyID4gLm1heC1ncmlkLWl0ZW0tYnRuIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIH1cbmBcblxuY29uc3QgbWF4aW1pemVkU3R5bGUgPSBjc3NgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgdG9wOiAwO1xuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgei1pbmRleDogMjA7XG4gIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbmBcblxuZXhwb3J0IGZ1bmN0aW9uIEdyaWRMYXlvdXRJdGVtIChwcm9wczogTGF5b3V0SXRlbVByb3BzICYgeyBkZWxheTogbnVtYmVyLCBpc0xhc3RDaGlsZDogYm9vbGVhbiB9KSB7XG4gIGNvbnN0IFttYXhpbWl6ZWQsIHNldE1heGltaXplZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgZXhwYW5kYWJsZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIGNvbW1vblV0aWxzLmlzRXhwYW5kYWJsZShzdGF0ZSwgcHJvcHMubGF5b3V0SWQsIHByb3BzLmxheW91dEl0ZW1JZClcbiAgfSlcblxuICBjb25zdCB0b2dnbGVNYXhpbWl6ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRNYXhpbWl6ZWQoIW1heGltaXplZClcbiAgfSwgW21heGltaXplZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0SXRlbVxuICAgICAgey4uLnByb3BzfVxuICAgICAgY3NzPXtjc3NgJHtzdHlsZX07JHttYXhpbWl6ZWQgPyBtYXhpbWl6ZWRTdHlsZSA6ICcnfWB9XG4gICAgPlxuICAgICAge2V4cGFuZGFibGUgJiYgKFxuICAgICAgICA8QnV0dG9uIGljb24gdHlwZT0ndGVydGlhcnknIGNsYXNzTmFtZT0nbWF4LWdyaWQtaXRlbS1idG4gcC0wJyBvbkNsaWNrPXt0b2dnbGVNYXhpbWl6ZX0+XG4gICAgICAgICAge21heGltaXplZCAmJiA8Q2xvc2VPdXRsaW5lZC8+fVxuICAgICAgICAgIHshbWF4aW1pemVkICYmIDxNYXhncmlkT3V0bGluZWQgLz59XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKX1cbiAgICA8L0xheW91dEl0ZW0+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGNsYXNzTmFtZXMsXG4gIGpzeCxcbiAgY3NzLFxuICBPbmVCeU9uZUFuaW1hdGlvbixcbiAgRXh0ZW5zaW9uTWFuYWdlcixcbiAgZXh0ZW5zaW9uU3BlYyxcbiAgdHlwZSBMYXlvdXRUcmFuc2Zvcm1GdW5jLFxuICBMYXlvdXRUeXBlLFxuICBJbnRlcnNlY3Rpb25Db250ZXh0XG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgR3JpZExheW91dFNldHRpbmcsIHR5cGUgTGF5b3V0UHJvcHMsIHR5cGUgU3RhdGVUb0xheW91dFByb3BzIH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5pbXBvcnQgeyBtYXBTdGF0ZVRvTGF5b3V0UHJvcHMgfSBmcm9tICcuLi8uLi91dGlscydcbmltcG9ydCB7IEdyaWRJdGVtQ29tcG9uZW50IH0gZnJvbSAnLi9ncmlkLWl0ZW0nXG5pbXBvcnQgeyBjYWxQYWRkaW5nU3R5bGUgfSBmcm9tICcuLi9jb21tb24vdXRpbHMnXG5cbmNsYXNzIEdyaWRMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzICYgU3RhdGVUb0xheW91dFByb3BzPiB7XG4gIGxheW91dFRyYW5zZm9ybTogTGF5b3V0VHJhbnNmb3JtRnVuY1xuXG4gIGZpbmRFeHRlbnNpb24gKCk6IHZvaWQge1xuICAgIGNvbnN0IGV4dHMgPSBFeHRlbnNpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RXh0ZW5zaW9ucyhcbiAgICAgIGAke2V4dGVuc2lvblNwZWMuRXh0ZW5zaW9uUG9pbnRzLkxheW91dFRyYW5zZm9ybWVyfWBcbiAgICApXG4gICAgaWYgKGV4dHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGV4dCA9IGV4dHMuZmluZChpdGVtID0+IChpdGVtIGFzIGV4dGVuc2lvblNwZWMuTGF5b3V0VHJhbnNmb3JtZXJFeHRlbnNpb24pLmxheW91dFR5cGUgPT09IExheW91dFR5cGUuR3JpZExheW91dClcbiAgICAgIHRoaXMubGF5b3V0VHJhbnNmb3JtID0gKGV4dCBhcyBhbnkpPy50cmFuc2Zvcm1MYXlvdXRcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgbGF5b3V0cywgbGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIG1haW5TaXplTW9kZSwgY2xhc3NOYW1lIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3Qgdmlld09ubHkgPSBsYXlvdXRzW2Jyb3dzZXJTaXplTW9kZV0gIT09IGxheW91dC5pZFxuICAgIGxldCBmaW5hbExheW91dCA9IGxheW91dFxuXG4gICAgaWYgKHZpZXdPbmx5KSB7XG4gICAgICBpZiAodGhpcy5sYXlvdXRUcmFuc2Zvcm0gPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmZpbmRFeHRlbnNpb24oKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGF5b3V0VHJhbnNmb3JtICE9IG51bGwpIHtcbiAgICAgICAgZmluYWxMYXlvdXQgPSB0aGlzLmxheW91dFRyYW5zZm9ybShsYXlvdXQsIG1haW5TaXplTW9kZSwgYnJvd3NlclNpemVNb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHsgcm9vdEl0ZW06IHJvb3RJdGVtSWQgfSA9IGZpbmFsTGF5b3V0LnNldHRpbmcgPz8ge30gYXMgR3JpZExheW91dFNldHRpbmdcbiAgICBjb25zdCByb290SXRlbSA9IGZpbmFsTGF5b3V0LmNvbnRlbnQ/Lltyb290SXRlbUlkXVxuXG4gICAgY29uc3Qgb3V0Q2xhc3MgPSBjbGFzc05hbWVzKCdsYXlvdXQgZ3JpZC1sYXlvdXQgZC1mbGV4IHctMTAwIGgtMTAwJywgY2xhc3NOYW1lKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtvdXRDbGFzc31cbiAgICAgICAgY3NzPXtjc3Ngb3ZlcmZsb3c6IGhpZGRlbjske2NhbFBhZGRpbmdTdHlsZShmaW5hbExheW91dC5zZXR0aW5nKX07YH1cbiAgICAgICAgZGF0YS1sYXlvdXRpZD17ZmluYWxMYXlvdXQuaWR9XG4gICAgICA+XG4gICAgICAgIDxJbnRlcnNlY3Rpb25Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IG1vbml0b3I6IGZhbHNlIH19PlxuICAgICAgICAgIDxPbmVCeU9uZUFuaW1hdGlvblxuICAgICAgICAgICAgb2lkPXtmaW5hbExheW91dC5pZH1cbiAgICAgICAgICAgIGRhdGEtbGF5b3V0aWQ9e2ZpbmFsTGF5b3V0LmlkfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSd0cmFpbC1jb250YWluZXIgZC1mbGV4IHctMTAwIGgtMTAwJ1xuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cm9vdEl0ZW1cbiAgICAgICAgICAgICAgPyA8R3JpZEl0ZW1Db21wb25lbnRcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctMTAwIGgtMTAwJ1xuICAgICAgICAgICAgICAgIGxheW91dD17ZmluYWxMYXlvdXR9XG4gICAgICAgICAgICAgICAgbGF5b3V0SXRlbUlkPXtyb290SXRlbUlkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA6IHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L09uZUJ5T25lQW5pbWF0aW9uPlxuICAgICAgICA8L0ludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhY3RSZWR1eC5jb25uZWN0PFN0YXRlVG9MYXlvdXRQcm9wcywgdW5rbm93biwgTGF5b3V0UHJvcHM+KG1hcFN0YXRlVG9MYXlvdXRQcm9wcykoR3JpZExheW91dClcbiIsImltcG9ydCB7IHR5cGUgUmVhY3QsIHR5cGUgTGF5b3V0VHlwZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgTGF5b3V0UHJvcHMgfSBmcm9tICcuL3R5cGVzJ1xuXG5jb25zdCBsYXlvdXRCdWlsZGVyczogeyBba2V5OiBzdHJpbmddOiBSZWFjdC5Db21wb25lbnRDbGFzczxMYXlvdXRQcm9wcz4gfSA9IHt9XG5jb25zdCBsYXlvdXRWaWV3ZXJzOiB7IFtrZXk6IHN0cmluZ106IFJlYWN0LkNvbXBvbmVudENsYXNzPExheW91dFByb3BzPiB9ID0ge31cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyTGF5b3V0QnVpbGRlciAodHlwZTogTGF5b3V0VHlwZSwgY29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRDbGFzczxMYXlvdXRQcm9wcz4pIHtcbiAgbGF5b3V0QnVpbGRlcnNbdHlwZV0gPSBjb21wb25lbnRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyTGF5b3V0Vmlld2VyICh0eXBlOiBMYXlvdXRUeXBlLCBjb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudENsYXNzPExheW91dFByb3BzPikge1xuICBsYXlvdXRWaWV3ZXJzW3R5cGVdID0gY29tcG9uZW50XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGF5b3V0QnVpbGRlciAodHlwZTogTGF5b3V0VHlwZSk6IFJlYWN0LkNvbXBvbmVudENsYXNzPExheW91dFByb3BzPiB7XG4gIHJldHVybiBsYXlvdXRCdWlsZGVyc1t0eXBlXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZExheW91dFZpZXdlciAodHlwZTogTGF5b3V0VHlwZSk6IFJlYWN0LkNvbXBvbmVudENsYXNzPExheW91dFByb3BzPiB7XG4gIHJldHVybiBsYXlvdXRWaWV3ZXJzW3R5cGVdXG59XG4iLCJpbXBvcnQgeyBjc3MsIHR5cGUgU2VyaWFsaXplZFN0eWxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uLy4uL3V0aWxzJ1xuaW1wb3J0IHsgdHlwZSBSb3dMYXlvdXRJdGVtU2V0dGluZyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXRlbVN0eWxlIChcbiAgaXNNdWx0aVJvdzogYm9vbGVhbixcbiAgc2lnbjogbnVtYmVyLFxuICBndXR0ZXI6IG51bWJlcixcbiAgbWVyZ2VkU3R5bGUsXG4gIGl0ZW1TZXR0aW5nOiBSb3dMYXlvdXRJdGVtU2V0dGluZ1xuKTogW1NlcmlhbGl6ZWRTdHlsZXMsIHN0cmluZ10ge1xuICBpZiAoaXNNdWx0aVJvdykge1xuICAgIHJldHVybiBbXG4gICAgICBjc3NgXG4gICAgICAgIHBhZGRpbmc6ICR7Z3V0dGVyIC8gMn1weCAwO1xuICAgICAgICBoZWlnaHQ6ICR7dXRpbHMuZ2V0VmFsdWVPZkJCb3gobWVyZ2VkU3R5bGUsICdoZWlnaHQnKX07XG4gICAgICAgIGFsaWduLXNlbGY6ICR7bWVyZ2VkU3R5bGUuYWxpZ25TZWxmfTtcbiAgICAgIGAsXG4gICAgICBpdGVtU2V0dGluZy5vZmZzZXRYICE9PSAwIHx8IGl0ZW1TZXR0aW5nLm9mZnNldFkgIT09IDBcbiAgICAgICAgPyBgdHJhbnNsYXRlKCR7KGl0ZW1TZXR0aW5nLm9mZnNldFggPz8gMCkgKiBzaWdufXB4LCAke2l0ZW1TZXR0aW5nLm9mZnNldFkgPz8gMH1weClgXG4gICAgICAgIDogbnVsbFxuICAgIF1cbiAgfVxuICByZXR1cm4gW1xuICAgIGNzc2BcbiAgICAgIHBhZGRpbmc6IDAgJHtndXR0ZXIgLyAyfXB4O1xuICAgICAgaGVpZ2h0OiAke3V0aWxzLmdldFZhbHVlT2ZCQm94KG1lcmdlZFN0eWxlLCAnaGVpZ2h0Jyl9O1xuICAgICAgYWxpZ24tc2VsZjogJHttZXJnZWRTdHlsZS5hbGlnblNlbGZ9O1xuICAgIGAsXG4gICAgaXRlbVNldHRpbmcub2Zmc2V0WCAhPT0gMCB8fCBpdGVtU2V0dGluZy5vZmZzZXRZICE9PSAwXG4gICAgICA/IGB0cmFuc2xhdGUoJHsoaXRlbVNldHRpbmcub2Zmc2V0WCA/PyAwKSAqIHNpZ259cHgsICR7aXRlbVNldHRpbmcub2Zmc2V0WSA/PyAwfXB4KWBcbiAgICAgIDogbnVsbFxuICBdXG59XG4iLCJpbXBvcnQgeyB0eXBlIFJvd0xheW91dFNldHRpbmcsIHR5cGUgUm93TGF5b3V0SXRlbVNldHRpbmcgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IERpc3RhbmNlVW5pdHMgfSBmcm9tICdqaW11LXVpJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9ST1dfTEFZT1VUX1NFVFRJTkc6IFJvd0xheW91dFNldHRpbmcgPSB7XG4gIHNwYWNlOiAxMCxcbiAgc3R5bGU6IHtcbiAgICBwYWRkaW5nOiB7XG4gICAgICBudW1iZXI6IFsxMCwgMTAsIDEwLCAxMF0sXG4gICAgICB1bml0OiBEaXN0YW5jZVVuaXRzLlBJWEVMXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1JPV19JVEVNX1NFVFRJTkc6IFJvd0xheW91dEl0ZW1TZXR0aW5nID0ge1xuICBoZWlnaHRNb2RlOiAnZml4ZWQnLFxuICBhc3BlY3RSYXRpbzogMSxcbiAgb2Zmc2V0WDogMCxcbiAgb2Zmc2V0WTogMCxcbiAgc3R5bGU6IHtcbiAgICBhbGlnblNlbGY6ICdmbGV4LXN0YXJ0J1xuICB9XG59XG4iLCJpbXBvcnQge1xuICB0eXBlIElNQXBwQ29uZmlnLFxuICB0eXBlIGV4dGVuc2lvblNwZWMsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBJbW11dGFibGUsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICBMYXlvdXRUeXBlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCAqIGFzIHNlYXJjaFV0aWxzIGZyb20gJy4uL3NlYXJjaCdcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgVE9UQUxfQ09MUyB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaWRnZXRIZWlnaHQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIHdpZGdldHNTdGF0ZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgd2lkZ2V0SWQ6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgaWYgKHdpZGdldEpzb24gIT0gbnVsbCkge1xuICAgIGNvbnN0IGJyb3dzZXJTaXplTW9kZSA9IHV0aWxzLmdldEN1cnJlbnRTaXplTW9kZSgpXG4gICAgY29uc3QgbWFpblNpemVNb2RlID0gYXBwQ29uZmlnLm1haW5TaXplTW9kZVxuICAgIGNvbnN0IGxheW91dElkID0gd2lkZ2V0SnNvbi5sYXlvdXRzLkRFRkFVTFRbYnJvd3NlclNpemVNb2RlXVxuICAgIGNvbnN0IG1haW5MYXlvdXRJZCA9IHdpZGdldEpzb24ubGF5b3V0cy5ERUZBVUxUW21haW5TaXplTW9kZV1cbiAgICBjb25zdCBsYXlvdXQgPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0gPz8gYXBwQ29uZmlnLmxheW91dHNbbWFpbkxheW91dElkXVxuICAgIGNvbnN0IHBhZGRpbmcgPSBsYXlvdXQuc2V0dGluZz8uc3R5bGU/LnBhZGRpbmc/Lm51bWJlciA/PyBbMF1cbiAgICBjb25zdCBwYWRkaW5nVmFsdWVzID0gdXRpbHMuZXhwYW5kU3R5bGVBcnJheShwYWRkaW5nKVxuICAgIGNvbnN0IHdpZGdldEhlaWdodCA9IHdpZGdldHNTdGF0ZT8uW3dpZGdldElkXT8uaGVpZ2h0ID8/IDBcblxuICAgIGxldCBwdCA9IHBhZGRpbmdWYWx1ZXNbMF1cbiAgICBsZXQgcGIgPSBwYWRkaW5nVmFsdWVzWzJdXG4gICAgaWYgKHV0aWxzLmlzUGVyY2VudGFnZShwdCkpIHtcbiAgICAgIHB0ID0gdXRpbHMuZnJvbVJhdGlvKHB0LCB3aWRnZXRIZWlnaHQpXG4gICAgfVxuICAgIGlmICh1dGlscy5pc1BlcmNlbnRhZ2UocGIpKSB7XG4gICAgICBwYiA9IHV0aWxzLmZyb21SYXRpbyhwYiwgd2lkZ2V0SGVpZ2h0KVxuICAgIH1cblxuICAgIHJldHVybiB3aWRnZXRIZWlnaHQgLSBwdCAtIHBiXG4gIH1cbiAgcmV0dXJuIDBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodE9mTGF5b3V0SXRlbXMgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICB3aWRnZXRzU3RhdGU6IHsgW2tleTogc3RyaW5nXTogYW55IH0sXG4gIGxheW91dElkOiBzdHJpbmdcbik6IHsgW2tleTogc3RyaW5nXTogeyBoZWlnaHQ/OiBudW1iZXIsIHNldHRpbmc6IGFueSB9IH0ge1xuICBjb25zdCB3aWRnZXRJZCA9IHNlYXJjaFV0aWxzLmdldFdpZGdldElkVGhhdFVzZVRoZUxheW91dElkKGFwcENvbmZpZywgbGF5b3V0SWQpXG4gIGNvbnN0IHdpZGdldEhlaWdodCA9IGdldFdpZGdldEhlaWdodChhcHBDb25maWcsIHdpZGdldHNTdGF0ZSwgd2lkZ2V0SWQpXG4gIGlmICh3aWRnZXRIZWlnaHQgPiAwKSB7XG4gICAgY29uc3Qgcm93TGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgY29uc3QgaXRlbUlkcyA9IHJvd0xheW91dC5vcmRlciA/PyBbXVxuICAgIGNvbnN0IHJlc3VsdCA9IHt9XG5cbiAgICBpdGVtSWRzLmZvckVhY2goaXRlbUlkID0+IHtcbiAgICAgIGNvbnN0IGxheW91dEl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0uY29udGVudFtpdGVtSWRdXG4gICAgICByZXN1bHRbaXRlbUlkXSA9IHV0aWxzLmNhbEhlaWdodE9mTGF5b3V0SXRlbSh3aWRnZXRIZWlnaHQsIGxheW91dEl0ZW0pXG4gICAgfSlcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuZXhwb3J0IGNsYXNzIFJvd0xheW91dFRyYW5zZm9ybWVyIGltcGxlbWVudHMgZXh0ZW5zaW9uU3BlYy5MYXlvdXRUcmFuc2Zvcm1lckV4dGVuc2lvbiB7XG4gIGlkID0gJ3Jvdy1sYXlvdXQtdHJhbnNmb3JtZXInXG5cbiAgbGF5b3V0VHlwZSA9IExheW91dFR5cGUuUm93TGF5b3V0XG5cbiAgdHJhbnNmb3JtTGF5b3V0IChsYXlvdXQ6IElNTGF5b3V0SnNvbiwgZnJvbVNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyk6IElNTGF5b3V0SnNvbiB7XG4gICAgaWYgKGZyb21TaXplTW9kZSA9PT0gdG9TaXplTW9kZSkge1xuICAgICAgcmV0dXJuIGxheW91dFxuICAgIH1cblxuICAgIGxldCB1cGRhdGVkTGF5b3V0OiBJTUxheW91dEpzb24gPSBJbW11dGFibGUobGF5b3V0KVxuXG4gICAgaWYgKHRvU2l6ZU1vZGUgPT09IEJyb3dzZXJTaXplTW9kZS5TbWFsbCkge1xuICAgICAgY29uc3QgaXRlbUhlaWdodHMgPSBnZXRIZWlnaHRPZkxheW91dEl0ZW1zKGFwcENvbmZpZywgd2luZG93LnJ1bnRpbWVJbmZvPy53aWRnZXRzLCBsYXlvdXQuaWQpXG4gICAgICBsZXQgaW5kZXggPSAwXG4gICAgICBjb25zdCBvcmRlciA9IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50ID8/IHt9KS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChsYXlvdXQuY29udGVudFthXS5iYm94LmxlZnQsIDEwKSAtIHBhcnNlSW50KGxheW91dC5jb250ZW50W2JdLmJib3gubGVmdCwgMTApXG4gICAgICB9KVxuICAgICAgb3JkZXIuZm9yRWFjaChpdGVtSWQgPT4ge1xuICAgICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0LmNvbnRlbnRbaXRlbUlkXVxuICAgICAgICBpZiAoIWxheW91dEl0ZW0uaXNQZW5kaW5nKSB7XG4gICAgICAgICAgdXBkYXRlZExheW91dCA9IHVwZGF0ZWRMYXlvdXQuc2V0SW4oWydjb250ZW50JywgaXRlbUlkLCAnYmJveCddLCB7XG4gICAgICAgICAgICBsZWZ0OiBpbmRleCAqIFRPVEFMX0NPTFMsXG4gICAgICAgICAgICB3aWR0aDogVE9UQUxfQ09MUyxcbiAgICAgICAgICAgIGhlaWdodDogbGF5b3V0SXRlbS5iYm94Py5oZWlnaHQgPz8gJ2F1dG8nXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAoaXRlbUhlaWdodHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyA/PyBJbW11dGFibGUoe30pXG4gICAgICAgICAgICB1cGRhdGVkTGF5b3V0ID0gdXBkYXRlZExheW91dFxuICAgICAgICAgICAgICAuc2V0SW4oWydjb250ZW50JywgaXRlbUlkLCAnYmJveCcsICdoZWlnaHQnXSwgaXRlbUhlaWdodHNbaXRlbUlkXS5oZWlnaHQpXG4gICAgICAgICAgICAgIC5zZXRJbihbJ2NvbnRlbnQnLCBpdGVtSWQsICdzZXR0aW5nJ10sIHNldHRpbmcubWVyZ2UoaXRlbUhlaWdodHNbaXRlbUlkXS5zZXR0aW5nKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXggKz0gMVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiB1cGRhdGVkTGF5b3V0XG4gIH1cblxuICB0cmFuc2Zvcm1MYXlvdXRJdGVtIChcbiAgICBpdGVtOiBJTUxheW91dEl0ZW1Kc29uLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgZnJvbUxheW91dElkOiBzdHJpbmcsXG4gICAgdG9MYXlvdXRJZDogc3RyaW5nLFxuICAgIGZyb21TaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICAgIHRvU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuICApOiB7IGl0ZW06IElNTGF5b3V0SXRlbUpzb24sIGluZGV4OiBudW1iZXIgfSB7XG4gICAgcmV0dXJuIHsgaXRlbSwgaW5kZXggfVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNsYXNzTmFtZXMsXG4gIGxvZGFzaCxcbiAgdHlwZSBTZXJpYWxpemVkU3R5bGVzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNhbEl0ZW1IZWlnaHQgfSBmcm9tICcuLi91dGlscydcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uLy4uL3V0aWxzJ1xuaW1wb3J0IHtcbiAgdHlwZSBSb3dMYXlvdXRJdGVtU2V0dGluZyxcbiAgdHlwZSBMYXlvdXRJdGVtUHJvcHMsXG4gIHR5cGUgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyxcbiAgTGF5b3V0SXRlbVNpemVNb2Rlc1xufSBmcm9tICcuLi8uLi90eXBlcydcbmltcG9ydCBMYXlvdXRJdGVtIGZyb20gJy4uLy4uL3J1bnRpbWUvbGF5b3V0LWl0ZW0nXG5pbXBvcnQgeyBERUZBVUxUX1JPV19JVEVNX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQgKiBhcyBjb21tb25VdGlscyBmcm9tICcuLi9jb21tb24vdXRpbCdcblxuaW50ZXJmYWNlIE93blByb3BzIHtcbiAgb2Zmc2V0OiBudW1iZXJcbiAgc3BhbjogbnVtYmVyXG4gIGd1dHRlcjogbnVtYmVyXG4gIGlzTXVsdGlSb3c6IGJvb2xlYW5cbiAgYWxpZ25JdGVtcz86IHN0cmluZ1xuICBjaGlsZHJlbj86IGFueVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb3dJdGVtIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxcbkxheW91dEl0ZW1Qcm9wcyAmIFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgJiBPd25Qcm9wc1xuPiB7XG4gIGdldFN0eWxlIChpdGVtU2V0dGluZzogUm93TGF5b3V0SXRlbVNldHRpbmcpOiBbU2VyaWFsaXplZFN0eWxlcywgc3RyaW5nXSB7XG4gICAgY29uc3QgeyBndXR0ZXIsIGxheW91dEl0ZW0sIGlzTXVsdGlSb3cgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBiYm94ID0gbGF5b3V0SXRlbS5iYm94XG4gICAgY29uc3Qgc2lnbiA9IHV0aWxzLmlzUlRMKCkgPyAtMSA6IDFcblxuICAgIGNvbnN0IG1lcmdlZFN0eWxlOiBhbnkgPSBjYWxJdGVtSGVpZ2h0KGl0ZW1TZXR0aW5nLCBiYm94LCBpc011bHRpUm93KVxuXG4gICAgcmV0dXJuIGNvbW1vblV0aWxzLmdldEl0ZW1TdHlsZShpc011bHRpUm93LCBzaWduLCBndXR0ZXIsIG1lcmdlZFN0eWxlLCBpdGVtU2V0dGluZylcbiAgfVxuXG4gIHJlbmRlciAoKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IHsgc3Bhbiwgb2Zmc2V0LCBsYXlvdXRJZCwgbGF5b3V0SXRlbSB9ID0gdGhpcy5wcm9wc1xuICAgIGlmIChsYXlvdXRJdGVtID09IG51bGwgfHwgbGF5b3V0SXRlbS5pc1BlbmRpbmcpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNvbnN0IGl0ZW1TZXR0aW5nOiBSb3dMYXlvdXRJdGVtU2V0dGluZyA9IGxvZGFzaC5hc3NpZ24oXG4gICAgICB7fSxcbiAgICAgIERFRkFVTFRfUk9XX0lURU1fU0VUVElORyxcbiAgICAgIGxheW91dEl0ZW0uc2V0dGluZ1xuICAgIClcbiAgICBjb25zdCBtZXJnZWRDbGFzcyA9IGNsYXNzTmFtZXMoXG4gICAgICAncm93LWxheW91dC1pdGVtJyxcbiAgICAgIGBjb2wtJHtzcGFufWAsXG4gICAgICBgb2Zmc2V0LSR7b2Zmc2V0fWBcbiAgICApXG5cbiAgICBjb25zdCBoZWlnaHRNb2RlID0gaXRlbVNldHRpbmcuYXV0b1Byb3BzPy5oZWlnaHRcbiAgICBjb25zdCByYXRpbyA9IHV0aWxzLnBhcnNlQXNwZWN0UmF0aW8oaXRlbVNldHRpbmcuYXNwZWN0UmF0aW8pXG4gICAgY29uc3Qgb25lQnlPbmVBbmltYXRpb25Qcm9wcyA9IHV0aWxzLmhhbmRsZU9uZWJ5T25lQW5pbWF0aW9uKHRoaXMucHJvcHMpXG4gICAgY29uc3QgW2Nzc1N0eWxlLCB0cmFuc2Zvcm1dID0gdGhpcy5nZXRTdHlsZShpdGVtU2V0dGluZylcbiAgICByZXR1cm4gKFxuICAgICAgPExheW91dEl0ZW1cbiAgICAgICAgY3NzPXtjc3NTdHlsZX1cbiAgICAgICAgc3R5bGU9e3sgdHJhbnNmb3JtIH19XG4gICAgICAgIGNsYXNzTmFtZT17bWVyZ2VkQ2xhc3N9XG4gICAgICAgIGxheW91dElkPXtsYXlvdXRJZH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtsYXlvdXRJdGVtLmlkfVxuICAgICAgICBmb3JjZUFzcGVjdFJhdGlvPXt1dGlscy5zaG91bGRVc2VBc3BlY3RSYXRpbyhpdGVtU2V0dGluZyl9XG4gICAgICAgIGFzcGVjdFJhdGlvPXtyYXRpb31cbiAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrfVxuICAgICAgICBhdXRvSGVpZ2h0PXtoZWlnaHRNb2RlID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG99XG4gICAgICAgIHsuLi5vbmVCeU9uZUFuaW1hdGlvblByb3BzfVxuICAgICAgLz5cbiAgICApXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGNsYXNzTmFtZXMsXG4gIGpzeCxcbiAgY3NzLFxuICBFeHRlbnNpb25NYW5hZ2VyLFxuICBleHRlbnNpb25TcGVjLFxuICB0eXBlIExheW91dFRyYW5zZm9ybUZ1bmMsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICBSZWFjdFJlc2l6ZURldGVjdG9yLFxuICBsb2Rhc2gsXG4gIExheW91dFR5cGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc3R5bGVVdGlscyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBSb3cgfSBmcm9tICcuL3JvdydcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uLy4uL3V0aWxzJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRQcm9wcywgdHlwZSBTdGF0ZVRvTGF5b3V0UHJvcHMsIHR5cGUgUm93TGF5b3V0U2V0dGluZyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgREVGQVVMVF9ST1dfTEFZT1VUX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5pbXBvcnQgeyBUT1RBTF9DT0xTIH0gZnJvbSAnLi4vdHlwZXMnXG5cbnR5cGUgRmxleGJveExheW91dFByb3BzID0gTGF5b3V0UHJvcHMgJiB7XG4gIHdpZGdldElkOiBzdHJpbmdcbn1cblxuY2xhc3MgUm93TGF5b3V0IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxcbkZsZXhib3hMYXlvdXRQcm9wcyAmIFN0YXRlVG9MYXlvdXRQcm9wc1xuPiB7XG4gIGZpbmFsTGF5b3V0OiBJTUxheW91dEpzb25cbiAgbGF5b3V0VHJhbnNmb3JtOiBMYXlvdXRUcmFuc2Zvcm1GdW5jXG4gIG51bU9mUm93czogbnVtYmVyXG4gIGhhbmRsZURlYm91bmNlUmVzaXplXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5oYW5kbGVEZWJvdW5jZVJlc2l6ZSA9IGxvZGFzaC5kZWJvdW5jZSh0aGlzLm9uUmVzaXplLCAyMDApXG4gIH1cblxuICBmaW5kRXh0ZW5zaW9uICgpOiB2b2lkIHtcbiAgICBjb25zdCBleHRzID0gRXh0ZW5zaW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldEV4dGVuc2lvbnMoXG4gICAgICBgJHtleHRlbnNpb25TcGVjLkV4dGVuc2lvblBvaW50cy5MYXlvdXRUcmFuc2Zvcm1lcn1gXG4gICAgKVxuICAgIGlmIChleHRzPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleHQgPSBleHRzLmZpbmQoXG4gICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAoaXRlbSBhcyBleHRlbnNpb25TcGVjLkxheW91dFRyYW5zZm9ybWVyRXh0ZW5zaW9uKS5sYXlvdXRUeXBlID09PVxuICAgICAgICAgIExheW91dFR5cGUuUm93TGF5b3V0XG4gICAgICApXG4gICAgICB0aGlzLmxheW91dFRyYW5zZm9ybSA9IChleHQgYXMgYW55KT8udHJhbnNmb3JtTGF5b3V0XG4gICAgfVxuICB9XG5cbiAgY29sbGVjdFJvd0l0ZW1zICgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuZmluYWxMYXlvdXQub3JkZXIgPz8gW11cblxuICAgIGNvbnN0IHJvd3MgPSBbXVxuICAgIGxldCByb3cgPSBbXVxuICAgIGxldCByb3dJbmRleCA9IDBcbiAgICByb3dzLnB1c2gocm93KVxuICAgIGNvbnRlbnQuZm9yRWFjaCgoaXRlbUlkKSA9PiB7XG4gICAgICBpZiAodGhpcy5maW5hbExheW91dC5jb250ZW50W2l0ZW1JZF0uaXNQZW5kaW5nKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgYmJveCA9IHRoaXMuZmluYWxMYXlvdXQuY29udGVudFtpdGVtSWRdLmJib3hcbiAgICAgIGNvbnN0IGxlZnQgPSBwYXJzZUludChiYm94LmxlZnQsIDEwKVxuICAgICAgY29uc3Qgcm93TnVtID0gTWF0aC5mbG9vcihsZWZ0IC8gVE9UQUxfQ09MUylcbiAgICAgIGlmIChyb3dOdW0gPiByb3dJbmRleCkge1xuICAgICAgICByb3cgPSBbXVxuICAgICAgICByb3dJbmRleCA9IHJvd051bVxuICAgICAgICByb3dzLnB1c2gocm93KVxuICAgICAgfVxuICAgICAgcm93LnB1c2goaXRlbUlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHJvd3NcbiAgfVxuXG4gIHRyYW5zZm9ybSAoKTogdm9pZCB7XG4gICAgY29uc3QgeyBsYXlvdXQsIGxheW91dHMsIGJyb3dzZXJTaXplTW9kZSwgbWFpblNpemVNb2RlIH0gPSB0aGlzLnByb3BzXG5cbiAgICBpZiAodGhpcy5sYXlvdXRUcmFuc2Zvcm0gPT0gbnVsbCkge1xuICAgICAgdGhpcy5maW5kRXh0ZW5zaW9uKClcbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0TGF5b3V0ID0gbGF5b3V0XG4gICAgaWYgKFxuICAgICAgbGF5b3V0c1ticm93c2VyU2l6ZU1vZGVdICE9PSBsYXlvdXQuaWQgJiZcbiAgICAgIHRoaXMubGF5b3V0VHJhbnNmb3JtICE9IG51bGxcbiAgICApIHtcbiAgICAgIHRhcmdldExheW91dCA9IHRoaXMubGF5b3V0VHJhbnNmb3JtKFxuICAgICAgICBsYXlvdXQsXG4gICAgICAgIG1haW5TaXplTW9kZSxcbiAgICAgICAgYnJvd3NlclNpemVNb2RlLFxuICAgICAgICB1dGlscy5nZXRBcHBDb25maWcoKVxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLmZpbmFsTGF5b3V0ID0gdGFyZ2V0TGF5b3V0XG4gICAgdGhpcy5udW1PZlJvd3MgPSB0aGlzLmNvbGxlY3RSb3dJdGVtcygpLmxlbmd0aFxuICB9XG5cbiAgY3JlYXRlUm93ICgpOiBKU1guRWxlbWVudCB7XG4gICAgY29uc3QgeyBsYXlvdXQsIGxheW91dHMgfSA9IHRoaXMucHJvcHNcbiAgICByZXR1cm4gKFxuICAgICAgPFJvd1xuICAgICAgICBsYXlvdXRzPXtsYXlvdXRzfVxuICAgICAgICBsYXlvdXQ9e2xheW91dH1cbiAgICAgICAgdHJhbnNmb3JtZWRMYXlvdXQ9e3RoaXMuZmluYWxMYXlvdXR9XG4gICAgICAgIGlzTXVsdGlSb3c9e3RoaXMuZmluYWxMYXlvdXQgIT09IGxheW91dCB8fCB0aGlzLm51bU9mUm93cyA+IDF9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIG9uUmVzaXplID0gKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMucHJvcHMuYnJvd3NlclNpemVNb2RlICE9PSB0aGlzLnByb3BzLm1haW5TaXplTW9kZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh3aWR0aCA9PT0gMCAmJiBoZWlnaHQgPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHsgd2lkZ2V0SWQgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAod2luZG93LnJ1bnRpbWVJbmZvLndpZGdldHM/Llt3aWRnZXRJZF0gIT0gbnVsbCkge1xuICAgICAgd2luZG93LnJ1bnRpbWVJbmZvLndpZGdldHNbd2lkZ2V0SWRdLmhlaWdodCA9IGhlaWdodFxuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cucnVudGltZUluZm8ud2lkZ2V0c1t3aWRnZXRJZF0gPSB7IGhlaWdodCB9XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpOiBKU1guRWxlbWVudCB7XG4gICAgY29uc3QgeyBsYXlvdXQsIGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGxheW91dFNldHRpbmc6IFJvd0xheW91dFNldHRpbmcgPSBsYXlvdXQuc2V0dGluZyA/PyBERUZBVUxUX1JPV19MQVlPVVRfU0VUVElOR1xuICAgIGNvbnN0IHN0eWxlID0gbGF5b3V0U2V0dGluZy5zdHlsZSA/PyBERUZBVUxUX1JPV19MQVlPVVRfU0VUVElORy5zdHlsZVxuXG4gICAgdGhpcy50cmFuc2Zvcm0oKVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbGF5b3V0IGQtZmxleCcsIGNsYXNzTmFtZSl9XG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6ICR7c3R5bGVVdGlscy50b0NTU1BhZGRpbmcoc3R5bGUucGFkZGluZyl9O1xuICAgICAgICBgfVxuICAgICAgICBkYXRhLWxheW91dGlkPXtsYXlvdXQuaWR9XG4gICAgICA+XG4gICAgICAgIHt0aGlzLmNyZWF0ZVJvdygpfVxuICAgICAgICA8UmVhY3RSZXNpemVEZXRlY3RvclxuICAgICAgICAgIGhhbmRsZUhlaWdodFxuICAgICAgICAgIG9uUmVzaXplPXt0aGlzLmhhbmRsZURlYm91bmNlUmVzaXplfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxcblN0YXRlVG9MYXlvdXRQcm9wcyxcbnVua25vd24sXG5GbGV4Ym94TGF5b3V0UHJvcHNcbj4odXRpbHMubWFwU3RhdGVUb0xheW91dFByb3BzKShSb3dMYXlvdXQpXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBjbGFzc05hbWVzLFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIE9uZUJ5T25lQW5pbWF0aW9uLFxuICBJbnRlcnNlY3Rpb25Db250ZXh0XG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCBSb3dJdGVtIGZyb20gJy4vbGF5b3V0LWl0ZW0nXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi8uLi91dGlscydcbmltcG9ydCB7IHR5cGUgTGF5b3V0UHJvcHMsIHR5cGUgUm93TGF5b3V0U2V0dGluZyB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHsgUGFnZUNvbnRleHQsIHR5cGUgUGFnZUNvbnRleHRQcm9wcyB9IGZyb20gJy4uLy4uL2J1aWxkZXIvcGFnZS1jb250ZXh0J1xuaW1wb3J0IHsgdHlwZSBDaGlsZFJlY3QgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IFJPV19TVFlMRSB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgREVGQVVMVF9ST1dfTEFZT1VUX1NFVFRJTkcgfSBmcm9tICcuLi9kZWZhdWx0LXNldHRpbmcnXG5cbnR5cGUgUm93TGF5b3V0UHJvcHMgPSBMYXlvdXRQcm9wcyAmIHtcbiAgbGF5b3V0OiBJTUxheW91dEpzb25cbiAgdHJhbnNmb3JtZWRMYXlvdXQ6IElNTGF5b3V0SnNvblxuICBpc011bHRpUm93OiBib29sZWFuXG59XG5cbmV4cG9ydCBjbGFzcyBSb3cgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFJvd0xheW91dFByb3BzPiB7XG4gIGNoaWxkUmVjdHM6IENoaWxkUmVjdFtdXG4gIGZsaXBMZWZ0UmlnaHQ6IGJvb2xlYW5cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLmZsaXBMZWZ0UmlnaHQgPSB1dGlscy5pc1JUTCgpXG4gIH1cblxuICBjb2xsZWN0Qm91bmRzICgpOiBDaGlsZFJlY3RbXSB7XG4gICAgY29uc3QgeyB0cmFuc2Zvcm1lZExheW91dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0cmFuc2Zvcm1lZExheW91dC5vcmRlciA/PyBbXVxuICAgIHRoaXMuY2hpbGRSZWN0cyA9IFtdXG5cbiAgICBjb250ZW50LmZvckVhY2goaXRlbUlkID0+IHtcbiAgICAgIGlmICh0cmFuc2Zvcm1lZExheW91dC5jb250ZW50W2l0ZW1JZF0uaXNQZW5kaW5nKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgYmJveCA9IHRyYW5zZm9ybWVkTGF5b3V0LmNvbnRlbnQ/LltpdGVtSWRdPy5iYm94XG4gICAgICBpZiAoYmJveCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuY2hpbGRSZWN0cy5wdXNoKHtcbiAgICAgICAgICBsYXlvdXRJZDogdHJhbnNmb3JtZWRMYXlvdXQuaWQsXG4gICAgICAgICAgaWQ6IGl0ZW1JZCxcbiAgICAgICAgICBsZWZ0OiBwYXJzZUludChiYm94LmxlZnQsIDEwKSxcbiAgICAgICAgICB3aWR0aDogcGFyc2VJbnQoYmJveC53aWR0aCwgMTApLFxuICAgICAgICAgIGhlaWdodDogcGFyc2VJbnQoYmJveC5oZWlnaHQsIDEwKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMuY2hpbGRSZWN0cy5zb3J0KChhLCBiKSA9PiBhLmxlZnQgLSBiLmxlZnQpXG4gIH1cblxuICBnZXRDb25maWcgKCk6IFJvd0xheW91dFNldHRpbmcge1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzXG4gICAgcmV0dXJuIGxheW91dC5zZXR0aW5nID8/IERFRkFVTFRfUk9XX0xBWU9VVF9TRVRUSU5HXG4gIH1cblxuICBjcmVhdGVJdGVtIChcbiAgICBjaGlsZFJlY3RzOiBDaGlsZFJlY3RbXSxcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGxheW91dFN0eWxlXG4gICk6IEpTWC5FbGVtZW50IHtcbiAgICBjb25zdCB7IHRyYW5zZm9ybWVkTGF5b3V0LCBpc011bHRpUm93IH0gPSB0aGlzLnByb3BzXG4gICAgLy8gY29uc3QgeyBpc0RyYWdnaW5nLCBkcmFnZ2luZ0l0ZW1JZCwgZHJhZ091dE9mQm91bmRhcnkgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKVxuICAgIGNvbnN0IGNoaWxkUmVjdCA9IGNoaWxkUmVjdHNbaW5kZXhdXG4gICAgY29uc3QgZ3V0dGVyID0gY29uZmlnLnNwYWNlID8/IDBcblxuICAgIGxldCBvZmZzZXRcbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgIG9mZnNldCA9IGNoaWxkUmVjdC5sZWZ0XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzQkJveCA9IGNoaWxkUmVjdHNbaW5kZXggLSAxXVxuICAgICAgb2Zmc2V0ID0gY2hpbGRSZWN0LmxlZnQgLSBwcmV2aW91c0JCb3gubGVmdCAtIHByZXZpb3VzQkJveC53aWR0aFxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8Um93SXRlbVxuICAgICAgICBrZXk9e2Ake2NoaWxkUmVjdC5sYXlvdXRJZH1fJHtjaGlsZFJlY3QuaWR9YH1cbiAgICAgICAgb2Zmc2V0PXtvZmZzZXR9XG4gICAgICAgIGd1dHRlcj17Z3V0dGVyfVxuICAgICAgICBzcGFuPXtjaGlsZFJlY3Qud2lkdGh9XG4gICAgICAgIGlzTXVsdGlSb3c9e2lzTXVsdGlSb3d9XG4gICAgICAgIGxheW91dElkPXt0cmFuc2Zvcm1lZExheW91dC5pZH1cbiAgICAgICAgbGF5b3V0SXRlbUlkPXtjaGlsZFJlY3QuaWR9XG4gICAgICAgIGxheW91dEl0ZW09e3RyYW5zZm9ybWVkTGF5b3V0LmNvbnRlbnRbY2hpbGRSZWN0LmlkXX1cbiAgICAgICAgYWxpZ25JdGVtcz17bGF5b3V0U3R5bGUuYWxpZ25JdGVtc31cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyICgpOiBKU1guRWxlbWVudCB7XG4gICAgY29uc3QgeyBsYXlvdXQsIGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuY29sbGVjdEJvdW5kcygpXG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuY2hpbGRSZWN0c1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKClcbiAgICBjb25zdCBsYXlvdXRTdHlsZTogYW55ID0gY29uZmlnLnN0eWxlID8/IHt9XG4gICAgY29uc3QgZ3V0dGVyID0gY29uZmlnLnNwYWNlID8/IDBcblxuICAgIHJldHVybiAoXG4gICAgICA8UGFnZUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsocHJvcHM6IFBhZ2VDb250ZXh0UHJvcHMpID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3Jvdy1sYXlvdXQnLCBjbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAncm93LXJ0bCc6IHRoaXMuZmxpcExlZnRSaWdodFxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgY3NzPXtST1dfU1RZTEV9XG4gICAgICAgICAgICAgIGRhdGEtbGF5b3V0aWQ9e2xheW91dC5pZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6ICR7cHJvcHMubWF4V2lkdGggPiAwXG4gICAgICAgICAgICAgICAgICAgID8gYCR7cHJvcHMubWF4V2lkdGh9cHhgXG4gICAgICAgICAgICAgICAgICAgIDogJ25vbmUnfTtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogJHstZ3V0dGVyIC8gMn1weDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAkey1ndXR0ZXIgLyAyfXB4O1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7Y29udGVudC5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgPEludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgbW9uaXRvcjogZmFsc2UgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgPE9uZUJ5T25lQW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBvaWQ9e2xheW91dC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncm93IGgtMTAwIG0tMCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZsZXgtbm93cmFwJzogIXRoaXMucHJvcHMuaXNNdWx0aVJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAke3RoaXMucHJvcHMuaXNNdWx0aVJvdyA/ICdhdXRvJyA6ICd1bnNldCd9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y29udGVudC5tYXAoKF8sIGluZGV4KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUl0ZW0oY29udGVudCwgaW5kZXgsIGxheW91dFN0eWxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L09uZUJ5T25lQW5pbWF0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8L0ludGVyc2VjdGlvbkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIClcbiAgICAgICAgfX1cbiAgICAgIDwvUGFnZUNvbnRleHQuQ29uc3VtZXI+XG4gICAgKVxuICB9XG59XG4iLCJpbXBvcnQgeyB0eXBlIEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IE1JTl9TUEFOID0gMlxuZXhwb3J0IGNvbnN0IFRPVEFMX0NPTFMgPSAxMlxuXG5leHBvcnQgaW50ZXJmYWNlIENoaWxkUmVjdCB7XG4gIGxheW91dElkPzogc3RyaW5nXG4gIGlkOiBzdHJpbmdcbiAgbGVmdD86IG51bWJlclxuICB3aWR0aDogbnVtYmVyXG4gIGhlaWdodD86IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBJTUNoaWxkUmVjdCA9IEltbXV0YWJsZU9iamVjdDxDaGlsZFJlY3Q+XG4iLCJpbXBvcnQgeyB0eXBlIEJvdW5kaW5nQm94LCB0eXBlIElNQm91bmRpbmdCb3gsIEltbXV0YWJsZSwgY3NzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgVE9UQUxfQ09MUyB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyB0eXBlIFJvd0xheW91dEl0ZW1TZXR0aW5nLCBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBST1dfU1RZTEUgPSBjc3NgXG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAub2Zmc2V0LTEge1xuICAgIG1hcmdpbi1sZWZ0OiA4LjMzMzMzJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gIH1cbiAgLm9mZnNldC0yIHtcbiAgICBtYXJnaW4tbGVmdDogMTYuNjY2NjclO1xuICAgIG1hcmdpbi1yaWdodDogMDtcbiAgfVxuICAub2Zmc2V0LTMge1xuICAgIG1hcmdpbi1sZWZ0OiAyNSU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtNCB7XG4gICAgbWFyZ2luLWxlZnQ6IDMzLjMzMzMzJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gIH1cbiAgLm9mZnNldC01IHtcbiAgICBtYXJnaW4tbGVmdDogNDEuNjY2NjclO1xuICAgIG1hcmdpbi1yaWdodDogMDtcbiAgfVxuICAub2Zmc2V0LTYge1xuICAgIG1hcmdpbi1sZWZ0OiA1MCU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtNyB7XG4gICAgbWFyZ2luLWxlZnQ6IDU4LjMzMzMzJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gIH1cbiAgLm9mZnNldC04IHtcbiAgICBtYXJnaW4tbGVmdDogNjYuNjY2NjclO1xuICAgIG1hcmdpbi1yaWdodDogMDtcbiAgfVxuICAub2Zmc2V0LTkge1xuICAgIG1hcmdpbi1sZWZ0OiA3NSU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtMTAge1xuICAgIG1hcmdpbi1sZWZ0OiA4My4zMzMzMyU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIC5vZmZzZXQtMTEge1xuICAgIG1hcmdpbi1sZWZ0OiA5MS42NjY2NyU7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBmbGlwUm93SXRlbVBvcyAoYmJveDogQm91bmRpbmdCb3gpOiBJTUJvdW5kaW5nQm94IHtcbiAgY29uc3QgcmVzdWx0ID0gSW1tdXRhYmxlKGJib3gpXG4gIHJldHVybiByZXN1bHQuc2V0KCdsZWZ0JywgVE9UQUxfQ09MUyAtIHBhcnNlSW50KGJib3gubGVmdCwgMTApIC0gcGFyc2VJbnQoYmJveC53aWR0aCwgMTApKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsSXRlbUhlaWdodCAoaXRlbVNldHRpbmc6IFJvd0xheW91dEl0ZW1TZXR0aW5nLCBiYm94OiBCb3VuZGluZ0JveCwgaXNNdWx0aVJvdzogYm9vbGVhbik6IHsgaGVpZ2h0Pzogc3RyaW5nLCBhbGlnblNlbGY6IHN0cmluZyB9IHtcbiAgaWYgKGlzTXVsdGlSb3cpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVpZ2h0OiBpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvID8gJ2F1dG8nIDogYmJveC5oZWlnaHQsXG4gICAgICBhbGlnblNlbGY6IGl0ZW1TZXR0aW5nLnN0eWxlPy5hbGlnblNlbGYgPz8gJ2ZsZXgtc3RhcnQnXG4gICAgfVxuICB9XG4gIC8vIDEuIGFzcGVjdCByYXRpb1xuICBpZiAoaXRlbVNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJykge1xuICAgIHJldHVybiB7IGFsaWduU2VsZjogaXRlbVNldHRpbmcuc3R5bGU/LmFsaWduU2VsZiA/PyAnZmxleC1zdGFydCcgfVxuICB9XG4gIC8vIDIuIHVzZSBhdXRvUHJvcHMuaGVpZ2h0IGZpcnN0XG4gIGlmIChpdGVtU2V0dGluZy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvKSB7XG4gICAgcmV0dXJuIHsgaGVpZ2h0OiAnYXV0bycsIGFsaWduU2VsZjogaXRlbVNldHRpbmcuc3R5bGU/LmFsaWduU2VsZiA/PyAnZmxleC1zdGFydCcgfVxuICB9IGVsc2UgaWYgKGl0ZW1TZXR0aW5nLmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSkge1xuICAgIHJldHVybiB7IGhlaWdodDogYmJveC5oZWlnaHQsIGFsaWduU2VsZjogaXRlbVNldHRpbmcuc3R5bGU/LmFsaWduU2VsZiA/PyAnZmxleC1zdGFydCcgfVxuICB9IGVsc2UgaWYgKGl0ZW1TZXR0aW5nLmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2gpIHtcbiAgICByZXR1cm4geyBhbGlnblNlbGY6ICdzdHJldGNoJyB9XG4gIH1cbiAgLy8gMy4gYmFjayBjb21wYXRpYmxlLCB1c2Ugc2V0dGluZy5oZWlnaHRNb2RlXG4gIGlmIChpdGVtU2V0dGluZy5oZWlnaHRNb2RlID09PSAnZml0Jykge1xuICAgIHJldHVybiB7IGFsaWduU2VsZjogJ3N0cmV0Y2gnIH1cbiAgfSBlbHNlIGlmIChwYXJzZUZsb2F0KGJib3guaGVpZ2h0KSA+IDApIHtcbiAgICByZXR1cm4geyBoZWlnaHQ6IGJib3guaGVpZ2h0LCBhbGlnblNlbGY6IGl0ZW1TZXR0aW5nLnN0eWxlPy5hbGlnblNlbGYgPz8gJ2ZsZXgtc3RhcnQnIH1cbiAgfVxuXG4gIHJldHVybiB7IGFsaWduU2VsZjogJ3N0cmV0Y2gnIH1cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCBMYXlvdXRUeXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRQcm9wcywgdHlwZSBTdGF0ZVRvTGF5b3V0UHJvcHMgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IG1hcFN0YXRlVG9MYXlvdXRQcm9wcyB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgZmluZExheW91dFZpZXdlciB9IGZyb20gJy4uL2xheW91dC1mYWN0b3J5J1xuXG5jbGFzcyBMYXlvdXRFbnRyeSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0UHJvcHMgJiBTdGF0ZVRvTGF5b3V0UHJvcHM+IHtcbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy5wcm9wc1xuXG4gICAgaWYgKCFsYXlvdXQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgTGF5b3V0RWxlbWVudCA9IGZpbmRMYXlvdXRWaWV3ZXIobGF5b3V0LnR5cGUgfHwgTGF5b3V0VHlwZS5GbG93TGF5b3V0KVxuICAgIGlmICghTGF5b3V0RWxlbWVudCkge1xuICAgICAgLy8gY29uc29sZS5lcnJvcignVW5rb253IGxheW91dCB0eXBlLicsIGxheW91dC50eXBlKTtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIDxMYXlvdXRFbGVtZW50IHsuLi50aGlzLnByb3BzfSAvPlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxTdGF0ZVRvTGF5b3V0UHJvcHMsIHVua25vd24sIExheW91dFByb3BzPihtYXBTdGF0ZVRvTGF5b3V0UHJvcHMpKExheW91dEVudHJ5KVxuIiwiaW1wb3J0IHsgUmVhY3QsIHR5cGUgQW5pbWF0aW9uVHlwZSwgZ2V0TmV4dEFuaW1hdGlvbklkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFnZVZpc2liaWxpdHlDb250ZXh0IH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuXG4vKipcbiAqIEdlbmVyYXRlIHBsYXlJZCB3aGVuIHRoZSB3aG9sZSBwYWdlJ3MgYW5pbWF0aW9uIGlzIHBsYXllZCBpbiBsaXZlIHZpZXcgbW9kZS5cbiAqIDEuIHBhZ2UgaXMgYWN0aXZhdGVkXG4gKlxuICogQHBhcmFtIG9wdGlvblxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUxpdmV2aWV3UGxheUlkICh0eXBlOiBBbmltYXRpb25UeXBlLCBoYXNQYXJlbnRBbmltYXRpb246IGJvb2xlYW4pOiBbbnVtYmVyLCBib29sZWFuLCAoKSA9PiB2b2lkXSB7XG4gIGNvbnN0IFtsaXZlVmlld1BsYXlJZCwgc2V0TGl2ZVZpZXdQbGF5SWRdID0gUmVhY3QudXNlU3RhdGU8bnVtYmVyPihudWxsKVxuXG4gIGNvbnN0IGlzUGFnZVZpc2libGUgPSBSZWFjdC51c2VDb250ZXh0KFBhZ2VWaXNpYmlsaXR5Q29udGV4dClcblxuICBjb25zdCB2aXNpYmxlUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gdmlzaWJsZSAtPiBpbnZpc2libGUgb3IgaW52aXNpYmxlIC0+IHZpc2libGVcbiAgICBpZiAodHlwZSAhPSBudWxsICYmICFoYXNQYXJlbnRBbmltYXRpb24gJiYgdmlzaWJsZVJlZi5jdXJyZW50ICE9PSBpc1BhZ2VWaXNpYmxlKSB7XG4gICAgICB2aXNpYmxlUmVmLmN1cnJlbnQgPSBpc1BhZ2VWaXNpYmxlXG4gICAgICBzZXRMaXZlVmlld1BsYXlJZChnZXROZXh0QW5pbWF0aW9uSWQoKSlcbiAgICB9XG4gIH0sIFtpc1BhZ2VWaXNpYmxlLCBoYXNQYXJlbnRBbmltYXRpb24sIHR5cGVdKVxuXG4gIGNvbnN0IHJlc2V0UGxheUlkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldExpdmVWaWV3UGxheUlkKG51bGwpXG4gIH0sIFtdKVxuXG4gIHJldHVybiBbXG4gICAgbGl2ZVZpZXdQbGF5SWQsXG4gICAgIWlzUGFnZVZpc2libGUsXG4gICAgcmVzZXRQbGF5SWRcbiAgXVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgTGF5b3V0SXRlbVR5cGUsXG4gIGNsYXNzTmFtZXMsXG4gIEFuaW1hdGlvbkNvbXBvbmVudCxcbiAgQW5pbWF0aW9uVHlwZSxcbiAgQW5pbWF0aW9uQ29udGV4dCxcbiAgQW5pbWF0aW9uVHJpZ2dlclR5cGUsXG4gIHR5cGUgQW5pbWF0aW9uQ29udGV4dFByb3BzLFxuICBnZXROZXh0QW5pbWF0aW9uSWQsXG4gIGdldEhvdmVyU3R5bGUsXG4gIEFuaW1hdGlvblN0YXJ0TW9kZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIExheW91dEl0ZW1Qcm9wcywgdHlwZSBXaWRnZXRQcm9wcywgdHlwZSBTZWN0aW9uUHJvcHMsIHR5cGUgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcywgTUlOX0xBWU9VVF9JVEVNX1NJWkUgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IG1hcFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgfSBmcm9tICcuLi91dGlscydcbmltcG9ydCB7IGdldFNlY3Rpb25JbmZvIH0gZnJvbSAnLi4vc2VhcmNoJ1xuaW1wb3J0IHsgV2lkZ2V0UmVuZGVyZXIgfSBmcm9tICcuL3dpZGdldC1yZW5kZXJlcidcbmltcG9ydCB7IFNlY3Rpb25SZW5kZXJlciB9IGZyb20gJy4vc2VjdGlvbi1yZW5kZXJlcidcbmltcG9ydCB7IHVzZUxpdmV2aWV3UGxheUlkIH0gZnJvbSAnLi9sYXlvdXQtaXRlbS1ob29rL3VzZS1saXZldmlldy1wbGF5aWQnXG5pbXBvcnQgeyB1c2VWaWV3cG9ydEludGVyc2VjdGlvbiB9IGZyb20gJy4uL3VzZS12aWV3cG9ydC1pbnRlcnNlY3Rpb24nXG5pbXBvcnQgeyBWaWV3cG9ydFZpc2liaWxpdHlDb250ZXh0IH0gZnJvbSAnLi4vYnVpbGRlci9wYWdlLWNvbnRleHQnXG5cbnR5cGUgU3RhdGVUb0l0ZW1Qcm9wcyA9IFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgJiBXaWRnZXRQcm9wcyAmIFNlY3Rpb25Qcm9wcyAmIHsgaW5uZXJMYXlvdXRJZD86IHN0cmluZyB9XG5pbnRlcmZhY2UgQ2hpbGRFbWVtZW50IHtcbiAgY2hpbGRyZW4/OiBFbGVtZW50IHwgUmVhY3QuUmVhY3ROb2RlXG59XG5leHBvcnQgaW50ZXJmYWNlIE93blByb3BzIHtcbiAgaWQ/OiBzdHJpbmdcbiAgZGVsYXk/OiBudW1iZXJcbiAgaXNMYXN0Q2hpbGQ/OiBib29sZWFuXG59XG5cbmZ1bmN0aW9uIGZpbmRJbm5lckxheW91dElkIChzdGF0ZTogSU1TdGF0ZSwgbGF5b3V0SWQ6IHN0cmluZywgbGF5b3V0SXRlbUlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0SXRlbS53aWRnZXRJZF0gLy8gbWF5IGJlIGEgcGxhY2Vob2xkZXJcbiAgICBjb25zdCBzaXplTW9kZUxheW91dCA9IHdpZGdldEpzb24/LmxheW91dHM/LkRFRkFVTFRcblxuICAgIGlmIChzaXplTW9kZUxheW91dCkge1xuICAgICAgcmV0dXJuIHNpemVNb2RlTGF5b3V0W3N0YXRlLmJyb3dzZXJTaXplTW9kZV1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMYXlvdXRJdGVtIChwcm9wczogTGF5b3V0SXRlbVByb3BzICYgT3duUHJvcHMgJiBDaGlsZEVtZW1lbnQpIHtcbiAgY29uc3Qgc3RhdGVQcm9wcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIHByb3BzKSwgUmVhY3RSZWR1eC5zaGFsbG93RXF1YWwpXG4gIGNvbnN0IGlzUHJpbnRQcmV2aWV3ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5pc1ByaW50UHJldmlldyA/PyBmYWxzZSlcbiAgY29uc3QgYWxsUHJvcHMgPSB7IC4uLnByb3BzLCAuLi5zdGF0ZVByb3BzIH1cblxuICBjb25zdCByZWZPYmogPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBsYXlvdXRJdGVtIH0gPSBhbGxQcm9wc1xuICBjb25zdCB7IGNsYXNzTmFtZSwgY2hpbGRyZW4sIGlkLCBpc0xhc3RDaGlsZCwgLi4ub3RoZXJQcm9wcyB9ID0gYWxsUHJvcHNcbiAgY29uc3QgaXNXaWRnZXQgPSBsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXRcbiAgY29uc3QgaXNTZWN0aW9uID0gbGF5b3V0SXRlbT8udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvblxuXG4gIGNvbnN0IHsgZWZmZWN0LCBvbmVCeU9uZUVmZmVjdCwgaG92ZXJFZmZlY3QgfSA9ICFpc1ByaW50UHJldmlldyA/IChhbGxQcm9wcy5sYXlvdXRJdGVtPy5zZXR0aW5nID8/IHt9KSA6IHt9IGFzIGFueVxuICBsZXQgZWZmZWN0VHlwZSA9IGVmZmVjdD8uW0FuaW1hdGlvblRyaWdnZXJUeXBlLlNjcm9sbEludG9WaWV3XT8udHlwZVxuICBlZmZlY3RUeXBlID0gZWZmZWN0VHlwZSAmJiBlZmZlY3RUeXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmUgPyBlZmZlY3RUeXBlIDogbnVsbFxuICBsZXQgb25lQnlPbmVFZmZlY3RUeXBlID0gb25lQnlPbmVFZmZlY3Q/LltBbmltYXRpb25UcmlnZ2VyVHlwZS5TY3JvbGxJbnRvVmlld10/LnR5cGVcbiAgb25lQnlPbmVFZmZlY3RUeXBlID0gb25lQnlPbmVFZmZlY3RUeXBlICYmIG9uZUJ5T25lRWZmZWN0VHlwZSAhPT0gQW5pbWF0aW9uVHlwZS5Ob25lID8gb25lQnlPbmVFZmZlY3RUeXBlIDogbnVsbFxuXG4gIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuICBjb25zdCBbbW91bnRlZCwgc2V0TW91bnRlZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2FuaW1hdGlvbkNvbnRleHQsIHNldEFuaW1hdGlvbkNvbnRleHRdID0gUmVhY3QudXNlU3RhdGU8QW5pbWF0aW9uQ29udGV4dFByb3BzPih7XG4gICAgc2V0dGluZzogb25lQnlPbmVFZmZlY3Q/LltBbmltYXRpb25UcmlnZ2VyVHlwZS5TY3JvbGxJbnRvVmlld10sXG4gICAgcGxheUlkOiBudWxsLFxuICAgIG9pZDogc3RhdGVQcm9wcy5pbm5lckxheW91dElkLFxuICAgIHJldmVydDogbnVsbFxuICB9KVxuICBjb25zdCBpc0luVmlld3BvcnQgPSB1c2VWaWV3cG9ydEludGVyc2VjdGlvbihyZWZPYmouY3VycmVudCwgYWxsUHJvcHMud2F0Y2hWaWV3cG9ydFZpc2liaWxpdHkpXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRNb3VudGVkKHRydWUpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IHsgc2V0dGluZzogcGFyZW50QW5pbWF0aW9uU2V0dGluZyB9ID0gUmVhY3QudXNlQ29udGV4dChBbmltYXRpb25Db250ZXh0KVxuXG4gIGNvbnN0IFthc09uZVBsYXlJZCwgYXNPbmVSZXZlcnQsIG9uQXNPbmVBbmltYXRpb25FbmRdID0gdXNlTGl2ZXZpZXdQbGF5SWQoXG4gICAgZWZmZWN0VHlwZSxcbiAgICBwYXJlbnRBbmltYXRpb25TZXR0aW5nPy50eXBlICE9IG51bGwgJiYgcGFyZW50QW5pbWF0aW9uU2V0dGluZy50eXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmVcbiAgKVxuICBjb25zdCBbb25lQnlPbmVQbGF5SWQsIG9uZUJ5T25lUmV2ZXJ0LCBvbk9uZWJ5T25lQW5pbWF0aW9uRW5kXSA9IHVzZUxpdmV2aWV3UGxheUlkKFxuICAgIG9uZUJ5T25lRWZmZWN0VHlwZSxcbiAgICBwYXJlbnRBbmltYXRpb25TZXR0aW5nPy50eXBlICE9IG51bGwgJiYgcGFyZW50QW5pbWF0aW9uU2V0dGluZy50eXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmVcbiAgKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gbm8gYXMgb25lIHBsYXlJZCwgc2V0IG9uZWJ5b25lIGRpcmVjdGx5XG4gICAgaWYgKGFzT25lUGxheUlkID09IG51bGwgJiYgb25lQnlPbmVQbGF5SWQpIHtcbiAgICAgIHNldEFuaW1hdGlvbkNvbnRleHQoe1xuICAgICAgICBzZXR0aW5nOiBvbmVCeU9uZUVmZmVjdD8uW0FuaW1hdGlvblRyaWdnZXJUeXBlLlNjcm9sbEludG9WaWV3XSxcbiAgICAgICAgcGxheUlkOiBvbmVCeU9uZVBsYXlJZCxcbiAgICAgICAgb2lkOiBzdGF0ZVByb3BzLmlubmVyTGF5b3V0SWQsXG4gICAgICAgIHJldmVydDogb25lQnlPbmVSZXZlcnQsXG4gICAgICAgIG9uQ29udGV4dEFuaW1hdGlvbkVuZDogb25lQnlPbmVSZXZlcnQgLy8gbm8gbmVlZCB0byByZXNldCBhbmltYXRpb24gY29udGV4dCBpZiBpdCBpcyByZXZlcnRcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6ICgpID0+IHtcbiAgICAgICAgICAgICAgb25PbmVieU9uZUFuaW1hdGlvbkVuZCgpXG4gICAgICAgICAgICAgIHNldEFuaW1hdGlvbkNvbnRleHQoe1xuICAgICAgICAgICAgICAgIHNldHRpbmc6IG9uZUJ5T25lRWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddLFxuICAgICAgICAgICAgICAgIG9pZDogc3RhdGVQcm9wcy5pbm5lckxheW91dElkLFxuICAgICAgICAgICAgICAgIHBsYXlJZDogLTFcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9LCBbYXNPbmVQbGF5SWQsIG9uZUJ5T25lUGxheUlkXSlcblxuICBjb25zdCBoYW5kbGVTaW5nbGVBbmltYXRpb25TdGFydCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBtYXliZSB0aGVyZSBpcyBubyBvbmUgYnkgb25lIGFuaW1hdGlvbiwgYnV0IHNvbWUgY2hpbGQgZWxlbWVudCBoYXMgaXRzIG93biBhbmltYXRpb25cbiAgICBjb25zdCBzZXR0aW5nID0gb25lQnlPbmVFZmZlY3Q/LltBbmltYXRpb25UcmlnZ2VyVHlwZS5TY3JvbGxJbnRvVmlld11cbiAgICBjb25zdCByZXZlcnQgPSBzZXR0aW5nPy5vcHRpb24/LnN0YXJ0ID09PSBBbmltYXRpb25TdGFydE1vZGUuQWZ0ZXJQcmV2aW91c1xuICAgIHNldEFuaW1hdGlvbkNvbnRleHQoe1xuICAgICAgc2V0dGluZyxcbiAgICAgIHBsYXlJZDogZ2V0TmV4dEFuaW1hdGlvbklkKCksXG4gICAgICBvaWQ6IHN0YXRlUHJvcHMuaW5uZXJMYXlvdXRJZCxcbiAgICAgIHJldmVydCxcbiAgICAgIG9uQ29udGV4dEFuaW1hdGlvbkVuZDogcmV2ZXJ0XG4gICAgICAgID8gbnVsbFxuICAgICAgICA6ICgpID0+IHtcbiAgICAgICAgICAgIHNldEFuaW1hdGlvbkNvbnRleHQoeyBzZXR0aW5nLCBvaWQ6IHN0YXRlUHJvcHMuaW5uZXJMYXlvdXRJZCwgcGxheUlkOiAtMSB9KVxuICAgICAgICAgIH1cbiAgICB9KVxuICB9LCBbb25lQnlPbmVFZmZlY3RUeXBlXSlcblxuICBjb25zdCBoYW5kbGVTaW5nbGVBbmltYXRpb25FbmQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZyA9IG9uZUJ5T25lRWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddXG4gICAgLy8gb25seSBwbGF5cyB3aGVuIHN0YXJ0IG1vZGUgaXMgXCJhZnRlciBwcmV2aW91c1wiXG4gICAgaWYgKHNldHRpbmc/Lm9wdGlvbj8uc3RhcnQgPT09IEFuaW1hdGlvblN0YXJ0TW9kZS5BZnRlclByZXZpb3VzKSB7XG4gICAgICBzZXRBbmltYXRpb25Db250ZXh0KHtcbiAgICAgICAgc2V0dGluZyxcbiAgICAgICAgcGxheUlkOiBnZXROZXh0QW5pbWF0aW9uSWQoKSxcbiAgICAgICAgb2lkOiBzdGF0ZVByb3BzLmlubmVyTGF5b3V0SWQsXG4gICAgICAgIHJldmVydDogZmFsc2UsXG4gICAgICAgIG9uQ29udGV4dEFuaW1hdGlvbkVuZDogKCkgPT4ge1xuICAgICAgICAgIHNldEFuaW1hdGlvbkNvbnRleHQoeyBzZXR0aW5nLCBvaWQ6IHN0YXRlUHJvcHMuaW5uZXJMYXlvdXRJZCwgcGxheUlkOiAtMSB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoYXNPbmVQbGF5SWQgPiAwKSB7IC8vIHJlc2V0IHRoZSBwbGF5SWQgaWYgdGhpcyBhbmltYXRpb24gaXMgdHJpZ2dlcmVkIGJ5IGFzT25lUGxheUlkXG4gICAgICBvbkFzT25lQW5pbWF0aW9uRW5kPy4oKVxuICAgIH1cbiAgfSwgW29uZUJ5T25lRWZmZWN0VHlwZSwgYXNPbmVQbGF5SWRdKVxuXG4gIGlmICghYWxsUHJvcHMubGF5b3V0SXRlbSB8fCAoaXNTZWN0aW9uICYmICFsYXlvdXRJdGVtLnNlY3Rpb25JZCkpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLy8gY29uc3QgZWZmZWN0VHlwZSA9IGVmZmVjdCA/ICh2aXNpYmxlID8gZWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddPy50eXBlOiBBbmltYXRpb25UeXBlLkZhZGVPdXQpIDogbnVsbDtcbiAgY29uc3QgZWZmZWN0T3B0aW9uID0gZWZmZWN0Py5bQW5pbWF0aW9uVHJpZ2dlclR5cGUuU2Nyb2xsSW50b1ZpZXddPy5vcHRpb25cbiAgY29uc3Qgcm90YXRlID0gbGF5b3V0SXRlbS5zZXR0aW5nPy5zdHlsZT8udHJhbnNmb3JtPy5yb3RhdGUgPz8gMFxuXG4gIHJldHVybiAoXG4gICAgPFZpZXdwb3J0VmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2lzSW5WaWV3cG9ydH0+XG4gICAgICA8QW5pbWF0aW9uQ29tcG9uZW50XG4gICAgICAgIGlkPXtpZH1cbiAgICAgICAgcGFyZW50SWQ9e2xheW91dElkfVxuICAgICAgICB0eXBlPXtlZmZlY3RUeXBlfVxuICAgICAgICBjb25maWdUeXBlPXtlZmZlY3RPcHRpb24/LmNvbmZpZ1R5cGV9XG4gICAgICAgIGRpcmVjdGlvbj17ZWZmZWN0T3B0aW9uPy5kaXJlY3Rpb259XG4gICAgICAgIHJldmVydD17YXNPbmVSZXZlcnR9XG4gICAgICAgIGRlbGF5PXtwcm9wcy5kZWxheX1cbiAgICAgICAgaXNMYXN0Q2hpbGQ9e2lzTGFzdENoaWxkfVxuICAgICAgICBwbGF5SWQ9e2FzT25lUGxheUlkfVxuICAgICAgICBvbkFuaW1hdGlvblN0YXJ0PXtoYW5kbGVTaW5nbGVBbmltYXRpb25TdGFydH1cbiAgICAgICAgb25BbmltYXRpb25FbmQ9e2hhbmRsZVNpbmdsZUFuaW1hdGlvbkVuZH1cbiAgICAgICAgcmVmPXtyZWZPYmp9XG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICR7Z2V0SG92ZXJTdHlsZShob3ZlckVmZmVjdD8udHlwZSwgaG92ZXJFZmZlY3Q/LnNldHRpbmcpfTtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgICAgICAgbWluLXdpZHRoOiAke01JTl9MQVlPVVRfSVRFTV9TSVpFfXB4O1xuICAgICAgICAgIG1pbi1oZWlnaHQ6ICR7TUlOX0xBWU9VVF9JVEVNX1NJWkV9cHg7XG4gICAgICAgIGB9XG4gICAgICAgIHN0eWxlPXtwcm9wcy5zdHlsZX1cbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdkLWZsZXggbGF5b3V0LWl0ZW0nLCBjbGFzc05hbWUsIHtcbiAgICAgICAgICAnaXMtd2lkZ2V0JzogaXNXaWRnZXQsXG4gICAgICAgICAgJ2lzLXNlY3Rpb24nOiBpc1NlY3Rpb25cbiAgICAgICAgfSl9XG4gICAgICAgIGRhdGEtbGF5b3V0aXRlbWlkPXtsYXlvdXRJdGVtSWR9XG4gICAgICAgIGRhdGEtbGF5b3V0aWQ9e2xheW91dElkfVxuICAgICAgPlxuICAgICAgICA8QW5pbWF0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17YW5pbWF0aW9uQ29udGV4dH0+XG4gICAgICAgICAge2lzV2lkZ2V0ICYmIDxXaWRnZXRSZW5kZXJlciByb3RhdGU9e3JvdGF0ZX0gey4uLm90aGVyUHJvcHN9IC8+fVxuICAgICAgICAgIHtpc1NlY3Rpb24gJiYgPFNlY3Rpb25SZW5kZXJlciByb3RhdGU9e3JvdGF0ZX0gey4uLm90aGVyUHJvcHN9IC8+fVxuICAgICAgICA8L0FuaW1hdGlvbkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgIDwvQW5pbWF0aW9uQ29tcG9uZW50PlxuICAgIDwvVmlld3BvcnRWaXNpYmlsaXR5Q29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMgKHN0YXRlOiBJTVN0YXRlLCBvd25Qcm9wczogTGF5b3V0SXRlbVByb3BzKTogU3RhdGVUb0l0ZW1Qcm9wcyB7XG4gIGNvbnN0IGxheW91dEl0ZW1Qcm9wcyA9IG1hcFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMoc3RhdGUsIG93blByb3BzKVxuXG4gIGlmICghbGF5b3V0SXRlbVByb3BzLmxheW91dEl0ZW0pIHtcbiAgICByZXR1cm4gbGF5b3V0SXRlbVByb3BzIGFzIGFueVxuICB9XG4gIGlmIChsYXlvdXRJdGVtUHJvcHMubGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgaW5uZXJMYXlvdXRJZCA9IGZpbmRJbm5lckxheW91dElkKHN0YXRlLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkKVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIC4uLmxheW91dEl0ZW1Qcm9wc1xuICAgIH0gYXMgU3RhdGVUb0l0ZW1Qcm9wc1xuICAgIGlmIChpbm5lckxheW91dElkKSB7XG4gICAgICByZXN1bHQuaW5uZXJMYXlvdXRJZCA9IGlubmVyTGF5b3V0SWRcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG4gIGNvbnN0IHNlY3Rpb25Qcm9wcyA9IGdldFNlY3Rpb25JbmZvKHN0YXRlLCBsYXlvdXRJdGVtUHJvcHMubGF5b3V0SXRlbS5zZWN0aW9uSWQpXG5cbiAgcmV0dXJuIHtcbiAgICAuLi5sYXlvdXRJdGVtUHJvcHMsXG4gICAgLi4uc2VjdGlvblByb3BzXG4gIH0gYXMgU3RhdGVUb0l0ZW1Qcm9wc1xufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSU1QYWdlSnNvbixcbiAgUGFnZU1vZGUsXG4gIEFuaW1hdGlvbkNvbnRleHQsXG4gIEFuaW1hdGlvblR5cGUsXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgZ2V0QXBwU3RvcmUsXG4gIExheW91dFR5cGUsXG4gIGdldE5leHRBbmltYXRpb25JZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYWdlQ29udGV4dCwgdHlwZSBQYWdlQ29udGV4dFByb3BzLCBQYWdlVmlzaWJpbGl0eUNvbnRleHQgfSBmcm9tICcuLi9idWlsZGVyL3BhZ2UtY29udGV4dCdcbmltcG9ydCBMYXlvdXRFbnRyeSBmcm9tICcuL2xheW91dC1lbnRyeSdcbmltcG9ydCAqIGFzIHNlYXJjaFV0aWxzIGZyb20gJy4uL3NlYXJjaCdcbmltcG9ydCB7IGNvbXB1dGVQYWdlSGVpZ2h0IH0gZnJvbSAnLi4vY29tbW9uL3BhZ2UtdXRpbCdcbmltcG9ydCB7IENvbnRyb2xsZXJQYW5lbEdyb3VwIH0gZnJvbSAnLi4vY29udHJvbGxlci1wYW5lbC9ydW50aW1lL2dyb3VwJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VCb2R5UHJvcHMge1xuICBwYWdlSnNvbjogSU1QYWdlSnNvblxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRQcm9wc1xuICB2aXNpYmxlOiBib29sZWFuXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIGlzUHJpbnRQcmV2aWV3OiBib29sZWFuXG4gIGhlYWRlckZvb3RlckhlaWdodDogbnVtYmVyXG59XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzICovXG5leHBvcnQgZnVuY3Rpb24gUGFnZUJvZHkgKHByb3BzOiBQYWdlQm9keVByb3BzKSB7XG4gIGNvbnN0IHsgcGFnZUpzb24sIHZpc2libGUsIHBhZ2VDb250ZXh0LCBicm93c2VyU2l6ZU1vZGUsIGlzUHJpbnRQcmV2aWV3LCBoZWFkZXJGb290ZXJIZWlnaHQgfSA9IHByb3BzXG4gIGNvbnN0IFtwbGF5SWQsIHNldFBsYXlJZF0gPSBSZWFjdC51c2VTdGF0ZTxudW1iZXI+KClcbiAgY29uc3QgbGF5b3V0ID0gcGFnZUpzb24ubGF5b3V0XG4gIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcyAqL1xuICBjb25zdCBwYWdlSGVpZ2h0ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGNvbXB1dGVQYWdlSGVpZ2h0KHBhZ2VKc29uLCBoZWFkZXJGb290ZXJIZWlnaHQpXG4gIH0sIFtoZWFkZXJGb290ZXJIZWlnaHRdKVxuICBjb25zdCBvbmVCeU9uZUVmZmVjdCA9ICFpc1ByaW50UHJldmlldyAmJiBwYWdlSnNvbi5vbmVCeU9uZUVmZmVjdCAmJiBwYWdlSnNvbi5vbmVCeU9uZUVmZmVjdC50eXBlICE9PSBBbmltYXRpb25UeXBlLk5vbmUgPyBwYWdlSnNvbi5vbmVCeU9uZUVmZmVjdCA6IG51bGxcbiAgLy8gY29uc3QgZWZmZWN0VHlwZSA9IG9uZUJ5T25lRWZmZWN0ID8gKHZpc2libGUgPyBvbmVCeU9uZUVmZmVjdC50eXBlIDogQW5pbWF0aW9uVHlwZS5GYWRlT3V0KSA6IG51bGw7XG4gIGNvbnN0IHJldmVydCA9IG9uZUJ5T25lRWZmZWN0ID8gKCF2aXNpYmxlKSA6IG51bGxcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChvbmVCeU9uZUVmZmVjdCkge1xuICAgICAgc2V0UGxheUlkKGdldE5leHRBbmltYXRpb25JZCgpKVxuICAgIH1cbiAgfSwgW3Zpc2libGVdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHZpc2libGUgJiYgbGF5b3V0KSB7XG4gICAgICAvLyBhZGQgc2Nyb2xsYWJsZSBjbGFzcyBuYW1lIHRvIGJvZHkgaWYgcGFnZSBpcyBzY3JvbGxhYmxlXG4gICAgICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXG4gICAgICBjb25zdCBsYXlvdXRJZCA9IGxheW91dFthcHBDb25maWcubWFpblNpemVNb2RlXVxuICAgICAgY29uc3QgbGF5b3V0VHlwZSA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXT8udHlwZVxuICAgICAgY29uc3QgaHRtbE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdXG4gICAgICBpZiAobGF5b3V0VHlwZSA9PT0gTGF5b3V0VHlwZS5GbG93TGF5b3V0KSB7XG4gICAgICAgIGh0bWxOb2RlLmNsYXNzTGlzdC5hZGQoJ3Njcm9sbGFibGUnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaHRtbE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2Nyb2xsYWJsZScpXG4gICAgICB9XG4gICAgfVxuICB9LCBbdmlzaWJsZV0pXG5cbiAgbGV0IG1heFdpZHRoXG4gIGlmIChwYWdlSnNvbi5tb2RlICE9PSBQYWdlTW9kZS5GaXRXaW5kb3cgJiYgcGFnZUpzb24ubWF4V2lkdGggPiAwKSB7XG4gICAgbWF4V2lkdGggPSBwYWdlSnNvbi5tYXhXaWR0aFxuICB9XG5cbiAgY29uc3QgcGFnZUNvbnRleHRWYWx1ZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gICAgbGV0IHJvb3RMYXlvdXRJZFxuICAgIGlmIChwYWdlSnNvbi5sYXlvdXQpIHtcbiAgICAgIHJvb3RMYXlvdXRJZCA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJZChwYWdlSnNvbi5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnBhZ2VDb250ZXh0LFxuICAgICAgbWF4V2lkdGgsXG4gICAgICAvLyB2aXNpYmxlLFxuICAgICAgdmlld09ubHk6IHRydWUsXG4gICAgICByb290TGF5b3V0SWQsXG4gICAgICBwYWdlSWQ6IHBhZ2VKc29uLmlkXG4gICAgfVxuICB9LCBbcGFnZUNvbnRleHQsIG1heFdpZHRoLCBwYWdlSnNvbi5pZF0pXG5cbiAgY29uc3QgYW5pbWF0aW9uQ29udGV4dFZhbHVlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldHRpbmc6IG9uZUJ5T25lRWZmZWN0LFxuICAgICAgcmV2ZXJ0LFxuICAgICAgcGxheUlkOiBvbmVCeU9uZUVmZmVjdCA/IHBsYXlJZCA6IG51bGwsXG4gICAgICBvaWQ6IHBhZ2VDb250ZXh0VmFsdWUucm9vdExheW91dElkLFxuICAgICAgb25Db250ZXh0QW5pbWF0aW9uRW5kOiAoKSA9PiB7XG4gICAgICAgIHNldFBsYXlJZCgtMSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvbmVCeU9uZUVmZmVjdCwgcmV2ZXJ0LCBwbGF5SWRdKVxuXG4gIGlmICghbGF5b3V0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxQYWdlQ29udGV4dC5Qcm92aWRlciBrZXk9e3BhZ2VKc29uLmlkfSB2YWx1ZT17cGFnZUNvbnRleHRWYWx1ZX0+XG4gICAgICA8UGFnZVZpc2liaWxpdHlDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2aXNpYmxlfT5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGlkPXtwYWdlSnNvbi5pZH1cbiAgICAgICAgICBkYXRhLXBhZ2VpZD17cGFnZUpzb24uaWR9XG4gICAgICAgICAgY2xhc3NOYW1lPSdwYWdlJ1xuICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgZGlzcGxheTogJHt2aXNpYmxlID8gJ2ZsZXgnIDogJ25vbmUnfTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cGFnZUpzb24uYm9keUJhY2tncm91bmRDb2xvciB8fCAndHJhbnNwYXJlbnQnfTtcbiAgICAgICAgICAgIGhlaWdodDogJHtwYWdlSGVpZ2h0fTtcbiAgICAgICAgICAgIGZsZXg6IDEgMCBhdXRvO1xuICAgICAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgICBgfVxuICAgICAgICA+XG4gICAgICAgICAgPEFuaW1hdGlvbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2FuaW1hdGlvbkNvbnRleHRWYWx1ZX0+XG4gICAgICAgICAgICA8TGF5b3V0RW50cnlcbiAgICAgICAgICAgICAgbGF5b3V0cz17bGF5b3V0fSBjbGFzc05hbWU9J3ctMTAwIGZsZXgtZ3Jvdy0xJ1xuICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0FuaW1hdGlvbkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAge2Jyb3dzZXJTaXplTW9kZSAhPT0gQnJvd3NlclNpemVNb2RlLlNtYWxsICYmIDxDb250cm9sbGVyUGFuZWxHcm91cCBwYWdlSWQ9e3BhZ2VKc29uLmlkfSAvPn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1BhZ2VWaXNpYmlsaXR5Q29udGV4dC5Qcm92aWRlcj5cbiAgICA8L1BhZ2VDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBJTUhlYWRlckpzb24sIHR5cGUgQnJvd3NlclNpemVNb2RlLCB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIFJlYWN0UmVzaXplRGV0ZWN0b3IgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYWdlQ29udGV4dCwgdHlwZSBQYWdlQ29udGV4dFByb3BzLCBQYWdlVmlzaWJpbGl0eUNvbnRleHQgfSBmcm9tICcuLi9idWlsZGVyL3BhZ2UtY29udGV4dCdcbmltcG9ydCBMYXlvdXRFbnRyeSBmcm9tICcuL2xheW91dC1lbnRyeSdcblxuZXhwb3J0IGludGVyZmFjZSBQYWdlRm9vdGVyUHJvcHMge1xuICBmb290ZXJKc29uOiBJTUhlYWRlckpzb25cbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0UHJvcHNcbiAgdmlzaWJsZTogYm9vbGVhblxuICBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuICBtYWluU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuICBvbkhlaWdodENoYW5nZTogKGhlaWdodDogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQYWdlRm9vdGVyIChwcm9wczogUGFnZUZvb3RlclByb3BzKSB7XG4gIGNvbnN0IHsgZm9vdGVySnNvbiwgdmlzaWJsZSwgYnJvd3NlclNpemVNb2RlLCB0aGVtZSwgbWFpblNpemVNb2RlLCBwYWdlQ29udGV4dCwgb25IZWlnaHRDaGFuZ2UgfSA9IHByb3BzXG5cbiAgY29uc3QgaGVpZ2h0ID0gZm9vdGVySnNvbi5oZWlnaHRbYnJvd3NlclNpemVNb2RlXSB8fCBmb290ZXJKc29uLmhlaWdodFttYWluU2l6ZU1vZGVdIHx8IDUwXG4gIGNvbnN0IGxheW91dCA9IGZvb3Rlckpzb24ubGF5b3V0XG4gIGxldCBiYWNrZ3JvdW5kSU1hZ2U6IHN0cmluZ1xuICBpZiAoZm9vdGVySnNvbi5iYWNrZ3JvdW5kSU1hZ2UpIHtcbiAgICBpZiAodHlwZW9mIChmb290ZXJKc29uLmJhY2tncm91bmRJTWFnZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBiYWNrZ3JvdW5kSU1hZ2UgPSBmb290ZXJKc29uLmJhY2tncm91bmRJTWFnZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIChmb290ZXJKc29uLmJhY2tncm91bmRJTWFnZSkgPT09ICdvYmplY3QnKSB7XG4gICAgICBiYWNrZ3JvdW5kSU1hZ2UgPSBmb290ZXJKc29uLmJhY2tncm91bmRJTWFnZS51cmxcbiAgICB9XG4gIH1cblxuICBjb25zdCBmb290ZXJTdHlsZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBkaXNwbGF5OiAke3Zpc2libGUgPyAnZmxleCcgOiAnbm9uZSd9O1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBtaW4taGVpZ2h0OiAke01hdGgucm91bmQocGFyc2VGbG9hdChoZWlnaHQgYXMgc3RyaW5nKSl9cHg7XG4gICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtmb290ZXJKc29uLmJhY2tncm91bmRDb2xvciB8fCB0aGVtZS5mb290ZXIuYmcgfHwgJ3RyYW5zcGFyZW50J307XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAke2JhY2tncm91bmRJTWFnZX07XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAke2Zvb3Rlckpzb24uYmFja2dyb3VuZFBvc2l0aW9ufTtcbiAgICAgIGNvbG9yOiAke3RoZW1lPy5mb290ZXI/LmNvbG9yfTtcbiAgICAgIHotaW5kZXg6IDA7XG4gICAgYFxuICB9LCBbXG4gICAgdmlzaWJsZSxcbiAgICBoZWlnaHQsXG4gICAgZm9vdGVySnNvbi5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgYmFja2dyb3VuZElNYWdlLFxuICAgIGZvb3Rlckpzb24uYmFja2dyb3VuZFBvc2l0aW9uLFxuICAgIHRoZW1lPy5mb290ZXI/LmJnLFxuICAgIHRoZW1lPy5mb290ZXI/LmNvbG9yXG4gIF0pXG5cbiAgY29uc3QgcGFnZUNvbnRleHRWYWx1ZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5wYWdlQ29udGV4dCxcbiAgICAgIHZpZXdPbmx5OiB0cnVlXG4gICAgfVxuICB9LCBbcGFnZUNvbnRleHRdKVxuXG4gIGNvbnN0IGhhbmRsZVNpemVDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoXywgaGVpZ2h0KSA9PiB7XG4gICAgb25IZWlnaHRDaGFuZ2UoaGVpZ2h0KVxuICB9LCBbb25IZWlnaHRDaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPFBhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtwYWdlQ29udGV4dFZhbHVlfT5cbiAgICAgIDxQYWdlVmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3Zpc2libGV9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9vdGVyJyBjc3M9e2Zvb3RlclN0eWxlfT5cbiAgICAgICAgICA8TGF5b3V0RW50cnkgbGF5b3V0cz17bGF5b3V0fSBjbGFzc05hbWU9J3ctMTAwIGZsZXgtZ3Jvdy0xJyAvPlxuICAgICAgICAgIDxSZWFjdFJlc2l6ZURldGVjdG9yIGhhbmRsZUhlaWdodCBoYW5kbGVXaWR0aD17ZmFsc2V9IG9uUmVzaXplPXtoYW5kbGVTaXplQ2hhbmdlfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvUGFnZVZpc2liaWxpdHlDb250ZXh0LlByb3ZpZGVyPlxuICAgIDwvUGFnZUNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIElNSGVhZGVySnNvbiwgdHlwZSBCcm93c2VyU2l6ZU1vZGUsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcywgUmVhY3RSZXNpemVEZXRlY3RvciB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFBhZ2VDb250ZXh0LCB0eXBlIFBhZ2VDb250ZXh0UHJvcHMsIFBhZ2VWaXNpYmlsaXR5Q29udGV4dCB9IGZyb20gJy4uL2J1aWxkZXIvcGFnZS1jb250ZXh0J1xuaW1wb3J0IExheW91dEVudHJ5IGZyb20gJy4vbGF5b3V0LWVudHJ5J1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VIZWFkZXJQcm9wcyB7XG4gIGhlYWRlckpzb246IElNSGVhZGVySnNvblxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRQcm9wc1xuICB2aXNpYmxlOiBib29sZWFuXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIG1haW5TaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXG4gIG9uSGVpZ2h0Q2hhbmdlOiAoaGVpZ2h0OiBudW1iZXIpID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBhZ2VIZWFkZXIgKHByb3BzOiBQYWdlSGVhZGVyUHJvcHMpIHtcbiAgY29uc3QgeyBoZWFkZXJKc29uLCB2aXNpYmxlLCBicm93c2VyU2l6ZU1vZGUsIHRoZW1lLCBtYWluU2l6ZU1vZGUsIHBhZ2VDb250ZXh0LCBvbkhlaWdodENoYW5nZSB9ID0gcHJvcHNcblxuICBjb25zdCBoZWlnaHQgPSBoZWFkZXJKc29uLmhlaWdodFticm93c2VyU2l6ZU1vZGVdIHx8IGhlYWRlckpzb24uaGVpZ2h0W21haW5TaXplTW9kZV0gfHwgNTBcbiAgY29uc3QgbGF5b3V0ID0gaGVhZGVySnNvbi5sYXlvdXRcbiAgbGV0IGJhY2tncm91bmRJTWFnZTogc3RyaW5nXG4gIGlmIChoZWFkZXJKc29uLmJhY2tncm91bmRJTWFnZSkge1xuICAgIGlmICh0eXBlb2YgKGhlYWRlckpzb24uYmFja2dyb3VuZElNYWdlKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJhY2tncm91bmRJTWFnZSA9IGhlYWRlckpzb24uYmFja2dyb3VuZElNYWdlXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGhlYWRlckpzb24uYmFja2dyb3VuZElNYWdlKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGJhY2tncm91bmRJTWFnZSA9IGhlYWRlckpzb24uYmFja2dyb3VuZElNYWdlLnVybFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhlYWRlclN0eWxlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGRpc3BsYXk6ICR7dmlzaWJsZSA/ICdmbGV4JyA6ICdub25lJ307XG4gICAgICBwb3NpdGlvbjogJHtoZWFkZXJKc29uLnN0aWNreSA/ICdzdGlja3knIDogJ3JlbGF0aXZlJ307XG4gICAgICB6LWluZGV4OiAke2hlYWRlckpzb24uc3RpY2t5ID8gMiA6ICcwJ307XG4gICAgICB0b3A6IDA7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIG1pbi1oZWlnaHQ6ICR7TWF0aC5yb3VuZChwYXJzZUZsb2F0KGhlaWdodCBhcyBzdHJpbmcpKX1weDtcbiAgICAgIGhlaWdodDogYXV0bztcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2hlYWRlckpzb24uYmFja2dyb3VuZENvbG9yIHx8IHRoZW1lLmhlYWRlci5iZyB8fCAndHJhbnNwYXJlbnQnfTtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6ICR7YmFja2dyb3VuZElNYWdlfTtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246ICR7aGVhZGVySnNvbi5iYWNrZ3JvdW5kUG9zaXRpb259O1xuICAgICAgY29sb3I6ICR7dGhlbWU/LmhlYWRlcj8uY29sb3J9O1xuICAgICAgZmxleDogMCAwIGF1dG87XG4gICAgYFxuICB9LCBbXG4gICAgdmlzaWJsZSxcbiAgICBoZWlnaHQsXG4gICAgaGVhZGVySnNvbi5zdGlja3ksXG4gICAgaGVhZGVySnNvbi5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgYmFja2dyb3VuZElNYWdlLFxuICAgIGhlYWRlckpzb24uYmFja2dyb3VuZFBvc2l0aW9uLFxuICAgIHRoZW1lPy5oZWFkZXI/LmJnLFxuICAgIHRoZW1lPy5oZWFkZXI/LmNvbG9yXG4gIF0pXG5cbiAgY29uc3QgcGFnZUNvbnRleHRWYWx1ZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5wYWdlQ29udGV4dCxcbiAgICAgIHZpZXdPbmx5OiB0cnVlXG4gICAgfVxuICB9LCBbcGFnZUNvbnRleHRdKVxuXG4gIGNvbnN0IGhhbmRsZVNpemVDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoXywgaGVpZ2h0KSA9PiB7XG4gICAgb25IZWlnaHRDaGFuZ2UoaGVpZ2h0KVxuICB9LCBbb25IZWlnaHRDaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPFBhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtwYWdlQ29udGV4dFZhbHVlfT5cbiAgICAgIDxQYWdlVmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3Zpc2libGV9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naGVhZGVyJyBjc3M9e2hlYWRlclN0eWxlfT5cbiAgICAgICAgICA8TGF5b3V0RW50cnkgbGF5b3V0cz17bGF5b3V0fSBjbGFzc05hbWU9J3ctMTAwIGZsZXgtZ3Jvdy0xJyAvPlxuICAgICAgICAgIDxSZWFjdFJlc2l6ZURldGVjdG9yIGhhbmRsZUhlaWdodCBoYW5kbGVXaWR0aD17ZmFsc2V9IG9uUmVzaXplPXtoYW5kbGVTaXplQ2hhbmdlfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvUGFnZVZpc2liaWxpdHlDb250ZXh0LlByb3ZpZGVyPlxuICAgIDwvUGFnZUNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBQYWdlSnNvbixcbiAgRXh0ZW5zaW9uTWFuYWdlcixcbiAgZXh0ZW5zaW9uU3BlYyxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIEJyb3dzZXJTaXplTW9kZSxcbiAgTGF5b3V0VHlwZSxcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxuICB0eXBlIElNSGVhZGVySnNvbixcbiAgdHlwZSBJTUZvb3Rlckpzb24sXG4gIEFwcERpYWxvZyxcbiAgdHlwZSBJTURpYWxvZ0pzb24sXG4gIGdldEFwcFN0b3JlLFxuICBhcHBBY3Rpb25zLFxuICBLZXlib2FyZCxcbiAgamltdUhpc3RvcnksXG4gIGNyZWF0ZVNlbGVjdG9yXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCBGaXhlZExheW91dCBmcm9tICcuLi9maXhlZC1sYXlvdXQvcnVudGltZS9sYXlvdXQnXG5pbXBvcnQgeyBGbG93TGF5b3V0VHJhbnNmb3JtZXIgfSBmcm9tICcuLi9mbG93LWxheW91dC9sYXlvdXQtdHJhbnNmb3JtJ1xuaW1wb3J0IHsgUm93TGF5b3V0VHJhbnNmb3JtZXIgfSBmcm9tICcuLi9yb3ctbGF5b3V0L2xheW91dC10cmFuc2Zvcm0nXG5pbXBvcnQgeyBHcmlkTGF5b3V0VHJhbnNmb3JtZXIgfSBmcm9tICcuLi9ncmlkLWxheW91dC9sYXlvdXQtdHJhbnNmb3JtJ1xuaW1wb3J0IEZsb3dMYXlvdXQgZnJvbSAnLi4vZmxvdy1sYXlvdXQvcnVudGltZS9sYXlvdXQnXG5pbXBvcnQgR3JpZExheW91dCBmcm9tICcuLi9ncmlkLWxheW91dC9ydW50aW1lL2xheW91dCdcbmltcG9ydCBDb2x1bW5MYXlvdXQgZnJvbSAnLi4vY29sdW1uLWxheW91dC9ydW50aW1lL2xheW91dCdcbmltcG9ydCB7IFBhZ2VDb250ZXh0LCB0eXBlIFBhZ2VDb250ZXh0UHJvcHMgfSBmcm9tICcuLi9idWlsZGVyL3BhZ2UtY29udGV4dCdcbmltcG9ydCB7IHJlZ2lzdGVyTGF5b3V0Vmlld2VyIH0gZnJvbSAnLi4vbGF5b3V0LWZhY3RvcnknXG5pbXBvcnQgeyBQYWdlQm9keSB9IGZyb20gJy4vcGFnZS1ib2R5J1xuaW1wb3J0IHsgUGFnZUhlYWRlciB9IGZyb20gJy4vcGFnZS1oZWFkZXInXG5pbXBvcnQgeyBQYWdlRm9vdGVyIH0gZnJvbSAnLi9wYWdlLWZvb3RlcidcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgeyBQcmludFByZXZpZXdUb29sIH0gZnJvbSAnLi9wcmludC1wcmV2aWV3LXRvb2wnXG5cbnJlZ2lzdGVyTGF5b3V0Vmlld2VyKExheW91dFR5cGUuRml4ZWRMYXlvdXQsIEZpeGVkTGF5b3V0IGFzIGFueSlcbnJlZ2lzdGVyTGF5b3V0Vmlld2VyKExheW91dFR5cGUuRmxvd0xheW91dCwgRmxvd0xheW91dCBhcyBhbnkpXG5yZWdpc3RlckxheW91dFZpZXdlcihMYXlvdXRUeXBlLkdyaWRMYXlvdXQsIEdyaWRMYXlvdXQgYXMgYW55KVxucmVnaXN0ZXJMYXlvdXRWaWV3ZXIoTGF5b3V0VHlwZS5Db2x1bW5MYXlvdXQsIENvbHVtbkxheW91dCBhcyBhbnkpXG5cbmludGVyZmFjZSBQYWdlUHJvcHMge1xuICBkaWFsb2dJZD86IHN0cmluZ1xuICAvKipcbiAgICogc3RvcmUgcGFnZXMgdGhhdCBoYXZlIGJlZW4gcmVuZGVyZWRcbiAgICpcbiAgICogT25seSBvbmUgcGFnZSB3aWxsIGJlIHZpc2libGUsIGFsbCBvdGhlciBwYWdlcyB3aWxsIGJlIGhpZGRlblxuICAgKiAgKi9cbiAgcGFnZVN0YXR1czogSW1tdXRhYmxlT2JqZWN0PHsgW3BhZ2VJZDogc3RyaW5nXTogYm9vbGVhbiB9PlxufVxuXG5pbnRlcmZhY2UgU3RhdGVUb1Byb3BzIHtcbiAgcGFnZXM6IEltbXV0YWJsZU9iamVjdDx7IFtwYWdlSWQ6IHN0cmluZ106IFBhZ2VKc29uIH0+XG4gIGhlYWRlcjogSU1IZWFkZXJKc29uXG4gIGhlYWRlclZpc2libGU/OiBib29sZWFuXG4gIGZvb3RlcjogSU1Gb290ZXJKc29uXG4gIGZvb3RlclZpc2libGU/OiBib29sZWFuXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIG1haW5TaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4gIHNwbGFzaERpYWxvZ0pzb246IElNRGlhbG9nSnNvblxuICBpc1NwbGFzaENsb3NlZDogYm9vbGVhblxuICBwYWdlRGlhbG9nSWQ6IHN0cmluZ1xuICBwYWdlRGlhbG9nSnNvbjogSU1EaWFsb2dKc29uXG4gIGlzUGFnZURsZ0Nsb3NlZDogYm9vbGVhblxuICB1cmxEaWFsb2dKc29uOiBJTURpYWxvZ0pzb25cbiAgaXNQcmludFByZXZpZXc6IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXJcbiAgZm9vdGVySGVpZ2h0OiBudW1iZXJcbn1cblxuY2xhc3MgUGFnZVJlbmRlcmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQYWdlUHJvcHMgJiBTdGF0ZVRvUHJvcHMgJiB7IHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzIH0sIFN0YXRlPiB7XG4gIHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdSdW50aW1lUGFnZVJlbmRlcmVyJ1xuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRQcm9wc1xuICBwYWdlUmVmOiBIVE1MRWxlbWVudFxuICBrZXlCaW5kaW5nczogeyBba2V5OiBzdHJpbmddOiBhbnkgfVxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc3RhdGUgPSB7IGhlYWRlckhlaWdodDogMCwgZm9vdGVySGVpZ2h0OiAwIH1cbiAgICBFeHRlbnNpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkucmVnaXN0ZXJFeHRlbnNpb24oe1xuICAgICAgZXBOYW1lOiBleHRlbnNpb25TcGVjLkV4dGVuc2lvblBvaW50cy5MYXlvdXRUcmFuc2Zvcm1lcixcbiAgICAgIGV4dGVuc2lvbjogbmV3IEZsb3dMYXlvdXRUcmFuc2Zvcm1lcigpXG4gICAgfSlcbiAgICBFeHRlbnNpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkucmVnaXN0ZXJFeHRlbnNpb24oe1xuICAgICAgZXBOYW1lOiBleHRlbnNpb25TcGVjLkV4dGVuc2lvblBvaW50cy5MYXlvdXRUcmFuc2Zvcm1lcixcbiAgICAgIGV4dGVuc2lvbjogbmV3IFJvd0xheW91dFRyYW5zZm9ybWVyKClcbiAgICB9KVxuICAgIEV4dGVuc2lvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlckV4dGVuc2lvbih7XG4gICAgICBlcE5hbWU6IGV4dGVuc2lvblNwZWMuRXh0ZW5zaW9uUG9pbnRzLkxheW91dFRyYW5zZm9ybWVyLFxuICAgICAgZXh0ZW5zaW9uOiBuZXcgR3JpZExheW91dFRyYW5zZm9ybWVyKClcbiAgICB9KVxuICAgIC8vIHRoZXNlIHNldHRpbmdzIHdpbGwgbm90IGNoYW5nZSBkdXJpbmcgcnVudGltZVxuICAgIHRoaXMucGFnZUNvbnRleHQgPSB7XG4gICAgICB0aGVtZTogdGhpcy5wcm9wcy50aGVtZVxuICAgIH0gYXMgUGFnZUNvbnRleHRQcm9wc1xuXG4gICAgaWYgKCF3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXIpIHtcbiAgICAgIGlmICh0aGlzLmlzTWFjKCkpIHtcbiAgICAgICAgdGhpcy5rZXlCaW5kaW5ncyA9IHtcbiAgICAgICAgICAnY29tbWFuZCtrZXlwJzogdGhpcy5oYW5kbGVQcmludEV2ZW50XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMua2V5QmluZGluZ3MgPSB7XG4gICAgICAgICAgJ2N0cmwra2V5cCc6IHRoaXMuaGFuZGxlUHJpbnRFdmVudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlSGVhZGVySGVpZ2h0ID0gKGhlaWdodCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJIZWlnaHQ6IGhlaWdodCB9KVxuICB9XG5cbiAgdXBkYXRlRm9vdGVySGVpZ2h0ID0gKGhlaWdodCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBmb290ZXJIZWlnaHQ6IGhlaWdodCB9KVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFBhZ2VQcm9wcykge1xuICAgIGNvbnN0IHByZXZpb3VzUGFnZUlkID0gZ2V0VmlzaWJsZVBhZ2VJZChwcmV2UHJvcHMucGFnZVN0YXR1cylcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gZ2V0VmlzaWJsZVBhZ2VJZCh0aGlzLnByb3BzLnBhZ2VTdGF0dXMpXG4gICAgaWYgKHByZXZpb3VzUGFnZUlkICE9PSBjdXJyZW50UGFnZUlkKSB7XG4gICAgICBjb25zdCBodG1sTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF1cbiAgICAgIGh0bWxOb2RlLnNjcm9sbFRvcCA9IDBcbiAgICB9XG4gIH1cblxuICBpc01hYyA9ICgpID0+IHtcbiAgICByZXR1cm4gd2luZG93LmppbXVVQT8ub3M/Lm5hbWUgPT09ICdtYWNPUydcbiAgfVxuXG4gIGhhbmRsZVByaW50RXZlbnQgKGUpIHtcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuYWN0aXZlUHJpbnRQcmV2aWV3KCkpXG4gICAgamltdUhpc3RvcnkuY2hhbmdlUXVlcnlPYmplY3QoeyBwcmludF9wcmV2aWV3OiBTdHJpbmcodHJ1ZSkgfSlcbiAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWVcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgcGFnZVN0YXR1cywgcGFnZXMsIHRoZW1lLCBpc1ByaW50UHJldmlldyB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3QgdmlzaWJsZVBhZ2VJZCA9IGdldFZpc2libGVQYWdlSWQocGFnZVN0YXR1cylcbiAgICBpZiAoIXZpc2libGVQYWdlSWQgfHwgIXBhZ2VzPy5bdmlzaWJsZVBhZ2VJZF0pIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgbGV0IHdpZHRoOiBzdHJpbmcgfCBudW1iZXIgPSAnMTAwJSdcbiAgICBjb25zdCBwYWdlSnNvbjogYW55ID0gcGFnZXNbdmlzaWJsZVBhZ2VJZF0gfHwge31cbiAgICBpZiAocGFnZUpzb24gJiYgIWlzTmFOKCtwYWdlSnNvbi53aWR0aCkpIHtcbiAgICAgIHdpZHRoID0gYCR7K3BhZ2VKc29uLndpZHRofXB4YFxuICAgIH1cbiAgICBjb25zdCBtZXJnZWRTdHlsZSA9IGNzc2BcbiAgICAgIHdpZHRoOiAke3dpZHRofTtcbiAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgbWluLWhlaWdodDogMTAwJTtcbiAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtwYWdlSnNvbiAmJiBwYWdlSnNvbi5iYWNrZ3JvdW5kQ29sb3J9O1xuXG4gICAgICBodG1sLnNjcm9sbGFibGUgJiB7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgb3ZlcmZsb3c6IHVuc2V0O1xuICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDtcbiAgICAgIH1cbiAgICBgXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J3BhZ2UtcmVuZGVyZXIgZC1mbGV4IGZsZXgtY29sdW1uJyBjc3M9e21lcmdlZFN0eWxlfSByZWY9e2VsID0+IHsgdGhpcy5wYWdlUmVmID0gZWwgfX0gZGF0YS10ZXN0aWQ9J3BhZ2VSZW5kZXJlcic+XG4gICAgICAgIHtpc1ByaW50UHJldmlldyAmJiAoXG4gICAgICAgICAgPFByaW50UHJldmlld1Rvb2wgLz5cbiAgICAgICAgKX1cbiAgICAgICAge3RoaXMucmVuZGVyRGlhbG9nKCl9XG4gICAgICAgIHt0aGlzLnJlbmRlckhlYWRlcigpfVxuICAgICAgICB7T2JqZWN0LmtleXMocGFnZVN0YXR1cykubWFwKHBJZCA9PiB0aGlzLnJlbmRlclBhZ2VCb2R5KHBJZCwgdGhlbWUpKX1cbiAgICAgICAge3RoaXMucmVuZGVyRm9vdGVyKCl9XG4gICAgICAgIDxLZXlib2FyZCBiaW5kaW5ncz17dGhpcy5rZXlCaW5kaW5nc30gLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHJlbmRlckhlYWRlciAoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmhlYWRlcikge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgeyBoZWFkZXIsIGhlYWRlclZpc2libGUsIGJyb3dzZXJTaXplTW9kZSwgdGhlbWUsIG1haW5TaXplTW9kZSB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlSGVhZGVyXG4gICAgICAgIGhlYWRlckpzb249e2hlYWRlcn1cbiAgICAgICAgcGFnZUNvbnRleHQ9e3RoaXMucGFnZUNvbnRleHR9XG4gICAgICAgIHZpc2libGU9e2hlYWRlclZpc2libGV9XG4gICAgICAgIGJyb3dzZXJTaXplTW9kZT17YnJvd3NlclNpemVNb2RlfVxuICAgICAgICBtYWluU2l6ZU1vZGU9e21haW5TaXplTW9kZX1cbiAgICAgICAgdGhlbWU9e3RoZW1lfVxuICAgICAgICBvbkhlaWdodENoYW5nZT17dGhpcy51cGRhdGVIZWFkZXJIZWlnaHR9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIHJlbmRlckZvb3RlciAoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmZvb3Rlcikge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3QgeyBmb290ZXIsIGZvb3RlclZpc2libGUsIGJyb3dzZXJTaXplTW9kZSwgbWFpblNpemVNb2RlLCB0aGVtZSB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlRm9vdGVyXG4gICAgICAgIGZvb3Rlckpzb249e2Zvb3Rlcn1cbiAgICAgICAgcGFnZUNvbnRleHQ9e3RoaXMucGFnZUNvbnRleHR9XG4gICAgICAgIHZpc2libGU9e2Zvb3RlclZpc2libGV9XG4gICAgICAgIGJyb3dzZXJTaXplTW9kZT17YnJvd3NlclNpemVNb2RlfVxuICAgICAgICBtYWluU2l6ZU1vZGU9e21haW5TaXplTW9kZX1cbiAgICAgICAgdGhlbWU9e3RoZW1lfVxuICAgICAgICBvbkhlaWdodENoYW5nZT17dGhpcy51cGRhdGVGb290ZXJIZWlnaHR9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIHJlbmRlclBhZ2VCb2R5IChyZW5kZXJlZFBhZ2VJZDogc3RyaW5nLCB0aGVtZTogSU1UaGVtZVZhcmlhYmxlcykge1xuICAgIGNvbnN0IHsgcGFnZVN0YXR1cywgcGFnZXMsIGlzUHJpbnRQcmV2aWV3IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgcGFnZUpzb24gPSBwYWdlc1tyZW5kZXJlZFBhZ2VJZF1cbiAgICBpZiAoIXBhZ2VKc29uKSB7XG4gICAgICAvLyBwYWdlIGlzIHJlbW92ZWRcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHZpc2libGUgPSAhIXBhZ2VTdGF0dXNbcmVuZGVyZWRQYWdlSWRdXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlQm9keVxuICAgICAgICBrZXk9e3BhZ2VKc29uLmlkfVxuICAgICAgICBwYWdlSnNvbj17cGFnZUpzb259XG4gICAgICAgIHBhZ2VDb250ZXh0PXt0aGlzLnBhZ2VDb250ZXh0fVxuICAgICAgICBicm93c2VyU2l6ZU1vZGU9e3RoaXMucHJvcHMuYnJvd3NlclNpemVNb2RlfVxuICAgICAgICB2aXNpYmxlPXt2aXNpYmxlfVxuICAgICAgICBpc1ByaW50UHJldmlldz17aXNQcmludFByZXZpZXd9XG4gICAgICAgIGhlYWRlckZvb3RlckhlaWdodD17dGhpcy5zdGF0ZS5oZWFkZXJIZWlnaHQgKyB0aGlzLnN0YXRlLmZvb3RlckhlaWdodH1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyRGlhbG9nICgpIHtcbiAgICBjb25zdCB7IGRpYWxvZ0lkLCB1cmxEaWFsb2dKc29uLCBzcGxhc2hEaWFsb2dKc29uLCBpc1NwbGFzaENsb3NlZCwgaXNQYWdlRGxnQ2xvc2VkLCBwYWdlRGlhbG9nSnNvbiwgcGFnZURpYWxvZ0lkIH0gPSB0aGlzLnByb3BzXG4gICAgcmV0dXJuIChcbiAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAge3VybERpYWxvZ0pzb24gJiYgKFxuICAgICAgICAgIDxQYWdlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17e1xuICAgICAgICAgICAgLi4udGhpcy5wYWdlQ29udGV4dCxcbiAgICAgICAgICAgIGRpYWxvZ0lkOiBkaWFsb2dJZCxcbiAgICAgICAgICAgIHZpZXdPbmx5OiB0cnVlXG4gICAgICAgICAgICAvLyB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEFwcERpYWxvZyBkaWFsb2dKc29uPXt1cmxEaWFsb2dKc29ufSBydW50aW1lIC8+XG4gICAgICAgICAgPC9QYWdlQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgKX1cblxuICAgICAgICB7IWlzUGFnZURsZ0Nsb3NlZCAmJiBwYWdlRGlhbG9nSnNvbiAmJiB1cmxEaWFsb2dKc29uPy5pZCAhPT0gcGFnZURpYWxvZ0pzb24uaWQgJiYgKFxuICAgICAgICAgIDxQYWdlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17e1xuICAgICAgICAgICAgLi4udGhpcy5wYWdlQ29udGV4dCxcbiAgICAgICAgICAgIGRpYWxvZ0lkOiBwYWdlRGlhbG9nSWQsXG4gICAgICAgICAgICB2aWV3T25seTogdHJ1ZVxuICAgICAgICAgICAgLy8gdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxBcHBEaWFsb2cgZGlhbG9nSnNvbj17cGFnZURpYWxvZ0pzb259IHJ1bnRpbWUgaXNPcGVuQnlQYWdlIC8+XG4gICAgICAgICAgPC9QYWdlQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgKX1cblxuICAgICAgICB7IWlzU3BsYXNoQ2xvc2VkICYmIHNwbGFzaERpYWxvZ0pzb24gJiYgdXJsRGlhbG9nSnNvbj8uaWQgIT09IHNwbGFzaERpYWxvZ0pzb24uaWQgJiYgKFxuICAgICAgICAgIDxQYWdlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17e1xuICAgICAgICAgICAgLi4udGhpcy5wYWdlQ29udGV4dCxcbiAgICAgICAgICAgIGRpYWxvZ0lkOiBzcGxhc2hEaWFsb2dKc29uLmlkLFxuICAgICAgICAgICAgdmlld09ubHk6IHRydWVcbiAgICAgICAgICAgIC8vIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8QXBwRGlhbG9nIGRpYWxvZ0pzb249e3NwbGFzaERpYWxvZ0pzb259IHJ1bnRpbWUgLz5cbiAgICAgICAgICA8L1BhZ2VDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICApfVxuXG4gICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgIClcbiAgfVxufVxuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHM6IChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IFBhZ2VQcm9wcykgPT4gU3RhdGVUb1Byb3BzID0gY3JlYXRlU2VsZWN0b3IoW1xuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcENvbmZpZy5wYWdlcyxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBDb25maWcuZGlhbG9ncyxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBDb25maWcuaGVhZGVyLFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcENvbmZpZy5mb290ZXIsXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYnJvd3NlclNpemVNb2RlLFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGUsXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHJlYWxTdGF0ZSA9IHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlciA/IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyIDogc3RhdGVcbiAgICByZXR1cm4gcmVhbFN0YXRlPy5hcHBSdW50aW1lSW5mbz8uZGlhbG9nSW5mb3NcbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgcmVhbFN0YXRlID0gd2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyID8gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXIgOiBzdGF0ZVxuICAgIHJldHVybiByZWFsU3RhdGU/LmFwcFJ1bnRpbWVJbmZvPy5jdXJyZW50UGFnZUlkXG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHJlYWxTdGF0ZSA9IHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlciA/IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyIDogc3RhdGVcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gcmVhbFN0YXRlPy5hcHBSdW50aW1lSW5mbz8uY3VycmVudFBhZ2VJZFxuICAgIHJldHVybiByZWFsU3RhdGU/LmFwcENvbmZpZz8ucGFnZXNbY3VycmVudFBhZ2VJZF0/LmF1dG9PcGVuRGlhbG9nSWRcbiAgfSxcbiAgKHN0YXRlOiBJTVN0YXRlKSA9PiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uaXNQcmludFByZXZpZXcgPz8gZmFsc2UsXG4gIChfLCBvd25Qcm9wczogUGFnZVByb3BzKSA9PiBnZXRWaXNpYmxlUGFnZUlkKG93blByb3BzLnBhZ2VTdGF0dXMpLFxuICAoXywgb3duUHJvcHM6IFBhZ2VQcm9wcykgPT4gb3duUHJvcHMuZGlhbG9nSWRcbl0sIChwYWdlcywgZGlhbG9ncywgaGVhZGVyLCBmb290ZXIsIGJyb3dzZXJTaXplTW9kZSwgbWFpblNpemVNb2RlLCBkaWFsb2dJbmZvcywgY3VycmVudFBhZ2VJZCwgcGFnZURsZ0lkLCBpc1ByaW50UHJldmlldywgcGFnZUlkLCBkaWFsb2dJZCkgPT4ge1xuICBpZiAoIXBhZ2VJZCB8fCAhcGFnZXNbcGFnZUlkXSkge1xuICAgIHJldHVybiB7fSBhcyBhbnlcbiAgfVxuXG4gIGNvbnN0IHNwbGFzaERsZ0pzb24gPSBkaWFsb2dzW09iamVjdC5rZXlzKGRpYWxvZ3MpLmZpbmQoZGxnSWQgPT4gZGlhbG9nc1tkbGdJZF0uaXNTcGxhc2gpXVxuICByZXR1cm4ge1xuICAgIHBhZ2VzOiBwYWdlcyxcbiAgICBoZWFkZXI6IGhlYWRlcixcbiAgICBoZWFkZXJWaXNpYmxlOiAhIXBhZ2VzW3BhZ2VJZF0uaGVhZGVyLFxuICAgIGZvb3RlcjogZm9vdGVyLFxuICAgIGZvb3RlclZpc2libGU6ICEhcGFnZXNbcGFnZUlkXS5mb290ZXIsXG4gICAgYnJvd3NlclNpemVNb2RlOiBicm93c2VyU2l6ZU1vZGUsXG4gICAgbWFpblNpemVNb2RlOiBtYWluU2l6ZU1vZGUsXG4gICAgc3BsYXNoRGlhbG9nSnNvbjogc3BsYXNoRGxnSnNvbixcbiAgICBpc1NwbGFzaENsb3NlZDogZGlhbG9nSW5mb3M/LltzcGxhc2hEbGdKc29uPy5pZF0/LmlzQ2xvc2VkLFxuICAgIHBhZ2VEaWFsb2dJZDogcGFnZURsZ0lkLFxuICAgIHBhZ2VEaWFsb2dKc29uOiBkaWFsb2dzW3BhZ2VEbGdJZF0sXG4gICAgaXNQYWdlRGxnQ2xvc2VkOiBkaWFsb2dJbmZvcz8uW2N1cnJlbnRQYWdlSWQgKyAnLScgKyBwYWdlRGxnSWRdPy5pc0Nsb3NlZCxcbiAgICB1cmxEaWFsb2dKc29uOiBkaWFsb2dzW2RpYWxvZ0lkXSxcbiAgICBpc1ByaW50UHJldmlld1xuICB9XG59KVxuXG5mdW5jdGlvbiBnZXRWaXNpYmxlUGFnZUlkIChwYWdlU3RhdHVzOiBJbW11dGFibGVPYmplY3Q8eyBbcGFnZUlkOiBzdHJpbmddOiBib29sZWFuIH0+KTogc3RyaW5nIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhZ2VTdGF0dXMpLmZpbmQocGlkID0+IHBhZ2VTdGF0dXNbcGlkXSlcbn1cblxuLy8gY29ubmVjdDxJTWFwU3RhdGVUb1Byb3BzLCBJTWFwRGlzcGF0Y2hUb1Byb3BzLCBJQ29tcFByb3BzLCBJUmVkdXhTdGF0ZT4obWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpXG5leHBvcnQgZGVmYXVsdCBSZWFjdFJlZHV4LmNvbm5lY3Q8U3RhdGVUb1Byb3BzLCB1bmtub3duLCBQYWdlUHJvcHM+KG1hcFN0YXRlVG9Qcm9wcykod2l0aFRoZW1lKFBhZ2VSZW5kZXJlcikpXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgZ2V0QXBwU3RvcmUsIGFwcEFjdGlvbnMsIGkxOG4sIGppbXVIaXN0b3J5LCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IENsb3NlT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9jbG9zZSdcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBkaXNwbGF5OiBmbGV4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWRhcmstNzAwKTtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB6LWluZGV4OiAxNTAwO1xuXG4gIC5qaW11LWJ0biB7XG4gICAgcGFkZGluZy1sZWZ0OiAycmVtO1xuICAgIHBhZGRpbmctcmlnaHQ6IDJyZW07XG4gIH1cblxuICAubGFiZWwge1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIH1cblxuICBAbWVkaWEgcHJpbnQge1xuICAgICYge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFByaW50UHJldmlld1Rvb2wgKCkge1xuICBjb25zdCBpbnRsID0gaTE4bi5nZXRJbnRsKClcbiAgY29uc3QgYnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50PigpXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBidG5SZWYuY3VycmVudC5mb2N1cygpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGZvcm1hdE1lc3NhZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZCB9KVxuICB9LCBbaW50bF0pXG5cbiAgY29uc3QgaGFuZGxlQ2xvc2UgPSBob29rcy51c2VFdmVudENhbGxiYWNrKCgpID0+IHtcbiAgICBqaW11SGlzdG9yeS5jaGFuZ2VRdWVyeU9iamVjdCh7IHByaW50X3ByZXZpZXc6IG51bGwgfSlcbiAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMucXVpdFByaW50UHJldmlldygpKVxuICB9KVxuXG4gIGNvbnN0IGludm9rZUJyb3dzZXJQcmludCA9IGhvb2tzLnVzZUV2ZW50Q2FsbGJhY2soKCkgPT4ge1xuICAgIHdpbmRvdy5wcmludCgpXG4gIH0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbnQtcHJldmlldy10b29sIHNoYWRvdy1sZycgY3NzPXtzdHlsZX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyIGZsZXgtZ3Jvdy0xJz5cbiAgICAgICAgPEJ1dHRvbiByZWY9e2J0blJlZn0gYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZSgncHJpbnRDdXJyZW50UGFnZScpfSB0eXBlPSdwcmltYXJ5JyBvbkNsaWNrPXtpbnZva2VCcm93c2VyUHJpbnR9PlxuICAgICAgICAgIHtmb3JtYXRNZXNzYWdlKCdwcmludEN1cnJlbnRQYWdlJyl9XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtYXV0bycgaWNvbiB0eXBlPSd0ZXJ0aWFyeScgYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZSgnY2xvc2UnKX0gb25DbGljaz17aGFuZGxlQ2xvc2V9PlxuICAgICAgICA8Q2xvc2VPdXRsaW5lZCBjb2xvcj0ndmFyKC0td2hpdGUpJy8+XG4gICAgICA8L0J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAgZ2V0QXBwU3RvcmUsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgQXBwTW9kZSxcbiAgYXBwQWN0aW9ucyxcbiAgdHlwZSBTZWN0aW9uTmF2SW5mb1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQge1xuICBERUZBVUxUX0FVVE9QTEFZX0lOVEVSVkFMXG59IGZyb20gJy4uL3R5cGVzJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBzZWN0aW9uSWQ6IHN0cmluZ1xuICBhdXRvUGxheTogYm9vbGVhblxuICBpbnRlcnZhbDogbnVtYmVyXG4gIGxvb3A6IGJvb2xlYW5cbn1cblxuZnVuY3Rpb24gbmV4dFZpZXcgKHNlY3Rpb25JZDogc3RyaW5nLCBsb29wOiBib29sZWFuKTogYm9vbGVhbiB7XG4gIGNvbnN0IHN0YXRlID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gIGNvbnN0IHZpZXdzID0gc3RhdGUuYXBwQ29uZmlnLnNlY3Rpb25zW3NlY3Rpb25JZF0udmlld3NcbiAgbGV0IG5hdkluZm8gPSBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uc2VjdGlvbk5hdkluZm9zPy5bc2VjdGlvbklkXVxuICBjb25zdCBjdXJyZW50SW5kZXggPSBuYXZJbmZvPy5jdXJyZW50Vmlld0lkID8gdmlld3MuaW5kZXhPZihuYXZJbmZvLmN1cnJlbnRWaWV3SWQpIDogMFxuXG4gIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCA8IHZpZXdzLmxlbmd0aCAtIDEgPyBjdXJyZW50SW5kZXggKyAxIDogMFxuICBpZiAoIWxvb3AgJiYgbmV4dEluZGV4ID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgLy8gZG8gbm90IGNoYW5nZSBxdWVyeU9iamVjdCB3aGVuIGl0IGlzIGF1dG8gcGxheWluZ1xuICBpZiAobmF2SW5mbykge1xuICAgIG5hdkluZm8gPSBuYXZJbmZvLnNldCgncHJldmlvdXNWaWV3SWQnLCB2aWV3c1tjdXJyZW50SW5kZXhdKS5zZXQoJ2N1cnJlbnRWaWV3SWQnLCB2aWV3c1tuZXh0SW5kZXhdKVxuICB9IGVsc2Uge1xuICAgIG5hdkluZm8gPSB7XG4gICAgICBwcmV2aW91c1ZpZXdJZDogdmlld3NbY3VycmVudEluZGV4XSxcbiAgICAgIGN1cnJlbnRWaWV3SWQ6IHZpZXdzW25leHRJbmRleF1cbiAgICB9IGFzIGFueVxuICB9XG4gIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWN0aW9uTmF2SW5mb0NoYW5nZWQoc2VjdGlvbklkLCBuYXZJbmZvIGFzIHVua25vd24gYXMgU2VjdGlvbk5hdkluZm8pKVxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXV0b1BsYXkgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7XG4gICAgc2VjdGlvbklkLFxuICAgIGF1dG9QbGF5LFxuICAgIGludGVydmFsID0gREVGQVVMVF9BVVRPUExBWV9JTlRFUlZBTCxcbiAgICBsb29wID0gZmFsc2VcbiAgfSA9IHByb3BzXG4gIGNvbnN0IHBsYXlIYW5kbGVyUmVmID0gUmVhY3QudXNlUmVmPGFueT4oKVxuXG4gIC8vIGNvbnN0IFtpc1BsYXlpbmcsIHNldElzUGxheWluZ10gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPigpO1xuICBjb25zdCBpc0F1dG9wbGF5U3VzcGVuZE1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGlmICghYXV0b1BsYXkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBzdGF0ZS5hcHBSdW50aW1lSW5mbz8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ24gfHwgc3RhdGUuYXBwUnVudGltZUluZm8/LmlzUHJpbnRQcmV2aWV3XG4gIH0pXG4gIGNvbnN0IG1vZGVSZWYgPSBSZWFjdC51c2VSZWYoaXNBdXRvcGxheVN1c3BlbmRNb2RlKVxuXG4gIGNvbnN0IHN0b3BQbGF5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4geyAvLyBubyBob29rcyB2YXJpYWJsZSB1c2VkXG4gICAgaWYgKHBsYXlIYW5kbGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwocGxheUhhbmRsZXJSZWYuY3VycmVudClcbiAgICAgIHBsYXlIYW5kbGVyUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBzdGFydFBsYXkgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc3RvcFBsYXkoKSAvLyBzdG9wIHByZXZpb3VzIGF1dG8gcGxheVxuICAgIHBsYXlIYW5kbGVyUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBjb25zdCBjb250aW51ZWQgPSBuZXh0VmlldyhzZWN0aW9uSWQsIGxvb3ApXG4gICAgICBpZiAoIWNvbnRpbnVlZCkge1xuICAgICAgICBzdG9wUGxheSgpXG4gICAgICB9XG4gICAgfSwgaW50ZXJ2YWwgKiAxMDAwKVxuICB9LCBbc2VjdGlvbklkLCBsb29wLCBpbnRlcnZhbCwgc3RvcFBsYXldKVxuXG4gIC8vIGF1dG8gcGxheSBwcm9wcyBjaGFuZ2UgYWZmZWN0c1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbW9kZVJlZi5jdXJyZW50KSB7XG4gICAgICBpZiAoIWF1dG9QbGF5KSB7XG4gICAgICAgIHN0b3BQbGF5KClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBzdGFydFBsYXkoKVxuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3RvcFBsYXkoKVxuICAgIH1cbiAgfSwgW2F1dG9QbGF5LCBpbnRlcnZhbCwgbG9vcCwgc3RvcFBsYXksIHN0YXJ0UGxheV0pXG5cbiAgLy8gaXNEZXNpZ25Nb2RlIGNoYW5nZSBhZmZlY3RzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG1vZGVSZWYuY3VycmVudCAhPT0gaXNBdXRvcGxheVN1c3BlbmRNb2RlICYmIGlzQXV0b3BsYXlTdXNwZW5kTW9kZSAhPT0gbnVsbCkge1xuICAgICAgbW9kZVJlZi5jdXJyZW50ID0gaXNBdXRvcGxheVN1c3BlbmRNb2RlXG4gICAgICBpZiAoaXNBdXRvcGxheVN1c3BlbmRNb2RlKSB7XG4gICAgICAgIHN0b3BQbGF5KClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoYXV0b1BsYXkpIHtcbiAgICAgICAgc3RhcnRQbGF5KClcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpc0F1dG9wbGF5U3VzcGVuZE1vZGUsIHN0YXJ0UGxheSwgc3RvcFBsYXksIGF1dG9QbGF5XSlcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgQW5pbWF0aW9uQ29udGV4dCxcbiAgQW5pbWF0aW9uUGxheU1vZGUsXG4gIFRyYW5zaXRpb25Db250YWluZXIsXG4gIHR5cGUgVHJhbnNpdGlvblR5cGUsXG4gIHR5cGUgVHJhbnNpdGlvbkRpcmVjdGlvbixcbiAgdHlwZSBJTVNlY3Rpb25OYXZJbmZvLFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICB0eXBlIElNU3RhdGUsXG4gIEFwcE1vZGUsXG4gIEFuaW1hdGlvblR5cGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHtcbiAgdHlwZSBMYXlvdXRQcm9wc1xufSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IFZpZXdDb250ZW50IH0gZnJvbSAnLi92aWV3LWNvbnRlbnQnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHZpZXdzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XG4gIG5hdkluZm86IElNU2VjdGlvbk5hdkluZm9cbiAgYW5pbWF0aW9uUHJldmlldzogYm9vbGVhblxuICBwbGF5TW9kZTogQW5pbWF0aW9uUGxheU1vZGVcbiAgY3VycmVudEluZGV4OiBudW1iZXJcbiAgcHJldmlvdXNJbmRleDogbnVtYmVyXG4gIHByb2dyZXNzOiBudW1iZXJcbiAgbG9vcDogYm9vbGVhblxuICB2aWV3VHJhbnNpdGlvbjogeyB0eXBlOiBUcmFuc2l0aW9uVHlwZSwgZGlyZWN0aW9uOiBUcmFuc2l0aW9uRGlyZWN0aW9uIH1cbiAgbGF5b3V0RW50cnlDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudENsYXNzPExheW91dFByb3BzPlxuICB2aWV3VmlzaWJpbGl0eUNvbnRleHQ6IFJlYWN0LkNvbXBvbmVudENsYXNzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWN0aW9uQ29udGVudCAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgdmlld3MsIG5hdkluZm8sIGFuaW1hdGlvblByZXZpZXcsIHBsYXlNb2RlLCBjdXJyZW50SW5kZXgsIHByZXZpb3VzSW5kZXgsIHByb2dyZXNzLCBsb29wLCB2aWV3VHJhbnNpdGlvbiB9ID0gcHJvcHNcbiAgY29uc3QgaXNQcmV2aWV3T25lQnlPbmUgPSBhbmltYXRpb25QcmV2aWV3ICYmIHBsYXlNb2RlID09PSBBbmltYXRpb25QbGF5TW9kZS5PbmVCeU9uZVxuICBjb25zdCB7IHNldHRpbmcsIHBsYXlJZCB9ID0gUmVhY3QudXNlQ29udGV4dChBbmltYXRpb25Db250ZXh0KVxuICBjb25zdCBpc0Rlc2lnbk1vZGUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGlmICghc2V0dGluZyB8fCBzZXR0aW5nLnR5cGUgPT09IEFuaW1hdGlvblR5cGUuTm9uZSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxuICB9KVxuICAvLyBpc0Rlc2lnbk1vZGUgPT09IGZhbHNlXG4gIGNvbnN0IGFuaW1hdGlvblNldHRpbmcgPSAhaXNEZXNpZ25Nb2RlIHx8IGlzUHJldmlld09uZUJ5T25lIHx8IChuYXZJbmZvPy5wbGF5SWQgJiYgbmF2SW5mbz8ud2l0aE9uZUJ5T25lKSA/IHNldHRpbmcgOiBudWxsXG4gIGNvbnN0IGFuaW1hdGlvbkNvbnRleHQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gdHJpZ2dlcjogQW5pbWF0aW9uVHJpZ2dlclR5cGUuTWFudWFsLFxuICAgICAgc2V0dGluZzogYW5pbWF0aW9uU2V0dGluZyxcbiAgICAgIHBsYXlJZDogaXNQcmV2aWV3T25lQnlPbmUgPyBwbGF5SWQgOiBudWxsXG4gICAgICAvLyBpbmhlcml0ZWRPbmVCeU9uZVNldHRpbmc6IG51bGwsXG4gICAgICAvLyBkZXB0aDogZGVwdGggKyAxLFxuICAgICAgLy8gb25BbmltYXRpb25FbmRcbiAgICB9XG4gIH0sIFthbmltYXRpb25TZXR0aW5nLCBpc1ByZXZpZXdPbmVCeU9uZSwgcGxheUlkXSlcblxuICByZXR1cm4gKFxuICAgIDxBbmltYXRpb25Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXthbmltYXRpb25Db250ZXh0fT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZWN0aW9uLWNvbnRlbnQnPlxuICAgICAgICA8VHJhbnNpdGlvbkNvbnRhaW5lclxuICAgICAgICAgIHVzZVByb2dyZXNzPXtuYXZJbmZvPy51c2VQcm9ncmVzcyA/PyBmYWxzZX1cbiAgICAgICAgICB1c2VTdGVwPXtuYXZJbmZvPy51c2VTdGVwID8/IGZhbHNlfVxuICAgICAgICAgIHByZXZpb3VzSW5kZXg9e3ByZXZpb3VzSW5kZXh9XG4gICAgICAgICAgY3VycmVudEluZGV4PXtjdXJyZW50SW5kZXh9XG4gICAgICAgICAgcHJvZ3Jlc3M9e3Byb2dyZXNzfVxuICAgICAgICAgIHRyYW5zaXRpb25UeXBlPXt2aWV3VHJhbnNpdGlvbj8udHlwZX1cbiAgICAgICAgICBkaXJlY3Rpb249e3ZpZXdUcmFuc2l0aW9uPy5kaXJlY3Rpb259XG4gICAgICAgICAgcGxheUlkPXtuYXZJbmZvPy5wbGF5SWR9XG4gICAgICAgICAgd2l0aE9uZUJ5T25lPXtuYXZJbmZvPy53aXRoT25lQnlPbmV9XG4gICAgICAgICAgbG9vcD17bG9vcH1cbiAgICAgICAgPlxuICAgICAgICAgIHt2aWV3cy5tYXAoKHZpZXdJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSB2aWV3SWQgPT09IHZpZXdzW2N1cnJlbnRJbmRleF1cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxWaWV3Q29udGVudFxuICAgICAgICAgICAgICAgIGtleT17dmlld0lkfVxuICAgICAgICAgICAgICAgIHZpZXdJZD17dmlld0lkfVxuICAgICAgICAgICAgICAgIGlzQWN0aXZlPXtpc0FjdGl2ZX1cbiAgICAgICAgICAgICAgICBsYXlvdXRFbnRyeUNvbXBvbmVudD17cHJvcHMubGF5b3V0RW50cnlDb21wb25lbnR9XG4gICAgICAgICAgICAgICAgdmlld1Zpc2liaWxpdHlDb250ZXh0PXtwcm9wcy52aWV3VmlzaWJpbGl0eUNvbnRleHR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvVHJhbnNpdGlvbkNvbnRhaW5lcj5cbiAgICAgIDwvZGl2PlxuICAgIDwvQW5pbWF0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgY2xhc3NOYW1lc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMZWZ0T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2xlZnQnXG5pbXBvcnQgeyBSaWdodE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodCdcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgc2VjdGlvbklkOiBzdHJpbmdcbiAgY3VycmVudEluZGV4OiBudW1iZXJcbiAgbnVtT2ZWaWV3czogbnVtYmVyXG4gIG9uQ3VycmVudFZpZXdDaGFuZ2U6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWN0aW9uTmF2IChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBzZWN0aW9uSWQsIGN1cnJlbnRJbmRleCwgbnVtT2ZWaWV3cywgb25DdXJyZW50Vmlld0NoYW5nZSB9ID0gcHJvcHNcbiAgY29uc3QgYXJyb3dzTmF2ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLnNlY3Rpb25zW3NlY3Rpb25JZF0/LmFycm93c05hdlxuICB9KVxuICBjb25zdCBkb3RzTmF2ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLnNlY3Rpb25zW3NlY3Rpb25JZF0/LmRvdHNOYXZcbiAgfSlcbiAgY29uc3QgZG90c05hdlBvc2l0aW9uID0gZG90c05hdj8ucG9zaXRpb24gPz8gJ2InXG4gIGNvbnN0IGRvdHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtT2ZWaWV3czsgaSsrKSB7XG4gICAgICByZXN1bHQucHVzaChpKVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH0sIFtudW1PZlZpZXdzXSlcblxuICBjb25zdCBhcnJvd1N0eWxlID0gKCkgPT4ge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcblxuICAgICAgJi5kaXNhYmxlZCB7XG4gICAgICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tbGlnaHQtNDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLmZpcnN0IHtcbiAgICAgICAgbGVmdDogJHthcnJvd3NOYXYub2Zmc2V0ID8/IDB9cHg7XG4gICAgICAgIHRvcDogNTAlO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG5cbiAgICAgICAgJi52ZXJ0aWNhbCB7XG4gICAgICAgICAgdG9wOiAke2Fycm93c05hdi5vZmZzZXQgPz8gMH1weDtcbiAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHJvdGF0ZSg5MGRlZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICYuc2Vjb25kIHtcbiAgICAgICAgcmlnaHQ6ICR7YXJyb3dzTmF2Lm9mZnNldCA/PyAwfXB4O1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuXG4gICAgICAgICYudmVydGljYWwge1xuICAgICAgICAgIGJvdHRvbTogJHthcnJvd3NOYXYub2Zmc2V0ID8/IDB9cHg7XG4gICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgIHRvcDogYXV0bztcbiAgICAgICAgICByaWdodDogYXV0bztcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgcm90YXRlKDkwZGVnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGNvbnN0IGRvdFN0eWxlID0gKCkgPT4ge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246ICR7ZG90c05hdlBvc2l0aW9uID09PSAnbCcgfHwgZG90c05hdlBvc2l0aW9uID09PSAncicgPyAnY29sdW1uJyA6ICdyb3cnfTtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcblxuICAgICAgLmRvdCB7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHQtNTAwKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQtMTAwKTtcbiAgICAgICAgd2lkdGg6ICR7ZG90c05hdi5zaXplID8/IDh9cHg7XG4gICAgICAgIGhlaWdodDogJHtkb3RzTmF2LnNpemUgPz8gOH1weDtcblxuICAgICAgICAmLmFjdGl2ZSB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS13aGl0ZSk7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS01MDApO1xuICAgICAgICAgIHdpZHRoOiAke2RvdHNOYXYuc2l6ZSA+IDAgPyBkb3RzTmF2LnNpemUgKiAxLjUgOiAxMn1weDtcbiAgICAgICAgICBoZWlnaHQ6ICR7ZG90c05hdi5zaXplID4gMCA/IGRvdHNOYXYuc2l6ZSAqIDEuNSA6IDEyfXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgJi5kaXNhYmxlZCB7XG4gICAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYuc25hcC1sZWZ0IHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6ICR7ZG90c05hdi5vZmZzZXQgPz8gNTB9cHg7XG4gICAgICAgIHdpZHRoOiAke2RvdHNOYXYuc2l6ZSA/PyA4fXB4O1xuXG4gICAgICAgID4gZGl2Om5vdCg6Zmlyc3Qtb2YtdHlwZSkge1xuICAgICAgICAgIG1hcmdpbi10b3A6ICR7ZG90c05hdi5zcGFjaW5nID8/IDEwfXB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAmLnNuYXAtcmlnaHQge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6ICR7ZG90c05hdi5vZmZzZXQgPz8gNTB9cHg7XG4gICAgICAgIHdpZHRoOiAke2RvdHNOYXYuc2l6ZSA/PyA4fXB4O1xuXG4gICAgICAgID4gZGl2Om5vdCg6Zmlyc3Qtb2YtdHlwZSkge1xuICAgICAgICAgIG1hcmdpbi10b3A6ICR7ZG90c05hdi5zcGFjaW5nID8/IDEwfXB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAmLnNuYXAtdG9wIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHRvcDogJHtkb3RzTmF2Lm9mZnNldCA/PyA1MH1weDtcbiAgICAgICAgaGVpZ2h0OiAke2RvdHNOYXYuc2l6ZSA/PyA4fXB4O1xuXG4gICAgICAgID4gZGl2Om5vdCg6Zmlyc3Qtb2YtdHlwZSkge1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAke2RvdHNOYXYuc3BhY2luZyA/PyAxMH1weDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgJi5zbmFwLWJvdHRvbSB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBib3R0b206ICR7ZG90c05hdi5vZmZzZXQgPz8gNTB9cHg7XG4gICAgICAgIGhlaWdodDogJHtkb3RzTmF2LnNpemUgPz8gOH1weDtcblxuICAgICAgICA+IGRpdjpub3QoOmZpcnN0LW9mLXR5cGUpIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogJHtkb3RzTmF2LnNwYWNpbmcgPz8gMTB9cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBjb25zdCBjcmVhdGVEb3QgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgaXNBY3RpdmU6IGJvb2xlYW4pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2RvdCByb3VuZGVkLWNpcmNsZScsIHsgYWN0aXZlOiBpc0FjdGl2ZSwgZGlzYWJsZWQ6IG51bU9mVmlld3MgPD0gMSB9KX1cbiAgICAgICAgb25DbGljaz17aXNBY3RpdmUgPyB1bmRlZmluZWQgOiAoKSA9PiB7IG9uQ3VycmVudFZpZXdDaGFuZ2UoaW5kZXgpIH19XG4gICAgICAvPlxuICAgIClcbiAgfSwgW29uQ3VycmVudFZpZXdDaGFuZ2UsIG51bU9mVmlld3NdKVxuXG4gIGNvbnN0IHByZXZpb3VzVmlldyA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggPiAwID8gY3VycmVudEluZGV4IC0gMSA6IG51bU9mVmlld3MgLSAxXG4gICAgb25DdXJyZW50Vmlld0NoYW5nZShuZXh0SW5kZXgpXG4gIH0sIFtjdXJyZW50SW5kZXgsIG51bU9mVmlld3MsIG9uQ3VycmVudFZpZXdDaGFuZ2VdKVxuXG4gIGNvbnN0IG5leHRWaWV3ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCA8IG51bU9mVmlld3MgLSAxID8gY3VycmVudEluZGV4ICsgMSA6IDBcbiAgICBvbkN1cnJlbnRWaWV3Q2hhbmdlKG5leHRJbmRleClcbiAgfSwgW2N1cnJlbnRJbmRleCwgbnVtT2ZWaWV3cywgb25DdXJyZW50Vmlld0NoYW5nZV0pXG5cbiAgY29uc3QgaGFzUHJldmlvdXNWaWV3ID0gbnVtT2ZWaWV3cyA+IDEgJiYgY3VycmVudEluZGV4ICE9PSAwXG4gIGNvbnN0IGhhc05leHRWaWV3ID0gbnVtT2ZWaWV3cyA+IDEgJiYgY3VycmVudEluZGV4ICE9PSBudW1PZlZpZXdzIC0gMVxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIHthcnJvd3NOYXY/LnZpc2libGUgJiYgKFxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdhcnJvd3MtbmF2IGZpcnN0Jywge1xuICAgICAgICAgICAgICB2ZXJ0aWNhbDogYXJyb3dzTmF2LmRpcmVjdGlvbiA9PT0gJ3YnLFxuICAgICAgICAgICAgICBkaXNhYmxlZDogIWhhc1ByZXZpb3VzVmlld1xuICAgICAgICAgICAgfSl9IGNzcz17YXJyb3dTdHlsZSgpfSBvbkNsaWNrPXtoYXNQcmV2aW91c1ZpZXcgPyBwcmV2aW91c1ZpZXcgOiBudWxsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxMZWZ0T3V0bGluZWQgYXV0b0ZsaXA9e2Fycm93c05hdi5kaXJlY3Rpb24gIT09ICd2J30gc2l6ZT17YXJyb3dzTmF2LnNpemUgPz8gMjR9Lz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Fycm93cy1uYXYgc2Vjb25kJywge1xuICAgICAgICAgICAgICB2ZXJ0aWNhbDogYXJyb3dzTmF2LmRpcmVjdGlvbiA9PT0gJ3YnLFxuICAgICAgICAgICAgICBkaXNhYmxlZDogIWhhc05leHRWaWV3XG4gICAgICAgICAgICB9KX0gY3NzPXthcnJvd1N0eWxlKCl9IG9uQ2xpY2s9e2hhc05leHRWaWV3ID8gbmV4dFZpZXcgOiBudWxsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxSaWdodE91dGxpbmVkIGF1dG9GbGlwPXthcnJvd3NOYXYuZGlyZWN0aW9uICE9PSAndid9IHNpemU9e2Fycm93c05hdi5zaXplID8/IDI0fS8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICApfVxuICAgICAge2RvdHNOYXY/LnZpc2libGUgJiYgKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdkb3RzLW5hdicsIHtcbiAgICAgICAgICAgICdzbmFwLWxlZnQnOiBkb3RzTmF2UG9zaXRpb24gPT09ICdsJyxcbiAgICAgICAgICAgICdzbmFwLXRvcCc6IGRvdHNOYXZQb3NpdGlvbiA9PT0gJ3QnLFxuICAgICAgICAgICAgJ3NuYXAtcmlnaHQnOiBkb3RzTmF2UG9zaXRpb24gPT09ICdyJyxcbiAgICAgICAgICAgICdzbmFwLWJvdHRvbSc6IGRvdHNOYXZQb3NpdGlvbiA9PT0gJ2InXG4gICAgICAgICAgfSl9IGNzcz17ZG90U3R5bGUoKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtkb3RzLm1hcCgoaW5kZXgpID0+IGNyZWF0ZURvdChpbmRleCwgaW5kZXggPT09IGN1cnJlbnRJbmRleCkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIGdldEluZGV4RnJvbVByb2dyZXNzLFxuICBqaW11SGlzdG9yeVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQge1xuICB0eXBlIExheW91dEl0ZW1Qcm9wcyxcbiAgdHlwZSBTZWN0aW9uUHJvcHMsXG4gIHR5cGUgTGF5b3V0UHJvcHMsXG4gIHR5cGUgU3RhdGVUb0xheW91dEl0ZW1Qcm9wcyxcbiAgREVGQVVMVF9BVVRPUExBWV9JTlRFUlZBTFxufSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IHN0eWxlVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgU2VjdGlvbkNvbnRlbnQgfSBmcm9tICcuL3NlY3Rpb24tY29udGVudCdcbmltcG9ydCB7IFNlY3Rpb25OYXYgfSBmcm9tICcuL3NlY3Rpb24tbmF2J1xuaW1wb3J0IHsgdXNlQXV0b1BsYXkgfSBmcm9tICcuL3NlY3Rpb24tYXV0by1wbGF5J1xuXG5pbnRlcmZhY2UgT3duUHJvcHMge1xuICBsYXlvdXRFbnRyeUNvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50Q2xhc3M8TGF5b3V0UHJvcHM+XG4gIHZpZXdWaXNpYmlsaXR5Q29udGV4dDogUmVhY3QuQ29tcG9uZW50Q2xhc3Ncbn1cblxuaW50ZXJmYWNlIFJlbmRlckluZm8ge1xuICBjdXJyZW50SW5kZXg6IG51bWJlclxuICBwcmV2aW91c0luZGV4OiBudW1iZXJcbiAgcHJvZ3Jlc3M6IG51bWJlclxufVxuXG4vLyBpbnRlcmZhY2UgU3RhdGUge1xuLy8gICBhdXRvUGxheT86IGJvb2xlYW47XG4vLyAgIGlzUGxheWluZz86IGJvb2xlYW47XG4vLyB9XG5cbnR5cGUgUHJvcHMgPSBMYXlvdXRJdGVtUHJvcHMgJiBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzICYgU2VjdGlvblByb3BzICYgT3duUHJvcHNcblxuZnVuY3Rpb24gZ2V0U3R5bGUgKGZvcmNlQXNwZWN0UmF0aW86IGJvb2xlYW4sIGFzcGVjdFJhdGlvOiBudW1iZXIpIHtcbiAgcmV0dXJuIGNzc2BcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgYXNwZWN0LXJhdGlvOiAke2ZvcmNlQXNwZWN0UmF0aW8gJiYgYXNwZWN0UmF0aW8gPiAwID8gYXNwZWN0UmF0aW8gOiBudWxsfTtcblxuICAgIC5zZWN0aW9uLWNvbnRlbnQge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgei1pbmRleDogMDtcbiAgICB9XG5cbiAgICAuc2VjdGlvbi12aWV3IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB9XG5cbiAgICAuaGlkZGVuIHtcbiAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNlY3Rpb25SZW5kZXJlckJhc2UgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7XG4gICAgdmlld3MsXG4gICAgbmF2SW5mbyxcbiAgICBhY3RpdmVWaWV3LFxuICAgIGFuaW1hdGlvblByZXZpZXcsXG4gICAgcGxheU1vZGUsXG4gICAgdHJhbnNpdGlvbixcbiAgICBzZWN0aW9uSWQsXG4gICAgYXV0b1BsYXksXG4gICAgZm9jdXNhYmxlID0gdHJ1ZSxcbiAgICBpbnRlcnZhbCA9IERFRkFVTFRfQVVUT1BMQVlfSU5URVJWQUwsXG4gICAgbG9vcCA9IHRydWUsXG4gICAgY2xhc3NOYW1lLFxuICAgIHNlY3Rpb25TdHlsZSxcbiAgICByb3RhdGUsXG4gICAgZm9yY2VBc3BlY3RSYXRpbyxcbiAgICBhc3BlY3RSYXRpbyxcbiAgICBsYXlvdXRFbnRyeUNvbXBvbmVudCxcbiAgICB2aWV3VmlzaWJpbGl0eUNvbnRleHRcbiAgfSA9IHByb3BzXG4gIGNvbnN0IGN1cnJlbnRJbmRleFJlZiA9IFJlYWN0LnVzZVJlZjxudW1iZXI+KClcbiAgY29uc3Qgc2VjdGlvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBjb25zdCBoYXNGb2N1c1JlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgY29uc3QgaXNTZWN0aW9uRm9jdXNlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgY29uc3QgYmx1ckV2ZW50SGFuZGxlclJlZiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBbaW50ZXJ1cHRBdXRvcGxheSwgc2V0SW50ZXJ1cHRBdXRvcGxheV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBhY3RpdmVWaWV3SWQgPSBhY3RpdmVWaWV3Py5pZFxuICBjb25zdCByZW5kZXJJbmZvID0gUmVhY3QudXNlTWVtbygoKTogUmVuZGVySW5mbyA9PiB7XG4gICAgbGV0IHZpc2libGVWaWV3cyA9IHZpZXdzXG4gICAgbGV0IGN1cnJlbnRJbmRleFxuICAgIGxldCBwcmV2aW91c0luZGV4XG4gICAgbGV0IHByb2dyZXNzXG5cbiAgICBpZiAobmF2SW5mbykge1xuICAgICAgdmlzaWJsZVZpZXdzID0gbmF2SW5mby52aXNpYmxlVmlld3MgPz8gdmlld3NcbiAgICAgIGlmIChuYXZJbmZvLnVzZVByb2dyZXNzKSB7XG4gICAgICAgIHByb2dyZXNzID0gbmF2SW5mby5wcm9ncmVzc1xuICAgICAgICBjb25zdCByID0gZ2V0SW5kZXhGcm9tUHJvZ3Jlc3MocHJvZ3Jlc3MsIHZpc2libGVWaWV3cy5sZW5ndGgpXG4gICAgICAgIGN1cnJlbnRJbmRleCA9IHIuY3VycmVudEluZGV4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50SW5kZXggPSBNYXRoLm1heCgwLCB2aXNpYmxlVmlld3MuaW5kZXhPZihuYXZJbmZvLmN1cnJlbnRWaWV3SWQpKVxuICAgICAgICBpZiAobmF2SW5mby5wcmV2aW91c1ZpZXdJZCkge1xuICAgICAgICAgIHByZXZpb3VzSW5kZXggPSBNYXRoLm1heCgwLCB2aXNpYmxlVmlld3MuaW5kZXhPZihuYXZJbmZvLnByZXZpb3VzVmlld0lkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2aW91c0luZGV4ID0gTWF0aC5tYXgoMCwgY3VycmVudEluZGV4IC0gMSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUT0RPIHJlbW92ZSBuYXYgYnkgYWN0aXZlVmlldywgdXNlIG5hdkluZm8gb25seVxuICAgICAgY3VycmVudEluZGV4ID0gTWF0aC5tYXgoMCwgdmlzaWJsZVZpZXdzLmluZGV4T2YoYWN0aXZlVmlld0lkKSlcbiAgICAgIHByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXhcbiAgICB9XG5cbiAgICBjdXJyZW50SW5kZXhSZWYuY3VycmVudCA9IGN1cnJlbnRJbmRleFxuICAgIHJldHVybiB7IGN1cnJlbnRJbmRleCwgcHJldmlvdXNJbmRleCwgcHJvZ3Jlc3MgfVxuICB9LCBbYWN0aXZlVmlld0lkLCBuYXZJbmZvLCB2aWV3c10pXG5cbiAgY29uc3QgeyB0cmFuc2Zvcm0sIC4uLm90aGVyU3R5bGUgfSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBzdHlsZVV0aWxzLnRvQ1NTU3R5bGUoc2VjdGlvblN0eWxlKSBhcyBSZWFjdC5DU1NQcm9wZXJ0aWVzXG4gIH0sIFtzZWN0aW9uU3R5bGVdKVxuXG4gIGNvbnN0IHJvdGF0ZVN0eWxlID0gcm90YXRlID4gMCB8fCByb3RhdGUgPCAwID8gYHJvdGF0ZVooJHtyb3RhdGV9ZGVnKWAgOiAnJ1xuICBsZXQgbWVyZ2VkVHJhbnNmb3JtID0gcm90YXRlU3R5bGVcbiAgaWYgKHRyYW5zZm9ybSkge1xuICAgIG1lcmdlZFRyYW5zZm9ybSA9IGAke3RyYW5zZm9ybX0gJHtyb3RhdGVTdHlsZX1gXG4gIH1cblxuICBjb25zdCBvbk1vdXNlRW50ZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SW50ZXJ1cHRBdXRvcGxheSh0cnVlKVxuICB9LCBbXSlcblxuICBjb25zdCBvbk1vdXNlTGVhdmUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SW50ZXJ1cHRBdXRvcGxheShmYWxzZSlcbiAgfSwgW10pXG5cbiAgY29uc3Qgb25Gb2N1cyA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgaGFzRm9jdXNSZWYuY3VycmVudCA9IHRydWVcbiAgICBpc1NlY3Rpb25Gb2N1c2VkUmVmLmN1cnJlbnQgPSBlLnRhcmdldCA9PT0gc2VjdGlvblJlZi5jdXJyZW50XG4gICAgaWYgKGJsdXJFdmVudEhhbmRsZXJSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQoYmx1ckV2ZW50SGFuZGxlclJlZi5jdXJyZW50KVxuICAgICAgYmx1ckV2ZW50SGFuZGxlclJlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cbiAgICBpZiAoYXV0b1BsYXkpIHtcbiAgICAgIHNldEludGVydXB0QXV0b3BsYXkodHJ1ZSlcbiAgICB9XG4gIH0sIFthdXRvUGxheV0pXG5cbiAgY29uc3Qgb25CbHVyID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBoYXNGb2N1c1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICBpZiAoYmx1ckV2ZW50SGFuZGxlclJlZi5jdXJyZW50ICE9IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dChibHVyRXZlbnRIYW5kbGVyUmVmLmN1cnJlbnQpXG4gICAgICBibHVyRXZlbnRIYW5kbGVyUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuICAgIGlmIChhdXRvUGxheSkge1xuICAgICAgYmx1ckV2ZW50SGFuZGxlclJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldEludGVydXB0QXV0b3BsYXkoZmFsc2UpXG4gICAgICB9LCA1MDApXG4gICAgfVxuICB9LCBbYXV0b1BsYXldKVxuXG4gIGNvbnN0IGlzQXV0b1BsYXlpbmcgPSBhdXRvUGxheSAmJiAhaW50ZXJ1cHRBdXRvcGxheVxuXG4gIHVzZUF1dG9QbGF5KHtcbiAgICBzZWN0aW9uSWQsXG4gICAgaW50ZXJ2YWwsXG4gICAgbG9vcCxcbiAgICBhdXRvUGxheTogaXNBdXRvUGxheWluZ1xuICB9KVxuXG4gIGNvbnN0IG9uQ3VycmVudFZpZXdDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygobmV4dEluZGV4OiBudW1iZXIpID0+IHtcbiAgICBqaW11SGlzdG9yeS5jaGFuZ2VWaWV3KHNlY3Rpb25JZCwgdmlld3NbbmV4dEluZGV4XSlcbiAgfSwgW3NlY3Rpb25JZCwgdmlld3NdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKGBzZWN0aW9uLWxheW91dCBsYXlvdXQtaXRlbS1jb250ZW50IHctMTAwICR7c2VjdGlvblN0eWxlPy5ib3hTaGFkb3c/LnByZXNldFN0eWxlfWAsIGNsYXNzTmFtZSl9XG4gICAgICBjc3M9e2dldFN0eWxlKGZvcmNlQXNwZWN0UmF0aW8sIGFzcGVjdFJhdGlvKX1cbiAgICAgIGRhdGEtc2VjdGlvbmlkPXtzZWN0aW9uSWR9XG4gICAgICBzdHlsZT17e1xuICAgICAgICAuLi5vdGhlclN0eWxlLFxuICAgICAgICB0cmFuc2Zvcm06IG1lcmdlZFRyYW5zZm9ybVxuICAgICAgfX1cbiAgICAgIG9uTW91c2VFbnRlcj17YXV0b1BsYXkgPyBvbk1vdXNlRW50ZXIgOiBudWxsfVxuICAgICAgb25Nb3VzZUxlYXZlPXthdXRvUGxheSA/IG9uTW91c2VMZWF2ZSA6IG51bGx9XG4gICAgICBvblRvdWNoU3RhcnQ9e2F1dG9QbGF5ID8gb25Nb3VzZUVudGVyIDogbnVsbH1cbiAgICAgIG9uVG91Y2hFbmQ9e2F1dG9QbGF5ID8gb25Nb3VzZUxlYXZlIDogbnVsbH1cbiAgICAgIG9uRm9jdXM9e29uRm9jdXN9XG4gICAgICBvbkJsdXI9e29uQmx1cn1cbiAgICAgIHRhYkluZGV4PXtmb2N1c2FibGUgPyAwIDogdW5kZWZpbmVkfVxuICAgICAgcmVmPXtzZWN0aW9uUmVmfVxuICAgID5cbiAgICAgIDxTZWN0aW9uQ29udGVudFxuICAgICAgICB2aWV3cz17dmlld3N9XG4gICAgICAgIG5hdkluZm89e25hdkluZm99XG4gICAgICAgIGFuaW1hdGlvblByZXZpZXc9e2FuaW1hdGlvblByZXZpZXd9XG4gICAgICAgIHBsYXlNb2RlPXtwbGF5TW9kZX1cbiAgICAgICAgY3VycmVudEluZGV4PXtyZW5kZXJJbmZvLmN1cnJlbnRJbmRleH1cbiAgICAgICAgcHJldmlvdXNJbmRleD17cmVuZGVySW5mby5wcmV2aW91c0luZGV4fVxuICAgICAgICBwcm9ncmVzcz17cmVuZGVySW5mby5wcm9ncmVzc31cbiAgICAgICAgbG9vcD17aXNBdXRvUGxheWluZyAmJiBsb29wfVxuICAgICAgICB2aWV3VHJhbnNpdGlvbj17dHJhbnNpdGlvbiBhcyBhbnl9XG4gICAgICAgIGxheW91dEVudHJ5Q29tcG9uZW50PXtsYXlvdXRFbnRyeUNvbXBvbmVudH1cbiAgICAgICAgdmlld1Zpc2liaWxpdHlDb250ZXh0PXt2aWV3VmlzaWJpbGl0eUNvbnRleHR9XG4gICAgICAvPlxuICAgICAgPFNlY3Rpb25OYXZcbiAgICAgICAgc2VjdGlvbklkPXtzZWN0aW9uSWR9XG4gICAgICAgIG51bU9mVmlld3M9e3ZpZXdzLmxlbmd0aH1cbiAgICAgICAgY3VycmVudEluZGV4PXtyZW5kZXJJbmZvLmN1cnJlbnRJbmRleH1cbiAgICAgICAgb25DdXJyZW50Vmlld0NoYW5nZT17b25DdXJyZW50Vmlld0NoYW5nZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRJdGVtUHJvcHMsIHR5cGUgU2VjdGlvblByb3BzLCB0eXBlIFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCBMYXlvdXRFbnRyeSBmcm9tICcuL2xheW91dC1lbnRyeSdcbmltcG9ydCB7IFNlY3Rpb25SZW5kZXJlckJhc2UgfSBmcm9tICcuL3NlY3Rpb24tcmVuZGVyZXItYmFzZSdcbmltcG9ydCB7IFZpZXdWaXNpYmlsaXR5Q29udGV4dCB9IGZyb20gJy4uL2J1aWxkZXIvcGFnZS1jb250ZXh0J1xuXG5leHBvcnQgY2xhc3MgU2VjdGlvblJlbmRlcmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxMYXlvdXRJdGVtUHJvcHMgJiBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzICYgU2VjdGlvblByb3BzPiB7XG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTZWN0aW9uUmVuZGVyZXJCYXNlIHsuLi50aGlzLnByb3BzfSBsYXlvdXRFbnRyeUNvbXBvbmVudD17TGF5b3V0RW50cnkgYXMgYW55fSB2aWV3VmlzaWJpbGl0eUNvbnRleHQ9e1ZpZXdWaXNpYmlsaXR5Q29udGV4dCBhcyBhbnl9IC8+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgRXJyb3JCb3VuZGFyeSxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIElNVmlld0pzb24sXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRQcm9wcyB9IGZyb20gJy4uL3R5cGVzJ1xuLy8gaW1wb3J0IHsgVmlld1Zpc2liaWxpdHlDb250ZXh0IH0gZnJvbSAnLi4vYnVpbGRlci9wYWdlLWNvbnRleHQnO1xuaW1wb3J0IHsgc3R5bGVVdGlscywgdHlwZSBCYWNrZ3JvdW5kU3R5bGUsIEZpbGxUeXBlLCB0eXBlIEltYWdlUGFyYW0sIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tICdqaW11LXRoZW1lJ1xuXG5mdW5jdGlvbiBnZXRCYWNrZ3JvdW5kU3R5bGUgKHZpZXc6IElNVmlld0pzb24sIGJnQ29sb3I6IHN0cmluZykge1xuICBpZiAoIXZpZXcpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGxldCBiYWNrZ3JvdW5kSW1hZ2U6IEltYWdlUGFyYW0gPSB7fVxuICBpZiAodmlldy5iYWNrZ3JvdW5kSU1hZ2UpIHtcbiAgICBiYWNrZ3JvdW5kSW1hZ2UgPSB0eXBlb2Ygdmlldy5iYWNrZ3JvdW5kSU1hZ2UgPT09ICdzdHJpbmcnID8ge30gOiB2aWV3LmJhY2tncm91bmRJTWFnZVxuICB9XG4gIGNvbnN0IGZpbGxUeXBlID0gdmlldy5iYWNrZ3JvdW5kUG9zaXRpb24gPyBGaWxsVHlwZVt2aWV3LmJhY2tncm91bmRQb3NpdGlvbi50b1VwcGVyQ2FzZSgpXSA6IEZpbGxUeXBlLkZJTExcbiAgbGV0IGNvbG9yXG4gIC8vIGZvciBiYWNrIGNvbXBhdGlibGVcbiAgaWYgKHZpZXcuYmFja2dyb3VuZENvbG9yID09IG51bGwpIHtcbiAgICBjb2xvciA9IGJnQ29sb3JcbiAgfSBlbHNlIGlmICh2aWV3LmJhY2tncm91bmRDb2xvciA9PT0gJycpIHtcbiAgICBjb2xvciA9ICd0cmFuc3BhcmVudCdcbiAgfSBlbHNlIHtcbiAgICBjb2xvciA9IHZpZXcuYmFja2dyb3VuZENvbG9yID8gdmlldy5iYWNrZ3JvdW5kQ29sb3IgOiAnJ1xuICB9XG4gIGNvbnN0IGJhY2tncm91bmRDb25maWc6IEJhY2tncm91bmRTdHlsZSA9IHtcbiAgICBjb2xvcixcbiAgICBmaWxsVHlwZTogZmlsbFR5cGUsXG4gICAgaW1hZ2U6IGJhY2tncm91bmRJbWFnZVxuICB9XG4gIHJldHVybiBzdHlsZVV0aWxzLnRvQmFja2dyb3VuZFN0eWxlKGJhY2tncm91bmRDb25maWcpXG59XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHZpZXdJZDogc3RyaW5nXG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIGxheW91dEVudHJ5Q29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRDbGFzczxMYXlvdXRQcm9wcz5cbiAgdmlld1Zpc2liaWxpdHlDb250ZXh0OiBSZWFjdC5Db21wb25lbnRDbGFzc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVmlld0NvbnRlbnQgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IHZpZXdJZCwgaXNBY3RpdmUsIGxheW91dEVudHJ5Q29tcG9uZW50LCB2aWV3VmlzaWJpbGl0eUNvbnRleHQgfSA9IHByb3BzXG4gIGNvbnN0IHZpZXc6IElNVmlld0pzb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWc/LnZpZXdzPy5bdmlld0lkXVxuICB9KVxuICBjb25zdCBiZ0NvbG9yID0gdXNlVGhlbWUoKT8uYm9keT8uYmdcbiAgY29uc3QgTGF5b3V0RW50cnkgPSBsYXlvdXRFbnRyeUNvbXBvbmVudFxuICBjb25zdCBWaWV3VmlzaWJpbGl0eUNvbnRleHQgPSB2aWV3VmlzaWJpbGl0eUNvbnRleHQgYXMgYW55XG4gIGNvbnN0IFtzdGFydGVkLCBzZXRTdGFydGVkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCB2aWV3VmlzaWJpbGl0eSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7IGlzSW5WaWV3OiB0cnVlLCBpc0luQ3VycmVudFZpZXc6IGlzQWN0aXZlIH1cbiAgfSwgW2lzQWN0aXZlXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0FjdGl2ZSAmJiB2aWV3LmxhenlMb2FkICYmICFzdGFydGVkKSB7XG4gICAgICBzZXRTdGFydGVkKHRydWUpXG4gICAgfVxuICB9LCBbaXNBY3RpdmUsIHZpZXcubGF6eUxvYWQsIHN0YXJ0ZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd3LTEwMCBoLTEwMCBkLWZsZXggc2VjdGlvbi12aWV3Jywge1xuICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzQWN0aXZlXG4gICAgICB9KX1cbiAgICAgIHN0eWxlPXtnZXRCYWNrZ3JvdW5kU3R5bGUodmlldywgYmdDb2xvcil9XG4gICAgICBjc3M9e2Nzc2AmLCAuZXhiLWRyb3AtYXJlYSB7IHBvaW50ZXItZXZlbnRzOiAke2lzQWN0aXZlID8gJ2F1dG8nIDogJ25vbmUnfTsgfWB9XG4gICAgICBrZXk9e3ZpZXdJZH1cbiAgICAgIGlkPXtgJHt2aWV3LnBhcmVudH1fJHt2aWV3LmlkfWB9XG4gICAgPlxuICAgICAgeyhzdGFydGVkIHx8ICF2aWV3LmxhenlMb2FkKSAmJiAoXG4gICAgICAgIDxFcnJvckJvdW5kYXJ5PlxuICAgICAgICAgIDxWaWV3VmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZpZXdWaXNpYmlsaXR5fT5cbiAgICAgICAgICAgIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXt2aWV3Py5sYXlvdXR9IGlzSW5TZWN0aW9uIGNsYXNzTmFtZT0ndy0xMDAnIC8+XG4gICAgICAgICAgPC9WaWV3VmlzaWJpbGl0eUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIFdpZGdldE1hbmFnZXIsIGpzeCwgY3NzLCBFcnJvckJvdW5kYXJ5LCBjbGFzc05hbWVzLCBhcHBBY3Rpb25zLCBnZXRBcHBTdG9yZSwgV2lkZ2V0U3RhdGUsIGkxOG4gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQge1xuICB0eXBlIExheW91dEl0ZW1Qcm9wcyxcbiAgdHlwZSBXaWRnZXRQcm9wc1xufSBmcm9tICcuLi90eXBlcydcbmltcG9ydCB7IG1hcFN0YXRlVG9XaWRnZXRQcm9wcyB9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgc3R5bGVVdGlscyB9IGZyb20gJ2ppbXUtdWknXG5cbmNsYXNzIF9XaWRnZXRSZW5kZXJlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGF5b3V0SXRlbVByb3BzICYgV2lkZ2V0UHJvcHMsIHsgZXJyb3I6IHN0cmluZyB9ID4ge1xuICByZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5vbk1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKVxuICAgIHRoaXMucmVmID0gUmVhY3QuY3JlYXRlUmVmKClcbiAgICB0aGlzLnN0YXRlID0geyBlcnJvcjogbnVsbCB9XG4gIH1cblxuICBwcml2YXRlIGxvYWRXaWRnZXRDbGFzcyAoKSB7XG4gICAgY29uc3QgeyB3aWRnZXRJZCwgaXNDbGFzc0xvYWRlZCB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICh3aWRnZXRJZCAmJiAhaXNDbGFzc0xvYWRlZCkge1xuICAgICAgV2lkZ2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmxvYWRXaWRnZXRDbGFzcyh3aWRnZXRJZCkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBlcnJvcjogaTE4bi5nZXRJbnRsKCkuZm9ybWF0TWVzc2FnZSh7IGlkOiAnd2lkZ2V0TG9hZEVycm9yJyB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdGhpcy5sb2FkV2lkZ2V0Q2xhc3MoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlICgpIHtcbiAgICB0aGlzLmxvYWRXaWRnZXRDbGFzcygpXG4gIH1cblxuICAvKipcbiAgICogTXVzdCBhZGQgYW4gZXh0cmEgZGl2IHRvIGtlZXAgdGhlIGFzcGVjdCByYXRpby5cbiAgICogaHR0cHM6Ly93d3cudzNzY2hvb2xzLmNvbS9ob3d0by9ob3d0b19jc3NfYXNwZWN0X3JhdGlvLmFzcFxuICAgKi9cbiAgcmVuZGVyV2lkZ2V0Q29udGVudCAoKSB7XG4gICAgY29uc3QgeyB3aWRnZXRJZCwgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgYXV0b1dpZHRoLCBhdXRvSGVpZ2h0LCBvbkluaXRSZXNpemVIYW5kbGVyLCBvbkluaXREcmFnSGFuZGxlciB9ID0gdGhpcy5wcm9wc1xuICAgIGxldCBXaWRnZXRDbGFzc1xuICAgIGlmICh3aWRnZXRJZCkge1xuICAgICAgV2lkZ2V0Q2xhc3MgPSBXaWRnZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0V2lkZ2V0Q2xhc3Mod2lkZ2V0SWQpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuZXJyb3IpIHtcbiAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0nd2lkZ2V0LWNvbnRlbnQnPnt0aGlzLnN0YXRlLmVycm9yfTwvZGl2PlxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnd2lkZ2V0LWNvbnRlbnQnLCB7ICdkLW5vbmUnOiAhd2lkZ2V0SWQgfSl9PlxuICAgICAgICB7V2lkZ2V0Q2xhc3MgJiYgPEVycm9yQm91bmRhcnk+XG4gICAgICAgICAgPFdpZGdldENsYXNzXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBsYXlvdXRJZD17bGF5b3V0SWR9XG4gICAgICAgICAgICBsYXlvdXRJdGVtSWQ9e2xheW91dEl0ZW1JZH1cbiAgICAgICAgICAgIGF1dG9XaWR0aD17YXV0b1dpZHRofVxuICAgICAgICAgICAgYXV0b0hlaWdodD17YXV0b0hlaWdodH1cbiAgICAgICAgICAgIG9uSW5pdFJlc2l6ZUhhbmRsZXI9e29uSW5pdFJlc2l6ZUhhbmRsZXJ9XG4gICAgICAgICAgICBvbkluaXREcmFnSGFuZGxlcj17b25Jbml0RHJhZ0hhbmRsZXJ9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9FcnJvckJvdW5kYXJ5Pn1cbiAgICAgICAgey8qIHshV2lkZ2V0Q2xhc3MgJiYgPExvYWRpbmcgdHlwZT17TG9hZGluZ1R5cGUuV2lkZ2V0fS8+fSAqL31cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICBjb25zdCB7IGZvcmNlQXNwZWN0UmF0aW8sIGFzcGVjdFJhdGlvIH0gPSB0aGlzLnByb3BzXG4gICAgLy8gZm9yIGFwcC1sb2FkZXIgd2lkZ2V0IG9ubHksIHVzYWJsZSBpbiB0b3VjaCBkZXZpY2VcbiAgICBjb25zdCBvdmVyZmxvd1Njcm9sbGluZ1N0eWxlID0gY3NzYFxuICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xuICAgIGBcbiAgICByZXR1cm4gY3NzYFxuICAgICAgJHt0aGlzLnByb3BzLndpZGdldElkID09PSAnYXBwLWxvYWRlcicgPyBvdmVyZmxvd1Njcm9sbGluZ1N0eWxlIDogJyd9O1xuICAgICAgb3ZlcmZsb3c6ICR7dGhpcy5wcm9wcy5jYW5Dcm9zc0xheW91dEJvdW5kYXJ5ID8gJ3Zpc2libGUnIDogJ2hpZGRlbid9O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgYXNwZWN0LXJhdGlvOiAke2ZvcmNlQXNwZWN0UmF0aW8gJiYgYXNwZWN0UmF0aW8gPiAwID8gYXNwZWN0UmF0aW8gOiBudWxsfTtcblxuICAgICAgLndpZGdldC1jb250ZW50IHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIG9uTW91c2VEb3duICgpIHtcbiAgICAvLyBkb2Vzbid0IG5lZWQgdG8gYWN0aXZhdGUgcGxhY2Vob2xkZXJcbiAgICBpZiAodGhpcy5wcm9wcy53aWRnZXRJZCkge1xuICAgICAgY29uc3Qgc3RhdGUgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgICAgIGlmIChzdGF0ZS53aWRnZXRzUnVudGltZUluZm9bdGhpcy5wcm9wcy53aWRnZXRJZF0/LnN0YXRlICE9PSBXaWRnZXRTdGF0ZS5BY3RpdmUpIHtcbiAgICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLmFjdGl2YXRlV2lkZ2V0KHRoaXMucHJvcHMud2lkZ2V0SWQpKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIHdpZGdldFN0eWxlLCB3aWRnZXRJZCwgcm90YXRlIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyB0cmFuc2Zvcm0sIC4uLm90aGVyU3R5bGUgfSA9IHN0eWxlVXRpbHMudG9DU1NTdHlsZSh3aWRnZXRTdHlsZSkgYXMgUmVhY3QuQ1NTUHJvcGVydGllc1xuICAgIGNvbnN0IHJvdGF0ZVN0eWxlID0gcm90YXRlID4gMCB8fCByb3RhdGUgPCAwID8gYHJvdGF0ZVooJHtyb3RhdGV9ZGVnKWAgOiAnJ1xuICAgIGxldCBtZXJnZWRUcmFuc2Zvcm0gPSByb3RhdGVTdHlsZVxuICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgIG1lcmdlZFRyYW5zZm9ybSA9IGAke3RyYW5zZm9ybX0gJHtyb3RhdGVTdHlsZX1gXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhgd2lkZ2V0LXJlbmRlcmVyIGxheW91dC1pdGVtLWNvbnRlbnQgdy0xMDAgJHt3aWRnZXRTdHlsZT8uYm94U2hhZG93Py5wcmVzZXRTdHlsZSA/PyAnJ31gLCBjbGFzc05hbWUpfVxuICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX1cbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAuLi5vdGhlclN0eWxlLFxuICAgICAgICAgIHRyYW5zZm9ybTogbWVyZ2VkVHJhbnNmb3JtXG4gICAgICAgIH19XG4gICAgICAgIG9uTW91c2VEb3duQ2FwdHVyZT17dGhpcy5vbk1vdXNlRG93bn1cbiAgICAgICAgZGF0YS13aWRnZXRpZD17d2lkZ2V0SWR9XG4gICAgICAgIHJlZj17dGhpcy5yZWZ9XG4gICAgICA+XG4gICAgICAgIHt0aGlzLnJlbmRlcldpZGdldENvbnRlbnQoKX1cbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IFdpZGdldFJlbmRlcmVyID0gUmVhY3RSZWR1eC5jb25uZWN0PFxuV2lkZ2V0UHJvcHMsXG51bmtub3duLFxuTGF5b3V0SXRlbVByb3BzXG4+KG1hcFN0YXRlVG9XaWRnZXRQcm9wcykoX1dpZGdldFJlbmRlcmVyKVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBJTUFwcENvbmZpZyxcbiAgdHlwZSBJTUxheW91dEpzb24sXG4gIExheW91dEl0ZW1UeXBlLFxuICB0eXBlIElNTGF5b3V0SXRlbUpzb24sXG4gIHR5cGUgTGF5b3V0SW5mbyxcbiAgTGF5b3V0VHlwZSxcbiAgV2lkZ2V0VHlwZSxcbiAgQnJvd3NlclNpemVNb2RlLFxuICBDb250YWluZXJUeXBlLFxuICB0eXBlIElNU2l6ZU1vZGVMYXlvdXRKc29uLFxuICB0eXBlIExheW91dEl0ZW1Kc29uLFxuICB0eXBlIENvbnRhaW5lckluZm8sXG4gIExheW91dFBhcmVudFR5cGUsXG4gIGFwcENvbmZpZ1V0aWxzXG59IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXlvdXRJdGVtIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvKTogSU1MYXlvdXRJdGVtSnNvbiB7XG4gIGlmICghbGF5b3V0SW5mbykge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBsYXlvdXRJbmZvXG4gIHJldHVybiBhcHBDb25maWcubGF5b3V0cz8uW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbn1cblxuLyoqXG4gKiBGaW5kIHBhcmVudCBsYXlvdXQgaXRlbSBpbiBjdXJyZW50IHBhZ2UuXG4gKiBAcGFyYW0gbGF5b3V0SW5mb1xuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZFBhcmVudExheW91dEluZm8gKFxuICBsYXlvdXRJbmZvOiBMYXlvdXRJbmZvLFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogTGF5b3V0SW5mbyB7XG4gIGNvbnN0IHsgbGF5b3V0SWQgfSA9IGxheW91dEluZm9cbiAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG5cbiAgc3dpdGNoIChsYXlvdXQ/LnBhcmVudD8udHlwZSkge1xuICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5WaWV3OlxuICAgIHtcbiAgICAgIGNvbnN0IHZpZXdKc29uID0gYXBwQ29uZmlnLnZpZXdzW2xheW91dC5wYXJlbnQuaWRdXG4gICAgICBjb25zdCBzZWN0aW9uSnNvbiA9IGFwcENvbmZpZy5zZWN0aW9uc1t2aWV3SnNvbi5wYXJlbnRdXG4gICAgICBpZiAoc2VjdGlvbkpzb24/LnBhcmVudD8uW2Jyb3dzZXJTaXplTW9kZV0/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gc2VjdGlvbkpzb24ucGFyZW50W2Jyb3dzZXJTaXplTW9kZV1bMF1cbiAgICAgIH1cbiAgICAgIGlmIChzZWN0aW9uSnNvbj8ucGFyZW50Py5bYnJvd3NlclNpemVNb2RlXT8ubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm4gZmluZFBhcmVudExheW91dEluZm8oc2VjdGlvbkpzb24ucGFyZW50W2Jyb3dzZXJTaXplTW9kZV1bMF0sIGFwcENvbmZpZywgYnJvd3NlclNpemVNb2RlKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLldpZGdldDpcbiAgICB7XG4gICAgICBjb25zdCB3aWRnZXRKc29uID0gYXBwQ29uZmlnLndpZGdldHNbbGF5b3V0LnBhcmVudC5pZF1cbiAgICAgIGlmICh3aWRnZXRKc29uPy5wYXJlbnQ/Llticm93c2VyU2l6ZU1vZGVdPy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHdpZGdldEpzb24ucGFyZW50W2Jyb3dzZXJTaXplTW9kZV1bMF1cbiAgICAgIH1cbiAgICAgIGlmICh3aWRnZXRKc29uPy5wYXJlbnQ/Llticm93c2VyU2l6ZU1vZGVdPy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybiBmaW5kUGFyZW50TGF5b3V0SW5mbyh3aWRnZXRKc29uLnBhcmVudFticm93c2VyU2l6ZU1vZGVdWzBdLCBhcHBDb25maWcsIGJyb3dzZXJTaXplTW9kZSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5TY3JlZW46XG4gICAge1xuICAgICAgY29uc3Qgc2NyZWVuSnNvbiA9IGFwcENvbmZpZy5zY3JlZW5zW2xheW91dC5wYXJlbnQuaWRdXG4gICAgICBjb25zdCBzZ0pzb24gPSBhcHBDb25maWcuc2NyZWVuR3JvdXBzW3NjcmVlbkpzb24ucGFyZW50XVxuICAgICAgcmV0dXJuIHNnSnNvbi5wYXJlbnQ/Llticm93c2VyU2l6ZU1vZGVdXG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50SWRJbkxheW91dEl0ZW0gKGl0ZW06IElNTGF5b3V0SXRlbUpzb24pOiBzdHJpbmcge1xuICBzd2l0Y2ggKGl0ZW0udHlwZSkge1xuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0OlxuICAgICAgcmV0dXJuIHR5cGVvZiAoaXRlbS53aWRnZXRJZCkgPT09ICdzdHJpbmcnID8gaXRlbS53aWRnZXRJZCA6IG51bGxcbiAgICBjYXNlIExheW91dEl0ZW1UeXBlLlNlY3Rpb246XG4gICAgICByZXR1cm4gdHlwZW9mIChpdGVtLnNlY3Rpb25JZCkgPT09ICdzdHJpbmcnID8gaXRlbS5zZWN0aW9uSWQgOiBudWxsXG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cDpcbiAgICAgIHJldHVybiB0eXBlb2YgKGl0ZW0uc2NyZWVuR3JvdXBJZCkgPT09ICdzdHJpbmcnID8gaXRlbS5zY3JlZW5Hcm91cElkIDogbnVsbFxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogcmV0dXJuIHRoZSBjb250ZW50IGlkcyBpbiB0aGUgbGF5b3V0LiBEbyBub3QgY29uc2lkZXIgdGhlIGVtYmVkZGVkIGxheW91dHNcbiAqIEBwYXJhbSBsYXlvdXRKc29uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50c0luTGF5b3V0IChsYXlvdXRKc29uOiBJTUxheW91dEpzb24sIHR5cGU6IExheW91dEl0ZW1UeXBlLCB3aXRoUGVuZGluZyA9IGZhbHNlKTogc3RyaW5nW10ge1xuICBpZiAoIWxheW91dEpzb24/LmNvbnRlbnQpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhsYXlvdXRKc29uLmNvbnRlbnQpXG4gICAgLmZpbHRlcihcbiAgICAgIGl0ZW1JZCA9PlxuICAgICAgICBsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXS50eXBlID09PSB0eXBlICYmXG4gICAgICAgICEhZ2V0Q29udGVudElkSW5MYXlvdXRJdGVtKGxheW91dEpzb24uY29udGVudFtpdGVtSWRdKSAmJlxuICAgICAgICAod2l0aFBlbmRpbmcgfHwgIWxheW91dEpzb24uY29udGVudFtpdGVtSWRdLmlzUGVuZGluZylcbiAgICApXG4gICAgLm1hcChpdGVtSWQgPT5cbiAgICAgIGdldENvbnRlbnRJZEluTGF5b3V0SXRlbShsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXSlcbiAgICApXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBjb250ZW50IGlkcyBpbiBhIGxheW91dCwgc2VhcmNoIHRoZSB3aG9sZSBsYXlvdXQgdHJlZSwgaW5jbHVkaW5nIHRoZSBsYXlvdXQgd2lkZ2V0LCB0aGUgbm9ybWFsIHdpZGdldCB0aGF0IGhhcyBlbWJlZCBsYXlvdXQsIGFuZCB2aWV3cywgc2NyZWVucywgZXRjLlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGxheW91dElkIHRoZSBsYXlvdXQgdG8gc2VhcmNoXG4gKiBAcGFyYW0gdHlwZSBjb250ZW50IHR5cGVcbiAqIEBwYXJhbSBzaXplTW9kZSB0aGUgc2l6ZU1vZGUgdG8gc2VhcmNoXG4gKiBAcGFyYW0gd2l0aFBlbmRpbmcgd2lsbCBpbmNsdWRlIHRoZSBwZW5kaW5nIGNvbnRlbnQgaWYgdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZSAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dElkOiBzdHJpbmcsXG4gIHR5cGU6IExheW91dEl0ZW1UeXBlLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICB3aXRoUGVuZGluZyA9IGZhbHNlXG4pOiBzdHJpbmdbXSB7XG4gIGxldCByZXQgPSBbXVxuICBjb25zdCB3aWRnZXRJZHMgPSBnZXRDb250ZW50c0luTGF5b3V0KGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXSwgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LCB3aXRoUGVuZGluZylcbiAgY29uc3Qgc2VjdGlvbklkcyA9IGdldENvbnRlbnRzSW5MYXlvdXQoYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLCBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uLCB3aXRoUGVuZGluZylcbiAgY29uc3Qgc2NyZWVuR3JvdXBJZHMgPSBnZXRDb250ZW50c0luTGF5b3V0KGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXSwgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXAsIHdpdGhQZW5kaW5nKVxuICBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgcmV0ID0gcmV0LmNvbmNhdCh3aWRnZXRJZHMpXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2VjdGlvbikge1xuICAgIHJldCA9IHJldC5jb25jYXQoc2VjdGlvbklkcylcbiAgfSBlbHNlIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cCkge1xuICAgIHJldCA9IHJldC5jb25jYXQoc2NyZWVuR3JvdXBJZHMpXG4gIH1cblxuICBjb25zdCBoYXNMYXlvdXRXaWRnZXRJZHMgPSB3aWRnZXRJZHMuZmlsdGVyKFxuICAgIHdpZGdldElkID0+XG4gICAgICBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0/Lm1hbmlmZXN0Py53aWRnZXRUeXBlID09PSBXaWRnZXRUeXBlLkxheW91dCB8fFxuICAgICAgYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdPy5tYW5pZmVzdD8ucHJvcGVydGllcz8uaGFzRW1iZWRkZWRMYXlvdXRcbiAgKVxuICBoYXNMYXlvdXRXaWRnZXRJZHMuZm9yRWFjaChoYXNMYXlvdXRXaWRnZXRJZCA9PiB7XG4gICAgT2JqZWN0LmtleXMoYXBwQ29uZmlnLndpZGdldHNbaGFzTGF5b3V0V2lkZ2V0SWRdLmxheW91dHMgPz8ge30pLmZvckVhY2gobGF5b3V0S2V5ID0+IHtcbiAgICAgIGNvbnN0IGxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy53aWRnZXRzW2hhc0xheW91dFdpZGdldElkXS5sYXlvdXRzW2xheW91dEtleV0sIHNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgcmV0ID0gcmV0LmNvbmNhdChnZXRDb250ZW50c0luTGF5b3V0UmVjdXJzaXZlKGFwcENvbmZpZywgbGF5b3V0SWQsIHR5cGUsIHNpemVNb2RlLCB3aXRoUGVuZGluZykpXG4gICAgfSlcbiAgfSlcblxuICBzZWN0aW9uSWRzLmZvckVhY2goc2VjdGlvbklkID0+IHtcbiAgICBhcHBDb25maWcuc2VjdGlvbnM/LltzZWN0aW9uSWRdPy52aWV3cy5mb3JFYWNoKHZpZXdJZCA9PiB7XG4gICAgICBjb25zdCBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcudmlld3Nbdmlld0lkXS5sYXlvdXQsIHNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgaWYgKGFwcENvbmZpZy52aWV3c1t2aWV3SWRdICYmIGxheW91dElkKSB7XG4gICAgICAgIHJldCA9IHJldC5jb25jYXQoXG4gICAgICAgICAgZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZShhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIHNjcmVlbkdyb3VwSWRzLmZvckVhY2goc2NyZWVuR3JvdXBJZCA9PiB7XG4gICAgYXBwQ29uZmlnLnNjcmVlbkdyb3Vwcz8uW3NjcmVlbkdyb3VwSWRdPy5zY3JlZW5zLmZvckVhY2goc2NyZWVuSWQgPT4ge1xuICAgICAgY29uc3QgbWFpbkxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5zY3JlZW5zPy5bc2NyZWVuSWRdPy5tYWluLmxheW91dCwgc2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICBpZiAobWFpbkxheW91dElkKSB7XG4gICAgICAgIHJldCA9IHJldC5jb25jYXQoXG4gICAgICAgICAgZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZShhcHBDb25maWcsIG1haW5MYXlvdXRJZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCBwYW5lbExheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5zY3JlZW5zPy5bc2NyZWVuSWRdPy5wYW5lbD8ubGF5b3V0LCBzaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIGlmIChwYW5lbExheW91dElkKSB7XG4gICAgICAgIHJldCA9IHJldC5jb25jYXQoXG4gICAgICAgICAgZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZShhcHBDb25maWcsIHBhbmVsTGF5b3V0SWQsIHR5cGUsIHNpemVNb2RlLCB3aXRoUGVuZGluZylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbiAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgY29udGVudCBpZHMgaW4gYSBsYXlvdXQsIHNlYXJjaCB0aGUgd2lkZ2V0cyB3aXRoIGxheW91dCBidXQgZG9uJ3Qgc2VhcmNoIG5lc3RlZCBjb250YWluZXJzLlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGxheW91dElkXG4gKiBAcGFyYW0gdHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudHNJbkxheW91dFdpdGhSZWNydXNpdmVMYXlvdXRzIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgbGF5b3V0SWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gIHdpdGhQZW5kaW5nID0gZmFsc2Vcbik6IHN0cmluZ1tdIHtcbiAgbGV0IHJldCA9IFtdXG4gIC8vIE5vIG5lZWQgdG8gZGVhbCB3aXRoIHNjcmVlbiBncm91cCBhcyBpdCBjYW5ub3QgYmUgcGxhY2VkIGluIGEgbGF5b3V0IHdpZGdldFxuICBjb25zdCB3aWRnZXRJZHMgPSBnZXRDb250ZW50c0luTGF5b3V0KGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXSwgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LCB3aXRoUGVuZGluZylcbiAgY29uc3Qgc2VjdGlvbklkcyA9IGdldENvbnRlbnRzSW5MYXlvdXQoYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLCBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uLCB3aXRoUGVuZGluZylcbiAgY29uc3Qgc2dJZHMgPSBnZXRDb250ZW50c0luTGF5b3V0KGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXSwgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXAsIHdpdGhQZW5kaW5nKVxuICBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgcmV0ID0gcmV0LmNvbmNhdCh3aWRnZXRJZHMpXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXApIHtcbiAgICByZXQgPSByZXQuY29uY2F0KHNnSWRzKVxuICB9IGVsc2Uge1xuICAgIHJldCA9IHJldC5jb25jYXQoc2VjdGlvbklkcylcbiAgfVxuXG4gIGNvbnN0IGxheW91dFdpZGdldElkcyA9IHdpZGdldElkcy5maWx0ZXIoXG4gICAgd2lkZ2V0SWQgPT5cbiAgICAgIGFwcENvbmZpZy53aWRnZXRzICYmXG4gICAgICBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0gJiZcbiAgICAgIChhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0ubWFuaWZlc3Qud2lkZ2V0VHlwZSA9PT0gV2lkZ2V0VHlwZS5MYXlvdXQgfHwgYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLm1hbmlmZXN0LnByb3BlcnRpZXMuaGFzRW1iZWRkZWRMYXlvdXQpXG4gIClcbiAgbGF5b3V0V2lkZ2V0SWRzLmZvckVhY2gobGF5b3V0V2lkZ2V0SWQgPT4ge1xuICAgIE9iamVjdC5rZXlzKGFwcENvbmZpZy53aWRnZXRzW2xheW91dFdpZGdldElkXS5sYXlvdXRzID8/IHt9KS5mb3JFYWNoKGxheW91dEtleSA9PiB7XG4gICAgICBjb25zdCBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcud2lkZ2V0c1tsYXlvdXRXaWRnZXRJZF0ubGF5b3V0c1tsYXlvdXRLZXldLCBzaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldCA9IHJldC5jb25jYXQoXG4gICAgICAgIGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyhhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpXG4gICAgICApXG4gICAgfSlcbiAgfSlcblxuICByZXR1cm4gcmV0XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBsYXlvdXQgaXRlbSB0aGF0IGhvbGRzIHRoZSBjb250ZW50LlxuICogSW4gb25lIGxheW91dCwgYSBjb250ZW50IGlzIG5vdCBhbGxvd2VkIHRvIGJlIHB1dCBpbiBtdWx0aXBsZSBpdGVtcy5cbiAqIEBwYXJhbSBsYXlvdXRKc29uXG4gKiBAcGFyYW0gd2lkZ2V0SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRMYXlvdXRJdGVtIChsYXlvdXRKc29uOiBJTUxheW91dEpzb24sIGlkOiBzdHJpbmcsIHR5cGU6IExheW91dEl0ZW1UeXBlKTogSU1MYXlvdXRJdGVtSnNvbiB7XG4gIGlmICghbGF5b3V0SnNvbj8uY29udGVudCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgY29uc3QgbGF5b3V0SXRlbUlkID0gT2JqZWN0LmtleXMobGF5b3V0SnNvbi5jb250ZW50KS5maW5kKFxuICAgIGl0ZW1JZCA9PlxuICAgICAgbGF5b3V0SnNvbi5jb250ZW50W2l0ZW1JZF0udHlwZSA9PT0gdHlwZSAmJlxuICAgICAgKGxheW91dEpzb24uY29udGVudFtpdGVtSWRdLndpZGdldElkID09PSBpZCB8fCBsYXlvdXRKc29uLmNvbnRlbnRbaXRlbUlkXS5zZWN0aW9uSWQgPT09IGlkIHx8IGxheW91dEpzb24uY29udGVudFtpdGVtSWRdLnNjcmVlbkdyb3VwSWQgPT09IGlkKSAmJlxuICAgICAgIWxheW91dEpzb24uY29udGVudFtpdGVtSWRdLmlzUGVuZGluZ1xuICApXG4gIHJldHVybiBsYXlvdXRKc29uLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbGF5b3V0IGl0ZW0gaWRzIGluIGEgbGF5b3V0XG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gbGF5b3V0SWRcbiAqIEBwYXJhbSB3aXRoUGVuZGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF5b3V0SXRlbUlkcyAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgbGF5b3V0SWQ6IHN0cmluZywgd2l0aFBlbmRpbmcgPSBmYWxzZSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgbGF5b3V0ID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIGlmIChsYXlvdXQ/LmNvbnRlbnQpIHtcbiAgICByZXR1cm4gd2l0aFBlbmRpbmdcbiAgICAgID8gT2JqZWN0LmtleXMobGF5b3V0LmNvbnRlbnQpXG4gICAgICA6IE9iamVjdC5rZXlzKGxheW91dC5jb250ZW50KS5maWx0ZXIoaXRlbUlkID0+ICFsYXlvdXQuY29udGVudFtpdGVtSWRdLmlzUGVuZGluZylcbiAgfVxuICByZXR1cm4gW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExheW91dEluZm9zQnlUeXBlIChcbiAgbGF5b3V0SnNvbjogSU1MYXlvdXRKc29uLFxuICB0eXBlOiBMYXlvdXRJdGVtVHlwZSxcbiAgd2l0aFBlbmRpbmcgPSBmYWxzZVxuKTogTGF5b3V0SW5mb1tdIHtcbiAgaWYgKCFsYXlvdXRKc29uPy5jb250ZW50KSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgcmV0dXJuIE9iamVjdC5rZXlzKGxheW91dEpzb24uY29udGVudClcbiAgICAuZmlsdGVyKFxuICAgICAgaXRlbUlkID0+XG4gICAgICAgIGxheW91dEpzb24uY29udGVudFtpdGVtSWRdLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgISFnZXRDb250ZW50SWRJbkxheW91dEl0ZW0obGF5b3V0SnNvbi5jb250ZW50W2l0ZW1JZF0pICYmXG4gICAgICAgICh3aXRoUGVuZGluZyB8fCAhbGF5b3V0SnNvbi5jb250ZW50W2l0ZW1JZF0uaXNQZW5kaW5nKVxuICAgIClcbiAgICAubWFwKGl0ZW1JZCA9PiAoeyBsYXlvdXRJZDogbGF5b3V0SnNvbi5pZCwgbGF5b3V0SXRlbUlkOiBpdGVtSWQgfSkpXG59XG5cbi8qKlxuICogRmluZCBhIHdpZGdldCBpZCB0aGF0IHVzZSB0aGUgbGF5b3V0SWRcbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBsYXlvdXRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkZ2V0SWRUaGF0VXNlVGhlTGF5b3V0SWQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICBpZiAobGF5b3V0SnNvbj8ucGFyZW50Py50eXBlID09PSBMYXlvdXRQYXJlbnRUeXBlLldpZGdldCkge1xuICAgIHJldHVybiBsYXlvdXRKc29uLnBhcmVudC5pZFxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBjb250YWluZXIgdGhhdCBob2xkcyB0aGUgd2lkZ2V0LCBzZWFyY2ggdGhlIHdpZGdldHMgd2l0aCBsYXlvdXQgYnV0IGRvbid0IHNlYXJjaCB0aGUgbmVzdGVkIGNvbnRhaW5lci5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSB3aWRnZXRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudENvbnRhaW5lckluZm8gKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBpZDogc3RyaW5nLFxuICB0eXBlOiBMYXlvdXRJdGVtVHlwZSxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgd2l0aFBlbmRpbmcgPSBmYWxzZVxuKTogQ29udGFpbmVySW5mbyB7XG4gIGNvbnN0IGxheW91dEluZm8gPSBnZXRMYXlvdXRJbmZvSG9sZENvbnRlbnQoYXBwQ29uZmlnLCBpZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuXG4gIGlmIChsYXlvdXRJbmZvKSB7XG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdXG4gICAgc3dpdGNoIChsYXlvdXRKc29uLnBhcmVudD8udHlwZSkge1xuICAgICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLlBhZ2U6XG4gICAgICAgIHJldHVybiB7IHR5cGU6IENvbnRhaW5lclR5cGUuUGFnZSwgaWQ6IGxheW91dEpzb24ucGFyZW50LmlkIH1cbiAgICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5EaWFsb2c6XG4gICAgICAgIHJldHVybiB7IHR5cGU6IENvbnRhaW5lclR5cGUuRGlhbG9nLCBpZDogbGF5b3V0SnNvbi5wYXJlbnQuaWQgfVxuICAgICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLkhlYWRlcjpcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogQ29udGFpbmVyVHlwZS5IZWFkZXIsIGlkOiAnaGVhZGVyJyB9XG4gICAgICBjYXNlIExheW91dFBhcmVudFR5cGUuRm9vdGVyOlxuICAgICAgICByZXR1cm4geyB0eXBlOiBDb250YWluZXJUeXBlLkZvb3RlciwgaWQ6ICdmb290ZXInIH1cbiAgICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5WaWV3OlxuICAgICAgICByZXR1cm4geyB0eXBlOiBDb250YWluZXJUeXBlLlZpZXcsIGlkOiBsYXlvdXRKc29uLnBhcmVudC5pZCB9XG4gICAgICBjYXNlIExheW91dFBhcmVudFR5cGUuU2NyZWVuOlxuICAgICAge1xuICAgICAgICBjb25zdCBzY3JlZW5Kc29uID0gYXBwQ29uZmlnLnNjcmVlbnNbbGF5b3V0SnNvbi5wYXJlbnQuaWRdXG4gICAgICAgIGNvbnN0IG1haW5QYW5lbExheW91dElkID0gc2NyZWVuSnNvbi5tYWluLmxheW91dFtzaXplTW9kZV1cbiAgICAgICAgcmV0dXJuIHsgdHlwZTogbWFpblBhbmVsTGF5b3V0SWQgPT09IGxheW91dEluZm8ubGF5b3V0SWQgPyBDb250YWluZXJUeXBlLlNjcmVlbk1haW4gOiBDb250YWluZXJUeXBlLlNjcmVlblBhbmVsLCBpZDogbGF5b3V0SnNvbi5wYXJlbnQuaWQgfVxuICAgICAgfVxuICAgICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLldpZGdldDpcbiAgICAgIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0SWQgPSBsYXlvdXRKc29uLnBhcmVudC5pZFxuICAgICAgICByZXR1cm4gZ2V0Q29udGVudENvbnRhaW5lckluZm8oYXBwQ29uZmlnLCB3aWRnZXRJZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcm9vdCBjb250YWluZXIgb2YgdGhlIGNvbnRlbnQsIHNlYXJjaCB0aGUgd2hvbGUgbGF5b3V0IHRyZWUuIFRoZXJlIGFyZSA0IHR5cGVzIG9mIHJvb3QgY29udGFpbmVyOiBwYWdlLCB3aW5kb3csIGhlYWRlciwgZm9vdGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudFJvb3RDb250YWluZXJJbmZvIChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBpZDogc3RyaW5nLCB0eXBlOiBMYXlvdXRJdGVtVHlwZSwgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcgPSBmYWxzZSk6IENvbnRhaW5lckluZm8ge1xuICBsZXQgbGF5b3V0SW5mbyA9IGdldExheW91dEluZm9Ib2xkQ29udGVudChhcHBDb25maWcsIGlkLCB0eXBlLCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpXG4gIGxldCB1c2VTaXplTW9kZSA9IHNpemVNb2RlXG4gIGlmICghbGF5b3V0SW5mbykge1xuICAgIC8vIHRyeSB0byBmaW5kIGZyb20gbWFpbiBzaXplIG1vZGUsIHNpbmNlIHNpemVNb2RlIGxheW91dCBtYXkgYmUgdHJhbmZvcm1lZCBhdXRvbWF0aWNhbGx5IGZyb20gbWFpbiBzaXplIG1vZGVcbiAgICBsYXlvdXRJbmZvID0gZ2V0TGF5b3V0SW5mb0hvbGRDb250ZW50KGFwcENvbmZpZywgaWQsIHR5cGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICAgIHVzZVNpemVNb2RlID0gYXBwQ29uZmlnLm1haW5TaXplTW9kZVxuICB9XG5cbiAgaWYgKGxheW91dEluZm8pIHtcbiAgICByZXR1cm4gZ2V0Um9vdENvbnRhaW5lckluZm9PZkxheW91dChhcHBDb25maWcsIGxheW91dEluZm8ubGF5b3V0SWQsIHVzZVNpemVNb2RlKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb290Q29udGFpbmVySW5mb09mTGF5b3V0IChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBsYXlvdXRJZDogc3RyaW5nLCBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlKTogQ29udGFpbmVySW5mbyB7XG4gIGxldCBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gIHdoaWxlIChsYXlvdXRKc29uPy5wYXJlbnQgJiYgW0xheW91dFBhcmVudFR5cGUuU2NyZWVuLCBMYXlvdXRQYXJlbnRUeXBlLlZpZXcsIExheW91dFBhcmVudFR5cGUuV2lkZ2V0XS5pbmNsdWRlcyhsYXlvdXRKc29uLnBhcmVudC50eXBlKSkge1xuICAgIGNvbnN0IGxheW91dEluZm8gPSBmaW5kUGFyZW50TGF5b3V0SW5mbyh7IGxheW91dElkIH0sIGFwcENvbmZpZywgc2l6ZU1vZGUpXG4gICAgbGF5b3V0SWQgPSBsYXlvdXRJbmZvPy5sYXlvdXRJZFxuICAgIGxheW91dEpzb24gPSBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgfVxuICBzd2l0Y2ggKGxheW91dEpzb24/LnBhcmVudD8udHlwZSkge1xuICAgIGNhc2UgTGF5b3V0UGFyZW50VHlwZS5EaWFsb2c6XG4gICAgICByZXR1cm4geyB0eXBlOiBDb250YWluZXJUeXBlLkRpYWxvZywgaWQ6IGxheW91dEpzb24ucGFyZW50LmlkIH1cbiAgICBjYXNlIExheW91dFBhcmVudFR5cGUuUGFnZTpcbiAgICAgIHJldHVybiB7IHR5cGU6IENvbnRhaW5lclR5cGUuUGFnZSwgaWQ6IGxheW91dEpzb24ucGFyZW50LmlkIH1cbiAgICBjYXNlIExheW91dFBhcmVudFR5cGUuSGVhZGVyOlxuICAgICAgcmV0dXJuIHsgdHlwZTogQ29udGFpbmVyVHlwZS5IZWFkZXIsIGlkOiAnaGVhZGVyJyB9XG4gICAgY2FzZSBMYXlvdXRQYXJlbnRUeXBlLkZvb3RlcjpcbiAgICAgIHJldHVybiB7IHR5cGU6IENvbnRhaW5lclR5cGUuRm9vdGVyLCBpZDogJ2Zvb3RlcicgfVxuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBjb250ZW50cyBpbiBhIGNvbnRhaW5lci4gRG8gbm90IHNlYXJjaCB0aGUgbmVzdGVkIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRzSW5Db250YWluZXIgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGNvbnRhaW5lckluZm86IENvbnRhaW5lckluZm8sIHR5cGU6IExheW91dEl0ZW1UeXBlLCBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcgPSBmYWxzZSk6IHN0cmluZ1tdIHtcbiAgbGV0IGxheW91dElkXG4gIHN3aXRjaCAoY29udGFpbmVySW5mby50eXBlKSB7XG4gICAgY2FzZSBDb250YWluZXJUeXBlLlBhZ2U6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcucGFnZXM/Lltjb250YWluZXJJbmZvLmlkXT8ubGF5b3V0LCBicm93c2VyU2l6ZU1vZGUsIGFwcENvbmZpZy5tYWluU2l6ZU1vZGUpXG4gICAgICByZXR1cm4gbGF5b3V0SWQgPyBnZXRDb250ZW50c0luTGF5b3V0V2l0aFJlY3J1c2l2ZUxheW91dHMoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5IZWFkZXI6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuaGVhZGVyPy5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyhhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKSA6IFtdXG4gICAgY2FzZSBDb250YWluZXJUeXBlLkZvb3RlcjpcbiAgICAgIGxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5mb290ZXI/LmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgcmV0dXJuIGxheW91dElkID8gZ2V0Q29udGVudHNJbkxheW91dFdpdGhSZWNydXNpdmVMYXlvdXRzKGFwcENvbmZpZywgbGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpIDogW11cbiAgICBjYXNlIENvbnRhaW5lclR5cGUuVmlldzpcbiAgICAgIGxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy52aWV3cz8uW2NvbnRhaW5lckluZm8uaWRdPy5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyhhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKSA6IFtdXG4gICAgY2FzZSBDb250YWluZXJUeXBlLkRpYWxvZzpcbiAgICAgIGxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5kaWFsb2dzW2NvbnRhaW5lckluZm8uaWRdLmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgcmV0dXJuIGxheW91dElkID8gZ2V0Q29udGVudHNJbkxheW91dFdpdGhSZWNydXNpdmVMYXlvdXRzKGFwcENvbmZpZywgbGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpIDogW11cbiAgICBjYXNlIENvbnRhaW5lclR5cGUuU2NyZWVuTWFpbjpcbiAgICBjYXNlIENvbnRhaW5lclR5cGUuU2NyZWVuUGFuZWw6XG4gICAgICBpZiAoIWFwcENvbmZpZy5zY3JlZW5zIHx8ICFhcHBDb25maWcuc2NyZWVuc1tjb250YWluZXJJbmZvLmlkXSkge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICAgIGNvbnN0IG1haW5MYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuc2NyZWVuc1tjb250YWluZXJJbmZvLmlkXS5tYWluLmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgaWYgKCFtYWluTGF5b3V0SWQpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgICBjb25zdCBtYWluQ29udGVudHMgPSBnZXRDb250ZW50c0luTGF5b3V0V2l0aFJlY3J1c2l2ZUxheW91dHMoYXBwQ29uZmlnLCBtYWluTGF5b3V0SWQsIHR5cGUsIGJyb3dzZXJTaXplTW9kZSwgd2l0aFBlbmRpbmcpXG5cbiAgICAgIGlmIChhcHBDb25maWcuc2NyZWVuc1tjb250YWluZXJJbmZvLmlkXS5wYW5lbCkge1xuICAgICAgICBjb25zdCBwYW5lbExheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5zY3JlZW5zW2NvbnRhaW5lckluZm8uaWRdLnBhbmVsLmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgICBjb25zdCBwYW5lbENvbnRlbnRzID0gZ2V0Q29udGVudHNJbkxheW91dFdpdGhSZWNydXNpdmVMYXlvdXRzKGFwcENvbmZpZywgcGFuZWxMYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZylcblxuICAgICAgICByZXR1cm4gbWFpbkNvbnRlbnRzLmNvbmNhdChwYW5lbENvbnRlbnRzKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWFpbkNvbnRlbnRzXG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdGhlIGNvbnRlbnRzIGluIGEgY29udGFpbmVyLiBTZWFyY2ggdGhlIHdob2xlIGxheW91dCB0cmVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgY29udGFpbmVySW5mbzogQ29udGFpbmVySW5mbywgdHlwZTogTGF5b3V0SXRlbVR5cGUsIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZyA9IGZhbHNlKTogc3RyaW5nW10ge1xuICBsZXQgbGF5b3V0SWRcbiAgc3dpdGNoIChjb250YWluZXJJbmZvLnR5cGUpIHtcbiAgICBjYXNlIENvbnRhaW5lclR5cGUuUGFnZTpcbiAgICAgIGxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5wYWdlcz8uW2NvbnRhaW5lckluZm8uaWRdPy5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5IZWFkZXI6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuaGVhZGVyPy5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5Gb290ZXI6XG4gICAgICBsYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuZm9vdGVyPy5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIHJldHVybiBsYXlvdXRJZCA/IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlLCB3aXRoUGVuZGluZykgOiBbXVxuICAgIGNhc2UgQ29udGFpbmVyVHlwZS5WaWV3OlxuICAgICAgbGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLnZpZXdzPy5bY29udGFpbmVySW5mby5pZF0/LmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgcmV0dXJuIGxheW91dElkID8gZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZShhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKSA6IFtdXG4gICAgY2FzZSBDb250YWluZXJUeXBlLkRpYWxvZzpcbiAgICAgIGxheW91dElkID0gZmluZExheW91dElkKGFwcENvbmZpZy5kaWFsb2dzW2NvbnRhaW5lckluZm8uaWRdLmxheW91dCwgYnJvd3NlclNpemVNb2RlLCBhcHBDb25maWcubWFpblNpemVNb2RlKVxuICAgICAgcmV0dXJuIGxheW91dElkID8gZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZShhcHBDb25maWcsIGxheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIHdpdGhQZW5kaW5nKSA6IFtdXG4gICAgY2FzZSBDb250YWluZXJUeXBlLlNjcmVlbk1haW46XG4gICAgY2FzZSBDb250YWluZXJUeXBlLlNjcmVlblBhbmVsOlxuICAgICAgaWYgKCFhcHBDb25maWcuc2NyZWVucyB8fCAhYXBwQ29uZmlnLnNjcmVlbnNbY29udGFpbmVySW5mby5pZF0pIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgICBjb25zdCBtYWluTGF5b3V0SWQgPSBmaW5kTGF5b3V0SWQoYXBwQ29uZmlnLnNjcmVlbnNbY29udGFpbmVySW5mby5pZF0ubWFpbi5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgIGlmICghbWFpbkxheW91dElkKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgICAgY29uc3QgbWFpbkNvbnRlbnRzID0gZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZShhcHBDb25maWcsIG1haW5MYXlvdXRJZCwgdHlwZSwgYnJvd3NlclNpemVNb2RlKVxuXG4gICAgICBpZiAoYXBwQ29uZmlnLnNjcmVlbnNbY29udGFpbmVySW5mby5pZF0ucGFuZWwpIHtcbiAgICAgICAgY29uc3QgcGFuZWxMYXlvdXRJZCA9IGZpbmRMYXlvdXRJZChhcHBDb25maWcuc2NyZWVuc1tjb250YWluZXJJbmZvLmlkXS5wYW5lbC5sYXlvdXQsIGJyb3dzZXJTaXplTW9kZSwgYXBwQ29uZmlnLm1haW5TaXplTW9kZSlcbiAgICAgICAgY29uc3QgcGFuZWxDb250ZW50cyA9IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBwYW5lbExheW91dElkLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUpXG5cbiAgICAgICAgcmV0dXJuIG1haW5Db250ZW50cy5jb25jYXQocGFuZWxDb250ZW50cylcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1haW5Db250ZW50c1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBjb250ZW50cyBpbiBhIGNvbnRhaW5lciB3aXRoIG1vcmUgb3B0aW9ucywgc2VhcmNoIHRoZSB3aG9sZSBsYXlvdXQgdHJlZS5cbiAqXG4gKiBoZWFkZXIsIGZvb3RlciBhbmQgdGhlIGN1cnJlbnQgcGFnZSBib2R5IGFyZSBjb25zaWRlcmVkIGFzIG9uZSBjb250YWluZXIuXG4gKlxuICogQHBhcmFtIG9wdGlvbnNcbiAqICAgIHRoZSBjdXJyZW50UGFnZUlkIHdpbGwgYmUgdXNlZCBpZiB0aGUgY29udGFpbmVyIGlzIGhlYWRlci9mb290ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50c0luQ29udGFpbmVyUmVjdXJzaXZlQWR2IChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBjb250YWluZXJJbmZvOiBDb250YWluZXJJbmZvLCB0eXBlOiBMYXlvdXRJdGVtVHlwZSwgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIG9wdGlvbnM6IHsgaW5jbHVkZVBlbmRpbmc6IGJvb2xlYW4sIGluY2x1ZGVPdGhlclNpemVNb2RlOiBib29sZWFuLCBjdXJyZW50UGFnZUlkPzogc3RyaW5nIH0pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGdldENvbnRlbnRzSW5PbmVDb250YWluZXIgPSAoX2NvbnRhaW5lckluZm8pID0+IHtcbiAgICBsZXQgaWRzID0gW11cbiAgICBpZiAob3B0aW9ucy5pbmNsdWRlT3RoZXJTaXplTW9kZSkge1xuICAgICAgaWRzID0gaWRzLmNvbmNhdChcbiAgICAgICAgZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZShhcHBDb25maWcsIF9jb250YWluZXJJbmZvLCB0eXBlLCBCcm93c2VyU2l6ZU1vZGUuTGFyZ2UsIG9wdGlvbnMuaW5jbHVkZVBlbmRpbmcpLFxuICAgICAgICBnZXRDb250ZW50c0luQ29udGFpbmVyUmVjdXJzaXZlKGFwcENvbmZpZywgX2NvbnRhaW5lckluZm8sIHR5cGUsIEJyb3dzZXJTaXplTW9kZS5NZWRpdW0sIG9wdGlvbnMuaW5jbHVkZVBlbmRpbmcpLFxuICAgICAgICBnZXRDb250ZW50c0luQ29udGFpbmVyUmVjdXJzaXZlKGFwcENvbmZpZywgX2NvbnRhaW5lckluZm8sIHR5cGUsIEJyb3dzZXJTaXplTW9kZS5TbWFsbCwgb3B0aW9ucy5pbmNsdWRlUGVuZGluZylcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgaWRzID0gZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZShhcHBDb25maWcsIF9jb250YWluZXJJbmZvLCB0eXBlLCBicm93c2VyU2l6ZU1vZGUsIG9wdGlvbnMuaW5jbHVkZVBlbmRpbmcpXG4gICAgfVxuICAgIGlkcyA9IEFycmF5LmZyb20obmV3IFNldChpZHMpKVxuICAgIHJldHVybiBpZHNcbiAgfVxuXG4gIGlmIChjb250YWluZXJJbmZvLnR5cGUgPT09IENvbnRhaW5lclR5cGUuRGlhbG9nKSB7XG4gICAgcmV0dXJuIGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoY29udGFpbmVySW5mbylcbiAgfVxuXG4gIGlmIChjb250YWluZXJJbmZvLnR5cGUgPT09IENvbnRhaW5lclR5cGUuUGFnZSkge1xuICAgIGNvbnN0IHBhZ2VKc29uID0gYXBwQ29uZmlnLnBhZ2VzW2NvbnRhaW5lckluZm8uaWRdXG4gICAgbGV0IGlkcyA9IGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoY29udGFpbmVySW5mbylcbiAgICBpZiAocGFnZUpzb24uaGVhZGVyKSB7XG4gICAgICBpZHMgPSBpZHMuY29uY2F0KGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoeyB0eXBlOiBDb250YWluZXJUeXBlLkhlYWRlciwgaWQ6ICdoZWFkZXInIH0pKVxuICAgIH1cbiAgICBpZiAocGFnZUpzb24uZm9vdGVyKSB7XG4gICAgICBpZHMgPSBpZHMuY29uY2F0KGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoeyB0eXBlOiBDb250YWluZXJUeXBlLkZvb3RlciwgaWQ6ICdmb290ZXInIH0pKVxuICAgIH1cbiAgICBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaWRzKSlcbiAgICByZXR1cm4gaWRzXG4gIH1cblxuICBpZiAoY29udGFpbmVySW5mby50eXBlID09PSBDb250YWluZXJUeXBlLkhlYWRlcikge1xuICAgIGNvbnN0IHBhZ2VKc29uID0gYXBwQ29uZmlnLnBhZ2VzW29wdGlvbnMuY3VycmVudFBhZ2VJZF1cbiAgICBsZXQgaWRzID0gZ2V0Q29udGVudHNJbk9uZUNvbnRhaW5lcihjb250YWluZXJJbmZvKS5jb25jYXQoZ2V0Q29udGVudHNJbk9uZUNvbnRhaW5lcih7IHR5cGU6IENvbnRhaW5lclR5cGUuUGFnZSwgaWQ6IG9wdGlvbnMuY3VycmVudFBhZ2VJZCB9KSlcbiAgICBpZiAocGFnZUpzb24/LmZvb3Rlcikge1xuICAgICAgaWRzID0gaWRzLmNvbmNhdChnZXRDb250ZW50c0luT25lQ29udGFpbmVyKHsgdHlwZTogQ29udGFpbmVyVHlwZS5Gb290ZXIsIGlkOiAnZm9vdGVyJyB9KSlcbiAgICB9XG4gICAgaWRzID0gQXJyYXkuZnJvbShuZXcgU2V0KGlkcykpXG4gICAgcmV0dXJuIGlkc1xuICB9XG5cbiAgaWYgKGNvbnRhaW5lckluZm8udHlwZSA9PT0gQ29udGFpbmVyVHlwZS5Gb290ZXIpIHtcbiAgICBjb25zdCBwYWdlSnNvbiA9IGFwcENvbmZpZy5wYWdlc1tvcHRpb25zLmN1cnJlbnRQYWdlSWRdXG4gICAgbGV0IGlkcyA9IGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoY29udGFpbmVySW5mbykuY29uY2F0KGdldENvbnRlbnRzSW5PbmVDb250YWluZXIoeyB0eXBlOiBDb250YWluZXJUeXBlLlBhZ2UsIGlkOiBvcHRpb25zLmN1cnJlbnRQYWdlSWQgfSkpXG4gICAgaWYgKHBhZ2VKc29uPy5oZWFkZXIpIHtcbiAgICAgIGlkcyA9IGlkcy5jb25jYXQoZ2V0Q29udGVudHNJbk9uZUNvbnRhaW5lcih7IHR5cGU6IENvbnRhaW5lclR5cGUuSGVhZGVyLCBpZDogJ2hlYWRlcicgfSkpXG4gICAgfVxuICAgIGlkcyA9IEFycmF5LmZyb20obmV3IFNldChpZHMpKVxuICAgIHJldHVybiBpZHNcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbGF5b3V0SWQgZm9yIHNwZWNpZmljIHNpemVNb2RlLiBJZiB0aGUgc2l6ZU1vZGUgZG9lcyBub3QgZXhpc3QsIHJldHVybiB0aGUgbWFpbiBzaXplTW9kZSBsYXlvdXRJZC5cbiAqIEBwYXJhbSBsYXlvdXRzXG4gKiBAcGFyYW0gYnJvd3NlclNpemVNb2RlXG4gKiBAcGFyYW0gbWFpblNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGF5b3V0SWQgKFxuICBsYXlvdXRzOiBJTVNpemVNb2RlTGF5b3V0SnNvbixcbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gIG1haW5TaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pOiBzdHJpbmcge1xuICBpZiAoIWxheW91dHMpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHJldHVybiBsYXlvdXRzW2Jyb3dzZXJTaXplTW9kZV0gfHwgbGF5b3V0c1ttYWluU2l6ZU1vZGVdXG59XG5cbi8qKlxuICogSWYgdGhlIGNvbnRlbnQgaGFzIG9ubHkgb25lIHBhcmVudCwgcmV0dXJuIGl0IGRpcmVjdGx5LlxuICogSWYgdGhlIGNvbnRlbnQgaGFzIG11bHRpcGxlIHBhcmVudHMsIHRoZXNlIHBhcmVudHMgbXVzdCBiZSBjb250YWluZWQgaW4gYSB3aWRnZXQncyBsYXlvdXQsIHJldHVybiB0aGUgd2lkZ2V0J3MgcGFyZW50LlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGlkXG4gKiBAcGFyYW0gdHlwZVxuICogQHBhcmFtIHNpemVNb2RlXG4gKiBAcGFyYW0gd2l0aFBlbmRpbmdcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXlvdXRJbmZvSG9sZENvbnRlbnQgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBpZDogc3RyaW5nLFxuICB0eXBlOiBMYXlvdXRJdGVtVHlwZSxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgd2l0aFBlbmRpbmcgPSB0cnVlXG4pOiBMYXlvdXRJbmZvIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cDpcbiAgICB7XG4gICAgICBjb25zdCBzZyA9IGFwcENvbmZpZy5zY3JlZW5Hcm91cHNbaWRdXG4gICAgICBjb25zdCBsYXlvdXRJbmZvID0gc2cucGFyZW50Py5bc2l6ZU1vZGVdXG4gICAgICBjb25zdCBsYXlvdXRJdGVtID0gZmluZExheW91dEl0ZW0oYXBwQ29uZmlnLCBsYXlvdXRJbmZvKVxuICAgICAgcmV0dXJuIHdpdGhQZW5kaW5nIHx8ICFsYXlvdXRJdGVtPy5pc1BlbmRpbmcgPyBsYXlvdXRJbmZvIDogbnVsbFxuICAgIH1cbiAgICBjYXNlIExheW91dEl0ZW1UeXBlLlNlY3Rpb246XG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQ6XG4gICAge1xuICAgICAgbGV0IGNvbnRlbnRcbiAgICAgIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgICAgY29udGVudCA9IGFwcENvbmZpZy53aWRnZXRzW2lkXVxuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24pIHtcbiAgICAgICAgY29udGVudCA9IGFwcENvbmZpZy5zZWN0aW9uc1tpZF1cbiAgICAgIH1cbiAgICAgIGlmIChjb250ZW50Py5wYXJlbnQ/LltzaXplTW9kZV0/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCBsYXlvdXRJbmZvID0gY29udGVudC5wYXJlbnRbc2l6ZU1vZGVdWzBdXG4gICAgICAgIGNvbnN0IGxheW91dEl0ZW0gPSBmaW5kTGF5b3V0SXRlbShhcHBDb25maWcsIGxheW91dEluZm8pXG4gICAgICAgIHJldHVybiB3aXRoUGVuZGluZyB8fCAhbGF5b3V0SXRlbT8uaXNQZW5kaW5nID8gbGF5b3V0SW5mbyA6IG51bGxcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZW50Py5wYXJlbnQ/LltzaXplTW9kZV0/Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gZmluZCBncmFuZCBwYXJuZXRcbiAgICAgICAgY29uc3QgbGF5b3V0SW5mbyA9IGNvbnRlbnQucGFyZW50W3NpemVNb2RlXVswXVxuICAgICAgICBjb25zdCBwYXJlbnRMYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF1cbiAgICAgICAgaWYgKHBhcmVudExheW91dEpzb24/LnBhcmVudCkge1xuICAgICAgICAgIHJldHVybiBnZXRMYXlvdXRJbmZvSG9sZENvbnRlbnQoYXBwQ29uZmlnLCBwYXJlbnRMYXlvdXRKc29uLnBhcmVudC5pZCwgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIEluIG9uZSBsYXlvdXQsIG9uZSB3aWRnZXQvc2VjdGlvbiBpcyBOT1QgYWxsb3dlZCBiZSBwdXQgaW4gbW9yZSB0aGFuIG9uZSBsYXlvdXQgaXRlbS5cbiAqIEhvd2V2ZXIsIGluIHdpZGdldCB0aGF0IGhhcyBsYXlvdXRzLCBvbmUgd2lkZ2V0L3NlY3Rpb24gbWF5IGJlIHB1dCBpbiBtdWx0aXBsZSBsYXlvdXRzLlxuICpcbiAqIGlmIGBzaXplTW9kZWAgaXMgcGFzc2VkIGluLCByZXR1cm4gdGhlIGl0ZW1zIGluIHRoZSBzaXplIG1vZGUgb25seSwgZWxzZSByZXR1cm4gYWxsIGl0ZW1zXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gdHlwZVxuICogQHBhcmFtIGlkXG4gKiBAcGFyYW0gc2l6ZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExheW91dEluZm9zSG9sZGNvbnRlbnQgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICB0eXBlOiBMYXlvdXRJdGVtVHlwZSxcbiAgaWQ6IHN0cmluZyxcbiAgc2l6ZU1vZGU/OiBCcm93c2VyU2l6ZU1vZGVcbik6IExheW91dEluZm9bXSB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXA6XG4gICAge1xuICAgICAgY29uc3Qgc2cgPSBhcHBDb25maWcuc2NyZWVuR3JvdXBzW2lkXVxuICAgICAgaWYgKHNnLnBhcmVudCkge1xuICAgICAgICBpZiAoc2l6ZU1vZGUpIHtcbiAgICAgICAgICByZXR1cm4gW3NnLnBhcmVudFtzaXplTW9kZV1dXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoc2cucGFyZW50KVxuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIExheW91dEl0ZW1UeXBlLlNlY3Rpb246XG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQ6XG4gICAge1xuICAgICAgbGV0IGNvbnRlbnRcbiAgICAgIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgICAgY29udGVudCA9IGFwcENvbmZpZy53aWRnZXRzW2lkXVxuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24pIHtcbiAgICAgICAgY29udGVudCA9IGFwcENvbmZpZy5zZWN0aW9uc1tpZF1cbiAgICAgIH1cbiAgICAgIGlmIChjb250ZW50Py5wYXJlbnQpIHsgLy8gcGxhY2Vob2xkZXIgaGFzIG5vIGNvbnRlbnRcbiAgICAgICAgaWYgKHNpemVNb2RlKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRlbnQucGFyZW50W3NpemVNb2RlXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdXG4gICAgICAgIE9iamVjdC52YWx1ZXMoY29udGVudC5wYXJlbnQpLmZvckVhY2goKGxheW91dEluZm9zOiBMYXlvdXRJbmZvW10pID0+IHtcbiAgICAgICAgICByZXN1bHQucHVzaCguLi5sYXlvdXRJbmZvcylcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gW11cbn1cblxuLyoqXG4gKiBGaW5kIGEgd2lkZ2V0IGlkIChwYXJlbnQgd2lkZ2V0IGlkKSB0aGF0IHRoZSB3aWRnZXQgbGF5b3V0IGNvbnRhaW5zIHRoZSB3aWRnZXRJZC9zZWN0aW9uSWQuXG4gKiBSZXR1cm4gdGhlIGRpcmVjdCBwYXJlbnQgb25seS5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBpZCB0aGUgd2lkZ2V0L3NlY3Rpb24gaWRcbiAqIEBwYXJhbSB0eXBlXG4gKiBAcGFyYW0gc2l6ZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudFdpZGdldElkT2ZDb250ZW50IChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IHN0cmluZyB7XG4gIGxldCBwYXJlbnRMYXlvdXRJZFxuICBpZiAodHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0KSB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZy53aWRnZXRzW2lkXVxuICAgIHBhcmVudExheW91dElkID0gd2lkZ2V0SnNvbj8ucGFyZW50Py5bc2l6ZU1vZGVdPy5bMF0/LmxheW91dElkXG4gIH1cbiAgaWYgKHR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24pIHtcbiAgICBjb25zdCBzZWN0aW9uSnNvbiA9IGFwcENvbmZpZy5zZWN0aW9uc1tpZF1cbiAgICBwYXJlbnRMYXlvdXRJZCA9IHNlY3Rpb25Kc29uPy5wYXJlbnQ/LltzaXplTW9kZV0/LlswXT8ubGF5b3V0SWRcbiAgfVxuICBpZiAocGFyZW50TGF5b3V0SWQpIHtcbiAgICBjb25zdCBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbcGFyZW50TGF5b3V0SWRdXG4gICAgaWYgKGxheW91dEpzb24/LnBhcmVudD8udHlwZSA9PT0gTGF5b3V0UGFyZW50VHlwZS5XaWRnZXQpIHtcbiAgICAgIHJldHVybiBsYXlvdXRKc29uLnBhcmVudC5pZFxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIEdldCBjaGlsZHJlbiB3aWRnZXRzL3NlY3Rpb25zIGluIGEgd2lkZ2V0LCBmaW5kIG9uZSBsZXZlbCBvbmx5LiBJbmNsdWRlcyBhbGwgc2l6ZSBtb2RlXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gcGFyZW50V2lkZ2V0SWRcbiAqIEBwYXJhbSB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGlsZHJlbkNvbnRlbnRzIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgcGFyZW50V2lkZ2V0SWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHdpdGhQZW5kaW5nOiBib29sZWFuXG4pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHBhcmVudFdpZGdldEpzb24gPSBhcHBDb25maWcud2lkZ2V0c1twYXJlbnRXaWRnZXRJZF1cbiAgaWYgKCFwYXJlbnRXaWRnZXRKc29uLmxheW91dHMpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBsZXQgcmV0OiBzdHJpbmdbXSA9IFtdXG4gIE9iamVjdC5rZXlzKHBhcmVudFdpZGdldEpzb24ubGF5b3V0cykuZm9yRWFjaChsYXlvdXROYW1lID0+IHtcbiAgICBPYmplY3Qua2V5cyhwYXJlbnRXaWRnZXRKc29uLmxheW91dHNbbGF5b3V0TmFtZV0pLmZvckVhY2goc2l6ZU1vZGUgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW3BhcmVudFdpZGdldEpzb24ubGF5b3V0c1tsYXlvdXROYW1lXVtzaXplTW9kZV1dXG4gICAgICByZXQgPSByZXQuY29uY2F0KGdldENvbnRlbnRzSW5MYXlvdXQobGF5b3V0SnNvbiwgdHlwZSwgd2l0aFBlbmRpbmcpKVxuICAgIH0pXG4gIH0pXG5cbiAgLy8gcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXQpKVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbGF5b3V0SW5mbyBmb3IgdGhlIHdpZGdldC9zZWN0aW9uLCB0aGVyZSBtYXkgYmUgbXVsdGlwbGUgbGF5b3V0SW5mb3MgZm9yIHRoZSB3aWRnZXQvc2VjdGlvbi5cbiAqXG4gKiBPbmUgd2lkZ2V0L3NlY3Rpb24gaXMgYWxsb3dlZCB0byBiZSBwdXQgaW4gb25lIGxheW91dCBvbmx5IG9uZSB0aW1lLCBidXQgaXQncyBhbGxvd2VkIGJlIHB1dCBpbiBtdWx0aXBsZSBsYXlvdXRzLlxuICogVGhlcmUgYXJlIDIgY2FzZXMgZm9yIG11bHRpcGxlIGxheW91dHM6XG4gKiAgICAqIE9uZSB3aWRnZXQvc2VjdGlvbiBpcyBhbGxvd2VkIHRvIGJlIHB1dCBpbiBtdWx0aXBsZSBzaXplIG1vZGUgKHRoaXMgZnVuY3Rpb24gaXMgZm9yIG9uZSBzaXplIG1vZGUgb25seSwgc28gd2UgZG9uJ3QgY29uc2lkZXIgdGhpcyBjYXNlKVxuICogICAgKiBJbiBvbmUgc2l6ZSBtb2RlLCBvbmUgd2lkZ2V0IChpLmUuIExpc3Qgd2lkZ2V0KSBtYXkgaGF2ZSBtdWx0aXBsZSBzdGF0ZSBsYXlvdXRzIHRvIGhvbGQgdGhlIHNhbWUgd2lkZ2V0LlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGNvbnRlbnRJZFxuICogQHBhcmFtIHR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRMYXlvdXRJbmZvc0luT25lU2l6ZU1vZGUgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBjb250ZW50SWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbik6IExheW91dEluZm9bXSB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXA6XG4gICAge1xuICAgICAgY29uc3Qgc2cgPSBhcHBDb25maWcuc2NyZWVuR3JvdXBzW2NvbnRlbnRJZF1cbiAgICAgIGlmIChzZy5wYXJlbnQ/LltzaXplTW9kZV0pIHtcbiAgICAgICAgcmV0dXJuIFtzZy5wYXJlbnRbc2l6ZU1vZGVdXVxuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIExheW91dEl0ZW1UeXBlLlNlY3Rpb246XG4gICAgY2FzZSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQ6XG4gICAge1xuICAgICAgbGV0IGNvbnRlbnRcbiAgICAgIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgICAgY29udGVudCA9IGFwcENvbmZpZy53aWRnZXRzW2NvbnRlbnRJZF1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uKSB7XG4gICAgICAgIGNvbnRlbnQgPSBhcHBDb25maWcuc2VjdGlvbnNbY29udGVudElkXVxuICAgICAgfVxuICAgICAgaWYgKGNvbnRlbnQ/LnBhcmVudD8uW3NpemVNb2RlXT8ubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gY29udGVudC5wYXJlbnRbc2l6ZU1vZGVdXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBbXVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgc2l6ZSBtb2RlIG9mIHRoZSBsYXlvdXQuIEJlY2F1c2UgdW5kZXIgb25lIHNpemUgbW9kZSwgb25seSB3aWRnZXQgbWF5IGhhdmUgbXVsdGlwbGUgbGF5b3V0cyxcbiAqIGFuZCB0aGlzIGZ1bmN0aW9uIGlzIHVzZWQgb25seSBmb3Igd2lkZ2V0cyB0aGF0IGhhdmUgbGF5b3V0cywgc28gcGFzcyB3aWRnZXQgaWQgdG8gbWFrZSB0aGUgc2VhcmNoIGVhc3kuXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gbGF5b3V0SWRcbiAqIEBwYXJhbSB3aWRnZXRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnJvd3NlclNpemVNb2RlQnlMYXlvdXRJZEFuZFdpZGdldElkIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgbGF5b3V0SWQ6IHN0cmluZyxcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuKTogQnJvd3NlclNpemVNb2RlIHtcbiAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICBpZiAoIXdpZGdldEpzb24pIHJldHVybiB1bmRlZmluZWRcbiAgbGV0IHNpemVNb2RlXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBPYmplY3Qua2V5cyh3aWRnZXRKc29uLmxheW91dHMpLmZpbmQobmFtZSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgcmVzID0gT2JqZWN0LmtleXMod2lkZ2V0SnNvbi5sYXlvdXRzW25hbWVdKS5maW5kKGRldmljZSA9PiB7XG4gICAgICBpZiAod2lkZ2V0SnNvbi5sYXlvdXRzW25hbWVdW2RldmljZV0gPT09IGxheW91dElkKSB7XG4gICAgICAgIHNpemVNb2RlID0gZGV2aWNlXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBpZiAocmVzKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIHNpemVNb2RlXG59XG5cbi8qKlxuICogR2V0IHRoZSBzaXplIG1vZGUgdGhhdCB0aGUgbGF5b3V0IGJlbG9uZ3MgdG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJyb3dzZXJTaXplTW9kZUJ5TGF5b3V0SWQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dElkOiBzdHJpbmcpOiBCcm93c2VyU2l6ZU1vZGUge1xuICByZXR1cm4gYXBwQ29uZmlnVXRpbHMuZ2V0U2l6ZU1vZGVPZkFMYXlvdXQoYXBwQ29uZmlnLCBsYXlvdXRJZClcbn1cblxuLyoqXG4gKiBGaW5kIGFsbCBsYXlvdXRJbmZvcyB0aGF0IHRoZSBjb250ZW50IGlkLCBzZWN0aW9uIG9yIHdpZGdldCwgaXMgZXF1YWwgdG8gZWFjaCBvdGhlciBpbiB0aGUgd2lkZ2V0IG9uIHRoZSBicm93c2VyU2l6ZU1vZGVcbiAqXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gbGF5b3V0SW5mb1xuICogQHBhcmFtIHBhcmVudFdpZGdldElkXG4gKiBAcGFyYW0gc2l6ZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbGF0ZWRMYXlvdXRJbmZvc0luV2lkZ2V0QnlMYXlvdXRJbmZvIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgcGFyZW50V2lkZ2V0SWQ6IHN0cmluZyxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogTGF5b3V0SW5mb1tdIHtcbiAgY29uc3QgcGFyZW50V2lkZ2V0ID0gYXBwQ29uZmlnLndpZGdldHNbcGFyZW50V2lkZ2V0SWRdXG4gIGlmICghcGFyZW50V2lkZ2V0KSByZXR1cm4gW11cbiAgY29uc3QgbGF5b3V0SXRlbSA9XG4gICAgYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF0gJiZcbiAgICBhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJbmZvLmxheW91dElkXS5jb250ZW50ICYmXG4gICAgYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SW5mby5sYXlvdXRJZF0uY29udGVudFtsYXlvdXRJbmZvLmxheW91dEl0ZW1JZF1cbiAgaWYgKCFsYXlvdXRJdGVtKSByZXR1cm4gW11cblxuICBjb25zdCBjb250ZW50VHlwZSA9IGxheW91dEl0ZW0udHlwZVxuICBsZXQgY29udGVudElkXG4gIC8vIE5vIG5lZWQgdG8gZGVhbCB3aXRoIHNjcmVlbiBncm91cCBhcyBpdCBjYW5ub3QgYmUgcGxhY2VkIGluIGEgbGF5b3V0IHdpZGdldFxuICBpZiAoY29udGVudFR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24pIHtcbiAgICBjb250ZW50SWQgPSBsYXlvdXRJdGVtLnNlY3Rpb25JZFxuICB9IGVsc2UgaWYgKGNvbnRlbnRUeXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICBjb250ZW50SWQgPSBsYXlvdXRJdGVtLndpZGdldElkXG4gIH1cblxuICAvLyB3aWRnZXRJZCBtYXkgYmUgdW5kZWZpbmVkIGZvciBwbGFjZWhvbGRlclxuICBpZiAoIWNvbnRlbnRJZCkge1xuICAgIGlmIChjaGVja0lzTGF5b3V0SW5mb0luV2lkZ2V0KGFwcENvbmZpZywgcGFyZW50V2lkZ2V0SWQsIGxheW91dEluZm8pKSB7XG4gICAgICByZXR1cm4gW2xheW91dEluZm9dXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZXRDb250ZW50TGF5b3V0SW5mb3NJbldpZGdldChhcHBDb25maWcsIGNvbnRlbnRJZCwgY29udGVudFR5cGUsIHBhcmVudFdpZGdldElkLCBzaXplTW9kZSlcbn1cblxuLyoqXG4gKiBTYW1lIGFzIGBnZXRSZWxhdGVkTGF5b3V0SW5mb3NJbldpZGdldEJ5TGF5b3V0SW5mb2AsIGJ1dCByZXR1cm4gdGhlIGxheW91dCBpdGVtc1xuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGxheW91dEluZm9cbiAqIEBwYXJhbSBwYXJlbnRXSWRcbiAqIEBwYXJhbSBicm93c2VyU2l6ZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbGF0ZWRMYXlvdXRJdGVtc0luV2lkZ2V0QnlMYXlvdXRJbmZvIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyxcbiAgcGFyZW50V0lkOiBzdHJpbmcsXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pOiBMYXlvdXRJdGVtSnNvbltdIHtcbiAgcmV0dXJuIGdldFJlbGF0ZWRMYXlvdXRJbmZvc0luV2lkZ2V0QnlMYXlvdXRJbmZvKGFwcENvbmZpZywgbGF5b3V0SW5mbywgcGFyZW50V0lkLCBicm93c2VyU2l6ZU1vZGUpLm1hcChcbiAgICBsYXlvdXRJbmZvID0+IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdW2xheW91dEluZm8ubGF5b3V0SXRlbUlkXVxuICApXG59XG5cbi8qKlxuICogRmluZCBsYXlvdXQgaW5mb3MgaW4gYSB3aWRnZXQgdGhhdCBob2xkcyB0aGUgc3BlY2lmaWMgd2lkZ2V0IG9yIHNlY3Rpb24uXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gaWQgVGhlIHdpZGdldCBvciBzZWN0aW9uIGlkIHRvIGJlIHNlYXJjaGVkXG4gKiBAcGFyYW0gdHlwZVxuICogQHBhcmFtIHBhcmVudFdpZGdldElkIFRoZSBjb250YWluZXIgd2lkZ2V0XG4gKiBAcGFyYW0gYnJvd3NlclNpemVNb2RlXG4gKi9cbmZ1bmN0aW9uIGdldENvbnRlbnRMYXlvdXRJbmZvc0luV2lkZ2V0IChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHBhcmVudFdpZGdldElkOiBzdHJpbmcsXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pOiBMYXlvdXRJbmZvW10ge1xuICBjb25zdCBwYXJlbnRXaWRnZXQgPSBhcHBDb25maWcud2lkZ2V0c1twYXJlbnRXaWRnZXRJZF1cbiAgaWYgKCFwYXJlbnRXaWRnZXQgfHwgIWlkKSByZXR1cm4gW11cbiAgY29uc3QgaXRlbXMgPSBbXVxuICBwYXJlbnRXaWRnZXQubGF5b3V0cyAmJlxuICAgIE9iamVjdC5rZXlzKHBhcmVudFdpZGdldC5sYXlvdXRzKS5mb3JFYWNoKHMgPT4ge1xuICAgICAgY29uc3QgbGF5b3V0SWQgPSBwYXJlbnRXaWRnZXQubGF5b3V0c1tzXVticm93c2VyU2l6ZU1vZGVdXG4gICAgICBjb25zdCBsYXlvdXRKc29uID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdXG4gICAgICBsYXlvdXRKc29uICYmXG4gICAgICAgIGxheW91dEpzb24uY29udGVudCAmJlxuICAgICAgICBPYmplY3Qua2V5cyhsYXlvdXRKc29uLmNvbnRlbnQpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBjb25zdCBsYXlvdXRFbGUgPSBsYXlvdXRKc29uLmNvbnRlbnRba2V5XVxuICAgICAgICAgIGlmIChsYXlvdXRFbGUudHlwZSA9PT0gdHlwZSAmJiAobGF5b3V0RWxlLndpZGdldElkID09PSBpZCB8fCBsYXlvdXRFbGUuc2VjdGlvbklkID09PSBpZCB8fCBsYXlvdXRFbGUuc2NyZWVuR3JvdXBJZCA9PT0gaWQpKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAgbGF5b3V0SWQ6IGxheW91dEpzb24uaWQsXG4gICAgICAgICAgICAgIGxheW91dEl0ZW1JZDogbGF5b3V0RWxlLmlkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSBpZiAobGF5b3V0RWxlLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCkge1xuICAgICAgICAgICAgY29uc3Qgd0pzb24gPSBhcHBDb25maWcud2lkZ2V0c1tsYXlvdXRFbGUud2lkZ2V0SWRdXG4gICAgICAgICAgICBpZiAod0pzb24gJiYgd0pzb24ubWFuaWZlc3Qud2lkZ2V0VHlwZSA9PT0gV2lkZ2V0VHlwZS5MYXlvdXQpIHtcbiAgICAgICAgICAgICAgaXRlbXMucHVzaCguLi5nZXRDb250ZW50TGF5b3V0SW5mb3NJbldpZGdldChhcHBDb25maWcsIGlkLCB0eXBlLCB3SnNvbi5pZCwgYnJvd3NlclNpemVNb2RlKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbiAgcmV0dXJuIGl0ZW1zXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0lzTGF5b3V0SW5mb0luV2lkZ2V0IChhcHBDb25maWc6IElNQXBwQ29uZmlnLCBwYXJlbnRXSWQ6IHN0cmluZywgbGF5b3V0SW5mbzogTGF5b3V0SW5mbyk6IGJvb2xlYW4ge1xuICBjb25zdCBwYXJlbnRXaWRnZXQgPSBhcHBDb25maWcud2lkZ2V0c1twYXJlbnRXSWRdXG4gIGlmICghcGFyZW50V2lkZ2V0KSByZXR1cm4gZmFsc2VcbiAgbGV0IGZpbmQgPSBmYWxzZVxuICBwYXJlbnRXaWRnZXQubGF5b3V0cyAmJlxuICAgIE9iamVjdC5rZXlzKHBhcmVudFdpZGdldC5sYXlvdXRzKS5zb21lKGxheW91dE5hbWUgPT4ge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmVudFdpZGdldC5sYXlvdXRzW2xheW91dE5hbWVdKS5zb21lKHNpemVNb2RlID0+IHtcbiAgICAgICAgY29uc3QgbGF5b3V0SWQgPSBwYXJlbnRXaWRnZXQubGF5b3V0c1tsYXlvdXROYW1lXVtzaXplTW9kZV1cbiAgICAgICAgY29uc3QgbGF5b3V0SXRlbUlkcyA9IGdldExheW91dEl0ZW1JZHMoYXBwQ29uZmlnLCBsYXlvdXRJZCwgdHJ1ZSlcbiAgICAgICAgcmV0dXJuIGxheW91dEl0ZW1JZHMuc29tZShpdGVtSWQgPT4ge1xuICAgICAgICAgIGlmIChsYXlvdXRJbmZvLmxheW91dElkID09PSBsYXlvdXRJZCAmJiBsYXlvdXRJbmZvLmxheW91dEl0ZW1JZCA9PT0gaXRlbUlkKSB7XG4gICAgICAgICAgICBmaW5kID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIHJldHVybiBmaW5kXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSB3aWRnZXQvc2VjdGlvbiBpZHMgdGhhdCBpbiB0aGUgc2FtZSBjb250YWluZXIgd2l0aCB0aGUgd2lkZ2V0XG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gd2lkZ2V0SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRzSW5UaGVTYW1lQ29udGFpbmVyIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHJldFR5cGU6IExheW91dEl0ZW1UeXBlLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICB3aXRoUGVuZGluZyA9IGZhbHNlXG4pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGNvbnRhaW5lckluZm8gPSBnZXRDb250ZW50Q29udGFpbmVySW5mbyhhcHBDb25maWcsIGlkLCB0eXBlLCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpXG4gIGlmICghY29udGFpbmVySW5mbykge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgcmV0dXJuIGdldENvbnRlbnRzSW5Db250YWluZXIoYXBwQ29uZmlnLCBjb250YWluZXJJbmZvLCByZXRUeXBlLCBzaXplTW9kZSwgd2l0aFBlbmRpbmcpXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSB3aWRnZXQvc2VjdGlvbiBpZHMgdGhhdCBpbiB0aGUgc2FtZSByb290IGNvbnRhaW5lciB3aXRoIHRoZSB3aWRnZXRcbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSB3aWRnZXRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudHNJblRoZVNhbWVSb290Q29udGFpbmVyIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogTGF5b3V0SXRlbVR5cGUsXG4gIHJldFR5cGU6IExheW91dEl0ZW1UeXBlLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlLFxuICB3aXRoUGVuZGluZyA9IGZhbHNlXG4pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGNvbnRhaW5lckluZm8gPSBnZXRDb250ZW50Um9vdENvbnRhaW5lckluZm8oYXBwQ29uZmlnLCBpZCwgdHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxuICBpZiAoIWNvbnRhaW5lckluZm8pIHtcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiBnZXRDb250ZW50c0luQ29udGFpbmVyUmVjdXJzaXZlKGFwcENvbmZpZywgY29udGFpbmVySW5mbywgcmV0VHlwZSwgc2l6ZU1vZGUsIHdpdGhQZW5kaW5nKVxufVxuXG5pbnRlcmZhY2UgQW5jaG9yUG9pbnQge1xuICBpZDogc3RyaW5nXG4gIGxhYmVsOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFNjcmVlbkFuY2hvclBvaW50IGV4dGVuZHMgQW5jaG9yUG9pbnQge1xuICBzY3JlZW5zOiBBbmNob3JQb2ludFtdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCbG9ja0FuY2hvclBvaW50c0luUGFnZSAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIHBhZ2VJZDogc3RyaW5nLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pOiBBbmNob3JQb2ludFtdIHtcbiAgY29uc3QgcGFnZUpzb24gPSBhcHBDb25maWcucGFnZXNbcGFnZUlkXVxuICBjb25zdCBsYXlvdXRJZCA9IHBhZ2VKc29uPy5sYXlvdXQ/LltzaXplTW9kZV1cbiAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICBjb25zdCBibG9ja3MgPSBbXVxuXG4gIGlmIChsYXlvdXRKc29uPy50eXBlID09PSBMYXlvdXRUeXBlLkZsb3dMYXlvdXQpIHtcbiAgICBPYmplY3Qua2V5cyhsYXlvdXRKc29uLmNvbnRlbnQgPz8ge30pLnNvcnQoKS5mb3JFYWNoKGxheW91dEl0ZW1JZCA9PiB7XG4gICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0SnNvbi5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICAgIGlmIChsYXlvdXRJdGVtLmlzUGVuZGluZyB8fCBsYXlvdXRJdGVtLnNldHRpbmc/LmlzRmxvYXRpbmcpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gZ2VuZXJhdGVCbG9ja0FuY2hvclBvaW50KGFwcENvbmZpZywgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0pXG4gICAgICAgIGlmIChhbmNob3IpIHtcbiAgICAgICAgICBibG9ja3MucHVzaChhbmNob3IpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIHJldHVybiBibG9ja3Ncbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjcmVlbkFuY2hvclBvaW50c0luUGFnZSAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIHBhZ2VJZDogc3RyaW5nLFxuICBzaXplTW9kZTogQnJvd3NlclNpemVNb2RlXG4pOiBTY3JlZW5BbmNob3JQb2ludFtdIHtcbiAgY29uc3QgcGFnZUpzb24gPSBhcHBDb25maWcucGFnZXNbcGFnZUlkXVxuICBjb25zdCBsYXlvdXRJZCA9IHBhZ2VKc29uPy5sYXlvdXQ/LltzaXplTW9kZV1cbiAgY29uc3QgbGF5b3V0SnNvbiA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICBjb25zdCBzY3JlZW5Hcm91cHMgPSBbXVxuXG4gIGlmIChsYXlvdXRKc29uPy50eXBlID09PSBMYXlvdXRUeXBlLkZsb3dMYXlvdXQpIHtcbiAgICBPYmplY3Qua2V5cyhsYXlvdXRKc29uLmNvbnRlbnQgPz8ge30pLnNvcnQoKS5mb3JFYWNoKGxheW91dEl0ZW1JZCA9PiB7XG4gICAgICBjb25zdCBsYXlvdXRJdGVtID0gbGF5b3V0SnNvbi5jb250ZW50W2xheW91dEl0ZW1JZF1cbiAgICAgIGlmIChsYXlvdXRJdGVtLmlzUGVuZGluZyB8fCBsYXlvdXRJdGVtLnNldHRpbmc/LmlzRmxvYXRpbmcpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAobGF5b3V0SXRlbS50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cCkge1xuICAgICAgICBjb25zdCBzY3JlZW5Hcm91cCA9IGFwcENvbmZpZy5zY3JlZW5Hcm91cHNbbGF5b3V0SXRlbS5zY3JlZW5Hcm91cElkXVxuICAgICAgICBjb25zdCBzY3JlZW5zID0gW11cbiAgICAgICAgc2NyZWVuR3JvdXA/LnNjcmVlbnMuZm9yRWFjaChzY3JlZW5JZCA9PiB7XG4gICAgICAgICAgY29uc3QgYW5jaG9yID0gZ2VuZXJhdGVTY3JlZW5BbmNob3JQb2ludChhcHBDb25maWcsIGxheW91dElkLCBzY3JlZW5JZClcbiAgICAgICAgICBpZiAoYW5jaG9yKSB7XG4gICAgICAgICAgICBzY3JlZW5zLnB1c2goYW5jaG9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgc2NyZWVuR3JvdXBzLnB1c2goeyBpZDogc2NyZWVuR3JvdXAuaWQsIGxhYmVsOiBzY3JlZW5Hcm91cC5sYWJlbCwgc2NyZWVucyB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIHNjcmVlbkdyb3Vwc1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUJsb2NrQW5jaG9yUG9pbnQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm86IExheW91dEluZm8pOiBBbmNob3JQb2ludCB7XG4gIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gbGF5b3V0SW5mb1xuICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SXRlbUlkXVxuXG4gIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWcud2lkZ2V0c1tsYXlvdXRJdGVtLndpZGdldElkXVxuICBpZiAod2lkZ2V0SnNvbikge1xuICAgIHJldHVybiB7IGxhYmVsOiB3aWRnZXRKc29uLmxhYmVsLCBpZDogYCR7bGF5b3V0SWR9X2Jsb2NrXyR7bGF5b3V0SXRlbUlkfWAgfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlU2NyZWVuQW5jaG9yUG9pbnQgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dElkOiBzdHJpbmcsIHNjcmVlbklkOiBzdHJpbmcpOiBBbmNob3JQb2ludCB7XG4gIGNvbnN0IHNjcmVlbkpzb24gPSBhcHBDb25maWcuc2NyZWVuc1tzY3JlZW5JZF1cblxuICBpZiAoc2NyZWVuSnNvbikge1xuICAgIHJldHVybiB7IGxhYmVsOiBzY3JlZW5Kc29uLmxhYmVsLCBpZDogYCR7bGF5b3V0SWR9X3NjcmVlbl8ke3NjcmVlbklkfWAgfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxhdENvbnRhaW5lck1hcHMge1xuICBpZDogc3RyaW5nXG4gIHR5cGU6IENvbnRhaW5lclR5cGVcbiAgbWFwcz86IHN0cmluZ1tdXG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBjdXJyZW50Q29udGFpbmVyVHlwZSBEaWFsb2cgb3IgUGFnZVxuICogQHBhcmFtIGN1cnJlbnRJZCBkaWFsb2cgb3IgcGFnZSBpZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFwV2lkZ2V0cyAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSwgY3VycmVudENvbnRhaW5lclR5cGU6IENvbnRhaW5lclR5cGUsIGN1cnJlbnRJZDogc3RyaW5nKTogRmxhdENvbnRhaW5lck1hcHNbXSB7XG4gIGNvbnN0IGZsYXRDb250YWluZXJNYXBzOiBGbGF0Q29udGFpbmVyTWFwc1tdID0gW11cblxuICAvLyBpZiBtYXAgaXMgaW4gaGVhZGVyL2Zvb3RlciwgcHV0IHRoZW0gaW4gdGhlIGZpcnN0IGN1cnJlbnQgcGFnZSBvbmx5XG4gIGNvbnN0IGN1cnJlbnRJdGVtOiBGbGF0Q29udGFpbmVyTWFwcyA9IHtcbiAgICBpZDogY3VycmVudElkLFxuICAgIHR5cGU6IGN1cnJlbnRDb250YWluZXJUeXBlLFxuICAgIG1hcHM6IGdldENvbnRlbnRzSW5Db250YWluZXJSZWN1cnNpdmVBZHYoYXBwQ29uZmlnLCB7IHR5cGU6IGN1cnJlbnRDb250YWluZXJUeXBlLCBpZDogY3VycmVudElkIH0sIExheW91dEl0ZW1UeXBlLldpZGdldCwgc2l6ZU1vZGUsIHsgaW5jbHVkZVBlbmRpbmc6IGZhbHNlLCBpbmNsdWRlT3RoZXJTaXplTW9kZTogZmFsc2UgfSlcbiAgICAgIC5maWx0ZXIod2lkZ2V0SWQgPT4gYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLm1hbmlmZXN0LnByb3BlcnRpZXMuY2FuQ3JlYXRlTWFwVmlldylcbiAgfVxuXG4gIGZsYXRDb250YWluZXJNYXBzLnB1c2goY3VycmVudEl0ZW0pXG5cbiAgT2JqZWN0LmtleXMoYXBwQ29uZmlnLnBhZ2VzKS5mb3JFYWNoKHBhZ2VJZCA9PiB7XG4gICAgaWYgKHBhZ2VJZCA9PT0gY3VycmVudElkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBpdGVtOiBGbGF0Q29udGFpbmVyTWFwcyA9IHtcbiAgICAgIGlkOiBwYWdlSWQsXG4gICAgICB0eXBlOiBDb250YWluZXJUeXBlLlBhZ2UsXG4gICAgICBtYXBzOiBnZXRDb250ZW50c0luQ29udGFpbmVyUmVjdXJzaXZlKGFwcENvbmZpZywgeyBpZDogcGFnZUlkLCB0eXBlOiBDb250YWluZXJUeXBlLlBhZ2UgfSwgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LCBzaXplTW9kZSlcbiAgICAgICAgLmZpbHRlcih3aWRnZXRJZCA9PiBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0ubWFuaWZlc3QucHJvcGVydGllcy5jYW5DcmVhdGVNYXBWaWV3KVxuICAgIH1cbiAgICBmbGF0Q29udGFpbmVyTWFwcy5wdXNoKGl0ZW0pXG4gIH0pXG5cbiAgT2JqZWN0LmtleXMoYXBwQ29uZmlnLmRpYWxvZ3MgfHwge30pLmZvckVhY2goZGxnSWQgPT4ge1xuICAgIGlmIChkbGdJZCA9PT0gY3VycmVudElkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBpdGVtOiBGbGF0Q29udGFpbmVyTWFwcyA9IHtcbiAgICAgIGlkOiBkbGdJZCxcbiAgICAgIHR5cGU6IENvbnRhaW5lclR5cGUuRGlhbG9nLFxuICAgICAgbWFwczogZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZShhcHBDb25maWcsIHsgaWQ6IGRsZ0lkLCB0eXBlOiBDb250YWluZXJUeXBlLkRpYWxvZyB9LCBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsIHNpemVNb2RlKVxuICAgICAgICAuZmlsdGVyKHdpZGdldElkID0+IGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXS5tYW5pZmVzdC5wcm9wZXJ0aWVzLmNhbkNyZWF0ZU1hcFZpZXcpXG4gICAgfVxuICAgIGZsYXRDb250YWluZXJNYXBzLnB1c2goaXRlbSlcbiAgfSlcblxuICByZXR1cm4gZmxhdENvbnRhaW5lck1hcHNcbn1cbiIsImV4cG9ydCB7XG4gIGZpbmRMYXlvdXRJZCxcbiAgZmluZExheW91dEl0ZW0sXG4gIGZpbmRQYXJlbnRMYXlvdXRJbmZvLFxuICBnZXRDb250ZW50SWRJbkxheW91dEl0ZW0sXG4gIGdldENvbnRlbnRzSW5MYXlvdXQsXG4gIGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUsXG4gIGdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyxcbiAgZ2V0Q29udGVudExheW91dEl0ZW0sXG4gIGdldExheW91dEl0ZW1JZHMsXG4gIGdldExheW91dEluZm9zQnlUeXBlLFxuICBnZXRXaWRnZXRJZFRoYXRVc2VUaGVMYXlvdXRJZCxcbiAgZ2V0Q29udGVudENvbnRhaW5lckluZm8sXG4gIGdldENvbnRlbnRSb290Q29udGFpbmVySW5mbyxcbiAgZ2V0Q29udGVudHNJblRoZVNhbWVDb250YWluZXIsXG4gIGdldENvbnRlbnRzSW5UaGVTYW1lUm9vdENvbnRhaW5lcixcbiAgZ2V0Q29udGVudHNJbkNvbnRhaW5lcixcbiAgZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZSxcbiAgZ2V0Q29udGVudHNJbkNvbnRhaW5lclJlY3Vyc2l2ZUFkdixcbiAgZ2V0UmVsYXRlZExheW91dEl0ZW1zSW5XaWRnZXRCeUxheW91dEluZm8sXG4gIGdldFJlbGF0ZWRMYXlvdXRJbmZvc0luV2lkZ2V0QnlMYXlvdXRJbmZvLFxuICBnZXRMYXlvdXRJbmZvc0hvbGRjb250ZW50LFxuICBnZXRCcm93c2VyU2l6ZU1vZGVCeUxheW91dElkQW5kV2lkZ2V0SWQsXG4gIGdldEJyb3dzZXJTaXplTW9kZUJ5TGF5b3V0SWQsXG4gIGdldENoaWxkcmVuQ29udGVudHMsXG4gIGdldENvbnRlbnRMYXlvdXRJbmZvc0luT25lU2l6ZU1vZGUsXG4gIGdldFBhcmVudFdpZGdldElkT2ZDb250ZW50LFxuICBnZXRCbG9ja0FuY2hvclBvaW50c0luUGFnZSxcbiAgZ2V0U2NyZWVuQW5jaG9yUG9pbnRzSW5QYWdlLFxuICBnZXRNYXBXaWRnZXRzXG59IGZyb20gJy4vY29udGVudHMnXG5leHBvcnQgeyBnZXRTZWN0aW9uSW5mbyB9IGZyb20gJy4vc2VjdGlvbidcbmV4cG9ydCB7XG4gIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luUGFnZSxcbiAgZ2V0UGVuZGluZ0xheW91dEl0ZW1zSW5EaWFsb2csXG4gIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luTGF5b3V0V2l0aERlZXAsXG5cbiAgZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUsXG4gIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlSW5QYWdlLFxuICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZUluRGlhbG9nXG59IGZyb20gJy4vcGVuZGluZydcbiIsImltcG9ydCB7XG4gIHR5cGUgSU1BcHBDb25maWcsXG4gIHR5cGUgSU1TaXplTW9kZUxheW91dEpzb24sXG4gIEJyb3dzZXJTaXplTW9kZSxcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICBMYXlvdXRJdGVtVHlwZSxcbiAgV2lkZ2V0VHlwZSxcbiAgUGFnZVBhcnRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgZ2V0Q29udGVudHNJbkxheW91dFJlY3Vyc2l2ZSwgZ2V0TGF5b3V0SW5mb3NCeVR5cGUgfSBmcm9tICcuL2NvbnRlbnRzJ1xuXG4vKipcbiAqIFJldHVybiB0aGUgcGVuZGluZyB3aWRnZXRzL3NlY3Rpb25zIGluIHRoZSBjdXJyZW50IHNpemUgbW9kZS5cbiAqIEBwYXJhbSBhcHBDb25maWdcbiAqIEBwYXJhbSBwYWdlSWRcbiAqIEBwYXJhbSBzaXplTW9kZVxuICogQHBhcmFtIHBhZ2VQYXJ0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJblBhZ2UgKFxuICBhcHBDb25maWc6IElNQXBwQ29uZmlnLFxuICBwYWdlSWQ6IHN0cmluZyxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSxcbiAgcGFnZVBhcnQ6IFBhZ2VQYXJ0XG4pOiBMYXlvdXRJbmZvW10ge1xuICBjb25zdCBwYWdlSnNvbiA9IGFwcENvbmZpZy5wYWdlc1twYWdlSWRdXG4gIGlmICghcGFnZUpzb24pIHtcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIGlmIChwYWdlUGFydCA9PT0gUGFnZVBhcnQuSGVhZGVyKSB7XG4gICAgaWYgKCFwYWdlSnNvbi5oZWFkZXIgfHwgIWFwcENvbmZpZy5oZWFkZXIpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICByZXR1cm4gZ2V0UGVuZGluZ0xheW91dEl0ZW1zSW5MYXlvdXRXaXRoRGVlcChhcHBDb25maWcsIGFwcENvbmZpZy5oZWFkZXIubGF5b3V0W3NpemVNb2RlXSwgc2l6ZU1vZGUpXG4gIH0gZWxzZSBpZiAocGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkZvb3Rlcikge1xuICAgIGlmICghcGFnZUpzb24uZm9vdGVyIHx8ICFhcHBDb25maWcuZm9vdGVyKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgcmV0dXJuIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luTGF5b3V0V2l0aERlZXAoYXBwQ29uZmlnLCBhcHBDb25maWcuZm9vdGVyLmxheW91dFtzaXplTW9kZV0sIHNpemVNb2RlKVxuICB9IGVsc2UgaWYgKHBhZ2VQYXJ0ID09PSBQYWdlUGFydC5Cb2R5KSB7XG4gICAgcmV0dXJuIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luTGF5b3V0V2l0aERlZXAoYXBwQ29uZmlnLCBwYWdlSnNvbi5sYXlvdXRbc2l6ZU1vZGVdLCBzaXplTW9kZSlcbiAgfVxuXG4gIHJldHVybiBbXVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcGVuZGluZyB3aWRnZXRzL3NlY3Rpb25zIGZyb20gb3RoZXIgc2l6ZSBtb2RlLlxuICogVGhlIHBlbmRpbmcgbWVhbnM6IHRoZSB3aWRnZXRzL3NlY3Rpb25zIGFyZSBpbiBwYWdlJ3Mgb3RoZXIgbW9kZSBidXQgYXJlIG5vdCBpbiB0aGUgY3VycmVudCBtb2RlIChwYXNzZWQgaW4pXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gcGFnZUlkXG4gKiBAcGFyYW0gdHlwZVxuICogQHBhcmFtIHNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZUluUGFnZSAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgcGFnZUlkOiBzdHJpbmcsIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsIHBhZ2VQYXJ0OiBQYWdlUGFydCk6IExheW91dEluZm9bXSB7XG4gIGNvbnN0IHBhZ2VKc29uID0gYXBwQ29uZmlnLnBhZ2VzW3BhZ2VJZF1cbiAgaWYgKCFwYWdlSnNvbikge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgaWYgKHBhZ2VQYXJ0ID09PSBQYWdlUGFydC5IZWFkZXIpIHtcbiAgICBpZiAoIXBhZ2VKc29uLmhlYWRlciB8fCAhYXBwQ29uZmlnLmhlYWRlcikge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIHJldHVybiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZShhcHBDb25maWcsIGFwcENvbmZpZy5oZWFkZXIubGF5b3V0LCBzaXplTW9kZSlcbiAgfSBlbHNlIGlmIChwYWdlUGFydCA9PT0gUGFnZVBhcnQuRm9vdGVyKSB7XG4gICAgaWYgKCFwYWdlSnNvbi5mb290ZXIgfHwgIWFwcENvbmZpZy5mb290ZXIpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICByZXR1cm4gZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUoYXBwQ29uZmlnLCBhcHBDb25maWcuZm9vdGVyLmxheW91dCwgc2l6ZU1vZGUpXG4gIH0gZWxzZSBpZiAocGFnZVBhcnQgPT09IFBhZ2VQYXJ0LkJvZHkpIHtcbiAgICByZXR1cm4gZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUoYXBwQ29uZmlnLCBwYWdlSnNvbi5sYXlvdXQsIHNpemVNb2RlKVxuICB9XG5cbiAgcmV0dXJuIFtdXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBwZW5kaW5nIHdpZGdldHMvc2VjdGlvbnMgaW4gdGhlIGN1cnJlbnQgc2l6ZSBtb2RlLlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGRpYWxvZ0lkXG4gKiBAcGFyYW0gc2l6ZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luRGlhbG9nIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgZGlhbG9nSWQ6IHN0cmluZyxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogTGF5b3V0SW5mb1tdIHtcbiAgY29uc3QgZGlhbG9nSnNvbiA9IGFwcENvbmZpZy5kaWFsb2dzW2RpYWxvZ0lkXVxuICBpZiAoIWRpYWxvZ0pzb24pIHtcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwKGFwcENvbmZpZywgZGlhbG9nSnNvbi5sYXlvdXRbc2l6ZU1vZGVdLCBzaXplTW9kZSlcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHBlbmRpbmcgd2lkZ2V0cy9zZWN0aW9ucyBmcm9tIG90aGVyIHNpemUgbW9kZS5cbiAqIFRoZSBwZW5kaW5nIG1lYW5zOiB0aGUgd2lkZ2V0cy9zZWN0aW9ucyBhcmUgaW4gZGlhbG9nJ3Mgb3RoZXIgbW9kZSBidXQgYXJlIG5vdCBpbiB0aGUgY3VycmVudCBtb2RlIChwYXNzZWQgaW4pXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gZGlhbG9nSWRcbiAqIEBwYXJhbSBzaXplTW9kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGVJbkRpYWxvZyAoYXBwQ29uZmlnOiBJTUFwcENvbmZpZywgZGlhbG9nSWQ6IHN0cmluZywgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZSk6IExheW91dEluZm9bXSB7XG4gIGNvbnN0IGRpYWxvZ0pzb24gPSBhcHBDb25maWcuZGlhbG9nc1tkaWFsb2dJZF1cbiAgaWYgKCFkaWFsb2dKc29uKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICByZXR1cm4gZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUoYXBwQ29uZmlnLCBkaWFsb2dKc29uLmxheW91dCwgc2l6ZU1vZGUpXG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBwZW5kaW5nIHdpZGdldHMvc2VjdGlvbnMgaW4gdGhlIGN1cnJlbnQgc2l6ZSBtb2RlLlxuICogQHBhcmFtIGFwcENvbmZpZ1xuICogQHBhcmFtIGxheW91dElkXG4gKiBAcGFyYW0gc2l6ZU1vZGUgdGhlIGN1cnJlbnQgc2l6ZSBtb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwIChcbiAgYXBwQ29uZmlnOiBJTUFwcENvbmZpZyxcbiAgbGF5b3V0SWQ6IHN0cmluZyxcbiAgc2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxuKTogTGF5b3V0SW5mb1tdIHtcbiAgbGV0IHJldEl0ZW1zID0gW11cbiAgY29uc3Qgd2lkZ2V0SXRlbXMgPSBnZXRMYXlvdXRJbmZvc0J5VHlwZShhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0sIExheW91dEl0ZW1UeXBlLldpZGdldCwgdHJ1ZSlcbiAgd2lkZ2V0SXRlbXMuZm9yRWFjaCh3aWRnZXRJdGVtID0+IHtcbiAgICBjb25zdCBpdGVtID0gYXBwQ29uZmlnLmxheW91dHNbd2lkZ2V0SXRlbS5sYXlvdXRJZF0uY29udGVudFt3aWRnZXRJdGVtLmxheW91dEl0ZW1JZF1cbiAgICBpZiAoaXRlbS5pc1BlbmRpbmcpIHtcbiAgICAgIHJldEl0ZW1zLnB1c2god2lkZ2V0SXRlbSlcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGFwcENvbmZpZy53aWRnZXRzW2l0ZW0ud2lkZ2V0SWRdLmxheW91dHMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoYXBwQ29uZmlnLndpZGdldHNbaXRlbS53aWRnZXRJZF0ubGF5b3V0cykuZm9yRWFjaChsYXlvdXROYW1lID0+IHtcbiAgICAgICAgICByZXRJdGVtcyA9IHJldEl0ZW1zLmNvbmNhdChcbiAgICAgICAgICAgIGdldFBlbmRpbmdMYXlvdXRJdGVtc0luTGF5b3V0V2l0aERlZXAoXG4gICAgICAgICAgICAgIGFwcENvbmZpZyxcbiAgICAgICAgICAgICAgYXBwQ29uZmlnLndpZGdldHNbaXRlbS53aWRnZXRJZF0ubGF5b3V0c1tsYXlvdXROYW1lXVtzaXplTW9kZV0sXG4gICAgICAgICAgICAgIHNpemVNb2RlXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBzZWN0aW9uSXRlbXMgPSBnZXRMYXlvdXRJbmZvc0J5VHlwZShhcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0sIExheW91dEl0ZW1UeXBlLlNlY3Rpb24sIHRydWUpXG4gIHNlY3Rpb25JdGVtcy5mb3JFYWNoKHNlY3Rpb25JdGVtID0+IHtcbiAgICBjb25zdCBpdGVtID0gYXBwQ29uZmlnLmxheW91dHNbc2VjdGlvbkl0ZW0ubGF5b3V0SWRdLmNvbnRlbnRbc2VjdGlvbkl0ZW0ubGF5b3V0SXRlbUlkXVxuICAgIGlmIChpdGVtLmlzUGVuZGluZykge1xuICAgICAgcmV0SXRlbXMucHVzaChzZWN0aW9uSXRlbSlcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGFwcENvbmZpZy5zZWN0aW9uc1tpdGVtLnNlY3Rpb25JZF0udmlld3MpIHtcbiAgICAgICAgYXBwQ29uZmlnLnNlY3Rpb25zW2l0ZW0uc2VjdGlvbklkXS52aWV3cy5mb3JFYWNoKHZpZXdJZCA9PiB7XG4gICAgICAgICAgcmV0SXRlbXMgPSByZXRJdGVtcy5jb25jYXQoXG4gICAgICAgICAgICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNJbkxheW91dFdpdGhEZWVwKGFwcENvbmZpZywgYXBwQ29uZmlnLnZpZXdzW3ZpZXdJZF0ubGF5b3V0W3NpemVNb2RlXSwgc2l6ZU1vZGUpXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBzZ0l0ZW1zID0gZ2V0TGF5b3V0SW5mb3NCeVR5cGUoYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdLCBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cCwgdHJ1ZSlcbiAgc2dJdGVtcy5mb3JFYWNoKHNnSXRlbSA9PiB7XG4gICAgY29uc3QgaXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW3NnSXRlbS5sYXlvdXRJZF0uY29udGVudFtzZ0l0ZW0ubGF5b3V0SXRlbUlkXVxuICAgIGlmIChpdGVtLmlzUGVuZGluZykge1xuICAgICAgcmV0SXRlbXMucHVzaChzZ0l0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNnSWQgPSBpdGVtLnNjcmVlbkdyb3VwSWRcbiAgICAgIGFwcENvbmZpZy5zY3JlZW5Hcm91cHM/LltzZ0lkXS5zY3JlZW5zPy5mb3JFYWNoKHNjcmVlbklkID0+IHtcbiAgICAgICAgY29uc3Qgc2NyZWVuSnNvbiA9IGFwcENvbmZpZz8uc2NyZWVuc1tzY3JlZW5JZF1cbiAgICAgICAgaWYgKHNjcmVlbkpzb24ubWFpbikge1xuICAgICAgICAgIHJldEl0ZW1zID0gcmV0SXRlbXMuY29uY2F0KGdldFBlbmRpbmdMYXlvdXRJdGVtc0luTGF5b3V0V2l0aERlZXAoYXBwQ29uZmlnLCBzY3JlZW5Kc29uLm1haW4ubGF5b3V0W3NpemVNb2RlXSwgc2l6ZU1vZGUpKVxuICAgICAgICB9XG4gICAgICAgIGlmIChzY3JlZW5Kc29uLnBhbmVsKSB7XG4gICAgICAgICAgcmV0SXRlbXMgPSByZXRJdGVtcy5jb25jYXQoZ2V0UGVuZGluZ0xheW91dEl0ZW1zSW5MYXlvdXRXaXRoRGVlcChhcHBDb25maWcsIHNjcmVlbkpzb24ucGFuZWwubGF5b3V0W3NpemVNb2RlXSwgc2l6ZU1vZGUpKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gcmV0SXRlbXNcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHBlbmRpbmcgd2lkZ2V0cy9zZWN0aW9ucy9zY3JlZW5Hcm91cHMuXG4gKiBUaGUgcGVuZGluZyBtZWFuczogdGhlIHdpZGdldHMvc2VjdGlvbnMvc2NyZWVuR3JvdXBzIGFyZSBpbiBsYXlvdXQncyBvdGhlciBtb2RlIGJ1dCBhcmUgbm90IGluIHRoZSBjdXJyZW50IG1vZGUgKHBhc3NlZCBpbikuXG4gKiBAcGFyYW0gYXBwQ29uZmlnXG4gKiBAcGFyYW0gcGFnZUlkXG4gKiBAcGFyYW0gdHlwZVxuICogQHBhcmFtIHNpemVNb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZSAoXG4gIGFwcENvbmZpZzogSU1BcHBDb25maWcsXG4gIGxheW91dDogSU1TaXplTW9kZUxheW91dEpzb24sXG4gIHNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGUsXG4gIHRoaXNXaWRnZXRJZHMgPSBudWxsLFxuICB0aGlzU2VjdGlvbklkcyA9IG51bGwsXG4gIHRoaXNTY3JlZW5Hcm91cElkcyA9IG51bGxcbik6IExheW91dEluZm9bXSB7XG4gIGNvbnN0IHJldEl0ZW1zID0gW11cbiAgaWYgKCF0aGlzV2lkZ2V0SWRzKSB7XG4gICAgdGhpc1dpZGdldElkcyA9IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRbc2l6ZU1vZGVdLCBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsIHNpemVNb2RlLCB0cnVlKVxuICB9XG4gIGlmICghdGhpc1NlY3Rpb25JZHMpIHtcbiAgICB0aGlzU2VjdGlvbklkcyA9IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRbc2l6ZU1vZGVdLCBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uLCBzaXplTW9kZSwgdHJ1ZSlcbiAgfVxuICBpZiAoIXRoaXNTY3JlZW5Hcm91cElkcykge1xuICAgIHRoaXNTY3JlZW5Hcm91cElkcyA9IGdldENvbnRlbnRzSW5MYXlvdXRSZWN1cnNpdmUoYXBwQ29uZmlnLCBsYXlvdXRbc2l6ZU1vZGVdLCBMYXlvdXRJdGVtVHlwZS5TY3JlZW5Hcm91cCwgc2l6ZU1vZGUsIHRydWUpXG4gIH1cblxuICBjb25zdCBvdGhlck1vZGVzID0gT2JqZWN0LmtleXMoQnJvd3NlclNpemVNb2RlKVxuICAgIC5maWx0ZXIobW9kZSA9PiBCcm93c2VyU2l6ZU1vZGVbbW9kZV0gIT09IHNpemVNb2RlKVxuICAgIC5tYXAoayA9PiBCcm93c2VyU2l6ZU1vZGVba10pXG4gIG90aGVyTW9kZXMuZm9yRWFjaChtb2RlID0+IHtcbiAgICBjb25zdCB3aWRnZXRJdGVtcyA9IGdldExheW91dEluZm9zQnlUeXBlKGFwcENvbmZpZy5sYXlvdXRzW2xheW91dFttb2RlXV0sIExheW91dEl0ZW1UeXBlLldpZGdldCwgdHJ1ZSlcbiAgICB3aWRnZXRJdGVtcy5mb3JFYWNoKHdpZGdldEl0ZW0gPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW3dpZGdldEl0ZW0ubGF5b3V0SWRdLmNvbnRlbnRbd2lkZ2V0SXRlbS5sYXlvdXRJdGVtSWRdXG4gICAgICBpZiAoXG4gICAgICAgIGFwcENvbmZpZy53aWRnZXRzW2l0ZW0ud2lkZ2V0SWRdLm1hbmlmZXN0Py53aWRnZXRUeXBlICE9PSBXaWRnZXRUeXBlLkxheW91dCAmJlxuICAgICAgICB0aGlzV2lkZ2V0SWRzLmluZGV4T2YoaXRlbS53aWRnZXRJZCkgPCAwXG4gICAgICApIHtcbiAgICAgICAgIWlzQ29udGVudEV4aXN0cyhhcHBDb25maWcsIHJldEl0ZW1zLCB3aWRnZXRJdGVtKSAmJiByZXRJdGVtcy5wdXNoKHdpZGdldEl0ZW0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYXBwQ29uZmlnLndpZGdldHNbaXRlbS53aWRnZXRJZF0ubGF5b3V0cykge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGFwcENvbmZpZy53aWRnZXRzW2l0ZW0ud2lkZ2V0SWRdLmxheW91dHMpLmZvckVhY2gobGF5b3V0TmFtZSA9PiB7XG4gICAgICAgICAgICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZShcbiAgICAgICAgICAgICAgYXBwQ29uZmlnLFxuICAgICAgICAgICAgICBhcHBDb25maWcud2lkZ2V0c1tpdGVtLndpZGdldElkXS5sYXlvdXRzW2xheW91dE5hbWVdLFxuICAgICAgICAgICAgICBzaXplTW9kZSxcbiAgICAgICAgICAgICAgdGhpc1dpZGdldElkcyxcbiAgICAgICAgICAgICAgdGhpc1NlY3Rpb25JZHMsXG4gICAgICAgICAgICAgIHRoaXNTY3JlZW5Hcm91cElkc1xuICAgICAgICAgICAgKS5mb3JFYWNoKHdpZGdldEl0ZW0gPT4ge1xuICAgICAgICAgICAgICAhaXNDb250ZW50RXhpc3RzKGFwcENvbmZpZywgcmV0SXRlbXMsIHdpZGdldEl0ZW0pICYmIHJldEl0ZW1zLnB1c2god2lkZ2V0SXRlbSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBzZWN0aW9uSXRlbXMgPSBnZXRMYXlvdXRJbmZvc0J5VHlwZShhcHBDb25maWcubGF5b3V0c1tsYXlvdXRbbW9kZV1dLCBMYXlvdXRJdGVtVHlwZS5TZWN0aW9uLCB0cnVlKVxuICAgIHNlY3Rpb25JdGVtcy5mb3JFYWNoKHNlY3Rpb25JdGVtID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhcHBDb25maWcubGF5b3V0c1tzZWN0aW9uSXRlbS5sYXlvdXRJZF0uY29udGVudFtzZWN0aW9uSXRlbS5sYXlvdXRJdGVtSWRdXG4gICAgICBpZiAodGhpc1NlY3Rpb25JZHMuaW5kZXhPZihpdGVtLnNlY3Rpb25JZCkgPCAwKSB7XG4gICAgICAgICFpc0NvbnRlbnRFeGlzdHMoYXBwQ29uZmlnLCByZXRJdGVtcywgc2VjdGlvbkl0ZW0pICYmIHJldEl0ZW1zLnB1c2goc2VjdGlvbkl0ZW0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYXBwQ29uZmlnLnNlY3Rpb25zW2l0ZW0uc2VjdGlvbklkXS52aWV3cykge1xuICAgICAgICAgIGFwcENvbmZpZy5zZWN0aW9uc1tpdGVtLnNlY3Rpb25JZF0udmlld3MuZm9yRWFjaCh2aWV3SWQgPT4ge1xuICAgICAgICAgICAgZ2V0UGVuZGluZ0xheW91dEl0ZW1zRnJvbU90aGVyU2l6ZU1vZGUoXG4gICAgICAgICAgICAgIGFwcENvbmZpZyxcbiAgICAgICAgICAgICAgYXBwQ29uZmlnLnZpZXdzW3ZpZXdJZF0ubGF5b3V0LFxuICAgICAgICAgICAgICBzaXplTW9kZSxcbiAgICAgICAgICAgICAgdGhpc1dpZGdldElkcyxcbiAgICAgICAgICAgICAgdGhpc1NlY3Rpb25JZHMsXG4gICAgICAgICAgICAgIHRoaXNTY3JlZW5Hcm91cElkc1xuICAgICAgICAgICAgKS5mb3JFYWNoKHNlY3Rpb25JdGVtID0+IHtcbiAgICAgICAgICAgICAgIWlzQ29udGVudEV4aXN0cyhhcHBDb25maWcsIHJldEl0ZW1zLCBzZWN0aW9uSXRlbSkgJiYgcmV0SXRlbXMucHVzaChzZWN0aW9uSXRlbSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBzZ0l0ZW1zID0gZ2V0TGF5b3V0SW5mb3NCeVR5cGUoYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0W21vZGVdXSwgTGF5b3V0SXRlbVR5cGUuU2NyZWVuR3JvdXAsIHRydWUpXG4gICAgc2dJdGVtcy5mb3JFYWNoKHNnSXRlbSA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gYXBwQ29uZmlnLmxheW91dHNbc2dJdGVtLmxheW91dElkXS5jb250ZW50W3NnSXRlbS5sYXlvdXRJdGVtSWRdXG4gICAgICBpZiAodGhpc1NjcmVlbkdyb3VwSWRzLmluZGV4T2YoaXRlbS5zY3JlZW5Hcm91cElkKSA8IDApIHtcbiAgICAgICAgIWlzQ29udGVudEV4aXN0cyhhcHBDb25maWcsIHJldEl0ZW1zLCBzZ0l0ZW0pICYmIHJldEl0ZW1zLnB1c2goc2dJdGVtKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGFwcENvbmZpZy5zY3JlZW5Hcm91cHM/LltpdGVtLnNjcmVlbkdyb3VwSWRdPy5zY3JlZW5zKSB7XG4gICAgICAgICAgYXBwQ29uZmlnLnNjcmVlbkdyb3Vwc1tpdGVtLnNjcmVlbkdyb3VwSWRdLnNjcmVlbnMuZm9yRWFjaChzY3JlZW5JZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY3JlZW5Kc29uID0gYXBwQ29uZmlnLnNjcmVlbnM/LltzY3JlZW5JZF1cbiAgICAgICAgICAgIGlmIChzY3JlZW5Kc29uPy5tYWluKSB7XG4gICAgICAgICAgICAgIGdldFBlbmRpbmdMYXlvdXRJdGVtc0Zyb21PdGhlclNpemVNb2RlKFxuICAgICAgICAgICAgICAgIGFwcENvbmZpZyxcbiAgICAgICAgICAgICAgICBzY3JlZW5Kc29uLm1haW4ubGF5b3V0LFxuICAgICAgICAgICAgICAgIHNpemVNb2RlLFxuICAgICAgICAgICAgICAgIHRoaXNXaWRnZXRJZHMsXG4gICAgICAgICAgICAgICAgdGhpc1NlY3Rpb25JZHMsXG4gICAgICAgICAgICAgICAgdGhpc1NjcmVlbkdyb3VwSWRzXG4gICAgICAgICAgICAgICkuZm9yRWFjaChzZWN0aW9uSXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgIWlzQ29udGVudEV4aXN0cyhhcHBDb25maWcsIHJldEl0ZW1zLCBzZWN0aW9uSXRlbSkgJiYgcmV0SXRlbXMucHVzaChzZWN0aW9uSXRlbSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzY3JlZW5Kc29uPy5wYW5lbCkge1xuICAgICAgICAgICAgICBnZXRQZW5kaW5nTGF5b3V0SXRlbXNGcm9tT3RoZXJTaXplTW9kZShcbiAgICAgICAgICAgICAgICBhcHBDb25maWcsXG4gICAgICAgICAgICAgICAgc2NyZWVuSnNvbi5wYW5lbC5sYXlvdXQsXG4gICAgICAgICAgICAgICAgc2l6ZU1vZGUsXG4gICAgICAgICAgICAgICAgdGhpc1dpZGdldElkcyxcbiAgICAgICAgICAgICAgICB0aGlzU2VjdGlvbklkcyxcbiAgICAgICAgICAgICAgICB0aGlzU2NyZWVuR3JvdXBJZHNcbiAgICAgICAgICAgICAgKS5mb3JFYWNoKHNlY3Rpb25JdGVtID0+IHtcbiAgICAgICAgICAgICAgICAhaXNDb250ZW50RXhpc3RzKGFwcENvbmZpZywgcmV0SXRlbXMsIHNlY3Rpb25JdGVtKSAmJiByZXRJdGVtcy5wdXNoKHNlY3Rpb25JdGVtKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIHJldHVybiByZXRJdGVtc1xufVxuXG5mdW5jdGlvbiBpc0NvbnRlbnRFeGlzdHMgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGxheW91dEluZm9zOiBMYXlvdXRJbmZvW10sIGxheW91dEluZm86IExheW91dEluZm8pOiBib29sZWFuIHtcbiAgY29uc3QgbGF5b3V0SXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW2xheW91dEluZm8ubGF5b3V0SWRdLmNvbnRlbnRbbGF5b3V0SW5mby5sYXlvdXRJdGVtSWRdXG4gIHJldHVybiAhIWxheW91dEluZm9zLmZpbmQoaW5mbyA9PiB7XG4gICAgY29uc3QgaXRlbSA9IGFwcENvbmZpZy5sYXlvdXRzW2luZm8ubGF5b3V0SWRdLmNvbnRlbnRbaW5mby5sYXlvdXRJdGVtSWRdXG4gICAgcmV0dXJuIChcbiAgICAgIGl0ZW0udHlwZSA9PT0gbGF5b3V0SXRlbS50eXBlICYmXG4gICAgICAoKGl0ZW0udHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmIGl0ZW0ud2lkZ2V0SWQgPT09IGxheW91dEl0ZW0ud2lkZ2V0SWQpIHx8XG4gICAgICAgIChpdGVtLnR5cGUgPT09IExheW91dEl0ZW1UeXBlLlNlY3Rpb24gJiYgaXRlbS5zZWN0aW9uSWQgPT09IGxheW91dEl0ZW0uc2VjdGlvbklkKSlcbiAgICApXG4gIH0pXG59XG4iLCJpbXBvcnQgeyB0eXBlIElNU3RhdGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNlY3Rpb25Qcm9wcyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VjdGlvbkluZm8gKHN0YXRlOiBJTVN0YXRlLCBzZWN0aW9uSWQ6IHN0cmluZyk6IFNlY3Rpb25Qcm9wcyB7XG4gIGNvbnN0IHNlY3Rpb24gPSBzdGF0ZS5hcHBDb25maWcuc2VjdGlvbnNbc2VjdGlvbklkXVxuICBpZiAoIXNlY3Rpb24gfHwgIXNlY3Rpb24udmlld3MpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGNvbnN0IG5hdkluZm8gPSBzdGF0ZS5hcHBSdW50aW1lSW5mby5zZWN0aW9uTmF2SW5mb3M/LltzZWN0aW9uLmlkXVxuICBsZXQgYWN0aXZlVmlld1xuICBpZiAoIW5hdkluZm8pIHtcbiAgICBjb25zdCBhY3RpdmVWaWV3SWQgPSBzZWN0aW9uLnZpZXdzWzBdXG4gICAgYWN0aXZlVmlldyA9IHN0YXRlLmFwcENvbmZpZy52aWV3c1thY3RpdmVWaWV3SWRdXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNlY3Rpb25JZCxcbiAgICBuYXZJbmZvLFxuICAgIGFjdGl2ZVZpZXcsXG4gICAgdmlld3M6IHNlY3Rpb24udmlld3MsXG4gICAgc2VjdGlvblN0eWxlOiBzZWN0aW9uLnN0eWxlLFxuICAgIHRyYW5zaXRpb246IHNlY3Rpb24udHJhbnNpdGlvbixcbiAgICBhdXRvUGxheTogc2VjdGlvbi5hdXRvUGxheSxcbiAgICBpbnRlcnZhbDogc2VjdGlvbi5pbnRlcnZhbCxcbiAgICBsb29wOiBzZWN0aW9uLmxvb3AsXG4gICAgZm9jdXNhYmxlOiBzZWN0aW9uLmZvY3VzYWJsZVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIHByZXZpb3VzVmlldzogJ1ByZXZpb3VzIHZpZXcnLFxuICBuZXh0VmlldzogJ05leHQgdmlldycsXG4gIG9yaWdpblRMOiAnVG9wIGxlZnQgYXMgb3JpZ2luJyxcbiAgb3JpZ2luVFI6ICdUb3AgcmlnaHQgYXMgb3JpZ2luJyxcbiAgb3JpZ2luQkw6ICdCb3R0b20gbGVmdCBhcyBvcmlnaW4nLFxuICBvcmlnaW5CUjogJ0JvdHRvbSByaWdodCBhcyBvcmlnaW4nLFxuICBhbGlnbkxlZnQ6ICdBbGlnbiBsZWZ0JyxcbiAgYWxpZ25SaWdodDogJ0FsaWduIHJpZ2h0JyxcbiAgYWxpZ25Ub3A6ICdBbGlnbiB0b3AnLFxuICBhbGlnbkNlbnRlcjogJ0FsaWduIGNlbnRlcicsXG4gIGFsaWduSENlbnRlcjogJ0hvcml6b250YWwgY2VudGVyJyxcbiAgYWxpZ25WQ2VudGVyOiAnVmVydGljYWwgY2VudGVyJyxcbiAgYWxpZ25Cb3R0b206ICdBbGlnbiBib3R0b20nLFxuICBhbGlnblN0cmV0Y2g6ICdBbGlnbiBzdHJldGNoJyxcbiAgc2VuZEJhY2t3YXJkOiAnU2VuZCBiYWNrd2FyZCcsXG4gIGJyaW5nRm9yd2FyZDogJ0JyaW5nIGZvcndhcmQnLFxuICBzZW5kVG9CYWNrOiAnU2VuZCB0byBiYWNrJyxcbiAgYnJpbmdUb0Zyb250OiAnQnJpbmcgdG8gZnJvbnQnLFxuICB6b29tb3V0Rml4ZWQ6ICdab29tIG91dCBmaXhlZCcsXG4gIG9yZGVyOiAnT3JkZXInLFxuICBtb3ZlVG9MZWZ0OiAnTW92ZSB0byBsZWZ0JyxcbiAgbW92ZVRvUmlnaHQ6ICdNb3ZlIHRvIHJpZ2h0JyxcbiAgbW92ZVRvVG9wOiAnTW92ZSB0byB0b3AnLFxuICBtb3ZlVG9Cb3R0b206ICdNb3ZlIHRvIGJvdHRvbScsXG4gIGFkZFZpZXc6ICdOZXcgdmlldycsXG4gIGR1cGxpY2F0ZVNjcmVlbjogJ0R1cGxpY2F0ZSBzY3JlZW4nLFxuICBkZWxldGVTY3JlZW46ICdEZWxldGUgc2NyZWVuJyxcbiAgYXBwbHlUb0ZpcnN0UGFuZWw6ICdBcHBseSB0byB0aGUgZmlyc3QgcGFuZWwnLFxuICBkZWxldGVWaWV3OiAnRGVsZXRlIHZpZXcnLFxuICBkdXBsaWNhdGVWaWV3OiAnRHVwbGljYXRlIHZpZXcnLFxuICBpbnNlcnRBQmxvY2s6ICdJbnNlcnQgYmxvY2snLFxuICBpbnNlcnRBU2NyZWVuR3JvdXA6ICdJbnNlcnQgc2NyZWVuIGdyb3VwJyxcbiAgbW92ZXVwOiAnTW92ZSB1cCcsXG4gIG1vdmVkb3duOiAnTW92ZSBkb3duJyxcbiAgY2hvb3NlVGVtcGxhdGU6ICdDaG9vc2UgYSB7dHlwZX0gdGVtcGxhdGUnLFxuICBjaG9vc2VIZWFkZXJUZW1wbGF0ZTogJ0Nob29zZSBhIGhlYWRlciB0ZW1wbGF0ZScsXG4gIGNob29zZUZvb3RlclRlbXBsYXRlOiAnQ2hvb3NlIGEgZm9vdGVyIHRlbXBsYXRlJyxcbiAgZHJvcFdpZGdldFRvQWRkOiAnT3IgZHJhZyBhIHdpZGdldCBoZXJlJyxcbiAgc25hcFRvTGVmdDogJ1NuYXAgdG8gbGVmdCcsXG4gIHNuYXBUb1RvcDogJ1NuYXAgdG8gdG9wJyxcbiAgc25hcFRvQm90dG9tOiAnU25hcCB0byBib3R0b20nLFxuICBzbmFwVG9SaWdodDogJ1NuYXAgdG8gcmlnaHQnLFxuICBmdWxsV2lkdGg6ICdGdWxsIHdpZHRoJyxcbiAgZnVsbEhlaWdodDogJ0Z1bGwgaGVpZ2h0JyxcbiAgZnVsbFNpemU6ICdGdWxsIHNpemUnLFxuICByZXN0b3JlU2l6ZTogJ1Jlc3RvcmUgc2l6ZScsXG4gIHBlbmRpbmdUaXA6ICdNb3ZlIHRvIHRoZSBwZW5kaW5nIGxpc3QnLFxuICBzZXR0aW5nOiAnU2V0dGluZ3MnLFxuICBkcmFnVG9Nb3ZlOiAnRHJhZyB0byBtb3ZlIHtsYWJlbH0nLFxuICBsb2NrTGF5b3V0OiAnTG9jayBwb3NpdGlvbiBhbmQgc2l6ZScsXG4gIHVubG9ja0xheW91dDogJ1VubG9jayBwb3NpdGlvbiBhbmQgc2l6ZScsXG4gIGVkaXRIZWFkZXI6ICdFZGl0IGhlYWRlcicsXG4gIGVkaXRGb290ZXI6ICdFZGl0IGZvb3RlcicsXG4gIHRyYW5zZm9ybTogJ1RyYW5zZm9ybScsXG4gIHJvdGF0aW9uOiAnUm90YXRpb24nLFxuICBhbmdsZTogJ0FuZ2xlJyxcbiAgZmxvYXRpbmc6ICdQaW4nLFxuICBzaW5raW5nOiAnVW5waW4nLFxuICBmbG9hdGluZ0FyZWE6ICdGbG9hdGluZyBhcmVhJyxcbiAgY2hhbmdlVG9BdXRvOiAnQ2hhbmdlIHRvIGF1dG8nLFxuICBjaGFuZ2VUb0N1c3RvbTogJ0NoYW5nZSB0byBjdXN0b20nLFxuXG4gIHBvc2l0aW9uVHlwZTogJ1Bvc2l0aW9uIHR5cGUnLFxuICBzdGlja3k6ICdTdGlja3knLFxuICBmaXhlZDogJ0ZpeGVkJyxcbiAgZmxvdzogJ0Zsb3cnLFxuICBzdGFjazogJ1N0YWNrJyxcbiAgZml4ZWRBdFRvcDogJ0Zsb2F0aW5nIGF0IHRoZSB0b3Agd2hlbiBzY3JvbGxpbmcnLFxuICBhY3ROb3JtYWw6ICdBY3QgYXMgbm9ybWFsIHdpZGdldCcsXG5cbiAgaGlkZUluRGVzaWduVmlldzogJ0hpZGUgaW4gZGVzaWduIHZpZXcnLFxuICBzaG93SW5EZXNpZ25WaWV3OiAnU2hvdyBpbiBkZXNpZ24gdmlldycsXG5cbiAgdW5sb2NrR3JpZEl0ZW06ICdVbmxvY2sgdGhpcyB3aWRnZXQgdG8gcmVvcmdhbml6ZSBpdHMgaW50ZXJuYWwgd2lkZ2V0cy4nLFxuICBsb2NrR3JpZEl0ZW06ICdMb2NrIHRoaXMgd2lkZ2V0LicsXG5cbiAgc3BsaXRIb3Jpem9udGFsbHk6ICdTcGxpdCBob3Jpem9udGFsbHknLFxuICBzcGxpdFZlcnRpY2FsbHk6ICdTcGxpdCB2ZXJ0aWNhbGx5J1xufVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBSZWFjdCxcbiAgdHlwZSBJTUxheW91dEl0ZW1Kc29uLFxuICB0eXBlIElNU2l6ZU1vZGVMYXlvdXRKc29uLFxuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICB0eXBlIElNTGF5b3V0SnNvbixcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcbiAgdHlwZSBMYXlvdXRJbmZvLFxuICB0eXBlIElNVmlld0pzb24sXG4gIHR5cGUgSU1XaWRnZXRKc29uLFxuICB0eXBlIExheW91dENvbnRleHRUb29sUHJvcHMsXG4gIHR5cGUgSU1TZWN0aW9uTmF2SW5mbyxcbiAgdHlwZSBBbmltYXRpb25TZXR0aW5nLFxuICB0eXBlIEFuaW1hdGlvblBsYXlNb2RlLFxuICB0eXBlIEJyb3dzZXJTaXplTW9kZSxcbiAgdHlwZSBXaWRnZXRJbml0RHJhZ0NhbGxiYWNrLFxuICB0eXBlIFdpZGdldEluaXRSZXNpemVDYWxsYmFja1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIEZvdXJTaWRlc1VuaXQgfSBmcm9tICdqaW11LXVpJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFBvc2l0aW9uIHtcbiAgeD86IG51bWJlclxuICB5PzogbnVtYmVyXG4gIHc6IG51bWJlclxuICBoOiBudW1iZXJcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gT3JkZXJBZGp1c3RUeXBlIHtcbiAgQnJpbmdGb3J3YXJkID0gMCxcbiAgU2VuZEJhY2t3YXJkID0gMSxcbiAgQnJpbmdUb0Zyb250ID0gMixcbiAgU2VuZFRvQmFjayA9IDMsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF5b3V0UHJvcHMge1xuICBsYXlvdXRzOiBJTVNpemVNb2RlTGF5b3V0SnNvblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgc3R5bGU/OiBhbnlcbiAgaXNJblNlY3Rpb24/OiBib29sZWFuXG4gIGlzSW5XaWRnZXQ/OiBib29sZWFuXG4gIGlzUmVwZWF0PzogYm9vbGVhblxuICBpc1BhZ2VJdGVtPzogYm9vbGVhblxuICB2aXNpYmxlPzogYm9vbGVhblxuICBpdGVtRHJhZ2dhYmxlPzogYm9vbGVhblxuICBpdGVtUmVzaXphYmxlPzogYm9vbGVhblxuICBpdGVtU2VsZWN0YWJsZT86IGJvb2xlYW5cbiAgZHJvcHBhYmxlPzogYm9vbGVhblxuICBzaG93RGVmYXVsdFRvb2xzPzogYm9vbGVhblxuICBpc0l0ZW1BY2NlcHRlZD86IChpdGVtOiBMYXlvdXRJdGVtQ29uc3RydWN0b3JQcm9wcywgaXNSZXBsYWNlUGxhY2Vob2xkZXI6IGJvb2xlYW4pID0+IGJvb2xlYW5cbiAgb25JdGVtQ2xpY2s/OiAoZSwgd2lkZ2V0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBpZ25vcmVNaW5IZWlnaHQ/OiBib29sZWFuIC8vIHVzZWQgaW4gZml4ZWQgbGF5b3V0XG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF5b3V0SXRlbVByb3BzIHtcbiAgbGF5b3V0SWQ6IHN0cmluZ1xuICBsYXlvdXRJdGVtSWQ6IHN0cmluZ1xuICBkcmFnZ2FibGU/OiBib29sZWFuXG4gIHJlc2l6YWJsZT86IGJvb2xlYW5cbiAgc2VsZWN0YWJsZT86IGJvb2xlYW5cbiAgZm9yYmlkQ29udGV4dE1lbnU/OiBib29sZWFuXG4gIGZvcmJpZFRvb2xiYXI/OiBib29sZWFuXG4gIHNob3dEZWZhdWx0VG9vbHM/OiBib29sZWFuXG4gIGlzSW5TZWN0aW9uPzogYm9vbGVhblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgc3R5bGU/OiBSZWFjdC5DU1NQcm9wZXJ0aWVzXG4gIHRyYWlsT3JkZXI/OiBudW1iZXIgLy8gb3JkZXIgb2YgdHJhaWwgYW5pbWF0aW9uXG4gIG9uQ2xpY2s/OiAoZSwgbGF5b3V0SW5mbzogTGF5b3V0SW5mbykgPT4gdm9pZFxuICBvbkRvdWJsZUNsaWNrPzogKGUsIGxheW91dEluZm86IExheW91dEluZm8pID0+IHZvaWRcbiAgZm9yY2VBc3BlY3RSYXRpbz86IGJvb2xlYW5cbiAgYXNwZWN0UmF0aW8/OiBudW1iZXJcbiAgcmVzaXplT2JzZXJ2ZXI/OiBSZXNpemVPYnNlcnZlclxuICBjaGlsZHJlbj86IGFueVxuICBhdXRvV2lkdGg/OiBib29sZWFuXG4gIGF1dG9IZWlnaHQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVUb0xheW91dFByb3BzIHtcbiAgbWFpblNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgYnJvd3NlclNpemVNb2RlOiBCcm93c2VyU2l6ZU1vZGVcbiAgbGF5b3V0OiBJTUxheW91dEpzb25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzIHtcbiAgbGF5b3V0SXRlbTogSU1MYXlvdXRJdGVtSnNvblxuICBzZWxlY3RlZD86IGJvb2xlYW5cbiAgYXV0b1Njcm9sbD86IGJvb2xlYW5cbiAgYW5pbWF0aW9uUHJldmlldz86IGJvb2xlYW5cbiAgaG92ZXJQcmV2aWV3PzogYm9vbGVhblxuICBwbGF5TW9kZT86IEFuaW1hdGlvblBsYXlNb2RlXG4gIHByZXZpZXdJZD86IG51bWJlclxuICB3YXRjaFZpZXdwb3J0VmlzaWJpbGl0eT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBXaWRnZXRQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgaXNDbGFzc0xvYWRlZDogYm9vbGVhblxuICBpc0lubGluZUVkaXRpbmc6IGJvb2xlYW5cbiAgaXNGdW5jdGlvbmFsV2lkZ2V0OiBib29sZWFuXG4gIGlzSW5Db250cm9sbGVyOiBib29sZWFuXG4gIGhhc0VtYmVkZGVkTGF5b3V0OiBib29sZWFuXG4gIHVzZURyYWdIYW5kbGVyOiBib29sZWFuXG4gIHdpZGdldFN0YXRlPzogYW55XG4gIHN1cHBvcnRJbmxpbmVFZGl0aW5nOiBib29sZWFuXG4gIHN1cHBvcnRSZXBlYXQ6IGJvb2xlYW5cbiAgY2FuQ3Jvc3NMYXlvdXRCb3VuZGFyeTogYm9vbGVhblxuICByb3RhdGU/OiBudW1iZXJcbiAgd2lkZ2V0U3R5bGU6IGFueVxuICBoYXNFeHRlbnNpb24/OiBib29sZWFuXG4gIHdpZGdldEpzb24/OiBJTVdpZGdldEpzb25cbiAgb25Jbml0UmVzaXplSGFuZGxlcj86IFdpZGdldEluaXRSZXNpemVDYWxsYmFja1xuICBvbkluaXREcmFnSGFuZGxlcj86IFdpZGdldEluaXREcmFnQ2FsbGJhY2tcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN0aW9uUHJvcHMge1xuICBzZWN0aW9uSWQ6IHN0cmluZ1xuICB2aWV3czogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxuICBhY3RpdmVWaWV3PzogSU1WaWV3SnNvblxuICByb3RhdGU/OiBudW1iZXJcbiAgc2VjdGlvblN0eWxlOiBhbnlcbiAgbmF2SW5mbzogSU1TZWN0aW9uTmF2SW5mb1xuICB0cmFuc2l0aW9uPzoge1xuICAgIHR5cGU6IHN0cmluZ1xuICAgIGRpcmVjdGlvbj86IHN0cmluZ1xuICB9XG4gIGF1dG9QbGF5PzogYm9vbGVhblxuICBpbnRlcnZhbD86IG51bWJlclxuICBsb29wPzogYm9vbGVhblxuICBmb2N1c2FibGU/OiBib29sZWFuXG59XG5cbmV4cG9ydCBjb25zdCBDT0xTX0lOX09ORV9ST1cgPSAxMlxuXG5leHBvcnQgY29uc3QgQ09OVEVYVF9NRU5VX0lURU1fU0laRSA9IDI4XG5leHBvcnQgY29uc3QgQ09OVEVYVF9NRU5VX0lDT05fU0laRSA9IDE2XG5leHBvcnQgY29uc3QgTUlOX0xBWU9VVF9JVEVNX1NJWkUgPSAxNlxuZXhwb3J0IGNvbnN0IENMSUNLX1RPTFJFUkFOQ0UgPSA1XG5leHBvcnQgY29uc3QgREVGQVVMVF9BVVRPUExBWV9JTlRFUlZBTCA9IDNcblxuLy8gMCA8IHpJbmRleCA8IDEwIGlzIG1hbmFnZWQgYnkgY29tcG9uZW50IGl0c2VsZlxuZXhwb3J0IGVudW0gTGF5b3V0WkluZGV4IHtcbiAgQXV0byA9ICdhdXRvJyxcbiAgTm9ybWFsID0gMCxcbiAgQm91bmRhcnlEcm9wQXJlYSA9IDEwLFxuICBEcmFnTW92ZVRpcCA9IDIwLFxuICBIYW5kbGVyVG9vbHMgPSAzMCxcbiAgRHJhZ2dpbmdJdGVtID0gNDAsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbW9uTGF5b3V0U2V0dGluZyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBzdHlsZT86IGFueVxuICBvcmRlcj86IG51bWJlclxuICBsb2NrQ2hpbGRyZW4/OiBib29sZWFuXG4gIGxvY2tEZXNjZW5kYW50cz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21tb25MYXlvdXRJdGVtU2V0dGluZyB7XG4gIGxvY2tQYXJlbnQ/OiBib29sZWFuXG4gIHBsYWNlaG9sZGVyU3R5bGU/OiBhbnlcbiAgc3R5bGU/OiBhbnlcbiAgZWZmZWN0PzogeyBba2V5OiBzdHJpbmddOiBBbmltYXRpb25TZXR0aW5nIH1cbiAgb25lQnlPbmVFZmZlY3Q/OiB7IFtrZXk6IHN0cmluZ106IEFuaW1hdGlvblNldHRpbmcgfVxuICBlZmZlY3RQbGF5TW9kZT86IEFuaW1hdGlvblBsYXlNb2RlXG4gIGhvdmVyRWZmZWN0PzogeyB0eXBlOiBzdHJpbmcsIHNldHRpbmc6IGFueSB9XG4gIGF1dG9Qcm9wcz86IHtcbiAgICBsZWZ0PzogYm9vbGVhblxuICAgIHJpZ2h0PzogYm9vbGVhblxuICAgIHRvcD86IGJvb2xlYW5cbiAgICBib3R0b20/OiBib29sZWFuXG4gICAgd2lkdGg/OiBMYXlvdXRJdGVtU2l6ZU1vZGVzXG4gICAgaGVpZ2h0PzogTGF5b3V0SXRlbVNpemVNb2Rlc1xuICB9XG4gIGFzcGVjdFJhdGlvPzogbnVtYmVyIHwgc3RyaW5nXG4gIGhlaWdodE1vZGU/OiAnZml0JyB8ICdmaXhlZCcgfCAncmF0aW8nIHwgJ2F1dG8nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRml4ZWRMYXlvdXRTZXR0aW5nIGV4dGVuZHMgQ29tbW9uTGF5b3V0U2V0dGluZyB7XG4gIGdyaWRTaXplPzogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxvd0xheW91dFNldHRpbmcgZXh0ZW5kcyBDb21tb25MYXlvdXRTZXR0aW5nIHtcbiAgZ3V0dGVyPzogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uTGF5b3V0U2V0dGluZyBleHRlbmRzIENvbW1vbkxheW91dFNldHRpbmcge1xuICBtaW46IG51bWJlclxuICBzcGFjZTogbnVtYmVyXG4gIGp1c3RpZnlDb250ZW50Pzogc3RyaW5nXG4gIG92ZXJmbG93WT86IGJvb2xlYW5cbiAgcGFkZGluZz86IHtcbiAgICBudW1iZXI6IG51bWJlcltdXG4gICAgdW5pdDogc3RyaW5nXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcmlkTGF5b3V0U2V0dGluZyBleHRlbmRzIENvbW1vbkxheW91dFNldHRpbmcge1xuICByb290SXRlbTogc3RyaW5nXG4gIHJlc2l6YWJsZT86IGJvb2xlYW5cbiAgZXhwYW5kYWJsZT86IGJvb2xlYW5cbiAgc3BsaXRTaXplPzogbnVtYmVyXG4gIHNwbGl0Q29sb3I/OiBzdHJpbmdcbiAgcGFkZGluZ0NvbG9yPzogc3RyaW5nXG4gIHN0eWxlPzoge1xuICAgIHBhZGRpbmc/OiBGb3VyU2lkZXNVbml0XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBSb3dMYXlvdXRJdGVtU2V0dGluZyBleHRlbmRzIENvbW1vbkxheW91dEl0ZW1TZXR0aW5nIHtcbiAgb2Zmc2V0WD86IG51bWJlclxuICBvZmZzZXRZPzogbnVtYmVyXG4gIHN0eWxlOiB7XG4gICAgYWxpZ25TZWxmOiAnZmxleC1zdGFydCcgfCAnZmxleC1lbmQnIHwgJ2NlbnRlcicgfCAnc3RyZXRjaCdcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJvd0xheW91dFNldHRpbmcgZXh0ZW5kcyBDb21tb25MYXlvdXRTZXR0aW5nIHtcbiAgc3BhY2U6IG51bWJlclxuICBzdHlsZToge1xuICAgIHBhZGRpbmc/OiBGb3VyU2lkZXNVbml0XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBGbG93TGF5b3V0SXRlbVNldHRpbmcgZXh0ZW5kcyBDb21tb25MYXlvdXRJdGVtU2V0dGluZyB7XG4gIGlzRmxvYXRpbmc/OiBib29sZWFuXG4gIGZsb2F0aW5nQXJlYT86IG51bWJlciAvLyAxfjlcbiAgd2lkdGg/OiBudW1iZXJcbiAgb2Zmc2V0WD86IG51bWJlclxuICBvZmZzZXRZPzogbnVtYmVyXG59XG5cbmV4cG9ydCBlbnVtIExheW91dEl0ZW1TaXplTW9kZXMge1xuICBBdXRvID0gJ0FVVE8nLFxuICBTdHJldGNoID0gJ1NUUkVUQ0gnLFxuICBDdXN0b20gPSAnQ1VTVE9NJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpeGVkTGF5b3V0SXRlbVNldHRpbmcgZXh0ZW5kcyBDb21tb25MYXlvdXRJdGVtU2V0dGluZyB7XG4gIGhDZW50ZXI/OiBib29sZWFuXG4gIHZDZW50ZXI/OiBib29sZWFuXG4gIGxvY2tMYXlvdXQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbEl0ZW1Db25maWcge1xuICBpY29uPzpcbiAgfCBSZWFjdC5Db21wb25lbnRDbGFzczxSZWFjdC5TVkdBdHRyaWJ1dGVzPFNWR0VsZW1lbnQ+PlxuICB8ICgocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IFJlYWN0LkNvbXBvbmVudENsYXNzPFJlYWN0LlNWR0F0dHJpYnV0ZXM8U1ZHRWxlbWVudD4+KVxuICBjYXJldD86IGJvb2xlYW5cbiAgYXV0b0ZsaXBJY29uPzogYm9vbGVhblxuICB0aXRsZT86IHN0cmluZyB8ICgocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMgJiB7IGZvcm1hdE1lc3NhZ2U6IChpZDogc3RyaW5nLCB2YWx1ZXM/OiBhbnkpID0+IHN0cmluZyB9KSA9PiBzdHJpbmcpXG4gIHNpemU/OiBudW1iZXJcbiAgbGFiZWw/OiBzdHJpbmcgfCAoKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzICYgeyBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZywgdmFsdWVzPzogYW55KSA9PiBzdHJpbmcgfSkgPT4gc3RyaW5nKVxuICBkaXNhYmxlZD86IGJvb2xlYW4gfCAoKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzKSA9PiBib29sZWFuKVxuICBjaGVja2VkPzogYm9vbGVhbiB8ICgocHJvcHM6IExheW91dENvbnRleHRUb29sUHJvcHMpID0+IGJvb2xlYW4pXG4gIHZpc2libGU/OiBib29sZWFuIHwgKChwcm9wczogTGF5b3V0Q29udGV4dFRvb2xQcm9wcykgPT4gYm9vbGVhbilcbiAgcm90YXRlPzogbnVtYmVyXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBvbkNsaWNrPzogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzLCBldnQ/OiBSZWFjdC5Nb3VzZUV2ZW50PGFueT4pID0+IHZvaWRcbiAgb25Nb3VzZUVudGVyPzogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzLCBldnQ/OiBSZWFjdC5Nb3VzZUV2ZW50PGFueT4pID0+IHZvaWRcbiAgb25Nb3VzZUxlYXZlPzogKHByb3BzOiBMYXlvdXRDb250ZXh0VG9vbFByb3BzLCBldnQ/OiBSZWFjdC5Nb3VzZUV2ZW50PGFueT4pID0+IHZvaWRcbiAgc2V0dGluZ1BhbmVsPzogUmVhY3QuQ29tcG9uZW50Q2xhc3NcbiAgd2lkZ2V0SWQ/OiBzdHJpbmdcbiAgc2VwZXJhdG9yPzogYm9vbGVhblxuICBleHROYW1lPzogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFRvb2xiYXJDb25maWcgPSBBcnJheTxUb29sSXRlbUNvbmZpZyB8IFRvb2xJdGVtQ29uZmlnW10+XG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZnVuY3Rpb24gYnVpbGRUaHJlc2hvbGRMaXN0ICgpIHtcbiAgY29uc3Qgc3RlcCA9IDEwXG4gIGNvbnN0IHJlc3VsdCA9IFswXVxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBzdGVwOyBpKyspIHtcbiAgICByZXN1bHQucHVzaChpIC8gc3RlcClcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSByZWZcbiAqIEBwYXJhbSByb290RWxlbWVudFxuICogQHBhcmFtIG9uSW50ZXJzZWN0aW9uQ2hhbmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VWaWV3cG9ydEludGVyc2VjdGlvbiAoXG4gIHJlZjogSFRNTEVsZW1lbnQsXG4gIHdhdGNoVmlld3BvcnRWaXNpYmlsaXR5OiBib29sZWFuXG4pIHtcbiAgY29uc3Qgb2JzZXJ2ZXJSZWYgPSBSZWFjdC51c2VSZWY8SW50ZXJzZWN0aW9uT2JzZXJ2ZXI+KClcbiAgY29uc3QgW2lzSW5WaWV3cG9ydCwgc2V0SXNJblZpZXdwb3J0XSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob2JzZXJ2ZXJSZWYuY3VycmVudCkge1xuICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudC51bm9ic2VydmUocmVmKVxuICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoIXdhdGNoVmlld3BvcnRWaXNpYmlsaXR5KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVJbnRlcnNlY3Rpb25DaGFuZ2UgPSAoZW50cnk6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkpID0+IHtcbiAgICAgIGlmIChlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwbGF5aW5nLWFuaW1hdGlvbicpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdC53aWR0aCA+IDAgJiYgZW50cnkuYm91bmRpbmdDbGllbnRSZWN0LmhlaWdodCA+IDApIHtcbiAgICAgICAgc2V0SXNJblZpZXdwb3J0KGVudHJ5LmlzSW50ZXJzZWN0aW5nKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZWYgJiYgdHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zdCBoYW5kbGVyID0gKGVudHJpZXM6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnlbXSkgPT4ge1xuICAgICAgICBoYW5kbGVJbnRlcnNlY3Rpb25DaGFuZ2UoZW50cmllc1swXSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICBoYW5kbGVyLFxuICAgICAgICB7XG4gICAgICAgICAgdGhyZXNob2xkOiBidWlsZFRocmVzaG9sZExpc3QoKSxcbiAgICAgICAgICByb290OiBkb2N1bWVudCxcbiAgICAgICAgICByb290TWFyZ2luOiAnMjAlJ1xuICAgICAgICB9XG4gICAgICApXG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHJlZilcbiAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQgPSBvYnNlcnZlclxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBvYnNlcnZlclJlZi5jdXJyZW50LnVub2JzZXJ2ZShyZWYpXG4gICAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9LCBbcmVmLCB3YXRjaFZpZXdwb3J0VmlzaWJpbGl0eV0pXG5cbiAgcmV0dXJuIGlzSW5WaWV3cG9ydFxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWNvbnN0ICovXG5pbXBvcnQge1xuICBJbW11dGFibGUsXG4gIHR5cGUgSU1MYXlvdXRKc29uLFxuICB0eXBlIElNQm91bmRpbmdCb3gsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTUFwcENvbmZpZyxcbiAgZ2V0QXBwU3RvcmUsXG4gIFdpZGdldFR5cGUsXG4gIHR5cGUgSU1MYXlvdXRJdGVtSnNvbixcbiAgdHlwZSBCcm93c2VyU2l6ZU1vZGUsXG4gIHR5cGUgUGFnZVBhcnQsXG4gIExheW91dEl0ZW1UeXBlLFxuICB0eXBlIExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxuICB0eXBlIEJvdW5kaW5nQm94LFxuICBwb2xpc2hlZCxcbiAgY3JlYXRlU2VsZWN0b3IsXG4gIExheW91dFBhcmVudFR5cGUsXG4gIENvbnRhaW5lclR5cGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBMaW5lYXJVbml0LCBEaXN0YW5jZVVuaXRzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7XG4gIHR5cGUgV2lkZ2V0UHJvcHMsXG4gIHR5cGUgTGF5b3V0UHJvcHMsXG4gIHR5cGUgTGF5b3V0SXRlbVByb3BzLFxuICB0eXBlIFN0YXRlVG9MYXlvdXRQcm9wcyxcbiAgdHlwZSBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzLFxuICB0eXBlIENvbW1vbkxheW91dEl0ZW1TZXR0aW5nLFxuICBMYXlvdXRJdGVtU2l6ZU1vZGVzXG59IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBnZXRSb290Q29udGFpbmVySW5mb09mTGF5b3V0IH0gZnJvbSAnLi9zZWFyY2gvY29udGVudHMnXG5cbmV4cG9ydCBjb25zdCBlbXB0eUZ1bmMgPSAoKSA9PiB7fVxuXG5leHBvcnQgZnVuY3Rpb24gYXV0b0JpbmRIYW5kbGVycyAoZWw6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIGZuczogc3RyaW5nW10pOiB2b2lkIHtcbiAgZm5zLmZvckVhY2goa2V5ID0+IHtcbiAgICBpZiAoZWxba2V5XSkge1xuICAgICAgZWxba2V5XSA9IGVsW2tleV0uYmluZChlbClcbiAgICB9XG4gIH0pXG59XG5cbi8qKlxuICogR2V0IHRoZSBtYXhpbXVtIGlkIG9mIHRoZSBsYXlvdXQgaXRlbSB3aGljaCBjYW4gYmUgY29udmVydGVkIHRvIGEgbnVtYmVyLlxuICogQHBhcmFtIGxheW91dE1hcFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4aW11bUlkIChsYXlvdXRNYXA6IElNTGF5b3V0SnNvbik6IG51bWJlciB7XG4gIGxldCBtYXggPSAtMVxuICBpZiAobGF5b3V0TWFwLmNvbnRlbnQpIHtcbiAgICBPYmplY3Qua2V5cyhsYXlvdXRNYXAuY29udGVudCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgaWQgPSBwYXJzZUludChrZXksIDEwKVxuICAgICAgaWYgKGlkID4gbWF4KSB7XG4gICAgICAgIG1heCA9IGlkXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICByZXR1cm4gbWF4XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHBlcmNlbnRhZ2UgdmFsdWVcbiAqIEBwYXJhbSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQZXJjZW50YWdlICh2YWx1ZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gL14tP1xcZCooXFwuXFxkKyk/JSQvLnRlc3QodmFsdWUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5TGF5b3V0IChsYXlvdXQ6IElNTGF5b3V0SnNvbik6IGJvb2xlYW4ge1xuICBjb25zdCBpdGVtSWRzID0gT2JqZWN0LmtleXMobGF5b3V0LmNvbnRlbnQgPz8ge30pXG4gIGlmIChpdGVtSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgY29uc3QgaGFzTm9uUGVuZGluZyA9IGl0ZW1JZHMuc29tZShpZCA9PiB7XG4gICAgY29uc3QgaXRlbSA9IGxheW91dC5jb250ZW50W2lkXVxuICAgIHJldHVybiAhaXRlbS5pc1BlbmRpbmdcbiAgfSlcbiAgcmV0dXJuICFoYXNOb25QZW5kaW5nXG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGZpbml0ZSBudW1iZXJcbiAqIEBwYXJhbSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIgKHZhbHVlKTogYm9vbGVhbiB7XG4gIGNvbnN0IHJlc3VsdCA9IHBhcnNlRmxvYXQodmFsdWUpXG4gIHJldHVybiAhaXNOYU4ocmVzdWx0KSAmJiBpc0Zpbml0ZShyZXN1bHQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZU9mQkJveCAoYmJveDogQm91bmRpbmdCb3gsIHByb3A6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChiYm94Py5bcHJvcF0gPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgaWYgKHR5cGVvZiBiYm94W3Byb3BdID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBiYm94W3Byb3BdXG4gIH1cbiAgaWYgKGlzTnVtYmVyKGJib3hbcHJvcF0pKSB7XG4gICAgcmV0dXJuIGAke01hdGgucm91bmQocGFyc2VGbG9hdChiYm94W3Byb3BdKSl9cHhgXG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBDb252ZXJ0IHRoZSB2YWx1ZSB0byBwZXJjZW50YWdlIHZhbHVlIGluIHJlc3BlY3QgdG8gdGhlIHRvdGFsXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEBwYXJhbSB0b3RhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9SYXRpbyAodmFsdWU6IG51bWJlciwgdG90YWw6IG51bWJlcikge1xuICByZXR1cm4gYCR7KCh2YWx1ZSAqIDEwMCkgLyB0b3RhbCkudG9GaXhlZCgxKX0lYFxufVxuXG4vKipcbiAqIENvbnZlcnQgYSBwZXJjZW50YWdlIHZhbHVlIHRvIHBpeGVsIGluIHJlc3BlY3QgdG8gdGhlIHRvdGFsXG4gKiBAcGFyYW0gcmF0aW9cbiAqIEBwYXJhbSB0b3RhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJhdGlvIChyYXRpbzogbnVtYmVyIHwgc3RyaW5nLCB0b3RhbDogbnVtYmVyKSB7XG4gIHJldHVybiAocGFyc2VGbG9hdChgJHtyYXRpb31gKSAqIHRvdGFsKSAvIDEwMFxufVxuXG5leHBvcnQgY29uc3QgbWFwU3RhdGVUb0xheW91dFByb3BzOiAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRQcm9wcykgPT4gU3RhdGVUb0xheW91dFByb3BzID0gY3JlYXRlU2VsZWN0b3IoW1xuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGUsXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYnJvd3NlclNpemVNb2RlLFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRQcm9wcykgPT4ge1xuICAgIGxldCBpc0N1c3RvbVJvb3RcbiAgICBpZiAoc3RhdGUuYnJvd3NlclNpemVNb2RlID09PSBzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlKSB7XG4gICAgICBpc0N1c3RvbVJvb3QgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGRlcGVuZCBvbiB0aGUgcm9vdCBsYXlvdXQgaXRlbVxuICAgICAgbGV0IHVzZVNpemVNb2RlXG4gICAgICBpZiAob3duUHJvcHMubGF5b3V0cz8uW3N0YXRlLmJyb3dzZXJTaXplTW9kZV0pIHtcbiAgICAgICAgdXNlU2l6ZU1vZGUgPSBzdGF0ZS5icm93c2VyU2l6ZU1vZGVcbiAgICAgIH0gZWxzZSBpZiAob3duUHJvcHMubGF5b3V0cz8uW3N0YXRlLmFwcENvbmZpZy5tYWluU2l6ZU1vZGVdKSB7XG4gICAgICAgIHVzZVNpemVNb2RlID0gc3RhdGUuYXBwQ29uZmlnLm1haW5TaXplTW9kZVxuICAgICAgfVxuICAgICAgY29uc3QgdXNlTGF5b3V0SWQgPSBvd25Qcm9wcy5sYXlvdXRzPy5bdXNlU2l6ZU1vZGVdXG4gICAgICBjb25zdCBjb250YWluZXIgPSBnZXRSb290Q29udGFpbmVySW5mb09mTGF5b3V0KHN0YXRlLmFwcENvbmZpZywgdXNlTGF5b3V0SWQsIHVzZVNpemVNb2RlKVxuICAgICAgaWYgKGNvbnRhaW5lcj8udHlwZSA9PT0gQ29udGFpbmVyVHlwZS5IZWFkZXIpIHtcbiAgICAgICAgaXNDdXN0b21Sb290ID0gc3RhdGUuYXBwQ29uZmlnLmhlYWRlci5sYXlvdXRbc3RhdGUuYnJvd3NlclNpemVNb2RlXSAhPSBudWxsXG4gICAgICB9IGVsc2UgaWYgKGNvbnRhaW5lcj8udHlwZSA9PT0gQ29udGFpbmVyVHlwZS5Gb290ZXIpIHtcbiAgICAgICAgaXNDdXN0b21Sb290ID0gc3RhdGUuYXBwQ29uZmlnLmZvb3Rlci5sYXlvdXRbc3RhdGUuYnJvd3NlclNpemVNb2RlXSAhPSBudWxsXG4gICAgICB9IGVsc2UgaWYgKGNvbnRhaW5lcj8udHlwZSA9PT0gQ29udGFpbmVyVHlwZS5EaWFsb2cpIHtcbiAgICAgICAgY29uc3QgZGlhbG9nSnNvbiA9IHN0YXRlLmFwcENvbmZpZy5kaWFsb2dzW2NvbnRhaW5lci5pZF1cbiAgICAgICAgaXNDdXN0b21Sb290ID0gZGlhbG9nSnNvbi5sYXlvdXRbc3RhdGUuYnJvd3NlclNpemVNb2RlXSAhPSBudWxsXG4gICAgICB9IGVsc2UgaWYgKGNvbnRhaW5lcj8udHlwZSA9PT0gQ29udGFpbmVyVHlwZS5QYWdlKSB7XG4gICAgICAgIGNvbnN0IHBhZ2VKc29uID0gc3RhdGUuYXBwQ29uZmlnLnBhZ2VzW2NvbnRhaW5lci5pZF1cbiAgICAgICAgaXNDdXN0b21Sb290ID0gcGFnZUpzb24ubGF5b3V0W3N0YXRlLmJyb3dzZXJTaXplTW9kZV0gIT0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNDdXN0b21Sb290ICYmIG93blByb3BzLmxheW91dHM/LltzdGF0ZS5icm93c2VyU2l6ZU1vZGVdKSB7XG4gICAgICBjb25zdCBsYXlvdXRJZCA9IG93blByb3BzLmxheW91dHNbc3RhdGUuYnJvd3NlclNpemVNb2RlXVxuICAgICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXVxuICAgIH1cbiAgICBjb25zdCBsYXlvdXRJZCA9IG93blByb3BzLmxheW91dHM/LltzdGF0ZS5hcHBDb25maWcubWFpblNpemVNb2RlXVxuICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF1cbiAgfVxuXSwgKG1haW5TaXplTW9kZSwgYnJvd3NlclNpemVNb2RlLCBsYXlvdXQpID0+ICh7IG1haW5TaXplTW9kZSwgYnJvd3NlclNpemVNb2RlLCBsYXlvdXQgfSkpXG5cbmV4cG9ydCBjb25zdCBtYXBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzOiAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IFN0YXRlVG9MYXlvdXRJdGVtUHJvcHMgPSBjcmVhdGVTZWxlY3RvcihbXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IExheW91dEl0ZW1Qcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gb3duUHJvcHNcbiAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLmxheW91dHM/LltsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IExheW91dEl0ZW1Qcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gb3duUHJvcHNcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHM/LltsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gICAgaWYgKGxheW91dEl0ZW0/LnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCAmJiBsYXlvdXRJdGVtLndpZGdldElkKSB7XG4gICAgICBjb25zdCB3aWRnZXQgPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1tsYXlvdXRJdGVtLndpZGdldElkXVxuICAgICAgcmV0dXJuIHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/LndhdGNoVmlld3BvcnRWaXNpYmlsaXR5ID8/IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUpID0+IHN0YXRlLmFwcFJ1bnRpbWVJbmZvPy5zZWxlY3Rpb24sXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYXBwUnVudGltZUluZm8/LmFuaW1hdGlvblByZXZpZXcsXG4gIChzdGF0ZTogSU1TdGF0ZSkgPT4gc3RhdGUuYXBwUnVudGltZUluZm8/LmhvdmVyUHJldmlldyxcbiAgKF8sIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IG93blByb3BzLmxheW91dElkXG5dLCAobGF5b3V0SXRlbSwgd2F0Y2hWaWV3cG9ydFZpc2liaWxpdHksIHNlbGVjdGlvbiwgYW5pbWF0aW9uUHJldmlldywgaG92ZXJQcmV2aWV3LCBsYXlvdXRJZCkgPT4ge1xuICBpZiAoIWxheW91dEl0ZW0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGF5b3V0SXRlbTogbnVsbCxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGxldCBzZWxlY3RlZCA9IGZhbHNlXG4gIGNvbnN0IGlzUGVuZGluZyA9IGxheW91dEl0ZW0uaXNQZW5kaW5nID8/IGZhbHNlXG5cbiAgaWYgKHNlbGVjdGlvbikge1xuICAgIHNlbGVjdGVkID0gc2VsZWN0aW9uLmxheW91dElkID09PSBsYXlvdXRJZCAmJiBzZWxlY3Rpb24ubGF5b3V0SXRlbUlkID09PSBsYXlvdXRJdGVtLmlkXG4gIH1cbiAgY29uc3QgcmVzdWx0OiBTdGF0ZVRvTGF5b3V0SXRlbVByb3BzID0ge1xuICAgIHNlbGVjdGVkLFxuICAgIHdhdGNoVmlld3BvcnRWaXNpYmlsaXR5LFxuICAgIGxheW91dEl0ZW06IGlzUGVuZGluZyA/IG51bGwgOiBsYXlvdXRJdGVtLFxuICAgIGF1dG9TY3JvbGw6IHNlbGVjdGVkID8gc2VsZWN0aW9uLmF1dG9TY3JvbGwgOiB1bmRlZmluZWRcbiAgfVxuXG4gIGlmIChzZWxlY3RlZCAmJiBhbmltYXRpb25QcmV2aWV3Py5sYXlvdXRJbmZvKSB7XG4gICAgY29uc3QgeyBsYXlvdXRJZDogYW5pbUxheW91dElkLCBsYXlvdXRJdGVtSWQ6IGFuaW1JdGVtSWQgfSA9IGFuaW1hdGlvblByZXZpZXcubGF5b3V0SW5mb1xuICAgIHJlc3VsdC5hbmltYXRpb25QcmV2aWV3ID0gYW5pbUxheW91dElkID09PSBsYXlvdXRJZCAmJiBhbmltSXRlbUlkID09PSBsYXlvdXRJdGVtLmlkXG4gICAgcmVzdWx0LnBsYXlNb2RlID0gcmVzdWx0LmFuaW1hdGlvblByZXZpZXcgPyBhbmltYXRpb25QcmV2aWV3LnBsYXlNb2RlIDogbnVsbFxuICAgIHJlc3VsdC5wcmV2aWV3SWQgPSByZXN1bHQuYW5pbWF0aW9uUHJldmlldyA/IGFuaW1hdGlvblByZXZpZXcuaWQgOiBudWxsXG4gIH0gZWxzZSBpZiAoc2VsZWN0ZWQgJiYgaG92ZXJQcmV2aWV3Py5sYXlvdXRJbmZvKSB7XG4gICAgY29uc3QgeyBsYXlvdXRJZDogaG92ZXJMYXlvdXRJZCwgbGF5b3V0SXRlbUlkOiBob3Zlckl0ZW1JZCB9ID0gaG92ZXJQcmV2aWV3LmxheW91dEluZm9cbiAgICByZXN1bHQuaG92ZXJQcmV2aWV3ID0gaG92ZXJMYXlvdXRJZCA9PT0gbGF5b3V0SWQgJiYgaG92ZXJJdGVtSWQgPT09IGxheW91dEl0ZW0uaWRcbiAgICByZXN1bHQucHJldmlld0lkID0gcmVzdWx0LmhvdmVyUHJldmlldyA/IGhvdmVyUHJldmlldy5pZCA6IG51bGxcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59KVxuXG5leHBvcnQgY29uc3QgbWFwU3RhdGVUb1dpZGdldFByb3BzOiAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IFdpZGdldFByb3BzID0gY3JlYXRlU2VsZWN0b3IoW1xuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgbGF5b3V0SXRlbS53aWRnZXRJZCkge1xuICAgICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG4gICAgfVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgIWxheW91dEl0ZW0ud2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiBsYXlvdXRJdGVtLnNldHRpbmc/LnBsYWNlaG9sZGVyU3R5bGVcbiAgICB9XG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IExheW91dEl0ZW1Qcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCB9ID0gb3duUHJvcHNcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHM/LltsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gICAgaWYgKGxheW91dEl0ZW0/LnR5cGUgPT09IExheW91dEl0ZW1UeXBlLldpZGdldCAmJiBsYXlvdXRJdGVtLndpZGdldElkKSB7XG4gICAgICByZXR1cm4gc3RhdGUud2lkZ2V0c1J1bnRpbWVJbmZvW2xheW91dEl0ZW0ud2lkZ2V0SWRdXG4gICAgfVxuICB9LFxuICAoc3RhdGU6IElNU3RhdGUsIG93blByb3BzOiBMYXlvdXRJdGVtUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGxheW91dElkLCBsYXlvdXRJdGVtSWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICAgIGlmIChsYXlvdXRJdGVtPy50eXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgIWxheW91dEl0ZW0ud2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiBzdGF0ZS53aWRnZXRzU3RhdGVbbGF5b3V0SXRlbS53aWRnZXRJZF1cbiAgICB9XG4gIH0sXG4gIChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IExheW91dEl0ZW1Qcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF5b3V0SWQgfSA9IG93blByb3BzXG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdXG4gICAgaWYgKGxheW91dEpzb24ucGFyZW50Py50eXBlID09PSBMYXlvdXRQYXJlbnRUeXBlLldpZGdldCkge1xuICAgICAgY29uc3QgcGFyZW50V2lkZ2V0SWQgPSBsYXlvdXRKc29uLnBhcmVudC5pZFxuICAgICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3BhcmVudFdpZGdldElkXVxuICAgICAgcmV0dXJuIC93aWRnZXRzXFwvY29tbW9uXFwvY29udHJvbGxlclxcLz8vLnRlc3Qod2lkZ2V0SnNvbi51cmkpXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5dLCAod2lkZ2V0LCBwbGFjZWhvbGRlclN0eWxlLCB3aWRnZXRSdW50aW1lSW5mbywgd2lkZ2V0U3RhdGUsIGlzSW5Db250cm9sbGVyKSA9PiB7XG4gIGNvbnN0IHN1cHBvcnRJbmxpbmVFZGl0aW5nID0gd2lkZ2V0Py5tYW5pZmVzdD8ucHJvcGVydGllcz8uc3VwcG9ydElubGluZUVkaXRpbmdcbiAgcmV0dXJuIHtcbiAgICBoYXNFbWJlZGRlZExheW91dDogd2lkZ2V0Py5tYW5pZmVzdD8ucHJvcGVydGllcz8uaGFzRW1iZWRkZWRMYXlvdXQgJiYgT2JqZWN0LmtleXMod2lkZ2V0LmxheW91dHMgPz8ge30pLmxlbmd0aCA+IDAsXG4gICAgc3VwcG9ydElubGluZUVkaXRpbmcsXG4gICAgc3VwcG9ydFJlcGVhdDogd2lkZ2V0Py5tYW5pZmVzdD8ucHJvcGVydGllcz8uc3VwcG9ydFJlcGVhdCxcbiAgICBpc0NsYXNzTG9hZGVkOiB3aWRnZXRSdW50aW1lSW5mbz8uaXNDbGFzc0xvYWRlZCA/PyBmYWxzZSxcbiAgICBpc0lubGluZUVkaXRpbmc6IHN1cHBvcnRJbmxpbmVFZGl0aW5nICYmIHdpZGdldFJ1bnRpbWVJbmZvPy5pc0lubGluZUVkaXRpbmcsXG4gICAgaXNJbkNvbnRyb2xsZXIsXG4gICAgdXNlRHJhZ0hhbmRsZXI6IHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/LnVzZURyYWdIYW5kbGVyID8/IGZhbHNlLFxuICAgIHdpZGdldFN0eWxlOiB3aWRnZXQgIT0gbnVsbCA/IHdpZGdldC5zdHlsZSA6IHBsYWNlaG9sZGVyU3R5bGUsXG4gICAgY2FuQ3Jvc3NMYXlvdXRCb3VuZGFyeTogd2lkZ2V0Py5tYW5pZmVzdD8ucHJvcGVydGllcz8uY2FuQ3Jvc3NMYXlvdXRCb3VuZGFyeSxcbiAgICBoYXNFeHRlbnNpb246IHdpZGdldD8ubWFuaWZlc3Q/LmV4dGVuc2lvbnM/Lmxlbmd0aCA+IDAsXG4gICAgd2lkZ2V0SnNvbjogd2lkZ2V0LFxuICAgIHdpZGdldElkOiB3aWRnZXQ/LmlkLFxuICAgIGlzRnVuY3Rpb25hbFdpZGdldDogd2lkZ2V0Py5tYW5pZmVzdD8ud2lkZ2V0VHlwZSAhPT0gV2lkZ2V0VHlwZS5MYXlvdXQsXG4gICAgd2lkZ2V0U3RhdGVcbiAgfVxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2lkZ2V0SGFzRW1iZWRkZWRMYXlvdXQgKHdpZGdldElkOiBzdHJpbmcsIGFwcENvbmZpZzogSU1BcHBDb25maWcpIHtcbiAgY29uc3Qgd2lkZ2V0ID0gYXBwQ29uZmlnPy53aWRnZXRzPy5bd2lkZ2V0SWRdXG5cbiAgaWYgKHdpZGdldD8ubWFuaWZlc3Q/LnByb3BlcnRpZXM/Lmhhc0VtYmVkZGVkTGF5b3V0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHdpZGdldD8ubGF5b3V0cyA/PyB7fSkubGVuZ3RoID4gMFxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbmFsV2lkZ2V0ICh3aWRnZXRJZDogc3RyaW5nLCBhcHBDb25maWc6IElNQXBwQ29uZmlnKSB7XG4gIGNvbnN0IHdpZGdldCA9IGFwcENvbmZpZz8ud2lkZ2V0cz8uW3dpZGdldElkXVxuICBjb25zdCB0eXBlID0gd2lkZ2V0Py5tYW5pZmVzdD8ud2lkZ2V0VHlwZVxuICByZXR1cm4gdHlwZSAhPT0gV2lkZ2V0VHlwZS5MYXlvdXRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2lkZ2V0UGxhY2Vob2xkZXIgKGFwcENvbmZpZzogSU1BcHBDb25maWcsIGl0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzKTogYm9vbGVhbiB7XG4gIGlmICghaXRlbSB8fCBpdGVtLml0ZW1UeXBlICE9PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChpdGVtLmxheW91dEluZm8pIHtcbiAgICAvLyBMYXlvdXQgaXRlbSB3aXRob3V0IHdpZGdldElkXG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkIH0gPSBpdGVtLmxheW91dEluZm9cbiAgICBjb25zdCBsYXlvdXRJdGVtID0gYXBwQ29uZmlnLmxheW91dHM/LltsYXlvdXRJZF0uY29udGVudD8uW2xheW91dEl0ZW1JZF1cblxuICAgIGlmIChsYXlvdXRJdGVtICYmICFsYXlvdXRJdGVtLndpZGdldElkKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGlmICghaXRlbS5sYXlvdXRJbmZvICYmICFpdGVtLnVyaSkge1xuICAgIC8vIE5ldyB3aWRnZXQgd2l0aG91dCB1cmlcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgdmFsdWVzIG9mIGJvdW5kaW5nIGJveCBiMSB3aXRoIHZhbHVlcyBvZiBiMiwgdHJ5IHRvIGtlZXAgdGhlIHVuaXQgb2YgZWFjaCBwcm9wZXJ0eS5cbiAqIEBwYXJhbSBiMVxuICogQHBhcmFtIGIyXG4gKiBAcGFyYW0gY29udGFpbmVyUmVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUJvdW5kaW5nQm94IChiMTogSU1Cb3VuZGluZ0JveCwgYjI6IERPTVJlY3QsIGNvbnRhaW5lclJlY3Q6IERPTVJlY3QpOiBJTUJvdW5kaW5nQm94IHtcbiAgaWYgKCFiMSkge1xuICAgIHJldHVybiBJbW11dGFibGUoe1xuICAgICAgbGVmdDogaXNQZXJjZW50YWdlKGIyLmxlZnQpID8gYjIubGVmdCA6IGAke01hdGgucm91bmQoYjIubGVmdCl9cHhgLFxuICAgICAgcmlnaHQ6IGlzUGVyY2VudGFnZShiMi5yaWdodCkgPyBiMi5yaWdodCA6IGAke01hdGgucm91bmQoYjIucmlnaHQpfXB4YCxcbiAgICAgIHRvcDogaXNQZXJjZW50YWdlKGIyLnRvcCkgPyBiMi50b3AgOiBgJHtNYXRoLnJvdW5kKGIyLnRvcCl9cHhgLFxuICAgICAgYm90dG9tOiBpc1BlcmNlbnRhZ2UoYjIuYm90dG9tKSA/IGIyLmJvdHRvbSA6IGAke01hdGgucm91bmQoYjIuYm90dG9tKX1weGAsXG4gICAgICB3aWR0aDogaXNQZXJjZW50YWdlKGIyLndpZHRoKSA/IGIyLndpZHRoIDogYCR7TWF0aC5yb3VuZChiMi53aWR0aCl9cHhgLFxuICAgICAgaGVpZ2h0OiBpc1BlcmNlbnRhZ2UoYjIuaGVpZ2h0KSA/IGIyLmhlaWdodCA6IGAke01hdGgucm91bmQoYjIuaGVpZ2h0KX1weGBcbiAgICB9KSBhcyBJTUJvdW5kaW5nQm94XG4gIH1cbiAgbGV0IHJlc3VsdCA9IGIxO1xuICBbJ2xlZnQnLCAncmlnaHQnLCAndG9wJywgJ2JvdHRvbScsICd3aWR0aCcsICdoZWlnaHQnXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKHJlc3VsdFtrZXldICE9IG51bGwpIHtcbiAgICAgIHJlc3VsdCA9IHVwZGF0ZUJvdW5kaW5nQm94UHJvcChrZXksIHJlc3VsdCwgYjJba2V5XSwgY29udGFpbmVyUmVjdClcbiAgICB9IGVsc2UgaWYgKGIyW2tleV0gIT0gbnVsbCkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LnNldChrZXksIGAke01hdGgucm91bmQoYjJba2V5XSl9cHhgKVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vKipcbiAqIFVwZGF0ZSBhIHByb3BlcnR5IG9mIHRoZSBib3VuZGluZyBib3hcbiAqIEBwYXJhbSBwcm9wXG4gKiBAcGFyYW0gYlxuICogQHBhcmFtIG5ld1ZhbHVlXG4gKiBAcGFyYW0gY29udGFpbmVyUmVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQm91bmRpbmdCb3hQcm9wIChcbiAgcHJvcDogc3RyaW5nLFxuICBiOiBJTUJvdW5kaW5nQm94LFxuICBuZXdWYWx1ZTogbnVtYmVyIHwgc3RyaW5nLFxuICBjb250YWluZXJSZWN0OiBDbGllbnRSZWN0XG4pIHtcbiAgaWYgKGJbcHJvcF0gPT0gbnVsbCB8fCBiW3Byb3BdID09PSAnYXV0bycpIHtcbiAgICByZXR1cm4gYlxuICB9XG4gIGxldCB1cGRhdGVkID0gYlxuICBpZiAoaXNQZXJjZW50YWdlKGJbcHJvcF0pKSB7XG4gICAgaWYgKHByb3AgPT09ICdsZWZ0JyB8fCBwcm9wID09PSAncmlnaHQnIHx8IHByb3AgPT09ICd3aWR0aCcpIHtcbiAgICAgIGlmIChpc1BlcmNlbnRhZ2UobmV3VmFsdWUpKSB7XG4gICAgICAgIHVwZGF0ZWQgPSBiLnNldChwcm9wLCBuZXdWYWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZWQgPSBiLnNldChwcm9wLCBgJHsoKCtuZXdWYWx1ZSAqIDEwMCkgLyBjb250YWluZXJSZWN0LndpZHRoKS50b0ZpeGVkKDQpfSVgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNQZXJjZW50YWdlKG5ld1ZhbHVlKSkge1xuICAgICAgICB1cGRhdGVkID0gYi5zZXQocHJvcCwgbmV3VmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVkID0gYi5zZXQocHJvcCwgYCR7KCgrbmV3VmFsdWUgKiAxMDApIC8gY29udGFpbmVyUmVjdC5oZWlnaHQpLnRvRml4ZWQoNCl9JWApXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChpc1BlcmNlbnRhZ2UobmV3VmFsdWUpKSB7XG4gICAgICBpZiAocHJvcCA9PT0gJ2xlZnQnIHx8IHByb3AgPT09ICdyaWdodCcgfHwgcHJvcCA9PT0gJ3dpZHRoJykge1xuICAgICAgICB1cGRhdGVkID0gYi5zZXQocHJvcCwgTWF0aC5yb3VuZCgocGFyc2VGbG9hdChgJHtuZXdWYWx1ZX1gKSAqIGNvbnRhaW5lclJlY3Qud2lkdGgpIC8gMTAwKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZWQgPSBiLnNldChwcm9wLCBNYXRoLnJvdW5kKChwYXJzZUZsb2F0KGAke25ld1ZhbHVlfWApICogY29udGFpbmVyUmVjdC5oZWlnaHQpIC8gMTAwKSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzTmFOKCtuZXdWYWx1ZSkpIHtcbiAgICAgICAgdXBkYXRlZCA9IGIud2l0aG91dChwcm9wIGFzIGFueSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZWQgPSBiLnNldChwcm9wLCBgJHtNYXRoLnJvdW5kKCtuZXdWYWx1ZSl9cHhgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdXBkYXRlZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVsYXRpdmVDbGllbnRSZWN0IChyMTogRE9NUmVjdCwgcjI6IERPTVJlY3QpOiBET01SZWN0ICYgeyBpZDogc3RyaW5nIH0ge1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IHIxLmxlZnQgLSByMi5sZWZ0LFxuICAgIHRvcDogcjEudG9wIC0gcjIudG9wLFxuICAgIHJpZ2h0OiByMS5yaWdodCxcbiAgICBib3R0b206IHIxLmJvdHRvbSxcbiAgICB3aWR0aDogcjEud2lkdGgsXG4gICAgaGVpZ2h0OiByMS5oZWlnaHQsXG4gICAgaWQ6IG51bGxcbiAgfSBhcyBET01SZWN0ICYgeyBpZDogc3RyaW5nIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUlRMICgpIHtcbiAgcmV0dXJuIGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb250ZXh0Py5pc1JUTCA/PyBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBc3BlY3RSYXRpbyAocmF0aW86IG51bWJlciB8IHN0cmluZyk6IG51bWJlciB7XG4gIGxldCB3aWR0aCA9IDEwMFxuICBsZXQgaGVpZ2h0ID0gMTAwXG4gIGlmICh0eXBlb2YgcmF0aW8gPT09ICdudW1iZXInKSB7XG4gICAgd2lkdGggPSAxMDBcbiAgICBoZWlnaHQgPSBNYXRoLnJvdW5kKHJhdGlvICogMTAwKVxuICB9IGVsc2UgaWYgKHR5cGVvZiByYXRpbyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBpdGVtcyA9IHJhdGlvLnNwbGl0KCc6JylcbiAgICB3aWR0aCA9IHBhcnNlSW50KGl0ZW1zWzBdLCAxMClcbiAgICBoZWlnaHQgPSBwYXJzZUludChpdGVtc1sxXSwgMTApXG4gIH1cbiAgcmV0dXJuIHdpZHRoIC8gaGVpZ2h0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRTdHlsZUFycmF5IChkYXRhQXJyYXk6IG51bWJlcltdKTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0ge1xuICBpZiAoIWRhdGFBcnJheSB8fCBkYXRhQXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFswLCAwLCAwLCAwXVxuICB9IGVsc2UgaWYgKGRhdGFBcnJheS5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gW2RhdGFBcnJheVswXSwgZGF0YUFycmF5WzBdLCBkYXRhQXJyYXlbMF0sIGRhdGFBcnJheVswXV1cbiAgfSBlbHNlIGlmIChkYXRhQXJyYXkubGVuZ3RoID09PSAyKSB7IC8vIHRvcC9ib3R0b20sIGxlZnQvcmlnaHRcbiAgICByZXR1cm4gW2RhdGFBcnJheVswXSwgZGF0YUFycmF5WzFdLCBkYXRhQXJyYXlbMF0sIGRhdGFBcnJheVsxXV1cbiAgfSBlbHNlIGlmIChkYXRhQXJyYXkubGVuZ3RoID09PSAzKSB7XG4gICAgcmV0dXJuIFtkYXRhQXJyYXlbMF0sIGRhdGFBcnJheVsxXSwgZGF0YUFycmF5WzJdLCAwXVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbZGF0YUFycmF5WzBdLCBkYXRhQXJyYXlbMV0sIGRhdGFBcnJheVsyXSwgZGF0YUFycmF5WzNdXVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxIZWlnaHRPZkxheW91dEl0ZW0gKGNvbnRhaW5lckhlaWdodDogbnVtYmVyLCBsYXlvdXRJdGVtOiBJTUxheW91dEl0ZW1Kc29uKTogeyBoZWlnaHQ/OiBudW1iZXIsIHNldHRpbmc6IGFueSB9IHtcbiAgY29uc3Qgc2V0dGluZyA9IGxheW91dEl0ZW0uc2V0dGluZyA/PyB7fVxuICBjb25zdCBtb2RlID0gZ2V0TGF5b3V0SXRlbVNpemVNb2RlKCdoZWlnaHQnLCBsYXlvdXRJdGVtLmJib3gsIHNldHRpbmcuYXV0b1Byb3BzKVxuXG4gIGxldCByZXN1bHRcbiAgaWYgKHNldHRpbmcuaGVpZ2h0TW9kZSA9PT0gJ3JhdGlvJykge1xuICAgIHJlc3VsdCA9IHtcbiAgICAgIHNldHRpbmc6IHtcbiAgICAgICAgaGVpZ2h0TW9kZTogJ3JhdGlvJyxcbiAgICAgICAgYXNwZWN0UmF0aW86IHNldHRpbmcuYXNwZWN0UmF0aW8gPz8gMSxcbiAgICAgICAgYXV0b1Byb3BzOiB7IGhlaWdodDogTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20gfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChtb2RlICE9PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWlnaHQ6IG1vZGUgPT09IExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaCA/IGNvbnRhaW5lckhlaWdodCA6IG51bGwsXG4gICAgICBzZXR0aW5nOiB7XG4gICAgICAgIGF1dG9Qcm9wczogeyBoZWlnaHQ6IG1vZGUgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBmaXQgb3IgZml4ZWQgb3Igbm8gaGVpZ2h0IG1vZGVcbiAgICBsZXQgaGVpZ2h0ID0gbGF5b3V0SXRlbS5iYm94Py5oZWlnaHQgPz8gY29udGFpbmVySGVpZ2h0XG4gICAgaWYgKGlzUGVyY2VudGFnZShoZWlnaHQpKSB7XG4gICAgICBoZWlnaHQgPSBmcm9tUmF0aW8oaGVpZ2h0LCBjb250YWluZXJIZWlnaHQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGhlaWdodCA9IHBhcnNlSW50KGhlaWdodCBhcyBzdHJpbmcpXG4gICAgfVxuICAgIHJlc3VsdCA9IHtcbiAgICAgIGhlaWdodCxcbiAgICAgIHNldHRpbmc6IHtcbiAgICAgICAgaGVpZ2h0TW9kZTogJ2ZpeGVkJyxcbiAgICAgICAgYXV0b1Byb3BzOiB7IGhlaWdodDogTGF5b3V0SXRlbVNpemVNb2Rlcy5DdXN0b20gfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcHBDb25maWcgKCk6IElNQXBwQ29uZmlnIHtcbiAgcmV0dXJuIHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlclxuICAgID8gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBDb25maWdcbiAgICA6IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRTaXplTW9kZSAoKTogQnJvd3NlclNpemVNb2RlIHtcbiAgcmV0dXJuIHdpbmRvdz8uamltdUNvbmZpZz8uaXNCdWlsZGVyXG4gICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXI/LmJyb3dzZXJTaXplTW9kZVxuICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmJyb3dzZXJTaXplTW9kZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFBhZ2VJZCAoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlclxuICAgID8gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBSdW50aW1lSW5mbz8uY3VycmVudFBhZ2VJZFxuICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFJ1bnRpbWVJbmZvPy5jdXJyZW50UGFnZUlkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50RGlhbG9nSWQgKCk6IHN0cmluZyB7XG4gIHJldHVybiB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwUnVudGltZUluZm8/LmN1cnJlbnREaWFsb2dJZFxuICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFJ1bnRpbWVJbmZvPy5jdXJyZW50RGlhbG9nSWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZVBhZ2VQYXJ0ICgpOiBQYWdlUGFydCB7XG4gIHJldHVybiB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwUnVudGltZUluZm8/LmFjdGl2ZVBhZ2VQYXJ0XG4gICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwUnVudGltZUluZm8/LmFjdGl2ZVBhZ2VQYXJ0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50RGlhbG9nUm9vdExheW91dElkICgpOiBzdHJpbmcge1xuICBjb25zdCBhcHBDb25maWcgPSB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXG4gIGNvbnN0IGRpYWxvZ0lkID0gZ2V0Q3VycmVudERpYWxvZ0lkKClcbiAgY29uc3QgYnJvd3NlclNpemVNb2RlID0gZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgcmV0dXJuIGFwcENvbmZpZz8uZGlhbG9nc1tkaWFsb2dJZF0/LmxheW91dD8uW2Jyb3dzZXJTaXplTW9kZV1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRQYWdlUm9vdExheW91dElkICgpOiBzdHJpbmcge1xuICBjb25zdCBhcHBDb25maWcgPSB3aW5kb3cuamltdUNvbmZpZy5pc0J1aWxkZXJcbiAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXG4gIGNvbnN0IHBhZ2VJZCA9IGdldEN1cnJlbnRQYWdlSWQoKVxuICBjb25zdCBicm93c2VyU2l6ZU1vZGUgPSBnZXRDdXJyZW50U2l6ZU1vZGUoKVxuICByZXR1cm4gYXBwQ29uZmlnPy5wYWdlc1twYWdlSWRdPy5sYXlvdXQ/Llticm93c2VyU2l6ZU1vZGVdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWFkZXJSb290TGF5b3V0SWQgKCk6IHN0cmluZyB7XG4gIGNvbnN0IGFwcENvbmZpZyA9IHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlclxuICAgID8gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBDb25maWdcbiAgICA6IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbiAgY29uc3QgYnJvd3NlclNpemVNb2RlID0gZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgcmV0dXJuIGFwcENvbmZpZz8uaGVhZGVyPy5sYXlvdXQ/Llticm93c2VyU2l6ZU1vZGVdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb290ZXJSb290TGF5b3V0SWQgKCk6IHN0cmluZyB7XG4gIGNvbnN0IGFwcENvbmZpZyA9IHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlclxuICAgID8gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBDb25maWdcbiAgICA6IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcbiAgY29uc3QgYnJvd3NlclNpemVNb2RlID0gZ2V0Q3VycmVudFNpemVNb2RlKClcbiAgcmV0dXJuIGFwcENvbmZpZz8uZm9vdGVyPy5sYXlvdXQ/Llticm93c2VyU2l6ZU1vZGVdXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgcmVjdDEgY29udGFpbnMgcmVjdDJcbiAqIEBwYXJhbSByZWN0MVxuICogQHBhcmFtIHJlY3QyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWlucyAocmVjdDE6IENsaWVudFJlY3QsIHJlY3QyOiBDbGllbnRSZWN0KTogYm9vbGVhbiB7XG4gIHJldHVybiByZWN0Mi5sZWZ0ID49IHJlY3QxLmxlZnQgJiYgcmVjdDIubGVmdCArIHJlY3QyLndpZHRoIDw9IHJlY3QxLmxlZnQgKyByZWN0MS53aWR0aCAmJlxuICAgIHJlY3QyLnRvcCA+PSByZWN0MS50b3AgJiYgcmVjdDIudG9wICsgcmVjdDIuaGVpZ2h0IDw9IHJlY3QxLnRvcCArIHJlY3QxLmhlaWdodFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0cyAocjE6IENsaWVudFJlY3QsIHIyOiBDbGllbnRSZWN0KTogYm9vbGVhbiB7XG4gIHJldHVybiAhKHIyLmxlZnQgPiByMS5sZWZ0ICsgcjEud2lkdGggfHxcbiAgICByMi5sZWZ0ICsgcjIud2lkdGggPCByMS5sZWZ0IHx8XG4gICAgcjIudG9wID4gcjEudG9wICsgcjEuaGVpZ2h0IHx8XG4gICAgcjIudG9wICsgcjIuaGVpZ2h0IDwgcjEudG9wKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplTGluZWFyVW5pdCAodmFsdWU6IHN0cmluZyB8IExpbmVhclVuaXQpOiBzdHJpbmcge1xuICBsZXQgdW5pdDogRGlzdGFuY2VVbml0c1xuICBsZXQgZGlzdGFuY2U6IG51bWJlclxuICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgdW5pdCA9IHZhbHVlLnVuaXQgPz8gRGlzdGFuY2VVbml0cy5QSVhFTFxuICAgIGRpc3RhbmNlID0gdmFsdWUuZGlzdGFuY2UgPz8gMFxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJldCA9IHBvbGlzaGVkLmdldFZhbHVlQW5kVW5pdCh2YWx1ZSlcbiAgICB1bml0ID0gcmV0Py5bMV0gPz8gRGlzdGFuY2VVbml0cy5QSVhFTFxuICAgIGRpc3RhbmNlID0gcmV0Py5bMF0gPz8gMFxuICB9XG4gIC8vIEtlZXAgb25lIGRlY2ltYWwgaW4gcGVyY2VudGFnZSBhbmQgdXNlIGludGVnZXIgaW4gcGl4ZWxcbiAgZGlzdGFuY2UgPSB1bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UgPyBNYXRoLnJvdW5kKGRpc3RhbmNlICogMTApIC8gMTAgOiBNYXRoLnJvdW5kKGRpc3RhbmNlKVxuICByZXR1cm4gYCR7ZGlzdGFuY2V9JHt1bml0fWBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExheW91dEl0ZW1TaXplTW9kZSAoc2lkZTogJ3dpZHRoJyB8ICdoZWlnaHQnLCBiYm94OiBJTUJvdW5kaW5nQm94LCBhdXRvUHJvcHM6IGFueSk6IExheW91dEl0ZW1TaXplTW9kZXMge1xuICBjb25zdCBtb2RlID0gYXV0b1Byb3BzPy5bc2lkZV1cbiAgY29uc3QgZmlyc3QgPSBzaWRlID09PSAnd2lkdGgnID8gJ2xlZnQnIDogJ3RvcCdcbiAgY29uc3QgbGFzdCA9IHNpZGUgPT09ICd3aWR0aCcgPyAncmlnaHQnIDogJ2JvdHRvbSdcblxuICBpZiAoIW1vZGUpIHsgLy8gZmFsc2Ugb3IgdW5kZWZpbmVkXG4gICAgaWYgKGJib3hbc2lkZV0gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tXG4gICAgfSBlbHNlIGlmIChiYm94W2ZpcnN0XSAhPSBudWxsICYmIGJib3hbbGFzdF0gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaFxuICAgIH1cbiAgICByZXR1cm4gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvXG4gIH1cblxuICBpZiAobW9kZSA9PT0gdHJ1ZSkgeyAvLyB3aWR0aCBvciBoZWlnaHQgaXMgYXV0b1xuICAgIGlmIChiYm94W2ZpcnN0XSAhPSBudWxsICYmIGJib3hbbGFzdF0gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIExheW91dEl0ZW1TaXplTW9kZXMuU3RyZXRjaFxuICAgIH1cbiAgICByZXR1cm4gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvXG4gIH1cbiAgc3dpdGNoIChtb2RlKSB7XG4gICAgY2FzZSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG86XG4gICAgICByZXR1cm4gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvXG4gICAgY2FzZSBMYXlvdXRJdGVtU2l6ZU1vZGVzLlN0cmV0Y2g6XG4gICAgICByZXR1cm4gTGF5b3V0SXRlbVNpemVNb2Rlcy5TdHJldGNoXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRVc2VBc3BlY3RSYXRpbyAoaXRlbVNldHRpbmc6IENvbW1vbkxheW91dEl0ZW1TZXR0aW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBpdGVtU2V0dGluZy5oZWlnaHRNb2RlID09PSAncmF0aW8nICYmIGl0ZW1TZXR0aW5nLmFzcGVjdFJhdGlvICE9IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdjZCAoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xuICBsZXQgbSA9IE1hdGgubWF4KHgsIHkpXG4gIGxldCBuID0gTWF0aC5taW4oeCwgeSlcbiAgd2hpbGUgKG4gIT09IDApIHtcbiAgICBjb25zdCB0ZW1wID0gblxuICAgIG4gPSBtICUgblxuICAgIG0gPSB0ZW1wXG4gIH1cbiAgcmV0dXJuIG1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZU9uZWJ5T25lQW5pbWF0aW9uIChwcm9wczogYW55KSB7XG4gIGNvbnN0IHsgZGVsYXksIGlzTGFzdENoaWxkIH0gPSBwcm9wc1xuICByZXR1cm4geyBkZWxheSwgaXNMYXN0Q2hpbGQgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfY29yZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2xheW91dHNfbGF5b3V0X3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV90aGVtZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IGxvYWRNZXNzYWdlIH0gZnJvbSAnLi9saWIvYnVpbGRlci9idWlsZGVyLWxvY2FsZSdcbmltcG9ydCB0eXBlIHsgUGFnZUNvbnRleHRQcm9wcywgVmlld1Zpc2liaWxpdHlDb250ZXh0UHJvcHMgfSBmcm9tICcuL2xpYi9idWlsZGVyL3BhZ2UtY29udGV4dCdcbmltcG9ydCB7IFBhZ2VDb250ZXh0LCBQYWdlVmlzaWJpbGl0eUNvbnRleHQsIFZpZXdWaXNpYmlsaXR5Q29udGV4dCwgVmlld3BvcnRWaXNpYmlsaXR5Q29udGV4dCB9IGZyb20gJy4vbGliL2J1aWxkZXIvcGFnZS1jb250ZXh0J1xuaW1wb3J0IHR5cGUgeyBMYXlvdXRDb250ZXh0UHJvcHMgfSBmcm9tICcuL2xpYi9idWlsZGVyL2xheW91dC1jb250ZXh0J1xuaW1wb3J0IHsgTGF5b3V0Q29udGV4dCB9IGZyb20gJy4vbGliL2J1aWxkZXIvbGF5b3V0LWNvbnRleHQnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vbGliL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuXG5pbXBvcnQgRml4ZWRMYXlvdXRWaWV3ZXIgZnJvbSAnLi9saWIvZml4ZWQtbGF5b3V0L3J1bnRpbWUvbGF5b3V0J1xuaW1wb3J0IENvbHVtbkxheW91dFZpZXdlciBmcm9tICcuL2xpYi9jb2x1bW4tbGF5b3V0L3J1bnRpbWUvbGF5b3V0J1xuaW1wb3J0IFJvd0xheW91dFZpZXdlciBmcm9tICcuL2xpYi9yb3ctbGF5b3V0L3J1bnRpbWUvbGF5b3V0J1xuaW1wb3J0IEdyaWRMYXlvdXRWaWV3ZXIgZnJvbSAnLi9saWIvZ3JpZC1sYXlvdXQvcnVudGltZS9sYXlvdXQnXG5pbXBvcnQgeyBXaWRnZXRSZW5kZXJlciB9IGZyb20gJy4vbGliL3J1bnRpbWUvd2lkZ2V0LXJlbmRlcmVyJ1xuaW1wb3J0IHsgU2VjdGlvblJlbmRlcmVyIH0gZnJvbSAnLi9saWIvcnVudGltZS9zZWN0aW9uLXJlbmRlcmVyJ1xuaW1wb3J0IFBhZ2VSZW5kZXJlciBmcm9tICcuL2xpYi9ydW50aW1lL3BhZ2UtcmVuZGVyZXInXG5pbXBvcnQgTGF5b3V0RW50cnkgZnJvbSAnLi9saWIvcnVudGltZS9sYXlvdXQtZW50cnknXG5pbXBvcnQgTGF5b3V0SXRlbSBmcm9tICcuL2xpYi9ydW50aW1lL2xheW91dC1pdGVtJ1xuaW1wb3J0ICogYXMgc2VhcmNoVXRpbHMgZnJvbSAnLi9saWIvc2VhcmNoJ1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi9saWIvdXRpbHMnXG5leHBvcnQgeyByZWdpc3RlckxheW91dEJ1aWxkZXIsIHJlZ2lzdGVyTGF5b3V0Vmlld2VyLCBmaW5kTGF5b3V0QnVpbGRlciwgZmluZExheW91dFZpZXdlciB9IGZyb20gJy4vbGliL2xheW91dC1mYWN0b3J5J1xuZXhwb3J0IHR5cGUgeyBGbGF0Q29udGFpbmVyTWFwcyB9IGZyb20gJy4vbGliL3NlYXJjaC9jb250ZW50cydcblxuZXhwb3J0IHtcbiAgTGF5b3V0RW50cnksXG4gIFBhZ2VSZW5kZXJlcixcbiAgRml4ZWRMYXlvdXRWaWV3ZXIsXG4gIENvbHVtbkxheW91dFZpZXdlcixcbiAgUm93TGF5b3V0Vmlld2VyLFxuICBHcmlkTGF5b3V0Vmlld2VyLFxuICBXaWRnZXRSZW5kZXJlcixcbiAgU2VjdGlvblJlbmRlcmVyLFxuICBMYXlvdXRJdGVtLFxuICBQYWdlQ29udGV4dCxcbiAgdHlwZSBQYWdlQ29udGV4dFByb3BzLFxuICBQYWdlVmlzaWJpbGl0eUNvbnRleHQsXG4gIFZpZXdWaXNpYmlsaXR5Q29udGV4dCxcbiAgVmlld3BvcnRWaXNpYmlsaXR5Q29udGV4dCxcbiAgdHlwZSBWaWV3VmlzaWJpbGl0eUNvbnRleHRQcm9wcyxcbiAgTGF5b3V0Q29udGV4dCxcbiAgdHlwZSBMYXlvdXRDb250ZXh0UHJvcHMsXG4gIGRlZmF1bHRNZXNzYWdlcyxcbiAgdXRpbHMsXG4gIHNlYXJjaFV0aWxzXG59XG5cbmV4cG9ydCAqIGZyb20gJy4vbGliL3R5cGVzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdCAoKSB7XG4gIHJldHVybiBhd2FpdCBQcm9taXNlLmFsbChbbG9hZE1lc3NhZ2UoKV0pXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=